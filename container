#!/usr/bin/env python


import types
import sys
import base64
utils_module=types.ModuleType("utils")
#setattr(utils_module,"__file__",__file__)
exec(base64.b64decode(b'aW1wb3J0IHN1YnByb2Nlc3MKaW1wb3J0IHJlCmltcG9ydCB0ZW1wZmlsZQppbXBvcnQgb3MKaW1wb3J0IHBhdGhsaWIKaW1wb3J0IHNpZ25hbCAKaW1wb3J0IHRpbWUKaW1wb3J0IHN5cwppbXBvcnQgdHlwaW5nCmltcG9ydCBzaHV0aWwKaW1wb3J0IHRocmVhZGluZwppbXBvcnQgY29udGV4dGxpYgppbXBvcnQgd2FybmluZ3MKCmZvciB2YXIgaW4gWyJST09UIiwiR0xPQkFMUyIsIkNMQVNTIiwiZ2V0X2FsbF9pdGVtcyJdOgogICAgZ2xvYmFscygpW3Zhcl09Tm9uZQogICAgCmRlZiBnZXRfdGVtcGRpcigpOgogICAgaWYgb3MudW5hbWUoKS5zeXNuYW1lPT0iRGFyd2luIjoKICAgICAgICByZXR1cm4gIi90bXAiCiAgICBlbHNlOgogICAgICAgIHJldHVybiB0ZW1wZmlsZS5nZXR0ZW1wZGlyKCkKICAgIApjbGFzcyBEb2VzTm90RXhpc3QoRXhjZXB0aW9uKToKICAgIHBhc3MKCmRlZiBnZXRfdmFsdWUodmFyaWFibGUsZGVmYXVsdCk6CglpZiBub3QgdmFyaWFibGU6CgkJcmV0dXJuIGRlZmF1bHQKCWVsc2U6CgkJcmV0dXJuIHZhcmlhYmxlCgpkZWYgZ2V0X3Jvb3RfZGlyZWN0b3J5KHJvb3RfdmFyaWFibGU9Tm9uZSxkZWZhdWx0X3ZhbHVlPU5vbmUpOgogICAgcm9vdF92YXJpYWJsZT1nZXRfdmFsdWUocm9vdF92YXJpYWJsZSxmIntDTEFTUy5fX25hbWVfXy51cHBlcigpfV9ST09UIikKICAgIGRlZmF1bHRfdmFsdWU9Z2V0X3ZhbHVlKGRlZmF1bHRfdmFsdWUsZiJ7b3MuZW52aXJvblsnSE9NRSddfS97Q0xBU1MuX19uYW1lX18udGl0bGUoKX1zIikKICAgIHJldHVybiBvcy5wYXRoLmV4cGFuZHVzZXIob3MuZ2V0ZW52KHJvb3RfdmFyaWFibGUsZGVmYXVsdF92YWx1ZSkpCgoKZGVmIGxpc3RfaXRlbXNfaW5fcm9vdChuYW1lcyxmbGFncyk6CiAgICBnbG9iYWwgZ2V0X2FsbF9pdGVtcwogICAgaWYgbm90IGdldF9hbGxfaXRlbXM6CiAgICAgICAgZ2V0X2FsbF9pdGVtcyA9IGxhbWJkYSByb290OiBbXyBmb3IgXyBpbiBzb3J0ZWQob3MubGlzdGRpcihyb290ICkpIGlmIG5vdCBfLnN0YXJ0c3dpdGgoJy4nKSBdICNGYWxsIGJhY2sgdG8gZGVmYXVsdCBpZiBubyBzcGVjaWFsIGZ1bmN0aW9uIGlzIGRlZmluZWQKICAgICAgICAKICAgIEFsbD1nZXRfYWxsX2l0ZW1zKFJPT1QpCiAgICAjQWxsPVtfIGZvciBfIGluIHNvcnRlZChvcy5saXN0ZGlyKFJPT1QpKSBpZiBub3QgXy5zdGFydHN3aXRoKCcuJykgXQogICAgCiAgICBmb3IgZmxhZyBpbiBbInN0YXJ0ZWQiLCJzdG9wcGVkIiwiZW5hYmxlZCIsImRpc2FibGVkIl06CiAgICAgICAgaWYgZmxhZyBpbiBmbGFnczoKICAgICAgICAgICAgbmFtZXMrPVtfIGZvciBfIGluIEFsbCBpZiBmbGFnLnRpdGxlKCkgaW4gQ0xBU1MoXykuU3RhdHVzKCkgXQogICAgICAgICAgICBkZWwgZmxhZ3NbZmxhZ10KCiAgICBpZiAiYWxsIiBpbiBmbGFnczoKICAgICAgICBuYW1lcys9QWxsCiAgICAgICAgZGVsIGZsYWdzWyJhbGwiXQogICAgaWYgbmFtZXM9PVtdOgogICAgICAgIHByaW50KGYiTm8ge0NMQVNTLl9fbmFtZV9fLmxvd2VyKCl9cyBzcGVjaWZpZWQhIikKICAgICAgICBleGl0KCkKICAgIHJldHVybiBuYW1lcwoKZGVmIGZsYXR0ZW5fbGlzdChpdGVtcyk6CiAgICAiIiJZaWVsZCBpdGVtcyBmcm9tIGFueSBuZXN0ZWQgaXRlcmFibGUuIiIiCiAgICBmb3IgeCBpbiBpdGVtczoKICAgICAgICBpZiBpc2luc3RhbmNlKHgsIHR5cGluZy5JdGVyYWJsZSkgYW5kIG5vdCBpc2luc3RhbmNlKHgsIChzdHIsIGJ5dGVzKSk6CiAgICAgICAgICAgIGZvciBzdWJfeCBpbiBmbGF0dGVuX2xpc3QoeCk6CiAgICAgICAgICAgICAgICB5aWVsZCBzdWJfeAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHlpZWxkIHgKCmRlZiBwcmludF9saXN0KGwpOgogICAgZm9yIGVsZW1lbnQgaW4gbDoKICAgICAgICBpZiBlbGVtZW50IGlzIE5vbmU6CiAgICAgICAgICAgIHByaW50KGVuZD0nJykKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludChlbGVtZW50KQoKZGVmIHNwbGl0X3N0cmluZ19ieV9jaGFyKHN0cmluZyxjaGFyPSc6Jyk6CiAgICBQQVRURVJOID0gcmUuY29tcGlsZShyZicnJygoPzpbXlx7Y2hhcn0iJ118IlteIl0qInwnW14nXSonKSspJycnKQogICAgcmV0dXJuIFtfIGZvciBfIGluIGxpc3QoUEFUVEVSTi5zcGxpdChzdHJpbmcpKSBpZiBfIG5vdCBpbiBbJycsIGNoYXJdXQoKCmRlZiBzaGVsbF9jb21tYW5kKGNvbW1hbmQsc3Rkb3V0PXN1YnByb2Nlc3MuUElQRSxzdGRlcnI9c3VicHJvY2Vzcy5TVERPVVQsYXJiaXRyYXJ5PUZhbHNlLGJsb2NrPVRydWUsZW52PU5vbmUpOgogICAgcHJvY2VzcyA9IHN1YnByb2Nlc3MuUG9wZW4oY29tbWFuZCwgc3Rkb3V0PXN0ZG91dCwgc3RkZXJyPXN0ZGVycix1bml2ZXJzYWxfbmV3bGluZXM9VHJ1ZSxzaGVsbD1hcmJpdHJhcnksZW52PWVudikKICAgIGlmIGJsb2NrOgogICAgICAgIHJldHVybiBwcm9jZXNzLmNvbW11bmljYXRlKClbMF0KCmRlZiB3YWl0X3VudGlsX3BpZF9leGl0cyhwaWQpOgogICAgCiAgICBkZWYgcGlkX2V4aXN0cyhwaWQpOiAgIAogICAgICAgICIiIiBDaGVjayBGb3IgdGhlIGV4aXN0ZW5jZSBvZiBhIHVuaXggcGlkLiAiIiIKICAgICAgICBpZiBzaGVsbF9jb21tYW5kKFsicHMiLCAiLW9zdGF0PSIsc3RyKHBpZCldKT09IlpcbiI6ICNab21iaWUKICAgICAgICAKICAgICAgICAgICAgcmV0dXJuIEZhbHNlIAogICAgICAgIHRyeToKICAgICAgICAgICAgb3Mua2lsbChwaWQsIDApCiAgICAgICAgZXhjZXB0IE9TRXJyb3I6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIAogICAgd2hpbGUgcGlkX2V4aXN0cyhwaWQpOgogICAgICAgIHRpbWUuc2xlZXAoMC4yNSkKICAgICAgICAKZGVmIGtpbGxfcHJvY2Vzc19ncmFjZWZ1bGx5KHBpZCk6CiAgICBwcmludChwaWQpCiAgICB0cnk6CiAgICAgICAgb3Mua2lsbChwaWQsc2lnbmFsLlNJR1RFUk0pCiAgICAgICAgdHJ5OgogICAgICAgICAgICBvcy53YWl0cGlkKHBpZCwwKQogICAgICAgIGV4Y2VwdCBDaGlsZFByb2Nlc3NFcnJvcjogI05vdCBhIGNoaWxkIHByb2Nlc3Mgc28gbW92ZSBvbgogICAgICAgICAgICBwYXNzCiAgICAgICAgd2FpdF91bnRpbF9waWRfZXhpdHMocGlkKQogICAgZXhjZXB0IFByb2Nlc3NMb29rdXBFcnJvcjoKICAgICAgICBwYXNzCiAgICAKZGVmIGV4dHJhY3RfYXJndW1lbnRzKCk6CiAgICBhcmd1bWVudHM9c3lzLmFyZ3ZbMTpdCiAgICB0cnk6CiAgICAgICAgRlVOQ1RJT049YXJndW1lbnRzWzBdCiAgICBleGNlcHQgSW5kZXhFcnJvcjoKICAgICAgICBwcmludCgiTm8gZnVuY3Rpb24gc3BlY2lmaWVkISIpCiAgICAgICAgZXhpdCgpCiAgICBhcmd1bWVudHM9YXJndW1lbnRzWzE6XQogICAgCiAgICBOQU1FUz1bXQogICAgRkxBR1M9YXJndW1lbnRzCiAgICBmb3IgaSBpbiByYW5nZShsZW4oYXJndW1lbnRzKSk6CiAgICAgICAgaWYgbm90IGFyZ3VtZW50c1tpXS5zdGFydHN3aXRoKCItLSIpOgogICAgICAgICAgICBGTEFHUz1hcmd1bWVudHNbOmldCiAgICAgICAgICAgIE5BTUVTPWFyZ3VtZW50c1tpOl0KICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgCiAgICBmbGFnc190ZW1wPXt9CiAgICBmb3IgZmxhZyBpbiBGTEFHUzoKICAgICAgICBmbGFnPWZsYWcuc3BsaXQoJz0nLDEpICNTcGxpdCBldmVyeSBmbGFnIGluIEZMQUdTIGJ5ICc9JwogICAgICAgIGlmIGxlbihmbGFnKT09MToKICAgICAgICAgICAgZmxhZy5hcHBlbmQoJycpICNQYWQgb3V0IHRoZSBmbGFnIGFycmF5CiAgICAgICAgZmxhZ1swXT1mbGFnWzBdWzI6XSAjUmVtb3ZlIHRoZSAnLS0nCiAgICAgICAgZmxhZ3NfdGVtcFtmbGFnWzBdXT1mbGFnWzFdCiAgICAgICAgCiAgICBGTEFHUz1mbGFnc190ZW1wCiAgICByZXR1cm4gKE5BTUVTLEZMQUdTLEZVTkNUSU9OKQoKZGVmIGFkZF9lbnZpcm9ubWVudF92YXJpYWJsZV90b19zdHJpbmcoc3RyaW5nLGVudl92YXIpOgogICAgcmV0dXJuIHN0cmluZytmIjsgZXhwb3J0IHtlbnZfdmFyfSIKCmRlZiB3YWl0KGRlbGF5PU5vbmUpOgogICAgdGhyZWFkaW5nLkV2ZW50KCkud2FpdCh0aW1lb3V0PWRlbGF5KQoKZGVmIGV4ZWN1dGVfY2xhc3NfbWV0aG9kKGNsYXNzX2luc3RhbmNlLGZ1bmN0aW9uKToKICAgIGlmIG5vdCBjYWxsYWJsZShnZXRhdHRyKGNsYXNzX2luc3RhbmNlLCBmdW5jdGlvbi50aXRsZSgpLE5vbmUpKToKICAgICAgICAgICAgcHJpbnQoZiJDb21tYW5kIHtmdW5jdGlvbn0gZG9lc24ndCBleGlzdCEiKQogICAgICAgICAgICBleGl0KCkKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIGxpc3QoZmxhdHRlbl9saXN0KFtnZXRhdHRyKGNsYXNzX2luc3RhbmNlLGZ1bmN0aW9uLnRpdGxlKCkpKCldKSkKCmRlZiBjaGVja19pZl9lbGVtZW50X2FueV9pc19pbl9saXN0KGVsZW1lbnRzLF9saXN0KToKICAgIHJldHVybiBhbnkoXyBpbiBfbGlzdCBmb3IgXyBpbiBlbGVtZW50cykKICAgIApkZWYgZXhwb3J0X21ldGhvZHNfZnJvbV9zZWxmKHNlbGYpOgogICAgbWV0aG9kcz17fQogICAgZm9yIGZ1bmMgaW4gW2Z1bmMgZm9yIGZ1bmMgaW4gZGlyKHNlbGYpIGlmIGNhbGxhYmxlKGdldGF0dHIoc2VsZiwgZnVuYykpIGFuZCBub3QgZnVuYy5zdGFydHN3aXRoKCdfXycpXToKICAgICAgICBpZiBub3QgZnVuYy5zdGFydHN3aXRoKCdfJyk6CiAgICAgICAgICAgIG1ldGhvZHNbZnVuY109Z2V0YXR0cihzZWxmLGZ1bmMpCiAgICAKICAgIHJldHVybiBtZXRob2RzCgpkZWYgZXhlY3V0ZShzZWxmLGZpbGUpOgogICAgaWYgbm90IGlzaW5zdGFuY2UoZmlsZSxzdHIpOiAjQXNzdW1lIGZpbGUgaXMgZmlsZSBvYmplY3QKICAgICAgICBjb2RlPWZpbGUucmVhZCgpCiAgICAgICAgZmlsZS5jbG9zZSgpCiAgICBlbHNlOgogICAgICAgIGNvZGU9ZmlsZQogICAgcmV0dXJuIGV4ZWMoY29kZSxzZWxmLmdsb2JhbHMsbG9jYWxzKCkpCiAgICAKZGVmIHdyYXBfYWxsX21ldGhvZHNfaW5fY2xhc3Nfd2l0aF9jaGRpcl9jb250ZXh0bWFuYWdlcihzZWxmLHBhdGgpOgogICAgQGNvbnRleHRsaWIuY29udGV4dG1hbmFnZXIKICAgIGRlZiBzZXRfZGlyZWN0b3J5KHBhdGgpOgogICAgICAgICIiIlNldHMgdGhlIGN3ZCB3aXRoaW4gdGhlIGNvbnRleHQKICAgIAogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIHBhdGggKFBhdGgpOiBUaGUgcGF0aCB0byB0aGUgY3dkCiAgICAKICAgICAgICBZaWVsZHM6CiAgICAgICAgICAgIE5vbmUKICAgICAgICAiIiIKICAgIAogICAgICAgIG9yaWdpbiA9IG9zLnBhdGguYWJzcGF0aChvcy5nZXRjd2QoKSkKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlmIG9zLnBhdGguaXNkaXIocGF0aCk6CiAgICAgICAgICAgICAgICBvcy5jaGRpcihwYXRoKQogICAgICAgICAgICB5aWVsZAogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgICAgICBvcy5jaGRpcihvcmlnaW4pCiAgICAKICAgIGRlZiB3cmFwcGVyKGZ1bmMpOgogICAgICAgIGRlZiBuZXdfZnVuYygqYXJncywgKiprd2FyZ3MpOgogICAgICAgICAgICB3aXRoIHNldF9kaXJlY3RvcnkocGF0aCk6CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuYygqYXJncywgKiprd2FyZ3MpCiAgICAgICAgcmV0dXJuIG5ld19mdW5jCiAgICAgICAgICAgIAogICAgZm9yIGZ1bmMgaW4gW2Z1bmMgZm9yIGZ1bmMgaW4gZGlyKHNlbGYpIGlmIGNhbGxhYmxlKGdldGF0dHIoc2VsZiwgZnVuYykpIGFuZCBub3QgZnVuYy5zdGFydHN3aXRoKCdfXycpXToKICAgICAgICBzZXRhdHRyKHNlbGYsZnVuYyx3cmFwcGVyKGdldGF0dHIoc2VsZixmdW5jKSkpCmNsYXNzIENsYXNzOgogICAgZGVmIF9faW5pdF9fKHNlbGYsY2xhc3Nfc2VsZixfbmFtZSxfZmxhZ3MsX3dvcmtkaXIpOgogICAgICAgIHNlbGYuc2VsZj1jbGFzc19zZWxmCiAgICAgICAgc2VsZi5uYW1lPUNMQVNTLl9fbmFtZV9fCiAgICAgICAgCiAgICAgICAgc2VsZi5zZWxmLm5hbWU9X25hbWUKICAgICAgICAKICAgICAgICBzZWxmLnNlbGYuZmxhZ3M9Z2V0X3ZhbHVlKF9mbGFncyx7fSkKICAgICAgICAKIyAgICAgICAgaWYgbm90IG9zLnBhdGguaXNkaXIoZiJ7Uk9PVH0ve3NlbGYuc2VsZi5uYW1lfSIpOgojICAgICAgICAgICAgIHJhaXNlIERvZXNOb3RFeGlzdCgpCiMgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAKICAgICAgICBzZWxmLnNlbGYudGVtcD1vcy5wYXRoLmpvaW4oZ2V0X3RlbXBkaXIoKSxzZWxmLm5hbWUudGl0bGUoKSsicyIsc2VsZi5zZWxmLm5hbWUpCiAgICAgICAgc2VsZi5zZWxmLmxvZz1vcy5wYXRoLmpvaW4oc2VsZi5zZWxmLnRlbXAsImxvZyIpCiAgICAgICAgc2VsZi5zZWxmLmxvY2s9b3MucGF0aC5qb2luKHNlbGYuc2VsZi50ZW1wLCJsb2NrIikKICAgICAgICAKICAgICAgICBvcy5tYWtlZGlycyhzZWxmLnNlbGYudGVtcCxleGlzdF9vaz1UcnVlKQogICAgICAgIAogICAgICAgIHdyYXBfYWxsX21ldGhvZHNfaW5fY2xhc3Nfd2l0aF9jaGRpcl9jb250ZXh0bWFuYWdlcihzZWxmLnNlbGYsZiJ7Uk9PVH0ve3NlbGYuc2VsZi5uYW1lfSIpCiAgICAgICAgc2VsZi5zZWxmLndvcmtkaXI9X3dvcmtkaXIKICAgICAgICAKICAgICAgICBzZWxmLnNlbGYuZ2xvYmFscz1HTE9CQUxTLmNvcHkoKQogICAgICAgIHNlbGYuc2VsZi5nbG9iYWxzLnVwZGF0ZShleHBvcnRfbWV0aG9kc19mcm9tX3NlbGYoc2VsZi5zZWxmKSkKICAgICAgICAKICAgICAgICAKICAgIGRlZiBzdG9wKHNlbGYpOgogICAgICAgIGlmICJTdG9wcGVkIiBpbiBzZWxmLnNlbGYuU3RhdHVzKCk6CiAgICAgICAgICAgIHJldHVybiBmIntzZWxmLm5hbWV9IHtzZWxmLnNlbGYubmFtZX0gaXMgYWxyZWFkeSBzdG9wcGVkIgogICAgICAgIAogICAgICAgIGZvciBwaWQgaW4gc2VsZi5zZWxmLlBzKCJtYWluIik6CiAgICAgICAgICAgIGtpbGxfcHJvY2Vzc19ncmFjZWZ1bGx5KHBpZCkKICAgICAgICAKICAgICAgICBmb3IgZmlsZSBpbiBbImxvZyIsImxvY2siXToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICBvcy5yZW1vdmUoZ2V0YXR0cihzZWxmLnNlbGYsZmlsZSkpCiAgICAgICAgICAgIGV4Y2VwdCBGaWxlTm90Rm91bmRFcnJvcjoKICAgICAgICAgICAgICAgIHBhc3MKCiAgICBkZWYgcmVzdGFydChzZWxmKToKICAgICAgICByZXR1cm4gW3NlbGYuc2VsZi5TdG9wKCksc2VsZi5zZWxmLlN0YXJ0KCldCiAgICAKICAgIGRlZiBnZXRfbWFpbl9wcm9jZXNzKHNlbGYpOgogICAgICAgIGlmIG5vdCBvcy5wYXRoLmlzZmlsZShzZWxmLnNlbGYubG9jayk6CiAgICAgICAgICAgICAgICByZXR1cm4gW10KICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gbGlzdChtYXAoaW50LFtfIGZvciBfIGluIHNoZWxsX2NvbW1hbmQoWyJsc29mIiwiLXQiLCItdyIsc2VsZi5zZWxmLmxvY2tdKS5zcGxpdGxpbmVzKCldKSkKICAgIAogICAgZGVmIGxpc3Qoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuc2VsZi5uYW1lCiAgICAgICAgCiAgICBkZWYgd29ya2RpcihzZWxmLHdvcmtfZGlyKToKICAgICAgICAjUmVtb3ZlIHRyYWlsaW5nIHNsYXNoZXMsIGJ1dCBvbmx5IGZvciBzdHJpbmdzIHRoYXQgYXJlIG5vdCAvCiAgICAgICAgaWYgd29ya19kaXIuZW5kc3dpdGgoJy8nKSBhbmQgbGVuKHdvcmtfZGlyKT4xOgogICAgICAgICAgICB3b3JrX2Rpcj13b3JrX2Rpcls6LTFdCiAgICAgICAgICAgIAogICAgICAgIGlmIHdvcmtfZGlyLnN0YXJ0c3dpdGgoIi8iKToKICAgICAgICAgICAgc2VsZi5zZWxmLndvcmtkaXI9d29ya19kaXIKICAgICAgICBlbHNlOiAgICAKICAgICAgICAgICAgc2VsZi5zZWxmLndvcmtkaXIrPScvJyt3b3JrX2RpcgogICAgICAgIAogICAgICAgICNSZW1vdmUgcmVwZWF0ZWQgLyBpbiB3b3JrZGlyCiAgICAgICAgc2VsZi5zZWxmLndvcmtkaXI9cmUuc3ViKHInKC8pXDErJywgcidcMScsc2VsZi5zZWxmLndvcmtkaXIpCgogICAgZGVmIHN0YXR1cyhzZWxmKToKICAgICAgICBpZiBvcy5wYXRoLmlzZmlsZShzZWxmLnNlbGYubG9nKToKICAgICAgICAgICAgcmV0dXJuIFsiU3RhcnRlZCJdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIFsiU3RvcHBlZCJdCgogICAgZGVmIGxvb3Aoc2VsZixjb21tYW5kLGRlbGF5PTYwKToKICAgICAgICBpZiBpc2luc3RhbmNlKGNvbW1hbmQsc3RyKToKICAgICAgICAgICAgZGVmIGZ1bmMoKToKICAgICAgICAgICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxmLlJ1bihjb21tYW5kKQogICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZi5XYWl0KGRlbGF5KQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGRlZiBmdW5jKCk6CiAgICAgICAgICAgICAgICB3aGlsZSBUcnVlOiAgCiAgICAgICAgICAgICAgICAgICAgY29tbWFuZCgpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxmLldhaXQoZGVsYXkpCiAgICAgICAgc2VsZi5zZWxmLlJ1bigiIikgI05lZWRlZCB0byBhdm9pZCByYWNlIGNvbmRpdGlvbnMgd2l0aCBhIHJhY2UgdGhhdCdzIHJpZ2h0IGFmdGVyIC0tLSBqdXN0IHJ1biBzZWxmLnNlbGYuUnVuIG9uY2UKICAgICAgICB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1mdW5jLGRhZW1vbj1UcnVlKS5zdGFydCgpCiAgICAgICAKICAgIGRlZiBraWxsX2F1eGlsaWFyeV9wcm9jZXNzZXMoc2VsZik6CiAgICAgICAgd2hpbGUgc2VsZi5zZWxmLlBzKCJhdXhpbGlhcnkiKSE9W106ICNJZiBuZXcgcHJvY2Vzc2VzIHdlcmUgc3RhcnRlZCBkdXJpbmcgYW4gaXRlcmF0aW9uLCBnbyBvdmVyIGl0IGFnYWluLCB1bnRpbCB5b3Uga2lsbGVkIHRoZW0gYWxsCiAgICAgICAgICAgIGZvciBwaWQgaW4gc2VsZi5zZWxmLlBzKCJhdXhpbGlhcnkiKToKICAgICAgICAgICAgICAgIGtpbGxfcHJvY2Vzc19ncmFjZWZ1bGx5KHBpZCkKICAgICAgICAgICAgICAgIAogICAgZGVmIGxvZyhzZWxmKToKICAgICAgICBzaGVsbF9jb21tYW5kKFsibGVzcyIsIitHIiwiLWYiLCItciIsc2VsZi5zZWxmLmxvZ10sc3Rkb3V0PU5vbmUpCiAgICAKICAgIGRlZiBkZWxldGUoc2VsZik6CiAgICAgICAgc2VsZi5zZWxmLlN0b3AoKQogICAgICAgIHNodXRpbC5ybXRyZWUoZiJ7Uk9PVH0ve3NlbGYuc2VsZi5uYW1lfSIpCiAgICAKICAgIGRlZiB3YXRjaChzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNoZWxsX2NvbW1hbmQoWyJ0YWlsIiwiLWYiLCItLWZvbGxvdz1uYW1lIixzZWxmLnNlbGYubG9nXSxzdGRvdXQ9Tm9uZSkKICAgICAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6CiAgICAgICAgICAgIHBhc3MKICAgIAoK').decode("utf-8"),utils_module.__dict__)
sys.modules["utils"]=utils_module


import types
import sys
import base64
utils_module=types.ModuleType("utils")
#setattr(utils_module,"__file__",__file__)
exec(base64.b64decode(b'aW1wb3J0IHN1YnByb2Nlc3MKaW1wb3J0IHJlCmltcG9ydCB0ZW1wZmlsZQppbXBvcnQgb3MKaW1wb3J0IHBhdGhsaWIKaW1wb3J0IHNpZ25hbCAKaW1wb3J0IHRpbWUKaW1wb3J0IHN5cwppbXBvcnQgdHlwaW5nCmltcG9ydCBzaHV0aWwKaW1wb3J0IHRocmVhZGluZwppbXBvcnQgY29udGV4dGxpYgppbXBvcnQgd2FybmluZ3MKCmZvciB2YXIgaW4gWyJST09UIiwiR0xPQkFMUyIsIkNMQVNTIiwiZ2V0X2FsbF9pdGVtcyJdOgogICAgZ2xvYmFscygpW3Zhcl09Tm9uZQogICAgCmRlZiBnZXRfdGVtcGRpcigpOgogICAgaWYgb3MudW5hbWUoKS5zeXNuYW1lPT0iRGFyd2luIjoKICAgICAgICByZXR1cm4gIi90bXAiCiAgICBlbHNlOgogICAgICAgIHJldHVybiB0ZW1wZmlsZS5nZXR0ZW1wZGlyKCkKICAgIApjbGFzcyBEb2VzTm90RXhpc3QoRXhjZXB0aW9uKToKICAgIHBhc3MKCmRlZiBnZXRfdmFsdWUodmFyaWFibGUsZGVmYXVsdCk6CglpZiBub3QgdmFyaWFibGU6CgkJcmV0dXJuIGRlZmF1bHQKCWVsc2U6CgkJcmV0dXJuIHZhcmlhYmxlCgpkZWYgZ2V0X3Jvb3RfZGlyZWN0b3J5KHJvb3RfdmFyaWFibGU9Tm9uZSxkZWZhdWx0X3ZhbHVlPU5vbmUpOgogICAgcm9vdF92YXJpYWJsZT1nZXRfdmFsdWUocm9vdF92YXJpYWJsZSxmIntDTEFTUy5fX25hbWVfXy51cHBlcigpfV9ST09UIikKICAgIGRlZmF1bHRfdmFsdWU9Z2V0X3ZhbHVlKGRlZmF1bHRfdmFsdWUsZiJ7b3MuZW52aXJvblsnSE9NRSddfS97Q0xBU1MuX19uYW1lX18udGl0bGUoKX1zIikKICAgIHJldHVybiBvcy5wYXRoLmV4cGFuZHVzZXIob3MuZ2V0ZW52KHJvb3RfdmFyaWFibGUsZGVmYXVsdF92YWx1ZSkpCgoKZGVmIGxpc3RfaXRlbXNfaW5fcm9vdChuYW1lcyxmbGFncyk6CiAgICBnbG9iYWwgZ2V0X2FsbF9pdGVtcwogICAgaWYgbm90IGdldF9hbGxfaXRlbXM6CiAgICAgICAgZ2V0X2FsbF9pdGVtcyA9IGxhbWJkYSByb290OiBbXyBmb3IgXyBpbiBzb3J0ZWQob3MubGlzdGRpcihyb290ICkpIGlmIG5vdCBfLnN0YXJ0c3dpdGgoJy4nKSBdICNGYWxsIGJhY2sgdG8gZGVmYXVsdCBpZiBubyBzcGVjaWFsIGZ1bmN0aW9uIGlzIGRlZmluZWQKICAgICAgICAKICAgIEFsbD1nZXRfYWxsX2l0ZW1zKFJPT1QpCiAgICAjQWxsPVtfIGZvciBfIGluIHNvcnRlZChvcy5saXN0ZGlyKFJPT1QpKSBpZiBub3QgXy5zdGFydHN3aXRoKCcuJykgXQogICAgCiAgICBmb3IgZmxhZyBpbiBbInN0YXJ0ZWQiLCJzdG9wcGVkIiwiZW5hYmxlZCIsImRpc2FibGVkIl06CiAgICAgICAgaWYgZmxhZyBpbiBmbGFnczoKICAgICAgICAgICAgbmFtZXMrPVtfIGZvciBfIGluIEFsbCBpZiBmbGFnLnRpdGxlKCkgaW4gQ0xBU1MoXykuU3RhdHVzKCkgXQogICAgICAgICAgICBkZWwgZmxhZ3NbZmxhZ10KCiAgICBpZiAiYWxsIiBpbiBmbGFnczoKICAgICAgICBuYW1lcys9QWxsCiAgICAgICAgZGVsIGZsYWdzWyJhbGwiXQogICAgaWYgbmFtZXM9PVtdOgogICAgICAgIHByaW50KGYiTm8ge0NMQVNTLl9fbmFtZV9fLmxvd2VyKCl9cyBzcGVjaWZpZWQhIikKICAgICAgICBleGl0KCkKICAgIHJldHVybiBuYW1lcwoKZGVmIGZsYXR0ZW5fbGlzdChpdGVtcyk6CiAgICAiIiJZaWVsZCBpdGVtcyBmcm9tIGFueSBuZXN0ZWQgaXRlcmFibGUuIiIiCiAgICBmb3IgeCBpbiBpdGVtczoKICAgICAgICBpZiBpc2luc3RhbmNlKHgsIHR5cGluZy5JdGVyYWJsZSkgYW5kIG5vdCBpc2luc3RhbmNlKHgsIChzdHIsIGJ5dGVzKSk6CiAgICAgICAgICAgIGZvciBzdWJfeCBpbiBmbGF0dGVuX2xpc3QoeCk6CiAgICAgICAgICAgICAgICB5aWVsZCBzdWJfeAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHlpZWxkIHgKCmRlZiBwcmludF9saXN0KGwpOgogICAgZm9yIGVsZW1lbnQgaW4gbDoKICAgICAgICBpZiBlbGVtZW50IGlzIE5vbmU6CiAgICAgICAgICAgIHByaW50KGVuZD0nJykKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludChlbGVtZW50KQoKZGVmIHNwbGl0X3N0cmluZ19ieV9jaGFyKHN0cmluZyxjaGFyPSc6Jyk6CiAgICBQQVRURVJOID0gcmUuY29tcGlsZShyZicnJygoPzpbXlx7Y2hhcn0iJ118IlteIl0qInwnW14nXSonKSspJycnKQogICAgcmV0dXJuIFtfIGZvciBfIGluIGxpc3QoUEFUVEVSTi5zcGxpdChzdHJpbmcpKSBpZiBfIG5vdCBpbiBbJycsIGNoYXJdXQoKCmRlZiBzaGVsbF9jb21tYW5kKGNvbW1hbmQsc3Rkb3V0PXN1YnByb2Nlc3MuUElQRSxzdGRlcnI9c3VicHJvY2Vzcy5TVERPVVQsYXJiaXRyYXJ5PUZhbHNlLGJsb2NrPVRydWUsZW52PU5vbmUpOgogICAgcHJvY2VzcyA9IHN1YnByb2Nlc3MuUG9wZW4oY29tbWFuZCwgc3Rkb3V0PXN0ZG91dCwgc3RkZXJyPXN0ZGVycix1bml2ZXJzYWxfbmV3bGluZXM9VHJ1ZSxzaGVsbD1hcmJpdHJhcnksZW52PWVudikKICAgIGlmIGJsb2NrOgogICAgICAgIHJldHVybiBwcm9jZXNzLmNvbW11bmljYXRlKClbMF0KCmRlZiB3YWl0X3VudGlsX3BpZF9leGl0cyhwaWQpOgogICAgCiAgICBkZWYgcGlkX2V4aXN0cyhwaWQpOiAgIAogICAgICAgICIiIiBDaGVjayBGb3IgdGhlIGV4aXN0ZW5jZSBvZiBhIHVuaXggcGlkLiAiIiIKICAgICAgICBpZiBzaGVsbF9jb21tYW5kKFsicHMiLCAiLW9zdGF0PSIsc3RyKHBpZCldKT09IlpcbiI6ICNab21iaWUKICAgICAgICAKICAgICAgICAgICAgcmV0dXJuIEZhbHNlIAogICAgICAgIHRyeToKICAgICAgICAgICAgb3Mua2lsbChwaWQsIDApCiAgICAgICAgZXhjZXB0IE9TRXJyb3I6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIAogICAgd2hpbGUgcGlkX2V4aXN0cyhwaWQpOgogICAgICAgIHRpbWUuc2xlZXAoMC4yNSkKICAgICAgICAKZGVmIGtpbGxfcHJvY2Vzc19ncmFjZWZ1bGx5KHBpZCk6CiAgICBwcmludChwaWQpCiAgICB0cnk6CiAgICAgICAgb3Mua2lsbChwaWQsc2lnbmFsLlNJR1RFUk0pCiAgICAgICAgdHJ5OgogICAgICAgICAgICBvcy53YWl0cGlkKHBpZCwwKQogICAgICAgIGV4Y2VwdCBDaGlsZFByb2Nlc3NFcnJvcjogI05vdCBhIGNoaWxkIHByb2Nlc3Mgc28gbW92ZSBvbgogICAgICAgICAgICBwYXNzCiAgICAgICAgd2FpdF91bnRpbF9waWRfZXhpdHMocGlkKQogICAgZXhjZXB0IFByb2Nlc3NMb29rdXBFcnJvcjoKICAgICAgICBwYXNzCiAgICAKZGVmIGV4dHJhY3RfYXJndW1lbnRzKCk6CiAgICBhcmd1bWVudHM9c3lzLmFyZ3ZbMTpdCiAgICB0cnk6CiAgICAgICAgRlVOQ1RJT049YXJndW1lbnRzWzBdCiAgICBleGNlcHQgSW5kZXhFcnJvcjoKICAgICAgICBwcmludCgiTm8gZnVuY3Rpb24gc3BlY2lmaWVkISIpCiAgICAgICAgZXhpdCgpCiAgICBhcmd1bWVudHM9YXJndW1lbnRzWzE6XQogICAgCiAgICBOQU1FUz1bXQogICAgRkxBR1M9YXJndW1lbnRzCiAgICBmb3IgaSBpbiByYW5nZShsZW4oYXJndW1lbnRzKSk6CiAgICAgICAgaWYgbm90IGFyZ3VtZW50c1tpXS5zdGFydHN3aXRoKCItLSIpOgogICAgICAgICAgICBGTEFHUz1hcmd1bWVudHNbOmldCiAgICAgICAgICAgIE5BTUVTPWFyZ3VtZW50c1tpOl0KICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgCiAgICBmbGFnc190ZW1wPXt9CiAgICBmb3IgZmxhZyBpbiBGTEFHUzoKICAgICAgICBmbGFnPWZsYWcuc3BsaXQoJz0nLDEpICNTcGxpdCBldmVyeSBmbGFnIGluIEZMQUdTIGJ5ICc9JwogICAgICAgIGlmIGxlbihmbGFnKT09MToKICAgICAgICAgICAgZmxhZy5hcHBlbmQoJycpICNQYWQgb3V0IHRoZSBmbGFnIGFycmF5CiAgICAgICAgZmxhZ1swXT1mbGFnWzBdWzI6XSAjUmVtb3ZlIHRoZSAnLS0nCiAgICAgICAgZmxhZ3NfdGVtcFtmbGFnWzBdXT1mbGFnWzFdCiAgICAgICAgCiAgICBGTEFHUz1mbGFnc190ZW1wCiAgICByZXR1cm4gKE5BTUVTLEZMQUdTLEZVTkNUSU9OKQoKZGVmIGFkZF9lbnZpcm9ubWVudF92YXJpYWJsZV90b19zdHJpbmcoc3RyaW5nLGVudl92YXIpOgogICAgcmV0dXJuIHN0cmluZytmIjsgZXhwb3J0IHtlbnZfdmFyfSIKCmRlZiB3YWl0KGRlbGF5PU5vbmUpOgogICAgdGhyZWFkaW5nLkV2ZW50KCkud2FpdCh0aW1lb3V0PWRlbGF5KQoKZGVmIGV4ZWN1dGVfY2xhc3NfbWV0aG9kKGNsYXNzX2luc3RhbmNlLGZ1bmN0aW9uKToKICAgIGlmIG5vdCBjYWxsYWJsZShnZXRhdHRyKGNsYXNzX2luc3RhbmNlLCBmdW5jdGlvbi50aXRsZSgpLE5vbmUpKToKICAgICAgICAgICAgcHJpbnQoZiJDb21tYW5kIHtmdW5jdGlvbn0gZG9lc24ndCBleGlzdCEiKQogICAgICAgICAgICBleGl0KCkKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIGxpc3QoZmxhdHRlbl9saXN0KFtnZXRhdHRyKGNsYXNzX2luc3RhbmNlLGZ1bmN0aW9uLnRpdGxlKCkpKCldKSkKCmRlZiBjaGVja19pZl9lbGVtZW50X2FueV9pc19pbl9saXN0KGVsZW1lbnRzLF9saXN0KToKICAgIHJldHVybiBhbnkoXyBpbiBfbGlzdCBmb3IgXyBpbiBlbGVtZW50cykKICAgIApkZWYgZXhwb3J0X21ldGhvZHNfZnJvbV9zZWxmKHNlbGYpOgogICAgbWV0aG9kcz17fQogICAgZm9yIGZ1bmMgaW4gW2Z1bmMgZm9yIGZ1bmMgaW4gZGlyKHNlbGYpIGlmIGNhbGxhYmxlKGdldGF0dHIoc2VsZiwgZnVuYykpIGFuZCBub3QgZnVuYy5zdGFydHN3aXRoKCdfXycpXToKICAgICAgICBpZiBub3QgZnVuYy5zdGFydHN3aXRoKCdfJyk6CiAgICAgICAgICAgIG1ldGhvZHNbZnVuY109Z2V0YXR0cihzZWxmLGZ1bmMpCiAgICAKICAgIHJldHVybiBtZXRob2RzCgpkZWYgZXhlY3V0ZShzZWxmLGZpbGUpOgogICAgaWYgbm90IGlzaW5zdGFuY2UoZmlsZSxzdHIpOiAjQXNzdW1lIGZpbGUgaXMgZmlsZSBvYmplY3QKICAgICAgICBjb2RlPWZpbGUucmVhZCgpCiAgICAgICAgZmlsZS5jbG9zZSgpCiAgICBlbHNlOgogICAgICAgIGNvZGU9ZmlsZQogICAgcmV0dXJuIGV4ZWMoY29kZSxzZWxmLmdsb2JhbHMsbG9jYWxzKCkpCiAgICAKZGVmIHdyYXBfYWxsX21ldGhvZHNfaW5fY2xhc3Nfd2l0aF9jaGRpcl9jb250ZXh0bWFuYWdlcihzZWxmLHBhdGgpOgogICAgQGNvbnRleHRsaWIuY29udGV4dG1hbmFnZXIKICAgIGRlZiBzZXRfZGlyZWN0b3J5KHBhdGgpOgogICAgICAgICIiIlNldHMgdGhlIGN3ZCB3aXRoaW4gdGhlIGNvbnRleHQKICAgIAogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIHBhdGggKFBhdGgpOiBUaGUgcGF0aCB0byB0aGUgY3dkCiAgICAKICAgICAgICBZaWVsZHM6CiAgICAgICAgICAgIE5vbmUKICAgICAgICAiIiIKICAgIAogICAgICAgIG9yaWdpbiA9IG9zLnBhdGguYWJzcGF0aChvcy5nZXRjd2QoKSkKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlmIG9zLnBhdGguaXNkaXIocGF0aCk6CiAgICAgICAgICAgICAgICBvcy5jaGRpcihwYXRoKQogICAgICAgICAgICB5aWVsZAogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgICAgICBvcy5jaGRpcihvcmlnaW4pCiAgICAKICAgIGRlZiB3cmFwcGVyKGZ1bmMpOgogICAgICAgIGRlZiBuZXdfZnVuYygqYXJncywgKiprd2FyZ3MpOgogICAgICAgICAgICB3aXRoIHNldF9kaXJlY3RvcnkocGF0aCk6CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuYygqYXJncywgKiprd2FyZ3MpCiAgICAgICAgcmV0dXJuIG5ld19mdW5jCiAgICAgICAgICAgIAogICAgZm9yIGZ1bmMgaW4gW2Z1bmMgZm9yIGZ1bmMgaW4gZGlyKHNlbGYpIGlmIGNhbGxhYmxlKGdldGF0dHIoc2VsZiwgZnVuYykpIGFuZCBub3QgZnVuYy5zdGFydHN3aXRoKCdfXycpXToKICAgICAgICBzZXRhdHRyKHNlbGYsZnVuYyx3cmFwcGVyKGdldGF0dHIoc2VsZixmdW5jKSkpCmNsYXNzIENsYXNzOgogICAgZGVmIF9faW5pdF9fKHNlbGYsY2xhc3Nfc2VsZixfbmFtZSxfZmxhZ3MsX3dvcmtkaXIpOgogICAgICAgIHNlbGYuc2VsZj1jbGFzc19zZWxmCiAgICAgICAgc2VsZi5uYW1lPUNMQVNTLl9fbmFtZV9fCiAgICAgICAgCiAgICAgICAgc2VsZi5zZWxmLm5hbWU9X25hbWUKICAgICAgICAKICAgICAgICBzZWxmLnNlbGYuZmxhZ3M9Z2V0X3ZhbHVlKF9mbGFncyx7fSkKICAgICAgICAKIyAgICAgICAgaWYgbm90IG9zLnBhdGguaXNkaXIoZiJ7Uk9PVH0ve3NlbGYuc2VsZi5uYW1lfSIpOgojICAgICAgICAgICAgIHJhaXNlIERvZXNOb3RFeGlzdCgpCiMgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAKICAgICAgICBzZWxmLnNlbGYudGVtcD1vcy5wYXRoLmpvaW4oZ2V0X3RlbXBkaXIoKSxzZWxmLm5hbWUudGl0bGUoKSsicyIsc2VsZi5zZWxmLm5hbWUpCiAgICAgICAgc2VsZi5zZWxmLmxvZz1vcy5wYXRoLmpvaW4oc2VsZi5zZWxmLnRlbXAsImxvZyIpCiAgICAgICAgc2VsZi5zZWxmLmxvY2s9b3MucGF0aC5qb2luKHNlbGYuc2VsZi50ZW1wLCJsb2NrIikKICAgICAgICAKICAgICAgICBvcy5tYWtlZGlycyhzZWxmLnNlbGYudGVtcCxleGlzdF9vaz1UcnVlKQogICAgICAgIAogICAgICAgIHdyYXBfYWxsX21ldGhvZHNfaW5fY2xhc3Nfd2l0aF9jaGRpcl9jb250ZXh0bWFuYWdlcihzZWxmLnNlbGYsZiJ7Uk9PVH0ve3NlbGYuc2VsZi5uYW1lfSIpCiAgICAgICAgc2VsZi5zZWxmLndvcmtkaXI9X3dvcmtkaXIKICAgICAgICAKICAgICAgICBzZWxmLnNlbGYuZ2xvYmFscz1HTE9CQUxTLmNvcHkoKQogICAgICAgIHNlbGYuc2VsZi5nbG9iYWxzLnVwZGF0ZShleHBvcnRfbWV0aG9kc19mcm9tX3NlbGYoc2VsZi5zZWxmKSkKICAgICAgICAKICAgICAgICAKICAgIGRlZiBzdG9wKHNlbGYpOgogICAgICAgIGlmICJTdG9wcGVkIiBpbiBzZWxmLnNlbGYuU3RhdHVzKCk6CiAgICAgICAgICAgIHJldHVybiBmIntzZWxmLm5hbWV9IHtzZWxmLnNlbGYubmFtZX0gaXMgYWxyZWFkeSBzdG9wcGVkIgogICAgICAgIAogICAgICAgIGZvciBwaWQgaW4gc2VsZi5zZWxmLlBzKCJtYWluIik6CiAgICAgICAgICAgIGtpbGxfcHJvY2Vzc19ncmFjZWZ1bGx5KHBpZCkKICAgICAgICAKICAgICAgICBmb3IgZmlsZSBpbiBbImxvZyIsImxvY2siXToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICBvcy5yZW1vdmUoZ2V0YXR0cihzZWxmLnNlbGYsZmlsZSkpCiAgICAgICAgICAgIGV4Y2VwdCBGaWxlTm90Rm91bmRFcnJvcjoKICAgICAgICAgICAgICAgIHBhc3MKCiAgICBkZWYgcmVzdGFydChzZWxmKToKICAgICAgICByZXR1cm4gW3NlbGYuc2VsZi5TdG9wKCksc2VsZi5zZWxmLlN0YXJ0KCldCiAgICAKICAgIGRlZiBnZXRfbWFpbl9wcm9jZXNzKHNlbGYpOgogICAgICAgIGlmIG5vdCBvcy5wYXRoLmlzZmlsZShzZWxmLnNlbGYubG9jayk6CiAgICAgICAgICAgICAgICByZXR1cm4gW10KICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gbGlzdChtYXAoaW50LFtfIGZvciBfIGluIHNoZWxsX2NvbW1hbmQoWyJsc29mIiwiLXQiLCItdyIsc2VsZi5zZWxmLmxvY2tdKS5zcGxpdGxpbmVzKCldKSkKICAgIAogICAgZGVmIGxpc3Qoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuc2VsZi5uYW1lCiAgICAgICAgCiAgICBkZWYgd29ya2RpcihzZWxmLHdvcmtfZGlyKToKICAgICAgICAjUmVtb3ZlIHRyYWlsaW5nIHNsYXNoZXMsIGJ1dCBvbmx5IGZvciBzdHJpbmdzIHRoYXQgYXJlIG5vdCAvCiAgICAgICAgaWYgd29ya19kaXIuZW5kc3dpdGgoJy8nKSBhbmQgbGVuKHdvcmtfZGlyKT4xOgogICAgICAgICAgICB3b3JrX2Rpcj13b3JrX2Rpcls6LTFdCiAgICAgICAgICAgIAogICAgICAgIGlmIHdvcmtfZGlyLnN0YXJ0c3dpdGgoIi8iKToKICAgICAgICAgICAgc2VsZi5zZWxmLndvcmtkaXI9d29ya19kaXIKICAgICAgICBlbHNlOiAgICAKICAgICAgICAgICAgc2VsZi5zZWxmLndvcmtkaXIrPScvJyt3b3JrX2RpcgogICAgICAgIAogICAgICAgICNSZW1vdmUgcmVwZWF0ZWQgLyBpbiB3b3JrZGlyCiAgICAgICAgc2VsZi5zZWxmLndvcmtkaXI9cmUuc3ViKHInKC8pXDErJywgcidcMScsc2VsZi5zZWxmLndvcmtkaXIpCgogICAgZGVmIHN0YXR1cyhzZWxmKToKICAgICAgICBpZiBvcy5wYXRoLmlzZmlsZShzZWxmLnNlbGYubG9nKToKICAgICAgICAgICAgcmV0dXJuIFsiU3RhcnRlZCJdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIFsiU3RvcHBlZCJdCgogICAgZGVmIGxvb3Aoc2VsZixjb21tYW5kLGRlbGF5PTYwKToKICAgICAgICBpZiBpc2luc3RhbmNlKGNvbW1hbmQsc3RyKToKICAgICAgICAgICAgZGVmIGZ1bmMoKToKICAgICAgICAgICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxmLlJ1bihjb21tYW5kKQogICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZi5XYWl0KGRlbGF5KQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGRlZiBmdW5jKCk6CiAgICAgICAgICAgICAgICB3aGlsZSBUcnVlOiAgCiAgICAgICAgICAgICAgICAgICAgY29tbWFuZCgpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxmLldhaXQoZGVsYXkpCiAgICAgICAgc2VsZi5zZWxmLlJ1bigiIikgI05lZWRlZCB0byBhdm9pZCByYWNlIGNvbmRpdGlvbnMgd2l0aCBhIHJhY2UgdGhhdCdzIHJpZ2h0IGFmdGVyIC0tLSBqdXN0IHJ1biBzZWxmLnNlbGYuUnVuIG9uY2UKICAgICAgICB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1mdW5jLGRhZW1vbj1UcnVlKS5zdGFydCgpCiAgICAgICAKICAgIGRlZiBraWxsX2F1eGlsaWFyeV9wcm9jZXNzZXMoc2VsZik6CiAgICAgICAgd2hpbGUgc2VsZi5zZWxmLlBzKCJhdXhpbGlhcnkiKSE9W106ICNJZiBuZXcgcHJvY2Vzc2VzIHdlcmUgc3RhcnRlZCBkdXJpbmcgYW4gaXRlcmF0aW9uLCBnbyBvdmVyIGl0IGFnYWluLCB1bnRpbCB5b3Uga2lsbGVkIHRoZW0gYWxsCiAgICAgICAgICAgIGZvciBwaWQgaW4gc2VsZi5zZWxmLlBzKCJhdXhpbGlhcnkiKToKICAgICAgICAgICAgICAgIGtpbGxfcHJvY2Vzc19ncmFjZWZ1bGx5KHBpZCkKICAgICAgICAgICAgICAgIAogICAgZGVmIGxvZyhzZWxmKToKICAgICAgICBzaGVsbF9jb21tYW5kKFsibGVzcyIsIitHIiwiLWYiLCItciIsc2VsZi5zZWxmLmxvZ10sc3Rkb3V0PU5vbmUpCiAgICAKICAgIGRlZiBkZWxldGUoc2VsZik6CiAgICAgICAgc2VsZi5zZWxmLlN0b3AoKQogICAgICAgIHNodXRpbC5ybXRyZWUoZiJ7Uk9PVH0ve3NlbGYuc2VsZi5uYW1lfSIpCiAgICAKICAgIGRlZiB3YXRjaChzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNoZWxsX2NvbW1hbmQoWyJ0YWlsIiwiLWYiLCItLWZvbGxvdz1uYW1lIixzZWxmLnNlbGYubG9nXSxzdGRvdXQ9Tm9uZSkKICAgICAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6CiAgICAgICAgICAgIHBhc3MKICAgIAoK').decode("utf-8"),utils_module.__dict__)
sys.modules["utils"]=utils_module


import types
import sys
import base64
charset_normalizer_module=types.ModuleType("charset_normalizer")
#setattr(charset_normalizer_module,"__file__",__file__)
exec(base64.b64decode(b'aW1wb3J0IG9zCm1vZHVsZV9kaWN0PXt9Cm1vZHVsZV9kaWN0WyJjaGFyc2V0X25vcm1hbGl6ZXIiK29zLnNlcCsibGVnYWN5LnB5Il09IiIiCmltcG9ydCB3YXJuaW5ncwpmcm9tIHR5cGluZyBpbXBvcnQgRGljdCwgT3B0aW9uYWwsIFVuaW9uCgpmcm9tIC5hcGkgaW1wb3J0IGZyb21fYnl0ZXMsIGZyb21fZnAsIGZyb21fcGF0aCwgbm9ybWFsaXplCmZyb20gLmNvbnN0YW50IGltcG9ydCBDSEFSREVUX0NPUlJFU1BPTkRFTkNFCmZyb20gLm1vZGVscyBpbXBvcnQgQ2hhcnNldE1hdGNoLCBDaGFyc2V0TWF0Y2hlcwoKCmRlZiBkZXRlY3QoYnl0ZV9zdHI6IGJ5dGVzKSAtPiBEaWN0W3N0ciwgT3B0aW9uYWxbVW5pb25bc3RyLCBmbG9hdF1dXToKICAgIFwiXCJcIgogICAgY2hhcmRldCBsZWdhY3kgbWV0aG9kCiAgICBEZXRlY3QgdGhlIGVuY29kaW5nIG9mIHRoZSBnaXZlbiBieXRlIHN0cmluZy4gSXQgc2hvdWxkIGJlIG1vc3RseSBiYWNrd2FyZC1jb21wYXRpYmxlLgogICAgRW5jb2RpbmcgbmFtZSB3aWxsIG1hdGNoIENoYXJkZXQgb3duIHdyaXRpbmcgd2hlbmV2ZXIgcG9zc2libGUuIChOb3Qgb24gZW5jb2RpbmcgbmFtZSB1bnN1cHBvcnRlZCBieSBpdCkKICAgIFRoaXMgZnVuY3Rpb24gaXMgZGVwcmVjYXRlZCBhbmQgc2hvdWxkIGJlIHVzZWQgdG8gbWlncmF0ZSB5b3VyIHByb2plY3QgZWFzaWx5LCBjb25zdWx0IHRoZSBkb2N1bWVudGF0aW9uIGZvcgogICAgZnVydGhlciBpbmZvcm1hdGlvbi4gTm90IHBsYW5uZWQgZm9yIHJlbW92YWwuCgogICAgOnBhcmFtIGJ5dGVfc3RyOiAgICAgVGhlIGJ5dGUgc2VxdWVuY2UgdG8gZXhhbWluZS4KICAgIFwiXCJcIgogICAgaWYgbm90IGlzaW5zdGFuY2UoYnl0ZV9zdHIsIChieXRlYXJyYXksIGJ5dGVzKSk6CiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCAgIyBwcmFnbWE6IG5vY292ZXIKICAgICAgICAgICAgXCJFeHBlY3RlZCBvYmplY3Qgb2YgdHlwZSBieXRlcyBvciBieXRlYXJyYXksIGdvdDogXCIKICAgICAgICAgICAgXCJ7MH1cIi5mb3JtYXQodHlwZShieXRlX3N0cikpCiAgICAgICAgKQoKICAgIGlmIGlzaW5zdGFuY2UoYnl0ZV9zdHIsIGJ5dGVhcnJheSk6CiAgICAgICAgYnl0ZV9zdHIgPSBieXRlcyhieXRlX3N0cikKCiAgICByID0gZnJvbV9ieXRlcyhieXRlX3N0cikuYmVzdCgpCgogICAgZW5jb2RpbmcgPSByLmVuY29kaW5nIGlmIHIgaXMgbm90IE5vbmUgZWxzZSBOb25lCiAgICBsYW5ndWFnZSA9IHIubGFuZ3VhZ2UgaWYgciBpcyBub3QgTm9uZSBhbmQgci5sYW5ndWFnZSAhPSBcIlVua25vd25cIiBlbHNlIFwiXCIKICAgIGNvbmZpZGVuY2UgPSAxLjAgLSByLmNoYW9zIGlmIHIgaXMgbm90IE5vbmUgZWxzZSBOb25lCgogICAgIyBOb3RlOiBDaGFyc2V0Tm9ybWFsaXplciBkb2VzIG5vdCByZXR1cm4gJ1VURi04LVNJRycgYXMgdGhlIHNpZyBnZXQgc3RyaXBwZWQgaW4gdGhlIGRldGVjdGlvbi9ub3JtYWxpemF0aW9uIHByb2Nlc3MKICAgICMgYnV0IGNoYXJkZXQgZG9lcyByZXR1cm4gJ3V0Zi04LXNpZycgYW5kIGl0IGlzIGEgdmFsaWQgY29kZWMgbmFtZS4KICAgIGlmIHIgaXMgbm90IE5vbmUgYW5kIGVuY29kaW5nID09IFwidXRmXzhcIiBhbmQgci5ib206CiAgICAgICAgZW5jb2RpbmcgKz0gXCJfc2lnXCIKCiAgICByZXR1cm4gewogICAgICAgIFwiZW5jb2RpbmdcIjogZW5jb2RpbmcKICAgICAgICBpZiBlbmNvZGluZyBub3QgaW4gQ0hBUkRFVF9DT1JSRVNQT05ERU5DRQogICAgICAgIGVsc2UgQ0hBUkRFVF9DT1JSRVNQT05ERU5DRVtlbmNvZGluZ10sCiAgICAgICAgXCJsYW5ndWFnZVwiOiBsYW5ndWFnZSwKICAgICAgICBcImNvbmZpZGVuY2VcIjogY29uZmlkZW5jZSwKICAgIH0KCgpjbGFzcyBDaGFyc2V0Tm9ybWFsaXplck1hdGNoKENoYXJzZXRNYXRjaCk6CiAgICBwYXNzCgoKY2xhc3MgQ2hhcnNldE5vcm1hbGl6ZXJNYXRjaGVzKENoYXJzZXRNYXRjaGVzKToKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBmcm9tX2ZwKCphcmdzLCAqKmt3YXJncyk6ICAjIHR5cGU6IGlnbm9yZQogICAgICAgIHdhcm5pbmdzLndhcm4oICAjIHByYWdtYTogbm9jb3ZlcgogICAgICAgICAgICBcInN0YXRpY21ldGhvZCBmcm9tX2ZwLCBmcm9tX2J5dGVzLCBmcm9tX3BhdGggYW5kIG5vcm1hbGl6ZSBhcmUgZGVwcmVjYXRlZCBcIgogICAgICAgICAgICBcImFuZCBzY2hlZHVsZWQgdG8gYmUgcmVtb3ZlZCBpbiAzLjBcIiwKICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLAogICAgICAgICkKICAgICAgICByZXR1cm4gZnJvbV9mcCgqYXJncywgKiprd2FyZ3MpICAjIHByYWdtYTogbm9jb3ZlcgoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBmcm9tX2J5dGVzKCphcmdzLCAqKmt3YXJncyk6ICAjIHR5cGU6IGlnbm9yZQogICAgICAgIHdhcm5pbmdzLndhcm4oICAjIHByYWdtYTogbm9jb3ZlcgogICAgICAgICAgICBcInN0YXRpY21ldGhvZCBmcm9tX2ZwLCBmcm9tX2J5dGVzLCBmcm9tX3BhdGggYW5kIG5vcm1hbGl6ZSBhcmUgZGVwcmVjYXRlZCBcIgogICAgICAgICAgICBcImFuZCBzY2hlZHVsZWQgdG8gYmUgcmVtb3ZlZCBpbiAzLjBcIiwKICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLAogICAgICAgICkKICAgICAgICByZXR1cm4gZnJvbV9ieXRlcygqYXJncywgKiprd2FyZ3MpICAjIHByYWdtYTogbm9jb3ZlcgoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBmcm9tX3BhdGgoKmFyZ3MsICoqa3dhcmdzKTogICMgdHlwZTogaWdub3JlCiAgICAgICAgd2FybmluZ3Mud2FybiggICMgcHJhZ21hOiBub2NvdmVyCiAgICAgICAgICAgIFwic3RhdGljbWV0aG9kIGZyb21fZnAsIGZyb21fYnl0ZXMsIGZyb21fcGF0aCBhbmQgbm9ybWFsaXplIGFyZSBkZXByZWNhdGVkIFwiCiAgICAgICAgICAgIFwiYW5kIHNjaGVkdWxlZCB0byBiZSByZW1vdmVkIGluIDMuMFwiLAogICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsCiAgICAgICAgKQogICAgICAgIHJldHVybiBmcm9tX3BhdGgoKmFyZ3MsICoqa3dhcmdzKSAgIyBwcmFnbWE6IG5vY292ZXIKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgbm9ybWFsaXplKCphcmdzLCAqKmt3YXJncyk6ICAjIHR5cGU6IGlnbm9yZQogICAgICAgIHdhcm5pbmdzLndhcm4oICAjIHByYWdtYTogbm9jb3ZlcgogICAgICAgICAgICBcInN0YXRpY21ldGhvZCBmcm9tX2ZwLCBmcm9tX2J5dGVzLCBmcm9tX3BhdGggYW5kIG5vcm1hbGl6ZSBhcmUgZGVwcmVjYXRlZCBcIgogICAgICAgICAgICBcImFuZCBzY2hlZHVsZWQgdG8gYmUgcmVtb3ZlZCBpbiAzLjBcIiwKICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLAogICAgICAgICkKICAgICAgICByZXR1cm4gbm9ybWFsaXplKCphcmdzLCAqKmt3YXJncykgICMgcHJhZ21hOiBub2NvdmVyCgoKY2xhc3MgQ2hhcnNldERldGVjdG9yKENoYXJzZXROb3JtYWxpemVyTWF0Y2hlcyk6CiAgICBwYXNzCgoKY2xhc3MgQ2hhcnNldERvY3RvcihDaGFyc2V0Tm9ybWFsaXplck1hdGNoZXMpOgogICAgcGFzcwoKIiIiCm1vZHVsZV9kaWN0WyJjaGFyc2V0X25vcm1hbGl6ZXIiK29zLnNlcCsiY29uc3RhbnQucHkiXT0iIiIKZnJvbSBjb2RlY3MgaW1wb3J0IEJPTV9VVEY4LCBCT01fVVRGMTZfQkUsIEJPTV9VVEYxNl9MRSwgQk9NX1VURjMyX0JFLCBCT01fVVRGMzJfTEUKZnJvbSBlbmNvZGluZ3MuYWxpYXNlcyBpbXBvcnQgYWxpYXNlcwpmcm9tIHJlIGltcG9ydCBJR05PUkVDQVNFLCBjb21waWxlIGFzIHJlX2NvbXBpbGUKZnJvbSB0eXBpbmcgaW1wb3J0IERpY3QsIExpc3QsIFNldCwgVW5pb24KCmZyb20gLmFzc2V0cyBpbXBvcnQgRlJFUVVFTkNJRVMKCiMgQ29udGFpbiBmb3IgZWFjaCBlbGlnaWJsZSBlbmNvZGluZyBhIGxpc3Qgb2YvaXRlbSBieXRlcyBTSUcvQk9NCkVOQ09ESU5HX01BUktTOiBEaWN0W3N0ciwgVW5pb25bYnl0ZXMsIExpc3RbYnl0ZXNdXV0gPSB7CiAgICBcInV0Zl84XCI6IEJPTV9VVEY4LAogICAgXCJ1dGZfN1wiOiBbCiAgICAgICAgYlwiXFx4MmJcXHgyZlxceDc2XFx4MzhcIiwKICAgICAgICBiXCJcXHgyYlxceDJmXFx4NzZcXHgzOVwiLAogICAgICAgIGJcIlxceDJiXFx4MmZcXHg3NlxceDJiXCIsCiAgICAgICAgYlwiXFx4MmJcXHgyZlxceDc2XFx4MmZcIiwKICAgICAgICBiXCJcXHgyYlxceDJmXFx4NzZcXHgzOFxceDJkXCIsCiAgICBdLAogICAgXCJnYjE4MDMwXCI6IGJcIlxceDg0XFx4MzFcXHg5NVxceDMzXCIsCiAgICBcInV0Zl8zMlwiOiBbQk9NX1VURjMyX0JFLCBCT01fVVRGMzJfTEVdLAogICAgXCJ1dGZfMTZcIjogW0JPTV9VVEYxNl9CRSwgQk9NX1VURjE2X0xFXSwKfQoKVE9PX1NNQUxMX1NFUVVFTkNFOiBpbnQgPSAzMgpUT09fQklHX1NFUVVFTkNFOiBpbnQgPSBpbnQoMTBlNikKClVURjhfTUFYSU1BTF9BTExPQ0FUSU9OOiBpbnQgPSAxMTEyMDY0CgpVTklDT0RFX1JBTkdFU19DT01CSU5FRDogRGljdFtzdHIsIHJhbmdlXSA9IHsKICAgIFwiQ29udHJvbCBjaGFyYWN0ZXJcIjogcmFuZ2UoMzEgKyAxKSwKICAgIFwiQmFzaWMgTGF0aW5cIjogcmFuZ2UoMzIsIDEyNyArIDEpLAogICAgXCJMYXRpbi0xIFN1cHBsZW1lbnRcIjogcmFuZ2UoMTI4LCAyNTUgKyAxKSwKICAgIFwiTGF0aW4gRXh0ZW5kZWQtQVwiOiByYW5nZSgyNTYsIDM4MyArIDEpLAogICAgXCJMYXRpbiBFeHRlbmRlZC1CXCI6IHJhbmdlKDM4NCwgNTkxICsgMSksCiAgICBcIklQQSBFeHRlbnNpb25zXCI6IHJhbmdlKDU5MiwgNjg3ICsgMSksCiAgICBcIlNwYWNpbmcgTW9kaWZpZXIgTGV0dGVyc1wiOiByYW5nZSg2ODgsIDc2NyArIDEpLAogICAgXCJDb21iaW5pbmcgRGlhY3JpdGljYWwgTWFya3NcIjogcmFuZ2UoNzY4LCA4NzkgKyAxKSwKICAgIFwiR3JlZWsgYW5kIENvcHRpY1wiOiByYW5nZSg4ODAsIDEwMjMgKyAxKSwKICAgIFwiQ3lyaWxsaWNcIjogcmFuZ2UoMTAyNCwgMTI3OSArIDEpLAogICAgXCJDeXJpbGxpYyBTdXBwbGVtZW50XCI6IHJhbmdlKDEyODAsIDEzMjcgKyAxKSwKICAgIFwiQXJtZW5pYW5cIjogcmFuZ2UoMTMyOCwgMTQyMyArIDEpLAogICAgXCJIZWJyZXdcIjogcmFuZ2UoMTQyNCwgMTUzNSArIDEpLAogICAgXCJBcmFiaWNcIjogcmFuZ2UoMTUzNiwgMTc5MSArIDEpLAogICAgXCJTeXJpYWNcIjogcmFuZ2UoMTc5MiwgMTg3MSArIDEpLAogICAgXCJBcmFiaWMgU3VwcGxlbWVudFwiOiByYW5nZSgxODcyLCAxOTE5ICsgMSksCiAgICBcIlRoYWFuYVwiOiByYW5nZSgxOTIwLCAxOTgzICsgMSksCiAgICBcIk5Lb1wiOiByYW5nZSgxOTg0LCAyMDQ3ICsgMSksCiAgICBcIlNhbWFyaXRhblwiOiByYW5nZSgyMDQ4LCAyMTExICsgMSksCiAgICBcIk1hbmRhaWNcIjogcmFuZ2UoMjExMiwgMjE0MyArIDEpLAogICAgXCJTeXJpYWMgU3VwcGxlbWVudFwiOiByYW5nZSgyMTQ0LCAyMTU5ICsgMSksCiAgICBcIkFyYWJpYyBFeHRlbmRlZC1BXCI6IHJhbmdlKDIyMDgsIDIzMDMgKyAxKSwKICAgIFwiRGV2YW5hZ2FyaVwiOiByYW5nZSgyMzA0LCAyNDMxICsgMSksCiAgICBcIkJlbmdhbGlcIjogcmFuZ2UoMjQzMiwgMjU1OSArIDEpLAogICAgXCJHdXJtdWtoaVwiOiByYW5nZSgyNTYwLCAyNjg3ICsgMSksCiAgICBcIkd1amFyYXRpXCI6IHJhbmdlKDI2ODgsIDI4MTUgKyAxKSwKICAgIFwiT3JpeWFcIjogcmFuZ2UoMjgxNiwgMjk0MyArIDEpLAogICAgXCJUYW1pbFwiOiByYW5nZSgyOTQ0LCAzMDcxICsgMSksCiAgICBcIlRlbHVndVwiOiByYW5nZSgzMDcyLCAzMTk5ICsgMSksCiAgICBcIkthbm5hZGFcIjogcmFuZ2UoMzIwMCwgMzMyNyArIDEpLAogICAgXCJNYWxheWFsYW1cIjogcmFuZ2UoMzMyOCwgMzQ1NSArIDEpLAogICAgXCJTaW5oYWxhXCI6IHJhbmdlKDM0NTYsIDM1ODMgKyAxKSwKICAgIFwiVGhhaVwiOiByYW5nZSgzNTg0LCAzNzExICsgMSksCiAgICBcIkxhb1wiOiByYW5nZSgzNzEyLCAzODM5ICsgMSksCiAgICBcIlRpYmV0YW5cIjogcmFuZ2UoMzg0MCwgNDA5NSArIDEpLAogICAgXCJNeWFubWFyXCI6IHJhbmdlKDQwOTYsIDQyNTUgKyAxKSwKICAgIFwiR2VvcmdpYW5cIjogcmFuZ2UoNDI1NiwgNDM1MSArIDEpLAogICAgXCJIYW5ndWwgSmFtb1wiOiByYW5nZSg0MzUyLCA0NjA3ICsgMSksCiAgICBcIkV0aGlvcGljXCI6IHJhbmdlKDQ2MDgsIDQ5OTEgKyAxKSwKICAgIFwiRXRoaW9waWMgU3VwcGxlbWVudFwiOiByYW5nZSg0OTkyLCA1MDIzICsgMSksCiAgICBcIkNoZXJva2VlXCI6IHJhbmdlKDUwMjQsIDUxMTkgKyAxKSwKICAgIFwiVW5pZmllZCBDYW5hZGlhbiBBYm9yaWdpbmFsIFN5bGxhYmljc1wiOiByYW5nZSg1MTIwLCA1NzU5ICsgMSksCiAgICBcIk9naGFtXCI6IHJhbmdlKDU3NjAsIDU3OTEgKyAxKSwKICAgIFwiUnVuaWNcIjogcmFuZ2UoNTc5MiwgNTg4NyArIDEpLAogICAgXCJUYWdhbG9nXCI6IHJhbmdlKDU4ODgsIDU5MTkgKyAxKSwKICAgIFwiSGFudW5vb1wiOiByYW5nZSg1OTIwLCA1OTUxICsgMSksCiAgICBcIkJ1aGlkXCI6IHJhbmdlKDU5NTIsIDU5ODMgKyAxKSwKICAgIFwiVGFnYmFud2FcIjogcmFuZ2UoNTk4NCwgNjAxNSArIDEpLAogICAgXCJLaG1lclwiOiByYW5nZSg2MDE2LCA2MTQzICsgMSksCiAgICBcIk1vbmdvbGlhblwiOiByYW5nZSg2MTQ0LCA2MzE5ICsgMSksCiAgICBcIlVuaWZpZWQgQ2FuYWRpYW4gQWJvcmlnaW5hbCBTeWxsYWJpY3MgRXh0ZW5kZWRcIjogcmFuZ2UoNjMyMCwgNjM5OSArIDEpLAogICAgXCJMaW1idVwiOiByYW5nZSg2NDAwLCA2NDc5ICsgMSksCiAgICBcIlRhaSBMZVwiOiByYW5nZSg2NDgwLCA2NTI3ICsgMSksCiAgICBcIk5ldyBUYWkgTHVlXCI6IHJhbmdlKDY1MjgsIDY2MjMgKyAxKSwKICAgIFwiS2htZXIgU3ltYm9sc1wiOiByYW5nZSg2NjI0LCA2NjU1ICsgMSksCiAgICBcIkJ1Z2luZXNlXCI6IHJhbmdlKDY2NTYsIDY2ODcgKyAxKSwKICAgIFwiVGFpIFRoYW1cIjogcmFuZ2UoNjY4OCwgNjgzMSArIDEpLAogICAgXCJDb21iaW5pbmcgRGlhY3JpdGljYWwgTWFya3MgRXh0ZW5kZWRcIjogcmFuZ2UoNjgzMiwgNjkxMSArIDEpLAogICAgXCJCYWxpbmVzZVwiOiByYW5nZSg2OTEyLCA3MDM5ICsgMSksCiAgICBcIlN1bmRhbmVzZVwiOiByYW5nZSg3MDQwLCA3MTAzICsgMSksCiAgICBcIkJhdGFrXCI6IHJhbmdlKDcxMDQsIDcxNjcgKyAxKSwKICAgIFwiTGVwY2hhXCI6IHJhbmdlKDcxNjgsIDcyNDcgKyAxKSwKICAgIFwiT2wgQ2hpa2lcIjogcmFuZ2UoNzI0OCwgNzI5NSArIDEpLAogICAgXCJDeXJpbGxpYyBFeHRlbmRlZCBDXCI6IHJhbmdlKDcyOTYsIDczMTEgKyAxKSwKICAgIFwiU3VuZGFuZXNlIFN1cHBsZW1lbnRcIjogcmFuZ2UoNzM2MCwgNzM3NSArIDEpLAogICAgXCJWZWRpYyBFeHRlbnNpb25zXCI6IHJhbmdlKDczNzYsIDc0MjMgKyAxKSwKICAgIFwiUGhvbmV0aWMgRXh0ZW5zaW9uc1wiOiByYW5nZSg3NDI0LCA3NTUxICsgMSksCiAgICBcIlBob25ldGljIEV4dGVuc2lvbnMgU3VwcGxlbWVudFwiOiByYW5nZSg3NTUyLCA3NjE1ICsgMSksCiAgICBcIkNvbWJpbmluZyBEaWFjcml0aWNhbCBNYXJrcyBTdXBwbGVtZW50XCI6IHJhbmdlKDc2MTYsIDc2NzkgKyAxKSwKICAgIFwiTGF0aW4gRXh0ZW5kZWQgQWRkaXRpb25hbFwiOiByYW5nZSg3NjgwLCA3OTM1ICsgMSksCiAgICBcIkdyZWVrIEV4dGVuZGVkXCI6IHJhbmdlKDc5MzYsIDgxOTEgKyAxKSwKICAgIFwiR2VuZXJhbCBQdW5jdHVhdGlvblwiOiByYW5nZSg4MTkyLCA4MzAzICsgMSksCiAgICBcIlN1cGVyc2NyaXB0cyBhbmQgU3Vic2NyaXB0c1wiOiByYW5nZSg4MzA0LCA4MzUxICsgMSksCiAgICBcIkN1cnJlbmN5IFN5bWJvbHNcIjogcmFuZ2UoODM1MiwgODM5OSArIDEpLAogICAgXCJDb21iaW5pbmcgRGlhY3JpdGljYWwgTWFya3MgZm9yIFN5bWJvbHNcIjogcmFuZ2UoODQwMCwgODQ0NyArIDEpLAogICAgXCJMZXR0ZXJsaWtlIFN5bWJvbHNcIjogcmFuZ2UoODQ0OCwgODUyNyArIDEpLAogICAgXCJOdW1iZXIgRm9ybXNcIjogcmFuZ2UoODUyOCwgODU5MSArIDEpLAogICAgXCJBcnJvd3NcIjogcmFuZ2UoODU5MiwgODcwMyArIDEpLAogICAgXCJNYXRoZW1hdGljYWwgT3BlcmF0b3JzXCI6IHJhbmdlKDg3MDQsIDg5NTkgKyAxKSwKICAgIFwiTWlzY2VsbGFuZW91cyBUZWNobmljYWxcIjogcmFuZ2UoODk2MCwgOTIxNSArIDEpLAogICAgXCJDb250cm9sIFBpY3R1cmVzXCI6IHJhbmdlKDkyMTYsIDkyNzkgKyAxKSwKICAgIFwiT3B0aWNhbCBDaGFyYWN0ZXIgUmVjb2duaXRpb25cIjogcmFuZ2UoOTI4MCwgOTMxMSArIDEpLAogICAgXCJFbmNsb3NlZCBBbHBoYW51bWVyaWNzXCI6IHJhbmdlKDkzMTIsIDk0NzEgKyAxKSwKICAgIFwiQm94IERyYXdpbmdcIjogcmFuZ2UoOTQ3MiwgOTU5OSArIDEpLAogICAgXCJCbG9jayBFbGVtZW50c1wiOiByYW5nZSg5NjAwLCA5NjMxICsgMSksCiAgICBcIkdlb21ldHJpYyBTaGFwZXNcIjogcmFuZ2UoOTYzMiwgOTcyNyArIDEpLAogICAgXCJNaXNjZWxsYW5lb3VzIFN5bWJvbHNcIjogcmFuZ2UoOTcyOCwgOTk4MyArIDEpLAogICAgXCJEaW5nYmF0c1wiOiByYW5nZSg5OTg0LCAxMDE3NSArIDEpLAogICAgXCJNaXNjZWxsYW5lb3VzIE1hdGhlbWF0aWNhbCBTeW1ib2xzLUFcIjogcmFuZ2UoMTAxNzYsIDEwMjIzICsgMSksCiAgICBcIlN1cHBsZW1lbnRhbCBBcnJvd3MtQVwiOiByYW5nZSgxMDIyNCwgMTAyMzkgKyAxKSwKICAgIFwiQnJhaWxsZSBQYXR0ZXJuc1wiOiByYW5nZSgxMDI0MCwgMTA0OTUgKyAxKSwKICAgIFwiU3VwcGxlbWVudGFsIEFycm93cy1CXCI6IHJhbmdlKDEwNDk2LCAxMDYyMyArIDEpLAogICAgXCJNaXNjZWxsYW5lb3VzIE1hdGhlbWF0aWNhbCBTeW1ib2xzLUJcIjogcmFuZ2UoMTA2MjQsIDEwNzUxICsgMSksCiAgICBcIlN1cHBsZW1lbnRhbCBNYXRoZW1hdGljYWwgT3BlcmF0b3JzXCI6IHJhbmdlKDEwNzUyLCAxMTAwNyArIDEpLAogICAgXCJNaXNjZWxsYW5lb3VzIFN5bWJvbHMgYW5kIEFycm93c1wiOiByYW5nZSgxMTAwOCwgMTEyNjMgKyAxKSwKICAgIFwiR2xhZ29saXRpY1wiOiByYW5nZSgxMTI2NCwgMTEzNTkgKyAxKSwKICAgIFwiTGF0aW4gRXh0ZW5kZWQtQ1wiOiByYW5nZSgxMTM2MCwgMTEzOTEgKyAxKSwKICAgIFwiQ29wdGljXCI6IHJhbmdlKDExMzkyLCAxMTUxOSArIDEpLAogICAgXCJHZW9yZ2lhbiBTdXBwbGVtZW50XCI6IHJhbmdlKDExNTIwLCAxMTU2NyArIDEpLAogICAgXCJUaWZpbmFnaFwiOiByYW5nZSgxMTU2OCwgMTE2NDcgKyAxKSwKICAgIFwiRXRoaW9waWMgRXh0ZW5kZWRcIjogcmFuZ2UoMTE2NDgsIDExNzQzICsgMSksCiAgICBcIkN5cmlsbGljIEV4dGVuZGVkLUFcIjogcmFuZ2UoMTE3NDQsIDExNzc1ICsgMSksCiAgICBcIlN1cHBsZW1lbnRhbCBQdW5jdHVhdGlvblwiOiByYW5nZSgxMTc3NiwgMTE5MDMgKyAxKSwKICAgIFwiQ0pLIFJhZGljYWxzIFN1cHBsZW1lbnRcIjogcmFuZ2UoMTE5MDQsIDEyMDMxICsgMSksCiAgICBcIkthbmd4aSBSYWRpY2Fsc1wiOiByYW5nZSgxMjAzMiwgMTIyNTUgKyAxKSwKICAgIFwiSWRlb2dyYXBoaWMgRGVzY3JpcHRpb24gQ2hhcmFjdGVyc1wiOiByYW5nZSgxMjI3MiwgMTIyODcgKyAxKSwKICAgIFwiQ0pLIFN5bWJvbHMgYW5kIFB1bmN0dWF0aW9uXCI6IHJhbmdlKDEyMjg4LCAxMjM1MSArIDEpLAogICAgXCJIaXJhZ2FuYVwiOiByYW5nZSgxMjM1MiwgMTI0NDcgKyAxKSwKICAgIFwiS2F0YWthbmFcIjogcmFuZ2UoMTI0NDgsIDEyNTQzICsgMSksCiAgICBcIkJvcG9tb2ZvXCI6IHJhbmdlKDEyNTQ0LCAxMjU5MSArIDEpLAogICAgXCJIYW5ndWwgQ29tcGF0aWJpbGl0eSBKYW1vXCI6IHJhbmdlKDEyNTkyLCAxMjY4NyArIDEpLAogICAgXCJLYW5idW5cIjogcmFuZ2UoMTI2ODgsIDEyNzAzICsgMSksCiAgICBcIkJvcG9tb2ZvIEV4dGVuZGVkXCI6IHJhbmdlKDEyNzA0LCAxMjczNSArIDEpLAogICAgXCJDSksgU3Ryb2tlc1wiOiByYW5nZSgxMjczNiwgMTI3ODMgKyAxKSwKICAgIFwiS2F0YWthbmEgUGhvbmV0aWMgRXh0ZW5zaW9uc1wiOiByYW5nZSgxMjc4NCwgMTI3OTkgKyAxKSwKICAgIFwiRW5jbG9zZWQgQ0pLIExldHRlcnMgYW5kIE1vbnRoc1wiOiByYW5nZSgxMjgwMCwgMTMwNTUgKyAxKSwKICAgIFwiQ0pLIENvbXBhdGliaWxpdHlcIjogcmFuZ2UoMTMwNTYsIDEzMzExICsgMSksCiAgICBcIkNKSyBVbmlmaWVkIElkZW9ncmFwaHMgRXh0ZW5zaW9uIEFcIjogcmFuZ2UoMTMzMTIsIDE5OTAzICsgMSksCiAgICBcIllpamluZyBIZXhhZ3JhbSBTeW1ib2xzXCI6IHJhbmdlKDE5OTA0LCAxOTk2NyArIDEpLAogICAgXCJDSksgVW5pZmllZCBJZGVvZ3JhcGhzXCI6IHJhbmdlKDE5OTY4LCA0MDk1OSArIDEpLAogICAgXCJZaSBTeWxsYWJsZXNcIjogcmFuZ2UoNDA5NjAsIDQyMTI3ICsgMSksCiAgICBcIllpIFJhZGljYWxzXCI6IHJhbmdlKDQyMTI4LCA0MjE5MSArIDEpLAogICAgXCJMaXN1XCI6IHJhbmdlKDQyMTkyLCA0MjIzOSArIDEpLAogICAgXCJWYWlcIjogcmFuZ2UoNDIyNDAsIDQyNTU5ICsgMSksCiAgICBcIkN5cmlsbGljIEV4dGVuZGVkLUJcIjogcmFuZ2UoNDI1NjAsIDQyNjU1ICsgMSksCiAgICBcIkJhbXVtXCI6IHJhbmdlKDQyNjU2LCA0Mjc1MSArIDEpLAogICAgXCJNb2RpZmllciBUb25lIExldHRlcnNcIjogcmFuZ2UoNDI3NTIsIDQyNzgzICsgMSksCiAgICBcIkxhdGluIEV4dGVuZGVkLURcIjogcmFuZ2UoNDI3ODQsIDQzMDA3ICsgMSksCiAgICBcIlN5bG90aSBOYWdyaVwiOiByYW5nZSg0MzAwOCwgNDMwNTUgKyAxKSwKICAgIFwiQ29tbW9uIEluZGljIE51bWJlciBGb3Jtc1wiOiByYW5nZSg0MzA1NiwgNDMwNzEgKyAxKSwKICAgIFwiUGhhZ3MtcGFcIjogcmFuZ2UoNDMwNzIsIDQzMTM1ICsgMSksCiAgICBcIlNhdXJhc2h0cmFcIjogcmFuZ2UoNDMxMzYsIDQzMjMxICsgMSksCiAgICBcIkRldmFuYWdhcmkgRXh0ZW5kZWRcIjogcmFuZ2UoNDMyMzIsIDQzMjYzICsgMSksCiAgICBcIktheWFoIExpXCI6IHJhbmdlKDQzMjY0LCA0MzMxMSArIDEpLAogICAgXCJSZWphbmdcIjogcmFuZ2UoNDMzMTIsIDQzMzU5ICsgMSksCiAgICBcIkhhbmd1bCBKYW1vIEV4dGVuZGVkLUFcIjogcmFuZ2UoNDMzNjAsIDQzMzkxICsgMSksCiAgICBcIkphdmFuZXNlXCI6IHJhbmdlKDQzMzkyLCA0MzQ4NyArIDEpLAogICAgXCJNeWFubWFyIEV4dGVuZGVkLUJcIjogcmFuZ2UoNDM0ODgsIDQzNTE5ICsgMSksCiAgICBcIkNoYW1cIjogcmFuZ2UoNDM1MjAsIDQzNjE1ICsgMSksCiAgICBcIk15YW5tYXIgRXh0ZW5kZWQtQVwiOiByYW5nZSg0MzYxNiwgNDM2NDcgKyAxKSwKICAgIFwiVGFpIFZpZXRcIjogcmFuZ2UoNDM2NDgsIDQzNzQzICsgMSksCiAgICBcIk1lZXRlaSBNYXllayBFeHRlbnNpb25zXCI6IHJhbmdlKDQzNzQ0LCA0Mzc3NSArIDEpLAogICAgXCJFdGhpb3BpYyBFeHRlbmRlZC1BXCI6IHJhbmdlKDQzNzc2LCA0MzgyMyArIDEpLAogICAgXCJMYXRpbiBFeHRlbmRlZC1FXCI6IHJhbmdlKDQzODI0LCA0Mzg4NyArIDEpLAogICAgXCJDaGVyb2tlZSBTdXBwbGVtZW50XCI6IHJhbmdlKDQzODg4LCA0Mzk2NyArIDEpLAogICAgXCJNZWV0ZWkgTWF5ZWtcIjogcmFuZ2UoNDM5NjgsIDQ0MDMxICsgMSksCiAgICBcIkhhbmd1bCBTeWxsYWJsZXNcIjogcmFuZ2UoNDQwMzIsIDU1MjE1ICsgMSksCiAgICBcIkhhbmd1bCBKYW1vIEV4dGVuZGVkLUJcIjogcmFuZ2UoNTUyMTYsIDU1Mjk1ICsgMSksCiAgICBcIkhpZ2ggU3Vycm9nYXRlc1wiOiByYW5nZSg1NTI5NiwgNTYxOTEgKyAxKSwKICAgIFwiSGlnaCBQcml2YXRlIFVzZSBTdXJyb2dhdGVzXCI6IHJhbmdlKDU2MTkyLCA1NjMxOSArIDEpLAogICAgXCJMb3cgU3Vycm9nYXRlc1wiOiByYW5nZSg1NjMyMCwgNTczNDMgKyAxKSwKICAgIFwiUHJpdmF0ZSBVc2UgQXJlYVwiOiByYW5nZSg1NzM0NCwgNjM3NDMgKyAxKSwKICAgIFwiQ0pLIENvbXBhdGliaWxpdHkgSWRlb2dyYXBoc1wiOiByYW5nZSg2Mzc0NCwgNjQyNTUgKyAxKSwKICAgIFwiQWxwaGFiZXRpYyBQcmVzZW50YXRpb24gRm9ybXNcIjogcmFuZ2UoNjQyNTYsIDY0MzM1ICsgMSksCiAgICBcIkFyYWJpYyBQcmVzZW50YXRpb24gRm9ybXMtQVwiOiByYW5nZSg2NDMzNiwgNjUwMjMgKyAxKSwKICAgIFwiVmFyaWF0aW9uIFNlbGVjdG9yc1wiOiByYW5nZSg2NTAyNCwgNjUwMzkgKyAxKSwKICAgIFwiVmVydGljYWwgRm9ybXNcIjogcmFuZ2UoNjUwNDAsIDY1MDU1ICsgMSksCiAgICBcIkNvbWJpbmluZyBIYWxmIE1hcmtzXCI6IHJhbmdlKDY1MDU2LCA2NTA3MSArIDEpLAogICAgXCJDSksgQ29tcGF0aWJpbGl0eSBGb3Jtc1wiOiByYW5nZSg2NTA3MiwgNjUxMDMgKyAxKSwKICAgIFwiU21hbGwgRm9ybSBWYXJpYW50c1wiOiByYW5nZSg2NTEwNCwgNjUxMzUgKyAxKSwKICAgIFwiQXJhYmljIFByZXNlbnRhdGlvbiBGb3Jtcy1CXCI6IHJhbmdlKDY1MTM2LCA2NTI3OSArIDEpLAogICAgXCJIYWxmd2lkdGggYW5kIEZ1bGx3aWR0aCBGb3Jtc1wiOiByYW5nZSg2NTI4MCwgNjU1MTkgKyAxKSwKICAgIFwiU3BlY2lhbHNcIjogcmFuZ2UoNjU1MjAsIDY1NTM1ICsgMSksCiAgICBcIkxpbmVhciBCIFN5bGxhYmFyeVwiOiByYW5nZSg2NTUzNiwgNjU2NjMgKyAxKSwKICAgIFwiTGluZWFyIEIgSWRlb2dyYW1zXCI6IHJhbmdlKDY1NjY0LCA2NTc5MSArIDEpLAogICAgXCJBZWdlYW4gTnVtYmVyc1wiOiByYW5nZSg2NTc5MiwgNjU4NTUgKyAxKSwKICAgIFwiQW5jaWVudCBHcmVlayBOdW1iZXJzXCI6IHJhbmdlKDY1ODU2LCA2NTkzNSArIDEpLAogICAgXCJBbmNpZW50IFN5bWJvbHNcIjogcmFuZ2UoNjU5MzYsIDY1OTk5ICsgMSksCiAgICBcIlBoYWlzdG9zIERpc2NcIjogcmFuZ2UoNjYwMDAsIDY2MDQ3ICsgMSksCiAgICBcIkx5Y2lhblwiOiByYW5nZSg2NjE3NiwgNjYyMDcgKyAxKSwKICAgIFwiQ2FyaWFuXCI6IHJhbmdlKDY2MjA4LCA2NjI3MSArIDEpLAogICAgXCJDb3B0aWMgRXBhY3QgTnVtYmVyc1wiOiByYW5nZSg2NjI3MiwgNjYzMDMgKyAxKSwKICAgIFwiT2xkIEl0YWxpY1wiOiByYW5nZSg2NjMwNCwgNjYzNTEgKyAxKSwKICAgIFwiR290aGljXCI6IHJhbmdlKDY2MzUyLCA2NjM4MyArIDEpLAogICAgXCJPbGQgUGVybWljXCI6IHJhbmdlKDY2Mzg0LCA2NjQzMSArIDEpLAogICAgXCJVZ2FyaXRpY1wiOiByYW5nZSg2NjQzMiwgNjY0NjMgKyAxKSwKICAgIFwiT2xkIFBlcnNpYW5cIjogcmFuZ2UoNjY0NjQsIDY2NTI3ICsgMSksCiAgICBcIkRlc2VyZXRcIjogcmFuZ2UoNjY1NjAsIDY2NjM5ICsgMSksCiAgICBcIlNoYXZpYW5cIjogcmFuZ2UoNjY2NDAsIDY2Njg3ICsgMSksCiAgICBcIk9zbWFueWFcIjogcmFuZ2UoNjY2ODgsIDY2NzM1ICsgMSksCiAgICBcIk9zYWdlXCI6IHJhbmdlKDY2NzM2LCA2NjgxNSArIDEpLAogICAgXCJFbGJhc2FuXCI6IHJhbmdlKDY2ODE2LCA2Njg2MyArIDEpLAogICAgXCJDYXVjYXNpYW4gQWxiYW5pYW5cIjogcmFuZ2UoNjY4NjQsIDY2OTI3ICsgMSksCiAgICBcIkxpbmVhciBBXCI6IHJhbmdlKDY3MDcyLCA2NzQ1NSArIDEpLAogICAgXCJDeXByaW90IFN5bGxhYmFyeVwiOiByYW5nZSg2NzU4NCwgNjc2NDcgKyAxKSwKICAgIFwiSW1wZXJpYWwgQXJhbWFpY1wiOiByYW5nZSg2NzY0OCwgNjc2NzkgKyAxKSwKICAgIFwiUGFsbXlyZW5lXCI6IHJhbmdlKDY3NjgwLCA2NzcxMSArIDEpLAogICAgXCJOYWJhdGFlYW5cIjogcmFuZ2UoNjc3MTIsIDY3NzU5ICsgMSksCiAgICBcIkhhdHJhblwiOiByYW5nZSg2NzgwOCwgNjc4MzkgKyAxKSwKICAgIFwiUGhvZW5pY2lhblwiOiByYW5nZSg2Nzg0MCwgNjc4NzEgKyAxKSwKICAgIFwiTHlkaWFuXCI6IHJhbmdlKDY3ODcyLCA2NzkwMyArIDEpLAogICAgXCJNZXJvaXRpYyBIaWVyb2dseXBoc1wiOiByYW5nZSg2Nzk2OCwgNjc5OTkgKyAxKSwKICAgIFwiTWVyb2l0aWMgQ3Vyc2l2ZVwiOiByYW5nZSg2ODAwMCwgNjgwOTUgKyAxKSwKICAgIFwiS2hhcm9zaHRoaVwiOiByYW5nZSg2ODA5NiwgNjgxOTEgKyAxKSwKICAgIFwiT2xkIFNvdXRoIEFyYWJpYW5cIjogcmFuZ2UoNjgxOTIsIDY4MjIzICsgMSksCiAgICBcIk9sZCBOb3J0aCBBcmFiaWFuXCI6IHJhbmdlKDY4MjI0LCA2ODI1NSArIDEpLAogICAgXCJNYW5pY2hhZWFuXCI6IHJhbmdlKDY4Mjg4LCA2ODM1MSArIDEpLAogICAgXCJBdmVzdGFuXCI6IHJhbmdlKDY4MzUyLCA2ODQxNSArIDEpLAogICAgXCJJbnNjcmlwdGlvbmFsIFBhcnRoaWFuXCI6IHJhbmdlKDY4NDE2LCA2ODQ0NyArIDEpLAogICAgXCJJbnNjcmlwdGlvbmFsIFBhaGxhdmlcIjogcmFuZ2UoNjg0NDgsIDY4NDc5ICsgMSksCiAgICBcIlBzYWx0ZXIgUGFobGF2aVwiOiByYW5nZSg2ODQ4MCwgNjg1MjcgKyAxKSwKICAgIFwiT2xkIFR1cmtpY1wiOiByYW5nZSg2ODYwOCwgNjg2ODcgKyAxKSwKICAgIFwiT2xkIEh1bmdhcmlhblwiOiByYW5nZSg2ODczNiwgNjg4NjMgKyAxKSwKICAgIFwiUnVtaSBOdW1lcmFsIFN5bWJvbHNcIjogcmFuZ2UoNjkyMTYsIDY5MjQ3ICsgMSksCiAgICBcIkJyYWhtaVwiOiByYW5nZSg2OTYzMiwgNjk3NTkgKyAxKSwKICAgIFwiS2FpdGhpXCI6IHJhbmdlKDY5NzYwLCA2OTgzOSArIDEpLAogICAgXCJTb3JhIFNvbXBlbmdcIjogcmFuZ2UoNjk4NDAsIDY5ODg3ICsgMSksCiAgICBcIkNoYWttYVwiOiByYW5nZSg2OTg4OCwgNjk5NjcgKyAxKSwKICAgIFwiTWFoYWphbmlcIjogcmFuZ2UoNjk5NjgsIDcwMDE1ICsgMSksCiAgICBcIlNoYXJhZGFcIjogcmFuZ2UoNzAwMTYsIDcwMTExICsgMSksCiAgICBcIlNpbmhhbGEgQXJjaGFpYyBOdW1iZXJzXCI6IHJhbmdlKDcwMTEyLCA3MDE0MyArIDEpLAogICAgXCJLaG9qa2lcIjogcmFuZ2UoNzAxNDQsIDcwMjIzICsgMSksCiAgICBcIk11bHRhbmlcIjogcmFuZ2UoNzAyNzIsIDcwMzE5ICsgMSksCiAgICBcIktodWRhd2FkaVwiOiByYW5nZSg3MDMyMCwgNzAzOTkgKyAxKSwKICAgIFwiR3JhbnRoYVwiOiByYW5nZSg3MDQwMCwgNzA1MjcgKyAxKSwKICAgIFwiTmV3YVwiOiByYW5nZSg3MDY1NiwgNzA3ODMgKyAxKSwKICAgIFwiVGlyaHV0YVwiOiByYW5nZSg3MDc4NCwgNzA4NzkgKyAxKSwKICAgIFwiU2lkZGhhbVwiOiByYW5nZSg3MTA0MCwgNzExNjcgKyAxKSwKICAgIFwiTW9kaVwiOiByYW5nZSg3MTE2OCwgNzEyNjMgKyAxKSwKICAgIFwiTW9uZ29saWFuIFN1cHBsZW1lbnRcIjogcmFuZ2UoNzEyNjQsIDcxMjk1ICsgMSksCiAgICBcIlRha3JpXCI6IHJhbmdlKDcxMjk2LCA3MTM3NSArIDEpLAogICAgXCJBaG9tXCI6IHJhbmdlKDcxNDI0LCA3MTQ4NyArIDEpLAogICAgXCJXYXJhbmcgQ2l0aVwiOiByYW5nZSg3MTg0MCwgNzE5MzUgKyAxKSwKICAgIFwiWmFuYWJhemFyIFNxdWFyZVwiOiByYW5nZSg3MjE5MiwgNzIyNzEgKyAxKSwKICAgIFwiU295b21ib1wiOiByYW5nZSg3MjI3MiwgNzIzNjcgKyAxKSwKICAgIFwiUGF1IENpbiBIYXVcIjogcmFuZ2UoNzIzODQsIDcyNDQ3ICsgMSksCiAgICBcIkJoYWlrc3VraVwiOiByYW5nZSg3MjcwNCwgNzI4MTUgKyAxKSwKICAgIFwiTWFyY2hlblwiOiByYW5nZSg3MjgxNiwgNzI4OTUgKyAxKSwKICAgIFwiTWFzYXJhbSBHb25kaVwiOiByYW5nZSg3Mjk2MCwgNzMwNTUgKyAxKSwKICAgIFwiQ3VuZWlmb3JtXCI6IHJhbmdlKDczNzI4LCA3NDc1MSArIDEpLAogICAgXCJDdW5laWZvcm0gTnVtYmVycyBhbmQgUHVuY3R1YXRpb25cIjogcmFuZ2UoNzQ3NTIsIDc0ODc5ICsgMSksCiAgICBcIkVhcmx5IER5bmFzdGljIEN1bmVpZm9ybVwiOiByYW5nZSg3NDg4MCwgNzUwODcgKyAxKSwKICAgIFwiRWd5cHRpYW4gSGllcm9nbHlwaHNcIjogcmFuZ2UoNzc4MjQsIDc4ODk1ICsgMSksCiAgICBcIkFuYXRvbGlhbiBIaWVyb2dseXBoc1wiOiByYW5nZSg4Mjk0NCwgODM1ODMgKyAxKSwKICAgIFwiQmFtdW0gU3VwcGxlbWVudFwiOiByYW5nZSg5MjE2MCwgOTI3MzUgKyAxKSwKICAgIFwiTXJvXCI6IHJhbmdlKDkyNzM2LCA5Mjc4MyArIDEpLAogICAgXCJCYXNzYSBWYWhcIjogcmFuZ2UoOTI4ODAsIDkyOTI3ICsgMSksCiAgICBcIlBhaGF3aCBIbW9uZ1wiOiByYW5nZSg5MjkyOCwgOTMwNzEgKyAxKSwKICAgIFwiTWlhb1wiOiByYW5nZSg5Mzk1MiwgOTQxMTEgKyAxKSwKICAgIFwiSWRlb2dyYXBoaWMgU3ltYm9scyBhbmQgUHVuY3R1YXRpb25cIjogcmFuZ2UoOTQxNzYsIDk0MjA3ICsgMSksCiAgICBcIlRhbmd1dFwiOiByYW5nZSg5NDIwOCwgMTAwMzUxICsgMSksCiAgICBcIlRhbmd1dCBDb21wb25lbnRzXCI6IHJhbmdlKDEwMDM1MiwgMTAxMTE5ICsgMSksCiAgICBcIkthbmEgU3VwcGxlbWVudFwiOiByYW5nZSgxMTA1OTIsIDExMDg0NyArIDEpLAogICAgXCJLYW5hIEV4dGVuZGVkLUFcIjogcmFuZ2UoMTEwODQ4LCAxMTA4OTUgKyAxKSwKICAgIFwiTnVzaHVcIjogcmFuZ2UoMTEwOTYwLCAxMTEzNTkgKyAxKSwKICAgIFwiRHVwbG95YW5cIjogcmFuZ2UoMTEzNjY0LCAxMTM4MjMgKyAxKSwKICAgIFwiU2hvcnRoYW5kIEZvcm1hdCBDb250cm9sc1wiOiByYW5nZSgxMTM4MjQsIDExMzgzOSArIDEpLAogICAgXCJCeXphbnRpbmUgTXVzaWNhbCBTeW1ib2xzXCI6IHJhbmdlKDExODc4NCwgMTE5MDM5ICsgMSksCiAgICBcIk11c2ljYWwgU3ltYm9sc1wiOiByYW5nZSgxMTkwNDAsIDExOTI5NSArIDEpLAogICAgXCJBbmNpZW50IEdyZWVrIE11c2ljYWwgTm90YXRpb25cIjogcmFuZ2UoMTE5Mjk2LCAxMTkzNzUgKyAxKSwKICAgIFwiVGFpIFh1YW4gSmluZyBTeW1ib2xzXCI6IHJhbmdlKDExOTU1MiwgMTE5NjQ3ICsgMSksCiAgICBcIkNvdW50aW5nIFJvZCBOdW1lcmFsc1wiOiByYW5nZSgxMTk2NDgsIDExOTY3OSArIDEpLAogICAgXCJNYXRoZW1hdGljYWwgQWxwaGFudW1lcmljIFN5bWJvbHNcIjogcmFuZ2UoMTE5ODA4LCAxMjA4MzEgKyAxKSwKICAgIFwiU3V0dG9uIFNpZ25Xcml0aW5nXCI6IHJhbmdlKDEyMDgzMiwgMTIxNTE5ICsgMSksCiAgICBcIkdsYWdvbGl0aWMgU3VwcGxlbWVudFwiOiByYW5nZSgxMjI4ODAsIDEyMjkyNyArIDEpLAogICAgXCJNZW5kZSBLaWtha3VpXCI6IHJhbmdlKDEyNDkyOCwgMTI1MTUxICsgMSksCiAgICBcIkFkbGFtXCI6IHJhbmdlKDEyNTE4NCwgMTI1Mjc5ICsgMSksCiAgICBcIkFyYWJpYyBNYXRoZW1hdGljYWwgQWxwaGFiZXRpYyBTeW1ib2xzXCI6IHJhbmdlKDEyNjQ2NCwgMTI2NzE5ICsgMSksCiAgICBcIk1haGpvbmcgVGlsZXNcIjogcmFuZ2UoMTI2OTc2LCAxMjcwMjMgKyAxKSwKICAgIFwiRG9taW5vIFRpbGVzXCI6IHJhbmdlKDEyNzAyNCwgMTI3MTM1ICsgMSksCiAgICBcIlBsYXlpbmcgQ2FyZHNcIjogcmFuZ2UoMTI3MTM2LCAxMjcyMzEgKyAxKSwKICAgIFwiRW5jbG9zZWQgQWxwaGFudW1lcmljIFN1cHBsZW1lbnRcIjogcmFuZ2UoMTI3MjMyLCAxMjc0ODcgKyAxKSwKICAgIFwiRW5jbG9zZWQgSWRlb2dyYXBoaWMgU3VwcGxlbWVudFwiOiByYW5nZSgxMjc0ODgsIDEyNzc0MyArIDEpLAogICAgXCJNaXNjZWxsYW5lb3VzIFN5bWJvbHMgYW5kIFBpY3RvZ3JhcGhzXCI6IHJhbmdlKDEyNzc0NCwgMTI4NTExICsgMSksCiAgICBcIkVtb3RpY29ucyByYW5nZShFbW9qaSlcIjogcmFuZ2UoMTI4NTEyLCAxMjg1OTEgKyAxKSwKICAgIFwiT3JuYW1lbnRhbCBEaW5nYmF0c1wiOiByYW5nZSgxMjg1OTIsIDEyODYzOSArIDEpLAogICAgXCJUcmFuc3BvcnQgYW5kIE1hcCBTeW1ib2xzXCI6IHJhbmdlKDEyODY0MCwgMTI4NzY3ICsgMSksCiAgICBcIkFsY2hlbWljYWwgU3ltYm9sc1wiOiByYW5nZSgxMjg3NjgsIDEyODg5NSArIDEpLAogICAgXCJHZW9tZXRyaWMgU2hhcGVzIEV4dGVuZGVkXCI6IHJhbmdlKDEyODg5NiwgMTI5MDIzICsgMSksCiAgICBcIlN1cHBsZW1lbnRhbCBBcnJvd3MtQ1wiOiByYW5nZSgxMjkwMjQsIDEyOTI3OSArIDEpLAogICAgXCJTdXBwbGVtZW50YWwgU3ltYm9scyBhbmQgUGljdG9ncmFwaHNcIjogcmFuZ2UoMTI5MjgwLCAxMjk1MzUgKyAxKSwKICAgIFwiQ0pLIFVuaWZpZWQgSWRlb2dyYXBocyBFeHRlbnNpb24gQlwiOiByYW5nZSgxMzEwNzIsIDE3Mzc5MSArIDEpLAogICAgXCJDSksgVW5pZmllZCBJZGVvZ3JhcGhzIEV4dGVuc2lvbiBDXCI6IHJhbmdlKDE3MzgyNCwgMTc3OTgzICsgMSksCiAgICBcIkNKSyBVbmlmaWVkIElkZW9ncmFwaHMgRXh0ZW5zaW9uIERcIjogcmFuZ2UoMTc3OTg0LCAxNzgyMDcgKyAxKSwKICAgIFwiQ0pLIFVuaWZpZWQgSWRlb2dyYXBocyBFeHRlbnNpb24gRVwiOiByYW5nZSgxNzgyMDgsIDE4Mzk4MyArIDEpLAogICAgXCJDSksgVW5pZmllZCBJZGVvZ3JhcGhzIEV4dGVuc2lvbiBGXCI6IHJhbmdlKDE4Mzk4NCwgMTkxNDcxICsgMSksCiAgICBcIkNKSyBDb21wYXRpYmlsaXR5IElkZW9ncmFwaHMgU3VwcGxlbWVudFwiOiByYW5nZSgxOTQ1NjAsIDE5NTEwMyArIDEpLAogICAgXCJUYWdzXCI6IHJhbmdlKDkxNzUwNCwgOTE3NjMxICsgMSksCiAgICBcIlZhcmlhdGlvbiBTZWxlY3RvcnMgU3VwcGxlbWVudFwiOiByYW5nZSg5MTc3NjAsIDkxNzk5OSArIDEpLAp9CgoKVU5JQ09ERV9TRUNPTkRBUllfUkFOR0VfS0VZV09SRDogTGlzdFtzdHJdID0gWwogICAgXCJTdXBwbGVtZW50XCIsCiAgICBcIkV4dGVuZGVkXCIsCiAgICBcIkV4dGVuc2lvbnNcIiwKICAgIFwiTW9kaWZpZXJcIiwKICAgIFwiTWFya3NcIiwKICAgIFwiUHVuY3R1YXRpb25cIiwKICAgIFwiU3ltYm9sc1wiLAogICAgXCJGb3Jtc1wiLAogICAgXCJPcGVyYXRvcnNcIiwKICAgIFwiTWlzY2VsbGFuZW91c1wiLAogICAgXCJEcmF3aW5nXCIsCiAgICBcIkJsb2NrXCIsCiAgICBcIlNoYXBlc1wiLAogICAgXCJTdXBwbGVtZW50YWxcIiwKICAgIFwiVGFnc1wiLApdCgpSRV9QT1NTSUJMRV9FTkNPRElOR19JTkRJQ0FUSU9OID0gcmVfY29tcGlsZSgKICAgIHJcIig/Oig/OmVuY29kaW5nKXwoPzpjaGFyc2V0KXwoPzpjb2RpbmcpKSg/OltcXDo9IF17MSwxMH0pKD86W1xcXCJcXCddPykoW2EtekEtWjAtOVxcLV9dKykoPzpbXFxcIlxcJ10/KVwiLAogICAgSUdOT1JFQ0FTRSwKKQoKSUFOQV9TVVBQT1JURUQ6IExpc3Rbc3RyXSA9IHNvcnRlZCgKICAgIGZpbHRlcigKICAgICAgICBsYW1iZGEgeDogeC5lbmRzd2l0aChcIl9jb2RlY1wiKSBpcyBGYWxzZQogICAgICAgIGFuZCB4IG5vdCBpbiB7XCJyb3RfMTNcIiwgXCJ0YWN0aXNcIiwgXCJtYmNzXCJ9LAogICAgICAgIGxpc3Qoc2V0KGFsaWFzZXMudmFsdWVzKCkpKSwKICAgICkKKQoKSUFOQV9TVVBQT1JURURfQ09VTlQ6IGludCA9IGxlbihJQU5BX1NVUFBPUlRFRCkKCiMgcHJlLWNvbXB1dGVkIGNvZGUgcGFnZSB0aGF0IGFyZSBzaW1pbGFyIHVzaW5nIHRoZSBmdW5jdGlvbiBjcF9zaW1pbGFyaXR5LgpJQU5BX1NVUFBPUlRFRF9TSU1JTEFSOiBEaWN0W3N0ciwgTGlzdFtzdHJdXSA9IHsKICAgIFwiY3AwMzdcIjogW1wiY3AxMDI2XCIsIFwiY3AxMTQwXCIsIFwiY3AyNzNcIiwgXCJjcDUwMFwiXSwKICAgIFwiY3AxMDI2XCI6IFtcImNwMDM3XCIsIFwiY3AxMTQwXCIsIFwiY3AyNzNcIiwgXCJjcDUwMFwiXSwKICAgIFwiY3AxMTI1XCI6IFtcImNwODY2XCJdLAogICAgXCJjcDExNDBcIjogW1wiY3AwMzdcIiwgXCJjcDEwMjZcIiwgXCJjcDI3M1wiLCBcImNwNTAwXCJdLAogICAgXCJjcDEyNTBcIjogW1wiaXNvODg1OV8yXCJdLAogICAgXCJjcDEyNTFcIjogW1wia3oxMDQ4XCIsIFwicHRjcDE1NFwiXSwKICAgIFwiY3AxMjUyXCI6IFtcImlzbzg4NTlfMTVcIiwgXCJpc284ODU5XzlcIiwgXCJsYXRpbl8xXCJdLAogICAgXCJjcDEyNTNcIjogW1wiaXNvODg1OV83XCJdLAogICAgXCJjcDEyNTRcIjogW1wiaXNvODg1OV8xNVwiLCBcImlzbzg4NTlfOVwiLCBcImxhdGluXzFcIl0sCiAgICBcImNwMTI1N1wiOiBbXCJpc284ODU5XzEzXCJdLAogICAgXCJjcDI3M1wiOiBbXCJjcDAzN1wiLCBcImNwMTAyNlwiLCBcImNwMTE0MFwiLCBcImNwNTAwXCJdLAogICAgXCJjcDQzN1wiOiBbXCJjcDg1MFwiLCBcImNwODU4XCIsIFwiY3A4NjBcIiwgXCJjcDg2MVwiLCBcImNwODYyXCIsIFwiY3A4NjNcIiwgXCJjcDg2NVwiXSwKICAgIFwiY3A1MDBcIjogW1wiY3AwMzdcIiwgXCJjcDEwMjZcIiwgXCJjcDExNDBcIiwgXCJjcDI3M1wiXSwKICAgIFwiY3A4NTBcIjogW1wiY3A0MzdcIiwgXCJjcDg1N1wiLCBcImNwODU4XCIsIFwiY3A4NjVcIl0sCiAgICBcImNwODU3XCI6IFtcImNwODUwXCIsIFwiY3A4NThcIiwgXCJjcDg2NVwiXSwKICAgIFwiY3A4NThcIjogW1wiY3A0MzdcIiwgXCJjcDg1MFwiLCBcImNwODU3XCIsIFwiY3A4NjVcIl0sCiAgICBcImNwODYwXCI6IFtcImNwNDM3XCIsIFwiY3A4NjFcIiwgXCJjcDg2MlwiLCBcImNwODYzXCIsIFwiY3A4NjVcIl0sCiAgICBcImNwODYxXCI6IFtcImNwNDM3XCIsIFwiY3A4NjBcIiwgXCJjcDg2MlwiLCBcImNwODYzXCIsIFwiY3A4NjVcIl0sCiAgICBcImNwODYyXCI6IFtcImNwNDM3XCIsIFwiY3A4NjBcIiwgXCJjcDg2MVwiLCBcImNwODYzXCIsIFwiY3A4NjVcIl0sCiAgICBcImNwODYzXCI6IFtcImNwNDM3XCIsIFwiY3A4NjBcIiwgXCJjcDg2MVwiLCBcImNwODYyXCIsIFwiY3A4NjVcIl0sCiAgICBcImNwODY1XCI6IFtcImNwNDM3XCIsIFwiY3A4NTBcIiwgXCJjcDg1N1wiLCBcImNwODU4XCIsIFwiY3A4NjBcIiwgXCJjcDg2MVwiLCBcImNwODYyXCIsIFwiY3A4NjNcIl0sCiAgICBcImNwODY2XCI6IFtcImNwMTEyNVwiXSwKICAgIFwiaXNvODg1OV8xMFwiOiBbXCJpc284ODU5XzE0XCIsIFwiaXNvODg1OV8xNVwiLCBcImlzbzg4NTlfNFwiLCBcImlzbzg4NTlfOVwiLCBcImxhdGluXzFcIl0sCiAgICBcImlzbzg4NTlfMTFcIjogW1widGlzXzYyMFwiXSwKICAgIFwiaXNvODg1OV8xM1wiOiBbXCJjcDEyNTdcIl0sCiAgICBcImlzbzg4NTlfMTRcIjogWwogICAgICAgIFwiaXNvODg1OV8xMFwiLAogICAgICAgIFwiaXNvODg1OV8xNVwiLAogICAgICAgIFwiaXNvODg1OV8xNlwiLAogICAgICAgIFwiaXNvODg1OV8zXCIsCiAgICAgICAgXCJpc284ODU5XzlcIiwKICAgICAgICBcImxhdGluXzFcIiwKICAgIF0sCiAgICBcImlzbzg4NTlfMTVcIjogWwogICAgICAgIFwiY3AxMjUyXCIsCiAgICAgICAgXCJjcDEyNTRcIiwKICAgICAgICBcImlzbzg4NTlfMTBcIiwKICAgICAgICBcImlzbzg4NTlfMTRcIiwKICAgICAgICBcImlzbzg4NTlfMTZcIiwKICAgICAgICBcImlzbzg4NTlfM1wiLAogICAgICAgIFwiaXNvODg1OV85XCIsCiAgICAgICAgXCJsYXRpbl8xXCIsCiAgICBdLAogICAgXCJpc284ODU5XzE2XCI6IFsKICAgICAgICBcImlzbzg4NTlfMTRcIiwKICAgICAgICBcImlzbzg4NTlfMTVcIiwKICAgICAgICBcImlzbzg4NTlfMlwiLAogICAgICAgIFwiaXNvODg1OV8zXCIsCiAgICAgICAgXCJpc284ODU5XzlcIiwKICAgICAgICBcImxhdGluXzFcIiwKICAgIF0sCiAgICBcImlzbzg4NTlfMlwiOiBbXCJjcDEyNTBcIiwgXCJpc284ODU5XzE2XCIsIFwiaXNvODg1OV80XCJdLAogICAgXCJpc284ODU5XzNcIjogW1wiaXNvODg1OV8xNFwiLCBcImlzbzg4NTlfMTVcIiwgXCJpc284ODU5XzE2XCIsIFwiaXNvODg1OV85XCIsIFwibGF0aW5fMVwiXSwKICAgIFwiaXNvODg1OV80XCI6IFtcImlzbzg4NTlfMTBcIiwgXCJpc284ODU5XzJcIiwgXCJpc284ODU5XzlcIiwgXCJsYXRpbl8xXCJdLAogICAgXCJpc284ODU5XzdcIjogW1wiY3AxMjUzXCJdLAogICAgXCJpc284ODU5XzlcIjogWwogICAgICAgIFwiY3AxMjUyXCIsCiAgICAgICAgXCJjcDEyNTRcIiwKICAgICAgICBcImNwMTI1OFwiLAogICAgICAgIFwiaXNvODg1OV8xMFwiLAogICAgICAgIFwiaXNvODg1OV8xNFwiLAogICAgICAgIFwiaXNvODg1OV8xNVwiLAogICAgICAgIFwiaXNvODg1OV8xNlwiLAogICAgICAgIFwiaXNvODg1OV8zXCIsCiAgICAgICAgXCJpc284ODU5XzRcIiwKICAgICAgICBcImxhdGluXzFcIiwKICAgIF0sCiAgICBcImt6MTA0OFwiOiBbXCJjcDEyNTFcIiwgXCJwdGNwMTU0XCJdLAogICAgXCJsYXRpbl8xXCI6IFsKICAgICAgICBcImNwMTI1MlwiLAogICAgICAgIFwiY3AxMjU0XCIsCiAgICAgICAgXCJjcDEyNThcIiwKICAgICAgICBcImlzbzg4NTlfMTBcIiwKICAgICAgICBcImlzbzg4NTlfMTRcIiwKICAgICAgICBcImlzbzg4NTlfMTVcIiwKICAgICAgICBcImlzbzg4NTlfMTZcIiwKICAgICAgICBcImlzbzg4NTlfM1wiLAogICAgICAgIFwiaXNvODg1OV80XCIsCiAgICAgICAgXCJpc284ODU5XzlcIiwKICAgIF0sCiAgICBcIm1hY19pY2VsYW5kXCI6IFtcIm1hY19yb21hblwiLCBcIm1hY190dXJraXNoXCJdLAogICAgXCJtYWNfcm9tYW5cIjogW1wibWFjX2ljZWxhbmRcIiwgXCJtYWNfdHVya2lzaFwiXSwKICAgIFwibWFjX3R1cmtpc2hcIjogW1wibWFjX2ljZWxhbmRcIiwgXCJtYWNfcm9tYW5cIl0sCiAgICBcInB0Y3AxNTRcIjogW1wiY3AxMjUxXCIsIFwia3oxMDQ4XCJdLAogICAgXCJ0aXNfNjIwXCI6IFtcImlzbzg4NTlfMTFcIl0sCn0KCgpDSEFSREVUX0NPUlJFU1BPTkRFTkNFOiBEaWN0W3N0ciwgc3RyXSA9IHsKICAgIFwiaXNvMjAyMl9rclwiOiBcIklTTy0yMDIyLUtSXCIsCiAgICBcImlzbzIwMjJfanBcIjogXCJJU08tMjAyMi1KUFwiLAogICAgXCJldWNfa3JcIjogXCJFVUMtS1JcIiwKICAgIFwidGlzXzYyMFwiOiBcIlRJUy02MjBcIiwKICAgIFwidXRmXzMyXCI6IFwiVVRGLTMyXCIsCiAgICBcImV1Y19qcFwiOiBcIkVVQy1KUFwiLAogICAgXCJrb2k4X3JcIjogXCJLT0k4LVJcIiwKICAgIFwiaXNvODg1OV8xXCI6IFwiSVNPLTg4NTktMVwiLAogICAgXCJpc284ODU5XzJcIjogXCJJU08tODg1OS0yXCIsCiAgICBcImlzbzg4NTlfNVwiOiBcIklTTy04ODU5LTVcIiwKICAgIFwiaXNvODg1OV82XCI6IFwiSVNPLTg4NTktNlwiLAogICAgXCJpc284ODU5XzdcIjogXCJJU08tODg1OS03XCIsCiAgICBcImlzbzg4NTlfOFwiOiBcIklTTy04ODU5LThcIiwKICAgIFwidXRmXzE2XCI6IFwiVVRGLTE2XCIsCiAgICBcImNwODU1XCI6IFwiSUJNODU1XCIsCiAgICBcIm1hY19jeXJpbGxpY1wiOiBcIk1hY0N5cmlsbGljXCIsCiAgICBcImdiMjMxMlwiOiBcIkdCMjMxMlwiLAogICAgXCJnYjE4MDMwXCI6IFwiR0IxODAzMFwiLAogICAgXCJjcDkzMlwiOiBcIkNQOTMyXCIsCiAgICBcImNwODY2XCI6IFwiSUJNODY2XCIsCiAgICBcInV0Zl84XCI6IFwidXRmLThcIiwKICAgIFwidXRmXzhfc2lnXCI6IFwiVVRGLTgtU0lHXCIsCiAgICBcInNoaWZ0X2ppc1wiOiBcIlNISUZUX0pJU1wiLAogICAgXCJiaWc1XCI6IFwiQmlnNVwiLAogICAgXCJjcDEyNTBcIjogXCJ3aW5kb3dzLTEyNTBcIiwKICAgIFwiY3AxMjUxXCI6IFwid2luZG93cy0xMjUxXCIsCiAgICBcImNwMTI1MlwiOiBcIldpbmRvd3MtMTI1MlwiLAogICAgXCJjcDEyNTNcIjogXCJ3aW5kb3dzLTEyNTNcIiwKICAgIFwiY3AxMjU1XCI6IFwid2luZG93cy0xMjU1XCIsCiAgICBcImNwMTI1NlwiOiBcIndpbmRvd3MtMTI1NlwiLAogICAgXCJjcDEyNTRcIjogXCJXaW5kb3dzLTEyNTRcIiwKICAgIFwiY3A5NDlcIjogXCJDUDk0OVwiLAp9CgoKQ09NTU9OX1NBRkVfQVNDSUlfQ0hBUkFDVEVSUzogU2V0W3N0cl0gPSB7CiAgICBcIjxcIiwKICAgIFwiPlwiLAogICAgXCI9XCIsCiAgICBcIjpcIiwKICAgIFwiL1wiLAogICAgXCImXCIsCiAgICBcIjtcIiwKICAgIFwie1wiLAogICAgXCJ9XCIsCiAgICBcIltcIiwKICAgIFwiXVwiLAogICAgXCIsXCIsCiAgICBcInxcIiwKICAgICdcIicsCiAgICBcIi1cIiwKfQoKCktPX05BTUVTOiBTZXRbc3RyXSA9IHtcImpvaGFiXCIsIFwiY3A5NDlcIiwgXCJldWNfa3JcIn0KWkhfTkFNRVM6IFNldFtzdHJdID0ge1wiYmlnNVwiLCBcImNwOTUwXCIsIFwiYmlnNWhrc2NzXCIsIFwiaHpcIn0KCk5PVF9QUklOVEFCTEVfUEFUVEVSTiA9IHJlX2NvbXBpbGUoclwiWzAtOVxcV1xcblxcclxcdF0rXCIpCgpMQU5HVUFHRV9TVVBQT1JURURfQ09VTlQ6IGludCA9IGxlbihGUkVRVUVOQ0lFUykKCiMgTG9nZ2luZyBMRVZFTCBiZWxsb3cgREVCVUcKVFJBQ0U6IGludCA9IDUKCiIiIgptb2R1bGVfZGljdFsiY2hhcnNldF9ub3JtYWxpemVyIitvcy5zZXArIm1vZGVscy5weSJdPSIiIgppbXBvcnQgd2FybmluZ3MKZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgQ291bnRlcgpmcm9tIGVuY29kaW5ncy5hbGlhc2VzIGltcG9ydCBhbGlhc2VzCmZyb20gaGFzaGxpYiBpbXBvcnQgc2hhMjU2CmZyb20ganNvbiBpbXBvcnQgZHVtcHMKZnJvbSByZSBpbXBvcnQgc3ViCmZyb20gdHlwaW5nIGltcG9ydCBBbnksIERpY3QsIEl0ZXJhdG9yLCBMaXN0LCBPcHRpb25hbCwgVHVwbGUsIFVuaW9uCgpmcm9tIC5jb25zdGFudCBpbXBvcnQgTk9UX1BSSU5UQUJMRV9QQVRURVJOLCBUT09fQklHX1NFUVVFTkNFCmZyb20gLm1kIGltcG9ydCBtZXNzX3JhdGlvCmZyb20gLnV0aWxzIGltcG9ydCBpYW5hX25hbWUsIGlzX211bHRpX2J5dGVfZW5jb2RpbmcsIHVuaWNvZGVfcmFuZ2UKCgpjbGFzcyBDaGFyc2V0TWF0Y2g6CiAgICBkZWYgX19pbml0X18oCiAgICAgICAgc2VsZiwKICAgICAgICBwYXlsb2FkOiBieXRlcywKICAgICAgICBndWVzc2VkX2VuY29kaW5nOiBzdHIsCiAgICAgICAgbWVhbl9tZXNzX3JhdGlvOiBmbG9hdCwKICAgICAgICBoYXNfc2lnX29yX2JvbTogYm9vbCwKICAgICAgICBsYW5ndWFnZXM6IFwiQ29oZXJlbmNlTWF0Y2hlc1wiLAogICAgICAgIGRlY29kZWRfcGF5bG9hZDogT3B0aW9uYWxbc3RyXSA9IE5vbmUsCiAgICApOgogICAgICAgIHNlbGYuX3BheWxvYWQ6IGJ5dGVzID0gcGF5bG9hZAoKICAgICAgICBzZWxmLl9lbmNvZGluZzogc3RyID0gZ3Vlc3NlZF9lbmNvZGluZwogICAgICAgIHNlbGYuX21lYW5fbWVzc19yYXRpbzogZmxvYXQgPSBtZWFuX21lc3NfcmF0aW8KICAgICAgICBzZWxmLl9sYW5ndWFnZXM6IENvaGVyZW5jZU1hdGNoZXMgPSBsYW5ndWFnZXMKICAgICAgICBzZWxmLl9oYXNfc2lnX29yX2JvbTogYm9vbCA9IGhhc19zaWdfb3JfYm9tCiAgICAgICAgc2VsZi5fdW5pY29kZV9yYW5nZXM6IE9wdGlvbmFsW0xpc3Rbc3RyXV0gPSBOb25lCgogICAgICAgIHNlbGYuX2xlYXZlczogTGlzdFtDaGFyc2V0TWF0Y2hdID0gW10KICAgICAgICBzZWxmLl9tZWFuX2NvaGVyZW5jZV9yYXRpbzogZmxvYXQgPSAwLjAKCiAgICAgICAgc2VsZi5fb3V0cHV0X3BheWxvYWQ6IE9wdGlvbmFsW2J5dGVzXSA9IE5vbmUKICAgICAgICBzZWxmLl9vdXRwdXRfZW5jb2Rpbmc6IE9wdGlvbmFsW3N0cl0gPSBOb25lCgogICAgICAgIHNlbGYuX3N0cmluZzogT3B0aW9uYWxbc3RyXSA9IGRlY29kZWRfcGF5bG9hZAoKICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDoKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgQ2hhcnNldE1hdGNoKToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKAogICAgICAgICAgICAgICAgXCJfX2VxX18gY2Fubm90IGJlIGludm9rZWQgb24ge30gYW5kIHt9LlwiLmZvcm1hdCgKICAgICAgICAgICAgICAgICAgICBzdHIob3RoZXIuX19jbGFzc19fKSwgc3RyKHNlbGYuX19jbGFzc19fKQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApCiAgICAgICAgcmV0dXJuIHNlbGYuZW5jb2RpbmcgPT0gb3RoZXIuZW5jb2RpbmcgYW5kIHNlbGYuZmluZ2VycHJpbnQgPT0gb3RoZXIuZmluZ2VycHJpbnQKCiAgICBkZWYgX19sdF9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6CiAgICAgICAgXCJcIlwiCiAgICAgICAgSW1wbGVtZW50ZWQgdG8gbWFrZSBzb3J0ZWQgYXZhaWxhYmxlIHVwb24gQ2hhcnNldE1hdGNoZXMgaXRlbXMuCiAgICAgICAgXCJcIlwiCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIENoYXJzZXRNYXRjaCk6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IKCiAgICAgICAgY2hhb3NfZGlmZmVyZW5jZTogZmxvYXQgPSBhYnMoc2VsZi5jaGFvcyAtIG90aGVyLmNoYW9zKQogICAgICAgIGNvaGVyZW5jZV9kaWZmZXJlbmNlOiBmbG9hdCA9IGFicyhzZWxmLmNvaGVyZW5jZSAtIG90aGVyLmNvaGVyZW5jZSkKCiAgICAgICAgIyBCZWxsb3cgMSUgZGlmZmVyZW5jZSAtLT4gVXNlIENvaGVyZW5jZQogICAgICAgIGlmIGNoYW9zX2RpZmZlcmVuY2UgPCAwLjAxIGFuZCBjb2hlcmVuY2VfZGlmZmVyZW5jZSA+IDAuMDI6CiAgICAgICAgICAgICMgV2hlbiBoYXZpbmcgYSB0b3VnaCBkZWNpc2lvbiwgdXNlIHRoZSByZXN1bHQgdGhhdCBkZWNvZGVkIGFzIG1hbnkgbXVsdGktYnl0ZSBhcyBwb3NzaWJsZS4KICAgICAgICAgICAgaWYgY2hhb3NfZGlmZmVyZW5jZSA9PSAwLjAgYW5kIHNlbGYuY29oZXJlbmNlID09IG90aGVyLmNvaGVyZW5jZToKICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLm11bHRpX2J5dGVfdXNhZ2UgPiBvdGhlci5tdWx0aV9ieXRlX3VzYWdlCiAgICAgICAgICAgIHJldHVybiBzZWxmLmNvaGVyZW5jZSA+IG90aGVyLmNvaGVyZW5jZQoKICAgICAgICByZXR1cm4gc2VsZi5jaGFvcyA8IG90aGVyLmNoYW9zCgogICAgQHByb3BlcnR5CiAgICBkZWYgbXVsdGlfYnl0ZV91c2FnZShzZWxmKSAtPiBmbG9hdDoKICAgICAgICByZXR1cm4gMS4wIC0gbGVuKHN0cihzZWxmKSkgLyBsZW4oc2VsZi5yYXcpCgogICAgQHByb3BlcnR5CiAgICBkZWYgY2hhb3Nfc2Vjb25kYXJ5X3Bhc3Moc2VsZikgLT4gZmxvYXQ6CiAgICAgICAgXCJcIlwiCiAgICAgICAgQ2hlY2sgb25jZSBhZ2FpbiBjaGFvcyBpbiBkZWNvZGVkIHRleHQsIGV4Y2VwdCB0aGlzIHRpbWUsIHdpdGggZnVsbCBjb250ZW50LgogICAgICAgIFVzZSB3aXRoIGNhdXRpb24sIHRoaXMgY2FuIGJlIHZlcnkgc2xvdy4KICAgICAgICBOb3RpY2U6IFdpbGwgYmUgcmVtb3ZlZCBpbiAzLjAKICAgICAgICBcIlwiXCIKICAgICAgICB3YXJuaW5ncy53YXJuKAogICAgICAgICAgICBcImNoYW9zX3NlY29uZGFyeV9wYXNzIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiAzLjBcIiwKICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLAogICAgICAgICkKICAgICAgICByZXR1cm4gbWVzc19yYXRpbyhzdHIoc2VsZiksIDEuMCkKCiAgICBAcHJvcGVydHkKICAgIGRlZiBjb2hlcmVuY2Vfbm9uX2xhdGluKHNlbGYpIC0+IGZsb2F0OgogICAgICAgIFwiXCJcIgogICAgICAgIENvaGVyZW5jZSByYXRpbyBvbiB0aGUgZmlyc3Qgbm9uLWxhdGluIGxhbmd1YWdlIGRldGVjdGVkIGlmIEFOWS4KICAgICAgICBOb3RpY2U6IFdpbGwgYmUgcmVtb3ZlZCBpbiAzLjAKICAgICAgICBcIlwiXCIKICAgICAgICB3YXJuaW5ncy53YXJuKAogICAgICAgICAgICBcImNvaGVyZW5jZV9ub25fbGF0aW4gaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIDMuMFwiLAogICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsCiAgICAgICAgKQogICAgICAgIHJldHVybiAwLjAKCiAgICBAcHJvcGVydHkKICAgIGRlZiB3X2NvdW50ZXIoc2VsZikgLT4gQ291bnRlcjoKICAgICAgICBcIlwiXCIKICAgICAgICBXb3JkIGNvdW50ZXIgaW5zdGFuY2Ugb24gZGVjb2RlZCB0ZXh0LgogICAgICAgIE5vdGljZTogV2lsbCBiZSByZW1vdmVkIGluIDMuMAogICAgICAgIFwiXCJcIgogICAgICAgIHdhcm5pbmdzLndhcm4oCiAgICAgICAgICAgIFwid19jb3VudGVyIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiAzLjBcIiwgRGVwcmVjYXRpb25XYXJuaW5nCiAgICAgICAgKQoKICAgICAgICBzdHJpbmdfcHJpbnRhYmxlX29ubHkgPSBzdWIoTk9UX1BSSU5UQUJMRV9QQVRURVJOLCBcIiBcIiwgc3RyKHNlbGYpLmxvd2VyKCkpCgogICAgICAgIHJldHVybiBDb3VudGVyKHN0cmluZ19wcmludGFibGVfb25seS5zcGxpdCgpKQoKICAgIGRlZiBfX3N0cl9fKHNlbGYpIC0+IHN0cjoKICAgICAgICAjIExhenkgU3RyIExvYWRpbmcKICAgICAgICBpZiBzZWxmLl9zdHJpbmcgaXMgTm9uZToKICAgICAgICAgICAgc2VsZi5fc3RyaW5nID0gc3RyKHNlbGYuX3BheWxvYWQsIHNlbGYuX2VuY29kaW5nLCBcInN0cmljdFwiKQogICAgICAgIHJldHVybiBzZWxmLl9zdHJpbmcKCiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOgogICAgICAgIHJldHVybiBcIjxDaGFyc2V0TWF0Y2ggJ3t9JyBieXRlcyh7fSk+XCIuZm9ybWF0KHNlbGYuZW5jb2RpbmcsIHNlbGYuZmluZ2VycHJpbnQpCgogICAgZGVmIGFkZF9zdWJtYXRjaChzZWxmLCBvdGhlcjogXCJDaGFyc2V0TWF0Y2hcIikgLT4gTm9uZToKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgQ2hhcnNldE1hdGNoKSBvciBvdGhlciA9PSBzZWxmOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKAogICAgICAgICAgICAgICAgXCJVbmFibGUgdG8gYWRkIGluc3RhbmNlIDx7fT4gYXMgYSBzdWJtYXRjaCBvZiBhIENoYXJzZXRNYXRjaFwiLmZvcm1hdCgKICAgICAgICAgICAgICAgICAgICBvdGhlci5fX2NsYXNzX18KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKQoKICAgICAgICBvdGhlci5fc3RyaW5nID0gTm9uZSAgIyBVbmxvYWQgUkFNIHVzYWdlOyBkaXJ0eSB0cmljay4KICAgICAgICBzZWxmLl9sZWF2ZXMuYXBwZW5kKG90aGVyKQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGVuY29kaW5nKHNlbGYpIC0+IHN0cjoKICAgICAgICByZXR1cm4gc2VsZi5fZW5jb2RpbmcKCiAgICBAcHJvcGVydHkKICAgIGRlZiBlbmNvZGluZ19hbGlhc2VzKHNlbGYpIC0+IExpc3Rbc3RyXToKICAgICAgICBcIlwiXCIKICAgICAgICBFbmNvZGluZyBuYW1lIGFyZSBrbm93biBieSBtYW55IG5hbWUsIHVzaW5nIHRoaXMgY291bGQgaGVscCB3aGVuIHNlYXJjaGluZyBmb3IgSUJNODU1IHdoZW4gaXQncyBsaXN0ZWQgYXMgQ1A4NTUuCiAgICAgICAgXCJcIlwiCiAgICAgICAgYWxzb19rbm93bl9hczogTGlzdFtzdHJdID0gW10KICAgICAgICBmb3IgdSwgcCBpbiBhbGlhc2VzLml0ZW1zKCk6CiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmcgPT0gdToKICAgICAgICAgICAgICAgIGFsc29fa25vd25fYXMuYXBwZW5kKHApCiAgICAgICAgICAgIGVsaWYgc2VsZi5lbmNvZGluZyA9PSBwOgogICAgICAgICAgICAgICAgYWxzb19rbm93bl9hcy5hcHBlbmQodSkKICAgICAgICByZXR1cm4gYWxzb19rbm93bl9hcwoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGJvbShzZWxmKSAtPiBib29sOgogICAgICAgIHJldHVybiBzZWxmLl9oYXNfc2lnX29yX2JvbQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGJ5dGVfb3JkZXJfbWFyayhzZWxmKSAtPiBib29sOgogICAgICAgIHJldHVybiBzZWxmLl9oYXNfc2lnX29yX2JvbQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGxhbmd1YWdlcyhzZWxmKSAtPiBMaXN0W3N0cl06CiAgICAgICAgXCJcIlwiCiAgICAgICAgUmV0dXJuIHRoZSBjb21wbGV0ZSBsaXN0IG9mIHBvc3NpYmxlIGxhbmd1YWdlcyBmb3VuZCBpbiBkZWNvZGVkIHNlcXVlbmNlLgogICAgICAgIFVzdWFsbHkgbm90IHJlYWxseSB1c2VmdWwuIFJldHVybmVkIGxpc3QgbWF5IGJlIGVtcHR5IGV2ZW4gaWYgJ2xhbmd1YWdlJyBwcm9wZXJ0eSByZXR1cm4gc29tZXRoaW5nICE9ICdVbmtub3duJy4KICAgICAgICBcIlwiXCIKICAgICAgICByZXR1cm4gW2VbMF0gZm9yIGUgaW4gc2VsZi5fbGFuZ3VhZ2VzXQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGxhbmd1YWdlKHNlbGYpIC0+IHN0cjoKICAgICAgICBcIlwiXCIKICAgICAgICBNb3N0IHByb2JhYmxlIGxhbmd1YWdlIGZvdW5kIGluIGRlY29kZWQgc2VxdWVuY2UuIElmIG5vbmUgd2VyZSBkZXRlY3RlZCBvciBpbmZlcnJlZCwgdGhlIHByb3BlcnR5IHdpbGwgcmV0dXJuCiAgICAgICAgXCJVbmtub3duXCIuCiAgICAgICAgXCJcIlwiCiAgICAgICAgaWYgbm90IHNlbGYuX2xhbmd1YWdlczoKICAgICAgICAgICAgIyBUcnlpbmcgdG8gaW5mZXIgdGhlIGxhbmd1YWdlIGJhc2VkIG9uIHRoZSBnaXZlbiBlbmNvZGluZwogICAgICAgICAgICAjIEl0cyBlaXRoZXIgRW5nbGlzaCBvciB3ZSBzaG91bGQgbm90IHByb25vdW5jZSBvdXJzZWx2ZXMgaW4gY2VydGFpbiBjYXNlcy4KICAgICAgICAgICAgaWYgXCJhc2NpaVwiIGluIHNlbGYuY291bGRfYmVfZnJvbV9jaGFyc2V0OgogICAgICAgICAgICAgICAgcmV0dXJuIFwiRW5nbGlzaFwiCgogICAgICAgICAgICAjIGRvaW5nIGl0IHRoZXJlIHRvIGF2b2lkIGNpcmN1bGFyIGltcG9ydAogICAgICAgICAgICBmcm9tIGNoYXJzZXRfbm9ybWFsaXplci5jZCBpbXBvcnQgZW5jb2RpbmdfbGFuZ3VhZ2VzLCBtYl9lbmNvZGluZ19sYW5ndWFnZXMKCiAgICAgICAgICAgIGxhbmd1YWdlcyA9ICgKICAgICAgICAgICAgICAgIG1iX2VuY29kaW5nX2xhbmd1YWdlcyhzZWxmLmVuY29kaW5nKQogICAgICAgICAgICAgICAgaWYgaXNfbXVsdGlfYnl0ZV9lbmNvZGluZyhzZWxmLmVuY29kaW5nKQogICAgICAgICAgICAgICAgZWxzZSBlbmNvZGluZ19sYW5ndWFnZXMoc2VsZi5lbmNvZGluZykKICAgICAgICAgICAgKQoKICAgICAgICAgICAgaWYgbGVuKGxhbmd1YWdlcykgPT0gMCBvciBcIkxhdGluIEJhc2VkXCIgaW4gbGFuZ3VhZ2VzOgogICAgICAgICAgICAgICAgcmV0dXJuIFwiVW5rbm93blwiCgogICAgICAgICAgICByZXR1cm4gbGFuZ3VhZ2VzWzBdCgogICAgICAgIHJldHVybiBzZWxmLl9sYW5ndWFnZXNbMF1bMF0KCiAgICBAcHJvcGVydHkKICAgIGRlZiBjaGFvcyhzZWxmKSAtPiBmbG9hdDoKICAgICAgICByZXR1cm4gc2VsZi5fbWVhbl9tZXNzX3JhdGlvCgogICAgQHByb3BlcnR5CiAgICBkZWYgY29oZXJlbmNlKHNlbGYpIC0+IGZsb2F0OgogICAgICAgIGlmIG5vdCBzZWxmLl9sYW5ndWFnZXM6CiAgICAgICAgICAgIHJldHVybiAwLjAKICAgICAgICByZXR1cm4gc2VsZi5fbGFuZ3VhZ2VzWzBdWzFdCgogICAgQHByb3BlcnR5CiAgICBkZWYgcGVyY2VudF9jaGFvcyhzZWxmKSAtPiBmbG9hdDoKICAgICAgICByZXR1cm4gcm91bmQoc2VsZi5jaGFvcyAqIDEwMCwgbmRpZ2l0cz0zKQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIHBlcmNlbnRfY29oZXJlbmNlKHNlbGYpIC0+IGZsb2F0OgogICAgICAgIHJldHVybiByb3VuZChzZWxmLmNvaGVyZW5jZSAqIDEwMCwgbmRpZ2l0cz0zKQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIHJhdyhzZWxmKSAtPiBieXRlczoKICAgICAgICBcIlwiXCIKICAgICAgICBPcmlnaW5hbCB1bnRvdWNoZWQgYnl0ZXMuCiAgICAgICAgXCJcIlwiCiAgICAgICAgcmV0dXJuIHNlbGYuX3BheWxvYWQKCiAgICBAcHJvcGVydHkKICAgIGRlZiBzdWJtYXRjaChzZWxmKSAtPiBMaXN0W1wiQ2hhcnNldE1hdGNoXCJdOgogICAgICAgIHJldHVybiBzZWxmLl9sZWF2ZXMKCiAgICBAcHJvcGVydHkKICAgIGRlZiBoYXNfc3VibWF0Y2goc2VsZikgLT4gYm9vbDoKICAgICAgICByZXR1cm4gbGVuKHNlbGYuX2xlYXZlcykgPiAwCgogICAgQHByb3BlcnR5CiAgICBkZWYgYWxwaGFiZXRzKHNlbGYpIC0+IExpc3Rbc3RyXToKICAgICAgICBpZiBzZWxmLl91bmljb2RlX3JhbmdlcyBpcyBub3QgTm9uZToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3VuaWNvZGVfcmFuZ2VzCiAgICAgICAgIyBsaXN0IGRldGVjdGVkIHJhbmdlcwogICAgICAgIGRldGVjdGVkX3JhbmdlczogTGlzdFtPcHRpb25hbFtzdHJdXSA9IFsKICAgICAgICAgICAgdW5pY29kZV9yYW5nZShjaGFyKSBmb3IgY2hhciBpbiBzdHIoc2VsZikKICAgICAgICBdCiAgICAgICAgIyBmaWx0ZXIgYW5kIHNvcnQKICAgICAgICBzZWxmLl91bmljb2RlX3JhbmdlcyA9IHNvcnRlZChsaXN0KHtyIGZvciByIGluIGRldGVjdGVkX3JhbmdlcyBpZiByfSkpCiAgICAgICAgcmV0dXJuIHNlbGYuX3VuaWNvZGVfcmFuZ2VzCgogICAgQHByb3BlcnR5CiAgICBkZWYgY291bGRfYmVfZnJvbV9jaGFyc2V0KHNlbGYpIC0+IExpc3Rbc3RyXToKICAgICAgICBcIlwiXCIKICAgICAgICBUaGUgY29tcGxldGUgbGlzdCBvZiBlbmNvZGluZyB0aGF0IG91dHB1dCB0aGUgZXhhY3QgU0FNRSBzdHIgcmVzdWx0IGFuZCB0aGVyZWZvcmUgY291bGQgYmUgdGhlIG9yaWdpbmF0aW5nCiAgICAgICAgZW5jb2RpbmcuCiAgICAgICAgVGhpcyBsaXN0IGRvZXMgaW5jbHVkZSB0aGUgZW5jb2RpbmcgYXZhaWxhYmxlIGluIHByb3BlcnR5ICdlbmNvZGluZycuCiAgICAgICAgXCJcIlwiCiAgICAgICAgcmV0dXJuIFtzZWxmLl9lbmNvZGluZ10gKyBbbS5lbmNvZGluZyBmb3IgbSBpbiBzZWxmLl9sZWF2ZXNdCgogICAgZGVmIGZpcnN0KHNlbGYpIC0+IFwiQ2hhcnNldE1hdGNoXCI6CiAgICAgICAgXCJcIlwiCiAgICAgICAgS2VwdCBmb3IgQkMgcmVhc29ucy4gV2lsbCBiZSByZW1vdmVkIGluIDMuMC4KICAgICAgICBcIlwiXCIKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBiZXN0KHNlbGYpIC0+IFwiQ2hhcnNldE1hdGNoXCI6CiAgICAgICAgXCJcIlwiCiAgICAgICAgS2VwdCBmb3IgQkMgcmVhc29ucy4gV2lsbCBiZSByZW1vdmVkIGluIDMuMC4KICAgICAgICBcIlwiXCIKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBvdXRwdXQoc2VsZiwgZW5jb2Rpbmc6IHN0ciA9IFwidXRmXzhcIikgLT4gYnl0ZXM6CiAgICAgICAgXCJcIlwiCiAgICAgICAgTWV0aG9kIHRvIGdldCByZS1lbmNvZGVkIGJ5dGVzIHBheWxvYWQgdXNpbmcgZ2l2ZW4gdGFyZ2V0IGVuY29kaW5nLiBEZWZhdWx0IHRvIFVURi04LgogICAgICAgIEFueSBlcnJvcnMgd2lsbCBiZSBzaW1wbHkgaWdub3JlZCBieSB0aGUgZW5jb2RlciBOT1QgcmVwbGFjZWQuCiAgICAgICAgXCJcIlwiCiAgICAgICAgaWYgc2VsZi5fb3V0cHV0X2VuY29kaW5nIGlzIE5vbmUgb3Igc2VsZi5fb3V0cHV0X2VuY29kaW5nICE9IGVuY29kaW5nOgogICAgICAgICAgICBzZWxmLl9vdXRwdXRfZW5jb2RpbmcgPSBlbmNvZGluZwogICAgICAgICAgICBzZWxmLl9vdXRwdXRfcGF5bG9hZCA9IHN0cihzZWxmKS5lbmNvZGUoZW5jb2RpbmcsIFwicmVwbGFjZVwiKQoKICAgICAgICByZXR1cm4gc2VsZi5fb3V0cHV0X3BheWxvYWQgICMgdHlwZTogaWdub3JlCgogICAgQHByb3BlcnR5CiAgICBkZWYgZmluZ2VycHJpbnQoc2VsZikgLT4gc3RyOgogICAgICAgIFwiXCJcIgogICAgICAgIFJldHJpZXZlIHRoZSB1bmlxdWUgU0hBMjU2IGNvbXB1dGVkIHVzaW5nIHRoZSB0cmFuc2Zvcm1lZCAocmUtZW5jb2RlZCkgcGF5bG9hZC4gTm90IHRoZSBvcmlnaW5hbCBvbmUuCiAgICAgICAgXCJcIlwiCiAgICAgICAgcmV0dXJuIHNoYTI1NihzZWxmLm91dHB1dCgpKS5oZXhkaWdlc3QoKQoKCmNsYXNzIENoYXJzZXRNYXRjaGVzOgogICAgXCJcIlwiCiAgICBDb250YWluZXIgd2l0aCBldmVyeSBDaGFyc2V0TWF0Y2ggaXRlbXMgb3JkZXJlZCBieSBkZWZhdWx0IGZyb20gbW9zdCBwcm9iYWJsZSB0byB0aGUgbGVzcyBvbmUuCiAgICBBY3QgbGlrZSBhIGxpc3QoaXRlcmFibGUpIGJ1dCBkb2VzIG5vdCBpbXBsZW1lbnRzIGFsbCByZWxhdGVkIG1ldGhvZHMuCiAgICBcIlwiXCIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgcmVzdWx0czogTGlzdFtDaGFyc2V0TWF0Y2hdID0gTm9uZSk6CiAgICAgICAgc2VsZi5fcmVzdWx0czogTGlzdFtDaGFyc2V0TWF0Y2hdID0gc29ydGVkKHJlc3VsdHMpIGlmIHJlc3VsdHMgZWxzZSBbXQoKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKSAtPiBJdGVyYXRvcltDaGFyc2V0TWF0Y2hdOgogICAgICAgIHlpZWxkIGZyb20gc2VsZi5fcmVzdWx0cwoKICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBpdGVtOiBVbmlvbltpbnQsIHN0cl0pIC0+IENoYXJzZXRNYXRjaDoKICAgICAgICBcIlwiXCIKICAgICAgICBSZXRyaWV2ZSBhIHNpbmdsZSBpdGVtIGVpdGhlciBieSBpdHMgcG9zaXRpb24gb3IgZW5jb2RpbmcgbmFtZSAoYWxpYXMgbWF5IGJlIHVzZWQgaGVyZSkuCiAgICAgICAgUmFpc2UgS2V5RXJyb3IgdXBvbiBpbnZhbGlkIGluZGV4IG9yIGVuY29kaW5nIG5vdCBwcmVzZW50IGluIHJlc3VsdHMuCiAgICAgICAgXCJcIlwiCiAgICAgICAgaWYgaXNpbnN0YW5jZShpdGVtLCBpbnQpOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fcmVzdWx0c1tpdGVtXQogICAgICAgIGlmIGlzaW5zdGFuY2UoaXRlbSwgc3RyKToKICAgICAgICAgICAgaXRlbSA9IGlhbmFfbmFtZShpdGVtLCBGYWxzZSkKICAgICAgICAgICAgZm9yIHJlc3VsdCBpbiBzZWxmLl9yZXN1bHRzOgogICAgICAgICAgICAgICAgaWYgaXRlbSBpbiByZXN1bHQuY291bGRfYmVfZnJvbV9jaGFyc2V0OgogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQKICAgICAgICByYWlzZSBLZXlFcnJvcgoKICAgIGRlZiBfX2xlbl9fKHNlbGYpIC0+IGludDoKICAgICAgICByZXR1cm4gbGVuKHNlbGYuX3Jlc3VsdHMpCgogICAgZGVmIF9fYm9vbF9fKHNlbGYpIC0+IGJvb2w6CiAgICAgICAgcmV0dXJuIGxlbihzZWxmLl9yZXN1bHRzKSA+IDAKCiAgICBkZWYgYXBwZW5kKHNlbGYsIGl0ZW06IENoYXJzZXRNYXRjaCkgLT4gTm9uZToKICAgICAgICBcIlwiXCIKICAgICAgICBJbnNlcnQgYSBzaW5nbGUgbWF0Y2guIFdpbGwgYmUgaW5zZXJ0ZWQgYWNjb3JkaW5nbHkgdG8gcHJlc2VydmUgc29ydC4KICAgICAgICBDYW4gYmUgaW5zZXJ0ZWQgYXMgYSBzdWJtYXRjaC4KICAgICAgICBcIlwiXCIKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShpdGVtLCBDaGFyc2V0TWF0Y2gpOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKAogICAgICAgICAgICAgICAgXCJDYW5ub3QgYXBwZW5kIGluc3RhbmNlICd7fScgdG8gQ2hhcnNldE1hdGNoZXNcIi5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgc3RyKGl0ZW0uX19jbGFzc19fKQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApCiAgICAgICAgIyBXZSBzaG91bGQgZGlzYWJsZSB0aGUgc3VibWF0Y2ggZmFjdG9yaW5nIHdoZW4gdGhlIGlucHV0IGZpbGUgaXMgdG9vIGhlYXZ5IChjb25zZXJ2ZSBSQU0gdXNhZ2UpCiAgICAgICAgaWYgbGVuKGl0ZW0ucmF3KSA8PSBUT09fQklHX1NFUVVFTkNFOgogICAgICAgICAgICBmb3IgbWF0Y2ggaW4gc2VsZi5fcmVzdWx0czoKICAgICAgICAgICAgICAgIGlmIG1hdGNoLmZpbmdlcnByaW50ID09IGl0ZW0uZmluZ2VycHJpbnQgYW5kIG1hdGNoLmNoYW9zID09IGl0ZW0uY2hhb3M6CiAgICAgICAgICAgICAgICAgICAgbWF0Y2guYWRkX3N1Ym1hdGNoKGl0ZW0pCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgc2VsZi5fcmVzdWx0cy5hcHBlbmQoaXRlbSkKICAgICAgICBzZWxmLl9yZXN1bHRzID0gc29ydGVkKHNlbGYuX3Jlc3VsdHMpCgogICAgZGVmIGJlc3Qoc2VsZikgLT4gT3B0aW9uYWxbXCJDaGFyc2V0TWF0Y2hcIl06CiAgICAgICAgXCJcIlwiCiAgICAgICAgU2ltcGx5IHJldHVybiB0aGUgZmlyc3QgbWF0Y2guIFN0cmljdCBlcXVpdmFsZW50IHRvIG1hdGNoZXNbMF0uCiAgICAgICAgXCJcIlwiCiAgICAgICAgaWYgbm90IHNlbGYuX3Jlc3VsdHM6CiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgcmV0dXJuIHNlbGYuX3Jlc3VsdHNbMF0KCiAgICBkZWYgZmlyc3Qoc2VsZikgLT4gT3B0aW9uYWxbXCJDaGFyc2V0TWF0Y2hcIl06CiAgICAgICAgXCJcIlwiCiAgICAgICAgUmVkdW5kYW50IG1ldGhvZCwgY2FsbCB0aGUgbWV0aG9kIGJlc3QoKS4gS2VwdCBmb3IgQkMgcmVhc29ucy4KICAgICAgICBcIlwiXCIKICAgICAgICByZXR1cm4gc2VsZi5iZXN0KCkKCgpDb2hlcmVuY2VNYXRjaCA9IFR1cGxlW3N0ciwgZmxvYXRdCkNvaGVyZW5jZU1hdGNoZXMgPSBMaXN0W0NvaGVyZW5jZU1hdGNoXQoKCmNsYXNzIENsaURldGVjdGlvblJlc3VsdDoKICAgIGRlZiBfX2luaXRfXygKICAgICAgICBzZWxmLAogICAgICAgIHBhdGg6IHN0ciwKICAgICAgICBlbmNvZGluZzogT3B0aW9uYWxbc3RyXSwKICAgICAgICBlbmNvZGluZ19hbGlhc2VzOiBMaXN0W3N0cl0sCiAgICAgICAgYWx0ZXJuYXRpdmVfZW5jb2RpbmdzOiBMaXN0W3N0cl0sCiAgICAgICAgbGFuZ3VhZ2U6IHN0ciwKICAgICAgICBhbHBoYWJldHM6IExpc3Rbc3RyXSwKICAgICAgICBoYXNfc2lnX29yX2JvbTogYm9vbCwKICAgICAgICBjaGFvczogZmxvYXQsCiAgICAgICAgY29oZXJlbmNlOiBmbG9hdCwKICAgICAgICB1bmljb2RlX3BhdGg6IE9wdGlvbmFsW3N0cl0sCiAgICAgICAgaXNfcHJlZmVycmVkOiBib29sLAogICAgKToKICAgICAgICBzZWxmLnBhdGg6IHN0ciA9IHBhdGgKICAgICAgICBzZWxmLnVuaWNvZGVfcGF0aDogT3B0aW9uYWxbc3RyXSA9IHVuaWNvZGVfcGF0aAogICAgICAgIHNlbGYuZW5jb2Rpbmc6IE9wdGlvbmFsW3N0cl0gPSBlbmNvZGluZwogICAgICAgIHNlbGYuZW5jb2RpbmdfYWxpYXNlczogTGlzdFtzdHJdID0gZW5jb2RpbmdfYWxpYXNlcwogICAgICAgIHNlbGYuYWx0ZXJuYXRpdmVfZW5jb2RpbmdzOiBMaXN0W3N0cl0gPSBhbHRlcm5hdGl2ZV9lbmNvZGluZ3MKICAgICAgICBzZWxmLmxhbmd1YWdlOiBzdHIgPSBsYW5ndWFnZQogICAgICAgIHNlbGYuYWxwaGFiZXRzOiBMaXN0W3N0cl0gPSBhbHBoYWJldHMKICAgICAgICBzZWxmLmhhc19zaWdfb3JfYm9tOiBib29sID0gaGFzX3NpZ19vcl9ib20KICAgICAgICBzZWxmLmNoYW9zOiBmbG9hdCA9IGNoYW9zCiAgICAgICAgc2VsZi5jb2hlcmVuY2U6IGZsb2F0ID0gY29oZXJlbmNlCiAgICAgICAgc2VsZi5pc19wcmVmZXJyZWQ6IGJvb2wgPSBpc19wcmVmZXJyZWQKCiAgICBAcHJvcGVydHkKICAgIGRlZiBfX2RpY3RfXyhzZWxmKSAtPiBEaWN0W3N0ciwgQW55XTogICMgdHlwZTogaWdub3JlCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgXCJwYXRoXCI6IHNlbGYucGF0aCwKICAgICAgICAgICAgXCJlbmNvZGluZ1wiOiBzZWxmLmVuY29kaW5nLAogICAgICAgICAgICBcImVuY29kaW5nX2FsaWFzZXNcIjogc2VsZi5lbmNvZGluZ19hbGlhc2VzLAogICAgICAgICAgICBcImFsdGVybmF0aXZlX2VuY29kaW5nc1wiOiBzZWxmLmFsdGVybmF0aXZlX2VuY29kaW5ncywKICAgICAgICAgICAgXCJsYW5ndWFnZVwiOiBzZWxmLmxhbmd1YWdlLAogICAgICAgICAgICBcImFscGhhYmV0c1wiOiBzZWxmLmFscGhhYmV0cywKICAgICAgICAgICAgXCJoYXNfc2lnX29yX2JvbVwiOiBzZWxmLmhhc19zaWdfb3JfYm9tLAogICAgICAgICAgICBcImNoYW9zXCI6IHNlbGYuY2hhb3MsCiAgICAgICAgICAgIFwiY29oZXJlbmNlXCI6IHNlbGYuY29oZXJlbmNlLAogICAgICAgICAgICBcInVuaWNvZGVfcGF0aFwiOiBzZWxmLnVuaWNvZGVfcGF0aCwKICAgICAgICAgICAgXCJpc19wcmVmZXJyZWRcIjogc2VsZi5pc19wcmVmZXJyZWQsCiAgICAgICAgfQoKICAgIGRlZiB0b19qc29uKHNlbGYpIC0+IHN0cjoKICAgICAgICByZXR1cm4gZHVtcHMoc2VsZi5fX2RpY3RfXywgZW5zdXJlX2FzY2lpPVRydWUsIGluZGVudD00KQoKIiIiCm1vZHVsZV9kaWN0WyJjaGFyc2V0X25vcm1hbGl6ZXIiK29zLnNlcCsiYXBpLnB5Il09IiIiCmltcG9ydCBsb2dnaW5nCmZyb20gb3MgaW1wb3J0IFBhdGhMaWtlCmZyb20gb3MucGF0aCBpbXBvcnQgYmFzZW5hbWUsIHNwbGl0ZXh0CmZyb20gdHlwaW5nIGltcG9ydCBCaW5hcnlJTywgTGlzdCwgT3B0aW9uYWwsIFNldAoKZnJvbSAuY2QgaW1wb3J0ICgKICAgIGNvaGVyZW5jZV9yYXRpbywKICAgIGVuY29kaW5nX2xhbmd1YWdlcywKICAgIG1iX2VuY29kaW5nX2xhbmd1YWdlcywKICAgIG1lcmdlX2NvaGVyZW5jZV9yYXRpb3MsCikKZnJvbSAuY29uc3RhbnQgaW1wb3J0IElBTkFfU1VQUE9SVEVELCBUT09fQklHX1NFUVVFTkNFLCBUT09fU01BTExfU0VRVUVOQ0UsIFRSQUNFCmZyb20gLm1kIGltcG9ydCBtZXNzX3JhdGlvCmZyb20gLm1vZGVscyBpbXBvcnQgQ2hhcnNldE1hdGNoLCBDaGFyc2V0TWF0Y2hlcwpmcm9tIC51dGlscyBpbXBvcnQgKAogICAgYW55X3NwZWNpZmllZF9lbmNvZGluZywKICAgIGN1dF9zZXF1ZW5jZV9jaHVua3MsCiAgICBpYW5hX25hbWUsCiAgICBpZGVudGlmeV9zaWdfb3JfYm9tLAogICAgaXNfY3Bfc2ltaWxhciwKICAgIGlzX211bHRpX2J5dGVfZW5jb2RpbmcsCiAgICBzaG91bGRfc3RyaXBfc2lnX29yX2JvbSwKKQoKIyBXaWxsIG1vc3QgbGlrZWx5IGJlIGNvbnRyb3ZlcnNpYWwKIyBsb2dnaW5nLmFkZExldmVsTmFtZShUUkFDRSwgXCJUUkFDRVwiKQpsb2dnZXIgPSBsb2dnaW5nLmdldExvZ2dlcihcImNoYXJzZXRfbm9ybWFsaXplclwiKQpleHBsYWluX2hhbmRsZXIgPSBsb2dnaW5nLlN0cmVhbUhhbmRsZXIoKQpleHBsYWluX2hhbmRsZXIuc2V0Rm9ybWF0dGVyKAogICAgbG9nZ2luZy5Gb3JtYXR0ZXIoXCIlKGFzY3RpbWUpcyB8ICUobGV2ZWxuYW1lKXMgfCAlKG1lc3NhZ2Upc1wiKQopCgoKZGVmIGZyb21fYnl0ZXMoCiAgICBzZXF1ZW5jZXM6IGJ5dGVzLAogICAgc3RlcHM6IGludCA9IDUsCiAgICBjaHVua19zaXplOiBpbnQgPSA1MTIsCiAgICB0aHJlc2hvbGQ6IGZsb2F0ID0gMC4yLAogICAgY3BfaXNvbGF0aW9uOiBMaXN0W3N0cl0gPSBOb25lLAogICAgY3BfZXhjbHVzaW9uOiBMaXN0W3N0cl0gPSBOb25lLAogICAgcHJlZW1wdGl2ZV9iZWhhdmlvdXI6IGJvb2wgPSBUcnVlLAogICAgZXhwbGFpbjogYm9vbCA9IEZhbHNlLAopIC0+IENoYXJzZXRNYXRjaGVzOgogICAgXCJcIlwiCiAgICBHaXZlbiBhIHJhdyBieXRlcyBzZXF1ZW5jZSwgcmV0dXJuIHRoZSBiZXN0IHBvc3NpYmxlcyBjaGFyc2V0IHVzYWJsZSB0byByZW5kZXIgc3RyIG9iamVjdHMuCiAgICBJZiB0aGVyZSBpcyBubyByZXN1bHRzLCBpdCBpcyBhIHN0cm9uZyBpbmRpY2F0b3IgdGhhdCB0aGUgc291cmNlIGlzIGJpbmFyeS9ub3QgdGV4dC4KICAgIEJ5IGRlZmF1bHQsIHRoZSBwcm9jZXNzIHdpbGwgZXh0cmFjdCA1IGJsb2NzIG9mIDUxMm8gZWFjaCB0byBhc3Nlc3MgdGhlIG1lc3MgYW5kIGNvaGVyZW5jZSBvZiBhIGdpdmVuIHNlcXVlbmNlLgogICAgQW5kIHdpbGwgZ2l2ZSB1cCBhIHBhcnRpY3VsYXIgY29kZSBwYWdlIGFmdGVyIDIwJSBvZiBtZWFzdXJlZCBtZXNzLiBUaG9zZSBjcml0ZXJpYSBhcmUgY3VzdG9taXphYmxlIGF0IHdpbGwuCgogICAgVGhlIHByZWVtcHRpdmUgYmVoYXZpb3IgRE9FUyBOT1QgcmVwbGFjZSB0aGUgdHJhZGl0aW9uYWwgZGV0ZWN0aW9uIHdvcmtmbG93LCBpdCBwcmlvcml0aXplIGEgcGFydGljdWxhciBjb2RlIHBhZ2UKICAgIGJ1dCBuZXZlciB0YWtlIGl0IGZvciBncmFudGVkLiBDYW4gaW1wcm92ZSB0aGUgcGVyZm9ybWFuY2UuCgogICAgWW91IG1heSB3YW50IHRvIGZvY3VzIHlvdXIgYXR0ZW50aW9uIHRvIHNvbWUgY29kZSBwYWdlIG9yL2FuZCBub3Qgb3RoZXJzLCB1c2UgY3BfaXNvbGF0aW9uIGFuZCBjcF9leGNsdXNpb24gZm9yIHRoYXQKICAgIHB1cnBvc2UuCgogICAgVGhpcyBmdW5jdGlvbiB3aWxsIHN0cmlwIHRoZSBTSUcgaW4gdGhlIHBheWxvYWQvc2VxdWVuY2UgZXZlcnkgdGltZSBleGNlcHQgb24gVVRGLTE2LCBVVEYtMzIuCiAgICBCeSBkZWZhdWx0IHRoZSBsaWJyYXJ5IGRvZXMgbm90IHNldHVwIGFueSBoYW5kbGVyIG90aGVyIHRoYW4gdGhlIE51bGxIYW5kbGVyLCBpZiB5b3UgY2hvb3NlIHRvIHNldCB0aGUgJ2V4cGxhaW4nCiAgICB0b2dnbGUgdG8gVHJ1ZSBpdCB3aWxsIGFsdGVyIHRoZSBsb2dnZXIgY29uZmlndXJhdGlvbiB0byBhZGQgYSBTdHJlYW1IYW5kbGVyIHRoYXQgaXMgc3VpdGFibGUgZm9yIGRlYnVnZ2luZy4KICAgIEN1c3RvbSBsb2dnaW5nIGZvcm1hdCBhbmQgaGFuZGxlciBjYW4gYmUgc2V0IG1hbnVhbGx5LgogICAgXCJcIlwiCgogICAgaWYgbm90IGlzaW5zdGFuY2Uoc2VxdWVuY2VzLCAoYnl0ZWFycmF5LCBieXRlcykpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigKICAgICAgICAgICAgXCJFeHBlY3RlZCBvYmplY3Qgb2YgdHlwZSBieXRlcyBvciBieXRlYXJyYXksIGdvdDogezB9XCIuZm9ybWF0KAogICAgICAgICAgICAgICAgdHlwZShzZXF1ZW5jZXMpCiAgICAgICAgICAgICkKICAgICAgICApCgogICAgaWYgZXhwbGFpbjoKICAgICAgICBwcmV2aW91c19sb2dnZXJfbGV2ZWw6IGludCA9IGxvZ2dlci5sZXZlbAogICAgICAgIGxvZ2dlci5hZGRIYW5kbGVyKGV4cGxhaW5faGFuZGxlcikKICAgICAgICBsb2dnZXIuc2V0TGV2ZWwoVFJBQ0UpCgogICAgbGVuZ3RoOiBpbnQgPSBsZW4oc2VxdWVuY2VzKQoKICAgIGlmIGxlbmd0aCA9PSAwOgogICAgICAgIGxvZ2dlci5kZWJ1ZyhcIkVuY29kaW5nIGRldGVjdGlvbiBvbiBlbXB0eSBieXRlcywgYXNzdW1pbmcgdXRmXzggaW50ZW50aW9uLlwiKQogICAgICAgIGlmIGV4cGxhaW46CiAgICAgICAgICAgIGxvZ2dlci5yZW1vdmVIYW5kbGVyKGV4cGxhaW5faGFuZGxlcikKICAgICAgICAgICAgbG9nZ2VyLnNldExldmVsKHByZXZpb3VzX2xvZ2dlcl9sZXZlbCBvciBsb2dnaW5nLldBUk5JTkcpCiAgICAgICAgcmV0dXJuIENoYXJzZXRNYXRjaGVzKFtDaGFyc2V0TWF0Y2goc2VxdWVuY2VzLCBcInV0Zl84XCIsIDAuMCwgRmFsc2UsIFtdLCBcIlwiKV0pCgogICAgaWYgY3BfaXNvbGF0aW9uIGlzIG5vdCBOb25lOgogICAgICAgIGxvZ2dlci5sb2coCiAgICAgICAgICAgIFRSQUNFLAogICAgICAgICAgICBcImNwX2lzb2xhdGlvbiBpcyBzZXQuIHVzZSB0aGlzIGZsYWcgZm9yIGRlYnVnZ2luZyBwdXJwb3NlLiBcIgogICAgICAgICAgICBcImxpbWl0ZWQgbGlzdCBvZiBlbmNvZGluZyBhbGxvd2VkIDogJXMuXCIsCiAgICAgICAgICAgIFwiLCBcIi5qb2luKGNwX2lzb2xhdGlvbiksCiAgICAgICAgKQogICAgICAgIGNwX2lzb2xhdGlvbiA9IFtpYW5hX25hbWUoY3AsIEZhbHNlKSBmb3IgY3AgaW4gY3BfaXNvbGF0aW9uXQogICAgZWxzZToKICAgICAgICBjcF9pc29sYXRpb24gPSBbXQoKICAgIGlmIGNwX2V4Y2x1c2lvbiBpcyBub3QgTm9uZToKICAgICAgICBsb2dnZXIubG9nKAogICAgICAgICAgICBUUkFDRSwKICAgICAgICAgICAgXCJjcF9leGNsdXNpb24gaXMgc2V0LiB1c2UgdGhpcyBmbGFnIGZvciBkZWJ1Z2dpbmcgcHVycG9zZS4gXCIKICAgICAgICAgICAgXCJsaW1pdGVkIGxpc3Qgb2YgZW5jb2RpbmcgZXhjbHVkZWQgOiAlcy5cIiwKICAgICAgICAgICAgXCIsIFwiLmpvaW4oY3BfZXhjbHVzaW9uKSwKICAgICAgICApCiAgICAgICAgY3BfZXhjbHVzaW9uID0gW2lhbmFfbmFtZShjcCwgRmFsc2UpIGZvciBjcCBpbiBjcF9leGNsdXNpb25dCiAgICBlbHNlOgogICAgICAgIGNwX2V4Y2x1c2lvbiA9IFtdCgogICAgaWYgbGVuZ3RoIDw9IChjaHVua19zaXplICogc3RlcHMpOgogICAgICAgIGxvZ2dlci5sb2coCiAgICAgICAgICAgIFRSQUNFLAogICAgICAgICAgICBcIm92ZXJyaWRlIHN0ZXBzICglaSkgYW5kIGNodW5rX3NpemUgKCVpKSBhcyBjb250ZW50IGRvZXMgbm90IGZpdCAoJWkgYnl0ZShzKSBnaXZlbikgcGFyYW1ldGVycy5cIiwKICAgICAgICAgICAgc3RlcHMsCiAgICAgICAgICAgIGNodW5rX3NpemUsCiAgICAgICAgICAgIGxlbmd0aCwKICAgICAgICApCiAgICAgICAgc3RlcHMgPSAxCiAgICAgICAgY2h1bmtfc2l6ZSA9IGxlbmd0aAoKICAgIGlmIHN0ZXBzID4gMSBhbmQgbGVuZ3RoIC8gc3RlcHMgPCBjaHVua19zaXplOgogICAgICAgIGNodW5rX3NpemUgPSBpbnQobGVuZ3RoIC8gc3RlcHMpCgogICAgaXNfdG9vX3NtYWxsX3NlcXVlbmNlOiBib29sID0gbGVuKHNlcXVlbmNlcykgPCBUT09fU01BTExfU0VRVUVOQ0UKICAgIGlzX3Rvb19sYXJnZV9zZXF1ZW5jZTogYm9vbCA9IGxlbihzZXF1ZW5jZXMpID49IFRPT19CSUdfU0VRVUVOQ0UKCiAgICBpZiBpc190b29fc21hbGxfc2VxdWVuY2U6CiAgICAgICAgbG9nZ2VyLmxvZygKICAgICAgICAgICAgVFJBQ0UsCiAgICAgICAgICAgIFwiVHJ5aW5nIHRvIGRldGVjdCBlbmNvZGluZyBmcm9tIGEgdGlueSBwb3J0aW9uIG9mICh7fSkgYnl0ZShzKS5cIi5mb3JtYXQoCiAgICAgICAgICAgICAgICBsZW5ndGgKICAgICAgICAgICAgKSwKICAgICAgICApCiAgICBlbGlmIGlzX3Rvb19sYXJnZV9zZXF1ZW5jZToKICAgICAgICBsb2dnZXIubG9nKAogICAgICAgICAgICBUUkFDRSwKICAgICAgICAgICAgXCJVc2luZyBsYXp5IHN0ciBkZWNvZGluZyBiZWNhdXNlIHRoZSBwYXlsb2FkIGlzIHF1aXRlIGxhcmdlLCAoe30pIGJ5dGUocykuXCIuZm9ybWF0KAogICAgICAgICAgICAgICAgbGVuZ3RoCiAgICAgICAgICAgICksCiAgICAgICAgKQoKICAgIHByaW9yaXRpemVkX2VuY29kaW5nczogTGlzdFtzdHJdID0gW10KCiAgICBzcGVjaWZpZWRfZW5jb2Rpbmc6IE9wdGlvbmFsW3N0cl0gPSAoCiAgICAgICAgYW55X3NwZWNpZmllZF9lbmNvZGluZyhzZXF1ZW5jZXMpIGlmIHByZWVtcHRpdmVfYmVoYXZpb3VyIGVsc2UgTm9uZQogICAgKQoKICAgIGlmIHNwZWNpZmllZF9lbmNvZGluZyBpcyBub3QgTm9uZToKICAgICAgICBwcmlvcml0aXplZF9lbmNvZGluZ3MuYXBwZW5kKHNwZWNpZmllZF9lbmNvZGluZykKICAgICAgICBsb2dnZXIubG9nKAogICAgICAgICAgICBUUkFDRSwKICAgICAgICAgICAgXCJEZXRlY3RlZCBkZWNsYXJhdGl2ZSBtYXJrIGluIHNlcXVlbmNlLiBQcmlvcml0eSArMSBnaXZlbiBmb3IgJXMuXCIsCiAgICAgICAgICAgIHNwZWNpZmllZF9lbmNvZGluZywKICAgICAgICApCgogICAgdGVzdGVkOiBTZXRbc3RyXSA9IHNldCgpCiAgICB0ZXN0ZWRfYnV0X2hhcmRfZmFpbHVyZTogTGlzdFtzdHJdID0gW10KICAgIHRlc3RlZF9idXRfc29mdF9mYWlsdXJlOiBMaXN0W3N0cl0gPSBbXQoKICAgIGZhbGxiYWNrX2FzY2lpOiBPcHRpb25hbFtDaGFyc2V0TWF0Y2hdID0gTm9uZQogICAgZmFsbGJhY2tfdTg6IE9wdGlvbmFsW0NoYXJzZXRNYXRjaF0gPSBOb25lCiAgICBmYWxsYmFja19zcGVjaWZpZWQ6IE9wdGlvbmFsW0NoYXJzZXRNYXRjaF0gPSBOb25lCgogICAgcmVzdWx0czogQ2hhcnNldE1hdGNoZXMgPSBDaGFyc2V0TWF0Y2hlcygpCgogICAgc2lnX2VuY29kaW5nLCBzaWdfcGF5bG9hZCA9IGlkZW50aWZ5X3NpZ19vcl9ib20oc2VxdWVuY2VzKQoKICAgIGlmIHNpZ19lbmNvZGluZyBpcyBub3QgTm9uZToKICAgICAgICBwcmlvcml0aXplZF9lbmNvZGluZ3MuYXBwZW5kKHNpZ19lbmNvZGluZykKICAgICAgICBsb2dnZXIubG9nKAogICAgICAgICAgICBUUkFDRSwKICAgICAgICAgICAgXCJEZXRlY3RlZCBhIFNJRyBvciBCT00gbWFyayBvbiBmaXJzdCAlaSBieXRlKHMpLiBQcmlvcml0eSArMSBnaXZlbiBmb3IgJXMuXCIsCiAgICAgICAgICAgIGxlbihzaWdfcGF5bG9hZCksCiAgICAgICAgICAgIHNpZ19lbmNvZGluZywKICAgICAgICApCgogICAgcHJpb3JpdGl6ZWRfZW5jb2RpbmdzLmFwcGVuZChcImFzY2lpXCIpCgogICAgaWYgXCJ1dGZfOFwiIG5vdCBpbiBwcmlvcml0aXplZF9lbmNvZGluZ3M6CiAgICAgICAgcHJpb3JpdGl6ZWRfZW5jb2RpbmdzLmFwcGVuZChcInV0Zl84XCIpCgogICAgZm9yIGVuY29kaW5nX2lhbmEgaW4gcHJpb3JpdGl6ZWRfZW5jb2RpbmdzICsgSUFOQV9TVVBQT1JURUQ6CgogICAgICAgIGlmIGNwX2lzb2xhdGlvbiBhbmQgZW5jb2RpbmdfaWFuYSBub3QgaW4gY3BfaXNvbGF0aW9uOgogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICBpZiBjcF9leGNsdXNpb24gYW5kIGVuY29kaW5nX2lhbmEgaW4gY3BfZXhjbHVzaW9uOgogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICBpZiBlbmNvZGluZ19pYW5hIGluIHRlc3RlZDoKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgdGVzdGVkLmFkZChlbmNvZGluZ19pYW5hKQoKICAgICAgICBkZWNvZGVkX3BheWxvYWQ6IE9wdGlvbmFsW3N0cl0gPSBOb25lCiAgICAgICAgYm9tX29yX3NpZ19hdmFpbGFibGU6IGJvb2wgPSBzaWdfZW5jb2RpbmcgPT0gZW5jb2RpbmdfaWFuYQogICAgICAgIHN0cmlwX3NpZ19vcl9ib206IGJvb2wgPSBib21fb3Jfc2lnX2F2YWlsYWJsZSBhbmQgc2hvdWxkX3N0cmlwX3NpZ19vcl9ib20oCiAgICAgICAgICAgIGVuY29kaW5nX2lhbmEKICAgICAgICApCgogICAgICAgIGlmIGVuY29kaW5nX2lhbmEgaW4ge1widXRmXzE2XCIsIFwidXRmXzMyXCJ9IGFuZCBub3QgYm9tX29yX3NpZ19hdmFpbGFibGU6CiAgICAgICAgICAgIGxvZ2dlci5sb2coCiAgICAgICAgICAgICAgICBUUkFDRSwKICAgICAgICAgICAgICAgIFwiRW5jb2RpbmcgJXMgd29udCBiZSB0ZXN0ZWQgYXMtaXMgYmVjYXVzZSBpdCByZXF1aXJlIGEgQk9NLiBXaWxsIHRyeSBzb21lIHN1Yi1lbmNvZGVyIExFL0JFLlwiLAogICAgICAgICAgICAgICAgZW5jb2RpbmdfaWFuYSwKICAgICAgICAgICAgKQogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlzX211bHRpX2J5dGVfZGVjb2RlcjogYm9vbCA9IGlzX211bHRpX2J5dGVfZW5jb2RpbmcoZW5jb2RpbmdfaWFuYSkKICAgICAgICBleGNlcHQgKE1vZHVsZU5vdEZvdW5kRXJyb3IsIEltcG9ydEVycm9yKToKICAgICAgICAgICAgbG9nZ2VyLmxvZygKICAgICAgICAgICAgICAgIFRSQUNFLAogICAgICAgICAgICAgICAgXCJFbmNvZGluZyAlcyBkb2VzIG5vdCBwcm92aWRlIGFuIEluY3JlbWVudGFsRGVjb2RlclwiLAogICAgICAgICAgICAgICAgZW5jb2RpbmdfaWFuYSwKICAgICAgICAgICAgKQogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlmIGlzX3Rvb19sYXJnZV9zZXF1ZW5jZSBhbmQgaXNfbXVsdGlfYnl0ZV9kZWNvZGVyIGlzIEZhbHNlOgogICAgICAgICAgICAgICAgc3RyKAogICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlc1s6IGludCg1MGU0KV0KICAgICAgICAgICAgICAgICAgICBpZiBzdHJpcF9zaWdfb3JfYm9tIGlzIEZhbHNlCiAgICAgICAgICAgICAgICAgICAgZWxzZSBzZXF1ZW5jZXNbbGVuKHNpZ19wYXlsb2FkKSA6IGludCg1MGU0KV0sCiAgICAgICAgICAgICAgICAgICAgZW5jb2Rpbmc9ZW5jb2RpbmdfaWFuYSwKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGRlY29kZWRfcGF5bG9hZCA9IHN0cigKICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZXMKICAgICAgICAgICAgICAgICAgICBpZiBzdHJpcF9zaWdfb3JfYm9tIGlzIEZhbHNlCiAgICAgICAgICAgICAgICAgICAgZWxzZSBzZXF1ZW5jZXNbbGVuKHNpZ19wYXlsb2FkKSA6XSwKICAgICAgICAgICAgICAgICAgICBlbmNvZGluZz1lbmNvZGluZ19pYW5hLAogICAgICAgICAgICAgICAgKQogICAgICAgIGV4Y2VwdCAoVW5pY29kZURlY29kZUVycm9yLCBMb29rdXBFcnJvcikgYXMgZToKICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZSwgTG9va3VwRXJyb3IpOgogICAgICAgICAgICAgICAgbG9nZ2VyLmxvZygKICAgICAgICAgICAgICAgICAgICBUUkFDRSwKICAgICAgICAgICAgICAgICAgICBcIkNvZGUgcGFnZSAlcyBkb2VzIG5vdCBmaXQgZ2l2ZW4gYnl0ZXMgc2VxdWVuY2UgYXQgQUxMLiAlc1wiLAogICAgICAgICAgICAgICAgICAgIGVuY29kaW5nX2lhbmEsCiAgICAgICAgICAgICAgICAgICAgc3RyKGUpLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICB0ZXN0ZWRfYnV0X2hhcmRfZmFpbHVyZS5hcHBlbmQoZW5jb2RpbmdfaWFuYSkKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgc2ltaWxhcl9zb2Z0X2ZhaWx1cmVfdGVzdDogYm9vbCA9IEZhbHNlCgogICAgICAgIGZvciBlbmNvZGluZ19zb2Z0X2ZhaWxlZCBpbiB0ZXN0ZWRfYnV0X3NvZnRfZmFpbHVyZToKICAgICAgICAgICAgaWYgaXNfY3Bfc2ltaWxhcihlbmNvZGluZ19pYW5hLCBlbmNvZGluZ19zb2Z0X2ZhaWxlZCk6CiAgICAgICAgICAgICAgICBzaW1pbGFyX3NvZnRfZmFpbHVyZV90ZXN0ID0gVHJ1ZQogICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgaWYgc2ltaWxhcl9zb2Z0X2ZhaWx1cmVfdGVzdDoKICAgICAgICAgICAgbG9nZ2VyLmxvZygKICAgICAgICAgICAgICAgIFRSQUNFLAogICAgICAgICAgICAgICAgXCIlcyBpcyBkZWVtZWQgdG9vIHNpbWlsYXIgdG8gY29kZSBwYWdlICVzIGFuZCB3YXMgY29uc2lkZXIgdW5zdWl0ZWQgYWxyZWFkeS4gQ29udGludWluZyFcIiwKICAgICAgICAgICAgICAgIGVuY29kaW5nX2lhbmEsCiAgICAgICAgICAgICAgICBlbmNvZGluZ19zb2Z0X2ZhaWxlZCwKICAgICAgICAgICAgKQogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICByXyA9IHJhbmdlKAogICAgICAgICAgICAwIGlmIG5vdCBib21fb3Jfc2lnX2F2YWlsYWJsZSBlbHNlIGxlbihzaWdfcGF5bG9hZCksCiAgICAgICAgICAgIGxlbmd0aCwKICAgICAgICAgICAgaW50KGxlbmd0aCAvIHN0ZXBzKSwKICAgICAgICApCgogICAgICAgIG11bHRpX2J5dGVfYm9udXM6IGJvb2wgPSAoCiAgICAgICAgICAgIGlzX211bHRpX2J5dGVfZGVjb2RlcgogICAgICAgICAgICBhbmQgZGVjb2RlZF9wYXlsb2FkIGlzIG5vdCBOb25lCiAgICAgICAgICAgIGFuZCBsZW4oZGVjb2RlZF9wYXlsb2FkKSA8IGxlbmd0aAogICAgICAgICkKCiAgICAgICAgaWYgbXVsdGlfYnl0ZV9ib251czoKICAgICAgICAgICAgbG9nZ2VyLmxvZygKICAgICAgICAgICAgICAgIFRSQUNFLAogICAgICAgICAgICAgICAgXCJDb2RlIHBhZ2UgJXMgaXMgYSBtdWx0aSBieXRlIGVuY29kaW5nIHRhYmxlIGFuZCBpdCBhcHBlYXIgdGhhdCBhdCBsZWFzdCBvbmUgY2hhcmFjdGVyIFwiCiAgICAgICAgICAgICAgICBcIndhcyBlbmNvZGVkIHVzaW5nIG4tYnl0ZXMuXCIsCiAgICAgICAgICAgICAgICBlbmNvZGluZ19pYW5hLAogICAgICAgICAgICApCgogICAgICAgIG1heF9jaHVua19nYXZlX3VwOiBpbnQgPSBpbnQobGVuKHJfKSAvIDQpCgogICAgICAgIG1heF9jaHVua19nYXZlX3VwID0gbWF4KG1heF9jaHVua19nYXZlX3VwLCAyKQogICAgICAgIGVhcmx5X3N0b3BfY291bnQ6IGludCA9IDAKICAgICAgICBsYXp5X3N0cl9oYXJkX2ZhaWx1cmUgPSBGYWxzZQoKICAgICAgICBtZF9jaHVua3M6IExpc3Rbc3RyXSA9IFtdCiAgICAgICAgbWRfcmF0aW9zID0gW10KCiAgICAgICAgdHJ5OgogICAgICAgICAgICBmb3IgY2h1bmsgaW4gY3V0X3NlcXVlbmNlX2NodW5rcygKICAgICAgICAgICAgICAgIHNlcXVlbmNlcywKICAgICAgICAgICAgICAgIGVuY29kaW5nX2lhbmEsCiAgICAgICAgICAgICAgICByXywKICAgICAgICAgICAgICAgIGNodW5rX3NpemUsCiAgICAgICAgICAgICAgICBib21fb3Jfc2lnX2F2YWlsYWJsZSwKICAgICAgICAgICAgICAgIHN0cmlwX3NpZ19vcl9ib20sCiAgICAgICAgICAgICAgICBzaWdfcGF5bG9hZCwKICAgICAgICAgICAgICAgIGlzX211bHRpX2J5dGVfZGVjb2RlciwKICAgICAgICAgICAgICAgIGRlY29kZWRfcGF5bG9hZCwKICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgIG1kX2NodW5rcy5hcHBlbmQoY2h1bmspCgogICAgICAgICAgICAgICAgbWRfcmF0aW9zLmFwcGVuZChtZXNzX3JhdGlvKGNodW5rLCB0aHJlc2hvbGQpKQoKICAgICAgICAgICAgICAgIGlmIG1kX3JhdGlvc1stMV0gPj0gdGhyZXNob2xkOgogICAgICAgICAgICAgICAgICAgIGVhcmx5X3N0b3BfY291bnQgKz0gMQoKICAgICAgICAgICAgICAgIGlmIChlYXJseV9zdG9wX2NvdW50ID49IG1heF9jaHVua19nYXZlX3VwKSBvciAoCiAgICAgICAgICAgICAgICAgICAgYm9tX29yX3NpZ19hdmFpbGFibGUgYW5kIHN0cmlwX3NpZ19vcl9ib20gaXMgRmFsc2UKICAgICAgICAgICAgICAgICk6CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICBleGNlcHQgVW5pY29kZURlY29kZUVycm9yIGFzIGU6ICAjIExhenkgc3RyIGxvYWRpbmcgbWF5IGhhdmUgbWlzc2VkIHNvbWV0aGluZyB0aGVyZQogICAgICAgICAgICBsb2dnZXIubG9nKAogICAgICAgICAgICAgICAgVFJBQ0UsCiAgICAgICAgICAgICAgICBcIkxhenlTdHIgTG9hZGluZzogQWZ0ZXIgTUQgY2h1bmsgZGVjb2RlLCBjb2RlIHBhZ2UgJXMgZG9lcyBub3QgZml0IGdpdmVuIGJ5dGVzIHNlcXVlbmNlIGF0IEFMTC4gJXNcIiwKICAgICAgICAgICAgICAgIGVuY29kaW5nX2lhbmEsCiAgICAgICAgICAgICAgICBzdHIoZSksCiAgICAgICAgICAgICkKICAgICAgICAgICAgZWFybHlfc3RvcF9jb3VudCA9IG1heF9jaHVua19nYXZlX3VwCiAgICAgICAgICAgIGxhenlfc3RyX2hhcmRfZmFpbHVyZSA9IFRydWUKCiAgICAgICAgIyBXZSBtaWdodCB3YW50IHRvIGNoZWNrIHRoZSBzZXF1ZW5jZSBhZ2FpbiB3aXRoIHRoZSB3aG9sZSBjb250ZW50CiAgICAgICAgIyBPbmx5IGlmIGluaXRpYWwgTUQgdGVzdHMgcGFzc2VzCiAgICAgICAgaWYgKAogICAgICAgICAgICBub3QgbGF6eV9zdHJfaGFyZF9mYWlsdXJlCiAgICAgICAgICAgIGFuZCBpc190b29fbGFyZ2Vfc2VxdWVuY2UKICAgICAgICAgICAgYW5kIG5vdCBpc19tdWx0aV9ieXRlX2RlY29kZXIKICAgICAgICApOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBzZXF1ZW5jZXNbaW50KDUwZTMpIDpdLmRlY29kZShlbmNvZGluZ19pYW5hLCBlcnJvcnM9XCJzdHJpY3RcIikKICAgICAgICAgICAgZXhjZXB0IFVuaWNvZGVEZWNvZGVFcnJvciBhcyBlOgogICAgICAgICAgICAgICAgbG9nZ2VyLmxvZygKICAgICAgICAgICAgICAgICAgICBUUkFDRSwKICAgICAgICAgICAgICAgICAgICBcIkxhenlTdHIgTG9hZGluZzogQWZ0ZXIgZmluYWwgbG9va3VwLCBjb2RlIHBhZ2UgJXMgZG9lcyBub3QgZml0IGdpdmVuIGJ5dGVzIHNlcXVlbmNlIGF0IEFMTC4gJXNcIiwKICAgICAgICAgICAgICAgICAgICBlbmNvZGluZ19pYW5hLAogICAgICAgICAgICAgICAgICAgIHN0cihlKSwKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIHRlc3RlZF9idXRfaGFyZF9mYWlsdXJlLmFwcGVuZChlbmNvZGluZ19pYW5hKQogICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgbWVhbl9tZXNzX3JhdGlvOiBmbG9hdCA9IHN1bShtZF9yYXRpb3MpIC8gbGVuKG1kX3JhdGlvcykgaWYgbWRfcmF0aW9zIGVsc2UgMC4wCiAgICAgICAgaWYgbWVhbl9tZXNzX3JhdGlvID49IHRocmVzaG9sZCBvciBlYXJseV9zdG9wX2NvdW50ID49IG1heF9jaHVua19nYXZlX3VwOgogICAgICAgICAgICB0ZXN0ZWRfYnV0X3NvZnRfZmFpbHVyZS5hcHBlbmQoZW5jb2RpbmdfaWFuYSkKICAgICAgICAgICAgbG9nZ2VyLmxvZygKICAgICAgICAgICAgICAgIFRSQUNFLAogICAgICAgICAgICAgICAgXCIlcyB3YXMgZXhjbHVkZWQgYmVjYXVzZSBvZiBpbml0aWFsIGNoYW9zIHByb2JpbmcuIEdhdmUgdXAgJWkgdGltZShzKS4gXCIKICAgICAgICAgICAgICAgIFwiQ29tcHV0ZWQgbWVhbiBjaGFvcyBpcyAlZiAlJS5cIiwKICAgICAgICAgICAgICAgIGVuY29kaW5nX2lhbmEsCiAgICAgICAgICAgICAgICBlYXJseV9zdG9wX2NvdW50LAogICAgICAgICAgICAgICAgcm91bmQobWVhbl9tZXNzX3JhdGlvICogMTAwLCBuZGlnaXRzPTMpLAogICAgICAgICAgICApCiAgICAgICAgICAgICMgUHJlcGFyaW5nIHRob3NlIGZhbGxiYWNrcyBpbiBjYXNlIHdlIGdvdCBub3RoaW5nLgogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICBlbmNvZGluZ19pYW5hIGluIFtcImFzY2lpXCIsIFwidXRmXzhcIiwgc3BlY2lmaWVkX2VuY29kaW5nXQogICAgICAgICAgICAgICAgYW5kIG5vdCBsYXp5X3N0cl9oYXJkX2ZhaWx1cmUKICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgIGZhbGxiYWNrX2VudHJ5ID0gQ2hhcnNldE1hdGNoKAogICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlcywgZW5jb2RpbmdfaWFuYSwgdGhyZXNob2xkLCBGYWxzZSwgW10sIGRlY29kZWRfcGF5bG9hZAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgaWYgZW5jb2RpbmdfaWFuYSA9PSBzcGVjaWZpZWRfZW5jb2Rpbmc6CiAgICAgICAgICAgICAgICAgICAgZmFsbGJhY2tfc3BlY2lmaWVkID0gZmFsbGJhY2tfZW50cnkKICAgICAgICAgICAgICAgIGVsaWYgZW5jb2RpbmdfaWFuYSA9PSBcImFzY2lpXCI6CiAgICAgICAgICAgICAgICAgICAgZmFsbGJhY2tfYXNjaWkgPSBmYWxsYmFja19lbnRyeQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBmYWxsYmFja191OCA9IGZhbGxiYWNrX2VudHJ5CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGxvZ2dlci5sb2coCiAgICAgICAgICAgIFRSQUNFLAogICAgICAgICAgICBcIiVzIHBhc3NlZCBpbml0aWFsIGNoYW9zIHByb2JpbmcuIE1lYW4gbWVhc3VyZWQgY2hhb3MgaXMgJWYgJSVcIiwKICAgICAgICAgICAgZW5jb2RpbmdfaWFuYSwKICAgICAgICAgICAgcm91bmQobWVhbl9tZXNzX3JhdGlvICogMTAwLCBuZGlnaXRzPTMpLAogICAgICAgICkKCiAgICAgICAgaWYgbm90IGlzX211bHRpX2J5dGVfZGVjb2RlcjoKICAgICAgICAgICAgdGFyZ2V0X2xhbmd1YWdlczogTGlzdFtzdHJdID0gZW5jb2RpbmdfbGFuZ3VhZ2VzKGVuY29kaW5nX2lhbmEpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgdGFyZ2V0X2xhbmd1YWdlcyA9IG1iX2VuY29kaW5nX2xhbmd1YWdlcyhlbmNvZGluZ19pYW5hKQoKICAgICAgICBpZiB0YXJnZXRfbGFuZ3VhZ2VzOgogICAgICAgICAgICBsb2dnZXIubG9nKAogICAgICAgICAgICAgICAgVFJBQ0UsCiAgICAgICAgICAgICAgICBcInt9IHNob3VsZCB0YXJnZXQgYW55IGxhbmd1YWdlKHMpIG9mIHt9XCIuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgIGVuY29kaW5nX2lhbmEsIHN0cih0YXJnZXRfbGFuZ3VhZ2VzKQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgKQoKICAgICAgICBjZF9yYXRpb3MgPSBbXQoKICAgICAgICAjIFdlIHNoYWxsIHNraXAgdGhlIENEIHdoZW4gaXRzIGFib3V0IEFTQ0lJCiAgICAgICAgIyBNb3N0IG9mIHRoZSB0aW1lIGl0cyBub3QgcmVsZXZhbnQgdG8gcnVuIFwibGFuZ3VhZ2UtZGV0ZWN0aW9uXCIgb24gaXQuCiAgICAgICAgaWYgZW5jb2RpbmdfaWFuYSAhPSBcImFzY2lpXCI6CiAgICAgICAgICAgIGZvciBjaHVuayBpbiBtZF9jaHVua3M6CiAgICAgICAgICAgICAgICBjaHVua19sYW5ndWFnZXMgPSBjb2hlcmVuY2VfcmF0aW8oCiAgICAgICAgICAgICAgICAgICAgY2h1bmssIDAuMSwgXCIsXCIuam9pbih0YXJnZXRfbGFuZ3VhZ2VzKSBpZiB0YXJnZXRfbGFuZ3VhZ2VzIGVsc2UgTm9uZQogICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgICAgIGNkX3JhdGlvcy5hcHBlbmQoY2h1bmtfbGFuZ3VhZ2VzKQoKICAgICAgICBjZF9yYXRpb3NfbWVyZ2VkID0gbWVyZ2VfY29oZXJlbmNlX3JhdGlvcyhjZF9yYXRpb3MpCgogICAgICAgIGlmIGNkX3JhdGlvc19tZXJnZWQ6CiAgICAgICAgICAgIGxvZ2dlci5sb2coCiAgICAgICAgICAgICAgICBUUkFDRSwKICAgICAgICAgICAgICAgIFwiV2UgZGV0ZWN0ZWQgbGFuZ3VhZ2Uge30gdXNpbmcge31cIi5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgY2RfcmF0aW9zX21lcmdlZCwgZW5jb2RpbmdfaWFuYQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgKQoKICAgICAgICByZXN1bHRzLmFwcGVuZCgKICAgICAgICAgICAgQ2hhcnNldE1hdGNoKAogICAgICAgICAgICAgICAgc2VxdWVuY2VzLAogICAgICAgICAgICAgICAgZW5jb2RpbmdfaWFuYSwKICAgICAgICAgICAgICAgIG1lYW5fbWVzc19yYXRpbywKICAgICAgICAgICAgICAgIGJvbV9vcl9zaWdfYXZhaWxhYmxlLAogICAgICAgICAgICAgICAgY2RfcmF0aW9zX21lcmdlZCwKICAgICAgICAgICAgICAgIGRlY29kZWRfcGF5bG9hZCwKICAgICAgICAgICAgKQogICAgICAgICkKCiAgICAgICAgaWYgKAogICAgICAgICAgICBlbmNvZGluZ19pYW5hIGluIFtzcGVjaWZpZWRfZW5jb2RpbmcsIFwiYXNjaWlcIiwgXCJ1dGZfOFwiXQogICAgICAgICAgICBhbmQgbWVhbl9tZXNzX3JhdGlvIDwgMC4xCiAgICAgICAgKToKICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKAogICAgICAgICAgICAgICAgXCJFbmNvZGluZyBkZXRlY3Rpb246ICVzIGlzIG1vc3QgbGlrZWx5IHRoZSBvbmUuXCIsIGVuY29kaW5nX2lhbmEKICAgICAgICAgICAgKQogICAgICAgICAgICBpZiBleHBsYWluOgogICAgICAgICAgICAgICAgbG9nZ2VyLnJlbW92ZUhhbmRsZXIoZXhwbGFpbl9oYW5kbGVyKQogICAgICAgICAgICAgICAgbG9nZ2VyLnNldExldmVsKHByZXZpb3VzX2xvZ2dlcl9sZXZlbCkKICAgICAgICAgICAgcmV0dXJuIENoYXJzZXRNYXRjaGVzKFtyZXN1bHRzW2VuY29kaW5nX2lhbmFdXSkKCiAgICAgICAgaWYgZW5jb2RpbmdfaWFuYSA9PSBzaWdfZW5jb2Rpbmc6CiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygKICAgICAgICAgICAgICAgIFwiRW5jb2RpbmcgZGV0ZWN0aW9uOiAlcyBpcyBtb3N0IGxpa2VseSB0aGUgb25lIGFzIHdlIGRldGVjdGVkIGEgQk9NIG9yIFNJRyB3aXRoaW4gXCIKICAgICAgICAgICAgICAgIFwidGhlIGJlZ2lubmluZyBvZiB0aGUgc2VxdWVuY2UuXCIsCiAgICAgICAgICAgICAgICBlbmNvZGluZ19pYW5hLAogICAgICAgICAgICApCiAgICAgICAgICAgIGlmIGV4cGxhaW46CiAgICAgICAgICAgICAgICBsb2dnZXIucmVtb3ZlSGFuZGxlcihleHBsYWluX2hhbmRsZXIpCiAgICAgICAgICAgICAgICBsb2dnZXIuc2V0TGV2ZWwocHJldmlvdXNfbG9nZ2VyX2xldmVsKQogICAgICAgICAgICByZXR1cm4gQ2hhcnNldE1hdGNoZXMoW3Jlc3VsdHNbZW5jb2RpbmdfaWFuYV1dKQoKICAgIGlmIGxlbihyZXN1bHRzKSA9PSAwOgogICAgICAgIGlmIGZhbGxiYWNrX3U4IG9yIGZhbGxiYWNrX2FzY2lpIG9yIGZhbGxiYWNrX3NwZWNpZmllZDoKICAgICAgICAgICAgbG9nZ2VyLmxvZygKICAgICAgICAgICAgICAgIFRSQUNFLAogICAgICAgICAgICAgICAgXCJOb3RoaW5nIGdvdCBvdXQgb2YgdGhlIGRldGVjdGlvbiBwcm9jZXNzLiBVc2luZyBBU0NJSS9VVEYtOC9TcGVjaWZpZWQgZmFsbGJhY2suXCIsCiAgICAgICAgICAgICkKCiAgICAgICAgaWYgZmFsbGJhY2tfc3BlY2lmaWVkOgogICAgICAgICAgICBsb2dnZXIuZGVidWcoCiAgICAgICAgICAgICAgICBcIkVuY29kaW5nIGRldGVjdGlvbjogJXMgd2lsbCBiZSB1c2VkIGFzIGEgZmFsbGJhY2sgbWF0Y2hcIiwKICAgICAgICAgICAgICAgIGZhbGxiYWNrX3NwZWNpZmllZC5lbmNvZGluZywKICAgICAgICAgICAgKQogICAgICAgICAgICByZXN1bHRzLmFwcGVuZChmYWxsYmFja19zcGVjaWZpZWQpCiAgICAgICAgZWxpZiAoCiAgICAgICAgICAgIChmYWxsYmFja191OCBhbmQgZmFsbGJhY2tfYXNjaWkgaXMgTm9uZSkKICAgICAgICAgICAgb3IgKAogICAgICAgICAgICAgICAgZmFsbGJhY2tfdTgKICAgICAgICAgICAgICAgIGFuZCBmYWxsYmFja19hc2NpaQogICAgICAgICAgICAgICAgYW5kIGZhbGxiYWNrX3U4LmZpbmdlcnByaW50ICE9IGZhbGxiYWNrX2FzY2lpLmZpbmdlcnByaW50CiAgICAgICAgICAgICkKICAgICAgICAgICAgb3IgKGZhbGxiYWNrX3U4IGlzIG5vdCBOb25lKQogICAgICAgICk6CiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhcIkVuY29kaW5nIGRldGVjdGlvbjogdXRmXzggd2lsbCBiZSB1c2VkIGFzIGEgZmFsbGJhY2sgbWF0Y2hcIikKICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoZmFsbGJhY2tfdTgpCiAgICAgICAgZWxpZiBmYWxsYmFja19hc2NpaToKICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKFwiRW5jb2RpbmcgZGV0ZWN0aW9uOiBhc2NpaSB3aWxsIGJlIHVzZWQgYXMgYSBmYWxsYmFjayBtYXRjaFwiKQogICAgICAgICAgICByZXN1bHRzLmFwcGVuZChmYWxsYmFja19hc2NpaSkKCiAgICBpZiByZXN1bHRzOgogICAgICAgIGxvZ2dlci5kZWJ1ZygKICAgICAgICAgICAgXCJFbmNvZGluZyBkZXRlY3Rpb246IEZvdW5kICVzIGFzIHBsYXVzaWJsZSAoYmVzdC1jYW5kaWRhdGUpIGZvciBjb250ZW50LiBXaXRoICVpIGFsdGVybmF0aXZlcy5cIiwKICAgICAgICAgICAgcmVzdWx0cy5iZXN0KCkuZW5jb2RpbmcsICAjIHR5cGU6IGlnbm9yZQogICAgICAgICAgICBsZW4ocmVzdWx0cykgLSAxLAogICAgICAgICkKICAgIGVsc2U6CiAgICAgICAgbG9nZ2VyLmRlYnVnKFwiRW5jb2RpbmcgZGV0ZWN0aW9uOiBVbmFibGUgdG8gZGV0ZXJtaW5lIGFueSBzdWl0YWJsZSBjaGFyc2V0LlwiKQoKICAgIGlmIGV4cGxhaW46CiAgICAgICAgbG9nZ2VyLnJlbW92ZUhhbmRsZXIoZXhwbGFpbl9oYW5kbGVyKQogICAgICAgIGxvZ2dlci5zZXRMZXZlbChwcmV2aW91c19sb2dnZXJfbGV2ZWwpCgogICAgcmV0dXJuIHJlc3VsdHMKCgpkZWYgZnJvbV9mcCgKICAgIGZwOiBCaW5hcnlJTywKICAgIHN0ZXBzOiBpbnQgPSA1LAogICAgY2h1bmtfc2l6ZTogaW50ID0gNTEyLAogICAgdGhyZXNob2xkOiBmbG9hdCA9IDAuMjAsCiAgICBjcF9pc29sYXRpb246IExpc3Rbc3RyXSA9IE5vbmUsCiAgICBjcF9leGNsdXNpb246IExpc3Rbc3RyXSA9IE5vbmUsCiAgICBwcmVlbXB0aXZlX2JlaGF2aW91cjogYm9vbCA9IFRydWUsCiAgICBleHBsYWluOiBib29sID0gRmFsc2UsCikgLT4gQ2hhcnNldE1hdGNoZXM6CiAgICBcIlwiXCIKICAgIFNhbWUgdGhpbmcgdGhhbiB0aGUgZnVuY3Rpb24gZnJvbV9ieXRlcyBidXQgdXNpbmcgYSBmaWxlIHBvaW50ZXIgdGhhdCBpcyBhbHJlYWR5IHJlYWR5LgogICAgV2lsbCBub3QgY2xvc2UgdGhlIGZpbGUgcG9pbnRlci4KICAgIFwiXCJcIgogICAgcmV0dXJuIGZyb21fYnl0ZXMoCiAgICAgICAgZnAucmVhZCgpLAogICAgICAgIHN0ZXBzLAogICAgICAgIGNodW5rX3NpemUsCiAgICAgICAgdGhyZXNob2xkLAogICAgICAgIGNwX2lzb2xhdGlvbiwKICAgICAgICBjcF9leGNsdXNpb24sCiAgICAgICAgcHJlZW1wdGl2ZV9iZWhhdmlvdXIsCiAgICAgICAgZXhwbGFpbiwKICAgICkKCgpkZWYgZnJvbV9wYXRoKAogICAgcGF0aDogUGF0aExpa2UsCiAgICBzdGVwczogaW50ID0gNSwKICAgIGNodW5rX3NpemU6IGludCA9IDUxMiwKICAgIHRocmVzaG9sZDogZmxvYXQgPSAwLjIwLAogICAgY3BfaXNvbGF0aW9uOiBMaXN0W3N0cl0gPSBOb25lLAogICAgY3BfZXhjbHVzaW9uOiBMaXN0W3N0cl0gPSBOb25lLAogICAgcHJlZW1wdGl2ZV9iZWhhdmlvdXI6IGJvb2wgPSBUcnVlLAogICAgZXhwbGFpbjogYm9vbCA9IEZhbHNlLAopIC0+IENoYXJzZXRNYXRjaGVzOgogICAgXCJcIlwiCiAgICBTYW1lIHRoaW5nIHRoYW4gdGhlIGZ1bmN0aW9uIGZyb21fYnl0ZXMgYnV0IHdpdGggb25lIGV4dHJhIHN0ZXAuIE9wZW5pbmcgYW5kIHJlYWRpbmcgZ2l2ZW4gZmlsZSBwYXRoIGluIGJpbmFyeSBtb2RlLgogICAgQ2FuIHJhaXNlIElPRXJyb3IuCiAgICBcIlwiXCIKICAgIHdpdGggb3BlbihwYXRoLCBcInJiXCIpIGFzIGZwOgogICAgICAgIHJldHVybiBmcm9tX2ZwKAogICAgICAgICAgICBmcCwKICAgICAgICAgICAgc3RlcHMsCiAgICAgICAgICAgIGNodW5rX3NpemUsCiAgICAgICAgICAgIHRocmVzaG9sZCwKICAgICAgICAgICAgY3BfaXNvbGF0aW9uLAogICAgICAgICAgICBjcF9leGNsdXNpb24sCiAgICAgICAgICAgIHByZWVtcHRpdmVfYmVoYXZpb3VyLAogICAgICAgICAgICBleHBsYWluLAogICAgICAgICkKCgpkZWYgbm9ybWFsaXplKAogICAgcGF0aDogUGF0aExpa2UsCiAgICBzdGVwczogaW50ID0gNSwKICAgIGNodW5rX3NpemU6IGludCA9IDUxMiwKICAgIHRocmVzaG9sZDogZmxvYXQgPSAwLjIwLAogICAgY3BfaXNvbGF0aW9uOiBMaXN0W3N0cl0gPSBOb25lLAogICAgY3BfZXhjbHVzaW9uOiBMaXN0W3N0cl0gPSBOb25lLAogICAgcHJlZW1wdGl2ZV9iZWhhdmlvdXI6IGJvb2wgPSBUcnVlLAopIC0+IENoYXJzZXRNYXRjaDoKICAgIFwiXCJcIgogICAgVGFrZSBhICh0ZXh0LWJhc2VkKSBmaWxlIHBhdGggYW5kIHRyeSB0byBjcmVhdGUgYW5vdGhlciBmaWxlIG5leHQgdG8gaXQsIHRoaXMgdGltZSB1c2luZyBVVEYtOC4KICAgIFwiXCJcIgogICAgcmVzdWx0cyA9IGZyb21fcGF0aCgKICAgICAgICBwYXRoLAogICAgICAgIHN0ZXBzLAogICAgICAgIGNodW5rX3NpemUsCiAgICAgICAgdGhyZXNob2xkLAogICAgICAgIGNwX2lzb2xhdGlvbiwKICAgICAgICBjcF9leGNsdXNpb24sCiAgICAgICAgcHJlZW1wdGl2ZV9iZWhhdmlvdXIsCiAgICApCgogICAgZmlsZW5hbWUgPSBiYXNlbmFtZShwYXRoKQogICAgdGFyZ2V0X2V4dGVuc2lvbnMgPSBsaXN0KHNwbGl0ZXh0KGZpbGVuYW1lKSkKCiAgICBpZiBsZW4ocmVzdWx0cykgPT0gMDoKICAgICAgICByYWlzZSBJT0Vycm9yKAogICAgICAgICAgICAnVW5hYmxlIHRvIG5vcm1hbGl6ZSBcInt9XCIsIG5vIGVuY29kaW5nIGNoYXJzZXQgc2VlbXMgdG8gZml0LicuZm9ybWF0KAogICAgICAgICAgICAgICAgZmlsZW5hbWUKICAgICAgICAgICAgKQogICAgICAgICkKCiAgICByZXN1bHQgPSByZXN1bHRzLmJlc3QoKQoKICAgIHRhcmdldF9leHRlbnNpb25zWzBdICs9IFwiLVwiICsgcmVzdWx0LmVuY29kaW5nICAjIHR5cGU6IGlnbm9yZQoKICAgIHdpdGggb3BlbigKICAgICAgICBcInt9XCIuZm9ybWF0KHN0cihwYXRoKS5yZXBsYWNlKGZpbGVuYW1lLCBcIlwiLmpvaW4odGFyZ2V0X2V4dGVuc2lvbnMpKSksIFwid2JcIgogICAgKSBhcyBmcDoKICAgICAgICBmcC53cml0ZShyZXN1bHQub3V0cHV0KCkpICAjIHR5cGU6IGlnbm9yZQoKICAgIHJldHVybiByZXN1bHQgICMgdHlwZTogaWdub3JlCgoiIiIKbW9kdWxlX2RpY3RbImNoYXJzZXRfbm9ybWFsaXplciIrb3Muc2VwKyJ2ZXJzaW9uLnB5Il09IiIiClwiXCJcIgpFeHBvc2UgdmVyc2lvbgpcIlwiXCIKCl9fdmVyc2lvbl9fID0gXCIyLjEuMFwiClZFUlNJT04gPSBfX3ZlcnNpb25fXy5zcGxpdChcIi5cIikKCiIiIgptb2R1bGVfZGljdFsiY2hhcnNldF9ub3JtYWxpemVyIitvcy5zZXArIm1kLnB5Il09IiIiCmZyb20gZnVuY3Rvb2xzIGltcG9ydCBscnVfY2FjaGUKZnJvbSB0eXBpbmcgaW1wb3J0IExpc3QsIE9wdGlvbmFsCgpmcm9tIC5jb25zdGFudCBpbXBvcnQgQ09NTU9OX1NBRkVfQVNDSUlfQ0hBUkFDVEVSUywgVU5JQ09ERV9TRUNPTkRBUllfUkFOR0VfS0VZV09SRApmcm9tIC51dGlscyBpbXBvcnQgKAogICAgaXNfYWNjZW50dWF0ZWQsCiAgICBpc19hc2NpaSwKICAgIGlzX2Nhc2VfdmFyaWFibGUsCiAgICBpc19jamssCiAgICBpc19lbW90aWNvbiwKICAgIGlzX2hhbmd1bCwKICAgIGlzX2hpcmFnYW5hLAogICAgaXNfa2F0YWthbmEsCiAgICBpc19sYXRpbiwKICAgIGlzX3B1bmN0dWF0aW9uLAogICAgaXNfc2VwYXJhdG9yLAogICAgaXNfc3ltYm9sLAogICAgaXNfdGhhaSwKICAgIGlzX3VucHJpbnRhYmxlLAogICAgcmVtb3ZlX2FjY2VudCwKICAgIHVuaWNvZGVfcmFuZ2UsCikKCgpjbGFzcyBNZXNzRGV0ZWN0b3JQbHVnaW46CiAgICBcIlwiXCIKICAgIEJhc2UgYWJzdHJhY3QgY2xhc3MgdXNlZCBmb3IgbWVzcyBkZXRlY3Rpb24gcGx1Z2lucy4KICAgIEFsbCBkZXRlY3RvcnMgTVVTVCBleHRlbmQgYW5kIGltcGxlbWVudCBnaXZlbiBtZXRob2RzLgogICAgXCJcIlwiCgogICAgZGVmIGVsaWdpYmxlKHNlbGYsIGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOgogICAgICAgIFwiXCJcIgogICAgICAgIERldGVybWluZSBpZiBnaXZlbiBjaGFyYWN0ZXIgc2hvdWxkIGJlIGZlZCBpbi4KICAgICAgICBcIlwiXCIKICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yICAjIHByYWdtYTogbm9jb3ZlcgoKICAgIGRlZiBmZWVkKHNlbGYsIGNoYXJhY3Rlcjogc3RyKSAtPiBOb25lOgogICAgICAgIFwiXCJcIgogICAgICAgIFRoZSBtYWluIHJvdXRpbmUgdG8gYmUgZXhlY3V0ZWQgdXBvbiBjaGFyYWN0ZXIuCiAgICAgICAgSW5zZXJ0IHRoZSBsb2dpYyBpbiB3aXRjaCB0aGUgdGV4dCB3b3VsZCBiZSBjb25zaWRlcmVkIGNoYW90aWMuCiAgICAgICAgXCJcIlwiCiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvciAgIyBwcmFnbWE6IG5vY292ZXIKCiAgICBkZWYgcmVzZXQoc2VsZikgLT4gTm9uZTogICMgcHJhZ21hOiBubyBjb3ZlcgogICAgICAgIFwiXCJcIgogICAgICAgIFBlcm1pdCB0byByZXNldCB0aGUgcGx1Z2luIHRvIHRoZSBpbml0aWFsIHN0YXRlLgogICAgICAgIFwiXCJcIgogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IKCiAgICBAcHJvcGVydHkKICAgIGRlZiByYXRpbyhzZWxmKSAtPiBmbG9hdDoKICAgICAgICBcIlwiXCIKICAgICAgICBDb21wdXRlIHRoZSBjaGFvcyByYXRpbyBiYXNlZCBvbiB3aGF0IHlvdXIgZmVlZCgpIGhhcyBzZWVuLgogICAgICAgIE11c3QgTk9UIGJlIGxvd2VyIHRoYW4gMC47IE5vIHJlc3RyaWN0aW9uIGd0IDAuCiAgICAgICAgXCJcIlwiCiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvciAgIyBwcmFnbWE6IG5vY292ZXIKCgpjbGFzcyBUb29NYW55U3ltYm9sT3JQdW5jdHVhdGlvblBsdWdpbihNZXNzRGV0ZWN0b3JQbHVnaW4pOgogICAgZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgc2VsZi5fcHVuY3R1YXRpb25fY291bnQ6IGludCA9IDAKICAgICAgICBzZWxmLl9zeW1ib2xfY291bnQ6IGludCA9IDAKICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQ6IGludCA9IDAKCiAgICAgICAgc2VsZi5fbGFzdF9wcmludGFibGVfY2hhcjogT3B0aW9uYWxbc3RyXSA9IE5vbmUKICAgICAgICBzZWxmLl9mcmVuenlfc3ltYm9sX2luX3dvcmQ6IGJvb2wgPSBGYWxzZQoKICAgIGRlZiBlbGlnaWJsZShzZWxmLCBjaGFyYWN0ZXI6IHN0cikgLT4gYm9vbDoKICAgICAgICByZXR1cm4gY2hhcmFjdGVyLmlzcHJpbnRhYmxlKCkKCiAgICBkZWYgZmVlZChzZWxmLCBjaGFyYWN0ZXI6IHN0cikgLT4gTm9uZToKICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQgKz0gMQoKICAgICAgICBpZiAoCiAgICAgICAgICAgIGNoYXJhY3RlciAhPSBzZWxmLl9sYXN0X3ByaW50YWJsZV9jaGFyCiAgICAgICAgICAgIGFuZCBjaGFyYWN0ZXIgbm90IGluIENPTU1PTl9TQUZFX0FTQ0lJX0NIQVJBQ1RFUlMKICAgICAgICApOgogICAgICAgICAgICBpZiBpc19wdW5jdHVhdGlvbihjaGFyYWN0ZXIpOgogICAgICAgICAgICAgICAgc2VsZi5fcHVuY3R1YXRpb25fY291bnQgKz0gMQogICAgICAgICAgICBlbGlmICgKICAgICAgICAgICAgICAgIGNoYXJhY3Rlci5pc2RpZ2l0KCkgaXMgRmFsc2UKICAgICAgICAgICAgICAgIGFuZCBpc19zeW1ib2woY2hhcmFjdGVyKQogICAgICAgICAgICAgICAgYW5kIGlzX2Vtb3RpY29uKGNoYXJhY3RlcikgaXMgRmFsc2UKICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgIHNlbGYuX3N5bWJvbF9jb3VudCArPSAyCgogICAgICAgIHNlbGYuX2xhc3RfcHJpbnRhYmxlX2NoYXIgPSBjaGFyYWN0ZXIKCiAgICBkZWYgcmVzZXQoc2VsZikgLT4gTm9uZTogICMgcHJhZ21hOiBubyBjb3ZlcgogICAgICAgIHNlbGYuX3B1bmN0dWF0aW9uX2NvdW50ID0gMAogICAgICAgIHNlbGYuX2NoYXJhY3Rlcl9jb3VudCA9IDAKICAgICAgICBzZWxmLl9zeW1ib2xfY291bnQgPSAwCgogICAgQHByb3BlcnR5CiAgICBkZWYgcmF0aW8oc2VsZikgLT4gZmxvYXQ6CiAgICAgICAgaWYgc2VsZi5fY2hhcmFjdGVyX2NvdW50ID09IDA6CiAgICAgICAgICAgIHJldHVybiAwLjAKCiAgICAgICAgcmF0aW9fb2ZfcHVuY3R1YXRpb246IGZsb2F0ID0gKAogICAgICAgICAgICBzZWxmLl9wdW5jdHVhdGlvbl9jb3VudCArIHNlbGYuX3N5bWJvbF9jb3VudAogICAgICAgICkgLyBzZWxmLl9jaGFyYWN0ZXJfY291bnQKCiAgICAgICAgcmV0dXJuIHJhdGlvX29mX3B1bmN0dWF0aW9uIGlmIHJhdGlvX29mX3B1bmN0dWF0aW9uID49IDAuMyBlbHNlIDAuMAoKCmNsYXNzIFRvb01hbnlBY2NlbnR1YXRlZFBsdWdpbihNZXNzRGV0ZWN0b3JQbHVnaW4pOgogICAgZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50OiBpbnQgPSAwCiAgICAgICAgc2VsZi5fYWNjZW50dWF0ZWRfY291bnQ6IGludCA9IDAKCiAgICBkZWYgZWxpZ2libGUoc2VsZiwgY2hhcmFjdGVyOiBzdHIpIC0+IGJvb2w6CiAgICAgICAgcmV0dXJuIGNoYXJhY3Rlci5pc2FscGhhKCkKCiAgICBkZWYgZmVlZChzZWxmLCBjaGFyYWN0ZXI6IHN0cikgLT4gTm9uZToKICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQgKz0gMQoKICAgICAgICBpZiBpc19hY2NlbnR1YXRlZChjaGFyYWN0ZXIpOgogICAgICAgICAgICBzZWxmLl9hY2NlbnR1YXRlZF9jb3VudCArPSAxCgogICAgZGVmIHJlc2V0KHNlbGYpIC0+IE5vbmU6ICAjIHByYWdtYTogbm8gY292ZXIKICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQgPSAwCiAgICAgICAgc2VsZi5fYWNjZW50dWF0ZWRfY291bnQgPSAwCgogICAgQHByb3BlcnR5CiAgICBkZWYgcmF0aW8oc2VsZikgLT4gZmxvYXQ6CiAgICAgICAgaWYgc2VsZi5fY2hhcmFjdGVyX2NvdW50ID09IDA6CiAgICAgICAgICAgIHJldHVybiAwLjAKICAgICAgICByYXRpb19vZl9hY2NlbnR1YXRpb246IGZsb2F0ID0gc2VsZi5fYWNjZW50dWF0ZWRfY291bnQgLyBzZWxmLl9jaGFyYWN0ZXJfY291bnQKICAgICAgICByZXR1cm4gcmF0aW9fb2ZfYWNjZW50dWF0aW9uIGlmIHJhdGlvX29mX2FjY2VudHVhdGlvbiA+PSAwLjM1IGVsc2UgMC4wCgoKY2xhc3MgVW5wcmludGFibGVQbHVnaW4oTWVzc0RldGVjdG9yUGx1Z2luKToKICAgIGRlZiBfX2luaXRfXyhzZWxmKSAtPiBOb25lOgogICAgICAgIHNlbGYuX3VucHJpbnRhYmxlX2NvdW50OiBpbnQgPSAwCiAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50OiBpbnQgPSAwCgogICAgZGVmIGVsaWdpYmxlKHNlbGYsIGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOgogICAgICAgIHJldHVybiBUcnVlCgogICAgZGVmIGZlZWQoc2VsZiwgY2hhcmFjdGVyOiBzdHIpIC0+IE5vbmU6CiAgICAgICAgaWYgaXNfdW5wcmludGFibGUoY2hhcmFjdGVyKToKICAgICAgICAgICAgc2VsZi5fdW5wcmludGFibGVfY291bnQgKz0gMQogICAgICAgIHNlbGYuX2NoYXJhY3Rlcl9jb3VudCArPSAxCgogICAgZGVmIHJlc2V0KHNlbGYpIC0+IE5vbmU6ICAjIHByYWdtYTogbm8gY292ZXIKICAgICAgICBzZWxmLl91bnByaW50YWJsZV9jb3VudCA9IDAKCiAgICBAcHJvcGVydHkKICAgIGRlZiByYXRpbyhzZWxmKSAtPiBmbG9hdDoKICAgICAgICBpZiBzZWxmLl9jaGFyYWN0ZXJfY291bnQgPT0gMDoKICAgICAgICAgICAgcmV0dXJuIDAuMAoKICAgICAgICByZXR1cm4gKHNlbGYuX3VucHJpbnRhYmxlX2NvdW50ICogOCkgLyBzZWxmLl9jaGFyYWN0ZXJfY291bnQKCgpjbGFzcyBTdXNwaWNpb3VzRHVwbGljYXRlQWNjZW50UGx1Z2luKE1lc3NEZXRlY3RvclBsdWdpbik6CiAgICBkZWYgX19pbml0X18oc2VsZikgLT4gTm9uZToKICAgICAgICBzZWxmLl9zdWNjZXNzaXZlX2NvdW50OiBpbnQgPSAwCiAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50OiBpbnQgPSAwCgogICAgICAgIHNlbGYuX2xhc3RfbGF0aW5fY2hhcmFjdGVyOiBPcHRpb25hbFtzdHJdID0gTm9uZQoKICAgIGRlZiBlbGlnaWJsZShzZWxmLCBjaGFyYWN0ZXI6IHN0cikgLT4gYm9vbDoKICAgICAgICByZXR1cm4gY2hhcmFjdGVyLmlzYWxwaGEoKSBhbmQgaXNfbGF0aW4oY2hhcmFjdGVyKQoKICAgIGRlZiBmZWVkKHNlbGYsIGNoYXJhY3Rlcjogc3RyKSAtPiBOb25lOgogICAgICAgIHNlbGYuX2NoYXJhY3Rlcl9jb3VudCArPSAxCiAgICAgICAgaWYgKAogICAgICAgICAgICBzZWxmLl9sYXN0X2xhdGluX2NoYXJhY3RlciBpcyBub3QgTm9uZQogICAgICAgICAgICBhbmQgaXNfYWNjZW50dWF0ZWQoY2hhcmFjdGVyKQogICAgICAgICAgICBhbmQgaXNfYWNjZW50dWF0ZWQoc2VsZi5fbGFzdF9sYXRpbl9jaGFyYWN0ZXIpCiAgICAgICAgKToKICAgICAgICAgICAgaWYgY2hhcmFjdGVyLmlzdXBwZXIoKSBhbmQgc2VsZi5fbGFzdF9sYXRpbl9jaGFyYWN0ZXIuaXN1cHBlcigpOgogICAgICAgICAgICAgICAgc2VsZi5fc3VjY2Vzc2l2ZV9jb3VudCArPSAxCiAgICAgICAgICAgICMgV29yc2UgaWYgaXRzIHRoZSBzYW1lIGNoYXIgZHVwbGljYXRlZCB3aXRoIGRpZmZlcmVudCBhY2NlbnQuCiAgICAgICAgICAgIGlmIHJlbW92ZV9hY2NlbnQoY2hhcmFjdGVyKSA9PSByZW1vdmVfYWNjZW50KHNlbGYuX2xhc3RfbGF0aW5fY2hhcmFjdGVyKToKICAgICAgICAgICAgICAgIHNlbGYuX3N1Y2Nlc3NpdmVfY291bnQgKz0gMQogICAgICAgIHNlbGYuX2xhc3RfbGF0aW5fY2hhcmFjdGVyID0gY2hhcmFjdGVyCgogICAgZGVmIHJlc2V0KHNlbGYpIC0+IE5vbmU6ICAjIHByYWdtYTogbm8gY292ZXIKICAgICAgICBzZWxmLl9zdWNjZXNzaXZlX2NvdW50ID0gMAogICAgICAgIHNlbGYuX2NoYXJhY3Rlcl9jb3VudCA9IDAKICAgICAgICBzZWxmLl9sYXN0X2xhdGluX2NoYXJhY3RlciA9IE5vbmUKCiAgICBAcHJvcGVydHkKICAgIGRlZiByYXRpbyhzZWxmKSAtPiBmbG9hdDoKICAgICAgICBpZiBzZWxmLl9jaGFyYWN0ZXJfY291bnQgPT0gMDoKICAgICAgICAgICAgcmV0dXJuIDAuMAoKICAgICAgICByZXR1cm4gKHNlbGYuX3N1Y2Nlc3NpdmVfY291bnQgKiAyKSAvIHNlbGYuX2NoYXJhY3Rlcl9jb3VudAoKCmNsYXNzIFN1c3BpY2lvdXNSYW5nZShNZXNzRGV0ZWN0b3JQbHVnaW4pOgogICAgZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgc2VsZi5fc3VzcGljaW91c19zdWNjZXNzaXZlX3JhbmdlX2NvdW50OiBpbnQgPSAwCiAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50OiBpbnQgPSAwCiAgICAgICAgc2VsZi5fbGFzdF9wcmludGFibGVfc2VlbjogT3B0aW9uYWxbc3RyXSA9IE5vbmUKCiAgICBkZWYgZWxpZ2libGUoc2VsZiwgY2hhcmFjdGVyOiBzdHIpIC0+IGJvb2w6CiAgICAgICAgcmV0dXJuIGNoYXJhY3Rlci5pc3ByaW50YWJsZSgpCgogICAgZGVmIGZlZWQoc2VsZiwgY2hhcmFjdGVyOiBzdHIpIC0+IE5vbmU6CiAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50ICs9IDEKCiAgICAgICAgaWYgKAogICAgICAgICAgICBjaGFyYWN0ZXIuaXNzcGFjZSgpCiAgICAgICAgICAgIG9yIGlzX3B1bmN0dWF0aW9uKGNoYXJhY3RlcikKICAgICAgICAgICAgb3IgY2hhcmFjdGVyIGluIENPTU1PTl9TQUZFX0FTQ0lJX0NIQVJBQ1RFUlMKICAgICAgICApOgogICAgICAgICAgICBzZWxmLl9sYXN0X3ByaW50YWJsZV9zZWVuID0gTm9uZQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgaWYgc2VsZi5fbGFzdF9wcmludGFibGVfc2VlbiBpcyBOb25lOgogICAgICAgICAgICBzZWxmLl9sYXN0X3ByaW50YWJsZV9zZWVuID0gY2hhcmFjdGVyCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICB1bmljb2RlX3JhbmdlX2E6IE9wdGlvbmFsW3N0cl0gPSB1bmljb2RlX3JhbmdlKHNlbGYuX2xhc3RfcHJpbnRhYmxlX3NlZW4pCiAgICAgICAgdW5pY29kZV9yYW5nZV9iOiBPcHRpb25hbFtzdHJdID0gdW5pY29kZV9yYW5nZShjaGFyYWN0ZXIpCgogICAgICAgIGlmIGlzX3N1c3BpY2lvdXNseV9zdWNjZXNzaXZlX3JhbmdlKHVuaWNvZGVfcmFuZ2VfYSwgdW5pY29kZV9yYW5nZV9iKToKICAgICAgICAgICAgc2VsZi5fc3VzcGljaW91c19zdWNjZXNzaXZlX3JhbmdlX2NvdW50ICs9IDEKCiAgICAgICAgc2VsZi5fbGFzdF9wcmludGFibGVfc2VlbiA9IGNoYXJhY3RlcgoKICAgIGRlZiByZXNldChzZWxmKSAtPiBOb25lOiAgIyBwcmFnbWE6IG5vIGNvdmVyCiAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50ID0gMAogICAgICAgIHNlbGYuX3N1c3BpY2lvdXNfc3VjY2Vzc2l2ZV9yYW5nZV9jb3VudCA9IDAKICAgICAgICBzZWxmLl9sYXN0X3ByaW50YWJsZV9zZWVuID0gTm9uZQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIHJhdGlvKHNlbGYpIC0+IGZsb2F0OgogICAgICAgIGlmIHNlbGYuX2NoYXJhY3Rlcl9jb3VudCA9PSAwOgogICAgICAgICAgICByZXR1cm4gMC4wCgogICAgICAgIHJhdGlvX29mX3N1c3BpY2lvdXNfcmFuZ2VfdXNhZ2U6IGZsb2F0ID0gKAogICAgICAgICAgICBzZWxmLl9zdXNwaWNpb3VzX3N1Y2Nlc3NpdmVfcmFuZ2VfY291bnQgKiAyCiAgICAgICAgKSAvIHNlbGYuX2NoYXJhY3Rlcl9jb3VudAoKICAgICAgICBpZiByYXRpb19vZl9zdXNwaWNpb3VzX3JhbmdlX3VzYWdlIDwgMC4xOgogICAgICAgICAgICByZXR1cm4gMC4wCgogICAgICAgIHJldHVybiByYXRpb19vZl9zdXNwaWNpb3VzX3JhbmdlX3VzYWdlCgoKY2xhc3MgU3VwZXJXZWlyZFdvcmRQbHVnaW4oTWVzc0RldGVjdG9yUGx1Z2luKToKICAgIGRlZiBfX2luaXRfXyhzZWxmKSAtPiBOb25lOgogICAgICAgIHNlbGYuX3dvcmRfY291bnQ6IGludCA9IDAKICAgICAgICBzZWxmLl9iYWRfd29yZF9jb3VudDogaW50ID0gMAogICAgICAgIHNlbGYuX2ZvcmVpZ25fbG9uZ19jb3VudDogaW50ID0gMAoKICAgICAgICBzZWxmLl9pc19jdXJyZW50X3dvcmRfYmFkOiBib29sID0gRmFsc2UKICAgICAgICBzZWxmLl9mb3JlaWduX2xvbmdfd2F0Y2g6IGJvb2wgPSBGYWxzZQoKICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQ6IGludCA9IDAKICAgICAgICBzZWxmLl9iYWRfY2hhcmFjdGVyX2NvdW50OiBpbnQgPSAwCgogICAgICAgIHNlbGYuX2J1ZmZlcjogc3RyID0gXCJcIgogICAgICAgIHNlbGYuX2J1ZmZlcl9hY2NlbnRfY291bnQ6IGludCA9IDAKCiAgICBkZWYgZWxpZ2libGUoc2VsZiwgY2hhcmFjdGVyOiBzdHIpIC0+IGJvb2w6CiAgICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYgZmVlZChzZWxmLCBjaGFyYWN0ZXI6IHN0cikgLT4gTm9uZToKICAgICAgICBpZiBjaGFyYWN0ZXIuaXNhbHBoYSgpOgogICAgICAgICAgICBzZWxmLl9idWZmZXIgKz0gY2hhcmFjdGVyCiAgICAgICAgICAgIGlmIGlzX2FjY2VudHVhdGVkKGNoYXJhY3Rlcik6CiAgICAgICAgICAgICAgICBzZWxmLl9idWZmZXJfYWNjZW50X2NvdW50ICs9IDEKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgc2VsZi5fZm9yZWlnbl9sb25nX3dhdGNoIGlzIEZhbHNlCiAgICAgICAgICAgICAgICBhbmQgKGlzX2xhdGluKGNoYXJhY3RlcikgaXMgRmFsc2Ugb3IgaXNfYWNjZW50dWF0ZWQoY2hhcmFjdGVyKSkKICAgICAgICAgICAgICAgIGFuZCBpc19jamsoY2hhcmFjdGVyKSBpcyBGYWxzZQogICAgICAgICAgICAgICAgYW5kIGlzX2hhbmd1bChjaGFyYWN0ZXIpIGlzIEZhbHNlCiAgICAgICAgICAgICAgICBhbmQgaXNfa2F0YWthbmEoY2hhcmFjdGVyKSBpcyBGYWxzZQogICAgICAgICAgICAgICAgYW5kIGlzX2hpcmFnYW5hKGNoYXJhY3RlcikgaXMgRmFsc2UKICAgICAgICAgICAgICAgIGFuZCBpc190aGFpKGNoYXJhY3RlcikgaXMgRmFsc2UKICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgIHNlbGYuX2ZvcmVpZ25fbG9uZ193YXRjaCA9IFRydWUKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgaWYgbm90IHNlbGYuX2J1ZmZlcjoKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgaWYgKAogICAgICAgICAgICBjaGFyYWN0ZXIuaXNzcGFjZSgpIG9yIGlzX3B1bmN0dWF0aW9uKGNoYXJhY3Rlcikgb3IgaXNfc2VwYXJhdG9yKGNoYXJhY3RlcikKICAgICAgICApIGFuZCBzZWxmLl9idWZmZXI6CiAgICAgICAgICAgIHNlbGYuX3dvcmRfY291bnQgKz0gMQogICAgICAgICAgICBidWZmZXJfbGVuZ3RoOiBpbnQgPSBsZW4oc2VsZi5fYnVmZmVyKQoKICAgICAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50ICs9IGJ1ZmZlcl9sZW5ndGgKCiAgICAgICAgICAgIGlmIGJ1ZmZlcl9sZW5ndGggPj0gNDoKICAgICAgICAgICAgICAgIGlmIHNlbGYuX2J1ZmZlcl9hY2NlbnRfY291bnQgLyBidWZmZXJfbGVuZ3RoID4gMC4zNDoKICAgICAgICAgICAgICAgICAgICBzZWxmLl9pc19jdXJyZW50X3dvcmRfYmFkID0gVHJ1ZQogICAgICAgICAgICAgICAgIyBXb3JkL0J1ZmZlciBlbmRpbmcgd2l0aCBhIHVwcGVyIGNhc2UgYWNjZW50dWF0ZWQgbGV0dGVyIGFyZSBzbyByYXJlLAogICAgICAgICAgICAgICAgIyB0aGF0IHdlIHdpbGwgY29uc2lkZXIgdGhlbSBhbGwgYXMgc3VzcGljaW91cy4gU2FtZSB3ZWlnaHQgYXMgZm9yZWlnbl9sb25nIHN1c3BpY2lvdXMuCiAgICAgICAgICAgICAgICBpZiBpc19hY2NlbnR1YXRlZChzZWxmLl9idWZmZXJbLTFdKSBhbmQgc2VsZi5fYnVmZmVyWy0xXS5pc3VwcGVyKCk6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZm9yZWlnbl9sb25nX2NvdW50ICs9IDEKICAgICAgICAgICAgICAgICAgICBzZWxmLl9pc19jdXJyZW50X3dvcmRfYmFkID0gVHJ1ZQogICAgICAgICAgICBpZiBidWZmZXJfbGVuZ3RoID49IDI0IGFuZCBzZWxmLl9mb3JlaWduX2xvbmdfd2F0Y2g6CiAgICAgICAgICAgICAgICBzZWxmLl9mb3JlaWduX2xvbmdfY291bnQgKz0gMQogICAgICAgICAgICAgICAgc2VsZi5faXNfY3VycmVudF93b3JkX2JhZCA9IFRydWUKCiAgICAgICAgICAgIGlmIHNlbGYuX2lzX2N1cnJlbnRfd29yZF9iYWQ6CiAgICAgICAgICAgICAgICBzZWxmLl9iYWRfd29yZF9jb3VudCArPSAxCiAgICAgICAgICAgICAgICBzZWxmLl9iYWRfY2hhcmFjdGVyX2NvdW50ICs9IGxlbihzZWxmLl9idWZmZXIpCiAgICAgICAgICAgICAgICBzZWxmLl9pc19jdXJyZW50X3dvcmRfYmFkID0gRmFsc2UKCiAgICAgICAgICAgIHNlbGYuX2ZvcmVpZ25fbG9uZ193YXRjaCA9IEZhbHNlCiAgICAgICAgICAgIHNlbGYuX2J1ZmZlciA9IFwiXCIKICAgICAgICAgICAgc2VsZi5fYnVmZmVyX2FjY2VudF9jb3VudCA9IDAKICAgICAgICBlbGlmICgKICAgICAgICAgICAgY2hhcmFjdGVyIG5vdCBpbiB7XCI8XCIsIFwiPlwiLCBcIi1cIiwgXCI9XCIsIFwiflwiLCBcInxcIiwgXCJfXCJ9CiAgICAgICAgICAgIGFuZCBjaGFyYWN0ZXIuaXNkaWdpdCgpIGlzIEZhbHNlCiAgICAgICAgICAgIGFuZCBpc19zeW1ib2woY2hhcmFjdGVyKQogICAgICAgICk6CiAgICAgICAgICAgIHNlbGYuX2lzX2N1cnJlbnRfd29yZF9iYWQgPSBUcnVlCiAgICAgICAgICAgIHNlbGYuX2J1ZmZlciArPSBjaGFyYWN0ZXIKCiAgICBkZWYgcmVzZXQoc2VsZikgLT4gTm9uZTogICMgcHJhZ21hOiBubyBjb3ZlcgogICAgICAgIHNlbGYuX2J1ZmZlciA9IFwiXCIKICAgICAgICBzZWxmLl9pc19jdXJyZW50X3dvcmRfYmFkID0gRmFsc2UKICAgICAgICBzZWxmLl9mb3JlaWduX2xvbmdfd2F0Y2ggPSBGYWxzZQogICAgICAgIHNlbGYuX2JhZF93b3JkX2NvdW50ID0gMAogICAgICAgIHNlbGYuX3dvcmRfY291bnQgPSAwCiAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50ID0gMAogICAgICAgIHNlbGYuX2JhZF9jaGFyYWN0ZXJfY291bnQgPSAwCiAgICAgICAgc2VsZi5fZm9yZWlnbl9sb25nX2NvdW50ID0gMAoKICAgIEBwcm9wZXJ0eQogICAgZGVmIHJhdGlvKHNlbGYpIC0+IGZsb2F0OgogICAgICAgIGlmIHNlbGYuX3dvcmRfY291bnQgPD0gMTAgYW5kIHNlbGYuX2ZvcmVpZ25fbG9uZ19jb3VudCA9PSAwOgogICAgICAgICAgICByZXR1cm4gMC4wCgogICAgICAgIHJldHVybiBzZWxmLl9iYWRfY2hhcmFjdGVyX2NvdW50IC8gc2VsZi5fY2hhcmFjdGVyX2NvdW50CgoKY2xhc3MgQ2prSW52YWxpZFN0b3BQbHVnaW4oTWVzc0RldGVjdG9yUGx1Z2luKToKICAgIFwiXCJcIgogICAgR0IoQ2hpbmVzZSkgYmFzZWQgZW5jb2Rpbmcgb2Z0ZW4gcmVuZGVyIHRoZSBzdG9wIGluY29ycmVjdGx5IHdoZW4gdGhlIGNvbnRlbnQgZG9lcyBub3QgZml0IGFuZAogICAgY2FuIGJlIGVhc2lseSBkZXRlY3RlZC4gU2VhcmNoaW5nIGZvciB0aGUgb3ZlcnVzZSBvZiAn5LiFJyBhbmQgJ+S4hCcuCiAgICBcIlwiXCIKCiAgICBkZWYgX19pbml0X18oc2VsZikgLT4gTm9uZToKICAgICAgICBzZWxmLl93cm9uZ19zdG9wX2NvdW50OiBpbnQgPSAwCiAgICAgICAgc2VsZi5fY2prX2NoYXJhY3Rlcl9jb3VudDogaW50ID0gMAoKICAgIGRlZiBlbGlnaWJsZShzZWxmLCBjaGFyYWN0ZXI6IHN0cikgLT4gYm9vbDoKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIGRlZiBmZWVkKHNlbGYsIGNoYXJhY3Rlcjogc3RyKSAtPiBOb25lOgogICAgICAgIGlmIGNoYXJhY3RlciBpbiB7XCLkuIVcIiwgXCLkuIRcIn06CiAgICAgICAgICAgIHNlbGYuX3dyb25nX3N0b3BfY291bnQgKz0gMQogICAgICAgICAgICByZXR1cm4KICAgICAgICBpZiBpc19jamsoY2hhcmFjdGVyKToKICAgICAgICAgICAgc2VsZi5fY2prX2NoYXJhY3Rlcl9jb3VudCArPSAxCgogICAgZGVmIHJlc2V0KHNlbGYpIC0+IE5vbmU6ICAjIHByYWdtYTogbm8gY292ZXIKICAgICAgICBzZWxmLl93cm9uZ19zdG9wX2NvdW50ID0gMAogICAgICAgIHNlbGYuX2Nqa19jaGFyYWN0ZXJfY291bnQgPSAwCgogICAgQHByb3BlcnR5CiAgICBkZWYgcmF0aW8oc2VsZikgLT4gZmxvYXQ6CiAgICAgICAgaWYgc2VsZi5fY2prX2NoYXJhY3Rlcl9jb3VudCA8IDE2OgogICAgICAgICAgICByZXR1cm4gMC4wCiAgICAgICAgcmV0dXJuIHNlbGYuX3dyb25nX3N0b3BfY291bnQgLyBzZWxmLl9jamtfY2hhcmFjdGVyX2NvdW50CgoKY2xhc3MgQXJjaGFpY1VwcGVyTG93ZXJQbHVnaW4oTWVzc0RldGVjdG9yUGx1Z2luKToKICAgIGRlZiBfX2luaXRfXyhzZWxmKSAtPiBOb25lOgogICAgICAgIHNlbGYuX2J1ZjogYm9vbCA9IEZhbHNlCgogICAgICAgIHNlbGYuX2NoYXJhY3Rlcl9jb3VudF9zaW5jZV9sYXN0X3NlcDogaW50ID0gMAoKICAgICAgICBzZWxmLl9zdWNjZXNzaXZlX3VwcGVyX2xvd2VyX2NvdW50OiBpbnQgPSAwCiAgICAgICAgc2VsZi5fc3VjY2Vzc2l2ZV91cHBlcl9sb3dlcl9jb3VudF9maW5hbDogaW50ID0gMAoKICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQ6IGludCA9IDAKCiAgICAgICAgc2VsZi5fbGFzdF9hbHBoYV9zZWVuOiBPcHRpb25hbFtzdHJdID0gTm9uZQogICAgICAgIHNlbGYuX2N1cnJlbnRfYXNjaWlfb25seTogYm9vbCA9IFRydWUKCiAgICBkZWYgZWxpZ2libGUoc2VsZiwgY2hhcmFjdGVyOiBzdHIpIC0+IGJvb2w6CiAgICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYgZmVlZChzZWxmLCBjaGFyYWN0ZXI6IHN0cikgLT4gTm9uZToKICAgICAgICBpc19jb25jZXJuZWQgPSBjaGFyYWN0ZXIuaXNhbHBoYSgpIGFuZCBpc19jYXNlX3ZhcmlhYmxlKGNoYXJhY3RlcikKICAgICAgICBjaHVua19zZXAgPSBpc19jb25jZXJuZWQgaXMgRmFsc2UKCiAgICAgICAgaWYgY2h1bmtfc2VwIGFuZCBzZWxmLl9jaGFyYWN0ZXJfY291bnRfc2luY2VfbGFzdF9zZXAgPiAwOgogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnRfc2luY2VfbGFzdF9zZXAgPD0gNjQKICAgICAgICAgICAgICAgIGFuZCBjaGFyYWN0ZXIuaXNkaWdpdCgpIGlzIEZhbHNlCiAgICAgICAgICAgICAgICBhbmQgc2VsZi5fY3VycmVudF9hc2NpaV9vbmx5IGlzIEZhbHNlCiAgICAgICAgICAgICk6CiAgICAgICAgICAgICAgICBzZWxmLl9zdWNjZXNzaXZlX3VwcGVyX2xvd2VyX2NvdW50X2ZpbmFsICs9ICgKICAgICAgICAgICAgICAgICAgICBzZWxmLl9zdWNjZXNzaXZlX3VwcGVyX2xvd2VyX2NvdW50CiAgICAgICAgICAgICAgICApCgogICAgICAgICAgICBzZWxmLl9zdWNjZXNzaXZlX3VwcGVyX2xvd2VyX2NvdW50ID0gMAogICAgICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnRfc2luY2VfbGFzdF9zZXAgPSAwCiAgICAgICAgICAgIHNlbGYuX2xhc3RfYWxwaGFfc2VlbiA9IE5vbmUKICAgICAgICAgICAgc2VsZi5fYnVmID0gRmFsc2UKICAgICAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50ICs9IDEKICAgICAgICAgICAgc2VsZi5fY3VycmVudF9hc2NpaV9vbmx5ID0gVHJ1ZQoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGlmIHNlbGYuX2N1cnJlbnRfYXNjaWlfb25seSBpcyBUcnVlIGFuZCBpc19hc2NpaShjaGFyYWN0ZXIpIGlzIEZhbHNlOgogICAgICAgICAgICBzZWxmLl9jdXJyZW50X2FzY2lpX29ubHkgPSBGYWxzZQoKICAgICAgICBpZiBzZWxmLl9sYXN0X2FscGhhX3NlZW4gaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGlmIChjaGFyYWN0ZXIuaXN1cHBlcigpIGFuZCBzZWxmLl9sYXN0X2FscGhhX3NlZW4uaXNsb3dlcigpKSBvciAoCiAgICAgICAgICAgICAgICBjaGFyYWN0ZXIuaXNsb3dlcigpIGFuZCBzZWxmLl9sYXN0X2FscGhhX3NlZW4uaXN1cHBlcigpCiAgICAgICAgICAgICk6CiAgICAgICAgICAgICAgICBpZiBzZWxmLl9idWYgaXMgVHJ1ZToKICAgICAgICAgICAgICAgICAgICBzZWxmLl9zdWNjZXNzaXZlX3VwcGVyX2xvd2VyX2NvdW50ICs9IDIKICAgICAgICAgICAgICAgICAgICBzZWxmLl9idWYgPSBGYWxzZQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBzZWxmLl9idWYgPSBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLl9idWYgPSBGYWxzZQoKICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQgKz0gMQogICAgICAgIHNlbGYuX2NoYXJhY3Rlcl9jb3VudF9zaW5jZV9sYXN0X3NlcCArPSAxCiAgICAgICAgc2VsZi5fbGFzdF9hbHBoYV9zZWVuID0gY2hhcmFjdGVyCgogICAgZGVmIHJlc2V0KHNlbGYpIC0+IE5vbmU6ICAjIHByYWdtYTogbm8gY292ZXIKICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQgPSAwCiAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50X3NpbmNlX2xhc3Rfc2VwID0gMAogICAgICAgIHNlbGYuX3N1Y2Nlc3NpdmVfdXBwZXJfbG93ZXJfY291bnQgPSAwCiAgICAgICAgc2VsZi5fc3VjY2Vzc2l2ZV91cHBlcl9sb3dlcl9jb3VudF9maW5hbCA9IDAKICAgICAgICBzZWxmLl9sYXN0X2FscGhhX3NlZW4gPSBOb25lCiAgICAgICAgc2VsZi5fYnVmID0gRmFsc2UKICAgICAgICBzZWxmLl9jdXJyZW50X2FzY2lpX29ubHkgPSBUcnVlCgogICAgQHByb3BlcnR5CiAgICBkZWYgcmF0aW8oc2VsZikgLT4gZmxvYXQ6CiAgICAgICAgaWYgc2VsZi5fY2hhcmFjdGVyX2NvdW50ID09IDA6CiAgICAgICAgICAgIHJldHVybiAwLjAKCiAgICAgICAgcmV0dXJuIHNlbGYuX3N1Y2Nlc3NpdmVfdXBwZXJfbG93ZXJfY291bnRfZmluYWwgLyBzZWxmLl9jaGFyYWN0ZXJfY291bnQKCgpAbHJ1X2NhY2hlKG1heHNpemU9MTAyNCkKZGVmIGlzX3N1c3BpY2lvdXNseV9zdWNjZXNzaXZlX3JhbmdlKAogICAgdW5pY29kZV9yYW5nZV9hOiBPcHRpb25hbFtzdHJdLCB1bmljb2RlX3JhbmdlX2I6IE9wdGlvbmFsW3N0cl0KKSAtPiBib29sOgogICAgXCJcIlwiCiAgICBEZXRlcm1pbmUgaWYgdHdvIFVuaWNvZGUgcmFuZ2Ugc2VlbiBuZXh0IHRvIGVhY2ggb3RoZXIgY2FuIGJlIGNvbnNpZGVyZWQgYXMgc3VzcGljaW91cy4KICAgIFwiXCJcIgogICAgaWYgdW5pY29kZV9yYW5nZV9hIGlzIE5vbmUgb3IgdW5pY29kZV9yYW5nZV9iIGlzIE5vbmU6CiAgICAgICAgcmV0dXJuIFRydWUKCiAgICBpZiB1bmljb2RlX3JhbmdlX2EgPT0gdW5pY29kZV9yYW5nZV9iOgogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGlmIFwiTGF0aW5cIiBpbiB1bmljb2RlX3JhbmdlX2EgYW5kIFwiTGF0aW5cIiBpbiB1bmljb2RlX3JhbmdlX2I6CiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgaWYgXCJFbW90aWNvbnNcIiBpbiB1bmljb2RlX3JhbmdlX2Egb3IgXCJFbW90aWNvbnNcIiBpbiB1bmljb2RlX3JhbmdlX2I6CiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgIyBMYXRpbiBjaGFyYWN0ZXJzIGNhbiBiZSBhY2NvbXBhbmllZCB3aXRoIGEgY29tYmluaW5nIGRpYWNyaXRpY2FsIG1hcmsKICAgICMgZWcuIFZpZXRuYW1lc2UuCiAgICBpZiAoXCJMYXRpblwiIGluIHVuaWNvZGVfcmFuZ2VfYSBvciBcIkxhdGluXCIgaW4gdW5pY29kZV9yYW5nZV9iKSBhbmQgKAogICAgICAgIFwiQ29tYmluaW5nXCIgaW4gdW5pY29kZV9yYW5nZV9hIG9yIFwiQ29tYmluaW5nXCIgaW4gdW5pY29kZV9yYW5nZV9iCiAgICApOgogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGtleXdvcmRzX3JhbmdlX2EsIGtleXdvcmRzX3JhbmdlX2IgPSB1bmljb2RlX3JhbmdlX2Euc3BsaXQoCiAgICAgICAgXCIgXCIKICAgICksIHVuaWNvZGVfcmFuZ2VfYi5zcGxpdChcIiBcIikKCiAgICBmb3IgZWwgaW4ga2V5d29yZHNfcmFuZ2VfYToKICAgICAgICBpZiBlbCBpbiBVTklDT0RFX1NFQ09OREFSWV9SQU5HRV9LRVlXT1JEOgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIGlmIGVsIGluIGtleXdvcmRzX3JhbmdlX2I6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICMgSmFwYW5lc2UgRXhjZXB0aW9uCiAgICByYW5nZV9hX2pwX2NoYXJzLCByYW5nZV9iX2pwX2NoYXJzID0gKAogICAgICAgIHVuaWNvZGVfcmFuZ2VfYQogICAgICAgIGluICgKICAgICAgICAgICAgXCJIaXJhZ2FuYVwiLAogICAgICAgICAgICBcIkthdGFrYW5hXCIsCiAgICAgICAgKSwKICAgICAgICB1bmljb2RlX3JhbmdlX2IgaW4gKFwiSGlyYWdhbmFcIiwgXCJLYXRha2FuYVwiKSwKICAgICkKICAgIGlmIChyYW5nZV9hX2pwX2NoYXJzIG9yIHJhbmdlX2JfanBfY2hhcnMpIGFuZCAoCiAgICAgICAgXCJDSktcIiBpbiB1bmljb2RlX3JhbmdlX2Egb3IgXCJDSktcIiBpbiB1bmljb2RlX3JhbmdlX2IKICAgICk6CiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICBpZiByYW5nZV9hX2pwX2NoYXJzIGFuZCByYW5nZV9iX2pwX2NoYXJzOgogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGlmIFwiSGFuZ3VsXCIgaW4gdW5pY29kZV9yYW5nZV9hIG9yIFwiSGFuZ3VsXCIgaW4gdW5pY29kZV9yYW5nZV9iOgogICAgICAgIGlmIFwiQ0pLXCIgaW4gdW5pY29kZV9yYW5nZV9hIG9yIFwiQ0pLXCIgaW4gdW5pY29kZV9yYW5nZV9iOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICBpZiB1bmljb2RlX3JhbmdlX2EgPT0gXCJCYXNpYyBMYXRpblwiIG9yIHVuaWNvZGVfcmFuZ2VfYiA9PSBcIkJhc2ljIExhdGluXCI6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICMgQ2hpbmVzZS9KYXBhbmVzZSB1c2UgZGVkaWNhdGVkIHJhbmdlIGZvciBwdW5jdHVhdGlvbiBhbmQvb3Igc2VwYXJhdG9ycy4KICAgIGlmIChcIkNKS1wiIGluIHVuaWNvZGVfcmFuZ2VfYSBvciBcIkNKS1wiIGluIHVuaWNvZGVfcmFuZ2VfYikgb3IgKAogICAgICAgIHVuaWNvZGVfcmFuZ2VfYSBpbiBbXCJLYXRha2FuYVwiLCBcIkhpcmFnYW5hXCJdCiAgICAgICAgYW5kIHVuaWNvZGVfcmFuZ2VfYiBpbiBbXCJLYXRha2FuYVwiLCBcIkhpcmFnYW5hXCJdCiAgICApOgogICAgICAgIGlmIFwiUHVuY3R1YXRpb25cIiBpbiB1bmljb2RlX3JhbmdlX2Egb3IgXCJQdW5jdHVhdGlvblwiIGluIHVuaWNvZGVfcmFuZ2VfYjoKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgaWYgXCJGb3Jtc1wiIGluIHVuaWNvZGVfcmFuZ2VfYSBvciBcIkZvcm1zXCIgaW4gdW5pY29kZV9yYW5nZV9iOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICByZXR1cm4gVHJ1ZQoKCkBscnVfY2FjaGUobWF4c2l6ZT0yMDQ4KQpkZWYgbWVzc19yYXRpbygKICAgIGRlY29kZWRfc2VxdWVuY2U6IHN0ciwgbWF4aW11bV90aHJlc2hvbGQ6IGZsb2F0ID0gMC4yLCBkZWJ1ZzogYm9vbCA9IEZhbHNlCikgLT4gZmxvYXQ6CiAgICBcIlwiXCIKICAgIENvbXB1dGUgYSBtZXNzIHJhdGlvIGdpdmVuIGEgZGVjb2RlZCBieXRlcyBzZXF1ZW5jZS4gVGhlIG1heGltdW0gdGhyZXNob2xkIGRvZXMgc3RvcCB0aGUgY29tcHV0YXRpb24gZWFybGllci4KICAgIFwiXCJcIgoKICAgIGRldGVjdG9yczogTGlzdFtNZXNzRGV0ZWN0b3JQbHVnaW5dID0gWwogICAgICAgIG1kX2NsYXNzKCkgZm9yIG1kX2NsYXNzIGluIE1lc3NEZXRlY3RvclBsdWdpbi5fX3N1YmNsYXNzZXNfXygpCiAgICBdCgogICAgbGVuZ3RoOiBpbnQgPSBsZW4oZGVjb2RlZF9zZXF1ZW5jZSkgKyAxCgogICAgbWVhbl9tZXNzX3JhdGlvOiBmbG9hdCA9IDAuMAoKICAgIGlmIGxlbmd0aCA8IDUxMjoKICAgICAgICBpbnRlcm1lZGlhcnlfbWVhbl9tZXNzX3JhdGlvX2NhbGM6IGludCA9IDMyCiAgICBlbGlmIGxlbmd0aCA8PSAxMDI0OgogICAgICAgIGludGVybWVkaWFyeV9tZWFuX21lc3NfcmF0aW9fY2FsYyA9IDY0CiAgICBlbHNlOgogICAgICAgIGludGVybWVkaWFyeV9tZWFuX21lc3NfcmF0aW9fY2FsYyA9IDEyOAoKICAgIGZvciBjaGFyYWN0ZXIsIGluZGV4IGluIHppcChkZWNvZGVkX3NlcXVlbmNlICsgXCJcXG5cIiwgcmFuZ2UobGVuZ3RoKSk6CiAgICAgICAgZm9yIGRldGVjdG9yIGluIGRldGVjdG9yczoKICAgICAgICAgICAgaWYgZGV0ZWN0b3IuZWxpZ2libGUoY2hhcmFjdGVyKToKICAgICAgICAgICAgICAgIGRldGVjdG9yLmZlZWQoY2hhcmFjdGVyKQoKICAgICAgICBpZiAoCiAgICAgICAgICAgIGluZGV4ID4gMCBhbmQgaW5kZXggJSBpbnRlcm1lZGlhcnlfbWVhbl9tZXNzX3JhdGlvX2NhbGMgPT0gMAogICAgICAgICkgb3IgaW5kZXggPT0gbGVuZ3RoIC0gMToKICAgICAgICAgICAgbWVhbl9tZXNzX3JhdGlvID0gc3VtKGR0LnJhdGlvIGZvciBkdCBpbiBkZXRlY3RvcnMpCgogICAgICAgICAgICBpZiBtZWFuX21lc3NfcmF0aW8gPj0gbWF4aW11bV90aHJlc2hvbGQ6CiAgICAgICAgICAgICAgICBicmVhawoKICAgIGlmIGRlYnVnOgogICAgICAgIGZvciBkdCBpbiBkZXRlY3RvcnM6ICAjIHByYWdtYTogbm9jb3ZlcgogICAgICAgICAgICBwcmludChkdC5fX2NsYXNzX18sIGR0LnJhdGlvKQoKICAgIHJldHVybiByb3VuZChtZWFuX21lc3NfcmF0aW8sIDMpCgoiIiIKbW9kdWxlX2RpY3RbImNoYXJzZXRfbm9ybWFsaXplciIrb3Muc2VwKyJfX2luaXRfXy5weSJdPSIiIgojIC0qLSBjb2Rpbmc6IHV0Zl84IC0qLQpcIlwiXCIKQ2hhcnNldC1Ob3JtYWxpemVyCn5+fn5+fn5+fn5+fn5+ClRoZSBSZWFsIEZpcnN0IFVuaXZlcnNhbCBDaGFyc2V0IERldGVjdG9yLgpBIGxpYnJhcnkgdGhhdCBoZWxwcyB5b3UgcmVhZCB0ZXh0IGZyb20gYW4gdW5rbm93biBjaGFyc2V0IGVuY29kaW5nLgpNb3RpdmF0ZWQgYnkgY2hhcmRldCwgVGhpcyBwYWNrYWdlIGlzIHRyeWluZyB0byByZXNvbHZlIHRoZSBpc3N1ZSBieSB0YWtpbmcgYSBuZXcgYXBwcm9hY2guCkFsbCBJQU5BIGNoYXJhY3RlciBzZXQgbmFtZXMgZm9yIHdoaWNoIHRoZSBQeXRob24gY29yZSBsaWJyYXJ5IHByb3ZpZGVzIGNvZGVjcyBhcmUgc3VwcG9ydGVkLgoKQmFzaWMgdXNhZ2U6CiAgID4+PiBmcm9tIGNoYXJzZXRfbm9ybWFsaXplciBpbXBvcnQgZnJvbV9ieXRlcwogICA+Pj4gcmVzdWx0cyA9IGZyb21fYnl0ZXMoJ0LRgdC10LrQuCDRh9C+0LLQtdC6INC40LzQsCDQv9GA0LDQstC+INC90LAg0L7QsdGA0LDQt9C+0LLQsNC90LjQtS4gT9Cx0YDQsNC30L7QstCw0L3QuNC10YLQviEnLmVuY29kZSgndXRmXzgnKSkKICAgPj4+IGJlc3RfZ3Vlc3MgPSByZXN1bHRzLmJlc3QoKQogICA+Pj4gc3RyKGJlc3RfZ3Vlc3MpCiAgICdC0YHQtdC60Lgg0YfQvtCy0LXQuiDQuNC80LAg0L/RgNCw0LLQviDQvdCwINC+0LHRgNCw0LfQvtCy0LDQvdC40LUuIE/QsdGA0LDQt9C+0LLQsNC90LjQtdGC0L4hJwoKT3RoZXJzIG1ldGhvZHMgYW5kIHVzYWdlcyBhcmUgYXZhaWxhYmxlIC0gc2VlIHRoZSBmdWxsIGRvY3VtZW50YXRpb24KYXQgPGh0dHBzOi8vZ2l0aHViLmNvbS9PdXNyZXQvY2hhcnNldF9ub3JtYWxpemVyPi4KOmNvcHlyaWdodDogKGMpIDIwMjEgYnkgQWhtZWQgVEFIUkkKOmxpY2Vuc2U6IE1JVCwgc2VlIExJQ0VOU0UgZm9yIG1vcmUgZGV0YWlscy4KXCJcIlwiCmltcG9ydCBsb2dnaW5nCgpmcm9tIC5hcGkgaW1wb3J0IGZyb21fYnl0ZXMsIGZyb21fZnAsIGZyb21fcGF0aCwgbm9ybWFsaXplCmZyb20gLmxlZ2FjeSBpbXBvcnQgKAogICAgQ2hhcnNldERldGVjdG9yLAogICAgQ2hhcnNldERvY3RvciwKICAgIENoYXJzZXROb3JtYWxpemVyTWF0Y2gsCiAgICBDaGFyc2V0Tm9ybWFsaXplck1hdGNoZXMsCiAgICBkZXRlY3QsCikKZnJvbSAubW9kZWxzIGltcG9ydCBDaGFyc2V0TWF0Y2gsIENoYXJzZXRNYXRjaGVzCmZyb20gLnV0aWxzIGltcG9ydCBzZXRfbG9nZ2luZ19oYW5kbGVyCmZyb20gLnZlcnNpb24gaW1wb3J0IFZFUlNJT04sIF9fdmVyc2lvbl9fCgpfX2FsbF9fID0gKAogICAgXCJmcm9tX2ZwXCIsCiAgICBcImZyb21fcGF0aFwiLAogICAgXCJmcm9tX2J5dGVzXCIsCiAgICBcIm5vcm1hbGl6ZVwiLAogICAgXCJkZXRlY3RcIiwKICAgIFwiQ2hhcnNldE1hdGNoXCIsCiAgICBcIkNoYXJzZXRNYXRjaGVzXCIsCiAgICBcIkNoYXJzZXROb3JtYWxpemVyTWF0Y2hcIiwKICAgIFwiQ2hhcnNldE5vcm1hbGl6ZXJNYXRjaGVzXCIsCiAgICBcIkNoYXJzZXREZXRlY3RvclwiLAogICAgXCJDaGFyc2V0RG9jdG9yXCIsCiAgICBcIl9fdmVyc2lvbl9fXCIsCiAgICBcIlZFUlNJT05cIiwKICAgIFwic2V0X2xvZ2dpbmdfaGFuZGxlclwiLAopCgojIEF0dGFjaCBhIE51bGxIYW5kbGVyIHRvIHRoZSB0b3AgbGV2ZWwgbG9nZ2VyIGJ5IGRlZmF1bHQKIyBodHRwczovL2RvY3MucHl0aG9uLm9yZy8zLjMvaG93dG8vbG9nZ2luZy5odG1sI2NvbmZpZ3VyaW5nLWxvZ2dpbmctZm9yLWEtbGlicmFyeQoKbG9nZ2luZy5nZXRMb2dnZXIoXCJjaGFyc2V0X25vcm1hbGl6ZXJcIikuYWRkSGFuZGxlcihsb2dnaW5nLk51bGxIYW5kbGVyKCkpCgoiIiIKbW9kdWxlX2RpY3RbImNoYXJzZXRfbm9ybWFsaXplciIrb3Muc2VwKyJ1dGlscy5weSJdPSIiIgojIDwgaW5jbHVkZSAndW5pY29kZWRhdGEyLnB5JyA+Cgp0cnk6CiAgICAjIFdBUk5JTkc6IHVuaWNvZGVkYXRhMiBzdXBwb3J0IGlzIGdvaW5nIHRvIGJlIHJlbW92ZWQgaW4gMy4wCiAgICAjIFB5dGhvbiBpcyBxdWlja2x5IGNhdGNoaW5nIHVwLgogICAgaW1wb3J0IHVuaWNvZGVkYXRhMiBhcyB1bmljb2RlZGF0YQpleGNlcHQgSW1wb3J0RXJyb3I6CiAgICBpbXBvcnQgdW5pY29kZWRhdGEgICMgdHlwZTogaWdub3JlW25vLXJlZGVmXQoKaW1wb3J0IGltcG9ydGxpYgppbXBvcnQgbG9nZ2luZwpmcm9tIGNvZGVjcyBpbXBvcnQgSW5jcmVtZW50YWxEZWNvZGVyCmZyb20gZW5jb2RpbmdzLmFsaWFzZXMgaW1wb3J0IGFsaWFzZXMKZnJvbSBmdW5jdG9vbHMgaW1wb3J0IGxydV9jYWNoZQpmcm9tIHJlIGltcG9ydCBmaW5kYWxsCmZyb20gdHlwaW5nIGltcG9ydCBHZW5lcmF0b3IsIExpc3QsIE9wdGlvbmFsLCBTZXQsIFR1cGxlLCBVbmlvbgoKZnJvbSBfbXVsdGlieXRlY29kZWMgaW1wb3J0IE11bHRpYnl0ZUluY3JlbWVudGFsRGVjb2RlciAgIyB0eXBlOiBpZ25vcmUKCmZyb20gLmNvbnN0YW50IGltcG9ydCAoCiAgICBFTkNPRElOR19NQVJLUywKICAgIElBTkFfU1VQUE9SVEVEX1NJTUlMQVIsCiAgICBSRV9QT1NTSUJMRV9FTkNPRElOR19JTkRJQ0FUSU9OLAogICAgVU5JQ09ERV9SQU5HRVNfQ09NQklORUQsCiAgICBVTklDT0RFX1NFQ09OREFSWV9SQU5HRV9LRVlXT1JELAogICAgVVRGOF9NQVhJTUFMX0FMTE9DQVRJT04sCikKCgpAbHJ1X2NhY2hlKG1heHNpemU9VVRGOF9NQVhJTUFMX0FMTE9DQVRJT04pCmRlZiBpc19hY2NlbnR1YXRlZChjaGFyYWN0ZXI6IHN0cikgLT4gYm9vbDoKICAgIHRyeToKICAgICAgICBkZXNjcmlwdGlvbjogc3RyID0gdW5pY29kZWRhdGEubmFtZShjaGFyYWN0ZXIpCiAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICByZXR1cm4gRmFsc2UKICAgIHJldHVybiAoCiAgICAgICAgXCJXSVRIIEdSQVZFXCIgaW4gZGVzY3JpcHRpb24KICAgICAgICBvciBcIldJVEggQUNVVEVcIiBpbiBkZXNjcmlwdGlvbgogICAgICAgIG9yIFwiV0lUSCBDRURJTExBXCIgaW4gZGVzY3JpcHRpb24KICAgICAgICBvciBcIldJVEggRElBRVJFU0lTXCIgaW4gZGVzY3JpcHRpb24KICAgICAgICBvciBcIldJVEggQ0lSQ1VNRkxFWFwiIGluIGRlc2NyaXB0aW9uCiAgICAgICAgb3IgXCJXSVRIIFRJTERFXCIgaW4gZGVzY3JpcHRpb24KICAgICkKCgpAbHJ1X2NhY2hlKG1heHNpemU9VVRGOF9NQVhJTUFMX0FMTE9DQVRJT04pCmRlZiByZW1vdmVfYWNjZW50KGNoYXJhY3Rlcjogc3RyKSAtPiBzdHI6CiAgICBkZWNvbXBvc2VkOiBzdHIgPSB1bmljb2RlZGF0YS5kZWNvbXBvc2l0aW9uKGNoYXJhY3RlcikKICAgIGlmIG5vdCBkZWNvbXBvc2VkOgogICAgICAgIHJldHVybiBjaGFyYWN0ZXIKCiAgICBjb2RlczogTGlzdFtzdHJdID0gZGVjb21wb3NlZC5zcGxpdChcIiBcIikKCiAgICByZXR1cm4gY2hyKGludChjb2Rlc1swXSwgMTYpKQoKCkBscnVfY2FjaGUobWF4c2l6ZT1VVEY4X01BWElNQUxfQUxMT0NBVElPTikKZGVmIHVuaWNvZGVfcmFuZ2UoY2hhcmFjdGVyOiBzdHIpIC0+IE9wdGlvbmFsW3N0cl06CiAgICBcIlwiXCIKICAgIFJldHJpZXZlIHRoZSBVbmljb2RlIHJhbmdlIG9mZmljaWFsIG5hbWUgZnJvbSBhIHNpbmdsZSBjaGFyYWN0ZXIuCiAgICBcIlwiXCIKICAgIGNoYXJhY3Rlcl9vcmQ6IGludCA9IG9yZChjaGFyYWN0ZXIpCgogICAgZm9yIHJhbmdlX25hbWUsIG9yZF9yYW5nZSBpbiBVTklDT0RFX1JBTkdFU19DT01CSU5FRC5pdGVtcygpOgogICAgICAgIGlmIGNoYXJhY3Rlcl9vcmQgaW4gb3JkX3JhbmdlOgogICAgICAgICAgICByZXR1cm4gcmFuZ2VfbmFtZQoKICAgIHJldHVybiBOb25lCgoKQGxydV9jYWNoZShtYXhzaXplPVVURjhfTUFYSU1BTF9BTExPQ0FUSU9OKQpkZWYgaXNfbGF0aW4oY2hhcmFjdGVyOiBzdHIpIC0+IGJvb2w6CiAgICB0cnk6CiAgICAgICAgZGVzY3JpcHRpb246IHN0ciA9IHVuaWNvZGVkYXRhLm5hbWUoY2hhcmFjdGVyKQogICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICByZXR1cm4gXCJMQVRJTlwiIGluIGRlc2NyaXB0aW9uCgoKQGxydV9jYWNoZShtYXhzaXplPVVURjhfTUFYSU1BTF9BTExPQ0FUSU9OKQpkZWYgaXNfYXNjaWkoY2hhcmFjdGVyOiBzdHIpIC0+IGJvb2w6CiAgICB0cnk6CiAgICAgICAgY2hhcmFjdGVyLmVuY29kZShcImFzY2lpXCIpCiAgICBleGNlcHQgVW5pY29kZUVuY29kZUVycm9yOgogICAgICAgIHJldHVybiBGYWxzZQogICAgcmV0dXJuIFRydWUKCgpAbHJ1X2NhY2hlKG1heHNpemU9VVRGOF9NQVhJTUFMX0FMTE9DQVRJT04pCmRlZiBpc19wdW5jdHVhdGlvbihjaGFyYWN0ZXI6IHN0cikgLT4gYm9vbDoKICAgIGNoYXJhY3Rlcl9jYXRlZ29yeTogc3RyID0gdW5pY29kZWRhdGEuY2F0ZWdvcnkoY2hhcmFjdGVyKQoKICAgIGlmIFwiUFwiIGluIGNoYXJhY3Rlcl9jYXRlZ29yeToKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIGNoYXJhY3Rlcl9yYW5nZTogT3B0aW9uYWxbc3RyXSA9IHVuaWNvZGVfcmFuZ2UoY2hhcmFjdGVyKQoKICAgIGlmIGNoYXJhY3Rlcl9yYW5nZSBpcyBOb25lOgogICAgICAgIHJldHVybiBGYWxzZQoKICAgIHJldHVybiBcIlB1bmN0dWF0aW9uXCIgaW4gY2hhcmFjdGVyX3JhbmdlCgoKQGxydV9jYWNoZShtYXhzaXplPVVURjhfTUFYSU1BTF9BTExPQ0FUSU9OKQpkZWYgaXNfc3ltYm9sKGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOgogICAgY2hhcmFjdGVyX2NhdGVnb3J5OiBzdHIgPSB1bmljb2RlZGF0YS5jYXRlZ29yeShjaGFyYWN0ZXIpCgogICAgaWYgXCJTXCIgaW4gY2hhcmFjdGVyX2NhdGVnb3J5IG9yIFwiTlwiIGluIGNoYXJhY3Rlcl9jYXRlZ29yeToKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIGNoYXJhY3Rlcl9yYW5nZTogT3B0aW9uYWxbc3RyXSA9IHVuaWNvZGVfcmFuZ2UoY2hhcmFjdGVyKQoKICAgIGlmIGNoYXJhY3Rlcl9yYW5nZSBpcyBOb25lOgogICAgICAgIHJldHVybiBGYWxzZQoKICAgIHJldHVybiBcIkZvcm1zXCIgaW4gY2hhcmFjdGVyX3JhbmdlCgoKQGxydV9jYWNoZShtYXhzaXplPVVURjhfTUFYSU1BTF9BTExPQ0FUSU9OKQpkZWYgaXNfZW1vdGljb24oY2hhcmFjdGVyOiBzdHIpIC0+IGJvb2w6CiAgICBjaGFyYWN0ZXJfcmFuZ2U6IE9wdGlvbmFsW3N0cl0gPSB1bmljb2RlX3JhbmdlKGNoYXJhY3RlcikKCiAgICBpZiBjaGFyYWN0ZXJfcmFuZ2UgaXMgTm9uZToKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICByZXR1cm4gXCJFbW90aWNvbnNcIiBpbiBjaGFyYWN0ZXJfcmFuZ2UKCgpAbHJ1X2NhY2hlKG1heHNpemU9VVRGOF9NQVhJTUFMX0FMTE9DQVRJT04pCmRlZiBpc19zZXBhcmF0b3IoY2hhcmFjdGVyOiBzdHIpIC0+IGJvb2w6CiAgICBpZiBjaGFyYWN0ZXIuaXNzcGFjZSgpIG9yIGNoYXJhY3RlciBpbiB7XCLvvZxcIiwgXCIrXCIsIFwiLFwiLCBcIjtcIiwgXCI8XCIsIFwiPlwifToKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIGNoYXJhY3Rlcl9jYXRlZ29yeTogc3RyID0gdW5pY29kZWRhdGEuY2F0ZWdvcnkoY2hhcmFjdGVyKQoKICAgIHJldHVybiBcIlpcIiBpbiBjaGFyYWN0ZXJfY2F0ZWdvcnkKCgpAbHJ1X2NhY2hlKG1heHNpemU9VVRGOF9NQVhJTUFMX0FMTE9DQVRJT04pCmRlZiBpc19jYXNlX3ZhcmlhYmxlKGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOgogICAgcmV0dXJuIGNoYXJhY3Rlci5pc2xvd2VyKCkgIT0gY2hhcmFjdGVyLmlzdXBwZXIoKQoKCmRlZiBpc19wcml2YXRlX3VzZV9vbmx5KGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOgogICAgY2hhcmFjdGVyX2NhdGVnb3J5OiBzdHIgPSB1bmljb2RlZGF0YS5jYXRlZ29yeShjaGFyYWN0ZXIpCgogICAgcmV0dXJuIGNoYXJhY3Rlcl9jYXRlZ29yeSA9PSBcIkNvXCIKCgpAbHJ1X2NhY2hlKG1heHNpemU9VVRGOF9NQVhJTUFMX0FMTE9DQVRJT04pCmRlZiBpc19jamsoY2hhcmFjdGVyOiBzdHIpIC0+IGJvb2w6CiAgICB0cnk6CiAgICAgICAgY2hhcmFjdGVyX25hbWUgPSB1bmljb2RlZGF0YS5uYW1lKGNoYXJhY3RlcikKICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgIHJldHVybiBGYWxzZQoKICAgIHJldHVybiBcIkNKS1wiIGluIGNoYXJhY3Rlcl9uYW1lCgoKQGxydV9jYWNoZShtYXhzaXplPVVURjhfTUFYSU1BTF9BTExPQ0FUSU9OKQpkZWYgaXNfaGlyYWdhbmEoY2hhcmFjdGVyOiBzdHIpIC0+IGJvb2w6CiAgICB0cnk6CiAgICAgICAgY2hhcmFjdGVyX25hbWUgPSB1bmljb2RlZGF0YS5uYW1lKGNoYXJhY3RlcikKICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgIHJldHVybiBGYWxzZQoKICAgIHJldHVybiBcIkhJUkFHQU5BXCIgaW4gY2hhcmFjdGVyX25hbWUKCgpAbHJ1X2NhY2hlKG1heHNpemU9VVRGOF9NQVhJTUFMX0FMTE9DQVRJT04pCmRlZiBpc19rYXRha2FuYShjaGFyYWN0ZXI6IHN0cikgLT4gYm9vbDoKICAgIHRyeToKICAgICAgICBjaGFyYWN0ZXJfbmFtZSA9IHVuaWNvZGVkYXRhLm5hbWUoY2hhcmFjdGVyKQogICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgcmV0dXJuIFwiS0FUQUtBTkFcIiBpbiBjaGFyYWN0ZXJfbmFtZQoKCkBscnVfY2FjaGUobWF4c2l6ZT1VVEY4X01BWElNQUxfQUxMT0NBVElPTikKZGVmIGlzX2hhbmd1bChjaGFyYWN0ZXI6IHN0cikgLT4gYm9vbDoKICAgIHRyeToKICAgICAgICBjaGFyYWN0ZXJfbmFtZSA9IHVuaWNvZGVkYXRhLm5hbWUoY2hhcmFjdGVyKQogICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgcmV0dXJuIFwiSEFOR1VMXCIgaW4gY2hhcmFjdGVyX25hbWUKCgpAbHJ1X2NhY2hlKG1heHNpemU9VVRGOF9NQVhJTUFMX0FMTE9DQVRJT04pCmRlZiBpc190aGFpKGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOgogICAgdHJ5OgogICAgICAgIGNoYXJhY3Rlcl9uYW1lID0gdW5pY29kZWRhdGEubmFtZShjaGFyYWN0ZXIpCiAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICByZXR1cm4gXCJUSEFJXCIgaW4gY2hhcmFjdGVyX25hbWUKCgpAbHJ1X2NhY2hlKG1heHNpemU9bGVuKFVOSUNPREVfUkFOR0VTX0NPTUJJTkVEKSkKZGVmIGlzX3VuaWNvZGVfcmFuZ2Vfc2Vjb25kYXJ5KHJhbmdlX25hbWU6IHN0cikgLT4gYm9vbDoKICAgIHJldHVybiBhbnkoa2V5d29yZCBpbiByYW5nZV9uYW1lIGZvciBrZXl3b3JkIGluIFVOSUNPREVfU0VDT05EQVJZX1JBTkdFX0tFWVdPUkQpCgoKQGxydV9jYWNoZShtYXhzaXplPVVURjhfTUFYSU1BTF9BTExPQ0FUSU9OKQpkZWYgaXNfdW5wcmludGFibGUoY2hhcmFjdGVyOiBzdHIpIC0+IGJvb2w6CiAgICByZXR1cm4gKAogICAgICAgIGNoYXJhY3Rlci5pc3NwYWNlKCkgaXMgRmFsc2UgICMgaW5jbHVkZXMgXFxuIFxcdCBcXHIgXFx2CiAgICAgICAgYW5kIGNoYXJhY3Rlci5pc3ByaW50YWJsZSgpIGlzIEZhbHNlCiAgICAgICAgYW5kIGNoYXJhY3RlciAhPSBcIlxceDFBXCIgICMgV2h5PyBJdHMgdGhlIEFTQ0lJIHN1YnN0aXR1dGUgY2hhcmFjdGVyLgogICAgICAgIGFuZCBjaGFyYWN0ZXIgIT0gYlwiXFx4RUZcXHhCQlxceEJGXCIuZGVjb2RlKFwidXRmXzhcIikgICMgYnVnIGRpc2NvdmVyZWQgaW4gUHl0aG9uLAogICAgICAgICMgWmVybyBXaWR0aCBOby1CcmVhayBTcGFjZSBsb2NhdGVkIGluIAlBcmFiaWMgUHJlc2VudGF0aW9uIEZvcm1zLUIsIFVuaWNvZGUgMS4xIG5vdCBhY2tub3dsZWRnZWQgYXMgc3BhY2UuCiAgICApCgoKZGVmIGFueV9zcGVjaWZpZWRfZW5jb2Rpbmcoc2VxdWVuY2U6IGJ5dGVzLCBzZWFyY2hfem9uZTogaW50ID0gNDA5NikgLT4gT3B0aW9uYWxbc3RyXToKICAgIFwiXCJcIgogICAgRXh0cmFjdCB1c2luZyBBU0NJSS1vbmx5IGRlY29kZXIgYW55IHNwZWNpZmllZCBlbmNvZGluZyBpbiB0aGUgZmlyc3Qgbi1ieXRlcy4KICAgIFwiXCJcIgogICAgaWYgbm90IGlzaW5zdGFuY2Uoc2VxdWVuY2UsIGJ5dGVzKToKICAgICAgICByYWlzZSBUeXBlRXJyb3IKCiAgICBzZXFfbGVuOiBpbnQgPSBsZW4oc2VxdWVuY2UpCgogICAgcmVzdWx0czogTGlzdFtzdHJdID0gZmluZGFsbCgKICAgICAgICBSRV9QT1NTSUJMRV9FTkNPRElOR19JTkRJQ0FUSU9OLAogICAgICAgIHNlcXVlbmNlWzogbWluKHNlcV9sZW4sIHNlYXJjaF96b25lKV0uZGVjb2RlKFwiYXNjaWlcIiwgZXJyb3JzPVwiaWdub3JlXCIpLAogICAgKQoKICAgIGlmIGxlbihyZXN1bHRzKSA9PSAwOgogICAgICAgIHJldHVybiBOb25lCgogICAgZm9yIHNwZWNpZmllZF9lbmNvZGluZyBpbiByZXN1bHRzOgogICAgICAgIHNwZWNpZmllZF9lbmNvZGluZyA9IHNwZWNpZmllZF9lbmNvZGluZy5sb3dlcigpLnJlcGxhY2UoXCItXCIsIFwiX1wiKQoKICAgICAgICBmb3IgZW5jb2RpbmdfYWxpYXMsIGVuY29kaW5nX2lhbmEgaW4gYWxpYXNlcy5pdGVtcygpOgogICAgICAgICAgICBpZiBlbmNvZGluZ19hbGlhcyA9PSBzcGVjaWZpZWRfZW5jb2Rpbmc6CiAgICAgICAgICAgICAgICByZXR1cm4gZW5jb2RpbmdfaWFuYQogICAgICAgICAgICBpZiBlbmNvZGluZ19pYW5hID09IHNwZWNpZmllZF9lbmNvZGluZzoKICAgICAgICAgICAgICAgIHJldHVybiBlbmNvZGluZ19pYW5hCgogICAgcmV0dXJuIE5vbmUKCgpAbHJ1X2NhY2hlKG1heHNpemU9MTI4KQpkZWYgaXNfbXVsdGlfYnl0ZV9lbmNvZGluZyhuYW1lOiBzdHIpIC0+IGJvb2w6CiAgICBcIlwiXCIKICAgIFZlcmlmeSBpcyBhIHNwZWNpZmljIGVuY29kaW5nIGlzIGEgbXVsdGkgYnl0ZSBvbmUgYmFzZWQgb24gaXQgSUFOQSBuYW1lCiAgICBcIlwiXCIKICAgIHJldHVybiBuYW1lIGluIHsKICAgICAgICBcInV0Zl84XCIsCiAgICAgICAgXCJ1dGZfOF9zaWdcIiwKICAgICAgICBcInV0Zl8xNlwiLAogICAgICAgIFwidXRmXzE2X2JlXCIsCiAgICAgICAgXCJ1dGZfMTZfbGVcIiwKICAgICAgICBcInV0Zl8zMlwiLAogICAgICAgIFwidXRmXzMyX2xlXCIsCiAgICAgICAgXCJ1dGZfMzJfYmVcIiwKICAgICAgICBcInV0Zl83XCIsCiAgICB9IG9yIGlzc3ViY2xhc3MoCiAgICAgICAgaW1wb3J0bGliLmltcG9ydF9tb2R1bGUoXCJlbmNvZGluZ3Mue31cIi5mb3JtYXQobmFtZSkpLkluY3JlbWVudGFsRGVjb2RlciwgICMgdHlwZTogaWdub3JlCiAgICAgICAgTXVsdGlieXRlSW5jcmVtZW50YWxEZWNvZGVyLAogICAgKQoKCmRlZiBpZGVudGlmeV9zaWdfb3JfYm9tKHNlcXVlbmNlOiBieXRlcykgLT4gVHVwbGVbT3B0aW9uYWxbc3RyXSwgYnl0ZXNdOgogICAgXCJcIlwiCiAgICBJZGVudGlmeSBhbmQgZXh0cmFjdCBTSUcvQk9NIGluIGdpdmVuIHNlcXVlbmNlLgogICAgXCJcIlwiCgogICAgZm9yIGlhbmFfZW5jb2RpbmcgaW4gRU5DT0RJTkdfTUFSS1M6CiAgICAgICAgbWFya3M6IFVuaW9uW2J5dGVzLCBMaXN0W2J5dGVzXV0gPSBFTkNPRElOR19NQVJLU1tpYW5hX2VuY29kaW5nXQoKICAgICAgICBpZiBpc2luc3RhbmNlKG1hcmtzLCBieXRlcyk6CiAgICAgICAgICAgIG1hcmtzID0gW21hcmtzXQoKICAgICAgICBmb3IgbWFyayBpbiBtYXJrczoKICAgICAgICAgICAgaWYgc2VxdWVuY2Uuc3RhcnRzd2l0aChtYXJrKToKICAgICAgICAgICAgICAgIHJldHVybiBpYW5hX2VuY29kaW5nLCBtYXJrCgogICAgcmV0dXJuIE5vbmUsIGJcIlwiCgoKZGVmIHNob3VsZF9zdHJpcF9zaWdfb3JfYm9tKGlhbmFfZW5jb2Rpbmc6IHN0cikgLT4gYm9vbDoKICAgIHJldHVybiBpYW5hX2VuY29kaW5nIG5vdCBpbiB7XCJ1dGZfMTZcIiwgXCJ1dGZfMzJcIn0KCgpkZWYgaWFuYV9uYW1lKGNwX25hbWU6IHN0ciwgc3RyaWN0OiBib29sID0gVHJ1ZSkgLT4gc3RyOgogICAgY3BfbmFtZSA9IGNwX25hbWUubG93ZXIoKS5yZXBsYWNlKFwiLVwiLCBcIl9cIikKCiAgICBmb3IgZW5jb2RpbmdfYWxpYXMsIGVuY29kaW5nX2lhbmEgaW4gYWxpYXNlcy5pdGVtcygpOgogICAgICAgIGlmIGNwX25hbWUgaW4gW2VuY29kaW5nX2FsaWFzLCBlbmNvZGluZ19pYW5hXToKICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nX2lhbmEKCiAgICBpZiBzdHJpY3Q6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcIlVuYWJsZSB0byByZXRyaWV2ZSBJQU5BIGZvciAne30nXCIuZm9ybWF0KGNwX25hbWUpKQoKICAgIHJldHVybiBjcF9uYW1lCgoKZGVmIHJhbmdlX3NjYW4oZGVjb2RlZF9zZXF1ZW5jZTogc3RyKSAtPiBMaXN0W3N0cl06CiAgICByYW5nZXM6IFNldFtzdHJdID0gc2V0KCkKCiAgICBmb3IgY2hhcmFjdGVyIGluIGRlY29kZWRfc2VxdWVuY2U6CiAgICAgICAgY2hhcmFjdGVyX3JhbmdlOiBPcHRpb25hbFtzdHJdID0gdW5pY29kZV9yYW5nZShjaGFyYWN0ZXIpCgogICAgICAgIGlmIGNoYXJhY3Rlcl9yYW5nZSBpcyBOb25lOgogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICByYW5nZXMuYWRkKGNoYXJhY3Rlcl9yYW5nZSkKCiAgICByZXR1cm4gbGlzdChyYW5nZXMpCgoKZGVmIGNwX3NpbWlsYXJpdHkoaWFuYV9uYW1lX2E6IHN0ciwgaWFuYV9uYW1lX2I6IHN0cikgLT4gZmxvYXQ6CgogICAgaWYgaXNfbXVsdGlfYnl0ZV9lbmNvZGluZyhpYW5hX25hbWVfYSkgb3IgaXNfbXVsdGlfYnl0ZV9lbmNvZGluZyhpYW5hX25hbWVfYik6CiAgICAgICAgcmV0dXJuIDAuMAoKICAgIGRlY29kZXJfYSA9IGltcG9ydGxpYi5pbXBvcnRfbW9kdWxlKFwiZW5jb2RpbmdzLnt9XCIuZm9ybWF0KGlhbmFfbmFtZV9hKSkuSW5jcmVtZW50YWxEZWNvZGVyICAjIHR5cGU6IGlnbm9yZQogICAgZGVjb2Rlcl9iID0gaW1wb3J0bGliLmltcG9ydF9tb2R1bGUoXCJlbmNvZGluZ3Mue31cIi5mb3JtYXQoaWFuYV9uYW1lX2IpKS5JbmNyZW1lbnRhbERlY29kZXIgICMgdHlwZTogaWdub3JlCgogICAgaWRfYTogSW5jcmVtZW50YWxEZWNvZGVyID0gZGVjb2Rlcl9hKGVycm9ycz1cImlnbm9yZVwiKQogICAgaWRfYjogSW5jcmVtZW50YWxEZWNvZGVyID0gZGVjb2Rlcl9iKGVycm9ycz1cImlnbm9yZVwiKQoKICAgIGNoYXJhY3Rlcl9tYXRjaF9jb3VudDogaW50ID0gMAoKICAgIGZvciBpIGluIHJhbmdlKDI1NSk6CiAgICAgICAgdG9fYmVfZGVjb2RlZDogYnl0ZXMgPSBieXRlcyhbaV0pCiAgICAgICAgaWYgaWRfYS5kZWNvZGUodG9fYmVfZGVjb2RlZCkgPT0gaWRfYi5kZWNvZGUodG9fYmVfZGVjb2RlZCk6CiAgICAgICAgICAgIGNoYXJhY3Rlcl9tYXRjaF9jb3VudCArPSAxCgogICAgcmV0dXJuIGNoYXJhY3Rlcl9tYXRjaF9jb3VudCAvIDI1NAoKCmRlZiBpc19jcF9zaW1pbGFyKGlhbmFfbmFtZV9hOiBzdHIsIGlhbmFfbmFtZV9iOiBzdHIpIC0+IGJvb2w6CiAgICBcIlwiXCIKICAgIERldGVybWluZSBpZiB0d28gY29kZSBwYWdlIGFyZSBhdCBsZWFzdCA4MCUgc2ltaWxhci4gSUFOQV9TVVBQT1JURURfU0lNSUxBUiBkaWN0IHdhcyBnZW5lcmF0ZWQgdXNpbmcKICAgIHRoZSBmdW5jdGlvbiBjcF9zaW1pbGFyaXR5LgogICAgXCJcIlwiCiAgICByZXR1cm4gKAogICAgICAgIGlhbmFfbmFtZV9hIGluIElBTkFfU1VQUE9SVEVEX1NJTUlMQVIKICAgICAgICBhbmQgaWFuYV9uYW1lX2IgaW4gSUFOQV9TVVBQT1JURURfU0lNSUxBUltpYW5hX25hbWVfYV0KICAgICkKCgpkZWYgc2V0X2xvZ2dpbmdfaGFuZGxlcigKICAgIG5hbWU6IHN0ciA9IFwiY2hhcnNldF9ub3JtYWxpemVyXCIsCiAgICBsZXZlbDogaW50ID0gbG9nZ2luZy5JTkZPLAogICAgZm9ybWF0X3N0cmluZzogc3RyID0gXCIlKGFzY3RpbWUpcyB8ICUobGV2ZWxuYW1lKXMgfCAlKG1lc3NhZ2Upc1wiLAopIC0+IE5vbmU6CgogICAgbG9nZ2VyID0gbG9nZ2luZy5nZXRMb2dnZXIobmFtZSkKICAgIGxvZ2dlci5zZXRMZXZlbChsZXZlbCkKCiAgICBoYW5kbGVyID0gbG9nZ2luZy5TdHJlYW1IYW5kbGVyKCkKICAgIGhhbmRsZXIuc2V0Rm9ybWF0dGVyKGxvZ2dpbmcuRm9ybWF0dGVyKGZvcm1hdF9zdHJpbmcpKQogICAgbG9nZ2VyLmFkZEhhbmRsZXIoaGFuZGxlcikKCgpkZWYgY3V0X3NlcXVlbmNlX2NodW5rcygKICAgIHNlcXVlbmNlczogYnl0ZXMsCiAgICBlbmNvZGluZ19pYW5hOiBzdHIsCiAgICBvZmZzZXRzOiByYW5nZSwKICAgIGNodW5rX3NpemU6IGludCwKICAgIGJvbV9vcl9zaWdfYXZhaWxhYmxlOiBib29sLAogICAgc3RyaXBfc2lnX29yX2JvbTogYm9vbCwKICAgIHNpZ19wYXlsb2FkOiBieXRlcywKICAgIGlzX211bHRpX2J5dGVfZGVjb2RlcjogYm9vbCwKICAgIGRlY29kZWRfcGF5bG9hZDogT3B0aW9uYWxbc3RyXSA9IE5vbmUsCikgLT4gR2VuZXJhdG9yW3N0ciwgTm9uZSwgTm9uZV06CgogICAgaWYgZGVjb2RlZF9wYXlsb2FkIGFuZCBpc19tdWx0aV9ieXRlX2RlY29kZXIgaXMgRmFsc2U6CiAgICAgICAgZm9yIGkgaW4gb2Zmc2V0czoKICAgICAgICAgICAgY2h1bmsgPSBkZWNvZGVkX3BheWxvYWRbaSA6IGkgKyBjaHVua19zaXplXQogICAgICAgICAgICBpZiBub3QgY2h1bms6CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICB5aWVsZCBjaHVuawogICAgZWxzZToKICAgICAgICBmb3IgaSBpbiBvZmZzZXRzOgogICAgICAgICAgICBjaHVua19lbmQgPSBpICsgY2h1bmtfc2l6ZQogICAgICAgICAgICBpZiBjaHVua19lbmQgPiBsZW4oc2VxdWVuY2VzKSArIDg6CiAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgY3V0X3NlcXVlbmNlID0gc2VxdWVuY2VzW2kgOiBpICsgY2h1bmtfc2l6ZV0KCiAgICAgICAgICAgIGlmIGJvbV9vcl9zaWdfYXZhaWxhYmxlIGFuZCBzdHJpcF9zaWdfb3JfYm9tIGlzIEZhbHNlOgogICAgICAgICAgICAgICAgY3V0X3NlcXVlbmNlID0gc2lnX3BheWxvYWQgKyBjdXRfc2VxdWVuY2UKCiAgICAgICAgICAgIGNodW5rID0gY3V0X3NlcXVlbmNlLmRlY29kZSgKICAgICAgICAgICAgICAgIGVuY29kaW5nX2lhbmEsCiAgICAgICAgICAgICAgICBlcnJvcnM9XCJpZ25vcmVcIiBpZiBpc19tdWx0aV9ieXRlX2RlY29kZXIgZWxzZSBcInN0cmljdFwiLAogICAgICAgICAgICApCgogICAgICAgICAgICAjIG11bHRpLWJ5dGUgYmFkIGN1dHRpbmcgZGV0ZWN0b3IgYW5kIGFkanVzdG1lbnQKICAgICAgICAgICAgIyBub3QgdGhlIGNsZWFuZXN0IHdheSB0byBwZXJmb3JtIHRoYXQgZml4IGJ1dCBjbGV2ZXIgZW5vdWdoIGZvciBub3cuCiAgICAgICAgICAgIGlmIGlzX211bHRpX2J5dGVfZGVjb2RlciBhbmQgaSA+IDAgYW5kIHNlcXVlbmNlc1tpXSA+PSAweDgwOgoKICAgICAgICAgICAgICAgIGNodW5rX3BhcnRpYWxfc2l6ZV9jaGs6IGludCA9IG1pbihjaHVua19zaXplLCAxNikKCiAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgZGVjb2RlZF9wYXlsb2FkCiAgICAgICAgICAgICAgICAgICAgYW5kIGNodW5rWzpjaHVua19wYXJ0aWFsX3NpemVfY2hrXSBub3QgaW4gZGVjb2RlZF9wYXlsb2FkCiAgICAgICAgICAgICAgICApOgogICAgICAgICAgICAgICAgICAgIGZvciBqIGluIHJhbmdlKGksIGkgLSA0LCAtMSk6CiAgICAgICAgICAgICAgICAgICAgICAgIGN1dF9zZXF1ZW5jZSA9IHNlcXVlbmNlc1tqOmNodW5rX2VuZF0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGJvbV9vcl9zaWdfYXZhaWxhYmxlIGFuZCBzdHJpcF9zaWdfb3JfYm9tIGlzIEZhbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3V0X3NlcXVlbmNlID0gc2lnX3BheWxvYWQgKyBjdXRfc2VxdWVuY2UKCiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rID0gY3V0X3NlcXVlbmNlLmRlY29kZShlbmNvZGluZ19pYW5hLCBlcnJvcnM9XCJpZ25vcmVcIikKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNodW5rWzpjaHVua19wYXJ0aWFsX3NpemVfY2hrXSBpbiBkZWNvZGVkX3BheWxvYWQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgeWllbGQgY2h1bmsKCiIiIgptb2R1bGVfZGljdFsiY2hhcnNldF9ub3JtYWxpemVyIitvcy5zZXArImNkLnB5Il09IiIiCmltcG9ydCBpbXBvcnRsaWIKZnJvbSBjb2RlY3MgaW1wb3J0IEluY3JlbWVudGFsRGVjb2Rlcgpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBDb3VudGVyCmZyb20gZnVuY3Rvb2xzIGltcG9ydCBscnVfY2FjaGUKZnJvbSB0eXBpbmcgaW1wb3J0IERpY3QsIExpc3QsIE9wdGlvbmFsLCBUdXBsZQoKZnJvbSAuYXNzZXRzIGltcG9ydCBGUkVRVUVOQ0lFUwpmcm9tIC5jb25zdGFudCBpbXBvcnQgS09fTkFNRVMsIExBTkdVQUdFX1NVUFBPUlRFRF9DT1VOVCwgVE9PX1NNQUxMX1NFUVVFTkNFLCBaSF9OQU1FUwpmcm9tIC5tZCBpbXBvcnQgaXNfc3VzcGljaW91c2x5X3N1Y2Nlc3NpdmVfcmFuZ2UKZnJvbSAubW9kZWxzIGltcG9ydCBDb2hlcmVuY2VNYXRjaGVzCmZyb20gLnV0aWxzIGltcG9ydCAoCiAgICBpc19hY2NlbnR1YXRlZCwKICAgIGlzX2xhdGluLAogICAgaXNfbXVsdGlfYnl0ZV9lbmNvZGluZywKICAgIGlzX3VuaWNvZGVfcmFuZ2Vfc2Vjb25kYXJ5LAogICAgdW5pY29kZV9yYW5nZSwKKQoKCmRlZiBlbmNvZGluZ191bmljb2RlX3JhbmdlKGlhbmFfbmFtZTogc3RyKSAtPiBMaXN0W3N0cl06CiAgICBcIlwiXCIKICAgIFJldHVybiBhc3NvY2lhdGVkIHVuaWNvZGUgcmFuZ2VzIGluIGEgc2luZ2xlIGJ5dGUgY29kZSBwYWdlLgogICAgXCJcIlwiCiAgICBpZiBpc19tdWx0aV9ieXRlX2VuY29kaW5nKGlhbmFfbmFtZSk6CiAgICAgICAgcmFpc2UgSU9FcnJvcihcIkZ1bmN0aW9uIG5vdCBzdXBwb3J0ZWQgb24gbXVsdGktYnl0ZSBjb2RlIHBhZ2VcIikKCiAgICBkZWNvZGVyID0gaW1wb3J0bGliLmltcG9ydF9tb2R1bGUoXCJlbmNvZGluZ3Mue31cIi5mb3JtYXQoaWFuYV9uYW1lKSkuSW5jcmVtZW50YWxEZWNvZGVyICAjIHR5cGU6IGlnbm9yZQoKICAgIHA6IEluY3JlbWVudGFsRGVjb2RlciA9IGRlY29kZXIoZXJyb3JzPVwiaWdub3JlXCIpCiAgICBzZWVuX3JhbmdlczogRGljdFtzdHIsIGludF0gPSB7fQogICAgY2hhcmFjdGVyX2NvdW50OiBpbnQgPSAwCgogICAgZm9yIGkgaW4gcmFuZ2UoMHg0MCwgMHhGRik6CiAgICAgICAgY2h1bms6IHN0ciA9IHAuZGVjb2RlKGJ5dGVzKFtpXSkpCgogICAgICAgIGlmIGNodW5rOgogICAgICAgICAgICBjaGFyYWN0ZXJfcmFuZ2U6IE9wdGlvbmFsW3N0cl0gPSB1bmljb2RlX3JhbmdlKGNodW5rKQoKICAgICAgICAgICAgaWYgY2hhcmFjdGVyX3JhbmdlIGlzIE5vbmU6CiAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgaWYgaXNfdW5pY29kZV9yYW5nZV9zZWNvbmRhcnkoY2hhcmFjdGVyX3JhbmdlKSBpcyBGYWxzZToKICAgICAgICAgICAgICAgIGlmIGNoYXJhY3Rlcl9yYW5nZSBub3QgaW4gc2Vlbl9yYW5nZXM6CiAgICAgICAgICAgICAgICAgICAgc2Vlbl9yYW5nZXNbY2hhcmFjdGVyX3JhbmdlXSA9IDAKICAgICAgICAgICAgICAgIHNlZW5fcmFuZ2VzW2NoYXJhY3Rlcl9yYW5nZV0gKz0gMQogICAgICAgICAgICAgICAgY2hhcmFjdGVyX2NvdW50ICs9IDEKCiAgICByZXR1cm4gc29ydGVkKAogICAgICAgIFsKICAgICAgICAgICAgY2hhcmFjdGVyX3JhbmdlCiAgICAgICAgICAgIGZvciBjaGFyYWN0ZXJfcmFuZ2UgaW4gc2Vlbl9yYW5nZXMKICAgICAgICAgICAgaWYgc2Vlbl9yYW5nZXNbY2hhcmFjdGVyX3JhbmdlXSAvIGNoYXJhY3Rlcl9jb3VudCA+PSAwLjE1CiAgICAgICAgXQogICAgKQoKCmRlZiB1bmljb2RlX3JhbmdlX2xhbmd1YWdlcyhwcmltYXJ5X3JhbmdlOiBzdHIpIC0+IExpc3Rbc3RyXToKICAgIFwiXCJcIgogICAgUmV0dXJuIGluZmVycmVkIGxhbmd1YWdlcyB1c2VkIHdpdGggYSB1bmljb2RlIHJhbmdlLgogICAgXCJcIlwiCiAgICBsYW5ndWFnZXM6IExpc3Rbc3RyXSA9IFtdCgogICAgZm9yIGxhbmd1YWdlLCBjaGFyYWN0ZXJzIGluIEZSRVFVRU5DSUVTLml0ZW1zKCk6CiAgICAgICAgZm9yIGNoYXJhY3RlciBpbiBjaGFyYWN0ZXJzOgogICAgICAgICAgICBpZiB1bmljb2RlX3JhbmdlKGNoYXJhY3RlcikgPT0gcHJpbWFyeV9yYW5nZToKICAgICAgICAgICAgICAgIGxhbmd1YWdlcy5hcHBlbmQobGFuZ3VhZ2UpCiAgICAgICAgICAgICAgICBicmVhawoKICAgIHJldHVybiBsYW5ndWFnZXMKCgpAbHJ1X2NhY2hlKCkKZGVmIGVuY29kaW5nX2xhbmd1YWdlcyhpYW5hX25hbWU6IHN0cikgLT4gTGlzdFtzdHJdOgogICAgXCJcIlwiCiAgICBTaW5nbGUtYnl0ZSBlbmNvZGluZyBsYW5ndWFnZSBhc3NvY2lhdGlvbi4gU29tZSBjb2RlIHBhZ2UgYXJlIGhlYXZpbHkgbGlua2VkIHRvIHBhcnRpY3VsYXIgbGFuZ3VhZ2UocykuCiAgICBUaGlzIGZ1bmN0aW9uIGRvZXMgdGhlIGNvcnJlc3BvbmRlbmNlLgogICAgXCJcIlwiCiAgICB1bmljb2RlX3JhbmdlczogTGlzdFtzdHJdID0gZW5jb2RpbmdfdW5pY29kZV9yYW5nZShpYW5hX25hbWUpCiAgICBwcmltYXJ5X3JhbmdlOiBPcHRpb25hbFtzdHJdID0gTm9uZQoKICAgIGZvciBzcGVjaWZpZWRfcmFuZ2UgaW4gdW5pY29kZV9yYW5nZXM6CiAgICAgICAgaWYgXCJMYXRpblwiIG5vdCBpbiBzcGVjaWZpZWRfcmFuZ2U6CiAgICAgICAgICAgIHByaW1hcnlfcmFuZ2UgPSBzcGVjaWZpZWRfcmFuZ2UKICAgICAgICAgICAgYnJlYWsKCiAgICBpZiBwcmltYXJ5X3JhbmdlIGlzIE5vbmU6CiAgICAgICAgcmV0dXJuIFtcIkxhdGluIEJhc2VkXCJdCgogICAgcmV0dXJuIHVuaWNvZGVfcmFuZ2VfbGFuZ3VhZ2VzKHByaW1hcnlfcmFuZ2UpCgoKQGxydV9jYWNoZSgpCmRlZiBtYl9lbmNvZGluZ19sYW5ndWFnZXMoaWFuYV9uYW1lOiBzdHIpIC0+IExpc3Rbc3RyXToKICAgIFwiXCJcIgogICAgTXVsdGktYnl0ZSBlbmNvZGluZyBsYW5ndWFnZSBhc3NvY2lhdGlvbi4gU29tZSBjb2RlIHBhZ2UgYXJlIGhlYXZpbHkgbGlua2VkIHRvIHBhcnRpY3VsYXIgbGFuZ3VhZ2UocykuCiAgICBUaGlzIGZ1bmN0aW9uIGRvZXMgdGhlIGNvcnJlc3BvbmRlbmNlLgogICAgXCJcIlwiCiAgICBpZiAoCiAgICAgICAgaWFuYV9uYW1lLnN0YXJ0c3dpdGgoXCJzaGlmdF9cIikKICAgICAgICBvciBpYW5hX25hbWUuc3RhcnRzd2l0aChcImlzbzIwMjJfanBcIikKICAgICAgICBvciBpYW5hX25hbWUuc3RhcnRzd2l0aChcImV1Y19qXCIpCiAgICAgICAgb3IgaWFuYV9uYW1lID09IFwiY3A5MzJcIgogICAgKToKICAgICAgICByZXR1cm4gW1wiSmFwYW5lc2VcIl0KICAgIGlmIGlhbmFfbmFtZS5zdGFydHN3aXRoKFwiZ2JcIikgb3IgaWFuYV9uYW1lIGluIFpIX05BTUVTOgogICAgICAgIHJldHVybiBbXCJDaGluZXNlXCIsIFwiQ2xhc3NpY2FsIENoaW5lc2VcIl0KICAgIGlmIGlhbmFfbmFtZS5zdGFydHN3aXRoKFwiaXNvMjAyMl9rclwiKSBvciBpYW5hX25hbWUgaW4gS09fTkFNRVM6CiAgICAgICAgcmV0dXJuIFtcIktvcmVhblwiXQoKICAgIHJldHVybiBbXQoKCkBscnVfY2FjaGUobWF4c2l6ZT1MQU5HVUFHRV9TVVBQT1JURURfQ09VTlQpCmRlZiBnZXRfdGFyZ2V0X2ZlYXR1cmVzKGxhbmd1YWdlOiBzdHIpIC0+IFR1cGxlW2Jvb2wsIGJvb2xdOgogICAgXCJcIlwiCiAgICBEZXRlcm1pbmUgbWFpbiBhc3BlY3RzIGZyb20gYSBzdXBwb3J0ZWQgbGFuZ3VhZ2UgaWYgaXQgY29udGFpbnMgYWNjZW50cyBhbmQgaWYgaXMgcHVyZSBMYXRpbi4KICAgIFwiXCJcIgogICAgdGFyZ2V0X2hhdmVfYWNjZW50czogYm9vbCA9IEZhbHNlCiAgICB0YXJnZXRfcHVyZV9sYXRpbjogYm9vbCA9IFRydWUKCiAgICBmb3IgY2hhcmFjdGVyIGluIEZSRVFVRU5DSUVTW2xhbmd1YWdlXToKICAgICAgICBpZiBub3QgdGFyZ2V0X2hhdmVfYWNjZW50cyBhbmQgaXNfYWNjZW50dWF0ZWQoY2hhcmFjdGVyKToKICAgICAgICAgICAgdGFyZ2V0X2hhdmVfYWNjZW50cyA9IFRydWUKICAgICAgICBpZiB0YXJnZXRfcHVyZV9sYXRpbiBhbmQgaXNfbGF0aW4oY2hhcmFjdGVyKSBpcyBGYWxzZToKICAgICAgICAgICAgdGFyZ2V0X3B1cmVfbGF0aW4gPSBGYWxzZQoKICAgIHJldHVybiB0YXJnZXRfaGF2ZV9hY2NlbnRzLCB0YXJnZXRfcHVyZV9sYXRpbgoKCmRlZiBhbHBoYWJldF9sYW5ndWFnZXMoCiAgICBjaGFyYWN0ZXJzOiBMaXN0W3N0cl0sIGlnbm9yZV9ub25fbGF0aW46IGJvb2wgPSBGYWxzZQopIC0+IExpc3Rbc3RyXToKICAgIFwiXCJcIgogICAgUmV0dXJuIGFzc29jaWF0ZWQgbGFuZ3VhZ2VzIGFzc29jaWF0ZWQgdG8gZ2l2ZW4gY2hhcmFjdGVycy4KICAgIFwiXCJcIgogICAgbGFuZ3VhZ2VzOiBMaXN0W1R1cGxlW3N0ciwgZmxvYXRdXSA9IFtdCgogICAgc291cmNlX2hhdmVfYWNjZW50cyA9IGFueShpc19hY2NlbnR1YXRlZChjaGFyYWN0ZXIpIGZvciBjaGFyYWN0ZXIgaW4gY2hhcmFjdGVycykKCiAgICBmb3IgbGFuZ3VhZ2UsIGxhbmd1YWdlX2NoYXJhY3RlcnMgaW4gRlJFUVVFTkNJRVMuaXRlbXMoKToKCiAgICAgICAgdGFyZ2V0X2hhdmVfYWNjZW50cywgdGFyZ2V0X3B1cmVfbGF0aW4gPSBnZXRfdGFyZ2V0X2ZlYXR1cmVzKGxhbmd1YWdlKQoKICAgICAgICBpZiBpZ25vcmVfbm9uX2xhdGluIGFuZCB0YXJnZXRfcHVyZV9sYXRpbiBpcyBGYWxzZToKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgaWYgdGFyZ2V0X2hhdmVfYWNjZW50cyBpcyBGYWxzZSBhbmQgc291cmNlX2hhdmVfYWNjZW50czoKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgY2hhcmFjdGVyX2NvdW50OiBpbnQgPSBsZW4obGFuZ3VhZ2VfY2hhcmFjdGVycykKCiAgICAgICAgY2hhcmFjdGVyX21hdGNoX2NvdW50OiBpbnQgPSBsZW4oCiAgICAgICAgICAgIFtjIGZvciBjIGluIGxhbmd1YWdlX2NoYXJhY3RlcnMgaWYgYyBpbiBjaGFyYWN0ZXJzXQogICAgICAgICkKCiAgICAgICAgcmF0aW86IGZsb2F0ID0gY2hhcmFjdGVyX21hdGNoX2NvdW50IC8gY2hhcmFjdGVyX2NvdW50CgogICAgICAgIGlmIHJhdGlvID49IDAuMjoKICAgICAgICAgICAgbGFuZ3VhZ2VzLmFwcGVuZCgobGFuZ3VhZ2UsIHJhdGlvKSkKCiAgICBsYW5ndWFnZXMgPSBzb3J0ZWQobGFuZ3VhZ2VzLCBrZXk9bGFtYmRhIHg6IHhbMV0sIHJldmVyc2U9VHJ1ZSkKCiAgICByZXR1cm4gW2NvbXBhdGlibGVfbGFuZ3VhZ2VbMF0gZm9yIGNvbXBhdGlibGVfbGFuZ3VhZ2UgaW4gbGFuZ3VhZ2VzXQoKCmRlZiBjaGFyYWN0ZXJzX3BvcHVsYXJpdHlfY29tcGFyZSgKICAgIGxhbmd1YWdlOiBzdHIsIG9yZGVyZWRfY2hhcmFjdGVyczogTGlzdFtzdHJdCikgLT4gZmxvYXQ6CiAgICBcIlwiXCIKICAgIERldGVybWluZSBpZiBhIG9yZGVyZWQgY2hhcmFjdGVycyBsaXN0IChieSBvY2N1cnJlbmNlIGZyb20gbW9zdCBhcHBlYXJhbmNlIHRvIHJhcmVzdCkgbWF0Y2ggYSBwYXJ0aWN1bGFyIGxhbmd1YWdlLgogICAgVGhlIHJlc3VsdCBpcyBhIHJhdGlvIGJldHdlZW4gMC4gKGFic29sdXRlbHkgbm8gY29ycmVzcG9uZGVuY2UpIGFuZCAxLiAobmVhciBwZXJmZWN0IGZpdCkuCiAgICBCZXdhcmUgdGhhdCBpcyBmdW5jdGlvbiBpcyBub3Qgc3RyaWN0IG9uIHRoZSBtYXRjaCBpbiBvcmRlciB0byBlYXNlIHRoZSBkZXRlY3Rpb24uIChNZWFuaW5nIGNsb3NlIG1hdGNoIGlzIDEuKQogICAgXCJcIlwiCiAgICBpZiBsYW5ndWFnZSBub3QgaW4gRlJFUVVFTkNJRVM6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcInt9IG5vdCBhdmFpbGFibGVcIi5mb3JtYXQobGFuZ3VhZ2UpKQoKICAgIGNoYXJhY3Rlcl9hcHByb3ZlZF9jb3VudDogaW50ID0gMAogICAgRlJFUVVFTkNJRVNfbGFuZ3VhZ2Vfc2V0ID0gc2V0KEZSRVFVRU5DSUVTW2xhbmd1YWdlXSkKCiAgICBmb3IgY2hhcmFjdGVyIGluIG9yZGVyZWRfY2hhcmFjdGVyczoKICAgICAgICBpZiBjaGFyYWN0ZXIgbm90IGluIEZSRVFVRU5DSUVTX2xhbmd1YWdlX3NldDoKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgY2hhcmFjdGVyc19iZWZvcmVfc291cmNlOiBMaXN0W3N0cl0gPSBGUkVRVUVOQ0lFU1tsYW5ndWFnZV1bCiAgICAgICAgICAgIDAgOiBGUkVRVUVOQ0lFU1tsYW5ndWFnZV0uaW5kZXgoY2hhcmFjdGVyKQogICAgICAgIF0KICAgICAgICBjaGFyYWN0ZXJzX2FmdGVyX3NvdXJjZTogTGlzdFtzdHJdID0gRlJFUVVFTkNJRVNbbGFuZ3VhZ2VdWwogICAgICAgICAgICBGUkVRVUVOQ0lFU1tsYW5ndWFnZV0uaW5kZXgoY2hhcmFjdGVyKSA6CiAgICAgICAgXQogICAgICAgIGNoYXJhY3RlcnNfYmVmb3JlOiBMaXN0W3N0cl0gPSBvcmRlcmVkX2NoYXJhY3RlcnNbCiAgICAgICAgICAgIDAgOiBvcmRlcmVkX2NoYXJhY3RlcnMuaW5kZXgoY2hhcmFjdGVyKQogICAgICAgIF0KICAgICAgICBjaGFyYWN0ZXJzX2FmdGVyOiBMaXN0W3N0cl0gPSBvcmRlcmVkX2NoYXJhY3RlcnNbCiAgICAgICAgICAgIG9yZGVyZWRfY2hhcmFjdGVycy5pbmRleChjaGFyYWN0ZXIpIDoKICAgICAgICBdCgogICAgICAgIGJlZm9yZV9tYXRjaF9jb3VudDogaW50ID0gbGVuKAogICAgICAgICAgICBzZXQoY2hhcmFjdGVyc19iZWZvcmUpICYgc2V0KGNoYXJhY3RlcnNfYmVmb3JlX3NvdXJjZSkKICAgICAgICApCgogICAgICAgIGFmdGVyX21hdGNoX2NvdW50OiBpbnQgPSBsZW4oCiAgICAgICAgICAgIHNldChjaGFyYWN0ZXJzX2FmdGVyKSAmIHNldChjaGFyYWN0ZXJzX2FmdGVyX3NvdXJjZSkKICAgICAgICApCgogICAgICAgIGlmIGxlbihjaGFyYWN0ZXJzX2JlZm9yZV9zb3VyY2UpID09IDAgYW5kIGJlZm9yZV9tYXRjaF9jb3VudCA8PSA0OgogICAgICAgICAgICBjaGFyYWN0ZXJfYXBwcm92ZWRfY291bnQgKz0gMQogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICBpZiBsZW4oY2hhcmFjdGVyc19hZnRlcl9zb3VyY2UpID09IDAgYW5kIGFmdGVyX21hdGNoX2NvdW50IDw9IDQ6CiAgICAgICAgICAgIGNoYXJhY3Rlcl9hcHByb3ZlZF9jb3VudCArPSAxCiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGlmICgKICAgICAgICAgICAgYmVmb3JlX21hdGNoX2NvdW50IC8gbGVuKGNoYXJhY3RlcnNfYmVmb3JlX3NvdXJjZSkgPj0gMC40CiAgICAgICAgICAgIG9yIGFmdGVyX21hdGNoX2NvdW50IC8gbGVuKGNoYXJhY3RlcnNfYWZ0ZXJfc291cmNlKSA+PSAwLjQKICAgICAgICApOgogICAgICAgICAgICBjaGFyYWN0ZXJfYXBwcm92ZWRfY291bnQgKz0gMQogICAgICAgICAgICBjb250aW51ZQoKICAgIHJldHVybiBjaGFyYWN0ZXJfYXBwcm92ZWRfY291bnQgLyBsZW4ob3JkZXJlZF9jaGFyYWN0ZXJzKQoKCmRlZiBhbHBoYV91bmljb2RlX3NwbGl0KGRlY29kZWRfc2VxdWVuY2U6IHN0cikgLT4gTGlzdFtzdHJdOgogICAgXCJcIlwiCiAgICBHaXZlbiBhIGRlY29kZWQgdGV4dCBzZXF1ZW5jZSwgcmV0dXJuIGEgbGlzdCBvZiBzdHIuIFVuaWNvZGUgcmFuZ2UgLyBhbHBoYWJldCBzZXBhcmF0aW9uLgogICAgRXguIGEgdGV4dCBjb250YWluaW5nIEVuZ2xpc2gvTGF0aW4gd2l0aCBhIGJpdCBhIEhlYnJldyB3aWxsIHJldHVybiB0d28gaXRlbXMgaW4gdGhlIHJlc3VsdGluZyBsaXN0OwogICAgT25lIGNvbnRhaW5pbmcgdGhlIGxhdGluIGxldHRlcnMgYW5kIHRoZSBvdGhlciBoZWJyZXcuCiAgICBcIlwiXCIKICAgIGxheWVyczogRGljdFtzdHIsIHN0cl0gPSB7fQoKICAgIGZvciBjaGFyYWN0ZXIgaW4gZGVjb2RlZF9zZXF1ZW5jZToKICAgICAgICBpZiBjaGFyYWN0ZXIuaXNhbHBoYSgpIGlzIEZhbHNlOgogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICBjaGFyYWN0ZXJfcmFuZ2U6IE9wdGlvbmFsW3N0cl0gPSB1bmljb2RlX3JhbmdlKGNoYXJhY3RlcikKCiAgICAgICAgaWYgY2hhcmFjdGVyX3JhbmdlIGlzIE5vbmU6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGxheWVyX3RhcmdldF9yYW5nZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUKCiAgICAgICAgZm9yIGRpc2NvdmVyZWRfcmFuZ2UgaW4gbGF5ZXJzOgogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICBpc19zdXNwaWNpb3VzbHlfc3VjY2Vzc2l2ZV9yYW5nZShkaXNjb3ZlcmVkX3JhbmdlLCBjaGFyYWN0ZXJfcmFuZ2UpCiAgICAgICAgICAgICAgICBpcyBGYWxzZQogICAgICAgICAgICApOgogICAgICAgICAgICAgICAgbGF5ZXJfdGFyZ2V0X3JhbmdlID0gZGlzY292ZXJlZF9yYW5nZQogICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgaWYgbGF5ZXJfdGFyZ2V0X3JhbmdlIGlzIE5vbmU6CiAgICAgICAgICAgIGxheWVyX3RhcmdldF9yYW5nZSA9IGNoYXJhY3Rlcl9yYW5nZQoKICAgICAgICBpZiBsYXllcl90YXJnZXRfcmFuZ2Ugbm90IGluIGxheWVyczoKICAgICAgICAgICAgbGF5ZXJzW2xheWVyX3RhcmdldF9yYW5nZV0gPSBjaGFyYWN0ZXIubG93ZXIoKQogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICBsYXllcnNbbGF5ZXJfdGFyZ2V0X3JhbmdlXSArPSBjaGFyYWN0ZXIubG93ZXIoKQoKICAgIHJldHVybiBsaXN0KGxheWVycy52YWx1ZXMoKSkKCgpkZWYgbWVyZ2VfY29oZXJlbmNlX3JhdGlvcyhyZXN1bHRzOiBMaXN0W0NvaGVyZW5jZU1hdGNoZXNdKSAtPiBDb2hlcmVuY2VNYXRjaGVzOgogICAgXCJcIlwiCiAgICBUaGlzIGZ1bmN0aW9uIG1lcmdlIHJlc3VsdHMgcHJldmlvdXNseSBnaXZlbiBieSB0aGUgZnVuY3Rpb24gY29oZXJlbmNlX3JhdGlvLgogICAgVGhlIHJldHVybiB0eXBlIGlzIHRoZSBzYW1lIGFzIGNvaGVyZW5jZV9yYXRpby4KICAgIFwiXCJcIgogICAgcGVyX2xhbmd1YWdlX3JhdGlvczogRGljdFtzdHIsIExpc3RbZmxvYXRdXSA9IHt9CiAgICBmb3IgcmVzdWx0IGluIHJlc3VsdHM6CiAgICAgICAgZm9yIHN1Yl9yZXN1bHQgaW4gcmVzdWx0OgogICAgICAgICAgICBsYW5ndWFnZSwgcmF0aW8gPSBzdWJfcmVzdWx0CiAgICAgICAgICAgIGlmIGxhbmd1YWdlIG5vdCBpbiBwZXJfbGFuZ3VhZ2VfcmF0aW9zOgogICAgICAgICAgICAgICAgcGVyX2xhbmd1YWdlX3JhdGlvc1tsYW5ndWFnZV0gPSBbcmF0aW9dCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBwZXJfbGFuZ3VhZ2VfcmF0aW9zW2xhbmd1YWdlXS5hcHBlbmQocmF0aW8pCgogICAgbWVyZ2UgPSBbCiAgICAgICAgKAogICAgICAgICAgICBsYW5ndWFnZSwKICAgICAgICAgICAgcm91bmQoCiAgICAgICAgICAgICAgICBzdW0ocGVyX2xhbmd1YWdlX3JhdGlvc1tsYW5ndWFnZV0pIC8gbGVuKHBlcl9sYW5ndWFnZV9yYXRpb3NbbGFuZ3VhZ2VdKSwKICAgICAgICAgICAgICAgIDQsCiAgICAgICAgICAgICksCiAgICAgICAgKQogICAgICAgIGZvciBsYW5ndWFnZSBpbiBwZXJfbGFuZ3VhZ2VfcmF0aW9zCiAgICBdCgogICAgcmV0dXJuIHNvcnRlZChtZXJnZSwga2V5PWxhbWJkYSB4OiB4WzFdLCByZXZlcnNlPVRydWUpCgoKQGxydV9jYWNoZShtYXhzaXplPTIwNDgpCmRlZiBjb2hlcmVuY2VfcmF0aW8oCiAgICBkZWNvZGVkX3NlcXVlbmNlOiBzdHIsIHRocmVzaG9sZDogZmxvYXQgPSAwLjEsIGxnX2luY2x1c2lvbjogT3B0aW9uYWxbc3RyXSA9IE5vbmUKKSAtPiBDb2hlcmVuY2VNYXRjaGVzOgogICAgXCJcIlwiCiAgICBEZXRlY3QgQU5ZIGxhbmd1YWdlIHRoYXQgY2FuIGJlIGlkZW50aWZpZWQgaW4gZ2l2ZW4gc2VxdWVuY2UuIFRoZSBzZXF1ZW5jZSB3aWxsIGJlIGFuYWx5c2VkIGJ5IGxheWVycy4KICAgIEEgbGF5ZXIgPSBDaGFyYWN0ZXIgZXh0cmFjdGlvbiBieSBhbHBoYWJldHMvcmFuZ2VzLgogICAgXCJcIlwiCgogICAgcmVzdWx0czogTGlzdFtUdXBsZVtzdHIsIGZsb2F0XV0gPSBbXQogICAgaWdub3JlX25vbl9sYXRpbjogYm9vbCA9IEZhbHNlCgogICAgc3VmZmljaWVudF9tYXRjaF9jb3VudDogaW50ID0gMAoKICAgIGxnX2luY2x1c2lvbl9saXN0ID0gbGdfaW5jbHVzaW9uLnNwbGl0KFwiLFwiKSBpZiBsZ19pbmNsdXNpb24gaXMgbm90IE5vbmUgZWxzZSBbXQogICAgaWYgXCJMYXRpbiBCYXNlZFwiIGluIGxnX2luY2x1c2lvbl9saXN0OgogICAgICAgIGlnbm9yZV9ub25fbGF0aW4gPSBUcnVlCiAgICAgICAgbGdfaW5jbHVzaW9uX2xpc3QucmVtb3ZlKFwiTGF0aW4gQmFzZWRcIikKCiAgICBmb3IgbGF5ZXIgaW4gYWxwaGFfdW5pY29kZV9zcGxpdChkZWNvZGVkX3NlcXVlbmNlKToKICAgICAgICBzZXF1ZW5jZV9mcmVxdWVuY2llczogQ291bnRlciA9IENvdW50ZXIobGF5ZXIpCiAgICAgICAgbW9zdF9jb21tb24gPSBzZXF1ZW5jZV9mcmVxdWVuY2llcy5tb3N0X2NvbW1vbigpCgogICAgICAgIGNoYXJhY3Rlcl9jb3VudDogaW50ID0gc3VtKG8gZm9yIGMsIG8gaW4gbW9zdF9jb21tb24pCgogICAgICAgIGlmIGNoYXJhY3Rlcl9jb3VudCA8PSBUT09fU01BTExfU0VRVUVOQ0U6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIHBvcHVsYXJfY2hhcmFjdGVyX29yZGVyZWQ6IExpc3Rbc3RyXSA9IFtjIGZvciBjLCBvIGluIG1vc3RfY29tbW9uXQoKICAgICAgICBmb3IgbGFuZ3VhZ2UgaW4gbGdfaW5jbHVzaW9uX2xpc3Qgb3IgYWxwaGFiZXRfbGFuZ3VhZ2VzKAogICAgICAgICAgICBwb3B1bGFyX2NoYXJhY3Rlcl9vcmRlcmVkLCBpZ25vcmVfbm9uX2xhdGluCiAgICAgICAgKToKICAgICAgICAgICAgcmF0aW86IGZsb2F0ID0gY2hhcmFjdGVyc19wb3B1bGFyaXR5X2NvbXBhcmUoCiAgICAgICAgICAgICAgICBsYW5ndWFnZSwgcG9wdWxhcl9jaGFyYWN0ZXJfb3JkZXJlZAogICAgICAgICAgICApCgogICAgICAgICAgICBpZiByYXRpbyA8IHRocmVzaG9sZDoKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGVsaWYgcmF0aW8gPj0gMC44OgogICAgICAgICAgICAgICAgc3VmZmljaWVudF9tYXRjaF9jb3VudCArPSAxCgogICAgICAgICAgICByZXN1bHRzLmFwcGVuZCgobGFuZ3VhZ2UsIHJvdW5kKHJhdGlvLCA0KSkpCgogICAgICAgICAgICBpZiBzdWZmaWNpZW50X21hdGNoX2NvdW50ID49IDM6CiAgICAgICAgICAgICAgICBicmVhawoKICAgIHJldHVybiBzb3J0ZWQocmVzdWx0cywga2V5PWxhbWJkYSB4OiB4WzFdLCByZXZlcnNlPVRydWUpCgoiIiIKbW9kdWxlX2RpY3RbImNoYXJzZXRfbm9ybWFsaXplciIrb3Muc2VwKyJhc3NldHMiK29zLnNlcCsiX19pbml0X18ucHkiXT0iIiIKIyAtKi0gY29kaW5nOiB1dGZfOCAtKi0KZnJvbSB0eXBpbmcgaW1wb3J0IERpY3QsIExpc3QKCkZSRVFVRU5DSUVTOiBEaWN0W3N0ciwgTGlzdFtzdHJdXSA9IHsKICAgIFwiRW5nbGlzaFwiOiBbCiAgICAgICAgXCJlXCIsCiAgICAgICAgXCJhXCIsCiAgICAgICAgXCJ0XCIsCiAgICAgICAgXCJpXCIsCiAgICAgICAgXCJvXCIsCiAgICAgICAgXCJuXCIsCiAgICAgICAgXCJzXCIsCiAgICAgICAgXCJyXCIsCiAgICAgICAgXCJoXCIsCiAgICAgICAgXCJsXCIsCiAgICAgICAgXCJkXCIsCiAgICAgICAgXCJjXCIsCiAgICAgICAgXCJ1XCIsCiAgICAgICAgXCJtXCIsCiAgICAgICAgXCJmXCIsCiAgICAgICAgXCJwXCIsCiAgICAgICAgXCJnXCIsCiAgICAgICAgXCJ3XCIsCiAgICAgICAgXCJ5XCIsCiAgICAgICAgXCJiXCIsCiAgICAgICAgXCJ2XCIsCiAgICAgICAgXCJrXCIsCiAgICAgICAgXCJ4XCIsCiAgICAgICAgXCJqXCIsCiAgICAgICAgXCJ6XCIsCiAgICAgICAgXCJxXCIsCiAgICBdLAogICAgXCJHZXJtYW5cIjogWwogICAgICAgIFwiZVwiLAogICAgICAgIFwiblwiLAogICAgICAgIFwiaVwiLAogICAgICAgIFwiclwiLAogICAgICAgIFwic1wiLAogICAgICAgIFwidFwiLAogICAgICAgIFwiYVwiLAogICAgICAgIFwiZFwiLAogICAgICAgIFwiaFwiLAogICAgICAgIFwidVwiLAogICAgICAgIFwibFwiLAogICAgICAgIFwiZ1wiLAogICAgICAgIFwib1wiLAogICAgICAgIFwiY1wiLAogICAgICAgIFwibVwiLAogICAgICAgIFwiYlwiLAogICAgICAgIFwiZlwiLAogICAgICAgIFwia1wiLAogICAgICAgIFwid1wiLAogICAgICAgIFwielwiLAogICAgICAgIFwicFwiLAogICAgICAgIFwidlwiLAogICAgICAgIFwiw7xcIiwKICAgICAgICBcIsOkXCIsCiAgICAgICAgXCLDtlwiLAogICAgICAgIFwialwiLAogICAgXSwKICAgIFwiRnJlbmNoXCI6IFsKICAgICAgICBcImVcIiwKICAgICAgICBcImFcIiwKICAgICAgICBcInNcIiwKICAgICAgICBcIm5cIiwKICAgICAgICBcImlcIiwKICAgICAgICBcInRcIiwKICAgICAgICBcInJcIiwKICAgICAgICBcImxcIiwKICAgICAgICBcInVcIiwKICAgICAgICBcIm9cIiwKICAgICAgICBcImRcIiwKICAgICAgICBcImNcIiwKICAgICAgICBcInBcIiwKICAgICAgICBcIm1cIiwKICAgICAgICBcIsOpXCIsCiAgICAgICAgXCJ2XCIsCiAgICAgICAgXCJnXCIsCiAgICAgICAgXCJmXCIsCiAgICAgICAgXCJiXCIsCiAgICAgICAgXCJoXCIsCiAgICAgICAgXCJxXCIsCiAgICAgICAgXCLDoFwiLAogICAgICAgIFwieFwiLAogICAgICAgIFwiw6hcIiwKICAgICAgICBcInlcIiwKICAgICAgICBcImpcIiwKICAgIF0sCiAgICBcIkR1dGNoXCI6IFsKICAgICAgICBcImVcIiwKICAgICAgICBcIm5cIiwKICAgICAgICBcImFcIiwKICAgICAgICBcImlcIiwKICAgICAgICBcInJcIiwKICAgICAgICBcInRcIiwKICAgICAgICBcIm9cIiwKICAgICAgICBcImRcIiwKICAgICAgICBcInNcIiwKICAgICAgICBcImxcIiwKICAgICAgICBcImdcIiwKICAgICAgICBcImhcIiwKICAgICAgICBcInZcIiwKICAgICAgICBcIm1cIiwKICAgICAgICBcInVcIiwKICAgICAgICBcImtcIiwKICAgICAgICBcImNcIiwKICAgICAgICBcInBcIiwKICAgICAgICBcImJcIiwKICAgICAgICBcIndcIiwKICAgICAgICBcImpcIiwKICAgICAgICBcInpcIiwKICAgICAgICBcImZcIiwKICAgICAgICBcInlcIiwKICAgICAgICBcInhcIiwKICAgICAgICBcIsOrXCIsCiAgICBdLAogICAgXCJJdGFsaWFuXCI6IFsKICAgICAgICBcImVcIiwKICAgICAgICBcImlcIiwKICAgICAgICBcImFcIiwKICAgICAgICBcIm9cIiwKICAgICAgICBcIm5cIiwKICAgICAgICBcImxcIiwKICAgICAgICBcInRcIiwKICAgICAgICBcInJcIiwKICAgICAgICBcInNcIiwKICAgICAgICBcImNcIiwKICAgICAgICBcImRcIiwKICAgICAgICBcInVcIiwKICAgICAgICBcInBcIiwKICAgICAgICBcIm1cIiwKICAgICAgICBcImdcIiwKICAgICAgICBcInZcIiwKICAgICAgICBcImZcIiwKICAgICAgICBcImJcIiwKICAgICAgICBcInpcIiwKICAgICAgICBcImhcIiwKICAgICAgICBcInFcIiwKICAgICAgICBcIsOoXCIsCiAgICAgICAgXCLDoFwiLAogICAgICAgIFwia1wiLAogICAgICAgIFwieVwiLAogICAgICAgIFwiw7JcIiwKICAgIF0sCiAgICBcIlBvbGlzaFwiOiBbCiAgICAgICAgXCJhXCIsCiAgICAgICAgXCJpXCIsCiAgICAgICAgXCJvXCIsCiAgICAgICAgXCJlXCIsCiAgICAgICAgXCJuXCIsCiAgICAgICAgXCJyXCIsCiAgICAgICAgXCJ6XCIsCiAgICAgICAgXCJ3XCIsCiAgICAgICAgXCJzXCIsCiAgICAgICAgXCJjXCIsCiAgICAgICAgXCJ0XCIsCiAgICAgICAgXCJrXCIsCiAgICAgICAgXCJ5XCIsCiAgICAgICAgXCJkXCIsCiAgICAgICAgXCJwXCIsCiAgICAgICAgXCJtXCIsCiAgICAgICAgXCJ1XCIsCiAgICAgICAgXCJsXCIsCiAgICAgICAgXCJqXCIsCiAgICAgICAgXCLFglwiLAogICAgICAgIFwiZ1wiLAogICAgICAgIFwiYlwiLAogICAgICAgIFwiaFwiLAogICAgICAgIFwixIVcIiwKICAgICAgICBcIsSZXCIsCiAgICAgICAgXCLDs1wiLAogICAgXSwKICAgIFwiU3BhbmlzaFwiOiBbCiAgICAgICAgXCJlXCIsCiAgICAgICAgXCJhXCIsCiAgICAgICAgXCJvXCIsCiAgICAgICAgXCJuXCIsCiAgICAgICAgXCJzXCIsCiAgICAgICAgXCJyXCIsCiAgICAgICAgXCJpXCIsCiAgICAgICAgXCJsXCIsCiAgICAgICAgXCJkXCIsCiAgICAgICAgXCJ0XCIsCiAgICAgICAgXCJjXCIsCiAgICAgICAgXCJ1XCIsCiAgICAgICAgXCJtXCIsCiAgICAgICAgXCJwXCIsCiAgICAgICAgXCJiXCIsCiAgICAgICAgXCJnXCIsCiAgICAgICAgXCJ2XCIsCiAgICAgICAgXCJmXCIsCiAgICAgICAgXCJ5XCIsCiAgICAgICAgXCLDs1wiLAogICAgICAgIFwiaFwiLAogICAgICAgIFwicVwiLAogICAgICAgIFwiw61cIiwKICAgICAgICBcImpcIiwKICAgICAgICBcInpcIiwKICAgICAgICBcIsOhXCIsCiAgICBdLAogICAgXCJSdXNzaWFuXCI6IFsKICAgICAgICBcItC+XCIsCiAgICAgICAgXCLQsFwiLAogICAgICAgIFwi0LVcIiwKICAgICAgICBcItC4XCIsCiAgICAgICAgXCLQvVwiLAogICAgICAgIFwi0YFcIiwKICAgICAgICBcItGCXCIsCiAgICAgICAgXCLRgFwiLAogICAgICAgIFwi0LJcIiwKICAgICAgICBcItC7XCIsCiAgICAgICAgXCLQulwiLAogICAgICAgIFwi0LxcIiwKICAgICAgICBcItC0XCIsCiAgICAgICAgXCLQv1wiLAogICAgICAgIFwi0YNcIiwKICAgICAgICBcItCzXCIsCiAgICAgICAgXCLRj1wiLAogICAgICAgIFwi0YtcIiwKICAgICAgICBcItC3XCIsCiAgICAgICAgXCLQsVwiLAogICAgICAgIFwi0LlcIiwKICAgICAgICBcItGMXCIsCiAgICAgICAgXCLRh1wiLAogICAgICAgIFwi0YVcIiwKICAgICAgICBcItC2XCIsCiAgICAgICAgXCLRhlwiLAogICAgXSwKICAgIFwiSmFwYW5lc2VcIjogWwogICAgICAgIFwi44GuXCIsCiAgICAgICAgXCLjgatcIiwKICAgICAgICBcIuOCi1wiLAogICAgICAgIFwi44GfXCIsCiAgICAgICAgXCLjga9cIiwKICAgICAgICBcIuODvFwiLAogICAgICAgIFwi44GoXCIsCiAgICAgICAgXCLjgZdcIiwKICAgICAgICBcIuOCklwiLAogICAgICAgIFwi44GnXCIsCiAgICAgICAgXCLjgaZcIiwKICAgICAgICBcIuOBjFwiLAogICAgICAgIFwi44GEXCIsCiAgICAgICAgXCLjg7NcIiwKICAgICAgICBcIuOCjFwiLAogICAgICAgIFwi44GqXCIsCiAgICAgICAgXCLlubRcIiwKICAgICAgICBcIuOCuVwiLAogICAgICAgIFwi44GjXCIsCiAgICAgICAgXCLjg6tcIiwKICAgICAgICBcIuOBi1wiLAogICAgICAgIFwi44KJXCIsCiAgICAgICAgXCLjgYJcIiwKICAgICAgICBcIuOBlVwiLAogICAgICAgIFwi44KCXCIsCiAgICAgICAgXCLjgopcIiwKICAgIF0sCiAgICBcIlBvcnR1Z3Vlc2VcIjogWwogICAgICAgIFwiYVwiLAogICAgICAgIFwiZVwiLAogICAgICAgIFwib1wiLAogICAgICAgIFwic1wiLAogICAgICAgIFwiaVwiLAogICAgICAgIFwiclwiLAogICAgICAgIFwiZFwiLAogICAgICAgIFwiblwiLAogICAgICAgIFwidFwiLAogICAgICAgIFwibVwiLAogICAgICAgIFwidVwiLAogICAgICAgIFwiY1wiLAogICAgICAgIFwibFwiLAogICAgICAgIFwicFwiLAogICAgICAgIFwiZ1wiLAogICAgICAgIFwidlwiLAogICAgICAgIFwiYlwiLAogICAgICAgIFwiZlwiLAogICAgICAgIFwiaFwiLAogICAgICAgIFwiw6NcIiwKICAgICAgICBcInFcIiwKICAgICAgICBcIsOpXCIsCiAgICAgICAgXCLDp1wiLAogICAgICAgIFwiw6FcIiwKICAgICAgICBcInpcIiwKICAgICAgICBcIsOtXCIsCiAgICBdLAogICAgXCJTd2VkaXNoXCI6IFsKICAgICAgICBcImVcIiwKICAgICAgICBcImFcIiwKICAgICAgICBcIm5cIiwKICAgICAgICBcInJcIiwKICAgICAgICBcInRcIiwKICAgICAgICBcInNcIiwKICAgICAgICBcImlcIiwKICAgICAgICBcImxcIiwKICAgICAgICBcImRcIiwKICAgICAgICBcIm9cIiwKICAgICAgICBcIm1cIiwKICAgICAgICBcImtcIiwKICAgICAgICBcImdcIiwKICAgICAgICBcInZcIiwKICAgICAgICBcImhcIiwKICAgICAgICBcImZcIiwKICAgICAgICBcInVcIiwKICAgICAgICBcInBcIiwKICAgICAgICBcIsOkXCIsCiAgICAgICAgXCJjXCIsCiAgICAgICAgXCJiXCIsCiAgICAgICAgXCLDtlwiLAogICAgICAgIFwiw6VcIiwKICAgICAgICBcInlcIiwKICAgICAgICBcImpcIiwKICAgICAgICBcInhcIiwKICAgIF0sCiAgICBcIkNoaW5lc2VcIjogWwogICAgICAgIFwi55qEXCIsCiAgICAgICAgXCLkuIBcIiwKICAgICAgICBcIuaYr1wiLAogICAgICAgIFwi5LiNXCIsCiAgICAgICAgXCLkuoZcIiwKICAgICAgICBcIuWcqFwiLAogICAgICAgIFwi5Lq6XCIsCiAgICAgICAgXCLmnIlcIiwKICAgICAgICBcIuaIkVwiLAogICAgICAgIFwi5LuWXCIsCiAgICAgICAgXCLov5lcIiwKICAgICAgICBcIuS4qlwiLAogICAgICAgIFwi5LusXCIsCiAgICAgICAgXCLkuK1cIiwKICAgICAgICBcIuadpVwiLAogICAgICAgIFwi5LiKXCIsCiAgICAgICAgXCLlpKdcIiwKICAgICAgICBcIuS4ulwiLAogICAgICAgIFwi5ZKMXCIsCiAgICAgICAgXCLlm71cIiwKICAgICAgICBcIuWcsFwiLAogICAgICAgIFwi5YiwXCIsCiAgICAgICAgXCLku6VcIiwKICAgICAgICBcIuivtFwiLAogICAgICAgIFwi5pe2XCIsCiAgICAgICAgXCLopoFcIiwKICAgICAgICBcIuWwsVwiLAogICAgICAgIFwi5Ye6XCIsCiAgICAgICAgXCLkvJpcIiwKICAgIF0sCiAgICBcIlVrcmFpbmlhblwiOiBbCiAgICAgICAgXCLQvlwiLAogICAgICAgIFwi0LBcIiwKICAgICAgICBcItC9XCIsCiAgICAgICAgXCLRllwiLAogICAgICAgIFwi0LhcIiwKICAgICAgICBcItGAXCIsCiAgICAgICAgXCLQslwiLAogICAgICAgIFwi0YJcIiwKICAgICAgICBcItC1XCIsCiAgICAgICAgXCLRgVwiLAogICAgICAgIFwi0LpcIiwKICAgICAgICBcItC7XCIsCiAgICAgICAgXCLRg1wiLAogICAgICAgIFwi0LRcIiwKICAgICAgICBcItC8XCIsCiAgICAgICAgXCLQv1wiLAogICAgICAgIFwi0LdcIiwKICAgICAgICBcItGPXCIsCiAgICAgICAgXCLRjFwiLAogICAgICAgIFwi0LFcIiwKICAgICAgICBcItCzXCIsCiAgICAgICAgXCLQuVwiLAogICAgICAgIFwi0YdcIiwKICAgICAgICBcItGFXCIsCiAgICAgICAgXCLRhlwiLAogICAgICAgIFwi0ZdcIiwKICAgIF0sCiAgICBcIk5vcndlZ2lhblwiOiBbCiAgICAgICAgXCJlXCIsCiAgICAgICAgXCJyXCIsCiAgICAgICAgXCJuXCIsCiAgICAgICAgXCJ0XCIsCiAgICAgICAgXCJhXCIsCiAgICAgICAgXCJzXCIsCiAgICAgICAgXCJpXCIsCiAgICAgICAgXCJvXCIsCiAgICAgICAgXCJsXCIsCiAgICAgICAgXCJkXCIsCiAgICAgICAgXCJnXCIsCiAgICAgICAgXCJrXCIsCiAgICAgICAgXCJtXCIsCiAgICAgICAgXCJ2XCIsCiAgICAgICAgXCJmXCIsCiAgICAgICAgXCJwXCIsCiAgICAgICAgXCJ1XCIsCiAgICAgICAgXCJiXCIsCiAgICAgICAgXCJoXCIsCiAgICAgICAgXCLDpVwiLAogICAgICAgIFwieVwiLAogICAgICAgIFwialwiLAogICAgICAgIFwiw7hcIiwKICAgICAgICBcImNcIiwKICAgICAgICBcIsOmXCIsCiAgICAgICAgXCJ3XCIsCiAgICBdLAogICAgXCJGaW5uaXNoXCI6IFsKICAgICAgICBcImFcIiwKICAgICAgICBcImlcIiwKICAgICAgICBcIm5cIiwKICAgICAgICBcInRcIiwKICAgICAgICBcImVcIiwKICAgICAgICBcInNcIiwKICAgICAgICBcImxcIiwKICAgICAgICBcIm9cIiwKICAgICAgICBcInVcIiwKICAgICAgICBcImtcIiwKICAgICAgICBcIsOkXCIsCiAgICAgICAgXCJtXCIsCiAgICAgICAgXCJyXCIsCiAgICAgICAgXCJ2XCIsCiAgICAgICAgXCJqXCIsCiAgICAgICAgXCJoXCIsCiAgICAgICAgXCJwXCIsCiAgICAgICAgXCJ5XCIsCiAgICAgICAgXCJkXCIsCiAgICAgICAgXCLDtlwiLAogICAgICAgIFwiZ1wiLAogICAgICAgIFwiY1wiLAogICAgICAgIFwiYlwiLAogICAgICAgIFwiZlwiLAogICAgICAgIFwid1wiLAogICAgICAgIFwielwiLAogICAgXSwKICAgIFwiVmlldG5hbWVzZVwiOiBbCiAgICAgICAgXCJuXCIsCiAgICAgICAgXCJoXCIsCiAgICAgICAgXCJ0XCIsCiAgICAgICAgXCJpXCIsCiAgICAgICAgXCJjXCIsCiAgICAgICAgXCJnXCIsCiAgICAgICAgXCJhXCIsCiAgICAgICAgXCJvXCIsCiAgICAgICAgXCJ1XCIsCiAgICAgICAgXCJtXCIsCiAgICAgICAgXCJsXCIsCiAgICAgICAgXCJyXCIsCiAgICAgICAgXCLDoFwiLAogICAgICAgIFwixJFcIiwKICAgICAgICBcInNcIiwKICAgICAgICBcImVcIiwKICAgICAgICBcInZcIiwKICAgICAgICBcInBcIiwKICAgICAgICBcImJcIiwKICAgICAgICBcInlcIiwKICAgICAgICBcIsawXCIsCiAgICAgICAgXCJkXCIsCiAgICAgICAgXCLDoVwiLAogICAgICAgIFwia1wiLAogICAgICAgIFwi4buZXCIsCiAgICAgICAgXCLhur9cIiwKICAgIF0sCiAgICBcIkN6ZWNoXCI6IFsKICAgICAgICBcIm9cIiwKICAgICAgICBcImVcIiwKICAgICAgICBcImFcIiwKICAgICAgICBcIm5cIiwKICAgICAgICBcInRcIiwKICAgICAgICBcInNcIiwKICAgICAgICBcImlcIiwKICAgICAgICBcImxcIiwKICAgICAgICBcInZcIiwKICAgICAgICBcInJcIiwKICAgICAgICBcImtcIiwKICAgICAgICBcImRcIiwKICAgICAgICBcInVcIiwKICAgICAgICBcIm1cIiwKICAgICAgICBcInBcIiwKICAgICAgICBcIsOtXCIsCiAgICAgICAgXCJjXCIsCiAgICAgICAgXCJoXCIsCiAgICAgICAgXCJ6XCIsCiAgICAgICAgXCLDoVwiLAogICAgICAgIFwieVwiLAogICAgICAgIFwialwiLAogICAgICAgIFwiYlwiLAogICAgICAgIFwixJtcIiwKICAgICAgICBcIsOpXCIsCiAgICAgICAgXCLFmVwiLAogICAgXSwKICAgIFwiSHVuZ2FyaWFuXCI6IFsKICAgICAgICBcImVcIiwKICAgICAgICBcImFcIiwKICAgICAgICBcInRcIiwKICAgICAgICBcImxcIiwKICAgICAgICBcInNcIiwKICAgICAgICBcIm5cIiwKICAgICAgICBcImtcIiwKICAgICAgICBcInJcIiwKICAgICAgICBcImlcIiwKICAgICAgICBcIm9cIiwKICAgICAgICBcInpcIiwKICAgICAgICBcIsOhXCIsCiAgICAgICAgXCLDqVwiLAogICAgICAgIFwiZ1wiLAogICAgICAgIFwibVwiLAogICAgICAgIFwiYlwiLAogICAgICAgIFwieVwiLAogICAgICAgIFwidlwiLAogICAgICAgIFwiZFwiLAogICAgICAgIFwiaFwiLAogICAgICAgIFwidVwiLAogICAgICAgIFwicFwiLAogICAgICAgIFwialwiLAogICAgICAgIFwiw7ZcIiwKICAgICAgICBcImZcIiwKICAgICAgICBcImNcIiwKICAgIF0sCiAgICBcIktvcmVhblwiOiBbCiAgICAgICAgXCLsnbRcIiwKICAgICAgICBcIuuLpFwiLAogICAgICAgIFwi7JeQXCIsCiAgICAgICAgXCLsnZhcIiwKICAgICAgICBcIuuKlFwiLAogICAgICAgIFwi66GcXCIsCiAgICAgICAgXCLtlZhcIiwKICAgICAgICBcIuydhFwiLAogICAgICAgIFwi6rCAXCIsCiAgICAgICAgXCLqs6BcIiwKICAgICAgICBcIuyngFwiLAogICAgICAgIFwi7IScXCIsCiAgICAgICAgXCLtlZxcIiwKICAgICAgICBcIuydgFwiLAogICAgICAgIFwi6riwXCIsCiAgICAgICAgXCLsnLxcIiwKICAgICAgICBcIuuFhFwiLAogICAgICAgIFwi64yAXCIsCiAgICAgICAgXCLsgqxcIiwKICAgICAgICBcIuyLnFwiLAogICAgICAgIFwi66W8XCIsCiAgICAgICAgXCLrpqxcIiwKICAgICAgICBcIuuPhFwiLAogICAgICAgIFwi7J24XCIsCiAgICAgICAgXCLsiqRcIiwKICAgICAgICBcIuydvFwiLAogICAgXSwKICAgIFwiSW5kb25lc2lhblwiOiBbCiAgICAgICAgXCJhXCIsCiAgICAgICAgXCJuXCIsCiAgICAgICAgXCJlXCIsCiAgICAgICAgXCJpXCIsCiAgICAgICAgXCJyXCIsCiAgICAgICAgXCJ0XCIsCiAgICAgICAgXCJ1XCIsCiAgICAgICAgXCJzXCIsCiAgICAgICAgXCJkXCIsCiAgICAgICAgXCJrXCIsCiAgICAgICAgXCJtXCIsCiAgICAgICAgXCJsXCIsCiAgICAgICAgXCJnXCIsCiAgICAgICAgXCJwXCIsCiAgICAgICAgXCJiXCIsCiAgICAgICAgXCJvXCIsCiAgICAgICAgXCJoXCIsCiAgICAgICAgXCJ5XCIsCiAgICAgICAgXCJqXCIsCiAgICAgICAgXCJjXCIsCiAgICAgICAgXCJ3XCIsCiAgICAgICAgXCJmXCIsCiAgICAgICAgXCJ2XCIsCiAgICAgICAgXCJ6XCIsCiAgICAgICAgXCJ4XCIsCiAgICAgICAgXCJxXCIsCiAgICBdLAogICAgXCJUdXJraXNoXCI6IFsKICAgICAgICBcImFcIiwKICAgICAgICBcImVcIiwKICAgICAgICBcImlcIiwKICAgICAgICBcIm5cIiwKICAgICAgICBcInJcIiwKICAgICAgICBcImxcIiwKICAgICAgICBcIsSxXCIsCiAgICAgICAgXCJrXCIsCiAgICAgICAgXCJkXCIsCiAgICAgICAgXCJ0XCIsCiAgICAgICAgXCJzXCIsCiAgICAgICAgXCJtXCIsCiAgICAgICAgXCJ5XCIsCiAgICAgICAgXCJ1XCIsCiAgICAgICAgXCJvXCIsCiAgICAgICAgXCJiXCIsCiAgICAgICAgXCLDvFwiLAogICAgICAgIFwixZ9cIiwKICAgICAgICBcInZcIiwKICAgICAgICBcImdcIiwKICAgICAgICBcInpcIiwKICAgICAgICBcImhcIiwKICAgICAgICBcImNcIiwKICAgICAgICBcInBcIiwKICAgICAgICBcIsOnXCIsCiAgICAgICAgXCLEn1wiLAogICAgXSwKICAgIFwiUm9tYW5pYW5cIjogWwogICAgICAgIFwiZVwiLAogICAgICAgIFwiaVwiLAogICAgICAgIFwiYVwiLAogICAgICAgIFwiclwiLAogICAgICAgIFwiblwiLAogICAgICAgIFwidFwiLAogICAgICAgIFwidVwiLAogICAgICAgIFwibFwiLAogICAgICAgIFwib1wiLAogICAgICAgIFwiY1wiLAogICAgICAgIFwic1wiLAogICAgICAgIFwiZFwiLAogICAgICAgIFwicFwiLAogICAgICAgIFwibVwiLAogICAgICAgIFwixINcIiwKICAgICAgICBcImZcIiwKICAgICAgICBcInZcIiwKICAgICAgICBcIsOuXCIsCiAgICAgICAgXCJnXCIsCiAgICAgICAgXCJiXCIsCiAgICAgICAgXCLImVwiLAogICAgICAgIFwiyJtcIiwKICAgICAgICBcInpcIiwKICAgICAgICBcImhcIiwKICAgICAgICBcIsOiXCIsCiAgICAgICAgXCJqXCIsCiAgICBdLAogICAgXCJGYXJzaVwiOiBbCiAgICAgICAgXCLYp1wiLAogICAgICAgIFwi24xcIiwKICAgICAgICBcItixXCIsCiAgICAgICAgXCLYr1wiLAogICAgICAgIFwi2YZcIiwKICAgICAgICBcItmHXCIsCiAgICAgICAgXCLZiFwiLAogICAgICAgIFwi2YVcIiwKICAgICAgICBcItiqXCIsCiAgICAgICAgXCLYqFwiLAogICAgICAgIFwi2LNcIiwKICAgICAgICBcItmEXCIsCiAgICAgICAgXCLaqVwiLAogICAgICAgIFwi2LRcIiwKICAgICAgICBcItiyXCIsCiAgICAgICAgXCLZgVwiLAogICAgICAgIFwi2q9cIiwKICAgICAgICBcIti5XCIsCiAgICAgICAgXCLYrlwiLAogICAgICAgIFwi2YJcIiwKICAgICAgICBcItisXCIsCiAgICAgICAgXCLYolwiLAogICAgICAgIFwi2b5cIiwKICAgICAgICBcItitXCIsCiAgICAgICAgXCLYt1wiLAogICAgICAgIFwi2LVcIiwKICAgIF0sCiAgICBcIkFyYWJpY1wiOiBbCiAgICAgICAgXCLYp1wiLAogICAgICAgIFwi2YRcIiwKICAgICAgICBcItmKXCIsCiAgICAgICAgXCLZhVwiLAogICAgICAgIFwi2YhcIiwKICAgICAgICBcItmGXCIsCiAgICAgICAgXCLYsVwiLAogICAgICAgIFwi2KpcIiwKICAgICAgICBcItioXCIsCiAgICAgICAgXCLYqVwiLAogICAgICAgIFwi2LlcIiwKICAgICAgICBcItivXCIsCiAgICAgICAgXCLYs1wiLAogICAgICAgIFwi2YFcIiwKICAgICAgICBcItmHXCIsCiAgICAgICAgXCLZg1wiLAogICAgICAgIFwi2YJcIiwKICAgICAgICBcItijXCIsCiAgICAgICAgXCLYrVwiLAogICAgICAgIFwi2KxcIiwKICAgICAgICBcIti0XCIsCiAgICAgICAgXCLYt1wiLAogICAgICAgIFwi2LVcIiwKICAgICAgICBcItmJXCIsCiAgICAgICAgXCLYrlwiLAogICAgICAgIFwi2KVcIiwKICAgIF0sCiAgICBcIkRhbmlzaFwiOiBbCiAgICAgICAgXCJlXCIsCiAgICAgICAgXCJyXCIsCiAgICAgICAgXCJuXCIsCiAgICAgICAgXCJ0XCIsCiAgICAgICAgXCJhXCIsCiAgICAgICAgXCJpXCIsCiAgICAgICAgXCJzXCIsCiAgICAgICAgXCJkXCIsCiAgICAgICAgXCJsXCIsCiAgICAgICAgXCJvXCIsCiAgICAgICAgXCJnXCIsCiAgICAgICAgXCJtXCIsCiAgICAgICAgXCJrXCIsCiAgICAgICAgXCJmXCIsCiAgICAgICAgXCJ2XCIsCiAgICAgICAgXCJ1XCIsCiAgICAgICAgXCJiXCIsCiAgICAgICAgXCJoXCIsCiAgICAgICAgXCJwXCIsCiAgICAgICAgXCLDpVwiLAogICAgICAgIFwieVwiLAogICAgICAgIFwiw7hcIiwKICAgICAgICBcIsOmXCIsCiAgICAgICAgXCJjXCIsCiAgICAgICAgXCJqXCIsCiAgICAgICAgXCJ3XCIsCiAgICBdLAogICAgXCJTZXJiaWFuXCI6IFsKICAgICAgICBcItCwXCIsCiAgICAgICAgXCLQuFwiLAogICAgICAgIFwi0L5cIiwKICAgICAgICBcItC1XCIsCiAgICAgICAgXCLQvVwiLAogICAgICAgIFwi0YBcIiwKICAgICAgICBcItGBXCIsCiAgICAgICAgXCLRg1wiLAogICAgICAgIFwi0YJcIiwKICAgICAgICBcItC6XCIsCiAgICAgICAgXCLRmFwiLAogICAgICAgIFwi0LJcIiwKICAgICAgICBcItC0XCIsCiAgICAgICAgXCLQvFwiLAogICAgICAgIFwi0L9cIiwKICAgICAgICBcItC7XCIsCiAgICAgICAgXCLQs1wiLAogICAgICAgIFwi0LdcIiwKICAgICAgICBcItCxXCIsCiAgICAgICAgXCJhXCIsCiAgICAgICAgXCJpXCIsCiAgICAgICAgXCJlXCIsCiAgICAgICAgXCJvXCIsCiAgICAgICAgXCJuXCIsCiAgICAgICAgXCLRhlwiLAogICAgICAgIFwi0YhcIiwKICAgIF0sCiAgICBcIkxpdGh1YW5pYW5cIjogWwogICAgICAgIFwiaVwiLAogICAgICAgIFwiYVwiLAogICAgICAgIFwic1wiLAogICAgICAgIFwib1wiLAogICAgICAgIFwiclwiLAogICAgICAgIFwiZVwiLAogICAgICAgIFwidFwiLAogICAgICAgIFwiblwiLAogICAgICAgIFwidVwiLAogICAgICAgIFwia1wiLAogICAgICAgIFwibVwiLAogICAgICAgIFwibFwiLAogICAgICAgIFwicFwiLAogICAgICAgIFwidlwiLAogICAgICAgIFwiZFwiLAogICAgICAgIFwialwiLAogICAgICAgIFwiZ1wiLAogICAgICAgIFwixJdcIiwKICAgICAgICBcImJcIiwKICAgICAgICBcInlcIiwKICAgICAgICBcIsWzXCIsCiAgICAgICAgXCLFoVwiLAogICAgICAgIFwixb5cIiwKICAgICAgICBcImNcIiwKICAgICAgICBcIsSFXCIsCiAgICAgICAgXCLEr1wiLAogICAgXSwKICAgIFwiU2xvdmVuZVwiOiBbCiAgICAgICAgXCJlXCIsCiAgICAgICAgXCJhXCIsCiAgICAgICAgXCJpXCIsCiAgICAgICAgXCJvXCIsCiAgICAgICAgXCJuXCIsCiAgICAgICAgXCJyXCIsCiAgICAgICAgXCJzXCIsCiAgICAgICAgXCJsXCIsCiAgICAgICAgXCJ0XCIsCiAgICAgICAgXCJqXCIsCiAgICAgICAgXCJ2XCIsCiAgICAgICAgXCJrXCIsCiAgICAgICAgXCJkXCIsCiAgICAgICAgXCJwXCIsCiAgICAgICAgXCJtXCIsCiAgICAgICAgXCJ1XCIsCiAgICAgICAgXCJ6XCIsCiAgICAgICAgXCJiXCIsCiAgICAgICAgXCJnXCIsCiAgICAgICAgXCJoXCIsCiAgICAgICAgXCLEjVwiLAogICAgICAgIFwiY1wiLAogICAgICAgIFwixaFcIiwKICAgICAgICBcIsW+XCIsCiAgICAgICAgXCJmXCIsCiAgICAgICAgXCJ5XCIsCiAgICBdLAogICAgXCJTbG92YWtcIjogWwogICAgICAgIFwib1wiLAogICAgICAgIFwiYVwiLAogICAgICAgIFwiZVwiLAogICAgICAgIFwiblwiLAogICAgICAgIFwiaVwiLAogICAgICAgIFwiclwiLAogICAgICAgIFwidlwiLAogICAgICAgIFwidFwiLAogICAgICAgIFwic1wiLAogICAgICAgIFwibFwiLAogICAgICAgIFwia1wiLAogICAgICAgIFwiZFwiLAogICAgICAgIFwibVwiLAogICAgICAgIFwicFwiLAogICAgICAgIFwidVwiLAogICAgICAgIFwiY1wiLAogICAgICAgIFwiaFwiLAogICAgICAgIFwialwiLAogICAgICAgIFwiYlwiLAogICAgICAgIFwielwiLAogICAgICAgIFwiw6FcIiwKICAgICAgICBcInlcIiwKICAgICAgICBcIsO9XCIsCiAgICAgICAgXCLDrVwiLAogICAgICAgIFwixI1cIiwKICAgICAgICBcIsOpXCIsCiAgICBdLAogICAgXCJIZWJyZXdcIjogWwogICAgICAgIFwi15lcIiwKICAgICAgICBcIteVXCIsCiAgICAgICAgXCLXlFwiLAogICAgICAgIFwi15xcIiwKICAgICAgICBcIteoXCIsCiAgICAgICAgXCLXkVwiLAogICAgICAgIFwi16pcIiwKICAgICAgICBcIteeXCIsCiAgICAgICAgXCLXkFwiLAogICAgICAgIFwi16lcIiwKICAgICAgICBcItegXCIsCiAgICAgICAgXCLXolwiLAogICAgICAgIFwi151cIiwKICAgICAgICBcIteTXCIsCiAgICAgICAgXCLXp1wiLAogICAgICAgIFwi15dcIiwKICAgICAgICBcItekXCIsCiAgICAgICAgXCLXoVwiLAogICAgICAgIFwi15tcIiwKICAgICAgICBcIteSXCIsCiAgICAgICAgXCLXmFwiLAogICAgICAgIFwi16ZcIiwKICAgICAgICBcItefXCIsCiAgICAgICAgXCLXllwiLAogICAgICAgIFwi15pcIiwKICAgIF0sCiAgICBcIkJ1bGdhcmlhblwiOiBbCiAgICAgICAgXCLQsFwiLAogICAgICAgIFwi0LhcIiwKICAgICAgICBcItC+XCIsCiAgICAgICAgXCLQtVwiLAogICAgICAgIFwi0L1cIiwKICAgICAgICBcItGCXCIsCiAgICAgICAgXCLRgFwiLAogICAgICAgIFwi0YFcIiwKICAgICAgICBcItCyXCIsCiAgICAgICAgXCLQu1wiLAogICAgICAgIFwi0LpcIiwKICAgICAgICBcItC0XCIsCiAgICAgICAgXCLQv1wiLAogICAgICAgIFwi0LxcIiwKICAgICAgICBcItC3XCIsCiAgICAgICAgXCLQs1wiLAogICAgICAgIFwi0Y9cIiwKICAgICAgICBcItGKXCIsCiAgICAgICAgXCLRg1wiLAogICAgICAgIFwi0LFcIiwKICAgICAgICBcItGHXCIsCiAgICAgICAgXCLRhlwiLAogICAgICAgIFwi0LlcIiwKICAgICAgICBcItC2XCIsCiAgICAgICAgXCLRiVwiLAogICAgICAgIFwi0YVcIiwKICAgIF0sCiAgICBcIkNyb2F0aWFuXCI6IFsKICAgICAgICBcImFcIiwKICAgICAgICBcImlcIiwKICAgICAgICBcIm9cIiwKICAgICAgICBcImVcIiwKICAgICAgICBcIm5cIiwKICAgICAgICBcInJcIiwKICAgICAgICBcImpcIiwKICAgICAgICBcInNcIiwKICAgICAgICBcInRcIiwKICAgICAgICBcInVcIiwKICAgICAgICBcImtcIiwKICAgICAgICBcImxcIiwKICAgICAgICBcInZcIiwKICAgICAgICBcImRcIiwKICAgICAgICBcIm1cIiwKICAgICAgICBcInBcIiwKICAgICAgICBcImdcIiwKICAgICAgICBcInpcIiwKICAgICAgICBcImJcIiwKICAgICAgICBcImNcIiwKICAgICAgICBcIsSNXCIsCiAgICAgICAgXCJoXCIsCiAgICAgICAgXCLFoVwiLAogICAgICAgIFwixb5cIiwKICAgICAgICBcIsSHXCIsCiAgICAgICAgXCJmXCIsCiAgICBdLAogICAgXCJIaW5kaVwiOiBbCiAgICAgICAgXCLgpJVcIiwKICAgICAgICBcIuCksFwiLAogICAgICAgIFwi4KS4XCIsCiAgICAgICAgXCLgpKhcIiwKICAgICAgICBcIuCkpFwiLAogICAgICAgIFwi4KSuXCIsCiAgICAgICAgXCLgpLlcIiwKICAgICAgICBcIuCkqlwiLAogICAgICAgIFwi4KSvXCIsCiAgICAgICAgXCLgpLJcIiwKICAgICAgICBcIuCktVwiLAogICAgICAgIFwi4KScXCIsCiAgICAgICAgXCLgpKZcIiwKICAgICAgICBcIuCkl1wiLAogICAgICAgIFwi4KSsXCIsCiAgICAgICAgXCLgpLZcIiwKICAgICAgICBcIuCkn1wiLAogICAgICAgIFwi4KSFXCIsCiAgICAgICAgXCLgpI9cIiwKICAgICAgICBcIuCkpVwiLAogICAgICAgIFwi4KStXCIsCiAgICAgICAgXCLgpKFcIiwKICAgICAgICBcIuCkmlwiLAogICAgICAgIFwi4KSnXCIsCiAgICAgICAgXCLgpLdcIiwKICAgICAgICBcIuCkh1wiLAogICAgXSwKICAgIFwiRXN0b25pYW5cIjogWwogICAgICAgIFwiYVwiLAogICAgICAgIFwiaVwiLAogICAgICAgIFwiZVwiLAogICAgICAgIFwic1wiLAogICAgICAgIFwidFwiLAogICAgICAgIFwibFwiLAogICAgICAgIFwidVwiLAogICAgICAgIFwiblwiLAogICAgICAgIFwib1wiLAogICAgICAgIFwia1wiLAogICAgICAgIFwiclwiLAogICAgICAgIFwiZFwiLAogICAgICAgIFwibVwiLAogICAgICAgIFwidlwiLAogICAgICAgIFwiZ1wiLAogICAgICAgIFwicFwiLAogICAgICAgIFwialwiLAogICAgICAgIFwiaFwiLAogICAgICAgIFwiw6RcIiwKICAgICAgICBcImJcIiwKICAgICAgICBcIsO1XCIsCiAgICAgICAgXCLDvFwiLAogICAgICAgIFwiZlwiLAogICAgICAgIFwiY1wiLAogICAgICAgIFwiw7ZcIiwKICAgICAgICBcInlcIiwKICAgIF0sCiAgICBcIlNpbXBsZSBFbmdsaXNoXCI6IFsKICAgICAgICBcImVcIiwKICAgICAgICBcImFcIiwKICAgICAgICBcInRcIiwKICAgICAgICBcImlcIiwKICAgICAgICBcIm9cIiwKICAgICAgICBcIm5cIiwKICAgICAgICBcInNcIiwKICAgICAgICBcInJcIiwKICAgICAgICBcImhcIiwKICAgICAgICBcImxcIiwKICAgICAgICBcImRcIiwKICAgICAgICBcImNcIiwKICAgICAgICBcIm1cIiwKICAgICAgICBcInVcIiwKICAgICAgICBcImZcIiwKICAgICAgICBcInBcIiwKICAgICAgICBcImdcIiwKICAgICAgICBcIndcIiwKICAgICAgICBcImJcIiwKICAgICAgICBcInlcIiwKICAgICAgICBcInZcIiwKICAgICAgICBcImtcIiwKICAgICAgICBcImpcIiwKICAgICAgICBcInhcIiwKICAgICAgICBcInpcIiwKICAgICAgICBcInFcIiwKICAgIF0sCiAgICBcIlRoYWlcIjogWwogICAgICAgIFwi4LiyXCIsCiAgICAgICAgXCLguJlcIiwKICAgICAgICBcIuC4o1wiLAogICAgICAgIFwi4LitXCIsCiAgICAgICAgXCLguIFcIiwKICAgICAgICBcIuC5gFwiLAogICAgICAgIFwi4LiHXCIsCiAgICAgICAgXCLguKFcIiwKICAgICAgICBcIuC4olwiLAogICAgICAgIFwi4LilXCIsCiAgICAgICAgXCLguKdcIiwKICAgICAgICBcIuC4lFwiLAogICAgICAgIFwi4LiXXCIsCiAgICAgICAgXCLguKpcIiwKICAgICAgICBcIuC4lVwiLAogICAgICAgIFwi4LiwXCIsCiAgICAgICAgXCLguJtcIiwKICAgICAgICBcIuC4mlwiLAogICAgICAgIFwi4LiEXCIsCiAgICAgICAgXCLguKtcIiwKICAgICAgICBcIuC5gVwiLAogICAgICAgIFwi4LiIXCIsCiAgICAgICAgXCLguJ5cIiwKICAgICAgICBcIuC4ilwiLAogICAgICAgIFwi4LiCXCIsCiAgICAgICAgXCLguYNcIiwKICAgIF0sCiAgICBcIkdyZWVrXCI6IFsKICAgICAgICBcIs6xXCIsCiAgICAgICAgXCLPhFwiLAogICAgICAgIFwizr9cIiwKICAgICAgICBcIs65XCIsCiAgICAgICAgXCLOtVwiLAogICAgICAgIFwizr1cIiwKICAgICAgICBcIs+BXCIsCiAgICAgICAgXCLPg1wiLAogICAgICAgIFwizrpcIiwKICAgICAgICBcIs63XCIsCiAgICAgICAgXCLPgFwiLAogICAgICAgIFwiz4JcIiwKICAgICAgICBcIs+FXCIsCiAgICAgICAgXCLOvFwiLAogICAgICAgIFwizrtcIiwKICAgICAgICBcIs6vXCIsCiAgICAgICAgXCLPjFwiLAogICAgICAgIFwizqxcIiwKICAgICAgICBcIs6zXCIsCiAgICAgICAgXCLOrVwiLAogICAgICAgIFwizrRcIiwKICAgICAgICBcIs6uXCIsCiAgICAgICAgXCLPiVwiLAogICAgICAgIFwiz4dcIiwKICAgICAgICBcIs64XCIsCiAgICAgICAgXCLPjVwiLAogICAgXSwKICAgIFwiVGFtaWxcIjogWwogICAgICAgIFwi4K6VXCIsCiAgICAgICAgXCLgrqRcIiwKICAgICAgICBcIuCuqlwiLAogICAgICAgIFwi4K6fXCIsCiAgICAgICAgXCLgrrBcIiwKICAgICAgICBcIuCurlwiLAogICAgICAgIFwi4K6yXCIsCiAgICAgICAgXCLgrqlcIiwKICAgICAgICBcIuCutVwiLAogICAgICAgIFwi4K6xXCIsCiAgICAgICAgXCLgrq9cIiwKICAgICAgICBcIuCus1wiLAogICAgICAgIFwi4K6aXCIsCiAgICAgICAgXCLgrqhcIiwKICAgICAgICBcIuCuh1wiLAogICAgICAgIFwi4K6jXCIsCiAgICAgICAgXCLgroVcIiwKICAgICAgICBcIuCuhlwiLAogICAgICAgIFwi4K60XCIsCiAgICAgICAgXCLgrplcIiwKICAgICAgICBcIuCujlwiLAogICAgICAgIFwi4K6JXCIsCiAgICAgICAgXCLgrpJcIiwKICAgICAgICBcIuCuuFwiLAogICAgXSwKICAgIFwiQ2xhc3NpY2FsIENoaW5lc2VcIjogWwogICAgICAgIFwi5LmLXCIsCiAgICAgICAgXCLlubRcIiwKICAgICAgICBcIueCulwiLAogICAgICAgIFwi5LmfXCIsCiAgICAgICAgXCLku6VcIiwKICAgICAgICBcIuS4gFwiLAogICAgICAgIFwi5Lq6XCIsCiAgICAgICAgXCLlhbZcIiwKICAgICAgICBcIuiAhVwiLAogICAgICAgIFwi5ZyLXCIsCiAgICAgICAgXCLmnIlcIiwKICAgICAgICBcIuS6jFwiLAogICAgICAgIFwi5Y2BXCIsCiAgICAgICAgXCLmlrxcIiwKICAgICAgICBcIuabsFwiLAogICAgICAgIFwi5LiJXCIsCiAgICAgICAgXCLkuI1cIiwKICAgICAgICBcIuWkp1wiLAogICAgICAgIFwi6ICMXCIsCiAgICAgICAgXCLlrZBcIiwKICAgICAgICBcIuS4rVwiLAogICAgICAgIFwi5LqUXCIsCiAgICAgICAgXCLlm5tcIiwKICAgIF0sCiAgICBcIkthemFraFwiOiBbCiAgICAgICAgXCLQsFwiLAogICAgICAgIFwi0YtcIiwKICAgICAgICBcItC1XCIsCiAgICAgICAgXCLQvVwiLAogICAgICAgIFwi0YJcIiwKICAgICAgICBcItGAXCIsCiAgICAgICAgXCLQu1wiLAogICAgICAgIFwi0ZZcIiwKICAgICAgICBcItC0XCIsCiAgICAgICAgXCLRgVwiLAogICAgICAgIFwi0LxcIiwKICAgICAgICBcItKbXCIsCiAgICAgICAgXCLQulwiLAogICAgICAgIFwi0L5cIiwKICAgICAgICBcItCxXCIsCiAgICAgICAgXCLQuFwiLAogICAgICAgIFwi0YNcIiwKICAgICAgICBcItKTXCIsCiAgICAgICAgXCLQtlwiLAogICAgICAgIFwi0qNcIiwKICAgICAgICBcItC3XCIsCiAgICAgICAgXCLRiFwiLAogICAgICAgIFwi0LlcIiwKICAgICAgICBcItC/XCIsCiAgICAgICAgXCLQs1wiLAogICAgICAgIFwi06lcIiwKICAgIF0sCn0KCiIiIgptb2R1bGVfZGljdFsiY2hhcnNldF9ub3JtYWxpemVyIitvcy5zZXArImNsaSIrb3Muc2VwKyJub3JtYWxpemVyLnB5Il09IiIiCiMgPCBpbmNsdWRlICd1bmljb2RlZGF0YTIucHknID4KCmltcG9ydCBhcmdwYXJzZQppbXBvcnQgc3lzCmZyb20ganNvbiBpbXBvcnQgZHVtcHMKZnJvbSBvcy5wYXRoIGltcG9ydCBhYnNwYXRoCmZyb20gcGxhdGZvcm0gaW1wb3J0IHB5dGhvbl92ZXJzaW9uCmZyb20gdHlwaW5nIGltcG9ydCBMaXN0Cgp0cnk6CiAgICBmcm9tIHVuaWNvZGVkYXRhMiBpbXBvcnQgdW5pZGF0YV92ZXJzaW9uCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIGZyb20gdW5pY29kZWRhdGEgaW1wb3J0IHVuaWRhdGFfdmVyc2lvbgoKZnJvbSBjaGFyc2V0X25vcm1hbGl6ZXIgaW1wb3J0IGZyb21fZnAKZnJvbSBjaGFyc2V0X25vcm1hbGl6ZXIubW9kZWxzIGltcG9ydCBDbGlEZXRlY3Rpb25SZXN1bHQKZnJvbSBjaGFyc2V0X25vcm1hbGl6ZXIudmVyc2lvbiBpbXBvcnQgX192ZXJzaW9uX18KCgpkZWYgcXVlcnlfeWVzX25vKHF1ZXN0aW9uOiBzdHIsIGRlZmF1bHQ6IHN0ciA9IFwieWVzXCIpIC0+IGJvb2w6CiAgICBcIlwiXCJBc2sgYSB5ZXMvbm8gcXVlc3Rpb24gdmlhIGlucHV0KCkgYW5kIHJldHVybiB0aGVpciBhbnN3ZXIuCgogICAgXCJxdWVzdGlvblwiIGlzIGEgc3RyaW5nIHRoYXQgaXMgcHJlc2VudGVkIHRvIHRoZSB1c2VyLgogICAgXCJkZWZhdWx0XCIgaXMgdGhlIHByZXN1bWVkIGFuc3dlciBpZiB0aGUgdXNlciBqdXN0IGhpdHMgPEVudGVyPi4KICAgICAgICBJdCBtdXN0IGJlIFwieWVzXCIgKHRoZSBkZWZhdWx0KSwgXCJub1wiIG9yIE5vbmUgKG1lYW5pbmcKICAgICAgICBhbiBhbnN3ZXIgaXMgcmVxdWlyZWQgb2YgdGhlIHVzZXIpLgoKICAgIFRoZSBcImFuc3dlclwiIHJldHVybiB2YWx1ZSBpcyBUcnVlIGZvciBcInllc1wiIG9yIEZhbHNlIGZvciBcIm5vXCIuCgogICAgQ3JlZGl0IGdvZXMgdG8gKGMpIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzMwNDE5ODYvYXB0LWNvbW1hbmQtbGluZS1pbnRlcmZhY2UtbGlrZS15ZXMtbm8taW5wdXQKICAgIFwiXCJcIgogICAgdmFsaWQgPSB7XCJ5ZXNcIjogVHJ1ZSwgXCJ5XCI6IFRydWUsIFwieWVcIjogVHJ1ZSwgXCJub1wiOiBGYWxzZSwgXCJuXCI6IEZhbHNlfQogICAgaWYgZGVmYXVsdCBpcyBOb25lOgogICAgICAgIHByb21wdCA9IFwiIFt5L25dIFwiCiAgICBlbGlmIGRlZmF1bHQgPT0gXCJ5ZXNcIjoKICAgICAgICBwcm9tcHQgPSBcIiBbWS9uXSBcIgogICAgZWxpZiBkZWZhdWx0ID09IFwibm9cIjoKICAgICAgICBwcm9tcHQgPSBcIiBbeS9OXSBcIgogICAgZWxzZToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFwiaW52YWxpZCBkZWZhdWx0IGFuc3dlcjogJyVzJ1wiICUgZGVmYXVsdCkKCiAgICB3aGlsZSBUcnVlOgogICAgICAgIHN5cy5zdGRvdXQud3JpdGUocXVlc3Rpb24gKyBwcm9tcHQpCiAgICAgICAgY2hvaWNlID0gaW5wdXQoKS5sb3dlcigpCiAgICAgICAgaWYgZGVmYXVsdCBpcyBub3QgTm9uZSBhbmQgY2hvaWNlID09IFwiXCI6CiAgICAgICAgICAgIHJldHVybiB2YWxpZFtkZWZhdWx0XQogICAgICAgIGVsaWYgY2hvaWNlIGluIHZhbGlkOgogICAgICAgICAgICByZXR1cm4gdmFsaWRbY2hvaWNlXQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHN5cy5zdGRvdXQud3JpdGUoXCJQbGVhc2UgcmVzcG9uZCB3aXRoICd5ZXMnIG9yICdubycgXCIgXCIob3IgJ3knIG9yICduJykuXFxuXCIpCgoKZGVmIGNsaV9kZXRlY3QoYXJndjogTGlzdFtzdHJdID0gTm9uZSkgLT4gaW50OgogICAgXCJcIlwiCiAgICBDTEkgYXNzaXN0YW50IHVzaW5nIEFSR1YgYW5kIEFyZ3VtZW50UGFyc2VyCiAgICA6cGFyYW0gYXJndjoKICAgIDpyZXR1cm46IDAgaWYgZXZlcnl0aGluZyBpcyBmaW5lLCBhbnl0aGluZyBlbHNlIGVxdWFsIHRyb3VibGUKICAgIFwiXCJcIgogICAgcGFyc2VyID0gYXJncGFyc2UuQXJndW1lbnRQYXJzZXIoCiAgICAgICAgZGVzY3JpcHRpb249XCJUaGUgUmVhbCBGaXJzdCBVbml2ZXJzYWwgQ2hhcnNldCBEZXRlY3Rvci4gXCIKICAgICAgICBcIkRpc2NvdmVyIG9yaWdpbmF0aW5nIGVuY29kaW5nIHVzZWQgb24gdGV4dCBmaWxlLiBcIgogICAgICAgIFwiTm9ybWFsaXplIHRleHQgdG8gdW5pY29kZS5cIgogICAgKQoKICAgIHBhcnNlci5hZGRfYXJndW1lbnQoCiAgICAgICAgXCJmaWxlc1wiLCB0eXBlPWFyZ3BhcnNlLkZpbGVUeXBlKFwicmJcIiksIG5hcmdzPVwiK1wiLCBoZWxwPVwiRmlsZShzKSB0byBiZSBhbmFseXNlZFwiCiAgICApCiAgICBwYXJzZXIuYWRkX2FyZ3VtZW50KAogICAgICAgIFwiLXZcIiwKICAgICAgICBcIi0tdmVyYm9zZVwiLAogICAgICAgIGFjdGlvbj1cInN0b3JlX3RydWVcIiwKICAgICAgICBkZWZhdWx0PUZhbHNlLAogICAgICAgIGRlc3Q9XCJ2ZXJib3NlXCIsCiAgICAgICAgaGVscD1cIkRpc3BsYXkgY29tcGxlbWVudGFyeSBpbmZvcm1hdGlvbiBhYm91dCBmaWxlIGlmIGFueS4gXCIKICAgICAgICBcIlN0ZG91dCB3aWxsIGNvbnRhaW4gbG9ncyBhYm91dCB0aGUgZGV0ZWN0aW9uIHByb2Nlc3MuXCIsCiAgICApCiAgICBwYXJzZXIuYWRkX2FyZ3VtZW50KAogICAgICAgIFwiLWFcIiwKICAgICAgICBcIi0td2l0aC1hbHRlcm5hdGl2ZVwiLAogICAgICAgIGFjdGlvbj1cInN0b3JlX3RydWVcIiwKICAgICAgICBkZWZhdWx0PUZhbHNlLAogICAgICAgIGRlc3Q9XCJhbHRlcm5hdGl2ZXNcIiwKICAgICAgICBoZWxwPVwiT3V0cHV0IGNvbXBsZW1lbnRhcnkgcG9zc2liaWxpdGllcyBpZiBhbnkuIFRvcC1sZXZlbCBKU09OIFdJTEwgYmUgYSBsaXN0LlwiLAogICAgKQogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgKICAgICAgICBcIi1uXCIsCiAgICAgICAgXCItLW5vcm1hbGl6ZVwiLAogICAgICAgIGFjdGlvbj1cInN0b3JlX3RydWVcIiwKICAgICAgICBkZWZhdWx0PUZhbHNlLAogICAgICAgIGRlc3Q9XCJub3JtYWxpemVcIiwKICAgICAgICBoZWxwPVwiUGVybWl0IHRvIG5vcm1hbGl6ZSBpbnB1dCBmaWxlLiBJZiBub3Qgc2V0LCBwcm9ncmFtIGRvZXMgbm90IHdyaXRlIGFueXRoaW5nLlwiLAogICAgKQogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgKICAgICAgICBcIi1tXCIsCiAgICAgICAgXCItLW1pbmltYWxcIiwKICAgICAgICBhY3Rpb249XCJzdG9yZV90cnVlXCIsCiAgICAgICAgZGVmYXVsdD1GYWxzZSwKICAgICAgICBkZXN0PVwibWluaW1hbFwiLAogICAgICAgIGhlbHA9XCJPbmx5IG91dHB1dCB0aGUgY2hhcnNldCBkZXRlY3RlZCB0byBTVERPVVQuIERpc2FibGluZyBKU09OIG91dHB1dC5cIiwKICAgICkKICAgIHBhcnNlci5hZGRfYXJndW1lbnQoCiAgICAgICAgXCItclwiLAogICAgICAgIFwiLS1yZXBsYWNlXCIsCiAgICAgICAgYWN0aW9uPVwic3RvcmVfdHJ1ZVwiLAogICAgICAgIGRlZmF1bHQ9RmFsc2UsCiAgICAgICAgZGVzdD1cInJlcGxhY2VcIiwKICAgICAgICBoZWxwPVwiUmVwbGFjZSBmaWxlIHdoZW4gdHJ5aW5nIHRvIG5vcm1hbGl6ZSBpdCBpbnN0ZWFkIG9mIGNyZWF0aW5nIGEgbmV3IG9uZS5cIiwKICAgICkKICAgIHBhcnNlci5hZGRfYXJndW1lbnQoCiAgICAgICAgXCItZlwiLAogICAgICAgIFwiLS1mb3JjZVwiLAogICAgICAgIGFjdGlvbj1cInN0b3JlX3RydWVcIiwKICAgICAgICBkZWZhdWx0PUZhbHNlLAogICAgICAgIGRlc3Q9XCJmb3JjZVwiLAogICAgICAgIGhlbHA9XCJSZXBsYWNlIGZpbGUgd2l0aG91dCBhc2tpbmcgaWYgeW91IGFyZSBzdXJlLCB1c2UgdGhpcyBmbGFnIHdpdGggY2F1dGlvbi5cIiwKICAgICkKICAgIHBhcnNlci5hZGRfYXJndW1lbnQoCiAgICAgICAgXCItdFwiLAogICAgICAgIFwiLS10aHJlc2hvbGRcIiwKICAgICAgICBhY3Rpb249XCJzdG9yZVwiLAogICAgICAgIGRlZmF1bHQ9MC4yLAogICAgICAgIHR5cGU9ZmxvYXQsCiAgICAgICAgZGVzdD1cInRocmVzaG9sZFwiLAogICAgICAgIGhlbHA9XCJEZWZpbmUgYSBjdXN0b20gbWF4aW11bSBhbW91bnQgb2YgY2hhb3MgYWxsb3dlZCBpbiBkZWNvZGVkIGNvbnRlbnQuIDAuIDw9IGNoYW9zIDw9IDEuXCIsCiAgICApCiAgICBwYXJzZXIuYWRkX2FyZ3VtZW50KAogICAgICAgIFwiLS12ZXJzaW9uXCIsCiAgICAgICAgYWN0aW9uPVwidmVyc2lvblwiLAogICAgICAgIHZlcnNpb249XCJDaGFyc2V0LU5vcm1hbGl6ZXIge30gLSBQeXRob24ge30gLSBVbmljb2RlIHt9XCIuZm9ybWF0KAogICAgICAgICAgICBfX3ZlcnNpb25fXywgcHl0aG9uX3ZlcnNpb24oKSwgdW5pZGF0YV92ZXJzaW9uCiAgICAgICAgKSwKICAgICAgICBoZWxwPVwiU2hvdyB2ZXJzaW9uIGluZm9ybWF0aW9uIGFuZCBleGl0LlwiLAogICAgKQoKICAgIGFyZ3MgPSBwYXJzZXIucGFyc2VfYXJncyhhcmd2KQoKICAgIGlmIGFyZ3MucmVwbGFjZSBpcyBUcnVlIGFuZCBhcmdzLm5vcm1hbGl6ZSBpcyBGYWxzZToKICAgICAgICBwcmludChcIlVzZSAtLXJlcGxhY2UgaW4gYWRkaXRpb24gb2YgLS1ub3JtYWxpemUgb25seS5cIiwgZmlsZT1zeXMuc3RkZXJyKQogICAgICAgIHJldHVybiAxCgogICAgaWYgYXJncy5mb3JjZSBpcyBUcnVlIGFuZCBhcmdzLnJlcGxhY2UgaXMgRmFsc2U6CiAgICAgICAgcHJpbnQoXCJVc2UgLS1mb3JjZSBpbiBhZGRpdGlvbiBvZiAtLXJlcGxhY2Ugb25seS5cIiwgZmlsZT1zeXMuc3RkZXJyKQogICAgICAgIHJldHVybiAxCgogICAgaWYgYXJncy50aHJlc2hvbGQgPCAwLjAgb3IgYXJncy50aHJlc2hvbGQgPiAxLjA6CiAgICAgICAgcHJpbnQoXCItLXRocmVzaG9sZCBWQUxVRSBzaG91bGQgYmUgYmV0d2VlbiAwLiBBTkQgMS5cIiwgZmlsZT1zeXMuc3RkZXJyKQogICAgICAgIHJldHVybiAxCgogICAgeF8gPSBbXQoKICAgIGZvciBteV9maWxlIGluIGFyZ3MuZmlsZXM6CgogICAgICAgIG1hdGNoZXMgPSBmcm9tX2ZwKG15X2ZpbGUsIHRocmVzaG9sZD1hcmdzLnRocmVzaG9sZCwgZXhwbGFpbj1hcmdzLnZlcmJvc2UpCgogICAgICAgIGJlc3RfZ3Vlc3MgPSBtYXRjaGVzLmJlc3QoKQoKICAgICAgICBpZiBiZXN0X2d1ZXNzIGlzIE5vbmU6CiAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpZGVudGlmeSBvcmlnaW5hdGluZyBlbmNvZGluZyBmb3IgXCJ7fVwiLiB7fScuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgIG15X2ZpbGUubmFtZSwKICAgICAgICAgICAgICAgICAgICBcIk1heWJlIHRyeSBpbmNyZWFzaW5nIG1heGltdW0gYW1vdW50IG9mIGNoYW9zLlwiCiAgICAgICAgICAgICAgICAgICAgaWYgYXJncy50aHJlc2hvbGQgPCAxLjAKICAgICAgICAgICAgICAgICAgICBlbHNlIFwiXCIsCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgZmlsZT1zeXMuc3RkZXJyLAogICAgICAgICAgICApCiAgICAgICAgICAgIHhfLmFwcGVuZCgKICAgICAgICAgICAgICAgIENsaURldGVjdGlvblJlc3VsdCgKICAgICAgICAgICAgICAgICAgICBhYnNwYXRoKG15X2ZpbGUubmFtZSksCiAgICAgICAgICAgICAgICAgICAgTm9uZSwKICAgICAgICAgICAgICAgICAgICBbXSwKICAgICAgICAgICAgICAgICAgICBbXSwKICAgICAgICAgICAgICAgICAgICBcIlVua25vd25cIiwKICAgICAgICAgICAgICAgICAgICBbXSwKICAgICAgICAgICAgICAgICAgICBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAxLjAsCiAgICAgICAgICAgICAgICAgICAgMC4wLAogICAgICAgICAgICAgICAgICAgIE5vbmUsCiAgICAgICAgICAgICAgICAgICAgVHJ1ZSwKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHhfLmFwcGVuZCgKICAgICAgICAgICAgICAgIENsaURldGVjdGlvblJlc3VsdCgKICAgICAgICAgICAgICAgICAgICBhYnNwYXRoKG15X2ZpbGUubmFtZSksCiAgICAgICAgICAgICAgICAgICAgYmVzdF9ndWVzcy5lbmNvZGluZywKICAgICAgICAgICAgICAgICAgICBiZXN0X2d1ZXNzLmVuY29kaW5nX2FsaWFzZXMsCiAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgICBjcAogICAgICAgICAgICAgICAgICAgICAgICBmb3IgY3AgaW4gYmVzdF9ndWVzcy5jb3VsZF9iZV9mcm9tX2NoYXJzZXQKICAgICAgICAgICAgICAgICAgICAgICAgaWYgY3AgIT0gYmVzdF9ndWVzcy5lbmNvZGluZwogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgYmVzdF9ndWVzcy5sYW5ndWFnZSwKICAgICAgICAgICAgICAgICAgICBiZXN0X2d1ZXNzLmFscGhhYmV0cywKICAgICAgICAgICAgICAgICAgICBiZXN0X2d1ZXNzLmJvbSwKICAgICAgICAgICAgICAgICAgICBiZXN0X2d1ZXNzLnBlcmNlbnRfY2hhb3MsCiAgICAgICAgICAgICAgICAgICAgYmVzdF9ndWVzcy5wZXJjZW50X2NvaGVyZW5jZSwKICAgICAgICAgICAgICAgICAgICBOb25lLAogICAgICAgICAgICAgICAgICAgIFRydWUsCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICkKCiAgICAgICAgICAgIGlmIGxlbihtYXRjaGVzKSA+IDEgYW5kIGFyZ3MuYWx0ZXJuYXRpdmVzOgogICAgICAgICAgICAgICAgZm9yIGVsIGluIG1hdGNoZXM6CiAgICAgICAgICAgICAgICAgICAgaWYgZWwgIT0gYmVzdF9ndWVzczoKICAgICAgICAgICAgICAgICAgICAgICAgeF8uYXBwZW5kKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2xpRGV0ZWN0aW9uUmVzdWx0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFic3BhdGgobXlfZmlsZS5uYW1lKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5lbmNvZGluZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5lbmNvZGluZ19hbGlhc2VzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGNwIGluIGVsLmNvdWxkX2JlX2Zyb21fY2hhcnNldAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBjcCAhPSBlbC5lbmNvZGluZwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwubGFuZ3VhZ2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuYWxwaGFiZXRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLmJvbSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5wZXJjZW50X2NoYW9zLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLnBlcmNlbnRfY29oZXJlbmNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5vbmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgIGlmIGFyZ3Mubm9ybWFsaXplIGlzIFRydWU6CgogICAgICAgICAgICAgICAgaWYgYmVzdF9ndWVzcy5lbmNvZGluZy5zdGFydHN3aXRoKFwidXRmXCIpIGlzIFRydWU6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICdcInt9XCIgZmlsZSBkb2VzIG5vdCBuZWVkIHRvIGJlIG5vcm1hbGl6ZWQsIGFzIGl0IGFscmVhZHkgY2FtZSBmcm9tIHVuaWNvZGUuJy5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBteV9maWxlLm5hbWUKICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZT1zeXMuc3RkZXJyLAogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICBpZiBteV9maWxlLmNsb3NlZCBpcyBGYWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgbXlfZmlsZS5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICBvXzogTGlzdFtzdHJdID0gbXlfZmlsZS5uYW1lLnNwbGl0KFwiLlwiKQoKICAgICAgICAgICAgICAgIGlmIGFyZ3MucmVwbGFjZSBpcyBGYWxzZToKICAgICAgICAgICAgICAgICAgICBvXy5pbnNlcnQoLTEsIGJlc3RfZ3Vlc3MuZW5jb2RpbmcpCiAgICAgICAgICAgICAgICAgICAgaWYgbXlfZmlsZS5jbG9zZWQgaXMgRmFsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIG15X2ZpbGUuY2xvc2UoKQogICAgICAgICAgICAgICAgZWxpZiAoCiAgICAgICAgICAgICAgICAgICAgYXJncy5mb3JjZSBpcyBGYWxzZQogICAgICAgICAgICAgICAgICAgIGFuZCBxdWVyeV95ZXNfbm8oCiAgICAgICAgICAgICAgICAgICAgICAgICdBcmUgeW91IHN1cmUgdG8gbm9ybWFsaXplIFwie31cIiBieSByZXBsYWNpbmcgaXQgPycuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbXlfZmlsZS5uYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgIFwibm9cIiwKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgaXMgRmFsc2UKICAgICAgICAgICAgICAgICk6CiAgICAgICAgICAgICAgICAgICAgaWYgbXlfZmlsZS5jbG9zZWQgaXMgRmFsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIG15X2ZpbGUuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHhfWzBdLnVuaWNvZGVfcGF0aCA9IGFic3BhdGgoXCIuL3t9XCIuZm9ybWF0KFwiLlwiLmpvaW4ob18pKSkKCiAgICAgICAgICAgICAgICAgICAgd2l0aCBvcGVuKHhfWzBdLnVuaWNvZGVfcGF0aCwgXCJ3XCIsIGVuY29kaW5nPVwidXRmLThcIikgYXMgZnA6CiAgICAgICAgICAgICAgICAgICAgICAgIGZwLndyaXRlKHN0cihiZXN0X2d1ZXNzKSkKICAgICAgICAgICAgICAgIGV4Y2VwdCBJT0Vycm9yIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoc3RyKGUpLCBmaWxlPXN5cy5zdGRlcnIpCiAgICAgICAgICAgICAgICAgICAgaWYgbXlfZmlsZS5jbG9zZWQgaXMgRmFsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIG15X2ZpbGUuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgIHJldHVybiAyCgogICAgICAgIGlmIG15X2ZpbGUuY2xvc2VkIGlzIEZhbHNlOgogICAgICAgICAgICBteV9maWxlLmNsb3NlKCkKCiAgICBpZiBhcmdzLm1pbmltYWwgaXMgRmFsc2U6CiAgICAgICAgcHJpbnQoCiAgICAgICAgICAgIGR1bXBzKAogICAgICAgICAgICAgICAgW2VsLl9fZGljdF9fIGZvciBlbCBpbiB4X10gaWYgbGVuKHhfKSA+IDEgZWxzZSB4X1swXS5fX2RpY3RfXywKICAgICAgICAgICAgICAgIGVuc3VyZV9hc2NpaT1UcnVlLAogICAgICAgICAgICAgICAgaW5kZW50PTQsCiAgICAgICAgICAgICkKICAgICAgICApCiAgICBlbHNlOgogICAgICAgIGZvciBteV9maWxlIGluIGFyZ3MuZmlsZXM6CiAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgXCIsIFwiLmpvaW4oCiAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgICBlbC5lbmNvZGluZyBvciBcInVuZGVmaW5lZFwiCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBlbCBpbiB4XwogICAgICAgICAgICAgICAgICAgICAgICBpZiBlbC5wYXRoID09IGFic3BhdGgobXlfZmlsZS5uYW1lKQogICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKQoKICAgIHJldHVybiAwCgoKaWYgX19uYW1lX18gPT0gXCJfX21haW5fX1wiOgogICAgY2xpX2RldGVjdCgpCgoiIiIKbW9kdWxlX2RpY3RbImNoYXJzZXRfbm9ybWFsaXplciIrb3Muc2VwKyJjbGkiK29zLnNlcCsiX19pbml0X18ucHkiXT0iIiIKCiIiIgoKaW1wb3J0IG9zCmltcG9ydCB0eXBlcwppbXBvcnQgemlwZmlsZQppbXBvcnQgc3lzCmltcG9ydCBpbwppbXBvcnQganNvbgoKY2xhc3MgWmlwSW1wb3J0ZXIob2JqZWN0KToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB6aXBfZmlsZSk6CiAgICAgICAgc2VsZi56ZmlsZSA9IHppcF9maWxlCiAgICAgICAgc2VsZi5fcGF0aHMgPSBbeC5maWxlbmFtZSBmb3IgeCBpbiBzZWxmLnpmaWxlLmZpbGVsaXN0XQogICAgICAgIAogICAgZGVmIF9tb2RfdG9fcGF0aHMoc2VsZiwgZnVsbG5hbWUpOgogICAgICAgICMgZ2V0IHRoZSBweXRob24gbW9kdWxlIG5hbWUKICAgICAgICBweV9maWxlbmFtZSA9IGZ1bGxuYW1lLnJlcGxhY2UoIi4iLCBvcy5zZXApICsgIi5weSIKICAgICAgICAjIGdldCB0aGUgZmlsZW5hbWUgaWYgaXQgaXMgYSBwYWNrYWdlL3N1YnBhY2thZ2UKICAgICAgICBweV9wYWNrYWdlID0gZnVsbG5hbWUucmVwbGFjZSgiLiIsIG9zLnNlcCkgKyBvcy5zZXAgKyAiX19pbml0X18ucHkiCiAgICAgICAgaWYgcHlfZmlsZW5hbWUgaW4gc2VsZi5fcGF0aHM6CiAgICAgICAgICAgIHJldHVybiBweV9maWxlbmFtZQogICAgICAgIGVsaWYgcHlfcGFja2FnZSBpbiBzZWxmLl9wYXRoczoKICAgICAgICAgICAgcmV0dXJuIHB5X3BhY2thZ2UKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiBmaW5kX21vZHVsZShzZWxmLCBmdWxsbmFtZSwgcGF0aCk6CiAgICAgICAgaWYgc2VsZi5fbW9kX3RvX3BhdGhzKGZ1bGxuYW1lKSBpcyBub3QgTm9uZToKICAgICAgICAgICAgcmV0dXJuIHNlbGYKICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiBsb2FkX21vZHVsZShzZWxmLCBmdWxsbmFtZSk6CiAgICAgICAgZmlsZW5hbWUgPSBzZWxmLl9tb2RfdG9fcGF0aHMoZnVsbG5hbWUpCiAgICAgICAgaWYgbm90IGZpbGVuYW1lIGluIHNlbGYuX3BhdGhzOgogICAgICAgICAgICByYWlzZSBJbXBvcnRFcnJvcihmdWxsbmFtZSkKICAgICAgICBuZXdfbW9kdWxlID0gdHlwZXMuTW9kdWxlVHlwZShmdWxsbmFtZSkKICAgICAgICBzeXMubW9kdWxlc1tmdWxsbmFtZV09bmV3X21vZHVsZQogICAgICAgIGlmIGZpbGVuYW1lLmVuZHN3aXRoKCJfX2luaXRfXy5weSIpOgogICAgICAgICAgICBuZXdfbW9kdWxlLl9fcGF0aF9fID0gW10gCiAgICAgICAgICAgIG5ld19tb2R1bGUuX19wYWNrYWdlX18gPSBmdWxsbmFtZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG5ld19tb2R1bGUuX19wYWNrYWdlX18gPSBmdWxsbmFtZS5ycGFydGl0aW9uKCcuJylbMF0KICAgICAgICBleGVjKHNlbGYuemZpbGUub3BlbihmaWxlbmFtZSwgJ3InKS5yZWFkKCksbmV3X21vZHVsZS5fX2RpY3RfXykKICAgICAgICBuZXdfbW9kdWxlLl9fZmlsZV9fID0gZmlsZW5hbWUKICAgICAgICBuZXdfbW9kdWxlLl9fbG9hZGVyX18gPSBzZWxmCiAgICAgICAgbmV3X21vZHVsZS5fX3NwZWNfXz1qc29uLl9fc3BlY19fICMgVG8gc2F0aXNmeSBpbXBvcnRsaWIuX2NvbW1vbi5nZXRfcGFja2FnZQogICAgICAgIHJldHVybiBuZXdfbW9kdWxlCgptb2R1bGVfemlwPXppcGZpbGUuWmlwRmlsZShpby5CeXRlc0lPKCksInciKQpmb3Iga2V5IGluIG1vZHVsZV9kaWN0OgogICAgbW9kdWxlX3ppcC53cml0ZXN0cihrZXksbW9kdWxlX2RpY3Rba2V5XSkKCm1vZHVsZV9pbXBvcnRlcj1aaXBJbXBvcnRlcihtb2R1bGVfemlwKQpzeXMubWV0YV9wYXRoLmluc2VydCgwLG1vZHVsZV9pbXBvcnRlcikKCiNmcm9tIGNoYXJzZXRfbm9ybWFsaXplciBpbXBvcnQgKgppbXBvcnQgY2hhcnNldF9ub3JtYWxpemVyCmdsb2JhbHMoKS51cGRhdGUoY2hhcnNldF9ub3JtYWxpemVyLl9fZGljdF9fKQogICAgCmlmIG1vZHVsZV9pbXBvcnRlciBpbiBzeXMubWV0YV9wYXRoOgogICAgc3lzLm1ldGFfcGF0aC5yZW1vdmUobW9kdWxlX2ltcG9ydGVyKQoKI2ZvciBrZXkgaW4gc3lzLm1vZHVsZXMuY29weSgpOgojICAgIGlmIGtleT09ImNoYXJzZXRfbm9ybWFsaXplciIgb3Iga2V5LnN0YXJ0c3dpdGgoImNoYXJzZXRfbm9ybWFsaXplci4iKToKIyAgICAgICAgZGVsIHN5cy5tb2R1bGVzW2tleV0K').decode("utf-8"),charset_normalizer_module.__dict__)
sys.modules["charset_normalizer"]=charset_normalizer_module


import types
import sys
import base64
idna_module=types.ModuleType("idna")
#setattr(idna_module,"__file__",__file__)
exec(base64.b64decode(b'aW1wb3J0IG9zCm1vZHVsZV9kaWN0PXt9Cm1vZHVsZV9kaWN0WyJpZG5hIitvcy5zZXArInV0czQ2ZGF0YS5weSJdPSIiIgojIFRoaXMgZmlsZSBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSB0b29scy9pZG5hLWRhdGEKIyB2aW06IHNldCBmaWxlZW5jb2Rpbmc9dXRmLTggOgoKZnJvbSB0eXBpbmcgaW1wb3J0IExpc3QsIFR1cGxlLCBVbmlvbgoKClwiXCJcIklETkEgTWFwcGluZyBUYWJsZSBmcm9tIFVUUzQ2LlwiXCJcIgoKCl9fdmVyc2lvbl9fID0gJzE0LjAuMCcKZGVmIF9zZWdfMCgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweDAsICczJyksCiAgICAoMHgxLCAnMycpLAogICAgKDB4MiwgJzMnKSwKICAgICgweDMsICczJyksCiAgICAoMHg0LCAnMycpLAogICAgKDB4NSwgJzMnKSwKICAgICgweDYsICczJyksCiAgICAoMHg3LCAnMycpLAogICAgKDB4OCwgJzMnKSwKICAgICgweDksICczJyksCiAgICAoMHhBLCAnMycpLAogICAgKDB4QiwgJzMnKSwKICAgICgweEMsICczJyksCiAgICAoMHhELCAnMycpLAogICAgKDB4RSwgJzMnKSwKICAgICgweEYsICczJyksCiAgICAoMHgxMCwgJzMnKSwKICAgICgweDExLCAnMycpLAogICAgKDB4MTIsICczJyksCiAgICAoMHgxMywgJzMnKSwKICAgICgweDE0LCAnMycpLAogICAgKDB4MTUsICczJyksCiAgICAoMHgxNiwgJzMnKSwKICAgICgweDE3LCAnMycpLAogICAgKDB4MTgsICczJyksCiAgICAoMHgxOSwgJzMnKSwKICAgICgweDFBLCAnMycpLAogICAgKDB4MUIsICczJyksCiAgICAoMHgxQywgJzMnKSwKICAgICgweDFELCAnMycpLAogICAgKDB4MUUsICczJyksCiAgICAoMHgxRiwgJzMnKSwKICAgICgweDIwLCAnMycpLAogICAgKDB4MjEsICczJyksCiAgICAoMHgyMiwgJzMnKSwKICAgICgweDIzLCAnMycpLAogICAgKDB4MjQsICczJyksCiAgICAoMHgyNSwgJzMnKSwKICAgICgweDI2LCAnMycpLAogICAgKDB4MjcsICczJyksCiAgICAoMHgyOCwgJzMnKSwKICAgICgweDI5LCAnMycpLAogICAgKDB4MkEsICczJyksCiAgICAoMHgyQiwgJzMnKSwKICAgICgweDJDLCAnMycpLAogICAgKDB4MkQsICdWJyksCiAgICAoMHgyRSwgJ1YnKSwKICAgICgweDJGLCAnMycpLAogICAgKDB4MzAsICdWJyksCiAgICAoMHgzMSwgJ1YnKSwKICAgICgweDMyLCAnVicpLAogICAgKDB4MzMsICdWJyksCiAgICAoMHgzNCwgJ1YnKSwKICAgICgweDM1LCAnVicpLAogICAgKDB4MzYsICdWJyksCiAgICAoMHgzNywgJ1YnKSwKICAgICgweDM4LCAnVicpLAogICAgKDB4MzksICdWJyksCiAgICAoMHgzQSwgJzMnKSwKICAgICgweDNCLCAnMycpLAogICAgKDB4M0MsICczJyksCiAgICAoMHgzRCwgJzMnKSwKICAgICgweDNFLCAnMycpLAogICAgKDB4M0YsICczJyksCiAgICAoMHg0MCwgJzMnKSwKICAgICgweDQxLCAnTScsICdhJyksCiAgICAoMHg0MiwgJ00nLCAnYicpLAogICAgKDB4NDMsICdNJywgJ2MnKSwKICAgICgweDQ0LCAnTScsICdkJyksCiAgICAoMHg0NSwgJ00nLCAnZScpLAogICAgKDB4NDYsICdNJywgJ2YnKSwKICAgICgweDQ3LCAnTScsICdnJyksCiAgICAoMHg0OCwgJ00nLCAnaCcpLAogICAgKDB4NDksICdNJywgJ2knKSwKICAgICgweDRBLCAnTScsICdqJyksCiAgICAoMHg0QiwgJ00nLCAnaycpLAogICAgKDB4NEMsICdNJywgJ2wnKSwKICAgICgweDRELCAnTScsICdtJyksCiAgICAoMHg0RSwgJ00nLCAnbicpLAogICAgKDB4NEYsICdNJywgJ28nKSwKICAgICgweDUwLCAnTScsICdwJyksCiAgICAoMHg1MSwgJ00nLCAncScpLAogICAgKDB4NTIsICdNJywgJ3InKSwKICAgICgweDUzLCAnTScsICdzJyksCiAgICAoMHg1NCwgJ00nLCAndCcpLAogICAgKDB4NTUsICdNJywgJ3UnKSwKICAgICgweDU2LCAnTScsICd2JyksCiAgICAoMHg1NywgJ00nLCAndycpLAogICAgKDB4NTgsICdNJywgJ3gnKSwKICAgICgweDU5LCAnTScsICd5JyksCiAgICAoMHg1QSwgJ00nLCAneicpLAogICAgKDB4NUIsICczJyksCiAgICAoMHg1QywgJzMnKSwKICAgICgweDVELCAnMycpLAogICAgKDB4NUUsICczJyksCiAgICAoMHg1RiwgJzMnKSwKICAgICgweDYwLCAnMycpLAogICAgKDB4NjEsICdWJyksCiAgICAoMHg2MiwgJ1YnKSwKICAgICgweDYzLCAnVicpLAogICAgXQoKZGVmIF9zZWdfMSgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweDY0LCAnVicpLAogICAgKDB4NjUsICdWJyksCiAgICAoMHg2NiwgJ1YnKSwKICAgICgweDY3LCAnVicpLAogICAgKDB4NjgsICdWJyksCiAgICAoMHg2OSwgJ1YnKSwKICAgICgweDZBLCAnVicpLAogICAgKDB4NkIsICdWJyksCiAgICAoMHg2QywgJ1YnKSwKICAgICgweDZELCAnVicpLAogICAgKDB4NkUsICdWJyksCiAgICAoMHg2RiwgJ1YnKSwKICAgICgweDcwLCAnVicpLAogICAgKDB4NzEsICdWJyksCiAgICAoMHg3MiwgJ1YnKSwKICAgICgweDczLCAnVicpLAogICAgKDB4NzQsICdWJyksCiAgICAoMHg3NSwgJ1YnKSwKICAgICgweDc2LCAnVicpLAogICAgKDB4NzcsICdWJyksCiAgICAoMHg3OCwgJ1YnKSwKICAgICgweDc5LCAnVicpLAogICAgKDB4N0EsICdWJyksCiAgICAoMHg3QiwgJzMnKSwKICAgICgweDdDLCAnMycpLAogICAgKDB4N0QsICczJyksCiAgICAoMHg3RSwgJzMnKSwKICAgICgweDdGLCAnMycpLAogICAgKDB4ODAsICdYJyksCiAgICAoMHg4MSwgJ1gnKSwKICAgICgweDgyLCAnWCcpLAogICAgKDB4ODMsICdYJyksCiAgICAoMHg4NCwgJ1gnKSwKICAgICgweDg1LCAnWCcpLAogICAgKDB4ODYsICdYJyksCiAgICAoMHg4NywgJ1gnKSwKICAgICgweDg4LCAnWCcpLAogICAgKDB4ODksICdYJyksCiAgICAoMHg4QSwgJ1gnKSwKICAgICgweDhCLCAnWCcpLAogICAgKDB4OEMsICdYJyksCiAgICAoMHg4RCwgJ1gnKSwKICAgICgweDhFLCAnWCcpLAogICAgKDB4OEYsICdYJyksCiAgICAoMHg5MCwgJ1gnKSwKICAgICgweDkxLCAnWCcpLAogICAgKDB4OTIsICdYJyksCiAgICAoMHg5MywgJ1gnKSwKICAgICgweDk0LCAnWCcpLAogICAgKDB4OTUsICdYJyksCiAgICAoMHg5NiwgJ1gnKSwKICAgICgweDk3LCAnWCcpLAogICAgKDB4OTgsICdYJyksCiAgICAoMHg5OSwgJ1gnKSwKICAgICgweDlBLCAnWCcpLAogICAgKDB4OUIsICdYJyksCiAgICAoMHg5QywgJ1gnKSwKICAgICgweDlELCAnWCcpLAogICAgKDB4OUUsICdYJyksCiAgICAoMHg5RiwgJ1gnKSwKICAgICgweEEwLCAnMycsICcgJyksCiAgICAoMHhBMSwgJ1YnKSwKICAgICgweEEyLCAnVicpLAogICAgKDB4QTMsICdWJyksCiAgICAoMHhBNCwgJ1YnKSwKICAgICgweEE1LCAnVicpLAogICAgKDB4QTYsICdWJyksCiAgICAoMHhBNywgJ1YnKSwKICAgICgweEE4LCAnMycsICcgzIgnKSwKICAgICgweEE5LCAnVicpLAogICAgKDB4QUEsICdNJywgJ2EnKSwKICAgICgweEFCLCAnVicpLAogICAgKDB4QUMsICdWJyksCiAgICAoMHhBRCwgJ0knKSwKICAgICgweEFFLCAnVicpLAogICAgKDB4QUYsICczJywgJyDMhCcpLAogICAgKDB4QjAsICdWJyksCiAgICAoMHhCMSwgJ1YnKSwKICAgICgweEIyLCAnTScsICcyJyksCiAgICAoMHhCMywgJ00nLCAnMycpLAogICAgKDB4QjQsICczJywgJyDMgScpLAogICAgKDB4QjUsICdNJywgJ868JyksCiAgICAoMHhCNiwgJ1YnKSwKICAgICgweEI3LCAnVicpLAogICAgKDB4QjgsICczJywgJyDMpycpLAogICAgKDB4QjksICdNJywgJzEnKSwKICAgICgweEJBLCAnTScsICdvJyksCiAgICAoMHhCQiwgJ1YnKSwKICAgICgweEJDLCAnTScsICcx4oGENCcpLAogICAgKDB4QkQsICdNJywgJzHigYQyJyksCiAgICAoMHhCRSwgJ00nLCAnM+KBhDQnKSwKICAgICgweEJGLCAnVicpLAogICAgKDB4QzAsICdNJywgJ8OgJyksCiAgICAoMHhDMSwgJ00nLCAnw6EnKSwKICAgICgweEMyLCAnTScsICfDoicpLAogICAgKDB4QzMsICdNJywgJ8OjJyksCiAgICAoMHhDNCwgJ00nLCAnw6QnKSwKICAgICgweEM1LCAnTScsICfDpScpLAogICAgKDB4QzYsICdNJywgJ8OmJyksCiAgICAoMHhDNywgJ00nLCAnw6cnKSwKICAgIF0KCmRlZiBfc2VnXzIoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXToKICAgIHJldHVybiBbCiAgICAoMHhDOCwgJ00nLCAnw6gnKSwKICAgICgweEM5LCAnTScsICfDqScpLAogICAgKDB4Q0EsICdNJywgJ8OqJyksCiAgICAoMHhDQiwgJ00nLCAnw6snKSwKICAgICgweENDLCAnTScsICfDrCcpLAogICAgKDB4Q0QsICdNJywgJ8OtJyksCiAgICAoMHhDRSwgJ00nLCAnw64nKSwKICAgICgweENGLCAnTScsICfDrycpLAogICAgKDB4RDAsICdNJywgJ8OwJyksCiAgICAoMHhEMSwgJ00nLCAnw7EnKSwKICAgICgweEQyLCAnTScsICfDsicpLAogICAgKDB4RDMsICdNJywgJ8OzJyksCiAgICAoMHhENCwgJ00nLCAnw7QnKSwKICAgICgweEQ1LCAnTScsICfDtScpLAogICAgKDB4RDYsICdNJywgJ8O2JyksCiAgICAoMHhENywgJ1YnKSwKICAgICgweEQ4LCAnTScsICfDuCcpLAogICAgKDB4RDksICdNJywgJ8O5JyksCiAgICAoMHhEQSwgJ00nLCAnw7onKSwKICAgICgweERCLCAnTScsICfDuycpLAogICAgKDB4REMsICdNJywgJ8O8JyksCiAgICAoMHhERCwgJ00nLCAnw70nKSwKICAgICgweERFLCAnTScsICfDvicpLAogICAgKDB4REYsICdEJywgJ3NzJyksCiAgICAoMHhFMCwgJ1YnKSwKICAgICgweEUxLCAnVicpLAogICAgKDB4RTIsICdWJyksCiAgICAoMHhFMywgJ1YnKSwKICAgICgweEU0LCAnVicpLAogICAgKDB4RTUsICdWJyksCiAgICAoMHhFNiwgJ1YnKSwKICAgICgweEU3LCAnVicpLAogICAgKDB4RTgsICdWJyksCiAgICAoMHhFOSwgJ1YnKSwKICAgICgweEVBLCAnVicpLAogICAgKDB4RUIsICdWJyksCiAgICAoMHhFQywgJ1YnKSwKICAgICgweEVELCAnVicpLAogICAgKDB4RUUsICdWJyksCiAgICAoMHhFRiwgJ1YnKSwKICAgICgweEYwLCAnVicpLAogICAgKDB4RjEsICdWJyksCiAgICAoMHhGMiwgJ1YnKSwKICAgICgweEYzLCAnVicpLAogICAgKDB4RjQsICdWJyksCiAgICAoMHhGNSwgJ1YnKSwKICAgICgweEY2LCAnVicpLAogICAgKDB4RjcsICdWJyksCiAgICAoMHhGOCwgJ1YnKSwKICAgICgweEY5LCAnVicpLAogICAgKDB4RkEsICdWJyksCiAgICAoMHhGQiwgJ1YnKSwKICAgICgweEZDLCAnVicpLAogICAgKDB4RkQsICdWJyksCiAgICAoMHhGRSwgJ1YnKSwKICAgICgweEZGLCAnVicpLAogICAgKDB4MTAwLCAnTScsICfEgScpLAogICAgKDB4MTAxLCAnVicpLAogICAgKDB4MTAyLCAnTScsICfEgycpLAogICAgKDB4MTAzLCAnVicpLAogICAgKDB4MTA0LCAnTScsICfEhScpLAogICAgKDB4MTA1LCAnVicpLAogICAgKDB4MTA2LCAnTScsICfEhycpLAogICAgKDB4MTA3LCAnVicpLAogICAgKDB4MTA4LCAnTScsICfEiScpLAogICAgKDB4MTA5LCAnVicpLAogICAgKDB4MTBBLCAnTScsICfEiycpLAogICAgKDB4MTBCLCAnVicpLAogICAgKDB4MTBDLCAnTScsICfEjScpLAogICAgKDB4MTBELCAnVicpLAogICAgKDB4MTBFLCAnTScsICfEjycpLAogICAgKDB4MTBGLCAnVicpLAogICAgKDB4MTEwLCAnTScsICfEkScpLAogICAgKDB4MTExLCAnVicpLAogICAgKDB4MTEyLCAnTScsICfEkycpLAogICAgKDB4MTEzLCAnVicpLAogICAgKDB4MTE0LCAnTScsICfElScpLAogICAgKDB4MTE1LCAnVicpLAogICAgKDB4MTE2LCAnTScsICfElycpLAogICAgKDB4MTE3LCAnVicpLAogICAgKDB4MTE4LCAnTScsICfEmScpLAogICAgKDB4MTE5LCAnVicpLAogICAgKDB4MTFBLCAnTScsICfEmycpLAogICAgKDB4MTFCLCAnVicpLAogICAgKDB4MTFDLCAnTScsICfEnScpLAogICAgKDB4MTFELCAnVicpLAogICAgKDB4MTFFLCAnTScsICfEnycpLAogICAgKDB4MTFGLCAnVicpLAogICAgKDB4MTIwLCAnTScsICfEoScpLAogICAgKDB4MTIxLCAnVicpLAogICAgKDB4MTIyLCAnTScsICfEoycpLAogICAgKDB4MTIzLCAnVicpLAogICAgKDB4MTI0LCAnTScsICfEpScpLAogICAgKDB4MTI1LCAnVicpLAogICAgKDB4MTI2LCAnTScsICfEpycpLAogICAgKDB4MTI3LCAnVicpLAogICAgKDB4MTI4LCAnTScsICfEqScpLAogICAgKDB4MTI5LCAnVicpLAogICAgKDB4MTJBLCAnTScsICfEqycpLAogICAgKDB4MTJCLCAnVicpLAogICAgXQoKZGVmIF9zZWdfMygpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweDEyQywgJ00nLCAnxK0nKSwKICAgICgweDEyRCwgJ1YnKSwKICAgICgweDEyRSwgJ00nLCAnxK8nKSwKICAgICgweDEyRiwgJ1YnKSwKICAgICgweDEzMCwgJ00nLCAnacyHJyksCiAgICAoMHgxMzEsICdWJyksCiAgICAoMHgxMzIsICdNJywgJ2lqJyksCiAgICAoMHgxMzQsICdNJywgJ8S1JyksCiAgICAoMHgxMzUsICdWJyksCiAgICAoMHgxMzYsICdNJywgJ8S3JyksCiAgICAoMHgxMzcsICdWJyksCiAgICAoMHgxMzksICdNJywgJ8S6JyksCiAgICAoMHgxM0EsICdWJyksCiAgICAoMHgxM0IsICdNJywgJ8S8JyksCiAgICAoMHgxM0MsICdWJyksCiAgICAoMHgxM0QsICdNJywgJ8S+JyksCiAgICAoMHgxM0UsICdWJyksCiAgICAoMHgxM0YsICdNJywgJ2zCtycpLAogICAgKDB4MTQxLCAnTScsICfFgicpLAogICAgKDB4MTQyLCAnVicpLAogICAgKDB4MTQzLCAnTScsICfFhCcpLAogICAgKDB4MTQ0LCAnVicpLAogICAgKDB4MTQ1LCAnTScsICfFhicpLAogICAgKDB4MTQ2LCAnVicpLAogICAgKDB4MTQ3LCAnTScsICfFiCcpLAogICAgKDB4MTQ4LCAnVicpLAogICAgKDB4MTQ5LCAnTScsICfKvG4nKSwKICAgICgweDE0QSwgJ00nLCAnxYsnKSwKICAgICgweDE0QiwgJ1YnKSwKICAgICgweDE0QywgJ00nLCAnxY0nKSwKICAgICgweDE0RCwgJ1YnKSwKICAgICgweDE0RSwgJ00nLCAnxY8nKSwKICAgICgweDE0RiwgJ1YnKSwKICAgICgweDE1MCwgJ00nLCAnxZEnKSwKICAgICgweDE1MSwgJ1YnKSwKICAgICgweDE1MiwgJ00nLCAnxZMnKSwKICAgICgweDE1MywgJ1YnKSwKICAgICgweDE1NCwgJ00nLCAnxZUnKSwKICAgICgweDE1NSwgJ1YnKSwKICAgICgweDE1NiwgJ00nLCAnxZcnKSwKICAgICgweDE1NywgJ1YnKSwKICAgICgweDE1OCwgJ00nLCAnxZknKSwKICAgICgweDE1OSwgJ1YnKSwKICAgICgweDE1QSwgJ00nLCAnxZsnKSwKICAgICgweDE1QiwgJ1YnKSwKICAgICgweDE1QywgJ00nLCAnxZ0nKSwKICAgICgweDE1RCwgJ1YnKSwKICAgICgweDE1RSwgJ00nLCAnxZ8nKSwKICAgICgweDE1RiwgJ1YnKSwKICAgICgweDE2MCwgJ00nLCAnxaEnKSwKICAgICgweDE2MSwgJ1YnKSwKICAgICgweDE2MiwgJ00nLCAnxaMnKSwKICAgICgweDE2MywgJ1YnKSwKICAgICgweDE2NCwgJ00nLCAnxaUnKSwKICAgICgweDE2NSwgJ1YnKSwKICAgICgweDE2NiwgJ00nLCAnxacnKSwKICAgICgweDE2NywgJ1YnKSwKICAgICgweDE2OCwgJ00nLCAnxaknKSwKICAgICgweDE2OSwgJ1YnKSwKICAgICgweDE2QSwgJ00nLCAnxasnKSwKICAgICgweDE2QiwgJ1YnKSwKICAgICgweDE2QywgJ00nLCAnxa0nKSwKICAgICgweDE2RCwgJ1YnKSwKICAgICgweDE2RSwgJ00nLCAnxa8nKSwKICAgICgweDE2RiwgJ1YnKSwKICAgICgweDE3MCwgJ00nLCAnxbEnKSwKICAgICgweDE3MSwgJ1YnKSwKICAgICgweDE3MiwgJ00nLCAnxbMnKSwKICAgICgweDE3MywgJ1YnKSwKICAgICgweDE3NCwgJ00nLCAnxbUnKSwKICAgICgweDE3NSwgJ1YnKSwKICAgICgweDE3NiwgJ00nLCAnxbcnKSwKICAgICgweDE3NywgJ1YnKSwKICAgICgweDE3OCwgJ00nLCAnw78nKSwKICAgICgweDE3OSwgJ00nLCAnxbonKSwKICAgICgweDE3QSwgJ1YnKSwKICAgICgweDE3QiwgJ00nLCAnxbwnKSwKICAgICgweDE3QywgJ1YnKSwKICAgICgweDE3RCwgJ00nLCAnxb4nKSwKICAgICgweDE3RSwgJ1YnKSwKICAgICgweDE3RiwgJ00nLCAncycpLAogICAgKDB4MTgwLCAnVicpLAogICAgKDB4MTgxLCAnTScsICfJkycpLAogICAgKDB4MTgyLCAnTScsICfGgycpLAogICAgKDB4MTgzLCAnVicpLAogICAgKDB4MTg0LCAnTScsICfGhScpLAogICAgKDB4MTg1LCAnVicpLAogICAgKDB4MTg2LCAnTScsICfJlCcpLAogICAgKDB4MTg3LCAnTScsICfGiCcpLAogICAgKDB4MTg4LCAnVicpLAogICAgKDB4MTg5LCAnTScsICfJlicpLAogICAgKDB4MThBLCAnTScsICfJlycpLAogICAgKDB4MThCLCAnTScsICfGjCcpLAogICAgKDB4MThDLCAnVicpLAogICAgKDB4MThFLCAnTScsICfHnScpLAogICAgKDB4MThGLCAnTScsICfJmScpLAogICAgKDB4MTkwLCAnTScsICfJmycpLAogICAgKDB4MTkxLCAnTScsICfGkicpLAogICAgKDB4MTkyLCAnVicpLAogICAgKDB4MTkzLCAnTScsICfJoCcpLAogICAgXQoKZGVmIF9zZWdfNCgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweDE5NCwgJ00nLCAnyaMnKSwKICAgICgweDE5NSwgJ1YnKSwKICAgICgweDE5NiwgJ00nLCAnyaknKSwKICAgICgweDE5NywgJ00nLCAnyagnKSwKICAgICgweDE5OCwgJ00nLCAnxpknKSwKICAgICgweDE5OSwgJ1YnKSwKICAgICgweDE5QywgJ00nLCAnya8nKSwKICAgICgweDE5RCwgJ00nLCAnybInKSwKICAgICgweDE5RSwgJ1YnKSwKICAgICgweDE5RiwgJ00nLCAnybUnKSwKICAgICgweDFBMCwgJ00nLCAnxqEnKSwKICAgICgweDFBMSwgJ1YnKSwKICAgICgweDFBMiwgJ00nLCAnxqMnKSwKICAgICgweDFBMywgJ1YnKSwKICAgICgweDFBNCwgJ00nLCAnxqUnKSwKICAgICgweDFBNSwgJ1YnKSwKICAgICgweDFBNiwgJ00nLCAnyoAnKSwKICAgICgweDFBNywgJ00nLCAnxqgnKSwKICAgICgweDFBOCwgJ1YnKSwKICAgICgweDFBOSwgJ00nLCAnyoMnKSwKICAgICgweDFBQSwgJ1YnKSwKICAgICgweDFBQywgJ00nLCAnxq0nKSwKICAgICgweDFBRCwgJ1YnKSwKICAgICgweDFBRSwgJ00nLCAnyognKSwKICAgICgweDFBRiwgJ00nLCAnxrAnKSwKICAgICgweDFCMCwgJ1YnKSwKICAgICgweDFCMSwgJ00nLCAnyoonKSwKICAgICgweDFCMiwgJ00nLCAnyosnKSwKICAgICgweDFCMywgJ00nLCAnxrQnKSwKICAgICgweDFCNCwgJ1YnKSwKICAgICgweDFCNSwgJ00nLCAnxrYnKSwKICAgICgweDFCNiwgJ1YnKSwKICAgICgweDFCNywgJ00nLCAnypInKSwKICAgICgweDFCOCwgJ00nLCAnxrknKSwKICAgICgweDFCOSwgJ1YnKSwKICAgICgweDFCQywgJ00nLCAnxr0nKSwKICAgICgweDFCRCwgJ1YnKSwKICAgICgweDFDNCwgJ00nLCAnZMW+JyksCiAgICAoMHgxQzcsICdNJywgJ2xqJyksCiAgICAoMHgxQ0EsICdNJywgJ25qJyksCiAgICAoMHgxQ0QsICdNJywgJ8eOJyksCiAgICAoMHgxQ0UsICdWJyksCiAgICAoMHgxQ0YsICdNJywgJ8eQJyksCiAgICAoMHgxRDAsICdWJyksCiAgICAoMHgxRDEsICdNJywgJ8eSJyksCiAgICAoMHgxRDIsICdWJyksCiAgICAoMHgxRDMsICdNJywgJ8eUJyksCiAgICAoMHgxRDQsICdWJyksCiAgICAoMHgxRDUsICdNJywgJ8eWJyksCiAgICAoMHgxRDYsICdWJyksCiAgICAoMHgxRDcsICdNJywgJ8eYJyksCiAgICAoMHgxRDgsICdWJyksCiAgICAoMHgxRDksICdNJywgJ8eaJyksCiAgICAoMHgxREEsICdWJyksCiAgICAoMHgxREIsICdNJywgJ8ecJyksCiAgICAoMHgxREMsICdWJyksCiAgICAoMHgxREUsICdNJywgJ8efJyksCiAgICAoMHgxREYsICdWJyksCiAgICAoMHgxRTAsICdNJywgJ8ehJyksCiAgICAoMHgxRTEsICdWJyksCiAgICAoMHgxRTIsICdNJywgJ8ejJyksCiAgICAoMHgxRTMsICdWJyksCiAgICAoMHgxRTQsICdNJywgJ8elJyksCiAgICAoMHgxRTUsICdWJyksCiAgICAoMHgxRTYsICdNJywgJ8enJyksCiAgICAoMHgxRTcsICdWJyksCiAgICAoMHgxRTgsICdNJywgJ8epJyksCiAgICAoMHgxRTksICdWJyksCiAgICAoMHgxRUEsICdNJywgJ8erJyksCiAgICAoMHgxRUIsICdWJyksCiAgICAoMHgxRUMsICdNJywgJ8etJyksCiAgICAoMHgxRUQsICdWJyksCiAgICAoMHgxRUUsICdNJywgJ8evJyksCiAgICAoMHgxRUYsICdWJyksCiAgICAoMHgxRjEsICdNJywgJ2R6JyksCiAgICAoMHgxRjQsICdNJywgJ8e1JyksCiAgICAoMHgxRjUsICdWJyksCiAgICAoMHgxRjYsICdNJywgJ8aVJyksCiAgICAoMHgxRjcsICdNJywgJ8a/JyksCiAgICAoMHgxRjgsICdNJywgJ8e5JyksCiAgICAoMHgxRjksICdWJyksCiAgICAoMHgxRkEsICdNJywgJ8e7JyksCiAgICAoMHgxRkIsICdWJyksCiAgICAoMHgxRkMsICdNJywgJ8e9JyksCiAgICAoMHgxRkQsICdWJyksCiAgICAoMHgxRkUsICdNJywgJ8e/JyksCiAgICAoMHgxRkYsICdWJyksCiAgICAoMHgyMDAsICdNJywgJ8iBJyksCiAgICAoMHgyMDEsICdWJyksCiAgICAoMHgyMDIsICdNJywgJ8iDJyksCiAgICAoMHgyMDMsICdWJyksCiAgICAoMHgyMDQsICdNJywgJ8iFJyksCiAgICAoMHgyMDUsICdWJyksCiAgICAoMHgyMDYsICdNJywgJ8iHJyksCiAgICAoMHgyMDcsICdWJyksCiAgICAoMHgyMDgsICdNJywgJ8iJJyksCiAgICAoMHgyMDksICdWJyksCiAgICAoMHgyMEEsICdNJywgJ8iLJyksCiAgICAoMHgyMEIsICdWJyksCiAgICAoMHgyMEMsICdNJywgJ8iNJyksCiAgICBdCgpkZWYgX3NlZ181KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4MjBELCAnVicpLAogICAgKDB4MjBFLCAnTScsICfIjycpLAogICAgKDB4MjBGLCAnVicpLAogICAgKDB4MjEwLCAnTScsICfIkScpLAogICAgKDB4MjExLCAnVicpLAogICAgKDB4MjEyLCAnTScsICfIkycpLAogICAgKDB4MjEzLCAnVicpLAogICAgKDB4MjE0LCAnTScsICfIlScpLAogICAgKDB4MjE1LCAnVicpLAogICAgKDB4MjE2LCAnTScsICfIlycpLAogICAgKDB4MjE3LCAnVicpLAogICAgKDB4MjE4LCAnTScsICfImScpLAogICAgKDB4MjE5LCAnVicpLAogICAgKDB4MjFBLCAnTScsICfImycpLAogICAgKDB4MjFCLCAnVicpLAogICAgKDB4MjFDLCAnTScsICfInScpLAogICAgKDB4MjFELCAnVicpLAogICAgKDB4MjFFLCAnTScsICfInycpLAogICAgKDB4MjFGLCAnVicpLAogICAgKDB4MjIwLCAnTScsICfGnicpLAogICAgKDB4MjIxLCAnVicpLAogICAgKDB4MjIyLCAnTScsICfIoycpLAogICAgKDB4MjIzLCAnVicpLAogICAgKDB4MjI0LCAnTScsICfIpScpLAogICAgKDB4MjI1LCAnVicpLAogICAgKDB4MjI2LCAnTScsICfIpycpLAogICAgKDB4MjI3LCAnVicpLAogICAgKDB4MjI4LCAnTScsICfIqScpLAogICAgKDB4MjI5LCAnVicpLAogICAgKDB4MjJBLCAnTScsICfIqycpLAogICAgKDB4MjJCLCAnVicpLAogICAgKDB4MjJDLCAnTScsICfIrScpLAogICAgKDB4MjJELCAnVicpLAogICAgKDB4MjJFLCAnTScsICfIrycpLAogICAgKDB4MjJGLCAnVicpLAogICAgKDB4MjMwLCAnTScsICfIsScpLAogICAgKDB4MjMxLCAnVicpLAogICAgKDB4MjMyLCAnTScsICfIsycpLAogICAgKDB4MjMzLCAnVicpLAogICAgKDB4MjNBLCAnTScsICfisaUnKSwKICAgICgweDIzQiwgJ00nLCAnyLwnKSwKICAgICgweDIzQywgJ1YnKSwKICAgICgweDIzRCwgJ00nLCAnxponKSwKICAgICgweDIzRSwgJ00nLCAn4rGmJyksCiAgICAoMHgyM0YsICdWJyksCiAgICAoMHgyNDEsICdNJywgJ8mCJyksCiAgICAoMHgyNDIsICdWJyksCiAgICAoMHgyNDMsICdNJywgJ8aAJyksCiAgICAoMHgyNDQsICdNJywgJ8qJJyksCiAgICAoMHgyNDUsICdNJywgJ8qMJyksCiAgICAoMHgyNDYsICdNJywgJ8mHJyksCiAgICAoMHgyNDcsICdWJyksCiAgICAoMHgyNDgsICdNJywgJ8mJJyksCiAgICAoMHgyNDksICdWJyksCiAgICAoMHgyNEEsICdNJywgJ8mLJyksCiAgICAoMHgyNEIsICdWJyksCiAgICAoMHgyNEMsICdNJywgJ8mNJyksCiAgICAoMHgyNEQsICdWJyksCiAgICAoMHgyNEUsICdNJywgJ8mPJyksCiAgICAoMHgyNEYsICdWJyksCiAgICAoMHgyQjAsICdNJywgJ2gnKSwKICAgICgweDJCMSwgJ00nLCAnyaYnKSwKICAgICgweDJCMiwgJ00nLCAnaicpLAogICAgKDB4MkIzLCAnTScsICdyJyksCiAgICAoMHgyQjQsICdNJywgJ8m5JyksCiAgICAoMHgyQjUsICdNJywgJ8m7JyksCiAgICAoMHgyQjYsICdNJywgJ8qBJyksCiAgICAoMHgyQjcsICdNJywgJ3cnKSwKICAgICgweDJCOCwgJ00nLCAneScpLAogICAgKDB4MkI5LCAnVicpLAogICAgKDB4MkQ4LCAnMycsICcgzIYnKSwKICAgICgweDJEOSwgJzMnLCAnIMyHJyksCiAgICAoMHgyREEsICczJywgJyDMiicpLAogICAgKDB4MkRCLCAnMycsICcgzKgnKSwKICAgICgweDJEQywgJzMnLCAnIMyDJyksCiAgICAoMHgyREQsICczJywgJyDMiycpLAogICAgKDB4MkRFLCAnVicpLAogICAgKDB4MkUwLCAnTScsICfJoycpLAogICAgKDB4MkUxLCAnTScsICdsJyksCiAgICAoMHgyRTIsICdNJywgJ3MnKSwKICAgICgweDJFMywgJ00nLCAneCcpLAogICAgKDB4MkU0LCAnTScsICfKlScpLAogICAgKDB4MkU1LCAnVicpLAogICAgKDB4MzQwLCAnTScsICfMgCcpLAogICAgKDB4MzQxLCAnTScsICfMgScpLAogICAgKDB4MzQyLCAnVicpLAogICAgKDB4MzQzLCAnTScsICfMkycpLAogICAgKDB4MzQ0LCAnTScsICfMiMyBJyksCiAgICAoMHgzNDUsICdNJywgJ865JyksCiAgICAoMHgzNDYsICdWJyksCiAgICAoMHgzNEYsICdJJyksCiAgICAoMHgzNTAsICdWJyksCiAgICAoMHgzNzAsICdNJywgJ82xJyksCiAgICAoMHgzNzEsICdWJyksCiAgICAoMHgzNzIsICdNJywgJ82zJyksCiAgICAoMHgzNzMsICdWJyksCiAgICAoMHgzNzQsICdNJywgJ8q5JyksCiAgICAoMHgzNzUsICdWJyksCiAgICAoMHgzNzYsICdNJywgJ823JyksCiAgICAoMHgzNzcsICdWJyksCiAgICBdCgpkZWYgX3NlZ182KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4Mzc4LCAnWCcpLAogICAgKDB4MzdBLCAnMycsICcgzrknKSwKICAgICgweDM3QiwgJ1YnKSwKICAgICgweDM3RSwgJzMnLCAnOycpLAogICAgKDB4MzdGLCAnTScsICfPsycpLAogICAgKDB4MzgwLCAnWCcpLAogICAgKDB4Mzg0LCAnMycsICcgzIEnKSwKICAgICgweDM4NSwgJzMnLCAnIMyIzIEnKSwKICAgICgweDM4NiwgJ00nLCAnzqwnKSwKICAgICgweDM4NywgJ00nLCAnwrcnKSwKICAgICgweDM4OCwgJ00nLCAnzq0nKSwKICAgICgweDM4OSwgJ00nLCAnzq4nKSwKICAgICgweDM4QSwgJ00nLCAnzq8nKSwKICAgICgweDM4QiwgJ1gnKSwKICAgICgweDM4QywgJ00nLCAnz4wnKSwKICAgICgweDM4RCwgJ1gnKSwKICAgICgweDM4RSwgJ00nLCAnz40nKSwKICAgICgweDM4RiwgJ00nLCAnz44nKSwKICAgICgweDM5MCwgJ1YnKSwKICAgICgweDM5MSwgJ00nLCAnzrEnKSwKICAgICgweDM5MiwgJ00nLCAnzrInKSwKICAgICgweDM5MywgJ00nLCAnzrMnKSwKICAgICgweDM5NCwgJ00nLCAnzrQnKSwKICAgICgweDM5NSwgJ00nLCAnzrUnKSwKICAgICgweDM5NiwgJ00nLCAnzrYnKSwKICAgICgweDM5NywgJ00nLCAnzrcnKSwKICAgICgweDM5OCwgJ00nLCAnzrgnKSwKICAgICgweDM5OSwgJ00nLCAnzrknKSwKICAgICgweDM5QSwgJ00nLCAnzronKSwKICAgICgweDM5QiwgJ00nLCAnzrsnKSwKICAgICgweDM5QywgJ00nLCAnzrwnKSwKICAgICgweDM5RCwgJ00nLCAnzr0nKSwKICAgICgweDM5RSwgJ00nLCAnzr4nKSwKICAgICgweDM5RiwgJ00nLCAnzr8nKSwKICAgICgweDNBMCwgJ00nLCAnz4AnKSwKICAgICgweDNBMSwgJ00nLCAnz4EnKSwKICAgICgweDNBMiwgJ1gnKSwKICAgICgweDNBMywgJ00nLCAnz4MnKSwKICAgICgweDNBNCwgJ00nLCAnz4QnKSwKICAgICgweDNBNSwgJ00nLCAnz4UnKSwKICAgICgweDNBNiwgJ00nLCAnz4YnKSwKICAgICgweDNBNywgJ00nLCAnz4cnKSwKICAgICgweDNBOCwgJ00nLCAnz4gnKSwKICAgICgweDNBOSwgJ00nLCAnz4knKSwKICAgICgweDNBQSwgJ00nLCAnz4onKSwKICAgICgweDNBQiwgJ00nLCAnz4snKSwKICAgICgweDNBQywgJ1YnKSwKICAgICgweDNDMiwgJ0QnLCAnz4MnKSwKICAgICgweDNDMywgJ1YnKSwKICAgICgweDNDRiwgJ00nLCAnz5cnKSwKICAgICgweDNEMCwgJ00nLCAnzrInKSwKICAgICgweDNEMSwgJ00nLCAnzrgnKSwKICAgICgweDNEMiwgJ00nLCAnz4UnKSwKICAgICgweDNEMywgJ00nLCAnz40nKSwKICAgICgweDNENCwgJ00nLCAnz4snKSwKICAgICgweDNENSwgJ00nLCAnz4YnKSwKICAgICgweDNENiwgJ00nLCAnz4AnKSwKICAgICgweDNENywgJ1YnKSwKICAgICgweDNEOCwgJ00nLCAnz5knKSwKICAgICgweDNEOSwgJ1YnKSwKICAgICgweDNEQSwgJ00nLCAnz5snKSwKICAgICgweDNEQiwgJ1YnKSwKICAgICgweDNEQywgJ00nLCAnz50nKSwKICAgICgweDNERCwgJ1YnKSwKICAgICgweDNERSwgJ00nLCAnz58nKSwKICAgICgweDNERiwgJ1YnKSwKICAgICgweDNFMCwgJ00nLCAnz6EnKSwKICAgICgweDNFMSwgJ1YnKSwKICAgICgweDNFMiwgJ00nLCAnz6MnKSwKICAgICgweDNFMywgJ1YnKSwKICAgICgweDNFNCwgJ00nLCAnz6UnKSwKICAgICgweDNFNSwgJ1YnKSwKICAgICgweDNFNiwgJ00nLCAnz6cnKSwKICAgICgweDNFNywgJ1YnKSwKICAgICgweDNFOCwgJ00nLCAnz6knKSwKICAgICgweDNFOSwgJ1YnKSwKICAgICgweDNFQSwgJ00nLCAnz6snKSwKICAgICgweDNFQiwgJ1YnKSwKICAgICgweDNFQywgJ00nLCAnz60nKSwKICAgICgweDNFRCwgJ1YnKSwKICAgICgweDNFRSwgJ00nLCAnz68nKSwKICAgICgweDNFRiwgJ1YnKSwKICAgICgweDNGMCwgJ00nLCAnzronKSwKICAgICgweDNGMSwgJ00nLCAnz4EnKSwKICAgICgweDNGMiwgJ00nLCAnz4MnKSwKICAgICgweDNGMywgJ1YnKSwKICAgICgweDNGNCwgJ00nLCAnzrgnKSwKICAgICgweDNGNSwgJ00nLCAnzrUnKSwKICAgICgweDNGNiwgJ1YnKSwKICAgICgweDNGNywgJ00nLCAnz7gnKSwKICAgICgweDNGOCwgJ1YnKSwKICAgICgweDNGOSwgJ00nLCAnz4MnKSwKICAgICgweDNGQSwgJ00nLCAnz7snKSwKICAgICgweDNGQiwgJ1YnKSwKICAgICgweDNGRCwgJ00nLCAnzbsnKSwKICAgICgweDNGRSwgJ00nLCAnzbwnKSwKICAgICgweDNGRiwgJ00nLCAnzb0nKSwKICAgICgweDQwMCwgJ00nLCAn0ZAnKSwKICAgICgweDQwMSwgJ00nLCAn0ZEnKSwKICAgICgweDQwMiwgJ00nLCAn0ZInKSwKICAgIF0KCmRlZiBfc2VnXzcoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXToKICAgIHJldHVybiBbCiAgICAoMHg0MDMsICdNJywgJ9GTJyksCiAgICAoMHg0MDQsICdNJywgJ9GUJyksCiAgICAoMHg0MDUsICdNJywgJ9GVJyksCiAgICAoMHg0MDYsICdNJywgJ9GWJyksCiAgICAoMHg0MDcsICdNJywgJ9GXJyksCiAgICAoMHg0MDgsICdNJywgJ9GYJyksCiAgICAoMHg0MDksICdNJywgJ9GZJyksCiAgICAoMHg0MEEsICdNJywgJ9GaJyksCiAgICAoMHg0MEIsICdNJywgJ9GbJyksCiAgICAoMHg0MEMsICdNJywgJ9GcJyksCiAgICAoMHg0MEQsICdNJywgJ9GdJyksCiAgICAoMHg0MEUsICdNJywgJ9GeJyksCiAgICAoMHg0MEYsICdNJywgJ9GfJyksCiAgICAoMHg0MTAsICdNJywgJ9CwJyksCiAgICAoMHg0MTEsICdNJywgJ9CxJyksCiAgICAoMHg0MTIsICdNJywgJ9CyJyksCiAgICAoMHg0MTMsICdNJywgJ9CzJyksCiAgICAoMHg0MTQsICdNJywgJ9C0JyksCiAgICAoMHg0MTUsICdNJywgJ9C1JyksCiAgICAoMHg0MTYsICdNJywgJ9C2JyksCiAgICAoMHg0MTcsICdNJywgJ9C3JyksCiAgICAoMHg0MTgsICdNJywgJ9C4JyksCiAgICAoMHg0MTksICdNJywgJ9C5JyksCiAgICAoMHg0MUEsICdNJywgJ9C6JyksCiAgICAoMHg0MUIsICdNJywgJ9C7JyksCiAgICAoMHg0MUMsICdNJywgJ9C8JyksCiAgICAoMHg0MUQsICdNJywgJ9C9JyksCiAgICAoMHg0MUUsICdNJywgJ9C+JyksCiAgICAoMHg0MUYsICdNJywgJ9C/JyksCiAgICAoMHg0MjAsICdNJywgJ9GAJyksCiAgICAoMHg0MjEsICdNJywgJ9GBJyksCiAgICAoMHg0MjIsICdNJywgJ9GCJyksCiAgICAoMHg0MjMsICdNJywgJ9GDJyksCiAgICAoMHg0MjQsICdNJywgJ9GEJyksCiAgICAoMHg0MjUsICdNJywgJ9GFJyksCiAgICAoMHg0MjYsICdNJywgJ9GGJyksCiAgICAoMHg0MjcsICdNJywgJ9GHJyksCiAgICAoMHg0MjgsICdNJywgJ9GIJyksCiAgICAoMHg0MjksICdNJywgJ9GJJyksCiAgICAoMHg0MkEsICdNJywgJ9GKJyksCiAgICAoMHg0MkIsICdNJywgJ9GLJyksCiAgICAoMHg0MkMsICdNJywgJ9GMJyksCiAgICAoMHg0MkQsICdNJywgJ9GNJyksCiAgICAoMHg0MkUsICdNJywgJ9GOJyksCiAgICAoMHg0MkYsICdNJywgJ9GPJyksCiAgICAoMHg0MzAsICdWJyksCiAgICAoMHg0NjAsICdNJywgJ9GhJyksCiAgICAoMHg0NjEsICdWJyksCiAgICAoMHg0NjIsICdNJywgJ9GjJyksCiAgICAoMHg0NjMsICdWJyksCiAgICAoMHg0NjQsICdNJywgJ9GlJyksCiAgICAoMHg0NjUsICdWJyksCiAgICAoMHg0NjYsICdNJywgJ9GnJyksCiAgICAoMHg0NjcsICdWJyksCiAgICAoMHg0NjgsICdNJywgJ9GpJyksCiAgICAoMHg0NjksICdWJyksCiAgICAoMHg0NkEsICdNJywgJ9GrJyksCiAgICAoMHg0NkIsICdWJyksCiAgICAoMHg0NkMsICdNJywgJ9GtJyksCiAgICAoMHg0NkQsICdWJyksCiAgICAoMHg0NkUsICdNJywgJ9GvJyksCiAgICAoMHg0NkYsICdWJyksCiAgICAoMHg0NzAsICdNJywgJ9GxJyksCiAgICAoMHg0NzEsICdWJyksCiAgICAoMHg0NzIsICdNJywgJ9GzJyksCiAgICAoMHg0NzMsICdWJyksCiAgICAoMHg0NzQsICdNJywgJ9G1JyksCiAgICAoMHg0NzUsICdWJyksCiAgICAoMHg0NzYsICdNJywgJ9G3JyksCiAgICAoMHg0NzcsICdWJyksCiAgICAoMHg0NzgsICdNJywgJ9G5JyksCiAgICAoMHg0NzksICdWJyksCiAgICAoMHg0N0EsICdNJywgJ9G7JyksCiAgICAoMHg0N0IsICdWJyksCiAgICAoMHg0N0MsICdNJywgJ9G9JyksCiAgICAoMHg0N0QsICdWJyksCiAgICAoMHg0N0UsICdNJywgJ9G/JyksCiAgICAoMHg0N0YsICdWJyksCiAgICAoMHg0ODAsICdNJywgJ9KBJyksCiAgICAoMHg0ODEsICdWJyksCiAgICAoMHg0OEEsICdNJywgJ9KLJyksCiAgICAoMHg0OEIsICdWJyksCiAgICAoMHg0OEMsICdNJywgJ9KNJyksCiAgICAoMHg0OEQsICdWJyksCiAgICAoMHg0OEUsICdNJywgJ9KPJyksCiAgICAoMHg0OEYsICdWJyksCiAgICAoMHg0OTAsICdNJywgJ9KRJyksCiAgICAoMHg0OTEsICdWJyksCiAgICAoMHg0OTIsICdNJywgJ9KTJyksCiAgICAoMHg0OTMsICdWJyksCiAgICAoMHg0OTQsICdNJywgJ9KVJyksCiAgICAoMHg0OTUsICdWJyksCiAgICAoMHg0OTYsICdNJywgJ9KXJyksCiAgICAoMHg0OTcsICdWJyksCiAgICAoMHg0OTgsICdNJywgJ9KZJyksCiAgICAoMHg0OTksICdWJyksCiAgICAoMHg0OUEsICdNJywgJ9KbJyksCiAgICAoMHg0OUIsICdWJyksCiAgICAoMHg0OUMsICdNJywgJ9KdJyksCiAgICAoMHg0OUQsICdWJyksCiAgICBdCgpkZWYgX3NlZ184KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4NDlFLCAnTScsICfSnycpLAogICAgKDB4NDlGLCAnVicpLAogICAgKDB4NEEwLCAnTScsICfSoScpLAogICAgKDB4NEExLCAnVicpLAogICAgKDB4NEEyLCAnTScsICfSoycpLAogICAgKDB4NEEzLCAnVicpLAogICAgKDB4NEE0LCAnTScsICfSpScpLAogICAgKDB4NEE1LCAnVicpLAogICAgKDB4NEE2LCAnTScsICfSpycpLAogICAgKDB4NEE3LCAnVicpLAogICAgKDB4NEE4LCAnTScsICfSqScpLAogICAgKDB4NEE5LCAnVicpLAogICAgKDB4NEFBLCAnTScsICfSqycpLAogICAgKDB4NEFCLCAnVicpLAogICAgKDB4NEFDLCAnTScsICfSrScpLAogICAgKDB4NEFELCAnVicpLAogICAgKDB4NEFFLCAnTScsICfSrycpLAogICAgKDB4NEFGLCAnVicpLAogICAgKDB4NEIwLCAnTScsICfSsScpLAogICAgKDB4NEIxLCAnVicpLAogICAgKDB4NEIyLCAnTScsICfSsycpLAogICAgKDB4NEIzLCAnVicpLAogICAgKDB4NEI0LCAnTScsICfStScpLAogICAgKDB4NEI1LCAnVicpLAogICAgKDB4NEI2LCAnTScsICfStycpLAogICAgKDB4NEI3LCAnVicpLAogICAgKDB4NEI4LCAnTScsICfSuScpLAogICAgKDB4NEI5LCAnVicpLAogICAgKDB4NEJBLCAnTScsICfSuycpLAogICAgKDB4NEJCLCAnVicpLAogICAgKDB4NEJDLCAnTScsICfSvScpLAogICAgKDB4NEJELCAnVicpLAogICAgKDB4NEJFLCAnTScsICfSvycpLAogICAgKDB4NEJGLCAnVicpLAogICAgKDB4NEMwLCAnWCcpLAogICAgKDB4NEMxLCAnTScsICfTgicpLAogICAgKDB4NEMyLCAnVicpLAogICAgKDB4NEMzLCAnTScsICfThCcpLAogICAgKDB4NEM0LCAnVicpLAogICAgKDB4NEM1LCAnTScsICfThicpLAogICAgKDB4NEM2LCAnVicpLAogICAgKDB4NEM3LCAnTScsICfTiCcpLAogICAgKDB4NEM4LCAnVicpLAogICAgKDB4NEM5LCAnTScsICfTiicpLAogICAgKDB4NENBLCAnVicpLAogICAgKDB4NENCLCAnTScsICfTjCcpLAogICAgKDB4NENDLCAnVicpLAogICAgKDB4NENELCAnTScsICfTjicpLAogICAgKDB4NENFLCAnVicpLAogICAgKDB4NEQwLCAnTScsICfTkScpLAogICAgKDB4NEQxLCAnVicpLAogICAgKDB4NEQyLCAnTScsICfTkycpLAogICAgKDB4NEQzLCAnVicpLAogICAgKDB4NEQ0LCAnTScsICfTlScpLAogICAgKDB4NEQ1LCAnVicpLAogICAgKDB4NEQ2LCAnTScsICfTlycpLAogICAgKDB4NEQ3LCAnVicpLAogICAgKDB4NEQ4LCAnTScsICfTmScpLAogICAgKDB4NEQ5LCAnVicpLAogICAgKDB4NERBLCAnTScsICfTmycpLAogICAgKDB4NERCLCAnVicpLAogICAgKDB4NERDLCAnTScsICfTnScpLAogICAgKDB4NERELCAnVicpLAogICAgKDB4NERFLCAnTScsICfTnycpLAogICAgKDB4NERGLCAnVicpLAogICAgKDB4NEUwLCAnTScsICfToScpLAogICAgKDB4NEUxLCAnVicpLAogICAgKDB4NEUyLCAnTScsICfToycpLAogICAgKDB4NEUzLCAnVicpLAogICAgKDB4NEU0LCAnTScsICfTpScpLAogICAgKDB4NEU1LCAnVicpLAogICAgKDB4NEU2LCAnTScsICfTpycpLAogICAgKDB4NEU3LCAnVicpLAogICAgKDB4NEU4LCAnTScsICfTqScpLAogICAgKDB4NEU5LCAnVicpLAogICAgKDB4NEVBLCAnTScsICfTqycpLAogICAgKDB4NEVCLCAnVicpLAogICAgKDB4NEVDLCAnTScsICfTrScpLAogICAgKDB4NEVELCAnVicpLAogICAgKDB4NEVFLCAnTScsICfTrycpLAogICAgKDB4NEVGLCAnVicpLAogICAgKDB4NEYwLCAnTScsICfTsScpLAogICAgKDB4NEYxLCAnVicpLAogICAgKDB4NEYyLCAnTScsICfTsycpLAogICAgKDB4NEYzLCAnVicpLAogICAgKDB4NEY0LCAnTScsICfTtScpLAogICAgKDB4NEY1LCAnVicpLAogICAgKDB4NEY2LCAnTScsICfTtycpLAogICAgKDB4NEY3LCAnVicpLAogICAgKDB4NEY4LCAnTScsICfTuScpLAogICAgKDB4NEY5LCAnVicpLAogICAgKDB4NEZBLCAnTScsICfTuycpLAogICAgKDB4NEZCLCAnVicpLAogICAgKDB4NEZDLCAnTScsICfTvScpLAogICAgKDB4NEZELCAnVicpLAogICAgKDB4NEZFLCAnTScsICfTvycpLAogICAgKDB4NEZGLCAnVicpLAogICAgKDB4NTAwLCAnTScsICfUgScpLAogICAgKDB4NTAxLCAnVicpLAogICAgKDB4NTAyLCAnTScsICfUgycpLAogICAgXQoKZGVmIF9zZWdfOSgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweDUwMywgJ1YnKSwKICAgICgweDUwNCwgJ00nLCAn1IUnKSwKICAgICgweDUwNSwgJ1YnKSwKICAgICgweDUwNiwgJ00nLCAn1IcnKSwKICAgICgweDUwNywgJ1YnKSwKICAgICgweDUwOCwgJ00nLCAn1IknKSwKICAgICgweDUwOSwgJ1YnKSwKICAgICgweDUwQSwgJ00nLCAn1IsnKSwKICAgICgweDUwQiwgJ1YnKSwKICAgICgweDUwQywgJ00nLCAn1I0nKSwKICAgICgweDUwRCwgJ1YnKSwKICAgICgweDUwRSwgJ00nLCAn1I8nKSwKICAgICgweDUwRiwgJ1YnKSwKICAgICgweDUxMCwgJ00nLCAn1JEnKSwKICAgICgweDUxMSwgJ1YnKSwKICAgICgweDUxMiwgJ00nLCAn1JMnKSwKICAgICgweDUxMywgJ1YnKSwKICAgICgweDUxNCwgJ00nLCAn1JUnKSwKICAgICgweDUxNSwgJ1YnKSwKICAgICgweDUxNiwgJ00nLCAn1JcnKSwKICAgICgweDUxNywgJ1YnKSwKICAgICgweDUxOCwgJ00nLCAn1JknKSwKICAgICgweDUxOSwgJ1YnKSwKICAgICgweDUxQSwgJ00nLCAn1JsnKSwKICAgICgweDUxQiwgJ1YnKSwKICAgICgweDUxQywgJ00nLCAn1J0nKSwKICAgICgweDUxRCwgJ1YnKSwKICAgICgweDUxRSwgJ00nLCAn1J8nKSwKICAgICgweDUxRiwgJ1YnKSwKICAgICgweDUyMCwgJ00nLCAn1KEnKSwKICAgICgweDUyMSwgJ1YnKSwKICAgICgweDUyMiwgJ00nLCAn1KMnKSwKICAgICgweDUyMywgJ1YnKSwKICAgICgweDUyNCwgJ00nLCAn1KUnKSwKICAgICgweDUyNSwgJ1YnKSwKICAgICgweDUyNiwgJ00nLCAn1KcnKSwKICAgICgweDUyNywgJ1YnKSwKICAgICgweDUyOCwgJ00nLCAn1KknKSwKICAgICgweDUyOSwgJ1YnKSwKICAgICgweDUyQSwgJ00nLCAn1KsnKSwKICAgICgweDUyQiwgJ1YnKSwKICAgICgweDUyQywgJ00nLCAn1K0nKSwKICAgICgweDUyRCwgJ1YnKSwKICAgICgweDUyRSwgJ00nLCAn1K8nKSwKICAgICgweDUyRiwgJ1YnKSwKICAgICgweDUzMCwgJ1gnKSwKICAgICgweDUzMSwgJ00nLCAn1aEnKSwKICAgICgweDUzMiwgJ00nLCAn1aInKSwKICAgICgweDUzMywgJ00nLCAn1aMnKSwKICAgICgweDUzNCwgJ00nLCAn1aQnKSwKICAgICgweDUzNSwgJ00nLCAn1aUnKSwKICAgICgweDUzNiwgJ00nLCAn1aYnKSwKICAgICgweDUzNywgJ00nLCAn1acnKSwKICAgICgweDUzOCwgJ00nLCAn1agnKSwKICAgICgweDUzOSwgJ00nLCAn1aknKSwKICAgICgweDUzQSwgJ00nLCAn1aonKSwKICAgICgweDUzQiwgJ00nLCAn1asnKSwKICAgICgweDUzQywgJ00nLCAn1awnKSwKICAgICgweDUzRCwgJ00nLCAn1a0nKSwKICAgICgweDUzRSwgJ00nLCAn1a4nKSwKICAgICgweDUzRiwgJ00nLCAn1a8nKSwKICAgICgweDU0MCwgJ00nLCAn1bAnKSwKICAgICgweDU0MSwgJ00nLCAn1bEnKSwKICAgICgweDU0MiwgJ00nLCAn1bInKSwKICAgICgweDU0MywgJ00nLCAn1bMnKSwKICAgICgweDU0NCwgJ00nLCAn1bQnKSwKICAgICgweDU0NSwgJ00nLCAn1bUnKSwKICAgICgweDU0NiwgJ00nLCAn1bYnKSwKICAgICgweDU0NywgJ00nLCAn1bcnKSwKICAgICgweDU0OCwgJ00nLCAn1bgnKSwKICAgICgweDU0OSwgJ00nLCAn1bknKSwKICAgICgweDU0QSwgJ00nLCAn1bonKSwKICAgICgweDU0QiwgJ00nLCAn1bsnKSwKICAgICgweDU0QywgJ00nLCAn1bwnKSwKICAgICgweDU0RCwgJ00nLCAn1b0nKSwKICAgICgweDU0RSwgJ00nLCAn1b4nKSwKICAgICgweDU0RiwgJ00nLCAn1b8nKSwKICAgICgweDU1MCwgJ00nLCAn1oAnKSwKICAgICgweDU1MSwgJ00nLCAn1oEnKSwKICAgICgweDU1MiwgJ00nLCAn1oInKSwKICAgICgweDU1MywgJ00nLCAn1oMnKSwKICAgICgweDU1NCwgJ00nLCAn1oQnKSwKICAgICgweDU1NSwgJ00nLCAn1oUnKSwKICAgICgweDU1NiwgJ00nLCAn1oYnKSwKICAgICgweDU1NywgJ1gnKSwKICAgICgweDU1OSwgJ1YnKSwKICAgICgweDU4NywgJ00nLCAn1aXWgicpLAogICAgKDB4NTg4LCAnVicpLAogICAgKDB4NThCLCAnWCcpLAogICAgKDB4NThELCAnVicpLAogICAgKDB4NTkwLCAnWCcpLAogICAgKDB4NTkxLCAnVicpLAogICAgKDB4NUM4LCAnWCcpLAogICAgKDB4NUQwLCAnVicpLAogICAgKDB4NUVCLCAnWCcpLAogICAgKDB4NUVGLCAnVicpLAogICAgKDB4NUY1LCAnWCcpLAogICAgKDB4NjA2LCAnVicpLAogICAgKDB4NjFDLCAnWCcpLAogICAgKDB4NjFELCAnVicpLAogICAgXQoKZGVmIF9zZWdfMTAoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXToKICAgIHJldHVybiBbCiAgICAoMHg2NzUsICdNJywgJ9in2bQnKSwKICAgICgweDY3NiwgJ00nLCAn2YjZtCcpLAogICAgKDB4Njc3LCAnTScsICfbh9m0JyksCiAgICAoMHg2NzgsICdNJywgJ9mK2bQnKSwKICAgICgweDY3OSwgJ1YnKSwKICAgICgweDZERCwgJ1gnKSwKICAgICgweDZERSwgJ1YnKSwKICAgICgweDcwRSwgJ1gnKSwKICAgICgweDcxMCwgJ1YnKSwKICAgICgweDc0QiwgJ1gnKSwKICAgICgweDc0RCwgJ1YnKSwKICAgICgweDdCMiwgJ1gnKSwKICAgICgweDdDMCwgJ1YnKSwKICAgICgweDdGQiwgJ1gnKSwKICAgICgweDdGRCwgJ1YnKSwKICAgICgweDgyRSwgJ1gnKSwKICAgICgweDgzMCwgJ1YnKSwKICAgICgweDgzRiwgJ1gnKSwKICAgICgweDg0MCwgJ1YnKSwKICAgICgweDg1QywgJ1gnKSwKICAgICgweDg1RSwgJ1YnKSwKICAgICgweDg1RiwgJ1gnKSwKICAgICgweDg2MCwgJ1YnKSwKICAgICgweDg2QiwgJ1gnKSwKICAgICgweDg3MCwgJ1YnKSwKICAgICgweDg4RiwgJ1gnKSwKICAgICgweDg5OCwgJ1YnKSwKICAgICgweDhFMiwgJ1gnKSwKICAgICgweDhFMywgJ1YnKSwKICAgICgweDk1OCwgJ00nLCAn4KSV4KS8JyksCiAgICAoMHg5NTksICdNJywgJ+CkluCkvCcpLAogICAgKDB4OTVBLCAnTScsICfgpJfgpLwnKSwKICAgICgweDk1QiwgJ00nLCAn4KSc4KS8JyksCiAgICAoMHg5NUMsICdNJywgJ+CkoeCkvCcpLAogICAgKDB4OTVELCAnTScsICfgpKLgpLwnKSwKICAgICgweDk1RSwgJ00nLCAn4KSr4KS8JyksCiAgICAoMHg5NUYsICdNJywgJ+Ckr+CkvCcpLAogICAgKDB4OTYwLCAnVicpLAogICAgKDB4OTg0LCAnWCcpLAogICAgKDB4OTg1LCAnVicpLAogICAgKDB4OThELCAnWCcpLAogICAgKDB4OThGLCAnVicpLAogICAgKDB4OTkxLCAnWCcpLAogICAgKDB4OTkzLCAnVicpLAogICAgKDB4OUE5LCAnWCcpLAogICAgKDB4OUFBLCAnVicpLAogICAgKDB4OUIxLCAnWCcpLAogICAgKDB4OUIyLCAnVicpLAogICAgKDB4OUIzLCAnWCcpLAogICAgKDB4OUI2LCAnVicpLAogICAgKDB4OUJBLCAnWCcpLAogICAgKDB4OUJDLCAnVicpLAogICAgKDB4OUM1LCAnWCcpLAogICAgKDB4OUM3LCAnVicpLAogICAgKDB4OUM5LCAnWCcpLAogICAgKDB4OUNCLCAnVicpLAogICAgKDB4OUNGLCAnWCcpLAogICAgKDB4OUQ3LCAnVicpLAogICAgKDB4OUQ4LCAnWCcpLAogICAgKDB4OURDLCAnTScsICfgpqHgprwnKSwKICAgICgweDlERCwgJ00nLCAn4Kai4Ka8JyksCiAgICAoMHg5REUsICdYJyksCiAgICAoMHg5REYsICdNJywgJ+Cmr+CmvCcpLAogICAgKDB4OUUwLCAnVicpLAogICAgKDB4OUU0LCAnWCcpLAogICAgKDB4OUU2LCAnVicpLAogICAgKDB4OUZGLCAnWCcpLAogICAgKDB4QTAxLCAnVicpLAogICAgKDB4QTA0LCAnWCcpLAogICAgKDB4QTA1LCAnVicpLAogICAgKDB4QTBCLCAnWCcpLAogICAgKDB4QTBGLCAnVicpLAogICAgKDB4QTExLCAnWCcpLAogICAgKDB4QTEzLCAnVicpLAogICAgKDB4QTI5LCAnWCcpLAogICAgKDB4QTJBLCAnVicpLAogICAgKDB4QTMxLCAnWCcpLAogICAgKDB4QTMyLCAnVicpLAogICAgKDB4QTMzLCAnTScsICfgqLLgqLwnKSwKICAgICgweEEzNCwgJ1gnKSwKICAgICgweEEzNSwgJ1YnKSwKICAgICgweEEzNiwgJ00nLCAn4Ki44Ki8JyksCiAgICAoMHhBMzcsICdYJyksCiAgICAoMHhBMzgsICdWJyksCiAgICAoMHhBM0EsICdYJyksCiAgICAoMHhBM0MsICdWJyksCiAgICAoMHhBM0QsICdYJyksCiAgICAoMHhBM0UsICdWJyksCiAgICAoMHhBNDMsICdYJyksCiAgICAoMHhBNDcsICdWJyksCiAgICAoMHhBNDksICdYJyksCiAgICAoMHhBNEIsICdWJyksCiAgICAoMHhBNEUsICdYJyksCiAgICAoMHhBNTEsICdWJyksCiAgICAoMHhBNTIsICdYJyksCiAgICAoMHhBNTksICdNJywgJ+ColuCovCcpLAogICAgKDB4QTVBLCAnTScsICfgqJfgqLwnKSwKICAgICgweEE1QiwgJ00nLCAn4Kic4Ki8JyksCiAgICAoMHhBNUMsICdWJyksCiAgICAoMHhBNUQsICdYJyksCiAgICBdCgpkZWYgX3NlZ18xMSgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweEE1RSwgJ00nLCAn4Kir4Ki8JyksCiAgICAoMHhBNUYsICdYJyksCiAgICAoMHhBNjYsICdWJyksCiAgICAoMHhBNzcsICdYJyksCiAgICAoMHhBODEsICdWJyksCiAgICAoMHhBODQsICdYJyksCiAgICAoMHhBODUsICdWJyksCiAgICAoMHhBOEUsICdYJyksCiAgICAoMHhBOEYsICdWJyksCiAgICAoMHhBOTIsICdYJyksCiAgICAoMHhBOTMsICdWJyksCiAgICAoMHhBQTksICdYJyksCiAgICAoMHhBQUEsICdWJyksCiAgICAoMHhBQjEsICdYJyksCiAgICAoMHhBQjIsICdWJyksCiAgICAoMHhBQjQsICdYJyksCiAgICAoMHhBQjUsICdWJyksCiAgICAoMHhBQkEsICdYJyksCiAgICAoMHhBQkMsICdWJyksCiAgICAoMHhBQzYsICdYJyksCiAgICAoMHhBQzcsICdWJyksCiAgICAoMHhBQ0EsICdYJyksCiAgICAoMHhBQ0IsICdWJyksCiAgICAoMHhBQ0UsICdYJyksCiAgICAoMHhBRDAsICdWJyksCiAgICAoMHhBRDEsICdYJyksCiAgICAoMHhBRTAsICdWJyksCiAgICAoMHhBRTQsICdYJyksCiAgICAoMHhBRTYsICdWJyksCiAgICAoMHhBRjIsICdYJyksCiAgICAoMHhBRjksICdWJyksCiAgICAoMHhCMDAsICdYJyksCiAgICAoMHhCMDEsICdWJyksCiAgICAoMHhCMDQsICdYJyksCiAgICAoMHhCMDUsICdWJyksCiAgICAoMHhCMEQsICdYJyksCiAgICAoMHhCMEYsICdWJyksCiAgICAoMHhCMTEsICdYJyksCiAgICAoMHhCMTMsICdWJyksCiAgICAoMHhCMjksICdYJyksCiAgICAoMHhCMkEsICdWJyksCiAgICAoMHhCMzEsICdYJyksCiAgICAoMHhCMzIsICdWJyksCiAgICAoMHhCMzQsICdYJyksCiAgICAoMHhCMzUsICdWJyksCiAgICAoMHhCM0EsICdYJyksCiAgICAoMHhCM0MsICdWJyksCiAgICAoMHhCNDUsICdYJyksCiAgICAoMHhCNDcsICdWJyksCiAgICAoMHhCNDksICdYJyksCiAgICAoMHhCNEIsICdWJyksCiAgICAoMHhCNEUsICdYJyksCiAgICAoMHhCNTUsICdWJyksCiAgICAoMHhCNTgsICdYJyksCiAgICAoMHhCNUMsICdNJywgJ+CsoeCsvCcpLAogICAgKDB4QjVELCAnTScsICfgrKLgrLwnKSwKICAgICgweEI1RSwgJ1gnKSwKICAgICgweEI1RiwgJ1YnKSwKICAgICgweEI2NCwgJ1gnKSwKICAgICgweEI2NiwgJ1YnKSwKICAgICgweEI3OCwgJ1gnKSwKICAgICgweEI4MiwgJ1YnKSwKICAgICgweEI4NCwgJ1gnKSwKICAgICgweEI4NSwgJ1YnKSwKICAgICgweEI4QiwgJ1gnKSwKICAgICgweEI4RSwgJ1YnKSwKICAgICgweEI5MSwgJ1gnKSwKICAgICgweEI5MiwgJ1YnKSwKICAgICgweEI5NiwgJ1gnKSwKICAgICgweEI5OSwgJ1YnKSwKICAgICgweEI5QiwgJ1gnKSwKICAgICgweEI5QywgJ1YnKSwKICAgICgweEI5RCwgJ1gnKSwKICAgICgweEI5RSwgJ1YnKSwKICAgICgweEJBMCwgJ1gnKSwKICAgICgweEJBMywgJ1YnKSwKICAgICgweEJBNSwgJ1gnKSwKICAgICgweEJBOCwgJ1YnKSwKICAgICgweEJBQiwgJ1gnKSwKICAgICgweEJBRSwgJ1YnKSwKICAgICgweEJCQSwgJ1gnKSwKICAgICgweEJCRSwgJ1YnKSwKICAgICgweEJDMywgJ1gnKSwKICAgICgweEJDNiwgJ1YnKSwKICAgICgweEJDOSwgJ1gnKSwKICAgICgweEJDQSwgJ1YnKSwKICAgICgweEJDRSwgJ1gnKSwKICAgICgweEJEMCwgJ1YnKSwKICAgICgweEJEMSwgJ1gnKSwKICAgICgweEJENywgJ1YnKSwKICAgICgweEJEOCwgJ1gnKSwKICAgICgweEJFNiwgJ1YnKSwKICAgICgweEJGQiwgJ1gnKSwKICAgICgweEMwMCwgJ1YnKSwKICAgICgweEMwRCwgJ1gnKSwKICAgICgweEMwRSwgJ1YnKSwKICAgICgweEMxMSwgJ1gnKSwKICAgICgweEMxMiwgJ1YnKSwKICAgICgweEMyOSwgJ1gnKSwKICAgICgweEMyQSwgJ1YnKSwKICAgIF0KCmRlZiBfc2VnXzEyKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4QzNBLCAnWCcpLAogICAgKDB4QzNDLCAnVicpLAogICAgKDB4QzQ1LCAnWCcpLAogICAgKDB4QzQ2LCAnVicpLAogICAgKDB4QzQ5LCAnWCcpLAogICAgKDB4QzRBLCAnVicpLAogICAgKDB4QzRFLCAnWCcpLAogICAgKDB4QzU1LCAnVicpLAogICAgKDB4QzU3LCAnWCcpLAogICAgKDB4QzU4LCAnVicpLAogICAgKDB4QzVCLCAnWCcpLAogICAgKDB4QzVELCAnVicpLAogICAgKDB4QzVFLCAnWCcpLAogICAgKDB4QzYwLCAnVicpLAogICAgKDB4QzY0LCAnWCcpLAogICAgKDB4QzY2LCAnVicpLAogICAgKDB4QzcwLCAnWCcpLAogICAgKDB4Qzc3LCAnVicpLAogICAgKDB4QzhELCAnWCcpLAogICAgKDB4QzhFLCAnVicpLAogICAgKDB4QzkxLCAnWCcpLAogICAgKDB4QzkyLCAnVicpLAogICAgKDB4Q0E5LCAnWCcpLAogICAgKDB4Q0FBLCAnVicpLAogICAgKDB4Q0I0LCAnWCcpLAogICAgKDB4Q0I1LCAnVicpLAogICAgKDB4Q0JBLCAnWCcpLAogICAgKDB4Q0JDLCAnVicpLAogICAgKDB4Q0M1LCAnWCcpLAogICAgKDB4Q0M2LCAnVicpLAogICAgKDB4Q0M5LCAnWCcpLAogICAgKDB4Q0NBLCAnVicpLAogICAgKDB4Q0NFLCAnWCcpLAogICAgKDB4Q0Q1LCAnVicpLAogICAgKDB4Q0Q3LCAnWCcpLAogICAgKDB4Q0RELCAnVicpLAogICAgKDB4Q0RGLCAnWCcpLAogICAgKDB4Q0UwLCAnVicpLAogICAgKDB4Q0U0LCAnWCcpLAogICAgKDB4Q0U2LCAnVicpLAogICAgKDB4Q0YwLCAnWCcpLAogICAgKDB4Q0YxLCAnVicpLAogICAgKDB4Q0YzLCAnWCcpLAogICAgKDB4RDAwLCAnVicpLAogICAgKDB4RDBELCAnWCcpLAogICAgKDB4RDBFLCAnVicpLAogICAgKDB4RDExLCAnWCcpLAogICAgKDB4RDEyLCAnVicpLAogICAgKDB4RDQ1LCAnWCcpLAogICAgKDB4RDQ2LCAnVicpLAogICAgKDB4RDQ5LCAnWCcpLAogICAgKDB4RDRBLCAnVicpLAogICAgKDB4RDUwLCAnWCcpLAogICAgKDB4RDU0LCAnVicpLAogICAgKDB4RDY0LCAnWCcpLAogICAgKDB4RDY2LCAnVicpLAogICAgKDB4RDgwLCAnWCcpLAogICAgKDB4RDgxLCAnVicpLAogICAgKDB4RDg0LCAnWCcpLAogICAgKDB4RDg1LCAnVicpLAogICAgKDB4RDk3LCAnWCcpLAogICAgKDB4RDlBLCAnVicpLAogICAgKDB4REIyLCAnWCcpLAogICAgKDB4REIzLCAnVicpLAogICAgKDB4REJDLCAnWCcpLAogICAgKDB4REJELCAnVicpLAogICAgKDB4REJFLCAnWCcpLAogICAgKDB4REMwLCAnVicpLAogICAgKDB4REM3LCAnWCcpLAogICAgKDB4RENBLCAnVicpLAogICAgKDB4RENCLCAnWCcpLAogICAgKDB4RENGLCAnVicpLAogICAgKDB4REQ1LCAnWCcpLAogICAgKDB4REQ2LCAnVicpLAogICAgKDB4REQ3LCAnWCcpLAogICAgKDB4REQ4LCAnVicpLAogICAgKDB4REUwLCAnWCcpLAogICAgKDB4REU2LCAnVicpLAogICAgKDB4REYwLCAnWCcpLAogICAgKDB4REYyLCAnVicpLAogICAgKDB4REY1LCAnWCcpLAogICAgKDB4RTAxLCAnVicpLAogICAgKDB4RTMzLCAnTScsICfguY3guLInKSwKICAgICgweEUzNCwgJ1YnKSwKICAgICgweEUzQiwgJ1gnKSwKICAgICgweEUzRiwgJ1YnKSwKICAgICgweEU1QywgJ1gnKSwKICAgICgweEU4MSwgJ1YnKSwKICAgICgweEU4MywgJ1gnKSwKICAgICgweEU4NCwgJ1YnKSwKICAgICgweEU4NSwgJ1gnKSwKICAgICgweEU4NiwgJ1YnKSwKICAgICgweEU4QiwgJ1gnKSwKICAgICgweEU4QywgJ1YnKSwKICAgICgweEVBNCwgJ1gnKSwKICAgICgweEVBNSwgJ1YnKSwKICAgICgweEVBNiwgJ1gnKSwKICAgICgweEVBNywgJ1YnKSwKICAgICgweEVCMywgJ00nLCAn4LuN4LqyJyksCiAgICAoMHhFQjQsICdWJyksCiAgICBdCgpkZWYgX3NlZ18xMygpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweEVCRSwgJ1gnKSwKICAgICgweEVDMCwgJ1YnKSwKICAgICgweEVDNSwgJ1gnKSwKICAgICgweEVDNiwgJ1YnKSwKICAgICgweEVDNywgJ1gnKSwKICAgICgweEVDOCwgJ1YnKSwKICAgICgweEVDRSwgJ1gnKSwKICAgICgweEVEMCwgJ1YnKSwKICAgICgweEVEQSwgJ1gnKSwKICAgICgweEVEQywgJ00nLCAn4Lqr4LqZJyksCiAgICAoMHhFREQsICdNJywgJ+C6q+C6oScpLAogICAgKDB4RURFLCAnVicpLAogICAgKDB4RUUwLCAnWCcpLAogICAgKDB4RjAwLCAnVicpLAogICAgKDB4RjBDLCAnTScsICfgvIsnKSwKICAgICgweEYwRCwgJ1YnKSwKICAgICgweEY0MywgJ00nLCAn4L2C4L63JyksCiAgICAoMHhGNDQsICdWJyksCiAgICAoMHhGNDgsICdYJyksCiAgICAoMHhGNDksICdWJyksCiAgICAoMHhGNEQsICdNJywgJ+C9jOC+tycpLAogICAgKDB4RjRFLCAnVicpLAogICAgKDB4RjUyLCAnTScsICfgvZHgvrcnKSwKICAgICgweEY1MywgJ1YnKSwKICAgICgweEY1NywgJ00nLCAn4L2W4L63JyksCiAgICAoMHhGNTgsICdWJyksCiAgICAoMHhGNUMsICdNJywgJ+C9m+C+tycpLAogICAgKDB4RjVELCAnVicpLAogICAgKDB4RjY5LCAnTScsICfgvYDgvrUnKSwKICAgICgweEY2QSwgJ1YnKSwKICAgICgweEY2RCwgJ1gnKSwKICAgICgweEY3MSwgJ1YnKSwKICAgICgweEY3MywgJ00nLCAn4L2x4L2yJyksCiAgICAoMHhGNzQsICdWJyksCiAgICAoMHhGNzUsICdNJywgJ+C9seC9tCcpLAogICAgKDB4Rjc2LCAnTScsICfgvrLgvoAnKSwKICAgICgweEY3NywgJ00nLCAn4L6y4L2x4L6AJyksCiAgICAoMHhGNzgsICdNJywgJ+C+s+C+gCcpLAogICAgKDB4Rjc5LCAnTScsICfgvrPgvbHgvoAnKSwKICAgICgweEY3QSwgJ1YnKSwKICAgICgweEY4MSwgJ00nLCAn4L2x4L6AJyksCiAgICAoMHhGODIsICdWJyksCiAgICAoMHhGOTMsICdNJywgJ+C+kuC+tycpLAogICAgKDB4Rjk0LCAnVicpLAogICAgKDB4Rjk4LCAnWCcpLAogICAgKDB4Rjk5LCAnVicpLAogICAgKDB4RjlELCAnTScsICfgvpzgvrcnKSwKICAgICgweEY5RSwgJ1YnKSwKICAgICgweEZBMiwgJ00nLCAn4L6h4L63JyksCiAgICAoMHhGQTMsICdWJyksCiAgICAoMHhGQTcsICdNJywgJ+C+puC+tycpLAogICAgKDB4RkE4LCAnVicpLAogICAgKDB4RkFDLCAnTScsICfgvqvgvrcnKSwKICAgICgweEZBRCwgJ1YnKSwKICAgICgweEZCOSwgJ00nLCAn4L6Q4L61JyksCiAgICAoMHhGQkEsICdWJyksCiAgICAoMHhGQkQsICdYJyksCiAgICAoMHhGQkUsICdWJyksCiAgICAoMHhGQ0QsICdYJyksCiAgICAoMHhGQ0UsICdWJyksCiAgICAoMHhGREIsICdYJyksCiAgICAoMHgxMDAwLCAnVicpLAogICAgKDB4MTBBMCwgJ1gnKSwKICAgICgweDEwQzcsICdNJywgJ+K0pycpLAogICAgKDB4MTBDOCwgJ1gnKSwKICAgICgweDEwQ0QsICdNJywgJ+K0rScpLAogICAgKDB4MTBDRSwgJ1gnKSwKICAgICgweDEwRDAsICdWJyksCiAgICAoMHgxMEZDLCAnTScsICfhg5wnKSwKICAgICgweDEwRkQsICdWJyksCiAgICAoMHgxMTVGLCAnWCcpLAogICAgKDB4MTE2MSwgJ1YnKSwKICAgICgweDEyNDksICdYJyksCiAgICAoMHgxMjRBLCAnVicpLAogICAgKDB4MTI0RSwgJ1gnKSwKICAgICgweDEyNTAsICdWJyksCiAgICAoMHgxMjU3LCAnWCcpLAogICAgKDB4MTI1OCwgJ1YnKSwKICAgICgweDEyNTksICdYJyksCiAgICAoMHgxMjVBLCAnVicpLAogICAgKDB4MTI1RSwgJ1gnKSwKICAgICgweDEyNjAsICdWJyksCiAgICAoMHgxMjg5LCAnWCcpLAogICAgKDB4MTI4QSwgJ1YnKSwKICAgICgweDEyOEUsICdYJyksCiAgICAoMHgxMjkwLCAnVicpLAogICAgKDB4MTJCMSwgJ1gnKSwKICAgICgweDEyQjIsICdWJyksCiAgICAoMHgxMkI2LCAnWCcpLAogICAgKDB4MTJCOCwgJ1YnKSwKICAgICgweDEyQkYsICdYJyksCiAgICAoMHgxMkMwLCAnVicpLAogICAgKDB4MTJDMSwgJ1gnKSwKICAgICgweDEyQzIsICdWJyksCiAgICAoMHgxMkM2LCAnWCcpLAogICAgKDB4MTJDOCwgJ1YnKSwKICAgICgweDEyRDcsICdYJyksCiAgICAoMHgxMkQ4LCAnVicpLAogICAgKDB4MTMxMSwgJ1gnKSwKICAgICgweDEzMTIsICdWJyksCiAgICBdCgpkZWYgX3NlZ18xNCgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweDEzMTYsICdYJyksCiAgICAoMHgxMzE4LCAnVicpLAogICAgKDB4MTM1QiwgJ1gnKSwKICAgICgweDEzNUQsICdWJyksCiAgICAoMHgxMzdELCAnWCcpLAogICAgKDB4MTM4MCwgJ1YnKSwKICAgICgweDEzOUEsICdYJyksCiAgICAoMHgxM0EwLCAnVicpLAogICAgKDB4MTNGNiwgJ1gnKSwKICAgICgweDEzRjgsICdNJywgJ+GPsCcpLAogICAgKDB4MTNGOSwgJ00nLCAn4Y+xJyksCiAgICAoMHgxM0ZBLCAnTScsICfhj7InKSwKICAgICgweDEzRkIsICdNJywgJ+GPsycpLAogICAgKDB4MTNGQywgJ00nLCAn4Y+0JyksCiAgICAoMHgxM0ZELCAnTScsICfhj7UnKSwKICAgICgweDEzRkUsICdYJyksCiAgICAoMHgxNDAwLCAnVicpLAogICAgKDB4MTY4MCwgJ1gnKSwKICAgICgweDE2ODEsICdWJyksCiAgICAoMHgxNjlELCAnWCcpLAogICAgKDB4MTZBMCwgJ1YnKSwKICAgICgweDE2RjksICdYJyksCiAgICAoMHgxNzAwLCAnVicpLAogICAgKDB4MTcxNiwgJ1gnKSwKICAgICgweDE3MUYsICdWJyksCiAgICAoMHgxNzM3LCAnWCcpLAogICAgKDB4MTc0MCwgJ1YnKSwKICAgICgweDE3NTQsICdYJyksCiAgICAoMHgxNzYwLCAnVicpLAogICAgKDB4MTc2RCwgJ1gnKSwKICAgICgweDE3NkUsICdWJyksCiAgICAoMHgxNzcxLCAnWCcpLAogICAgKDB4MTc3MiwgJ1YnKSwKICAgICgweDE3NzQsICdYJyksCiAgICAoMHgxNzgwLCAnVicpLAogICAgKDB4MTdCNCwgJ1gnKSwKICAgICgweDE3QjYsICdWJyksCiAgICAoMHgxN0RFLCAnWCcpLAogICAgKDB4MTdFMCwgJ1YnKSwKICAgICgweDE3RUEsICdYJyksCiAgICAoMHgxN0YwLCAnVicpLAogICAgKDB4MTdGQSwgJ1gnKSwKICAgICgweDE4MDAsICdWJyksCiAgICAoMHgxODA2LCAnWCcpLAogICAgKDB4MTgwNywgJ1YnKSwKICAgICgweDE4MEIsICdJJyksCiAgICAoMHgxODBFLCAnWCcpLAogICAgKDB4MTgwRiwgJ0knKSwKICAgICgweDE4MTAsICdWJyksCiAgICAoMHgxODFBLCAnWCcpLAogICAgKDB4MTgyMCwgJ1YnKSwKICAgICgweDE4NzksICdYJyksCiAgICAoMHgxODgwLCAnVicpLAogICAgKDB4MThBQiwgJ1gnKSwKICAgICgweDE4QjAsICdWJyksCiAgICAoMHgxOEY2LCAnWCcpLAogICAgKDB4MTkwMCwgJ1YnKSwKICAgICgweDE5MUYsICdYJyksCiAgICAoMHgxOTIwLCAnVicpLAogICAgKDB4MTkyQywgJ1gnKSwKICAgICgweDE5MzAsICdWJyksCiAgICAoMHgxOTNDLCAnWCcpLAogICAgKDB4MTk0MCwgJ1YnKSwKICAgICgweDE5NDEsICdYJyksCiAgICAoMHgxOTQ0LCAnVicpLAogICAgKDB4MTk2RSwgJ1gnKSwKICAgICgweDE5NzAsICdWJyksCiAgICAoMHgxOTc1LCAnWCcpLAogICAgKDB4MTk4MCwgJ1YnKSwKICAgICgweDE5QUMsICdYJyksCiAgICAoMHgxOUIwLCAnVicpLAogICAgKDB4MTlDQSwgJ1gnKSwKICAgICgweDE5RDAsICdWJyksCiAgICAoMHgxOURCLCAnWCcpLAogICAgKDB4MTlERSwgJ1YnKSwKICAgICgweDFBMUMsICdYJyksCiAgICAoMHgxQTFFLCAnVicpLAogICAgKDB4MUE1RiwgJ1gnKSwKICAgICgweDFBNjAsICdWJyksCiAgICAoMHgxQTdELCAnWCcpLAogICAgKDB4MUE3RiwgJ1YnKSwKICAgICgweDFBOEEsICdYJyksCiAgICAoMHgxQTkwLCAnVicpLAogICAgKDB4MUE5QSwgJ1gnKSwKICAgICgweDFBQTAsICdWJyksCiAgICAoMHgxQUFFLCAnWCcpLAogICAgKDB4MUFCMCwgJ1YnKSwKICAgICgweDFBQ0YsICdYJyksCiAgICAoMHgxQjAwLCAnVicpLAogICAgKDB4MUI0RCwgJ1gnKSwKICAgICgweDFCNTAsICdWJyksCiAgICAoMHgxQjdGLCAnWCcpLAogICAgKDB4MUI4MCwgJ1YnKSwKICAgICgweDFCRjQsICdYJyksCiAgICAoMHgxQkZDLCAnVicpLAogICAgKDB4MUMzOCwgJ1gnKSwKICAgICgweDFDM0IsICdWJyksCiAgICAoMHgxQzRBLCAnWCcpLAogICAgKDB4MUM0RCwgJ1YnKSwKICAgICgweDFDODAsICdNJywgJ9CyJyksCiAgICBdCgpkZWYgX3NlZ18xNSgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweDFDODEsICdNJywgJ9C0JyksCiAgICAoMHgxQzgyLCAnTScsICfQvicpLAogICAgKDB4MUM4MywgJ00nLCAn0YEnKSwKICAgICgweDFDODQsICdNJywgJ9GCJyksCiAgICAoMHgxQzg2LCAnTScsICfRiicpLAogICAgKDB4MUM4NywgJ00nLCAn0aMnKSwKICAgICgweDFDODgsICdNJywgJ+qZiycpLAogICAgKDB4MUM4OSwgJ1gnKSwKICAgICgweDFDOTAsICdNJywgJ+GDkCcpLAogICAgKDB4MUM5MSwgJ00nLCAn4YORJyksCiAgICAoMHgxQzkyLCAnTScsICfhg5InKSwKICAgICgweDFDOTMsICdNJywgJ+GDkycpLAogICAgKDB4MUM5NCwgJ00nLCAn4YOUJyksCiAgICAoMHgxQzk1LCAnTScsICfhg5UnKSwKICAgICgweDFDOTYsICdNJywgJ+GDlicpLAogICAgKDB4MUM5NywgJ00nLCAn4YOXJyksCiAgICAoMHgxQzk4LCAnTScsICfhg5gnKSwKICAgICgweDFDOTksICdNJywgJ+GDmScpLAogICAgKDB4MUM5QSwgJ00nLCAn4YOaJyksCiAgICAoMHgxQzlCLCAnTScsICfhg5snKSwKICAgICgweDFDOUMsICdNJywgJ+GDnCcpLAogICAgKDB4MUM5RCwgJ00nLCAn4YOdJyksCiAgICAoMHgxQzlFLCAnTScsICfhg54nKSwKICAgICgweDFDOUYsICdNJywgJ+GDnycpLAogICAgKDB4MUNBMCwgJ00nLCAn4YOgJyksCiAgICAoMHgxQ0ExLCAnTScsICfhg6EnKSwKICAgICgweDFDQTIsICdNJywgJ+GDoicpLAogICAgKDB4MUNBMywgJ00nLCAn4YOjJyksCiAgICAoMHgxQ0E0LCAnTScsICfhg6QnKSwKICAgICgweDFDQTUsICdNJywgJ+GDpScpLAogICAgKDB4MUNBNiwgJ00nLCAn4YOmJyksCiAgICAoMHgxQ0E3LCAnTScsICfhg6cnKSwKICAgICgweDFDQTgsICdNJywgJ+GDqCcpLAogICAgKDB4MUNBOSwgJ00nLCAn4YOpJyksCiAgICAoMHgxQ0FBLCAnTScsICfhg6onKSwKICAgICgweDFDQUIsICdNJywgJ+GDqycpLAogICAgKDB4MUNBQywgJ00nLCAn4YOsJyksCiAgICAoMHgxQ0FELCAnTScsICfhg60nKSwKICAgICgweDFDQUUsICdNJywgJ+GDricpLAogICAgKDB4MUNBRiwgJ00nLCAn4YOvJyksCiAgICAoMHgxQ0IwLCAnTScsICfhg7AnKSwKICAgICgweDFDQjEsICdNJywgJ+GDsScpLAogICAgKDB4MUNCMiwgJ00nLCAn4YOyJyksCiAgICAoMHgxQ0IzLCAnTScsICfhg7MnKSwKICAgICgweDFDQjQsICdNJywgJ+GDtCcpLAogICAgKDB4MUNCNSwgJ00nLCAn4YO1JyksCiAgICAoMHgxQ0I2LCAnTScsICfhg7YnKSwKICAgICgweDFDQjcsICdNJywgJ+GDtycpLAogICAgKDB4MUNCOCwgJ00nLCAn4YO4JyksCiAgICAoMHgxQ0I5LCAnTScsICfhg7knKSwKICAgICgweDFDQkEsICdNJywgJ+GDuicpLAogICAgKDB4MUNCQiwgJ1gnKSwKICAgICgweDFDQkQsICdNJywgJ+GDvScpLAogICAgKDB4MUNCRSwgJ00nLCAn4YO+JyksCiAgICAoMHgxQ0JGLCAnTScsICfhg78nKSwKICAgICgweDFDQzAsICdWJyksCiAgICAoMHgxQ0M4LCAnWCcpLAogICAgKDB4MUNEMCwgJ1YnKSwKICAgICgweDFDRkIsICdYJyksCiAgICAoMHgxRDAwLCAnVicpLAogICAgKDB4MUQyQywgJ00nLCAnYScpLAogICAgKDB4MUQyRCwgJ00nLCAnw6YnKSwKICAgICgweDFEMkUsICdNJywgJ2InKSwKICAgICgweDFEMkYsICdWJyksCiAgICAoMHgxRDMwLCAnTScsICdkJyksCiAgICAoMHgxRDMxLCAnTScsICdlJyksCiAgICAoMHgxRDMyLCAnTScsICfHnScpLAogICAgKDB4MUQzMywgJ00nLCAnZycpLAogICAgKDB4MUQzNCwgJ00nLCAnaCcpLAogICAgKDB4MUQzNSwgJ00nLCAnaScpLAogICAgKDB4MUQzNiwgJ00nLCAnaicpLAogICAgKDB4MUQzNywgJ00nLCAnaycpLAogICAgKDB4MUQzOCwgJ00nLCAnbCcpLAogICAgKDB4MUQzOSwgJ00nLCAnbScpLAogICAgKDB4MUQzQSwgJ00nLCAnbicpLAogICAgKDB4MUQzQiwgJ1YnKSwKICAgICgweDFEM0MsICdNJywgJ28nKSwKICAgICgweDFEM0QsICdNJywgJ8ijJyksCiAgICAoMHgxRDNFLCAnTScsICdwJyksCiAgICAoMHgxRDNGLCAnTScsICdyJyksCiAgICAoMHgxRDQwLCAnTScsICd0JyksCiAgICAoMHgxRDQxLCAnTScsICd1JyksCiAgICAoMHgxRDQyLCAnTScsICd3JyksCiAgICAoMHgxRDQzLCAnTScsICdhJyksCiAgICAoMHgxRDQ0LCAnTScsICfJkCcpLAogICAgKDB4MUQ0NSwgJ00nLCAnyZEnKSwKICAgICgweDFENDYsICdNJywgJ+G0gicpLAogICAgKDB4MUQ0NywgJ00nLCAnYicpLAogICAgKDB4MUQ0OCwgJ00nLCAnZCcpLAogICAgKDB4MUQ0OSwgJ00nLCAnZScpLAogICAgKDB4MUQ0QSwgJ00nLCAnyZknKSwKICAgICgweDFENEIsICdNJywgJ8mbJyksCiAgICAoMHgxRDRDLCAnTScsICfJnCcpLAogICAgKDB4MUQ0RCwgJ00nLCAnZycpLAogICAgKDB4MUQ0RSwgJ1YnKSwKICAgICgweDFENEYsICdNJywgJ2snKSwKICAgICgweDFENTAsICdNJywgJ20nKSwKICAgICgweDFENTEsICdNJywgJ8WLJyksCiAgICAoMHgxRDUyLCAnTScsICdvJyksCiAgICAoMHgxRDUzLCAnTScsICfJlCcpLAogICAgXQoKZGVmIF9zZWdfMTYoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXToKICAgIHJldHVybiBbCiAgICAoMHgxRDU0LCAnTScsICfhtJYnKSwKICAgICgweDFENTUsICdNJywgJ+G0lycpLAogICAgKDB4MUQ1NiwgJ00nLCAncCcpLAogICAgKDB4MUQ1NywgJ00nLCAndCcpLAogICAgKDB4MUQ1OCwgJ00nLCAndScpLAogICAgKDB4MUQ1OSwgJ00nLCAn4bSdJyksCiAgICAoMHgxRDVBLCAnTScsICfJrycpLAogICAgKDB4MUQ1QiwgJ00nLCAndicpLAogICAgKDB4MUQ1QywgJ00nLCAn4bSlJyksCiAgICAoMHgxRDVELCAnTScsICfOsicpLAogICAgKDB4MUQ1RSwgJ00nLCAnzrMnKSwKICAgICgweDFENUYsICdNJywgJ860JyksCiAgICAoMHgxRDYwLCAnTScsICfPhicpLAogICAgKDB4MUQ2MSwgJ00nLCAnz4cnKSwKICAgICgweDFENjIsICdNJywgJ2knKSwKICAgICgweDFENjMsICdNJywgJ3InKSwKICAgICgweDFENjQsICdNJywgJ3UnKSwKICAgICgweDFENjUsICdNJywgJ3YnKSwKICAgICgweDFENjYsICdNJywgJ86yJyksCiAgICAoMHgxRDY3LCAnTScsICfOsycpLAogICAgKDB4MUQ2OCwgJ00nLCAnz4EnKSwKICAgICgweDFENjksICdNJywgJ8+GJyksCiAgICAoMHgxRDZBLCAnTScsICfPhycpLAogICAgKDB4MUQ2QiwgJ1YnKSwKICAgICgweDFENzgsICdNJywgJ9C9JyksCiAgICAoMHgxRDc5LCAnVicpLAogICAgKDB4MUQ5QiwgJ00nLCAnyZInKSwKICAgICgweDFEOUMsICdNJywgJ2MnKSwKICAgICgweDFEOUQsICdNJywgJ8mVJyksCiAgICAoMHgxRDlFLCAnTScsICfDsCcpLAogICAgKDB4MUQ5RiwgJ00nLCAnyZwnKSwKICAgICgweDFEQTAsICdNJywgJ2YnKSwKICAgICgweDFEQTEsICdNJywgJ8mfJyksCiAgICAoMHgxREEyLCAnTScsICfJoScpLAogICAgKDB4MURBMywgJ00nLCAnyaUnKSwKICAgICgweDFEQTQsICdNJywgJ8moJyksCiAgICAoMHgxREE1LCAnTScsICfJqScpLAogICAgKDB4MURBNiwgJ00nLCAnyaonKSwKICAgICgweDFEQTcsICdNJywgJ+G1uycpLAogICAgKDB4MURBOCwgJ00nLCAnyp0nKSwKICAgICgweDFEQTksICdNJywgJ8mtJyksCiAgICAoMHgxREFBLCAnTScsICfhtoUnKSwKICAgICgweDFEQUIsICdNJywgJ8qfJyksCiAgICAoMHgxREFDLCAnTScsICfJsScpLAogICAgKDB4MURBRCwgJ00nLCAnybAnKSwKICAgICgweDFEQUUsICdNJywgJ8myJyksCiAgICAoMHgxREFGLCAnTScsICfJsycpLAogICAgKDB4MURCMCwgJ00nLCAnybQnKSwKICAgICgweDFEQjEsICdNJywgJ8m1JyksCiAgICAoMHgxREIyLCAnTScsICfJuCcpLAogICAgKDB4MURCMywgJ00nLCAnyoInKSwKICAgICgweDFEQjQsICdNJywgJ8qDJyksCiAgICAoMHgxREI1LCAnTScsICfGqycpLAogICAgKDB4MURCNiwgJ00nLCAnyoknKSwKICAgICgweDFEQjcsICdNJywgJ8qKJyksCiAgICAoMHgxREI4LCAnTScsICfhtJwnKSwKICAgICgweDFEQjksICdNJywgJ8qLJyksCiAgICAoMHgxREJBLCAnTScsICfKjCcpLAogICAgKDB4MURCQiwgJ00nLCAneicpLAogICAgKDB4MURCQywgJ00nLCAnypAnKSwKICAgICgweDFEQkQsICdNJywgJ8qRJyksCiAgICAoMHgxREJFLCAnTScsICfKkicpLAogICAgKDB4MURCRiwgJ00nLCAnzrgnKSwKICAgICgweDFEQzAsICdWJyksCiAgICAoMHgxRTAwLCAnTScsICfhuIEnKSwKICAgICgweDFFMDEsICdWJyksCiAgICAoMHgxRTAyLCAnTScsICfhuIMnKSwKICAgICgweDFFMDMsICdWJyksCiAgICAoMHgxRTA0LCAnTScsICfhuIUnKSwKICAgICgweDFFMDUsICdWJyksCiAgICAoMHgxRTA2LCAnTScsICfhuIcnKSwKICAgICgweDFFMDcsICdWJyksCiAgICAoMHgxRTA4LCAnTScsICfhuIknKSwKICAgICgweDFFMDksICdWJyksCiAgICAoMHgxRTBBLCAnTScsICfhuIsnKSwKICAgICgweDFFMEIsICdWJyksCiAgICAoMHgxRTBDLCAnTScsICfhuI0nKSwKICAgICgweDFFMEQsICdWJyksCiAgICAoMHgxRTBFLCAnTScsICfhuI8nKSwKICAgICgweDFFMEYsICdWJyksCiAgICAoMHgxRTEwLCAnTScsICfhuJEnKSwKICAgICgweDFFMTEsICdWJyksCiAgICAoMHgxRTEyLCAnTScsICfhuJMnKSwKICAgICgweDFFMTMsICdWJyksCiAgICAoMHgxRTE0LCAnTScsICfhuJUnKSwKICAgICgweDFFMTUsICdWJyksCiAgICAoMHgxRTE2LCAnTScsICfhuJcnKSwKICAgICgweDFFMTcsICdWJyksCiAgICAoMHgxRTE4LCAnTScsICfhuJknKSwKICAgICgweDFFMTksICdWJyksCiAgICAoMHgxRTFBLCAnTScsICfhuJsnKSwKICAgICgweDFFMUIsICdWJyksCiAgICAoMHgxRTFDLCAnTScsICfhuJ0nKSwKICAgICgweDFFMUQsICdWJyksCiAgICAoMHgxRTFFLCAnTScsICfhuJ8nKSwKICAgICgweDFFMUYsICdWJyksCiAgICAoMHgxRTIwLCAnTScsICfhuKEnKSwKICAgICgweDFFMjEsICdWJyksCiAgICAoMHgxRTIyLCAnTScsICfhuKMnKSwKICAgICgweDFFMjMsICdWJyksCiAgICBdCgpkZWYgX3NlZ18xNygpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweDFFMjQsICdNJywgJ+G4pScpLAogICAgKDB4MUUyNSwgJ1YnKSwKICAgICgweDFFMjYsICdNJywgJ+G4pycpLAogICAgKDB4MUUyNywgJ1YnKSwKICAgICgweDFFMjgsICdNJywgJ+G4qScpLAogICAgKDB4MUUyOSwgJ1YnKSwKICAgICgweDFFMkEsICdNJywgJ+G4qycpLAogICAgKDB4MUUyQiwgJ1YnKSwKICAgICgweDFFMkMsICdNJywgJ+G4rScpLAogICAgKDB4MUUyRCwgJ1YnKSwKICAgICgweDFFMkUsICdNJywgJ+G4rycpLAogICAgKDB4MUUyRiwgJ1YnKSwKICAgICgweDFFMzAsICdNJywgJ+G4sScpLAogICAgKDB4MUUzMSwgJ1YnKSwKICAgICgweDFFMzIsICdNJywgJ+G4sycpLAogICAgKDB4MUUzMywgJ1YnKSwKICAgICgweDFFMzQsICdNJywgJ+G4tScpLAogICAgKDB4MUUzNSwgJ1YnKSwKICAgICgweDFFMzYsICdNJywgJ+G4tycpLAogICAgKDB4MUUzNywgJ1YnKSwKICAgICgweDFFMzgsICdNJywgJ+G4uScpLAogICAgKDB4MUUzOSwgJ1YnKSwKICAgICgweDFFM0EsICdNJywgJ+G4uycpLAogICAgKDB4MUUzQiwgJ1YnKSwKICAgICgweDFFM0MsICdNJywgJ+G4vScpLAogICAgKDB4MUUzRCwgJ1YnKSwKICAgICgweDFFM0UsICdNJywgJ+G4vycpLAogICAgKDB4MUUzRiwgJ1YnKSwKICAgICgweDFFNDAsICdNJywgJ+G5gScpLAogICAgKDB4MUU0MSwgJ1YnKSwKICAgICgweDFFNDIsICdNJywgJ+G5gycpLAogICAgKDB4MUU0MywgJ1YnKSwKICAgICgweDFFNDQsICdNJywgJ+G5hScpLAogICAgKDB4MUU0NSwgJ1YnKSwKICAgICgweDFFNDYsICdNJywgJ+G5hycpLAogICAgKDB4MUU0NywgJ1YnKSwKICAgICgweDFFNDgsICdNJywgJ+G5iScpLAogICAgKDB4MUU0OSwgJ1YnKSwKICAgICgweDFFNEEsICdNJywgJ+G5iycpLAogICAgKDB4MUU0QiwgJ1YnKSwKICAgICgweDFFNEMsICdNJywgJ+G5jScpLAogICAgKDB4MUU0RCwgJ1YnKSwKICAgICgweDFFNEUsICdNJywgJ+G5jycpLAogICAgKDB4MUU0RiwgJ1YnKSwKICAgICgweDFFNTAsICdNJywgJ+G5kScpLAogICAgKDB4MUU1MSwgJ1YnKSwKICAgICgweDFFNTIsICdNJywgJ+G5kycpLAogICAgKDB4MUU1MywgJ1YnKSwKICAgICgweDFFNTQsICdNJywgJ+G5lScpLAogICAgKDB4MUU1NSwgJ1YnKSwKICAgICgweDFFNTYsICdNJywgJ+G5lycpLAogICAgKDB4MUU1NywgJ1YnKSwKICAgICgweDFFNTgsICdNJywgJ+G5mScpLAogICAgKDB4MUU1OSwgJ1YnKSwKICAgICgweDFFNUEsICdNJywgJ+G5mycpLAogICAgKDB4MUU1QiwgJ1YnKSwKICAgICgweDFFNUMsICdNJywgJ+G5nScpLAogICAgKDB4MUU1RCwgJ1YnKSwKICAgICgweDFFNUUsICdNJywgJ+G5nycpLAogICAgKDB4MUU1RiwgJ1YnKSwKICAgICgweDFFNjAsICdNJywgJ+G5oScpLAogICAgKDB4MUU2MSwgJ1YnKSwKICAgICgweDFFNjIsICdNJywgJ+G5oycpLAogICAgKDB4MUU2MywgJ1YnKSwKICAgICgweDFFNjQsICdNJywgJ+G5pScpLAogICAgKDB4MUU2NSwgJ1YnKSwKICAgICgweDFFNjYsICdNJywgJ+G5pycpLAogICAgKDB4MUU2NywgJ1YnKSwKICAgICgweDFFNjgsICdNJywgJ+G5qScpLAogICAgKDB4MUU2OSwgJ1YnKSwKICAgICgweDFFNkEsICdNJywgJ+G5qycpLAogICAgKDB4MUU2QiwgJ1YnKSwKICAgICgweDFFNkMsICdNJywgJ+G5rScpLAogICAgKDB4MUU2RCwgJ1YnKSwKICAgICgweDFFNkUsICdNJywgJ+G5rycpLAogICAgKDB4MUU2RiwgJ1YnKSwKICAgICgweDFFNzAsICdNJywgJ+G5sScpLAogICAgKDB4MUU3MSwgJ1YnKSwKICAgICgweDFFNzIsICdNJywgJ+G5sycpLAogICAgKDB4MUU3MywgJ1YnKSwKICAgICgweDFFNzQsICdNJywgJ+G5tScpLAogICAgKDB4MUU3NSwgJ1YnKSwKICAgICgweDFFNzYsICdNJywgJ+G5tycpLAogICAgKDB4MUU3NywgJ1YnKSwKICAgICgweDFFNzgsICdNJywgJ+G5uScpLAogICAgKDB4MUU3OSwgJ1YnKSwKICAgICgweDFFN0EsICdNJywgJ+G5uycpLAogICAgKDB4MUU3QiwgJ1YnKSwKICAgICgweDFFN0MsICdNJywgJ+G5vScpLAogICAgKDB4MUU3RCwgJ1YnKSwKICAgICgweDFFN0UsICdNJywgJ+G5vycpLAogICAgKDB4MUU3RiwgJ1YnKSwKICAgICgweDFFODAsICdNJywgJ+G6gScpLAogICAgKDB4MUU4MSwgJ1YnKSwKICAgICgweDFFODIsICdNJywgJ+G6gycpLAogICAgKDB4MUU4MywgJ1YnKSwKICAgICgweDFFODQsICdNJywgJ+G6hScpLAogICAgKDB4MUU4NSwgJ1YnKSwKICAgICgweDFFODYsICdNJywgJ+G6hycpLAogICAgKDB4MUU4NywgJ1YnKSwKICAgIF0KCmRlZiBfc2VnXzE4KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4MUU4OCwgJ00nLCAn4bqJJyksCiAgICAoMHgxRTg5LCAnVicpLAogICAgKDB4MUU4QSwgJ00nLCAn4bqLJyksCiAgICAoMHgxRThCLCAnVicpLAogICAgKDB4MUU4QywgJ00nLCAn4bqNJyksCiAgICAoMHgxRThELCAnVicpLAogICAgKDB4MUU4RSwgJ00nLCAn4bqPJyksCiAgICAoMHgxRThGLCAnVicpLAogICAgKDB4MUU5MCwgJ00nLCAn4bqRJyksCiAgICAoMHgxRTkxLCAnVicpLAogICAgKDB4MUU5MiwgJ00nLCAn4bqTJyksCiAgICAoMHgxRTkzLCAnVicpLAogICAgKDB4MUU5NCwgJ00nLCAn4bqVJyksCiAgICAoMHgxRTk1LCAnVicpLAogICAgKDB4MUU5QSwgJ00nLCAnYcq+JyksCiAgICAoMHgxRTlCLCAnTScsICfhuaEnKSwKICAgICgweDFFOUMsICdWJyksCiAgICAoMHgxRTlFLCAnTScsICdzcycpLAogICAgKDB4MUU5RiwgJ1YnKSwKICAgICgweDFFQTAsICdNJywgJ+G6oScpLAogICAgKDB4MUVBMSwgJ1YnKSwKICAgICgweDFFQTIsICdNJywgJ+G6oycpLAogICAgKDB4MUVBMywgJ1YnKSwKICAgICgweDFFQTQsICdNJywgJ+G6pScpLAogICAgKDB4MUVBNSwgJ1YnKSwKICAgICgweDFFQTYsICdNJywgJ+G6pycpLAogICAgKDB4MUVBNywgJ1YnKSwKICAgICgweDFFQTgsICdNJywgJ+G6qScpLAogICAgKDB4MUVBOSwgJ1YnKSwKICAgICgweDFFQUEsICdNJywgJ+G6qycpLAogICAgKDB4MUVBQiwgJ1YnKSwKICAgICgweDFFQUMsICdNJywgJ+G6rScpLAogICAgKDB4MUVBRCwgJ1YnKSwKICAgICgweDFFQUUsICdNJywgJ+G6rycpLAogICAgKDB4MUVBRiwgJ1YnKSwKICAgICgweDFFQjAsICdNJywgJ+G6sScpLAogICAgKDB4MUVCMSwgJ1YnKSwKICAgICgweDFFQjIsICdNJywgJ+G6sycpLAogICAgKDB4MUVCMywgJ1YnKSwKICAgICgweDFFQjQsICdNJywgJ+G6tScpLAogICAgKDB4MUVCNSwgJ1YnKSwKICAgICgweDFFQjYsICdNJywgJ+G6tycpLAogICAgKDB4MUVCNywgJ1YnKSwKICAgICgweDFFQjgsICdNJywgJ+G6uScpLAogICAgKDB4MUVCOSwgJ1YnKSwKICAgICgweDFFQkEsICdNJywgJ+G6uycpLAogICAgKDB4MUVCQiwgJ1YnKSwKICAgICgweDFFQkMsICdNJywgJ+G6vScpLAogICAgKDB4MUVCRCwgJ1YnKSwKICAgICgweDFFQkUsICdNJywgJ+G6vycpLAogICAgKDB4MUVCRiwgJ1YnKSwKICAgICgweDFFQzAsICdNJywgJ+G7gScpLAogICAgKDB4MUVDMSwgJ1YnKSwKICAgICgweDFFQzIsICdNJywgJ+G7gycpLAogICAgKDB4MUVDMywgJ1YnKSwKICAgICgweDFFQzQsICdNJywgJ+G7hScpLAogICAgKDB4MUVDNSwgJ1YnKSwKICAgICgweDFFQzYsICdNJywgJ+G7hycpLAogICAgKDB4MUVDNywgJ1YnKSwKICAgICgweDFFQzgsICdNJywgJ+G7iScpLAogICAgKDB4MUVDOSwgJ1YnKSwKICAgICgweDFFQ0EsICdNJywgJ+G7iycpLAogICAgKDB4MUVDQiwgJ1YnKSwKICAgICgweDFFQ0MsICdNJywgJ+G7jScpLAogICAgKDB4MUVDRCwgJ1YnKSwKICAgICgweDFFQ0UsICdNJywgJ+G7jycpLAogICAgKDB4MUVDRiwgJ1YnKSwKICAgICgweDFFRDAsICdNJywgJ+G7kScpLAogICAgKDB4MUVEMSwgJ1YnKSwKICAgICgweDFFRDIsICdNJywgJ+G7kycpLAogICAgKDB4MUVEMywgJ1YnKSwKICAgICgweDFFRDQsICdNJywgJ+G7lScpLAogICAgKDB4MUVENSwgJ1YnKSwKICAgICgweDFFRDYsICdNJywgJ+G7lycpLAogICAgKDB4MUVENywgJ1YnKSwKICAgICgweDFFRDgsICdNJywgJ+G7mScpLAogICAgKDB4MUVEOSwgJ1YnKSwKICAgICgweDFFREEsICdNJywgJ+G7mycpLAogICAgKDB4MUVEQiwgJ1YnKSwKICAgICgweDFFREMsICdNJywgJ+G7nScpLAogICAgKDB4MUVERCwgJ1YnKSwKICAgICgweDFFREUsICdNJywgJ+G7nycpLAogICAgKDB4MUVERiwgJ1YnKSwKICAgICgweDFFRTAsICdNJywgJ+G7oScpLAogICAgKDB4MUVFMSwgJ1YnKSwKICAgICgweDFFRTIsICdNJywgJ+G7oycpLAogICAgKDB4MUVFMywgJ1YnKSwKICAgICgweDFFRTQsICdNJywgJ+G7pScpLAogICAgKDB4MUVFNSwgJ1YnKSwKICAgICgweDFFRTYsICdNJywgJ+G7pycpLAogICAgKDB4MUVFNywgJ1YnKSwKICAgICgweDFFRTgsICdNJywgJ+G7qScpLAogICAgKDB4MUVFOSwgJ1YnKSwKICAgICgweDFFRUEsICdNJywgJ+G7qycpLAogICAgKDB4MUVFQiwgJ1YnKSwKICAgICgweDFFRUMsICdNJywgJ+G7rScpLAogICAgKDB4MUVFRCwgJ1YnKSwKICAgICgweDFFRUUsICdNJywgJ+G7rycpLAogICAgKDB4MUVFRiwgJ1YnKSwKICAgICgweDFFRjAsICdNJywgJ+G7sScpLAogICAgXQoKZGVmIF9zZWdfMTkoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXToKICAgIHJldHVybiBbCiAgICAoMHgxRUYxLCAnVicpLAogICAgKDB4MUVGMiwgJ00nLCAn4buzJyksCiAgICAoMHgxRUYzLCAnVicpLAogICAgKDB4MUVGNCwgJ00nLCAn4bu1JyksCiAgICAoMHgxRUY1LCAnVicpLAogICAgKDB4MUVGNiwgJ00nLCAn4bu3JyksCiAgICAoMHgxRUY3LCAnVicpLAogICAgKDB4MUVGOCwgJ00nLCAn4bu5JyksCiAgICAoMHgxRUY5LCAnVicpLAogICAgKDB4MUVGQSwgJ00nLCAn4bu7JyksCiAgICAoMHgxRUZCLCAnVicpLAogICAgKDB4MUVGQywgJ00nLCAn4bu9JyksCiAgICAoMHgxRUZELCAnVicpLAogICAgKDB4MUVGRSwgJ00nLCAn4bu/JyksCiAgICAoMHgxRUZGLCAnVicpLAogICAgKDB4MUYwOCwgJ00nLCAn4byAJyksCiAgICAoMHgxRjA5LCAnTScsICfhvIEnKSwKICAgICgweDFGMEEsICdNJywgJ+G8gicpLAogICAgKDB4MUYwQiwgJ00nLCAn4byDJyksCiAgICAoMHgxRjBDLCAnTScsICfhvIQnKSwKICAgICgweDFGMEQsICdNJywgJ+G8hScpLAogICAgKDB4MUYwRSwgJ00nLCAn4byGJyksCiAgICAoMHgxRjBGLCAnTScsICfhvIcnKSwKICAgICgweDFGMTAsICdWJyksCiAgICAoMHgxRjE2LCAnWCcpLAogICAgKDB4MUYxOCwgJ00nLCAn4byQJyksCiAgICAoMHgxRjE5LCAnTScsICfhvJEnKSwKICAgICgweDFGMUEsICdNJywgJ+G8kicpLAogICAgKDB4MUYxQiwgJ00nLCAn4byTJyksCiAgICAoMHgxRjFDLCAnTScsICfhvJQnKSwKICAgICgweDFGMUQsICdNJywgJ+G8lScpLAogICAgKDB4MUYxRSwgJ1gnKSwKICAgICgweDFGMjAsICdWJyksCiAgICAoMHgxRjI4LCAnTScsICfhvKAnKSwKICAgICgweDFGMjksICdNJywgJ+G8oScpLAogICAgKDB4MUYyQSwgJ00nLCAn4byiJyksCiAgICAoMHgxRjJCLCAnTScsICfhvKMnKSwKICAgICgweDFGMkMsICdNJywgJ+G8pCcpLAogICAgKDB4MUYyRCwgJ00nLCAn4bylJyksCiAgICAoMHgxRjJFLCAnTScsICfhvKYnKSwKICAgICgweDFGMkYsICdNJywgJ+G8pycpLAogICAgKDB4MUYzMCwgJ1YnKSwKICAgICgweDFGMzgsICdNJywgJ+G8sCcpLAogICAgKDB4MUYzOSwgJ00nLCAn4byxJyksCiAgICAoMHgxRjNBLCAnTScsICfhvLInKSwKICAgICgweDFGM0IsICdNJywgJ+G8sycpLAogICAgKDB4MUYzQywgJ00nLCAn4by0JyksCiAgICAoMHgxRjNELCAnTScsICfhvLUnKSwKICAgICgweDFGM0UsICdNJywgJ+G8ticpLAogICAgKDB4MUYzRiwgJ00nLCAn4by3JyksCiAgICAoMHgxRjQwLCAnVicpLAogICAgKDB4MUY0NiwgJ1gnKSwKICAgICgweDFGNDgsICdNJywgJ+G9gCcpLAogICAgKDB4MUY0OSwgJ00nLCAn4b2BJyksCiAgICAoMHgxRjRBLCAnTScsICfhvYInKSwKICAgICgweDFGNEIsICdNJywgJ+G9gycpLAogICAgKDB4MUY0QywgJ00nLCAn4b2EJyksCiAgICAoMHgxRjRELCAnTScsICfhvYUnKSwKICAgICgweDFGNEUsICdYJyksCiAgICAoMHgxRjUwLCAnVicpLAogICAgKDB4MUY1OCwgJ1gnKSwKICAgICgweDFGNTksICdNJywgJ+G9kScpLAogICAgKDB4MUY1QSwgJ1gnKSwKICAgICgweDFGNUIsICdNJywgJ+G9kycpLAogICAgKDB4MUY1QywgJ1gnKSwKICAgICgweDFGNUQsICdNJywgJ+G9lScpLAogICAgKDB4MUY1RSwgJ1gnKSwKICAgICgweDFGNUYsICdNJywgJ+G9lycpLAogICAgKDB4MUY2MCwgJ1YnKSwKICAgICgweDFGNjgsICdNJywgJ+G9oCcpLAogICAgKDB4MUY2OSwgJ00nLCAn4b2hJyksCiAgICAoMHgxRjZBLCAnTScsICfhvaInKSwKICAgICgweDFGNkIsICdNJywgJ+G9oycpLAogICAgKDB4MUY2QywgJ00nLCAn4b2kJyksCiAgICAoMHgxRjZELCAnTScsICfhvaUnKSwKICAgICgweDFGNkUsICdNJywgJ+G9picpLAogICAgKDB4MUY2RiwgJ00nLCAn4b2nJyksCiAgICAoMHgxRjcwLCAnVicpLAogICAgKDB4MUY3MSwgJ00nLCAnzqwnKSwKICAgICgweDFGNzIsICdWJyksCiAgICAoMHgxRjczLCAnTScsICfOrScpLAogICAgKDB4MUY3NCwgJ1YnKSwKICAgICgweDFGNzUsICdNJywgJ86uJyksCiAgICAoMHgxRjc2LCAnVicpLAogICAgKDB4MUY3NywgJ00nLCAnzq8nKSwKICAgICgweDFGNzgsICdWJyksCiAgICAoMHgxRjc5LCAnTScsICfPjCcpLAogICAgKDB4MUY3QSwgJ1YnKSwKICAgICgweDFGN0IsICdNJywgJ8+NJyksCiAgICAoMHgxRjdDLCAnVicpLAogICAgKDB4MUY3RCwgJ00nLCAnz44nKSwKICAgICgweDFGN0UsICdYJyksCiAgICAoMHgxRjgwLCAnTScsICfhvIDOuScpLAogICAgKDB4MUY4MSwgJ00nLCAn4byBzrknKSwKICAgICgweDFGODIsICdNJywgJ+G8gs65JyksCiAgICAoMHgxRjgzLCAnTScsICfhvIPOuScpLAogICAgKDB4MUY4NCwgJ00nLCAn4byEzrknKSwKICAgICgweDFGODUsICdNJywgJ+G8hc65JyksCiAgICAoMHgxRjg2LCAnTScsICfhvIbOuScpLAogICAgKDB4MUY4NywgJ00nLCAn4byHzrknKSwKICAgIF0KCmRlZiBfc2VnXzIwKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4MUY4OCwgJ00nLCAn4byAzrknKSwKICAgICgweDFGODksICdNJywgJ+G8gc65JyksCiAgICAoMHgxRjhBLCAnTScsICfhvILOuScpLAogICAgKDB4MUY4QiwgJ00nLCAn4byDzrknKSwKICAgICgweDFGOEMsICdNJywgJ+G8hM65JyksCiAgICAoMHgxRjhELCAnTScsICfhvIXOuScpLAogICAgKDB4MUY4RSwgJ00nLCAn4byGzrknKSwKICAgICgweDFGOEYsICdNJywgJ+G8h865JyksCiAgICAoMHgxRjkwLCAnTScsICfhvKDOuScpLAogICAgKDB4MUY5MSwgJ00nLCAn4byhzrknKSwKICAgICgweDFGOTIsICdNJywgJ+G8os65JyksCiAgICAoMHgxRjkzLCAnTScsICfhvKPOuScpLAogICAgKDB4MUY5NCwgJ00nLCAn4bykzrknKSwKICAgICgweDFGOTUsICdNJywgJ+G8pc65JyksCiAgICAoMHgxRjk2LCAnTScsICfhvKbOuScpLAogICAgKDB4MUY5NywgJ00nLCAn4bynzrknKSwKICAgICgweDFGOTgsICdNJywgJ+G8oM65JyksCiAgICAoMHgxRjk5LCAnTScsICfhvKHOuScpLAogICAgKDB4MUY5QSwgJ00nLCAn4byizrknKSwKICAgICgweDFGOUIsICdNJywgJ+G8o865JyksCiAgICAoMHgxRjlDLCAnTScsICfhvKTOuScpLAogICAgKDB4MUY5RCwgJ00nLCAn4bylzrknKSwKICAgICgweDFGOUUsICdNJywgJ+G8ps65JyksCiAgICAoMHgxRjlGLCAnTScsICfhvKfOuScpLAogICAgKDB4MUZBMCwgJ00nLCAn4b2gzrknKSwKICAgICgweDFGQTEsICdNJywgJ+G9oc65JyksCiAgICAoMHgxRkEyLCAnTScsICfhvaLOuScpLAogICAgKDB4MUZBMywgJ00nLCAn4b2jzrknKSwKICAgICgweDFGQTQsICdNJywgJ+G9pM65JyksCiAgICAoMHgxRkE1LCAnTScsICfhvaXOuScpLAogICAgKDB4MUZBNiwgJ00nLCAn4b2mzrknKSwKICAgICgweDFGQTcsICdNJywgJ+G9p865JyksCiAgICAoMHgxRkE4LCAnTScsICfhvaDOuScpLAogICAgKDB4MUZBOSwgJ00nLCAn4b2hzrknKSwKICAgICgweDFGQUEsICdNJywgJ+G9os65JyksCiAgICAoMHgxRkFCLCAnTScsICfhvaPOuScpLAogICAgKDB4MUZBQywgJ00nLCAn4b2kzrknKSwKICAgICgweDFGQUQsICdNJywgJ+G9pc65JyksCiAgICAoMHgxRkFFLCAnTScsICfhvabOuScpLAogICAgKDB4MUZBRiwgJ00nLCAn4b2nzrknKSwKICAgICgweDFGQjAsICdWJyksCiAgICAoMHgxRkIyLCAnTScsICfhvbDOuScpLAogICAgKDB4MUZCMywgJ00nLCAnzrHOuScpLAogICAgKDB4MUZCNCwgJ00nLCAnzqzOuScpLAogICAgKDB4MUZCNSwgJ1gnKSwKICAgICgweDFGQjYsICdWJyksCiAgICAoMHgxRkI3LCAnTScsICfhvrbOuScpLAogICAgKDB4MUZCOCwgJ00nLCAn4b6wJyksCiAgICAoMHgxRkI5LCAnTScsICfhvrEnKSwKICAgICgweDFGQkEsICdNJywgJ+G9sCcpLAogICAgKDB4MUZCQiwgJ00nLCAnzqwnKSwKICAgICgweDFGQkMsICdNJywgJ86xzrknKSwKICAgICgweDFGQkQsICczJywgJyDMkycpLAogICAgKDB4MUZCRSwgJ00nLCAnzrknKSwKICAgICgweDFGQkYsICczJywgJyDMkycpLAogICAgKDB4MUZDMCwgJzMnLCAnIM2CJyksCiAgICAoMHgxRkMxLCAnMycsICcgzIjNgicpLAogICAgKDB4MUZDMiwgJ00nLCAn4b20zrknKSwKICAgICgweDFGQzMsICdNJywgJ863zrknKSwKICAgICgweDFGQzQsICdNJywgJ86uzrknKSwKICAgICgweDFGQzUsICdYJyksCiAgICAoMHgxRkM2LCAnVicpLAogICAgKDB4MUZDNywgJ00nLCAn4b+GzrknKSwKICAgICgweDFGQzgsICdNJywgJ+G9sicpLAogICAgKDB4MUZDOSwgJ00nLCAnzq0nKSwKICAgICgweDFGQ0EsICdNJywgJ+G9tCcpLAogICAgKDB4MUZDQiwgJ00nLCAnzq4nKSwKICAgICgweDFGQ0MsICdNJywgJ863zrknKSwKICAgICgweDFGQ0QsICczJywgJyDMk8yAJyksCiAgICAoMHgxRkNFLCAnMycsICcgzJPMgScpLAogICAgKDB4MUZDRiwgJzMnLCAnIMyTzYInKSwKICAgICgweDFGRDAsICdWJyksCiAgICAoMHgxRkQzLCAnTScsICfOkCcpLAogICAgKDB4MUZENCwgJ1gnKSwKICAgICgweDFGRDYsICdWJyksCiAgICAoMHgxRkQ4LCAnTScsICfhv5AnKSwKICAgICgweDFGRDksICdNJywgJ+G/kScpLAogICAgKDB4MUZEQSwgJ00nLCAn4b22JyksCiAgICAoMHgxRkRCLCAnTScsICfOrycpLAogICAgKDB4MUZEQywgJ1gnKSwKICAgICgweDFGREQsICczJywgJyDMlMyAJyksCiAgICAoMHgxRkRFLCAnMycsICcgzJTMgScpLAogICAgKDB4MUZERiwgJzMnLCAnIMyUzYInKSwKICAgICgweDFGRTAsICdWJyksCiAgICAoMHgxRkUzLCAnTScsICfOsCcpLAogICAgKDB4MUZFNCwgJ1YnKSwKICAgICgweDFGRTgsICdNJywgJ+G/oCcpLAogICAgKDB4MUZFOSwgJ00nLCAn4b+hJyksCiAgICAoMHgxRkVBLCAnTScsICfhvbonKSwKICAgICgweDFGRUIsICdNJywgJ8+NJyksCiAgICAoMHgxRkVDLCAnTScsICfhv6UnKSwKICAgICgweDFGRUQsICczJywgJyDMiMyAJyksCiAgICAoMHgxRkVFLCAnMycsICcgzIjMgScpLAogICAgKDB4MUZFRiwgJzMnLCAnYCcpLAogICAgKDB4MUZGMCwgJ1gnKSwKICAgICgweDFGRjIsICdNJywgJ+G9vM65JyksCiAgICAoMHgxRkYzLCAnTScsICfPic65JyksCiAgICAoMHgxRkY0LCAnTScsICfPjs65JyksCiAgICAoMHgxRkY1LCAnWCcpLAogICAgKDB4MUZGNiwgJ1YnKSwKICAgIF0KCmRlZiBfc2VnXzIxKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4MUZGNywgJ00nLCAn4b+2zrknKSwKICAgICgweDFGRjgsICdNJywgJ+G9uCcpLAogICAgKDB4MUZGOSwgJ00nLCAnz4wnKSwKICAgICgweDFGRkEsICdNJywgJ+G9vCcpLAogICAgKDB4MUZGQiwgJ00nLCAnz44nKSwKICAgICgweDFGRkMsICdNJywgJ8+JzrknKSwKICAgICgweDFGRkQsICczJywgJyDMgScpLAogICAgKDB4MUZGRSwgJzMnLCAnIMyUJyksCiAgICAoMHgxRkZGLCAnWCcpLAogICAgKDB4MjAwMCwgJzMnLCAnICcpLAogICAgKDB4MjAwQiwgJ0knKSwKICAgICgweDIwMEMsICdEJywgJycpLAogICAgKDB4MjAwRSwgJ1gnKSwKICAgICgweDIwMTAsICdWJyksCiAgICAoMHgyMDExLCAnTScsICfigJAnKSwKICAgICgweDIwMTIsICdWJyksCiAgICAoMHgyMDE3LCAnMycsICcgzLMnKSwKICAgICgweDIwMTgsICdWJyksCiAgICAoMHgyMDI0LCAnWCcpLAogICAgKDB4MjAyNywgJ1YnKSwKICAgICgweDIwMjgsICdYJyksCiAgICAoMHgyMDJGLCAnMycsICcgJyksCiAgICAoMHgyMDMwLCAnVicpLAogICAgKDB4MjAzMywgJ00nLCAn4oCy4oCyJyksCiAgICAoMHgyMDM0LCAnTScsICfigLLigLLigLInKSwKICAgICgweDIwMzUsICdWJyksCiAgICAoMHgyMDM2LCAnTScsICfigLXigLUnKSwKICAgICgweDIwMzcsICdNJywgJ+KAteKAteKAtScpLAogICAgKDB4MjAzOCwgJ1YnKSwKICAgICgweDIwM0MsICczJywgJyEhJyksCiAgICAoMHgyMDNELCAnVicpLAogICAgKDB4MjAzRSwgJzMnLCAnIMyFJyksCiAgICAoMHgyMDNGLCAnVicpLAogICAgKDB4MjA0NywgJzMnLCAnPz8nKSwKICAgICgweDIwNDgsICczJywgJz8hJyksCiAgICAoMHgyMDQ5LCAnMycsICchPycpLAogICAgKDB4MjA0QSwgJ1YnKSwKICAgICgweDIwNTcsICdNJywgJ+KAsuKAsuKAsuKAsicpLAogICAgKDB4MjA1OCwgJ1YnKSwKICAgICgweDIwNUYsICczJywgJyAnKSwKICAgICgweDIwNjAsICdJJyksCiAgICAoMHgyMDYxLCAnWCcpLAogICAgKDB4MjA2NCwgJ0knKSwKICAgICgweDIwNjUsICdYJyksCiAgICAoMHgyMDcwLCAnTScsICcwJyksCiAgICAoMHgyMDcxLCAnTScsICdpJyksCiAgICAoMHgyMDcyLCAnWCcpLAogICAgKDB4MjA3NCwgJ00nLCAnNCcpLAogICAgKDB4MjA3NSwgJ00nLCAnNScpLAogICAgKDB4MjA3NiwgJ00nLCAnNicpLAogICAgKDB4MjA3NywgJ00nLCAnNycpLAogICAgKDB4MjA3OCwgJ00nLCAnOCcpLAogICAgKDB4MjA3OSwgJ00nLCAnOScpLAogICAgKDB4MjA3QSwgJzMnLCAnKycpLAogICAgKDB4MjA3QiwgJ00nLCAn4oiSJyksCiAgICAoMHgyMDdDLCAnMycsICc9JyksCiAgICAoMHgyMDdELCAnMycsICcoJyksCiAgICAoMHgyMDdFLCAnMycsICcpJyksCiAgICAoMHgyMDdGLCAnTScsICduJyksCiAgICAoMHgyMDgwLCAnTScsICcwJyksCiAgICAoMHgyMDgxLCAnTScsICcxJyksCiAgICAoMHgyMDgyLCAnTScsICcyJyksCiAgICAoMHgyMDgzLCAnTScsICczJyksCiAgICAoMHgyMDg0LCAnTScsICc0JyksCiAgICAoMHgyMDg1LCAnTScsICc1JyksCiAgICAoMHgyMDg2LCAnTScsICc2JyksCiAgICAoMHgyMDg3LCAnTScsICc3JyksCiAgICAoMHgyMDg4LCAnTScsICc4JyksCiAgICAoMHgyMDg5LCAnTScsICc5JyksCiAgICAoMHgyMDhBLCAnMycsICcrJyksCiAgICAoMHgyMDhCLCAnTScsICfiiJInKSwKICAgICgweDIwOEMsICczJywgJz0nKSwKICAgICgweDIwOEQsICczJywgJygnKSwKICAgICgweDIwOEUsICczJywgJyknKSwKICAgICgweDIwOEYsICdYJyksCiAgICAoMHgyMDkwLCAnTScsICdhJyksCiAgICAoMHgyMDkxLCAnTScsICdlJyksCiAgICAoMHgyMDkyLCAnTScsICdvJyksCiAgICAoMHgyMDkzLCAnTScsICd4JyksCiAgICAoMHgyMDk0LCAnTScsICfJmScpLAogICAgKDB4MjA5NSwgJ00nLCAnaCcpLAogICAgKDB4MjA5NiwgJ00nLCAnaycpLAogICAgKDB4MjA5NywgJ00nLCAnbCcpLAogICAgKDB4MjA5OCwgJ00nLCAnbScpLAogICAgKDB4MjA5OSwgJ00nLCAnbicpLAogICAgKDB4MjA5QSwgJ00nLCAncCcpLAogICAgKDB4MjA5QiwgJ00nLCAncycpLAogICAgKDB4MjA5QywgJ00nLCAndCcpLAogICAgKDB4MjA5RCwgJ1gnKSwKICAgICgweDIwQTAsICdWJyksCiAgICAoMHgyMEE4LCAnTScsICdycycpLAogICAgKDB4MjBBOSwgJ1YnKSwKICAgICgweDIwQzEsICdYJyksCiAgICAoMHgyMEQwLCAnVicpLAogICAgKDB4MjBGMSwgJ1gnKSwKICAgICgweDIxMDAsICczJywgJ2EvYycpLAogICAgKDB4MjEwMSwgJzMnLCAnYS9zJyksCiAgICAoMHgyMTAyLCAnTScsICdjJyksCiAgICAoMHgyMTAzLCAnTScsICfCsGMnKSwKICAgICgweDIxMDQsICdWJyksCiAgICBdCgpkZWYgX3NlZ18yMigpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweDIxMDUsICczJywgJ2MvbycpLAogICAgKDB4MjEwNiwgJzMnLCAnYy91JyksCiAgICAoMHgyMTA3LCAnTScsICfJmycpLAogICAgKDB4MjEwOCwgJ1YnKSwKICAgICgweDIxMDksICdNJywgJ8KwZicpLAogICAgKDB4MjEwQSwgJ00nLCAnZycpLAogICAgKDB4MjEwQiwgJ00nLCAnaCcpLAogICAgKDB4MjEwRiwgJ00nLCAnxKcnKSwKICAgICgweDIxMTAsICdNJywgJ2knKSwKICAgICgweDIxMTIsICdNJywgJ2wnKSwKICAgICgweDIxMTQsICdWJyksCiAgICAoMHgyMTE1LCAnTScsICduJyksCiAgICAoMHgyMTE2LCAnTScsICdubycpLAogICAgKDB4MjExNywgJ1YnKSwKICAgICgweDIxMTksICdNJywgJ3AnKSwKICAgICgweDIxMUEsICdNJywgJ3EnKSwKICAgICgweDIxMUIsICdNJywgJ3InKSwKICAgICgweDIxMUUsICdWJyksCiAgICAoMHgyMTIwLCAnTScsICdzbScpLAogICAgKDB4MjEyMSwgJ00nLCAndGVsJyksCiAgICAoMHgyMTIyLCAnTScsICd0bScpLAogICAgKDB4MjEyMywgJ1YnKSwKICAgICgweDIxMjQsICdNJywgJ3onKSwKICAgICgweDIxMjUsICdWJyksCiAgICAoMHgyMTI2LCAnTScsICfPiScpLAogICAgKDB4MjEyNywgJ1YnKSwKICAgICgweDIxMjgsICdNJywgJ3onKSwKICAgICgweDIxMjksICdWJyksCiAgICAoMHgyMTJBLCAnTScsICdrJyksCiAgICAoMHgyMTJCLCAnTScsICfDpScpLAogICAgKDB4MjEyQywgJ00nLCAnYicpLAogICAgKDB4MjEyRCwgJ00nLCAnYycpLAogICAgKDB4MjEyRSwgJ1YnKSwKICAgICgweDIxMkYsICdNJywgJ2UnKSwKICAgICgweDIxMzEsICdNJywgJ2YnKSwKICAgICgweDIxMzIsICdYJyksCiAgICAoMHgyMTMzLCAnTScsICdtJyksCiAgICAoMHgyMTM0LCAnTScsICdvJyksCiAgICAoMHgyMTM1LCAnTScsICfXkCcpLAogICAgKDB4MjEzNiwgJ00nLCAn15EnKSwKICAgICgweDIxMzcsICdNJywgJ9eSJyksCiAgICAoMHgyMTM4LCAnTScsICfXkycpLAogICAgKDB4MjEzOSwgJ00nLCAnaScpLAogICAgKDB4MjEzQSwgJ1YnKSwKICAgICgweDIxM0IsICdNJywgJ2ZheCcpLAogICAgKDB4MjEzQywgJ00nLCAnz4AnKSwKICAgICgweDIxM0QsICdNJywgJ86zJyksCiAgICAoMHgyMTNGLCAnTScsICfPgCcpLAogICAgKDB4MjE0MCwgJ00nLCAn4oiRJyksCiAgICAoMHgyMTQxLCAnVicpLAogICAgKDB4MjE0NSwgJ00nLCAnZCcpLAogICAgKDB4MjE0NywgJ00nLCAnZScpLAogICAgKDB4MjE0OCwgJ00nLCAnaScpLAogICAgKDB4MjE0OSwgJ00nLCAnaicpLAogICAgKDB4MjE0QSwgJ1YnKSwKICAgICgweDIxNTAsICdNJywgJzHigYQ3JyksCiAgICAoMHgyMTUxLCAnTScsICcx4oGEOScpLAogICAgKDB4MjE1MiwgJ00nLCAnMeKBhDEwJyksCiAgICAoMHgyMTUzLCAnTScsICcx4oGEMycpLAogICAgKDB4MjE1NCwgJ00nLCAnMuKBhDMnKSwKICAgICgweDIxNTUsICdNJywgJzHigYQ1JyksCiAgICAoMHgyMTU2LCAnTScsICcy4oGENScpLAogICAgKDB4MjE1NywgJ00nLCAnM+KBhDUnKSwKICAgICgweDIxNTgsICdNJywgJzTigYQ1JyksCiAgICAoMHgyMTU5LCAnTScsICcx4oGENicpLAogICAgKDB4MjE1QSwgJ00nLCAnNeKBhDYnKSwKICAgICgweDIxNUIsICdNJywgJzHigYQ4JyksCiAgICAoMHgyMTVDLCAnTScsICcz4oGEOCcpLAogICAgKDB4MjE1RCwgJ00nLCAnNeKBhDgnKSwKICAgICgweDIxNUUsICdNJywgJzfigYQ4JyksCiAgICAoMHgyMTVGLCAnTScsICcx4oGEJyksCiAgICAoMHgyMTYwLCAnTScsICdpJyksCiAgICAoMHgyMTYxLCAnTScsICdpaScpLAogICAgKDB4MjE2MiwgJ00nLCAnaWlpJyksCiAgICAoMHgyMTYzLCAnTScsICdpdicpLAogICAgKDB4MjE2NCwgJ00nLCAndicpLAogICAgKDB4MjE2NSwgJ00nLCAndmknKSwKICAgICgweDIxNjYsICdNJywgJ3ZpaScpLAogICAgKDB4MjE2NywgJ00nLCAndmlpaScpLAogICAgKDB4MjE2OCwgJ00nLCAnaXgnKSwKICAgICgweDIxNjksICdNJywgJ3gnKSwKICAgICgweDIxNkEsICdNJywgJ3hpJyksCiAgICAoMHgyMTZCLCAnTScsICd4aWknKSwKICAgICgweDIxNkMsICdNJywgJ2wnKSwKICAgICgweDIxNkQsICdNJywgJ2MnKSwKICAgICgweDIxNkUsICdNJywgJ2QnKSwKICAgICgweDIxNkYsICdNJywgJ20nKSwKICAgICgweDIxNzAsICdNJywgJ2knKSwKICAgICgweDIxNzEsICdNJywgJ2lpJyksCiAgICAoMHgyMTcyLCAnTScsICdpaWknKSwKICAgICgweDIxNzMsICdNJywgJ2l2JyksCiAgICAoMHgyMTc0LCAnTScsICd2JyksCiAgICAoMHgyMTc1LCAnTScsICd2aScpLAogICAgKDB4MjE3NiwgJ00nLCAndmlpJyksCiAgICAoMHgyMTc3LCAnTScsICd2aWlpJyksCiAgICAoMHgyMTc4LCAnTScsICdpeCcpLAogICAgKDB4MjE3OSwgJ00nLCAneCcpLAogICAgKDB4MjE3QSwgJ00nLCAneGknKSwKICAgICgweDIxN0IsICdNJywgJ3hpaScpLAogICAgKDB4MjE3QywgJ00nLCAnbCcpLAogICAgXQoKZGVmIF9zZWdfMjMoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXToKICAgIHJldHVybiBbCiAgICAoMHgyMTdELCAnTScsICdjJyksCiAgICAoMHgyMTdFLCAnTScsICdkJyksCiAgICAoMHgyMTdGLCAnTScsICdtJyksCiAgICAoMHgyMTgwLCAnVicpLAogICAgKDB4MjE4MywgJ1gnKSwKICAgICgweDIxODQsICdWJyksCiAgICAoMHgyMTg5LCAnTScsICcw4oGEMycpLAogICAgKDB4MjE4QSwgJ1YnKSwKICAgICgweDIxOEMsICdYJyksCiAgICAoMHgyMTkwLCAnVicpLAogICAgKDB4MjIyQywgJ00nLCAn4oir4oirJyksCiAgICAoMHgyMjJELCAnTScsICfiiKviiKviiKsnKSwKICAgICgweDIyMkUsICdWJyksCiAgICAoMHgyMjJGLCAnTScsICfiiK7iiK4nKSwKICAgICgweDIyMzAsICdNJywgJ+KIruKIruKIricpLAogICAgKDB4MjIzMSwgJ1YnKSwKICAgICgweDIyNjAsICczJyksCiAgICAoMHgyMjYxLCAnVicpLAogICAgKDB4MjI2RSwgJzMnKSwKICAgICgweDIyNzAsICdWJyksCiAgICAoMHgyMzI5LCAnTScsICfjgIgnKSwKICAgICgweDIzMkEsICdNJywgJ+OAiScpLAogICAgKDB4MjMyQiwgJ1YnKSwKICAgICgweDI0MjcsICdYJyksCiAgICAoMHgyNDQwLCAnVicpLAogICAgKDB4MjQ0QiwgJ1gnKSwKICAgICgweDI0NjAsICdNJywgJzEnKSwKICAgICgweDI0NjEsICdNJywgJzInKSwKICAgICgweDI0NjIsICdNJywgJzMnKSwKICAgICgweDI0NjMsICdNJywgJzQnKSwKICAgICgweDI0NjQsICdNJywgJzUnKSwKICAgICgweDI0NjUsICdNJywgJzYnKSwKICAgICgweDI0NjYsICdNJywgJzcnKSwKICAgICgweDI0NjcsICdNJywgJzgnKSwKICAgICgweDI0NjgsICdNJywgJzknKSwKICAgICgweDI0NjksICdNJywgJzEwJyksCiAgICAoMHgyNDZBLCAnTScsICcxMScpLAogICAgKDB4MjQ2QiwgJ00nLCAnMTInKSwKICAgICgweDI0NkMsICdNJywgJzEzJyksCiAgICAoMHgyNDZELCAnTScsICcxNCcpLAogICAgKDB4MjQ2RSwgJ00nLCAnMTUnKSwKICAgICgweDI0NkYsICdNJywgJzE2JyksCiAgICAoMHgyNDcwLCAnTScsICcxNycpLAogICAgKDB4MjQ3MSwgJ00nLCAnMTgnKSwKICAgICgweDI0NzIsICdNJywgJzE5JyksCiAgICAoMHgyNDczLCAnTScsICcyMCcpLAogICAgKDB4MjQ3NCwgJzMnLCAnKDEpJyksCiAgICAoMHgyNDc1LCAnMycsICcoMiknKSwKICAgICgweDI0NzYsICczJywgJygzKScpLAogICAgKDB4MjQ3NywgJzMnLCAnKDQpJyksCiAgICAoMHgyNDc4LCAnMycsICcoNSknKSwKICAgICgweDI0NzksICczJywgJyg2KScpLAogICAgKDB4MjQ3QSwgJzMnLCAnKDcpJyksCiAgICAoMHgyNDdCLCAnMycsICcoOCknKSwKICAgICgweDI0N0MsICczJywgJyg5KScpLAogICAgKDB4MjQ3RCwgJzMnLCAnKDEwKScpLAogICAgKDB4MjQ3RSwgJzMnLCAnKDExKScpLAogICAgKDB4MjQ3RiwgJzMnLCAnKDEyKScpLAogICAgKDB4MjQ4MCwgJzMnLCAnKDEzKScpLAogICAgKDB4MjQ4MSwgJzMnLCAnKDE0KScpLAogICAgKDB4MjQ4MiwgJzMnLCAnKDE1KScpLAogICAgKDB4MjQ4MywgJzMnLCAnKDE2KScpLAogICAgKDB4MjQ4NCwgJzMnLCAnKDE3KScpLAogICAgKDB4MjQ4NSwgJzMnLCAnKDE4KScpLAogICAgKDB4MjQ4NiwgJzMnLCAnKDE5KScpLAogICAgKDB4MjQ4NywgJzMnLCAnKDIwKScpLAogICAgKDB4MjQ4OCwgJ1gnKSwKICAgICgweDI0OUMsICczJywgJyhhKScpLAogICAgKDB4MjQ5RCwgJzMnLCAnKGIpJyksCiAgICAoMHgyNDlFLCAnMycsICcoYyknKSwKICAgICgweDI0OUYsICczJywgJyhkKScpLAogICAgKDB4MjRBMCwgJzMnLCAnKGUpJyksCiAgICAoMHgyNEExLCAnMycsICcoZiknKSwKICAgICgweDI0QTIsICczJywgJyhnKScpLAogICAgKDB4MjRBMywgJzMnLCAnKGgpJyksCiAgICAoMHgyNEE0LCAnMycsICcoaSknKSwKICAgICgweDI0QTUsICczJywgJyhqKScpLAogICAgKDB4MjRBNiwgJzMnLCAnKGspJyksCiAgICAoMHgyNEE3LCAnMycsICcobCknKSwKICAgICgweDI0QTgsICczJywgJyhtKScpLAogICAgKDB4MjRBOSwgJzMnLCAnKG4pJyksCiAgICAoMHgyNEFBLCAnMycsICcobyknKSwKICAgICgweDI0QUIsICczJywgJyhwKScpLAogICAgKDB4MjRBQywgJzMnLCAnKHEpJyksCiAgICAoMHgyNEFELCAnMycsICcociknKSwKICAgICgweDI0QUUsICczJywgJyhzKScpLAogICAgKDB4MjRBRiwgJzMnLCAnKHQpJyksCiAgICAoMHgyNEIwLCAnMycsICcodSknKSwKICAgICgweDI0QjEsICczJywgJyh2KScpLAogICAgKDB4MjRCMiwgJzMnLCAnKHcpJyksCiAgICAoMHgyNEIzLCAnMycsICcoeCknKSwKICAgICgweDI0QjQsICczJywgJyh5KScpLAogICAgKDB4MjRCNSwgJzMnLCAnKHopJyksCiAgICAoMHgyNEI2LCAnTScsICdhJyksCiAgICAoMHgyNEI3LCAnTScsICdiJyksCiAgICAoMHgyNEI4LCAnTScsICdjJyksCiAgICAoMHgyNEI5LCAnTScsICdkJyksCiAgICAoMHgyNEJBLCAnTScsICdlJyksCiAgICAoMHgyNEJCLCAnTScsICdmJyksCiAgICAoMHgyNEJDLCAnTScsICdnJyksCiAgICBdCgpkZWYgX3NlZ18yNCgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweDI0QkQsICdNJywgJ2gnKSwKICAgICgweDI0QkUsICdNJywgJ2knKSwKICAgICgweDI0QkYsICdNJywgJ2onKSwKICAgICgweDI0QzAsICdNJywgJ2snKSwKICAgICgweDI0QzEsICdNJywgJ2wnKSwKICAgICgweDI0QzIsICdNJywgJ20nKSwKICAgICgweDI0QzMsICdNJywgJ24nKSwKICAgICgweDI0QzQsICdNJywgJ28nKSwKICAgICgweDI0QzUsICdNJywgJ3AnKSwKICAgICgweDI0QzYsICdNJywgJ3EnKSwKICAgICgweDI0QzcsICdNJywgJ3InKSwKICAgICgweDI0QzgsICdNJywgJ3MnKSwKICAgICgweDI0QzksICdNJywgJ3QnKSwKICAgICgweDI0Q0EsICdNJywgJ3UnKSwKICAgICgweDI0Q0IsICdNJywgJ3YnKSwKICAgICgweDI0Q0MsICdNJywgJ3cnKSwKICAgICgweDI0Q0QsICdNJywgJ3gnKSwKICAgICgweDI0Q0UsICdNJywgJ3knKSwKICAgICgweDI0Q0YsICdNJywgJ3onKSwKICAgICgweDI0RDAsICdNJywgJ2EnKSwKICAgICgweDI0RDEsICdNJywgJ2InKSwKICAgICgweDI0RDIsICdNJywgJ2MnKSwKICAgICgweDI0RDMsICdNJywgJ2QnKSwKICAgICgweDI0RDQsICdNJywgJ2UnKSwKICAgICgweDI0RDUsICdNJywgJ2YnKSwKICAgICgweDI0RDYsICdNJywgJ2cnKSwKICAgICgweDI0RDcsICdNJywgJ2gnKSwKICAgICgweDI0RDgsICdNJywgJ2knKSwKICAgICgweDI0RDksICdNJywgJ2onKSwKICAgICgweDI0REEsICdNJywgJ2snKSwKICAgICgweDI0REIsICdNJywgJ2wnKSwKICAgICgweDI0REMsICdNJywgJ20nKSwKICAgICgweDI0REQsICdNJywgJ24nKSwKICAgICgweDI0REUsICdNJywgJ28nKSwKICAgICgweDI0REYsICdNJywgJ3AnKSwKICAgICgweDI0RTAsICdNJywgJ3EnKSwKICAgICgweDI0RTEsICdNJywgJ3InKSwKICAgICgweDI0RTIsICdNJywgJ3MnKSwKICAgICgweDI0RTMsICdNJywgJ3QnKSwKICAgICgweDI0RTQsICdNJywgJ3UnKSwKICAgICgweDI0RTUsICdNJywgJ3YnKSwKICAgICgweDI0RTYsICdNJywgJ3cnKSwKICAgICgweDI0RTcsICdNJywgJ3gnKSwKICAgICgweDI0RTgsICdNJywgJ3knKSwKICAgICgweDI0RTksICdNJywgJ3onKSwKICAgICgweDI0RUEsICdNJywgJzAnKSwKICAgICgweDI0RUIsICdWJyksCiAgICAoMHgyQTBDLCAnTScsICfiiKviiKviiKviiKsnKSwKICAgICgweDJBMEQsICdWJyksCiAgICAoMHgyQTc0LCAnMycsICc6Oj0nKSwKICAgICgweDJBNzUsICczJywgJz09JyksCiAgICAoMHgyQTc2LCAnMycsICc9PT0nKSwKICAgICgweDJBNzcsICdWJyksCiAgICAoMHgyQURDLCAnTScsICfiq53MuCcpLAogICAgKDB4MkFERCwgJ1YnKSwKICAgICgweDJCNzQsICdYJyksCiAgICAoMHgyQjc2LCAnVicpLAogICAgKDB4MkI5NiwgJ1gnKSwKICAgICgweDJCOTcsICdWJyksCiAgICAoMHgyQzAwLCAnTScsICfisLAnKSwKICAgICgweDJDMDEsICdNJywgJ+KwsScpLAogICAgKDB4MkMwMiwgJ00nLCAn4rCyJyksCiAgICAoMHgyQzAzLCAnTScsICfisLMnKSwKICAgICgweDJDMDQsICdNJywgJ+KwtCcpLAogICAgKDB4MkMwNSwgJ00nLCAn4rC1JyksCiAgICAoMHgyQzA2LCAnTScsICfisLYnKSwKICAgICgweDJDMDcsICdNJywgJ+KwtycpLAogICAgKDB4MkMwOCwgJ00nLCAn4rC4JyksCiAgICAoMHgyQzA5LCAnTScsICfisLknKSwKICAgICgweDJDMEEsICdNJywgJ+KwuicpLAogICAgKDB4MkMwQiwgJ00nLCAn4rC7JyksCiAgICAoMHgyQzBDLCAnTScsICfisLwnKSwKICAgICgweDJDMEQsICdNJywgJ+KwvScpLAogICAgKDB4MkMwRSwgJ00nLCAn4rC+JyksCiAgICAoMHgyQzBGLCAnTScsICfisL8nKSwKICAgICgweDJDMTAsICdNJywgJ+KxgCcpLAogICAgKDB4MkMxMSwgJ00nLCAn4rGBJyksCiAgICAoMHgyQzEyLCAnTScsICfisYInKSwKICAgICgweDJDMTMsICdNJywgJ+KxgycpLAogICAgKDB4MkMxNCwgJ00nLCAn4rGEJyksCiAgICAoMHgyQzE1LCAnTScsICfisYUnKSwKICAgICgweDJDMTYsICdNJywgJ+KxhicpLAogICAgKDB4MkMxNywgJ00nLCAn4rGHJyksCiAgICAoMHgyQzE4LCAnTScsICfisYgnKSwKICAgICgweDJDMTksICdNJywgJ+KxiScpLAogICAgKDB4MkMxQSwgJ00nLCAn4rGKJyksCiAgICAoMHgyQzFCLCAnTScsICfisYsnKSwKICAgICgweDJDMUMsICdNJywgJ+KxjCcpLAogICAgKDB4MkMxRCwgJ00nLCAn4rGNJyksCiAgICAoMHgyQzFFLCAnTScsICfisY4nKSwKICAgICgweDJDMUYsICdNJywgJ+KxjycpLAogICAgKDB4MkMyMCwgJ00nLCAn4rGQJyksCiAgICAoMHgyQzIxLCAnTScsICfisZEnKSwKICAgICgweDJDMjIsICdNJywgJ+KxkicpLAogICAgKDB4MkMyMywgJ00nLCAn4rGTJyksCiAgICAoMHgyQzI0LCAnTScsICfisZQnKSwKICAgICgweDJDMjUsICdNJywgJ+KxlScpLAogICAgKDB4MkMyNiwgJ00nLCAn4rGWJyksCiAgICAoMHgyQzI3LCAnTScsICfisZcnKSwKICAgICgweDJDMjgsICdNJywgJ+KxmCcpLAogICAgXQoKZGVmIF9zZWdfMjUoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXToKICAgIHJldHVybiBbCiAgICAoMHgyQzI5LCAnTScsICfisZknKSwKICAgICgweDJDMkEsICdNJywgJ+KxmicpLAogICAgKDB4MkMyQiwgJ00nLCAn4rGbJyksCiAgICAoMHgyQzJDLCAnTScsICfisZwnKSwKICAgICgweDJDMkQsICdNJywgJ+KxnScpLAogICAgKDB4MkMyRSwgJ00nLCAn4rGeJyksCiAgICAoMHgyQzJGLCAnTScsICfisZ8nKSwKICAgICgweDJDMzAsICdWJyksCiAgICAoMHgyQzYwLCAnTScsICfisaEnKSwKICAgICgweDJDNjEsICdWJyksCiAgICAoMHgyQzYyLCAnTScsICfJqycpLAogICAgKDB4MkM2MywgJ00nLCAn4bW9JyksCiAgICAoMHgyQzY0LCAnTScsICfJvScpLAogICAgKDB4MkM2NSwgJ1YnKSwKICAgICgweDJDNjcsICdNJywgJ+KxqCcpLAogICAgKDB4MkM2OCwgJ1YnKSwKICAgICgweDJDNjksICdNJywgJ+KxqicpLAogICAgKDB4MkM2QSwgJ1YnKSwKICAgICgweDJDNkIsICdNJywgJ+KxrCcpLAogICAgKDB4MkM2QywgJ1YnKSwKICAgICgweDJDNkQsICdNJywgJ8mRJyksCiAgICAoMHgyQzZFLCAnTScsICfJsScpLAogICAgKDB4MkM2RiwgJ00nLCAnyZAnKSwKICAgICgweDJDNzAsICdNJywgJ8mSJyksCiAgICAoMHgyQzcxLCAnVicpLAogICAgKDB4MkM3MiwgJ00nLCAn4rGzJyksCiAgICAoMHgyQzczLCAnVicpLAogICAgKDB4MkM3NSwgJ00nLCAn4rG2JyksCiAgICAoMHgyQzc2LCAnVicpLAogICAgKDB4MkM3QywgJ00nLCAnaicpLAogICAgKDB4MkM3RCwgJ00nLCAndicpLAogICAgKDB4MkM3RSwgJ00nLCAnyL8nKSwKICAgICgweDJDN0YsICdNJywgJ8mAJyksCiAgICAoMHgyQzgwLCAnTScsICfisoEnKSwKICAgICgweDJDODEsICdWJyksCiAgICAoMHgyQzgyLCAnTScsICfisoMnKSwKICAgICgweDJDODMsICdWJyksCiAgICAoMHgyQzg0LCAnTScsICfisoUnKSwKICAgICgweDJDODUsICdWJyksCiAgICAoMHgyQzg2LCAnTScsICfisocnKSwKICAgICgweDJDODcsICdWJyksCiAgICAoMHgyQzg4LCAnTScsICfisoknKSwKICAgICgweDJDODksICdWJyksCiAgICAoMHgyQzhBLCAnTScsICfisosnKSwKICAgICgweDJDOEIsICdWJyksCiAgICAoMHgyQzhDLCAnTScsICfiso0nKSwKICAgICgweDJDOEQsICdWJyksCiAgICAoMHgyQzhFLCAnTScsICfiso8nKSwKICAgICgweDJDOEYsICdWJyksCiAgICAoMHgyQzkwLCAnTScsICfispEnKSwKICAgICgweDJDOTEsICdWJyksCiAgICAoMHgyQzkyLCAnTScsICfispMnKSwKICAgICgweDJDOTMsICdWJyksCiAgICAoMHgyQzk0LCAnTScsICfispUnKSwKICAgICgweDJDOTUsICdWJyksCiAgICAoMHgyQzk2LCAnTScsICfispcnKSwKICAgICgweDJDOTcsICdWJyksCiAgICAoMHgyQzk4LCAnTScsICfispknKSwKICAgICgweDJDOTksICdWJyksCiAgICAoMHgyQzlBLCAnTScsICfispsnKSwKICAgICgweDJDOUIsICdWJyksCiAgICAoMHgyQzlDLCAnTScsICfisp0nKSwKICAgICgweDJDOUQsICdWJyksCiAgICAoMHgyQzlFLCAnTScsICfisp8nKSwKICAgICgweDJDOUYsICdWJyksCiAgICAoMHgyQ0EwLCAnTScsICfisqEnKSwKICAgICgweDJDQTEsICdWJyksCiAgICAoMHgyQ0EyLCAnTScsICfisqMnKSwKICAgICgweDJDQTMsICdWJyksCiAgICAoMHgyQ0E0LCAnTScsICfisqUnKSwKICAgICgweDJDQTUsICdWJyksCiAgICAoMHgyQ0E2LCAnTScsICfisqcnKSwKICAgICgweDJDQTcsICdWJyksCiAgICAoMHgyQ0E4LCAnTScsICfisqknKSwKICAgICgweDJDQTksICdWJyksCiAgICAoMHgyQ0FBLCAnTScsICfisqsnKSwKICAgICgweDJDQUIsICdWJyksCiAgICAoMHgyQ0FDLCAnTScsICfisq0nKSwKICAgICgweDJDQUQsICdWJyksCiAgICAoMHgyQ0FFLCAnTScsICfisq8nKSwKICAgICgweDJDQUYsICdWJyksCiAgICAoMHgyQ0IwLCAnTScsICfisrEnKSwKICAgICgweDJDQjEsICdWJyksCiAgICAoMHgyQ0IyLCAnTScsICfisrMnKSwKICAgICgweDJDQjMsICdWJyksCiAgICAoMHgyQ0I0LCAnTScsICfisrUnKSwKICAgICgweDJDQjUsICdWJyksCiAgICAoMHgyQ0I2LCAnTScsICfisrcnKSwKICAgICgweDJDQjcsICdWJyksCiAgICAoMHgyQ0I4LCAnTScsICfisrknKSwKICAgICgweDJDQjksICdWJyksCiAgICAoMHgyQ0JBLCAnTScsICfisrsnKSwKICAgICgweDJDQkIsICdWJyksCiAgICAoMHgyQ0JDLCAnTScsICfisr0nKSwKICAgICgweDJDQkQsICdWJyksCiAgICAoMHgyQ0JFLCAnTScsICfisr8nKSwKICAgICgweDJDQkYsICdWJyksCiAgICAoMHgyQ0MwLCAnTScsICfis4EnKSwKICAgICgweDJDQzEsICdWJyksCiAgICAoMHgyQ0MyLCAnTScsICfis4MnKSwKICAgIF0KCmRlZiBfc2VnXzI2KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4MkNDMywgJ1YnKSwKICAgICgweDJDQzQsICdNJywgJ+KzhScpLAogICAgKDB4MkNDNSwgJ1YnKSwKICAgICgweDJDQzYsICdNJywgJ+KzhycpLAogICAgKDB4MkNDNywgJ1YnKSwKICAgICgweDJDQzgsICdNJywgJ+KziScpLAogICAgKDB4MkNDOSwgJ1YnKSwKICAgICgweDJDQ0EsICdNJywgJ+KziycpLAogICAgKDB4MkNDQiwgJ1YnKSwKICAgICgweDJDQ0MsICdNJywgJ+KzjScpLAogICAgKDB4MkNDRCwgJ1YnKSwKICAgICgweDJDQ0UsICdNJywgJ+KzjycpLAogICAgKDB4MkNDRiwgJ1YnKSwKICAgICgweDJDRDAsICdNJywgJ+KzkScpLAogICAgKDB4MkNEMSwgJ1YnKSwKICAgICgweDJDRDIsICdNJywgJ+KzkycpLAogICAgKDB4MkNEMywgJ1YnKSwKICAgICgweDJDRDQsICdNJywgJ+KzlScpLAogICAgKDB4MkNENSwgJ1YnKSwKICAgICgweDJDRDYsICdNJywgJ+KzlycpLAogICAgKDB4MkNENywgJ1YnKSwKICAgICgweDJDRDgsICdNJywgJ+KzmScpLAogICAgKDB4MkNEOSwgJ1YnKSwKICAgICgweDJDREEsICdNJywgJ+KzmycpLAogICAgKDB4MkNEQiwgJ1YnKSwKICAgICgweDJDREMsICdNJywgJ+KznScpLAogICAgKDB4MkNERCwgJ1YnKSwKICAgICgweDJDREUsICdNJywgJ+KznycpLAogICAgKDB4MkNERiwgJ1YnKSwKICAgICgweDJDRTAsICdNJywgJ+KzoScpLAogICAgKDB4MkNFMSwgJ1YnKSwKICAgICgweDJDRTIsICdNJywgJ+KzoycpLAogICAgKDB4MkNFMywgJ1YnKSwKICAgICgweDJDRUIsICdNJywgJ+KzrCcpLAogICAgKDB4MkNFQywgJ1YnKSwKICAgICgweDJDRUQsICdNJywgJ+KzricpLAogICAgKDB4MkNFRSwgJ1YnKSwKICAgICgweDJDRjIsICdNJywgJ+KzsycpLAogICAgKDB4MkNGMywgJ1YnKSwKICAgICgweDJDRjQsICdYJyksCiAgICAoMHgyQ0Y5LCAnVicpLAogICAgKDB4MkQyNiwgJ1gnKSwKICAgICgweDJEMjcsICdWJyksCiAgICAoMHgyRDI4LCAnWCcpLAogICAgKDB4MkQyRCwgJ1YnKSwKICAgICgweDJEMkUsICdYJyksCiAgICAoMHgyRDMwLCAnVicpLAogICAgKDB4MkQ2OCwgJ1gnKSwKICAgICgweDJENkYsICdNJywgJ+K1oScpLAogICAgKDB4MkQ3MCwgJ1YnKSwKICAgICgweDJENzEsICdYJyksCiAgICAoMHgyRDdGLCAnVicpLAogICAgKDB4MkQ5NywgJ1gnKSwKICAgICgweDJEQTAsICdWJyksCiAgICAoMHgyREE3LCAnWCcpLAogICAgKDB4MkRBOCwgJ1YnKSwKICAgICgweDJEQUYsICdYJyksCiAgICAoMHgyREIwLCAnVicpLAogICAgKDB4MkRCNywgJ1gnKSwKICAgICgweDJEQjgsICdWJyksCiAgICAoMHgyREJGLCAnWCcpLAogICAgKDB4MkRDMCwgJ1YnKSwKICAgICgweDJEQzcsICdYJyksCiAgICAoMHgyREM4LCAnVicpLAogICAgKDB4MkRDRiwgJ1gnKSwKICAgICgweDJERDAsICdWJyksCiAgICAoMHgyREQ3LCAnWCcpLAogICAgKDB4MkREOCwgJ1YnKSwKICAgICgweDJEREYsICdYJyksCiAgICAoMHgyREUwLCAnVicpLAogICAgKDB4MkU1RSwgJ1gnKSwKICAgICgweDJFODAsICdWJyksCiAgICAoMHgyRTlBLCAnWCcpLAogICAgKDB4MkU5QiwgJ1YnKSwKICAgICgweDJFOUYsICdNJywgJ+avjScpLAogICAgKDB4MkVBMCwgJ1YnKSwKICAgICgweDJFRjMsICdNJywgJ+m+nycpLAogICAgKDB4MkVGNCwgJ1gnKSwKICAgICgweDJGMDAsICdNJywgJ+S4gCcpLAogICAgKDB4MkYwMSwgJ00nLCAn5LioJyksCiAgICAoMHgyRjAyLCAnTScsICfkuLYnKSwKICAgICgweDJGMDMsICdNJywgJ+S4vycpLAogICAgKDB4MkYwNCwgJ00nLCAn5LmZJyksCiAgICAoMHgyRjA1LCAnTScsICfkuoUnKSwKICAgICgweDJGMDYsICdNJywgJ+S6jCcpLAogICAgKDB4MkYwNywgJ00nLCAn5LqgJyksCiAgICAoMHgyRjA4LCAnTScsICfkuronKSwKICAgICgweDJGMDksICdNJywgJ+WEvycpLAogICAgKDB4MkYwQSwgJ00nLCAn5YWlJyksCiAgICAoMHgyRjBCLCAnTScsICflhasnKSwKICAgICgweDJGMEMsICdNJywgJ+WGgicpLAogICAgKDB4MkYwRCwgJ00nLCAn5YaWJyksCiAgICAoMHgyRjBFLCAnTScsICflhqsnKSwKICAgICgweDJGMEYsICdNJywgJ+WHoCcpLAogICAgKDB4MkYxMCwgJ00nLCAn5Ye1JyksCiAgICAoMHgyRjExLCAnTScsICfliIAnKSwKICAgICgweDJGMTIsICdNJywgJ+WKmycpLAogICAgKDB4MkYxMywgJ00nLCAn5Yu5JyksCiAgICAoMHgyRjE0LCAnTScsICfljJUnKSwKICAgICgweDJGMTUsICdNJywgJ+WMmicpLAogICAgXQoKZGVmIF9zZWdfMjcoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXToKICAgIHJldHVybiBbCiAgICAoMHgyRjE2LCAnTScsICfljLgnKSwKICAgICgweDJGMTcsICdNJywgJ+WNgScpLAogICAgKDB4MkYxOCwgJ00nLCAn5Y2cJyksCiAgICAoMHgyRjE5LCAnTScsICfljaknKSwKICAgICgweDJGMUEsICdNJywgJ+WOgicpLAogICAgKDB4MkYxQiwgJ00nLCAn5Y62JyksCiAgICAoMHgyRjFDLCAnTScsICflj4gnKSwKICAgICgweDJGMUQsICdNJywgJ+WPoycpLAogICAgKDB4MkYxRSwgJ00nLCAn5ZuXJyksCiAgICAoMHgyRjFGLCAnTScsICflnJ8nKSwKICAgICgweDJGMjAsICdNJywgJ+WjqycpLAogICAgKDB4MkYyMSwgJ00nLCAn5aSCJyksCiAgICAoMHgyRjIyLCAnTScsICflpIonKSwKICAgICgweDJGMjMsICdNJywgJ+WklScpLAogICAgKDB4MkYyNCwgJ00nLCAn5aSnJyksCiAgICAoMHgyRjI1LCAnTScsICflpbMnKSwKICAgICgweDJGMjYsICdNJywgJ+WtkCcpLAogICAgKDB4MkYyNywgJ00nLCAn5a6AJyksCiAgICAoMHgyRjI4LCAnTScsICflr7gnKSwKICAgICgweDJGMjksICdNJywgJ+WwjycpLAogICAgKDB4MkYyQSwgJ00nLCAn5bCiJyksCiAgICAoMHgyRjJCLCAnTScsICflsLgnKSwKICAgICgweDJGMkMsICdNJywgJ+WxricpLAogICAgKDB4MkYyRCwgJ00nLCAn5bGxJyksCiAgICAoMHgyRjJFLCAnTScsICflt5snKSwKICAgICgweDJGMkYsICdNJywgJ+W3pScpLAogICAgKDB4MkYzMCwgJ00nLCAn5bexJyksCiAgICAoMHgyRjMxLCAnTScsICflt74nKSwKICAgICgweDJGMzIsICdNJywgJ+W5sicpLAogICAgKDB4MkYzMywgJ00nLCAn5bm6JyksCiAgICAoMHgyRjM0LCAnTScsICflub8nKSwKICAgICgweDJGMzUsICdNJywgJ+W7tCcpLAogICAgKDB4MkYzNiwgJ00nLCAn5bu+JyksCiAgICAoMHgyRjM3LCAnTScsICflvIsnKSwKICAgICgweDJGMzgsICdNJywgJ+W8kycpLAogICAgKDB4MkYzOSwgJ00nLCAn5b2QJyksCiAgICAoMHgyRjNBLCAnTScsICflvaEnKSwKICAgICgweDJGM0IsICdNJywgJ+W9sycpLAogICAgKDB4MkYzQywgJ00nLCAn5b+DJyksCiAgICAoMHgyRjNELCAnTScsICfmiIgnKSwKICAgICgweDJGM0UsICdNJywgJ+aIticpLAogICAgKDB4MkYzRiwgJ00nLCAn5omLJyksCiAgICAoMHgyRjQwLCAnTScsICfmlK8nKSwKICAgICgweDJGNDEsICdNJywgJ+aUtCcpLAogICAgKDB4MkY0MiwgJ00nLCAn5paHJyksCiAgICAoMHgyRjQzLCAnTScsICfmlpcnKSwKICAgICgweDJGNDQsICdNJywgJ+aWpCcpLAogICAgKDB4MkY0NSwgJ00nLCAn5pa5JyksCiAgICAoMHgyRjQ2LCAnTScsICfml6AnKSwKICAgICgweDJGNDcsICdNJywgJ+aXpScpLAogICAgKDB4MkY0OCwgJ00nLCAn5puwJyksCiAgICAoMHgyRjQ5LCAnTScsICfmnIgnKSwKICAgICgweDJGNEEsICdNJywgJ+acqCcpLAogICAgKDB4MkY0QiwgJ00nLCAn5qygJyksCiAgICAoMHgyRjRDLCAnTScsICfmraInKSwKICAgICgweDJGNEQsICdNJywgJ+atuScpLAogICAgKDB4MkY0RSwgJ00nLCAn5q6zJyksCiAgICAoMHgyRjRGLCAnTScsICfmr4snKSwKICAgICgweDJGNTAsICdNJywgJ+avlCcpLAogICAgKDB4MkY1MSwgJ00nLCAn5q+bJyksCiAgICAoMHgyRjUyLCAnTScsICfmsI8nKSwKICAgICgweDJGNTMsICdNJywgJ+awlCcpLAogICAgKDB4MkY1NCwgJ00nLCAn5rC0JyksCiAgICAoMHgyRjU1LCAnTScsICfngasnKSwKICAgICgweDJGNTYsICdNJywgJ+eIqicpLAogICAgKDB4MkY1NywgJ00nLCAn54i2JyksCiAgICAoMHgyRjU4LCAnTScsICfniLsnKSwKICAgICgweDJGNTksICdNJywgJ+eIvycpLAogICAgKDB4MkY1QSwgJ00nLCAn54mHJyksCiAgICAoMHgyRjVCLCAnTScsICfniZknKSwKICAgICgweDJGNUMsICdNJywgJ+eJmycpLAogICAgKDB4MkY1RCwgJ00nLCAn54qsJyksCiAgICAoMHgyRjVFLCAnTScsICfnjoQnKSwKICAgICgweDJGNUYsICdNJywgJ+eOiScpLAogICAgKDB4MkY2MCwgJ00nLCAn55OcJyksCiAgICAoMHgyRjYxLCAnTScsICfnk6YnKSwKICAgICgweDJGNjIsICdNJywgJ+eUmCcpLAogICAgKDB4MkY2MywgJ00nLCAn55SfJyksCiAgICAoMHgyRjY0LCAnTScsICfnlKgnKSwKICAgICgweDJGNjUsICdNJywgJ+eUsCcpLAogICAgKDB4MkY2NiwgJ00nLCAn55aLJyksCiAgICAoMHgyRjY3LCAnTScsICfnlpInKSwKICAgICgweDJGNjgsICdNJywgJ+eZticpLAogICAgKDB4MkY2OSwgJ00nLCAn55m9JyksCiAgICAoMHgyRjZBLCAnTScsICfnmq4nKSwKICAgICgweDJGNkIsICdNJywgJ+eavycpLAogICAgKDB4MkY2QywgJ00nLCAn55uuJyksCiAgICAoMHgyRjZELCAnTScsICfnn5snKSwKICAgICgweDJGNkUsICdNJywgJ+efoicpLAogICAgKDB4MkY2RiwgJ00nLCAn55+zJyksCiAgICAoMHgyRjcwLCAnTScsICfnpLonKSwKICAgICgweDJGNzEsICdNJywgJ+emuCcpLAogICAgKDB4MkY3MiwgJ00nLCAn56a+JyksCiAgICAoMHgyRjczLCAnTScsICfnqbQnKSwKICAgICgweDJGNzQsICdNJywgJ+eriycpLAogICAgKDB4MkY3NSwgJ00nLCAn56u5JyksCiAgICAoMHgyRjc2LCAnTScsICfnsbMnKSwKICAgICgweDJGNzcsICdNJywgJ+ezuCcpLAogICAgKDB4MkY3OCwgJ00nLCAn57y2JyksCiAgICAoMHgyRjc5LCAnTScsICfnvZEnKSwKICAgIF0KCmRlZiBfc2VnXzI4KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4MkY3QSwgJ00nLCAn576KJyksCiAgICAoMHgyRjdCLCAnTScsICfnvr0nKSwKICAgICgweDJGN0MsICdNJywgJ+iAgScpLAogICAgKDB4MkY3RCwgJ00nLCAn6ICMJyksCiAgICAoMHgyRjdFLCAnTScsICfogJInKSwKICAgICgweDJGN0YsICdNJywgJ+iAsycpLAogICAgKDB4MkY4MCwgJ00nLCAn6IG/JyksCiAgICAoMHgyRjgxLCAnTScsICfogoknKSwKICAgICgweDJGODIsICdNJywgJ+iHoycpLAogICAgKDB4MkY4MywgJ00nLCAn6IeqJyksCiAgICAoMHgyRjg0LCAnTScsICfoh7MnKSwKICAgICgweDJGODUsICdNJywgJ+iHvCcpLAogICAgKDB4MkY4NiwgJ00nLCAn6IiMJyksCiAgICAoMHgyRjg3LCAnTScsICfoiJsnKSwKICAgICgweDJGODgsICdNJywgJ+iInycpLAogICAgKDB4MkY4OSwgJ00nLCAn6ImuJyksCiAgICAoMHgyRjhBLCAnTScsICfoibInKSwKICAgICgweDJGOEIsICdNJywgJ+iJuCcpLAogICAgKDB4MkY4QywgJ00nLCAn6JmNJyksCiAgICAoMHgyRjhELCAnTScsICfomasnKSwKICAgICgweDJGOEUsICdNJywgJ+ihgCcpLAogICAgKDB4MkY4RiwgJ00nLCAn6KGMJyksCiAgICAoMHgyRjkwLCAnTScsICfooaMnKSwKICAgICgweDJGOTEsICdNJywgJ+ilvicpLAogICAgKDB4MkY5MiwgJ00nLCAn6KaLJyksCiAgICAoMHgyRjkzLCAnTScsICfop5InKSwKICAgICgweDJGOTQsICdNJywgJ+iogCcpLAogICAgKDB4MkY5NSwgJ00nLCAn6LC3JyksCiAgICAoMHgyRjk2LCAnTScsICfosYYnKSwKICAgICgweDJGOTcsICdNJywgJ+ixlScpLAogICAgKDB4MkY5OCwgJ00nLCAn6LG4JyksCiAgICAoMHgyRjk5LCAnTScsICfosp0nKSwKICAgICgweDJGOUEsICdNJywgJ+i1pCcpLAogICAgKDB4MkY5QiwgJ00nLCAn6LWwJyksCiAgICAoMHgyRjlDLCAnTScsICfotrMnKSwKICAgICgweDJGOUQsICdNJywgJ+i6qycpLAogICAgKDB4MkY5RSwgJ00nLCAn6LuKJyksCiAgICAoMHgyRjlGLCAnTScsICfovpsnKSwKICAgICgweDJGQTAsICdNJywgJ+i+sCcpLAogICAgKDB4MkZBMSwgJ00nLCAn6L61JyksCiAgICAoMHgyRkEyLCAnTScsICfpgpEnKSwKICAgICgweDJGQTMsICdNJywgJ+mFiScpLAogICAgKDB4MkZBNCwgJ00nLCAn6YeGJyksCiAgICAoMHgyRkE1LCAnTScsICfph4wnKSwKICAgICgweDJGQTYsICdNJywgJ+mHkScpLAogICAgKDB4MkZBNywgJ00nLCAn6ZW3JyksCiAgICAoMHgyRkE4LCAnTScsICfploAnKSwKICAgICgweDJGQTksICdNJywgJ+mYnCcpLAogICAgKDB4MkZBQSwgJ00nLCAn6Zq2JyksCiAgICAoMHgyRkFCLCAnTScsICfpmrknKSwKICAgICgweDJGQUMsICdNJywgJ+mbqCcpLAogICAgKDB4MkZBRCwgJ00nLCAn6Z2RJyksCiAgICAoMHgyRkFFLCAnTScsICfpnZ4nKSwKICAgICgweDJGQUYsICdNJywgJ+mdoicpLAogICAgKDB4MkZCMCwgJ00nLCAn6Z2pJyksCiAgICAoMHgyRkIxLCAnTScsICfpn4snKSwKICAgICgweDJGQjIsICdNJywgJ+mfrScpLAogICAgKDB4MkZCMywgJ00nLCAn6Z+zJyksCiAgICAoMHgyRkI0LCAnTScsICfpoIEnKSwKICAgICgweDJGQjUsICdNJywgJ+miqCcpLAogICAgKDB4MkZCNiwgJ00nLCAn6aObJyksCiAgICAoMHgyRkI3LCAnTScsICfpo58nKSwKICAgICgweDJGQjgsICdNJywgJ+mmlicpLAogICAgKDB4MkZCOSwgJ00nLCAn6aaZJyksCiAgICAoMHgyRkJBLCAnTScsICfppqwnKSwKICAgICgweDJGQkIsICdNJywgJ+mqqCcpLAogICAgKDB4MkZCQywgJ00nLCAn6auYJyksCiAgICAoMHgyRkJELCAnTScsICfpq58nKSwKICAgICgweDJGQkUsICdNJywgJ+mspScpLAogICAgKDB4MkZCRiwgJ00nLCAn6ayvJyksCiAgICAoMHgyRkMwLCAnTScsICfprLInKSwKICAgICgweDJGQzEsICdNJywgJ+msvCcpLAogICAgKDB4MkZDMiwgJ00nLCAn6a2aJyksCiAgICAoMHgyRkMzLCAnTScsICfps6UnKSwKICAgICgweDJGQzQsICdNJywgJ+m5tScpLAogICAgKDB4MkZDNSwgJ00nLCAn6bm/JyksCiAgICAoMHgyRkM2LCAnTScsICfpuqUnKSwKICAgICgweDJGQzcsICdNJywgJ+m6uycpLAogICAgKDB4MkZDOCwgJ00nLCAn6buDJyksCiAgICAoMHgyRkM5LCAnTScsICfpu40nKSwKICAgICgweDJGQ0EsICdNJywgJ+m7kScpLAogICAgKDB4MkZDQiwgJ00nLCAn6bu5JyksCiAgICAoMHgyRkNDLCAnTScsICfpu70nKSwKICAgICgweDJGQ0QsICdNJywgJ+m8jicpLAogICAgKDB4MkZDRSwgJ00nLCAn6byTJyksCiAgICAoMHgyRkNGLCAnTScsICfpvKAnKSwKICAgICgweDJGRDAsICdNJywgJ+m8uycpLAogICAgKDB4MkZEMSwgJ00nLCAn6b2KJyksCiAgICAoMHgyRkQyLCAnTScsICfpvZInKSwKICAgICgweDJGRDMsICdNJywgJ+m+jScpLAogICAgKDB4MkZENCwgJ00nLCAn6b6cJyksCiAgICAoMHgyRkQ1LCAnTScsICfpvqAnKSwKICAgICgweDJGRDYsICdYJyksCiAgICAoMHgzMDAwLCAnMycsICcgJyksCiAgICAoMHgzMDAxLCAnVicpLAogICAgKDB4MzAwMiwgJ00nLCAnLicpLAogICAgKDB4MzAwMywgJ1YnKSwKICAgICgweDMwMzYsICdNJywgJ+OAkicpLAogICAgKDB4MzAzNywgJ1YnKSwKICAgICgweDMwMzgsICdNJywgJ+WNgScpLAogICAgXQoKZGVmIF9zZWdfMjkoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXToKICAgIHJldHVybiBbCiAgICAoMHgzMDM5LCAnTScsICfljYQnKSwKICAgICgweDMwM0EsICdNJywgJ+WNhScpLAogICAgKDB4MzAzQiwgJ1YnKSwKICAgICgweDMwNDAsICdYJyksCiAgICAoMHgzMDQxLCAnVicpLAogICAgKDB4MzA5NywgJ1gnKSwKICAgICgweDMwOTksICdWJyksCiAgICAoMHgzMDlCLCAnMycsICcg44KZJyksCiAgICAoMHgzMDlDLCAnMycsICcg44KaJyksCiAgICAoMHgzMDlELCAnVicpLAogICAgKDB4MzA5RiwgJ00nLCAn44KI44KKJyksCiAgICAoMHgzMEEwLCAnVicpLAogICAgKDB4MzBGRiwgJ00nLCAn44Kz44OIJyksCiAgICAoMHgzMTAwLCAnWCcpLAogICAgKDB4MzEwNSwgJ1YnKSwKICAgICgweDMxMzAsICdYJyksCiAgICAoMHgzMTMxLCAnTScsICfhhIAnKSwKICAgICgweDMxMzIsICdNJywgJ+GEgScpLAogICAgKDB4MzEzMywgJ00nLCAn4YaqJyksCiAgICAoMHgzMTM0LCAnTScsICfhhIInKSwKICAgICgweDMxMzUsICdNJywgJ+GGrCcpLAogICAgKDB4MzEzNiwgJ00nLCAn4YatJyksCiAgICAoMHgzMTM3LCAnTScsICfhhIMnKSwKICAgICgweDMxMzgsICdNJywgJ+GEhCcpLAogICAgKDB4MzEzOSwgJ00nLCAn4YSFJyksCiAgICAoMHgzMTNBLCAnTScsICfhhrAnKSwKICAgICgweDMxM0IsICdNJywgJ+GGsScpLAogICAgKDB4MzEzQywgJ00nLCAn4YayJyksCiAgICAoMHgzMTNELCAnTScsICfhhrMnKSwKICAgICgweDMxM0UsICdNJywgJ+GGtCcpLAogICAgKDB4MzEzRiwgJ00nLCAn4Ya1JyksCiAgICAoMHgzMTQwLCAnTScsICfhhJonKSwKICAgICgweDMxNDEsICdNJywgJ+GEhicpLAogICAgKDB4MzE0MiwgJ00nLCAn4YSHJyksCiAgICAoMHgzMTQzLCAnTScsICfhhIgnKSwKICAgICgweDMxNDQsICdNJywgJ+GEoScpLAogICAgKDB4MzE0NSwgJ00nLCAn4YSJJyksCiAgICAoMHgzMTQ2LCAnTScsICfhhIonKSwKICAgICgweDMxNDcsICdNJywgJ+GEiycpLAogICAgKDB4MzE0OCwgJ00nLCAn4YSMJyksCiAgICAoMHgzMTQ5LCAnTScsICfhhI0nKSwKICAgICgweDMxNEEsICdNJywgJ+GEjicpLAogICAgKDB4MzE0QiwgJ00nLCAn4YSPJyksCiAgICAoMHgzMTRDLCAnTScsICfhhJAnKSwKICAgICgweDMxNEQsICdNJywgJ+GEkScpLAogICAgKDB4MzE0RSwgJ00nLCAn4YSSJyksCiAgICAoMHgzMTRGLCAnTScsICfhhaEnKSwKICAgICgweDMxNTAsICdNJywgJ+GFoicpLAogICAgKDB4MzE1MSwgJ00nLCAn4YWjJyksCiAgICAoMHgzMTUyLCAnTScsICfhhaQnKSwKICAgICgweDMxNTMsICdNJywgJ+GFpScpLAogICAgKDB4MzE1NCwgJ00nLCAn4YWmJyksCiAgICAoMHgzMTU1LCAnTScsICfhhacnKSwKICAgICgweDMxNTYsICdNJywgJ+GFqCcpLAogICAgKDB4MzE1NywgJ00nLCAn4YWpJyksCiAgICAoMHgzMTU4LCAnTScsICfhhaonKSwKICAgICgweDMxNTksICdNJywgJ+GFqycpLAogICAgKDB4MzE1QSwgJ00nLCAn4YWsJyksCiAgICAoMHgzMTVCLCAnTScsICfhha0nKSwKICAgICgweDMxNUMsICdNJywgJ+GFricpLAogICAgKDB4MzE1RCwgJ00nLCAn4YWvJyksCiAgICAoMHgzMTVFLCAnTScsICfhhbAnKSwKICAgICgweDMxNUYsICdNJywgJ+GFsScpLAogICAgKDB4MzE2MCwgJ00nLCAn4YWyJyksCiAgICAoMHgzMTYxLCAnTScsICfhhbMnKSwKICAgICgweDMxNjIsICdNJywgJ+GFtCcpLAogICAgKDB4MzE2MywgJ00nLCAn4YW1JyksCiAgICAoMHgzMTY0LCAnWCcpLAogICAgKDB4MzE2NSwgJ00nLCAn4YSUJyksCiAgICAoMHgzMTY2LCAnTScsICfhhJUnKSwKICAgICgweDMxNjcsICdNJywgJ+GHhycpLAogICAgKDB4MzE2OCwgJ00nLCAn4YeIJyksCiAgICAoMHgzMTY5LCAnTScsICfhh4wnKSwKICAgICgweDMxNkEsICdNJywgJ+GHjicpLAogICAgKDB4MzE2QiwgJ00nLCAn4YeTJyksCiAgICAoMHgzMTZDLCAnTScsICfhh5cnKSwKICAgICgweDMxNkQsICdNJywgJ+GHmScpLAogICAgKDB4MzE2RSwgJ00nLCAn4YScJyksCiAgICAoMHgzMTZGLCAnTScsICfhh50nKSwKICAgICgweDMxNzAsICdNJywgJ+GHnycpLAogICAgKDB4MzE3MSwgJ00nLCAn4YSdJyksCiAgICAoMHgzMTcyLCAnTScsICfhhJ4nKSwKICAgICgweDMxNzMsICdNJywgJ+GEoCcpLAogICAgKDB4MzE3NCwgJ00nLCAn4YSiJyksCiAgICAoMHgzMTc1LCAnTScsICfhhKMnKSwKICAgICgweDMxNzYsICdNJywgJ+GEpycpLAogICAgKDB4MzE3NywgJ00nLCAn4YSpJyksCiAgICAoMHgzMTc4LCAnTScsICfhhKsnKSwKICAgICgweDMxNzksICdNJywgJ+GErCcpLAogICAgKDB4MzE3QSwgJ00nLCAn4YStJyksCiAgICAoMHgzMTdCLCAnTScsICfhhK4nKSwKICAgICgweDMxN0MsICdNJywgJ+GErycpLAogICAgKDB4MzE3RCwgJ00nLCAn4YSyJyksCiAgICAoMHgzMTdFLCAnTScsICfhhLYnKSwKICAgICgweDMxN0YsICdNJywgJ+GFgCcpLAogICAgKDB4MzE4MCwgJ00nLCAn4YWHJyksCiAgICAoMHgzMTgxLCAnTScsICfhhYwnKSwKICAgICgweDMxODIsICdNJywgJ+GHsScpLAogICAgKDB4MzE4MywgJ00nLCAn4YeyJyksCiAgICAoMHgzMTg0LCAnTScsICfhhZcnKSwKICAgIF0KCmRlZiBfc2VnXzMwKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4MzE4NSwgJ00nLCAn4YWYJyksCiAgICAoMHgzMTg2LCAnTScsICfhhZknKSwKICAgICgweDMxODcsICdNJywgJ+GGhCcpLAogICAgKDB4MzE4OCwgJ00nLCAn4YaFJyksCiAgICAoMHgzMTg5LCAnTScsICfhhognKSwKICAgICgweDMxOEEsICdNJywgJ+GGkScpLAogICAgKDB4MzE4QiwgJ00nLCAn4YaSJyksCiAgICAoMHgzMThDLCAnTScsICfhhpQnKSwKICAgICgweDMxOEQsICdNJywgJ+GGnicpLAogICAgKDB4MzE4RSwgJ00nLCAn4YahJyksCiAgICAoMHgzMThGLCAnWCcpLAogICAgKDB4MzE5MCwgJ1YnKSwKICAgICgweDMxOTIsICdNJywgJ+S4gCcpLAogICAgKDB4MzE5MywgJ00nLCAn5LqMJyksCiAgICAoMHgzMTk0LCAnTScsICfkuIknKSwKICAgICgweDMxOTUsICdNJywgJ+WbmycpLAogICAgKDB4MzE5NiwgJ00nLCAn5LiKJyksCiAgICAoMHgzMTk3LCAnTScsICfkuK0nKSwKICAgICgweDMxOTgsICdNJywgJ+S4iycpLAogICAgKDB4MzE5OSwgJ00nLCAn55SyJyksCiAgICAoMHgzMTlBLCAnTScsICfkuZknKSwKICAgICgweDMxOUIsICdNJywgJ+S4mScpLAogICAgKDB4MzE5QywgJ00nLCAn5LiBJyksCiAgICAoMHgzMTlELCAnTScsICflpKknKSwKICAgICgweDMxOUUsICdNJywgJ+WcsCcpLAogICAgKDB4MzE5RiwgJ00nLCAn5Lq6JyksCiAgICAoMHgzMUEwLCAnVicpLAogICAgKDB4MzFFNCwgJ1gnKSwKICAgICgweDMxRjAsICdWJyksCiAgICAoMHgzMjAwLCAnMycsICco4YSAKScpLAogICAgKDB4MzIwMSwgJzMnLCAnKOGEgiknKSwKICAgICgweDMyMDIsICczJywgJyjhhIMpJyksCiAgICAoMHgzMjAzLCAnMycsICco4YSFKScpLAogICAgKDB4MzIwNCwgJzMnLCAnKOGEhiknKSwKICAgICgweDMyMDUsICczJywgJyjhhIcpJyksCiAgICAoMHgzMjA2LCAnMycsICco4YSJKScpLAogICAgKDB4MzIwNywgJzMnLCAnKOGEiyknKSwKICAgICgweDMyMDgsICczJywgJyjhhIwpJyksCiAgICAoMHgzMjA5LCAnMycsICco4YSOKScpLAogICAgKDB4MzIwQSwgJzMnLCAnKOGEjyknKSwKICAgICgweDMyMEIsICczJywgJyjhhJApJyksCiAgICAoMHgzMjBDLCAnMycsICco4YSRKScpLAogICAgKDB4MzIwRCwgJzMnLCAnKOGEkiknKSwKICAgICgweDMyMEUsICczJywgJyjqsIApJyksCiAgICAoMHgzMjBGLCAnMycsICco64KYKScpLAogICAgKDB4MzIxMCwgJzMnLCAnKOuLpCknKSwKICAgICgweDMyMTEsICczJywgJyjrnbwpJyksCiAgICAoMHgzMjEyLCAnMycsICco66eIKScpLAogICAgKDB4MzIxMywgJzMnLCAnKOuwlCknKSwKICAgICgweDMyMTQsICczJywgJyjsgqwpJyksCiAgICAoMHgzMjE1LCAnMycsICco7JWEKScpLAogICAgKDB4MzIxNiwgJzMnLCAnKOyekCknKSwKICAgICgweDMyMTcsICczJywgJyjssKgpJyksCiAgICAoMHgzMjE4LCAnMycsICco7Lm0KScpLAogICAgKDB4MzIxOSwgJzMnLCAnKO2DgCknKSwKICAgICgweDMyMUEsICczJywgJyjtjIwpJyksCiAgICAoMHgzMjFCLCAnMycsICco7ZWYKScpLAogICAgKDB4MzIxQywgJzMnLCAnKOyjvCknKSwKICAgICgweDMyMUQsICczJywgJyjsmKTsoIQpJyksCiAgICAoMHgzMjFFLCAnMycsICco7Jik7ZuEKScpLAogICAgKDB4MzIxRiwgJ1gnKSwKICAgICgweDMyMjAsICczJywgJyjkuIApJyksCiAgICAoMHgzMjIxLCAnMycsICco5LqMKScpLAogICAgKDB4MzIyMiwgJzMnLCAnKOS4iSknKSwKICAgICgweDMyMjMsICczJywgJyjlm5spJyksCiAgICAoMHgzMjI0LCAnMycsICco5LqUKScpLAogICAgKDB4MzIyNSwgJzMnLCAnKOWFrSknKSwKICAgICgweDMyMjYsICczJywgJyjkuIMpJyksCiAgICAoMHgzMjI3LCAnMycsICco5YWrKScpLAogICAgKDB4MzIyOCwgJzMnLCAnKOS5nSknKSwKICAgICgweDMyMjksICczJywgJyjljYEpJyksCiAgICAoMHgzMjJBLCAnMycsICco5pyIKScpLAogICAgKDB4MzIyQiwgJzMnLCAnKOeBqyknKSwKICAgICgweDMyMkMsICczJywgJyjmsLQpJyksCiAgICAoMHgzMjJELCAnMycsICco5pyoKScpLAogICAgKDB4MzIyRSwgJzMnLCAnKOmHkSknKSwKICAgICgweDMyMkYsICczJywgJyjlnJ8pJyksCiAgICAoMHgzMjMwLCAnMycsICco5pelKScpLAogICAgKDB4MzIzMSwgJzMnLCAnKOagqiknKSwKICAgICgweDMyMzIsICczJywgJyjmnIkpJyksCiAgICAoMHgzMjMzLCAnMycsICco56S+KScpLAogICAgKDB4MzIzNCwgJzMnLCAnKOWQjSknKSwKICAgICgweDMyMzUsICczJywgJyjnibkpJyksCiAgICAoMHgzMjM2LCAnMycsICco6LKhKScpLAogICAgKDB4MzIzNywgJzMnLCAnKOelnSknKSwKICAgICgweDMyMzgsICczJywgJyjlirQpJyksCiAgICAoMHgzMjM5LCAnMycsICco5LujKScpLAogICAgKDB4MzIzQSwgJzMnLCAnKOWRvCknKSwKICAgICgweDMyM0IsICczJywgJyjlraYpJyksCiAgICAoMHgzMjNDLCAnMycsICco55ujKScpLAogICAgKDB4MzIzRCwgJzMnLCAnKOS8gSknKSwKICAgICgweDMyM0UsICczJywgJyjos4cpJyksCiAgICAoMHgzMjNGLCAnMycsICco5Y2UKScpLAogICAgKDB4MzI0MCwgJzMnLCAnKOelrSknKSwKICAgICgweDMyNDEsICczJywgJyjkvJEpJyksCiAgICAoMHgzMjQyLCAnMycsICco6IeqKScpLAogICAgKDB4MzI0MywgJzMnLCAnKOiHsyknKSwKICAgICgweDMyNDQsICdNJywgJ+WVjycpLAogICAgKDB4MzI0NSwgJ00nLCAn5bm8JyksCiAgICAoMHgzMjQ2LCAnTScsICfmlocnKSwKICAgIF0KCmRlZiBfc2VnXzMxKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4MzI0NywgJ00nLCAn566PJyksCiAgICAoMHgzMjQ4LCAnVicpLAogICAgKDB4MzI1MCwgJ00nLCAncHRlJyksCiAgICAoMHgzMjUxLCAnTScsICcyMScpLAogICAgKDB4MzI1MiwgJ00nLCAnMjInKSwKICAgICgweDMyNTMsICdNJywgJzIzJyksCiAgICAoMHgzMjU0LCAnTScsICcyNCcpLAogICAgKDB4MzI1NSwgJ00nLCAnMjUnKSwKICAgICgweDMyNTYsICdNJywgJzI2JyksCiAgICAoMHgzMjU3LCAnTScsICcyNycpLAogICAgKDB4MzI1OCwgJ00nLCAnMjgnKSwKICAgICgweDMyNTksICdNJywgJzI5JyksCiAgICAoMHgzMjVBLCAnTScsICczMCcpLAogICAgKDB4MzI1QiwgJ00nLCAnMzEnKSwKICAgICgweDMyNUMsICdNJywgJzMyJyksCiAgICAoMHgzMjVELCAnTScsICczMycpLAogICAgKDB4MzI1RSwgJ00nLCAnMzQnKSwKICAgICgweDMyNUYsICdNJywgJzM1JyksCiAgICAoMHgzMjYwLCAnTScsICfhhIAnKSwKICAgICgweDMyNjEsICdNJywgJ+GEgicpLAogICAgKDB4MzI2MiwgJ00nLCAn4YSDJyksCiAgICAoMHgzMjYzLCAnTScsICfhhIUnKSwKICAgICgweDMyNjQsICdNJywgJ+GEhicpLAogICAgKDB4MzI2NSwgJ00nLCAn4YSHJyksCiAgICAoMHgzMjY2LCAnTScsICfhhIknKSwKICAgICgweDMyNjcsICdNJywgJ+GEiycpLAogICAgKDB4MzI2OCwgJ00nLCAn4YSMJyksCiAgICAoMHgzMjY5LCAnTScsICfhhI4nKSwKICAgICgweDMyNkEsICdNJywgJ+GEjycpLAogICAgKDB4MzI2QiwgJ00nLCAn4YSQJyksCiAgICAoMHgzMjZDLCAnTScsICfhhJEnKSwKICAgICgweDMyNkQsICdNJywgJ+GEkicpLAogICAgKDB4MzI2RSwgJ00nLCAn6rCAJyksCiAgICAoMHgzMjZGLCAnTScsICfrgpgnKSwKICAgICgweDMyNzAsICdNJywgJ+uLpCcpLAogICAgKDB4MzI3MSwgJ00nLCAn6528JyksCiAgICAoMHgzMjcyLCAnTScsICfrp4gnKSwKICAgICgweDMyNzMsICdNJywgJ+uwlCcpLAogICAgKDB4MzI3NCwgJ00nLCAn7IKsJyksCiAgICAoMHgzMjc1LCAnTScsICfslYQnKSwKICAgICgweDMyNzYsICdNJywgJ+yekCcpLAogICAgKDB4MzI3NywgJ00nLCAn7LCoJyksCiAgICAoMHgzMjc4LCAnTScsICfsubQnKSwKICAgICgweDMyNzksICdNJywgJ+2DgCcpLAogICAgKDB4MzI3QSwgJ00nLCAn7YyMJyksCiAgICAoMHgzMjdCLCAnTScsICftlZgnKSwKICAgICgweDMyN0MsICdNJywgJ+ywuOqzoCcpLAogICAgKDB4MzI3RCwgJ00nLCAn7KO87J2YJyksCiAgICAoMHgzMjdFLCAnTScsICfsmrAnKSwKICAgICgweDMyN0YsICdWJyksCiAgICAoMHgzMjgwLCAnTScsICfkuIAnKSwKICAgICgweDMyODEsICdNJywgJ+S6jCcpLAogICAgKDB4MzI4MiwgJ00nLCAn5LiJJyksCiAgICAoMHgzMjgzLCAnTScsICflm5snKSwKICAgICgweDMyODQsICdNJywgJ+S6lCcpLAogICAgKDB4MzI4NSwgJ00nLCAn5YWtJyksCiAgICAoMHgzMjg2LCAnTScsICfkuIMnKSwKICAgICgweDMyODcsICdNJywgJ+WFqycpLAogICAgKDB4MzI4OCwgJ00nLCAn5LmdJyksCiAgICAoMHgzMjg5LCAnTScsICfljYEnKSwKICAgICgweDMyOEEsICdNJywgJ+aciCcpLAogICAgKDB4MzI4QiwgJ00nLCAn54GrJyksCiAgICAoMHgzMjhDLCAnTScsICfmsLQnKSwKICAgICgweDMyOEQsICdNJywgJ+acqCcpLAogICAgKDB4MzI4RSwgJ00nLCAn6YeRJyksCiAgICAoMHgzMjhGLCAnTScsICflnJ8nKSwKICAgICgweDMyOTAsICdNJywgJ+aXpScpLAogICAgKDB4MzI5MSwgJ00nLCAn5qCqJyksCiAgICAoMHgzMjkyLCAnTScsICfmnIknKSwKICAgICgweDMyOTMsICdNJywgJ+ekvicpLAogICAgKDB4MzI5NCwgJ00nLCAn5ZCNJyksCiAgICAoMHgzMjk1LCAnTScsICfnibknKSwKICAgICgweDMyOTYsICdNJywgJ+iyoScpLAogICAgKDB4MzI5NywgJ00nLCAn56WdJyksCiAgICAoMHgzMjk4LCAnTScsICflirQnKSwKICAgICgweDMyOTksICdNJywgJ+enmCcpLAogICAgKDB4MzI5QSwgJ00nLCAn55S3JyksCiAgICAoMHgzMjlCLCAnTScsICflpbMnKSwKICAgICgweDMyOUMsICdNJywgJ+mBqScpLAogICAgKDB4MzI5RCwgJ00nLCAn5YSqJyksCiAgICAoMHgzMjlFLCAnTScsICfljbAnKSwKICAgICgweDMyOUYsICdNJywgJ+azqCcpLAogICAgKDB4MzJBMCwgJ00nLCAn6aCFJyksCiAgICAoMHgzMkExLCAnTScsICfkvJEnKSwKICAgICgweDMyQTIsICdNJywgJ+WGmScpLAogICAgKDB4MzJBMywgJ00nLCAn5q2jJyksCiAgICAoMHgzMkE0LCAnTScsICfkuIonKSwKICAgICgweDMyQTUsICdNJywgJ+S4rScpLAogICAgKDB4MzJBNiwgJ00nLCAn5LiLJyksCiAgICAoMHgzMkE3LCAnTScsICflt6YnKSwKICAgICgweDMyQTgsICdNJywgJ+WPsycpLAogICAgKDB4MzJBOSwgJ00nLCAn5Yy7JyksCiAgICAoMHgzMkFBLCAnTScsICflrpcnKSwKICAgICgweDMyQUIsICdNJywgJ+WtpicpLAogICAgKDB4MzJBQywgJ00nLCAn55ujJyksCiAgICAoMHgzMkFELCAnTScsICfkvIEnKSwKICAgICgweDMyQUUsICdNJywgJ+izhycpLAogICAgKDB4MzJBRiwgJ00nLCAn5Y2UJyksCiAgICAoMHgzMkIwLCAnTScsICflpJwnKSwKICAgICgweDMyQjEsICdNJywgJzM2JyksCiAgICBdCgpkZWYgX3NlZ18zMigpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweDMyQjIsICdNJywgJzM3JyksCiAgICAoMHgzMkIzLCAnTScsICczOCcpLAogICAgKDB4MzJCNCwgJ00nLCAnMzknKSwKICAgICgweDMyQjUsICdNJywgJzQwJyksCiAgICAoMHgzMkI2LCAnTScsICc0MScpLAogICAgKDB4MzJCNywgJ00nLCAnNDInKSwKICAgICgweDMyQjgsICdNJywgJzQzJyksCiAgICAoMHgzMkI5LCAnTScsICc0NCcpLAogICAgKDB4MzJCQSwgJ00nLCAnNDUnKSwKICAgICgweDMyQkIsICdNJywgJzQ2JyksCiAgICAoMHgzMkJDLCAnTScsICc0NycpLAogICAgKDB4MzJCRCwgJ00nLCAnNDgnKSwKICAgICgweDMyQkUsICdNJywgJzQ5JyksCiAgICAoMHgzMkJGLCAnTScsICc1MCcpLAogICAgKDB4MzJDMCwgJ00nLCAnMeaciCcpLAogICAgKDB4MzJDMSwgJ00nLCAnMuaciCcpLAogICAgKDB4MzJDMiwgJ00nLCAnM+aciCcpLAogICAgKDB4MzJDMywgJ00nLCAnNOaciCcpLAogICAgKDB4MzJDNCwgJ00nLCAnNeaciCcpLAogICAgKDB4MzJDNSwgJ00nLCAnNuaciCcpLAogICAgKDB4MzJDNiwgJ00nLCAnN+aciCcpLAogICAgKDB4MzJDNywgJ00nLCAnOOaciCcpLAogICAgKDB4MzJDOCwgJ00nLCAnOeaciCcpLAogICAgKDB4MzJDOSwgJ00nLCAnMTDmnIgnKSwKICAgICgweDMyQ0EsICdNJywgJzEx5pyIJyksCiAgICAoMHgzMkNCLCAnTScsICcxMuaciCcpLAogICAgKDB4MzJDQywgJ00nLCAnaGcnKSwKICAgICgweDMyQ0QsICdNJywgJ2VyZycpLAogICAgKDB4MzJDRSwgJ00nLCAnZXYnKSwKICAgICgweDMyQ0YsICdNJywgJ2x0ZCcpLAogICAgKDB4MzJEMCwgJ00nLCAn44KiJyksCiAgICAoMHgzMkQxLCAnTScsICfjgqQnKSwKICAgICgweDMyRDIsICdNJywgJ+OCpicpLAogICAgKDB4MzJEMywgJ00nLCAn44KoJyksCiAgICAoMHgzMkQ0LCAnTScsICfjgqonKSwKICAgICgweDMyRDUsICdNJywgJ+OCqycpLAogICAgKDB4MzJENiwgJ00nLCAn44KtJyksCiAgICAoMHgzMkQ3LCAnTScsICfjgq8nKSwKICAgICgweDMyRDgsICdNJywgJ+OCsScpLAogICAgKDB4MzJEOSwgJ00nLCAn44KzJyksCiAgICAoMHgzMkRBLCAnTScsICfjgrUnKSwKICAgICgweDMyREIsICdNJywgJ+OCtycpLAogICAgKDB4MzJEQywgJ00nLCAn44K5JyksCiAgICAoMHgzMkRELCAnTScsICfjgrsnKSwKICAgICgweDMyREUsICdNJywgJ+OCvScpLAogICAgKDB4MzJERiwgJ00nLCAn44K/JyksCiAgICAoMHgzMkUwLCAnTScsICfjg4EnKSwKICAgICgweDMyRTEsICdNJywgJ+ODhCcpLAogICAgKDB4MzJFMiwgJ00nLCAn44OGJyksCiAgICAoMHgzMkUzLCAnTScsICfjg4gnKSwKICAgICgweDMyRTQsICdNJywgJ+ODiicpLAogICAgKDB4MzJFNSwgJ00nLCAn44OLJyksCiAgICAoMHgzMkU2LCAnTScsICfjg4wnKSwKICAgICgweDMyRTcsICdNJywgJ+ODjScpLAogICAgKDB4MzJFOCwgJ00nLCAn44OOJyksCiAgICAoMHgzMkU5LCAnTScsICfjg48nKSwKICAgICgweDMyRUEsICdNJywgJ+ODkicpLAogICAgKDB4MzJFQiwgJ00nLCAn44OVJyksCiAgICAoMHgzMkVDLCAnTScsICfjg5gnKSwKICAgICgweDMyRUQsICdNJywgJ+ODmycpLAogICAgKDB4MzJFRSwgJ00nLCAn44OeJyksCiAgICAoMHgzMkVGLCAnTScsICfjg58nKSwKICAgICgweDMyRjAsICdNJywgJ+ODoCcpLAogICAgKDB4MzJGMSwgJ00nLCAn44OhJyksCiAgICAoMHgzMkYyLCAnTScsICfjg6InKSwKICAgICgweDMyRjMsICdNJywgJ+ODpCcpLAogICAgKDB4MzJGNCwgJ00nLCAn44OmJyksCiAgICAoMHgzMkY1LCAnTScsICfjg6gnKSwKICAgICgweDMyRjYsICdNJywgJ+ODqScpLAogICAgKDB4MzJGNywgJ00nLCAn44OqJyksCiAgICAoMHgzMkY4LCAnTScsICfjg6snKSwKICAgICgweDMyRjksICdNJywgJ+ODrCcpLAogICAgKDB4MzJGQSwgJ00nLCAn44OtJyksCiAgICAoMHgzMkZCLCAnTScsICfjg68nKSwKICAgICgweDMyRkMsICdNJywgJ+ODsCcpLAogICAgKDB4MzJGRCwgJ00nLCAn44OxJyksCiAgICAoMHgzMkZFLCAnTScsICfjg7InKSwKICAgICgweDMyRkYsICdNJywgJ+S7pOWSjCcpLAogICAgKDB4MzMwMCwgJ00nLCAn44Ki44OR44O844OIJyksCiAgICAoMHgzMzAxLCAnTScsICfjgqLjg6vjg5XjgqEnKSwKICAgICgweDMzMDIsICdNJywgJ+OCouODs+ODmuOCoicpLAogICAgKDB4MzMwMywgJ00nLCAn44Ki44O844OrJyksCiAgICAoMHgzMzA0LCAnTScsICfjgqTjg4vjg7PjgrAnKSwKICAgICgweDMzMDUsICdNJywgJ+OCpOODs+ODgScpLAogICAgKDB4MzMwNiwgJ00nLCAn44Km44Kp44OzJyksCiAgICAoMHgzMzA3LCAnTScsICfjgqjjgrnjgq/jg7zjg4knKSwKICAgICgweDMzMDgsICdNJywgJ+OCqOODvOOCq+ODvCcpLAogICAgKDB4MzMwOSwgJ00nLCAn44Kq44Oz44K5JyksCiAgICAoMHgzMzBBLCAnTScsICfjgqrjg7zjg6AnKSwKICAgICgweDMzMEIsICdNJywgJ+OCq+OCpOODqicpLAogICAgKDB4MzMwQywgJ00nLCAn44Kr44Op44OD44OIJyksCiAgICAoMHgzMzBELCAnTScsICfjgqvjg63jg6rjg7wnKSwKICAgICgweDMzMEUsICdNJywgJ+OCrOODreODsycpLAogICAgKDB4MzMwRiwgJ00nLCAn44Ks44Oz44OeJyksCiAgICAoMHgzMzEwLCAnTScsICfjgq7jgqwnKSwKICAgICgweDMzMTEsICdNJywgJ+OCruODi+ODvCcpLAogICAgKDB4MzMxMiwgJ00nLCAn44Kt44Ol44Oq44O8JyksCiAgICAoMHgzMzEzLCAnTScsICfjgq7jg6vjg4Djg7wnKSwKICAgICgweDMzMTQsICdNJywgJ+OCreODrScpLAogICAgKDB4MzMxNSwgJ00nLCAn44Kt44Ot44Kw44Op44OgJyksCiAgICBdCgpkZWYgX3NlZ18zMygpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweDMzMTYsICdNJywgJ+OCreODreODoeODvOODiOODqycpLAogICAgKDB4MzMxNywgJ00nLCAn44Kt44Ot44Ov44OD44OIJyksCiAgICAoMHgzMzE4LCAnTScsICfjgrDjg6njg6AnKSwKICAgICgweDMzMTksICdNJywgJ+OCsOODqeODoOODiOODsycpLAogICAgKDB4MzMxQSwgJ00nLCAn44Kv44Or44K844Kk44OtJyksCiAgICAoMHgzMzFCLCAnTScsICfjgq/jg63jg7zjg40nKSwKICAgICgweDMzMUMsICdNJywgJ+OCseODvOOCuScpLAogICAgKDB4MzMxRCwgJ00nLCAn44Kz44Or44OKJyksCiAgICAoMHgzMzFFLCAnTScsICfjgrPjg7zjg50nKSwKICAgICgweDMzMUYsICdNJywgJ+OCteOCpOOCr+ODqycpLAogICAgKDB4MzMyMCwgJ00nLCAn44K144Oz44OB44O844OgJyksCiAgICAoMHgzMzIxLCAnTScsICfjgrfjg6rjg7PjgrAnKSwKICAgICgweDMzMjIsICdNJywgJ+OCu+ODs+ODgScpLAogICAgKDB4MzMyMywgJ00nLCAn44K744Oz44OIJyksCiAgICAoMHgzMzI0LCAnTScsICfjg4Djg7zjgrknKSwKICAgICgweDMzMjUsICdNJywgJ+ODh+OCtycpLAogICAgKDB4MzMyNiwgJ00nLCAn44OJ44OrJyksCiAgICAoMHgzMzI3LCAnTScsICfjg4jjg7MnKSwKICAgICgweDMzMjgsICdNJywgJ+ODiuODjicpLAogICAgKDB4MzMyOSwgJ00nLCAn44OO44OD44OIJyksCiAgICAoMHgzMzJBLCAnTScsICfjg4/jgqTjg4QnKSwKICAgICgweDMzMkIsICdNJywgJ+ODkeODvOOCu+ODs+ODiCcpLAogICAgKDB4MzMyQywgJ00nLCAn44OR44O844OEJyksCiAgICAoMHgzMzJELCAnTScsICfjg5Djg7zjg6zjg6snKSwKICAgICgweDMzMkUsICdNJywgJ+ODlOOCouOCueODiOODqycpLAogICAgKDB4MzMyRiwgJ00nLCAn44OU44Kv44OrJyksCiAgICAoMHgzMzMwLCAnTScsICfjg5TjgrMnKSwKICAgICgweDMzMzEsICdNJywgJ+ODk+ODqycpLAogICAgKDB4MzMzMiwgJ00nLCAn44OV44Kh44Op44OD44OJJyksCiAgICAoMHgzMzMzLCAnTScsICfjg5XjgqPjg7zjg4gnKSwKICAgICgweDMzMzQsICdNJywgJ+ODluODg+OCt+OCp+ODqycpLAogICAgKDB4MzMzNSwgJ00nLCAn44OV44Op44OzJyksCiAgICAoMHgzMzM2LCAnTScsICfjg5jjgq/jgr/jg7zjg6snKSwKICAgICgweDMzMzcsICdNJywgJ+ODmuOCvScpLAogICAgKDB4MzMzOCwgJ00nLCAn44Oa44OL44OSJyksCiAgICAoMHgzMzM5LCAnTScsICfjg5jjg6vjg4QnKSwKICAgICgweDMzM0EsICdNJywgJ+ODmuODs+OCuScpLAogICAgKDB4MzMzQiwgJ00nLCAn44Oa44O844K4JyksCiAgICAoMHgzMzNDLCAnTScsICfjg5njg7zjgr8nKSwKICAgICgweDMzM0QsICdNJywgJ+ODneOCpOODs+ODiCcpLAogICAgKDB4MzMzRSwgJ00nLCAn44Oc44Or44OIJyksCiAgICAoMHgzMzNGLCAnTScsICfjg5vjg7MnKSwKICAgICgweDMzNDAsICdNJywgJ+ODneODs+ODiScpLAogICAgKDB4MzM0MSwgJ00nLCAn44Ob44O844OrJyksCiAgICAoMHgzMzQyLCAnTScsICfjg5vjg7zjg7MnKSwKICAgICgweDMzNDMsICdNJywgJ+ODnuOCpOOCr+ODrScpLAogICAgKDB4MzM0NCwgJ00nLCAn44Oe44Kk44OrJyksCiAgICAoMHgzMzQ1LCAnTScsICfjg57jg4Pjg48nKSwKICAgICgweDMzNDYsICdNJywgJ+ODnuODq+OCrycpLAogICAgKDB4MzM0NywgJ00nLCAn44Oe44Oz44K344On44OzJyksCiAgICAoMHgzMzQ4LCAnTScsICfjg5/jgq/jg63jg7MnKSwKICAgICgweDMzNDksICdNJywgJ+ODn+ODqicpLAogICAgKDB4MzM0QSwgJ00nLCAn44Of44Oq44OQ44O844OrJyksCiAgICAoMHgzMzRCLCAnTScsICfjg6HjgqwnKSwKICAgICgweDMzNEMsICdNJywgJ+ODoeOCrOODiOODsycpLAogICAgKDB4MzM0RCwgJ00nLCAn44Oh44O844OI44OrJyksCiAgICAoMHgzMzRFLCAnTScsICfjg6Tjg7zjg4knKSwKICAgICgweDMzNEYsICdNJywgJ+ODpOODvOODqycpLAogICAgKDB4MzM1MCwgJ00nLCAn44Om44Ki44OzJyksCiAgICAoMHgzMzUxLCAnTScsICfjg6rjg4Pjg4jjg6snKSwKICAgICgweDMzNTIsICdNJywgJ+ODquODqScpLAogICAgKDB4MzM1MywgJ00nLCAn44Or44OU44O8JyksCiAgICAoMHgzMzU0LCAnTScsICfjg6vjg7zjg5bjg6snKSwKICAgICgweDMzNTUsICdNJywgJ+ODrOODoCcpLAogICAgKDB4MzM1NiwgJ00nLCAn44Os44Oz44OI44Ky44OzJyksCiAgICAoMHgzMzU3LCAnTScsICfjg6/jg4Pjg4gnKSwKICAgICgweDMzNTgsICdNJywgJzDngrknKSwKICAgICgweDMzNTksICdNJywgJzHngrknKSwKICAgICgweDMzNUEsICdNJywgJzLngrknKSwKICAgICgweDMzNUIsICdNJywgJzPngrknKSwKICAgICgweDMzNUMsICdNJywgJzTngrknKSwKICAgICgweDMzNUQsICdNJywgJzXngrknKSwKICAgICgweDMzNUUsICdNJywgJzbngrknKSwKICAgICgweDMzNUYsICdNJywgJzfngrknKSwKICAgICgweDMzNjAsICdNJywgJzjngrknKSwKICAgICgweDMzNjEsICdNJywgJznngrknKSwKICAgICgweDMzNjIsICdNJywgJzEw54K5JyksCiAgICAoMHgzMzYzLCAnTScsICcxMeeCuScpLAogICAgKDB4MzM2NCwgJ00nLCAnMTLngrknKSwKICAgICgweDMzNjUsICdNJywgJzEz54K5JyksCiAgICAoMHgzMzY2LCAnTScsICcxNOeCuScpLAogICAgKDB4MzM2NywgJ00nLCAnMTXngrknKSwKICAgICgweDMzNjgsICdNJywgJzE254K5JyksCiAgICAoMHgzMzY5LCAnTScsICcxN+eCuScpLAogICAgKDB4MzM2QSwgJ00nLCAnMTjngrknKSwKICAgICgweDMzNkIsICdNJywgJzE554K5JyksCiAgICAoMHgzMzZDLCAnTScsICcyMOeCuScpLAogICAgKDB4MzM2RCwgJ00nLCAnMjHngrknKSwKICAgICgweDMzNkUsICdNJywgJzIy54K5JyksCiAgICAoMHgzMzZGLCAnTScsICcyM+eCuScpLAogICAgKDB4MzM3MCwgJ00nLCAnMjTngrknKSwKICAgICgweDMzNzEsICdNJywgJ2hwYScpLAogICAgKDB4MzM3MiwgJ00nLCAnZGEnKSwKICAgICgweDMzNzMsICdNJywgJ2F1JyksCiAgICAoMHgzMzc0LCAnTScsICdiYXInKSwKICAgICgweDMzNzUsICdNJywgJ292JyksCiAgICAoMHgzMzc2LCAnTScsICdwYycpLAogICAgKDB4MzM3NywgJ00nLCAnZG0nKSwKICAgICgweDMzNzgsICdNJywgJ2RtMicpLAogICAgKDB4MzM3OSwgJ00nLCAnZG0zJyksCiAgICBdCgpkZWYgX3NlZ18zNCgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweDMzN0EsICdNJywgJ2l1JyksCiAgICAoMHgzMzdCLCAnTScsICflubPmiJAnKSwKICAgICgweDMzN0MsICdNJywgJ+aYreWSjCcpLAogICAgKDB4MzM3RCwgJ00nLCAn5aSn5q2jJyksCiAgICAoMHgzMzdFLCAnTScsICfmmI7msrsnKSwKICAgICgweDMzN0YsICdNJywgJ+agquW8j+S8muekvicpLAogICAgKDB4MzM4MCwgJ00nLCAncGEnKSwKICAgICgweDMzODEsICdNJywgJ25hJyksCiAgICAoMHgzMzgyLCAnTScsICfOvGEnKSwKICAgICgweDMzODMsICdNJywgJ21hJyksCiAgICAoMHgzMzg0LCAnTScsICdrYScpLAogICAgKDB4MzM4NSwgJ00nLCAna2InKSwKICAgICgweDMzODYsICdNJywgJ21iJyksCiAgICAoMHgzMzg3LCAnTScsICdnYicpLAogICAgKDB4MzM4OCwgJ00nLCAnY2FsJyksCiAgICAoMHgzMzg5LCAnTScsICdrY2FsJyksCiAgICAoMHgzMzhBLCAnTScsICdwZicpLAogICAgKDB4MzM4QiwgJ00nLCAnbmYnKSwKICAgICgweDMzOEMsICdNJywgJ868ZicpLAogICAgKDB4MzM4RCwgJ00nLCAnzrxnJyksCiAgICAoMHgzMzhFLCAnTScsICdtZycpLAogICAgKDB4MzM4RiwgJ00nLCAna2cnKSwKICAgICgweDMzOTAsICdNJywgJ2h6JyksCiAgICAoMHgzMzkxLCAnTScsICdraHonKSwKICAgICgweDMzOTIsICdNJywgJ21oeicpLAogICAgKDB4MzM5MywgJ00nLCAnZ2h6JyksCiAgICAoMHgzMzk0LCAnTScsICd0aHonKSwKICAgICgweDMzOTUsICdNJywgJ868bCcpLAogICAgKDB4MzM5NiwgJ00nLCAnbWwnKSwKICAgICgweDMzOTcsICdNJywgJ2RsJyksCiAgICAoMHgzMzk4LCAnTScsICdrbCcpLAogICAgKDB4MzM5OSwgJ00nLCAnZm0nKSwKICAgICgweDMzOUEsICdNJywgJ25tJyksCiAgICAoMHgzMzlCLCAnTScsICfOvG0nKSwKICAgICgweDMzOUMsICdNJywgJ21tJyksCiAgICAoMHgzMzlELCAnTScsICdjbScpLAogICAgKDB4MzM5RSwgJ00nLCAna20nKSwKICAgICgweDMzOUYsICdNJywgJ21tMicpLAogICAgKDB4MzNBMCwgJ00nLCAnY20yJyksCiAgICAoMHgzM0ExLCAnTScsICdtMicpLAogICAgKDB4MzNBMiwgJ00nLCAna20yJyksCiAgICAoMHgzM0EzLCAnTScsICdtbTMnKSwKICAgICgweDMzQTQsICdNJywgJ2NtMycpLAogICAgKDB4MzNBNSwgJ00nLCAnbTMnKSwKICAgICgweDMzQTYsICdNJywgJ2ttMycpLAogICAgKDB4MzNBNywgJ00nLCAnbeKIlXMnKSwKICAgICgweDMzQTgsICdNJywgJ23iiJVzMicpLAogICAgKDB4MzNBOSwgJ00nLCAncGEnKSwKICAgICgweDMzQUEsICdNJywgJ2twYScpLAogICAgKDB4MzNBQiwgJ00nLCAnbXBhJyksCiAgICAoMHgzM0FDLCAnTScsICdncGEnKSwKICAgICgweDMzQUQsICdNJywgJ3JhZCcpLAogICAgKDB4MzNBRSwgJ00nLCAncmFk4oiVcycpLAogICAgKDB4MzNBRiwgJ00nLCAncmFk4oiVczInKSwKICAgICgweDMzQjAsICdNJywgJ3BzJyksCiAgICAoMHgzM0IxLCAnTScsICducycpLAogICAgKDB4MzNCMiwgJ00nLCAnzrxzJyksCiAgICAoMHgzM0IzLCAnTScsICdtcycpLAogICAgKDB4MzNCNCwgJ00nLCAncHYnKSwKICAgICgweDMzQjUsICdNJywgJ252JyksCiAgICAoMHgzM0I2LCAnTScsICfOvHYnKSwKICAgICgweDMzQjcsICdNJywgJ212JyksCiAgICAoMHgzM0I4LCAnTScsICdrdicpLAogICAgKDB4MzNCOSwgJ00nLCAnbXYnKSwKICAgICgweDMzQkEsICdNJywgJ3B3JyksCiAgICAoMHgzM0JCLCAnTScsICdudycpLAogICAgKDB4MzNCQywgJ00nLCAnzrx3JyksCiAgICAoMHgzM0JELCAnTScsICdtdycpLAogICAgKDB4MzNCRSwgJ00nLCAna3cnKSwKICAgICgweDMzQkYsICdNJywgJ213JyksCiAgICAoMHgzM0MwLCAnTScsICdrz4knKSwKICAgICgweDMzQzEsICdNJywgJ23PiScpLAogICAgKDB4MzNDMiwgJ1gnKSwKICAgICgweDMzQzMsICdNJywgJ2JxJyksCiAgICAoMHgzM0M0LCAnTScsICdjYycpLAogICAgKDB4MzNDNSwgJ00nLCAnY2QnKSwKICAgICgweDMzQzYsICdNJywgJ2PiiJVrZycpLAogICAgKDB4MzNDNywgJ1gnKSwKICAgICgweDMzQzgsICdNJywgJ2RiJyksCiAgICAoMHgzM0M5LCAnTScsICdneScpLAogICAgKDB4MzNDQSwgJ00nLCAnaGEnKSwKICAgICgweDMzQ0IsICdNJywgJ2hwJyksCiAgICAoMHgzM0NDLCAnTScsICdpbicpLAogICAgKDB4MzNDRCwgJ00nLCAna2snKSwKICAgICgweDMzQ0UsICdNJywgJ2ttJyksCiAgICAoMHgzM0NGLCAnTScsICdrdCcpLAogICAgKDB4MzNEMCwgJ00nLCAnbG0nKSwKICAgICgweDMzRDEsICdNJywgJ2xuJyksCiAgICAoMHgzM0QyLCAnTScsICdsb2cnKSwKICAgICgweDMzRDMsICdNJywgJ2x4JyksCiAgICAoMHgzM0Q0LCAnTScsICdtYicpLAogICAgKDB4MzNENSwgJ00nLCAnbWlsJyksCiAgICAoMHgzM0Q2LCAnTScsICdtb2wnKSwKICAgICgweDMzRDcsICdNJywgJ3BoJyksCiAgICAoMHgzM0Q4LCAnWCcpLAogICAgKDB4MzNEOSwgJ00nLCAncHBtJyksCiAgICAoMHgzM0RBLCAnTScsICdwcicpLAogICAgKDB4MzNEQiwgJ00nLCAnc3InKSwKICAgICgweDMzREMsICdNJywgJ3N2JyksCiAgICAoMHgzM0RELCAnTScsICd3YicpLAogICAgXQoKZGVmIF9zZWdfMzUoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXToKICAgIHJldHVybiBbCiAgICAoMHgzM0RFLCAnTScsICd24oiVbScpLAogICAgKDB4MzNERiwgJ00nLCAnYeKIlW0nKSwKICAgICgweDMzRTAsICdNJywgJzHml6UnKSwKICAgICgweDMzRTEsICdNJywgJzLml6UnKSwKICAgICgweDMzRTIsICdNJywgJzPml6UnKSwKICAgICgweDMzRTMsICdNJywgJzTml6UnKSwKICAgICgweDMzRTQsICdNJywgJzXml6UnKSwKICAgICgweDMzRTUsICdNJywgJzbml6UnKSwKICAgICgweDMzRTYsICdNJywgJzfml6UnKSwKICAgICgweDMzRTcsICdNJywgJzjml6UnKSwKICAgICgweDMzRTgsICdNJywgJznml6UnKSwKICAgICgweDMzRTksICdNJywgJzEw5pelJyksCiAgICAoMHgzM0VBLCAnTScsICcxMeaXpScpLAogICAgKDB4MzNFQiwgJ00nLCAnMTLml6UnKSwKICAgICgweDMzRUMsICdNJywgJzEz5pelJyksCiAgICAoMHgzM0VELCAnTScsICcxNOaXpScpLAogICAgKDB4MzNFRSwgJ00nLCAnMTXml6UnKSwKICAgICgweDMzRUYsICdNJywgJzE25pelJyksCiAgICAoMHgzM0YwLCAnTScsICcxN+aXpScpLAogICAgKDB4MzNGMSwgJ00nLCAnMTjml6UnKSwKICAgICgweDMzRjIsICdNJywgJzE55pelJyksCiAgICAoMHgzM0YzLCAnTScsICcyMOaXpScpLAogICAgKDB4MzNGNCwgJ00nLCAnMjHml6UnKSwKICAgICgweDMzRjUsICdNJywgJzIy5pelJyksCiAgICAoMHgzM0Y2LCAnTScsICcyM+aXpScpLAogICAgKDB4MzNGNywgJ00nLCAnMjTml6UnKSwKICAgICgweDMzRjgsICdNJywgJzI15pelJyksCiAgICAoMHgzM0Y5LCAnTScsICcyNuaXpScpLAogICAgKDB4MzNGQSwgJ00nLCAnMjfml6UnKSwKICAgICgweDMzRkIsICdNJywgJzI45pelJyksCiAgICAoMHgzM0ZDLCAnTScsICcyOeaXpScpLAogICAgKDB4MzNGRCwgJ00nLCAnMzDml6UnKSwKICAgICgweDMzRkUsICdNJywgJzMx5pelJyksCiAgICAoMHgzM0ZGLCAnTScsICdnYWwnKSwKICAgICgweDM0MDAsICdWJyksCiAgICAoMHhBNDhELCAnWCcpLAogICAgKDB4QTQ5MCwgJ1YnKSwKICAgICgweEE0QzcsICdYJyksCiAgICAoMHhBNEQwLCAnVicpLAogICAgKDB4QTYyQywgJ1gnKSwKICAgICgweEE2NDAsICdNJywgJ+qZgScpLAogICAgKDB4QTY0MSwgJ1YnKSwKICAgICgweEE2NDIsICdNJywgJ+qZgycpLAogICAgKDB4QTY0MywgJ1YnKSwKICAgICgweEE2NDQsICdNJywgJ+qZhScpLAogICAgKDB4QTY0NSwgJ1YnKSwKICAgICgweEE2NDYsICdNJywgJ+qZhycpLAogICAgKDB4QTY0NywgJ1YnKSwKICAgICgweEE2NDgsICdNJywgJ+qZiScpLAogICAgKDB4QTY0OSwgJ1YnKSwKICAgICgweEE2NEEsICdNJywgJ+qZiycpLAogICAgKDB4QTY0QiwgJ1YnKSwKICAgICgweEE2NEMsICdNJywgJ+qZjScpLAogICAgKDB4QTY0RCwgJ1YnKSwKICAgICgweEE2NEUsICdNJywgJ+qZjycpLAogICAgKDB4QTY0RiwgJ1YnKSwKICAgICgweEE2NTAsICdNJywgJ+qZkScpLAogICAgKDB4QTY1MSwgJ1YnKSwKICAgICgweEE2NTIsICdNJywgJ+qZkycpLAogICAgKDB4QTY1MywgJ1YnKSwKICAgICgweEE2NTQsICdNJywgJ+qZlScpLAogICAgKDB4QTY1NSwgJ1YnKSwKICAgICgweEE2NTYsICdNJywgJ+qZlycpLAogICAgKDB4QTY1NywgJ1YnKSwKICAgICgweEE2NTgsICdNJywgJ+qZmScpLAogICAgKDB4QTY1OSwgJ1YnKSwKICAgICgweEE2NUEsICdNJywgJ+qZmycpLAogICAgKDB4QTY1QiwgJ1YnKSwKICAgICgweEE2NUMsICdNJywgJ+qZnScpLAogICAgKDB4QTY1RCwgJ1YnKSwKICAgICgweEE2NUUsICdNJywgJ+qZnycpLAogICAgKDB4QTY1RiwgJ1YnKSwKICAgICgweEE2NjAsICdNJywgJ+qZoScpLAogICAgKDB4QTY2MSwgJ1YnKSwKICAgICgweEE2NjIsICdNJywgJ+qZoycpLAogICAgKDB4QTY2MywgJ1YnKSwKICAgICgweEE2NjQsICdNJywgJ+qZpScpLAogICAgKDB4QTY2NSwgJ1YnKSwKICAgICgweEE2NjYsICdNJywgJ+qZpycpLAogICAgKDB4QTY2NywgJ1YnKSwKICAgICgweEE2NjgsICdNJywgJ+qZqScpLAogICAgKDB4QTY2OSwgJ1YnKSwKICAgICgweEE2NkEsICdNJywgJ+qZqycpLAogICAgKDB4QTY2QiwgJ1YnKSwKICAgICgweEE2NkMsICdNJywgJ+qZrScpLAogICAgKDB4QTY2RCwgJ1YnKSwKICAgICgweEE2ODAsICdNJywgJ+qagScpLAogICAgKDB4QTY4MSwgJ1YnKSwKICAgICgweEE2ODIsICdNJywgJ+qagycpLAogICAgKDB4QTY4MywgJ1YnKSwKICAgICgweEE2ODQsICdNJywgJ+qahScpLAogICAgKDB4QTY4NSwgJ1YnKSwKICAgICgweEE2ODYsICdNJywgJ+qahycpLAogICAgKDB4QTY4NywgJ1YnKSwKICAgICgweEE2ODgsICdNJywgJ+qaiScpLAogICAgKDB4QTY4OSwgJ1YnKSwKICAgICgweEE2OEEsICdNJywgJ+qaiycpLAogICAgKDB4QTY4QiwgJ1YnKSwKICAgICgweEE2OEMsICdNJywgJ+qajScpLAogICAgKDB4QTY4RCwgJ1YnKSwKICAgIF0KCmRlZiBfc2VnXzM2KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4QTY4RSwgJ00nLCAn6pqPJyksCiAgICAoMHhBNjhGLCAnVicpLAogICAgKDB4QTY5MCwgJ00nLCAn6pqRJyksCiAgICAoMHhBNjkxLCAnVicpLAogICAgKDB4QTY5MiwgJ00nLCAn6pqTJyksCiAgICAoMHhBNjkzLCAnVicpLAogICAgKDB4QTY5NCwgJ00nLCAn6pqVJyksCiAgICAoMHhBNjk1LCAnVicpLAogICAgKDB4QTY5NiwgJ00nLCAn6pqXJyksCiAgICAoMHhBNjk3LCAnVicpLAogICAgKDB4QTY5OCwgJ00nLCAn6pqZJyksCiAgICAoMHhBNjk5LCAnVicpLAogICAgKDB4QTY5QSwgJ00nLCAn6pqbJyksCiAgICAoMHhBNjlCLCAnVicpLAogICAgKDB4QTY5QywgJ00nLCAn0YonKSwKICAgICgweEE2OUQsICdNJywgJ9GMJyksCiAgICAoMHhBNjlFLCAnVicpLAogICAgKDB4QTZGOCwgJ1gnKSwKICAgICgweEE3MDAsICdWJyksCiAgICAoMHhBNzIyLCAnTScsICfqnKMnKSwKICAgICgweEE3MjMsICdWJyksCiAgICAoMHhBNzI0LCAnTScsICfqnKUnKSwKICAgICgweEE3MjUsICdWJyksCiAgICAoMHhBNzI2LCAnTScsICfqnKcnKSwKICAgICgweEE3MjcsICdWJyksCiAgICAoMHhBNzI4LCAnTScsICfqnKknKSwKICAgICgweEE3MjksICdWJyksCiAgICAoMHhBNzJBLCAnTScsICfqnKsnKSwKICAgICgweEE3MkIsICdWJyksCiAgICAoMHhBNzJDLCAnTScsICfqnK0nKSwKICAgICgweEE3MkQsICdWJyksCiAgICAoMHhBNzJFLCAnTScsICfqnK8nKSwKICAgICgweEE3MkYsICdWJyksCiAgICAoMHhBNzMyLCAnTScsICfqnLMnKSwKICAgICgweEE3MzMsICdWJyksCiAgICAoMHhBNzM0LCAnTScsICfqnLUnKSwKICAgICgweEE3MzUsICdWJyksCiAgICAoMHhBNzM2LCAnTScsICfqnLcnKSwKICAgICgweEE3MzcsICdWJyksCiAgICAoMHhBNzM4LCAnTScsICfqnLknKSwKICAgICgweEE3MzksICdWJyksCiAgICAoMHhBNzNBLCAnTScsICfqnLsnKSwKICAgICgweEE3M0IsICdWJyksCiAgICAoMHhBNzNDLCAnTScsICfqnL0nKSwKICAgICgweEE3M0QsICdWJyksCiAgICAoMHhBNzNFLCAnTScsICfqnL8nKSwKICAgICgweEE3M0YsICdWJyksCiAgICAoMHhBNzQwLCAnTScsICfqnYEnKSwKICAgICgweEE3NDEsICdWJyksCiAgICAoMHhBNzQyLCAnTScsICfqnYMnKSwKICAgICgweEE3NDMsICdWJyksCiAgICAoMHhBNzQ0LCAnTScsICfqnYUnKSwKICAgICgweEE3NDUsICdWJyksCiAgICAoMHhBNzQ2LCAnTScsICfqnYcnKSwKICAgICgweEE3NDcsICdWJyksCiAgICAoMHhBNzQ4LCAnTScsICfqnYknKSwKICAgICgweEE3NDksICdWJyksCiAgICAoMHhBNzRBLCAnTScsICfqnYsnKSwKICAgICgweEE3NEIsICdWJyksCiAgICAoMHhBNzRDLCAnTScsICfqnY0nKSwKICAgICgweEE3NEQsICdWJyksCiAgICAoMHhBNzRFLCAnTScsICfqnY8nKSwKICAgICgweEE3NEYsICdWJyksCiAgICAoMHhBNzUwLCAnTScsICfqnZEnKSwKICAgICgweEE3NTEsICdWJyksCiAgICAoMHhBNzUyLCAnTScsICfqnZMnKSwKICAgICgweEE3NTMsICdWJyksCiAgICAoMHhBNzU0LCAnTScsICfqnZUnKSwKICAgICgweEE3NTUsICdWJyksCiAgICAoMHhBNzU2LCAnTScsICfqnZcnKSwKICAgICgweEE3NTcsICdWJyksCiAgICAoMHhBNzU4LCAnTScsICfqnZknKSwKICAgICgweEE3NTksICdWJyksCiAgICAoMHhBNzVBLCAnTScsICfqnZsnKSwKICAgICgweEE3NUIsICdWJyksCiAgICAoMHhBNzVDLCAnTScsICfqnZ0nKSwKICAgICgweEE3NUQsICdWJyksCiAgICAoMHhBNzVFLCAnTScsICfqnZ8nKSwKICAgICgweEE3NUYsICdWJyksCiAgICAoMHhBNzYwLCAnTScsICfqnaEnKSwKICAgICgweEE3NjEsICdWJyksCiAgICAoMHhBNzYyLCAnTScsICfqnaMnKSwKICAgICgweEE3NjMsICdWJyksCiAgICAoMHhBNzY0LCAnTScsICfqnaUnKSwKICAgICgweEE3NjUsICdWJyksCiAgICAoMHhBNzY2LCAnTScsICfqnacnKSwKICAgICgweEE3NjcsICdWJyksCiAgICAoMHhBNzY4LCAnTScsICfqnaknKSwKICAgICgweEE3NjksICdWJyksCiAgICAoMHhBNzZBLCAnTScsICfqnasnKSwKICAgICgweEE3NkIsICdWJyksCiAgICAoMHhBNzZDLCAnTScsICfqna0nKSwKICAgICgweEE3NkQsICdWJyksCiAgICAoMHhBNzZFLCAnTScsICfqna8nKSwKICAgICgweEE3NkYsICdWJyksCiAgICAoMHhBNzcwLCAnTScsICfqna8nKSwKICAgICgweEE3NzEsICdWJyksCiAgICAoMHhBNzc5LCAnTScsICfqnbonKSwKICAgICgweEE3N0EsICdWJyksCiAgICAoMHhBNzdCLCAnTScsICfqnbwnKSwKICAgIF0KCmRlZiBfc2VnXzM3KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4QTc3QywgJ1YnKSwKICAgICgweEE3N0QsICdNJywgJ+G1uScpLAogICAgKDB4QTc3RSwgJ00nLCAn6p2/JyksCiAgICAoMHhBNzdGLCAnVicpLAogICAgKDB4QTc4MCwgJ00nLCAn6p6BJyksCiAgICAoMHhBNzgxLCAnVicpLAogICAgKDB4QTc4MiwgJ00nLCAn6p6DJyksCiAgICAoMHhBNzgzLCAnVicpLAogICAgKDB4QTc4NCwgJ00nLCAn6p6FJyksCiAgICAoMHhBNzg1LCAnVicpLAogICAgKDB4QTc4NiwgJ00nLCAn6p6HJyksCiAgICAoMHhBNzg3LCAnVicpLAogICAgKDB4QTc4QiwgJ00nLCAn6p6MJyksCiAgICAoMHhBNzhDLCAnVicpLAogICAgKDB4QTc4RCwgJ00nLCAnyaUnKSwKICAgICgweEE3OEUsICdWJyksCiAgICAoMHhBNzkwLCAnTScsICfqnpEnKSwKICAgICgweEE3OTEsICdWJyksCiAgICAoMHhBNzkyLCAnTScsICfqnpMnKSwKICAgICgweEE3OTMsICdWJyksCiAgICAoMHhBNzk2LCAnTScsICfqnpcnKSwKICAgICgweEE3OTcsICdWJyksCiAgICAoMHhBNzk4LCAnTScsICfqnpknKSwKICAgICgweEE3OTksICdWJyksCiAgICAoMHhBNzlBLCAnTScsICfqnpsnKSwKICAgICgweEE3OUIsICdWJyksCiAgICAoMHhBNzlDLCAnTScsICfqnp0nKSwKICAgICgweEE3OUQsICdWJyksCiAgICAoMHhBNzlFLCAnTScsICfqnp8nKSwKICAgICgweEE3OUYsICdWJyksCiAgICAoMHhBN0EwLCAnTScsICfqnqEnKSwKICAgICgweEE3QTEsICdWJyksCiAgICAoMHhBN0EyLCAnTScsICfqnqMnKSwKICAgICgweEE3QTMsICdWJyksCiAgICAoMHhBN0E0LCAnTScsICfqnqUnKSwKICAgICgweEE3QTUsICdWJyksCiAgICAoMHhBN0E2LCAnTScsICfqnqcnKSwKICAgICgweEE3QTcsICdWJyksCiAgICAoMHhBN0E4LCAnTScsICfqnqknKSwKICAgICgweEE3QTksICdWJyksCiAgICAoMHhBN0FBLCAnTScsICfJpicpLAogICAgKDB4QTdBQiwgJ00nLCAnyZwnKSwKICAgICgweEE3QUMsICdNJywgJ8mhJyksCiAgICAoMHhBN0FELCAnTScsICfJrCcpLAogICAgKDB4QTdBRSwgJ00nLCAnyaonKSwKICAgICgweEE3QUYsICdWJyksCiAgICAoMHhBN0IwLCAnTScsICfKnicpLAogICAgKDB4QTdCMSwgJ00nLCAnyocnKSwKICAgICgweEE3QjIsICdNJywgJ8qdJyksCiAgICAoMHhBN0IzLCAnTScsICfqrZMnKSwKICAgICgweEE3QjQsICdNJywgJ+qetScpLAogICAgKDB4QTdCNSwgJ1YnKSwKICAgICgweEE3QjYsICdNJywgJ+qetycpLAogICAgKDB4QTdCNywgJ1YnKSwKICAgICgweEE3QjgsICdNJywgJ+qeuScpLAogICAgKDB4QTdCOSwgJ1YnKSwKICAgICgweEE3QkEsICdNJywgJ+qeuycpLAogICAgKDB4QTdCQiwgJ1YnKSwKICAgICgweEE3QkMsICdNJywgJ+qevScpLAogICAgKDB4QTdCRCwgJ1YnKSwKICAgICgweEE3QkUsICdNJywgJ+qevycpLAogICAgKDB4QTdCRiwgJ1YnKSwKICAgICgweEE3QzAsICdNJywgJ+qfgScpLAogICAgKDB4QTdDMSwgJ1YnKSwKICAgICgweEE3QzIsICdNJywgJ+qfgycpLAogICAgKDB4QTdDMywgJ1YnKSwKICAgICgweEE3QzQsICdNJywgJ+qelCcpLAogICAgKDB4QTdDNSwgJ00nLCAnyoInKSwKICAgICgweEE3QzYsICdNJywgJ+G2jicpLAogICAgKDB4QTdDNywgJ00nLCAn6p+IJyksCiAgICAoMHhBN0M4LCAnVicpLAogICAgKDB4QTdDOSwgJ00nLCAn6p+KJyksCiAgICAoMHhBN0NBLCAnVicpLAogICAgKDB4QTdDQiwgJ1gnKSwKICAgICgweEE3RDAsICdNJywgJ+qfkScpLAogICAgKDB4QTdEMSwgJ1YnKSwKICAgICgweEE3RDIsICdYJyksCiAgICAoMHhBN0QzLCAnVicpLAogICAgKDB4QTdENCwgJ1gnKSwKICAgICgweEE3RDUsICdWJyksCiAgICAoMHhBN0Q2LCAnTScsICfqn5cnKSwKICAgICgweEE3RDcsICdWJyksCiAgICAoMHhBN0Q4LCAnTScsICfqn5knKSwKICAgICgweEE3RDksICdWJyksCiAgICAoMHhBN0RBLCAnWCcpLAogICAgKDB4QTdGMiwgJ00nLCAnYycpLAogICAgKDB4QTdGMywgJ00nLCAnZicpLAogICAgKDB4QTdGNCwgJ00nLCAncScpLAogICAgKDB4QTdGNSwgJ00nLCAn6p+2JyksCiAgICAoMHhBN0Y2LCAnVicpLAogICAgKDB4QTdGOCwgJ00nLCAnxKcnKSwKICAgICgweEE3RjksICdNJywgJ8WTJyksCiAgICAoMHhBN0ZBLCAnVicpLAogICAgKDB4QTgyRCwgJ1gnKSwKICAgICgweEE4MzAsICdWJyksCiAgICAoMHhBODNBLCAnWCcpLAogICAgKDB4QTg0MCwgJ1YnKSwKICAgICgweEE4NzgsICdYJyksCiAgICAoMHhBODgwLCAnVicpLAogICAgKDB4QThDNiwgJ1gnKSwKICAgIF0KCmRlZiBfc2VnXzM4KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4QThDRSwgJ1YnKSwKICAgICgweEE4REEsICdYJyksCiAgICAoMHhBOEUwLCAnVicpLAogICAgKDB4QTk1NCwgJ1gnKSwKICAgICgweEE5NUYsICdWJyksCiAgICAoMHhBOTdELCAnWCcpLAogICAgKDB4QTk4MCwgJ1YnKSwKICAgICgweEE5Q0UsICdYJyksCiAgICAoMHhBOUNGLCAnVicpLAogICAgKDB4QTlEQSwgJ1gnKSwKICAgICgweEE5REUsICdWJyksCiAgICAoMHhBOUZGLCAnWCcpLAogICAgKDB4QUEwMCwgJ1YnKSwKICAgICgweEFBMzcsICdYJyksCiAgICAoMHhBQTQwLCAnVicpLAogICAgKDB4QUE0RSwgJ1gnKSwKICAgICgweEFBNTAsICdWJyksCiAgICAoMHhBQTVBLCAnWCcpLAogICAgKDB4QUE1QywgJ1YnKSwKICAgICgweEFBQzMsICdYJyksCiAgICAoMHhBQURCLCAnVicpLAogICAgKDB4QUFGNywgJ1gnKSwKICAgICgweEFCMDEsICdWJyksCiAgICAoMHhBQjA3LCAnWCcpLAogICAgKDB4QUIwOSwgJ1YnKSwKICAgICgweEFCMEYsICdYJyksCiAgICAoMHhBQjExLCAnVicpLAogICAgKDB4QUIxNywgJ1gnKSwKICAgICgweEFCMjAsICdWJyksCiAgICAoMHhBQjI3LCAnWCcpLAogICAgKDB4QUIyOCwgJ1YnKSwKICAgICgweEFCMkYsICdYJyksCiAgICAoMHhBQjMwLCAnVicpLAogICAgKDB4QUI1QywgJ00nLCAn6pynJyksCiAgICAoMHhBQjVELCAnTScsICfqrLcnKSwKICAgICgweEFCNUUsICdNJywgJ8mrJyksCiAgICAoMHhBQjVGLCAnTScsICfqrZInKSwKICAgICgweEFCNjAsICdWJyksCiAgICAoMHhBQjY5LCAnTScsICfKjScpLAogICAgKDB4QUI2QSwgJ1YnKSwKICAgICgweEFCNkMsICdYJyksCiAgICAoMHhBQjcwLCAnTScsICfhjqAnKSwKICAgICgweEFCNzEsICdNJywgJ+GOoScpLAogICAgKDB4QUI3MiwgJ00nLCAn4Y6iJyksCiAgICAoMHhBQjczLCAnTScsICfhjqMnKSwKICAgICgweEFCNzQsICdNJywgJ+GOpCcpLAogICAgKDB4QUI3NSwgJ00nLCAn4Y6lJyksCiAgICAoMHhBQjc2LCAnTScsICfhjqYnKSwKICAgICgweEFCNzcsICdNJywgJ+GOpycpLAogICAgKDB4QUI3OCwgJ00nLCAn4Y6oJyksCiAgICAoMHhBQjc5LCAnTScsICfhjqknKSwKICAgICgweEFCN0EsICdNJywgJ+GOqicpLAogICAgKDB4QUI3QiwgJ00nLCAn4Y6rJyksCiAgICAoMHhBQjdDLCAnTScsICfhjqwnKSwKICAgICgweEFCN0QsICdNJywgJ+GOrScpLAogICAgKDB4QUI3RSwgJ00nLCAn4Y6uJyksCiAgICAoMHhBQjdGLCAnTScsICfhjq8nKSwKICAgICgweEFCODAsICdNJywgJ+GOsCcpLAogICAgKDB4QUI4MSwgJ00nLCAn4Y6xJyksCiAgICAoMHhBQjgyLCAnTScsICfhjrInKSwKICAgICgweEFCODMsICdNJywgJ+GOsycpLAogICAgKDB4QUI4NCwgJ00nLCAn4Y60JyksCiAgICAoMHhBQjg1LCAnTScsICfhjrUnKSwKICAgICgweEFCODYsICdNJywgJ+GOticpLAogICAgKDB4QUI4NywgJ00nLCAn4Y63JyksCiAgICAoMHhBQjg4LCAnTScsICfhjrgnKSwKICAgICgweEFCODksICdNJywgJ+GOuScpLAogICAgKDB4QUI4QSwgJ00nLCAn4Y66JyksCiAgICAoMHhBQjhCLCAnTScsICfhjrsnKSwKICAgICgweEFCOEMsICdNJywgJ+GOvCcpLAogICAgKDB4QUI4RCwgJ00nLCAn4Y69JyksCiAgICAoMHhBQjhFLCAnTScsICfhjr4nKSwKICAgICgweEFCOEYsICdNJywgJ+GOvycpLAogICAgKDB4QUI5MCwgJ00nLCAn4Y+AJyksCiAgICAoMHhBQjkxLCAnTScsICfhj4EnKSwKICAgICgweEFCOTIsICdNJywgJ+GPgicpLAogICAgKDB4QUI5MywgJ00nLCAn4Y+DJyksCiAgICAoMHhBQjk0LCAnTScsICfhj4QnKSwKICAgICgweEFCOTUsICdNJywgJ+GPhScpLAogICAgKDB4QUI5NiwgJ00nLCAn4Y+GJyksCiAgICAoMHhBQjk3LCAnTScsICfhj4cnKSwKICAgICgweEFCOTgsICdNJywgJ+GPiCcpLAogICAgKDB4QUI5OSwgJ00nLCAn4Y+JJyksCiAgICAoMHhBQjlBLCAnTScsICfhj4onKSwKICAgICgweEFCOUIsICdNJywgJ+GPiycpLAogICAgKDB4QUI5QywgJ00nLCAn4Y+MJyksCiAgICAoMHhBQjlELCAnTScsICfhj40nKSwKICAgICgweEFCOUUsICdNJywgJ+GPjicpLAogICAgKDB4QUI5RiwgJ00nLCAn4Y+PJyksCiAgICAoMHhBQkEwLCAnTScsICfhj5AnKSwKICAgICgweEFCQTEsICdNJywgJ+GPkScpLAogICAgKDB4QUJBMiwgJ00nLCAn4Y+SJyksCiAgICAoMHhBQkEzLCAnTScsICfhj5MnKSwKICAgICgweEFCQTQsICdNJywgJ+GPlCcpLAogICAgKDB4QUJBNSwgJ00nLCAn4Y+VJyksCiAgICAoMHhBQkE2LCAnTScsICfhj5YnKSwKICAgICgweEFCQTcsICdNJywgJ+GPlycpLAogICAgKDB4QUJBOCwgJ00nLCAn4Y+YJyksCiAgICAoMHhBQkE5LCAnTScsICfhj5knKSwKICAgICgweEFCQUEsICdNJywgJ+GPmicpLAogICAgXQoKZGVmIF9zZWdfMzkoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXToKICAgIHJldHVybiBbCiAgICAoMHhBQkFCLCAnTScsICfhj5snKSwKICAgICgweEFCQUMsICdNJywgJ+GPnCcpLAogICAgKDB4QUJBRCwgJ00nLCAn4Y+dJyksCiAgICAoMHhBQkFFLCAnTScsICfhj54nKSwKICAgICgweEFCQUYsICdNJywgJ+GPnycpLAogICAgKDB4QUJCMCwgJ00nLCAn4Y+gJyksCiAgICAoMHhBQkIxLCAnTScsICfhj6EnKSwKICAgICgweEFCQjIsICdNJywgJ+GPoicpLAogICAgKDB4QUJCMywgJ00nLCAn4Y+jJyksCiAgICAoMHhBQkI0LCAnTScsICfhj6QnKSwKICAgICgweEFCQjUsICdNJywgJ+GPpScpLAogICAgKDB4QUJCNiwgJ00nLCAn4Y+mJyksCiAgICAoMHhBQkI3LCAnTScsICfhj6cnKSwKICAgICgweEFCQjgsICdNJywgJ+GPqCcpLAogICAgKDB4QUJCOSwgJ00nLCAn4Y+pJyksCiAgICAoMHhBQkJBLCAnTScsICfhj6onKSwKICAgICgweEFCQkIsICdNJywgJ+GPqycpLAogICAgKDB4QUJCQywgJ00nLCAn4Y+sJyksCiAgICAoMHhBQkJELCAnTScsICfhj60nKSwKICAgICgweEFCQkUsICdNJywgJ+GPricpLAogICAgKDB4QUJCRiwgJ00nLCAn4Y+vJyksCiAgICAoMHhBQkMwLCAnVicpLAogICAgKDB4QUJFRSwgJ1gnKSwKICAgICgweEFCRjAsICdWJyksCiAgICAoMHhBQkZBLCAnWCcpLAogICAgKDB4QUMwMCwgJ1YnKSwKICAgICgweEQ3QTQsICdYJyksCiAgICAoMHhEN0IwLCAnVicpLAogICAgKDB4RDdDNywgJ1gnKSwKICAgICgweEQ3Q0IsICdWJyksCiAgICAoMHhEN0ZDLCAnWCcpLAogICAgKDB4RjkwMCwgJ00nLCAn6LGIJyksCiAgICAoMHhGOTAxLCAnTScsICfmm7QnKSwKICAgICgweEY5MDIsICdNJywgJ+i7iicpLAogICAgKDB4RjkwMywgJ00nLCAn6LOIJyksCiAgICAoMHhGOTA0LCAnTScsICfmu5EnKSwKICAgICgweEY5MDUsICdNJywgJ+S4sicpLAogICAgKDB4RjkwNiwgJ00nLCAn5Y+lJyksCiAgICAoMHhGOTA3LCAnTScsICfpvpwnKSwKICAgICgweEY5MDksICdNJywgJ+WlkScpLAogICAgKDB4RjkwQSwgJ00nLCAn6YeRJyksCiAgICAoMHhGOTBCLCAnTScsICfllocnKSwKICAgICgweEY5MEMsICdNJywgJ+WliCcpLAogICAgKDB4RjkwRCwgJ00nLCAn5oe2JyksCiAgICAoMHhGOTBFLCAnTScsICfnmaknKSwKICAgICgweEY5MEYsICdNJywgJ+e+hScpLAogICAgKDB4RjkxMCwgJ00nLCAn6Ji/JyksCiAgICAoMHhGOTExLCAnTScsICfonronKSwKICAgICgweEY5MTIsICdNJywgJ+ijuCcpLAogICAgKDB4RjkxMywgJ00nLCAn6YKPJyksCiAgICAoMHhGOTE0LCAnTScsICfmqIInKSwKICAgICgweEY5MTUsICdNJywgJ+a0mycpLAogICAgKDB4RjkxNiwgJ00nLCAn54OZJyksCiAgICAoMHhGOTE3LCAnTScsICfnj54nKSwKICAgICgweEY5MTgsICdNJywgJ+iQvScpLAogICAgKDB4RjkxOSwgJ00nLCAn6YWqJyksCiAgICAoMHhGOTFBLCAnTScsICfpp7EnKSwKICAgICgweEY5MUIsICdNJywgJ+S6gicpLAogICAgKDB4RjkxQywgJ00nLCAn5Y21JyksCiAgICAoMHhGOTFELCAnTScsICfmrIQnKSwKICAgICgweEY5MUUsICdNJywgJ+eImycpLAogICAgKDB4RjkxRiwgJ00nLCAn6JitJyksCiAgICAoMHhGOTIwLCAnTScsICfpuJ4nKSwKICAgICgweEY5MjEsICdNJywgJ+W1kCcpLAogICAgKDB4RjkyMiwgJ00nLCAn5r+rJyksCiAgICAoMHhGOTIzLCAnTScsICfol40nKSwKICAgICgweEY5MjQsICdNJywgJ+ilpCcpLAogICAgKDB4RjkyNSwgJ00nLCAn5ouJJyksCiAgICAoMHhGOTI2LCAnTScsICfoh5gnKSwKICAgICgweEY5MjcsICdNJywgJ+ignycpLAogICAgKDB4RjkyOCwgJ00nLCAn5buKJyksCiAgICAoMHhGOTI5LCAnTScsICfmnJcnKSwKICAgICgweEY5MkEsICdNJywgJ+a1qicpLAogICAgKDB4RjkyQiwgJ00nLCAn54u8JyksCiAgICAoMHhGOTJDLCAnTScsICfpg44nKSwKICAgICgweEY5MkQsICdNJywgJ+S+hicpLAogICAgKDB4RjkyRSwgJ00nLCAn5Ya3JyksCiAgICAoMHhGOTJGLCAnTScsICfli54nKSwKICAgICgweEY5MzAsICdNJywgJ+aThCcpLAogICAgKDB4RjkzMSwgJ00nLCAn5quTJyksCiAgICAoMHhGOTMyLCAnTScsICfniJAnKSwKICAgICgweEY5MzMsICdNJywgJ+ebpycpLAogICAgKDB4RjkzNCwgJ00nLCAn6ICBJyksCiAgICAoMHhGOTM1LCAnTScsICfomIYnKSwKICAgICgweEY5MzYsICdNJywgJ+iZnCcpLAogICAgKDB4RjkzNywgJ00nLCAn6LevJyksCiAgICAoMHhGOTM4LCAnTScsICfpnLInKSwKICAgICgweEY5MzksICdNJywgJ+mtrycpLAogICAgKDB4RjkzQSwgJ00nLCAn6be6JyksCiAgICAoMHhGOTNCLCAnTScsICfnoownKSwKICAgICgweEY5M0MsICdNJywgJ+elvycpLAogICAgKDB4RjkzRCwgJ00nLCAn57agJyksCiAgICAoMHhGOTNFLCAnTScsICfoj4knKSwKICAgICgweEY5M0YsICdNJywgJ+mMhCcpLAogICAgKDB4Rjk0MCwgJ00nLCAn6bm/JyksCiAgICAoMHhGOTQxLCAnTScsICfoq5YnKSwKICAgICgweEY5NDIsICdNJywgJ+WjnycpLAogICAgKDB4Rjk0MywgJ00nLCAn5byEJyksCiAgICAoMHhGOTQ0LCAnTScsICfnsaAnKSwKICAgICgweEY5NDUsICdNJywgJ+iBvicpLAogICAgXQoKZGVmIF9zZWdfNDAoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXToKICAgIHJldHVybiBbCiAgICAoMHhGOTQ2LCAnTScsICfniaInKSwKICAgICgweEY5NDcsICdNJywgJ+ejiicpLAogICAgKDB4Rjk0OCwgJ00nLCAn6LOCJyksCiAgICAoMHhGOTQ5LCAnTScsICfpm7cnKSwKICAgICgweEY5NEEsICdNJywgJ+WjmCcpLAogICAgKDB4Rjk0QiwgJ00nLCAn5bGiJyksCiAgICAoMHhGOTRDLCAnTScsICfmqJMnKSwKICAgICgweEY5NEQsICdNJywgJ+a3micpLAogICAgKDB4Rjk0RSwgJ00nLCAn5ryPJyksCiAgICAoMHhGOTRGLCAnTScsICfntK8nKSwKICAgICgweEY5NTAsICdNJywgJ+e4tycpLAogICAgKDB4Rjk1MSwgJ00nLCAn6ZmLJyksCiAgICAoMHhGOTUyLCAnTScsICfli5InKSwKICAgICgweEY5NTMsICdNJywgJ+iCiycpLAogICAgKDB4Rjk1NCwgJ00nLCAn5YecJyksCiAgICAoMHhGOTU1LCAnTScsICflh4wnKSwKICAgICgweEY5NTYsICdNJywgJ+eonCcpLAogICAgKDB4Rjk1NywgJ00nLCAn57a+JyksCiAgICAoMHhGOTU4LCAnTScsICfoj7EnKSwKICAgICgweEY5NTksICdNJywgJ+mZtScpLAogICAgKDB4Rjk1QSwgJ00nLCAn6K6AJyksCiAgICAoMHhGOTVCLCAnTScsICfmi48nKSwKICAgICgweEY5NUMsICdNJywgJ+aogicpLAogICAgKDB4Rjk1RCwgJ00nLCAn6Ku+JyksCiAgICAoMHhGOTVFLCAnTScsICfkuLknKSwKICAgICgweEY5NUYsICdNJywgJ+WvpycpLAogICAgKDB4Rjk2MCwgJ00nLCAn5oCSJyksCiAgICAoMHhGOTYxLCAnTScsICfnjocnKSwKICAgICgweEY5NjIsICdNJywgJ+eVsCcpLAogICAgKDB4Rjk2MywgJ00nLCAn5YyXJyksCiAgICAoMHhGOTY0LCAnTScsICfno7snKSwKICAgICgweEY5NjUsICdNJywgJ+S+vycpLAogICAgKDB4Rjk2NiwgJ00nLCAn5b6pJyksCiAgICAoMHhGOTY3LCAnTScsICfkuI0nKSwKICAgICgweEY5NjgsICdNJywgJ+azjCcpLAogICAgKDB4Rjk2OSwgJ00nLCAn5pW4JyksCiAgICAoMHhGOTZBLCAnTScsICfntKInKSwKICAgICgweEY5NkIsICdNJywgJ+WPgycpLAogICAgKDB4Rjk2QywgJ00nLCAn5aGeJyksCiAgICAoMHhGOTZELCAnTScsICfnnIEnKSwKICAgICgweEY5NkUsICdNJywgJ+iRiScpLAogICAgKDB4Rjk2RiwgJ00nLCAn6KqqJyksCiAgICAoMHhGOTcwLCAnTScsICfmrronKSwKICAgICgweEY5NzEsICdNJywgJ+i+sCcpLAogICAgKDB4Rjk3MiwgJ00nLCAn5rKIJyksCiAgICAoMHhGOTczLCAnTScsICfmi74nKSwKICAgICgweEY5NzQsICdNJywgJ+iLpScpLAogICAgKDB4Rjk3NSwgJ00nLCAn5o6gJyksCiAgICAoMHhGOTc2LCAnTScsICfnlaUnKSwKICAgICgweEY5NzcsICdNJywgJ+S6ricpLAogICAgKDB4Rjk3OCwgJ00nLCAn5YWpJyksCiAgICAoMHhGOTc5LCAnTScsICflh4knKSwKICAgICgweEY5N0EsICdNJywgJ+aigScpLAogICAgKDB4Rjk3QiwgJ00nLCAn57OnJyksCiAgICAoMHhGOTdDLCAnTScsICfoia8nKSwKICAgICgweEY5N0QsICdNJywgJ+irkicpLAogICAgKDB4Rjk3RSwgJ00nLCAn6YePJyksCiAgICAoMHhGOTdGLCAnTScsICfli7UnKSwKICAgICgweEY5ODAsICdNJywgJ+WRgicpLAogICAgKDB4Rjk4MSwgJ00nLCAn5aWzJyksCiAgICAoMHhGOTgyLCAnTScsICflu6wnKSwKICAgICgweEY5ODMsICdNJywgJ+aXhScpLAogICAgKDB4Rjk4NCwgJ00nLCAn5r++JyksCiAgICAoMHhGOTg1LCAnTScsICfnpKonKSwKICAgICgweEY5ODYsICdNJywgJ+mWrScpLAogICAgKDB4Rjk4NywgJ00nLCAn6amqJyksCiAgICAoMHhGOTg4LCAnTScsICfpupcnKSwKICAgICgweEY5ODksICdNJywgJ+m7jicpLAogICAgKDB4Rjk4QSwgJ00nLCAn5YqbJyksCiAgICAoMHhGOThCLCAnTScsICfmm4YnKSwKICAgICgweEY5OEMsICdNJywgJ+attycpLAogICAgKDB4Rjk4RCwgJ00nLCAn6L2iJyksCiAgICAoMHhGOThFLCAnTScsICflubQnKSwKICAgICgweEY5OEYsICdNJywgJ+aGkCcpLAogICAgKDB4Rjk5MCwgJ00nLCAn5oiAJyksCiAgICAoMHhGOTkxLCAnTScsICfmkponKSwKICAgICgweEY5OTIsICdNJywgJ+a8oycpLAogICAgKDB4Rjk5MywgJ00nLCAn54WJJyksCiAgICAoMHhGOTk0LCAnTScsICfnkoknKSwKICAgICgweEY5OTUsICdNJywgJ+eniicpLAogICAgKDB4Rjk5NiwgJ00nLCAn57e0JyksCiAgICAoMHhGOTk3LCAnTScsICfoga8nKSwKICAgICgweEY5OTgsICdNJywgJ+i8picpLAogICAgKDB4Rjk5OSwgJ00nLCAn6JOuJyksCiAgICAoMHhGOTlBLCAnTScsICfpgKMnKSwKICAgICgweEY5OUIsICdNJywgJ+mNiicpLAogICAgKDB4Rjk5QywgJ00nLCAn5YiXJyksCiAgICAoMHhGOTlELCAnTScsICfliqMnKSwKICAgICgweEY5OUUsICdNJywgJ+WSvScpLAogICAgKDB4Rjk5RiwgJ00nLCAn54OIJyksCiAgICAoMHhGOUEwLCAnTScsICfoo4InKSwKICAgICgweEY5QTEsICdNJywgJ+iqqicpLAogICAgKDB4RjlBMiwgJ00nLCAn5buJJyksCiAgICAoMHhGOUEzLCAnTScsICflv7UnKSwKICAgICgweEY5QTQsICdNJywgJ+aNuycpLAogICAgKDB4RjlBNSwgJ00nLCAn5q6uJyksCiAgICAoMHhGOUE2LCAnTScsICfnsL4nKSwKICAgICgweEY5QTcsICdNJywgJ+eNtScpLAogICAgKDB4RjlBOCwgJ00nLCAn5LukJyksCiAgICAoMHhGOUE5LCAnTScsICflm7knKSwKICAgIF0KCmRlZiBfc2VnXzQxKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4RjlBQSwgJ00nLCAn5a+nJyksCiAgICAoMHhGOUFCLCAnTScsICfltronKSwKICAgICgweEY5QUMsICdNJywgJ+aAnCcpLAogICAgKDB4RjlBRCwgJ00nLCAn546yJyksCiAgICAoMHhGOUFFLCAnTScsICfnkaknKSwKICAgICgweEY5QUYsICdNJywgJ+e+micpLAogICAgKDB4RjlCMCwgJ00nLCAn6IGGJyksCiAgICAoMHhGOUIxLCAnTScsICfpiLQnKSwKICAgICgweEY5QjIsICdNJywgJ+mbticpLAogICAgKDB4RjlCMywgJ00nLCAn6Z2IJyksCiAgICAoMHhGOUI0LCAnTScsICfpoJgnKSwKICAgICgweEY5QjUsICdNJywgJ+S+iycpLAogICAgKDB4RjlCNiwgJ00nLCAn56auJyksCiAgICAoMHhGOUI3LCAnTScsICfphrQnKSwKICAgICgweEY5QjgsICdNJywgJ+mauCcpLAogICAgKDB4RjlCOSwgJ00nLCAn5oOhJyksCiAgICAoMHhGOUJBLCAnTScsICfkuoYnKSwKICAgICgweEY5QkIsICdNJywgJ+WDmicpLAogICAgKDB4RjlCQywgJ00nLCAn5a+uJyksCiAgICAoMHhGOUJELCAnTScsICflsL8nKSwKICAgICgweEY5QkUsICdNJywgJ+aWmScpLAogICAgKDB4RjlCRiwgJ00nLCAn5qiCJyksCiAgICAoMHhGOUMwLCAnTScsICfnh44nKSwKICAgICgweEY5QzEsICdNJywgJ+eZgicpLAogICAgKDB4RjlDMiwgJ00nLCAn6JO8JyksCiAgICAoMHhGOUMzLCAnTScsICfpgbwnKSwKICAgICgweEY5QzQsICdNJywgJ+m+jScpLAogICAgKDB4RjlDNSwgJ00nLCAn5pqIJyksCiAgICAoMHhGOUM2LCAnTScsICfpmK4nKSwKICAgICgweEY5QzcsICdNJywgJ+WKiScpLAogICAgKDB4RjlDOCwgJ00nLCAn5p27JyksCiAgICAoMHhGOUM5LCAnTScsICfmn7MnKSwKICAgICgweEY5Q0EsICdNJywgJ+a1gScpLAogICAgKDB4RjlDQiwgJ00nLCAn5rqcJyksCiAgICAoMHhGOUNDLCAnTScsICfnkIknKSwKICAgICgweEY5Q0QsICdNJywgJ+eVmScpLAogICAgKDB4RjlDRSwgJ00nLCAn56GrJyksCiAgICAoMHhGOUNGLCAnTScsICfntJAnKSwKICAgICgweEY5RDAsICdNJywgJ+mhnicpLAogICAgKDB4RjlEMSwgJ00nLCAn5YWtJyksCiAgICAoMHhGOUQyLCAnTScsICfmiK4nKSwKICAgICgweEY5RDMsICdNJywgJ+mZuCcpLAogICAgKDB4RjlENCwgJ00nLCAn5YCrJyksCiAgICAoMHhGOUQ1LCAnTScsICfltJknKSwKICAgICgweEY5RDYsICdNJywgJ+a3qicpLAogICAgKDB4RjlENywgJ00nLCAn6LyqJyksCiAgICAoMHhGOUQ4LCAnTScsICflvosnKSwKICAgICgweEY5RDksICdNJywgJ+aFhCcpLAogICAgKDB4RjlEQSwgJ00nLCAn5qCXJyksCiAgICAoMHhGOURCLCAnTScsICfnjocnKSwKICAgICgweEY5REMsICdNJywgJ+mahicpLAogICAgKDB4RjlERCwgJ00nLCAn5YipJyksCiAgICAoMHhGOURFLCAnTScsICflkI8nKSwKICAgICgweEY5REYsICdNJywgJ+WxpScpLAogICAgKDB4RjlFMCwgJ00nLCAn5piTJyksCiAgICAoMHhGOUUxLCAnTScsICfmnY4nKSwKICAgICgweEY5RTIsICdNJywgJ+aiqCcpLAogICAgKDB4RjlFMywgJ00nLCAn5rOlJyksCiAgICAoMHhGOUU0LCAnTScsICfnkIYnKSwKICAgICgweEY5RTUsICdNJywgJ+eXoicpLAogICAgKDB4RjlFNiwgJ00nLCAn5725JyksCiAgICAoMHhGOUU3LCAnTScsICfoo48nKSwKICAgICgweEY5RTgsICdNJywgJ+ijoScpLAogICAgKDB4RjlFOSwgJ00nLCAn6YeMJyksCiAgICAoMHhGOUVBLCAnTScsICfpm6InKSwKICAgICgweEY5RUIsICdNJywgJ+WMvycpLAogICAgKDB4RjlFQywgJ00nLCAn5rq6JyksCiAgICAoMHhGOUVELCAnTScsICflkJ0nKSwKICAgICgweEY5RUUsICdNJywgJ+eHkCcpLAogICAgKDB4RjlFRiwgJ00nLCAn55KYJyksCiAgICAoMHhGOUYwLCAnTScsICfol7onKSwKICAgICgweEY5RjEsICdNJywgJ+maoycpLAogICAgKDB4RjlGMiwgJ00nLCAn6bGXJyksCiAgICAoMHhGOUYzLCAnTScsICfpup8nKSwKICAgICgweEY5RjQsICdNJywgJ+aelycpLAogICAgKDB4RjlGNSwgJ00nLCAn5reLJyksCiAgICAoMHhGOUY2LCAnTScsICfoh6gnKSwKICAgICgweEY5RjcsICdNJywgJ+eriycpLAogICAgKDB4RjlGOCwgJ00nLCAn56ygJyksCiAgICAoMHhGOUY5LCAnTScsICfnspInKSwKICAgICgweEY5RkEsICdNJywgJ+eLgCcpLAogICAgKDB4RjlGQiwgJ00nLCAn54KZJyksCiAgICAoMHhGOUZDLCAnTScsICforZgnKSwKICAgICgweEY5RkQsICdNJywgJ+S7gCcpLAogICAgKDB4RjlGRSwgJ00nLCAn6Iy2JyksCiAgICAoMHhGOUZGLCAnTScsICfliLonKSwKICAgICgweEZBMDAsICdNJywgJ+WIhycpLAogICAgKDB4RkEwMSwgJ00nLCAn5bqmJyksCiAgICAoMHhGQTAyLCAnTScsICfmi5MnKSwKICAgICgweEZBMDMsICdNJywgJ+ezlicpLAogICAgKDB4RkEwNCwgJ00nLCAn5a6FJyksCiAgICAoMHhGQTA1LCAnTScsICfmtJ4nKSwKICAgICgweEZBMDYsICdNJywgJ+aatCcpLAogICAgKDB4RkEwNywgJ00nLCAn6Ly7JyksCiAgICAoMHhGQTA4LCAnTScsICfooYwnKSwKICAgICgweEZBMDksICdNJywgJ+mZjScpLAogICAgKDB4RkEwQSwgJ00nLCAn6KaLJyksCiAgICAoMHhGQTBCLCAnTScsICflu5MnKSwKICAgICgweEZBMEMsICdNJywgJ+WFgCcpLAogICAgKDB4RkEwRCwgJ00nLCAn5ZeAJyksCiAgICBdCgpkZWYgX3NlZ180MigpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweEZBMEUsICdWJyksCiAgICAoMHhGQTEwLCAnTScsICfloZonKSwKICAgICgweEZBMTEsICdWJyksCiAgICAoMHhGQTEyLCAnTScsICfmmbQnKSwKICAgICgweEZBMTMsICdWJyksCiAgICAoMHhGQTE1LCAnTScsICflh54nKSwKICAgICgweEZBMTYsICdNJywgJ+eMqicpLAogICAgKDB4RkExNywgJ00nLCAn55uKJyksCiAgICAoMHhGQTE4LCAnTScsICfnpLwnKSwKICAgICgweEZBMTksICdNJywgJ+elnicpLAogICAgKDB4RkExQSwgJ00nLCAn56WlJyksCiAgICAoMHhGQTFCLCAnTScsICfnpo8nKSwKICAgICgweEZBMUMsICdNJywgJ+mdlicpLAogICAgKDB4RkExRCwgJ00nLCAn57K+JyksCiAgICAoMHhGQTFFLCAnTScsICfnvr0nKSwKICAgICgweEZBMUYsICdWJyksCiAgICAoMHhGQTIwLCAnTScsICfomJInKSwKICAgICgweEZBMjEsICdWJyksCiAgICAoMHhGQTIyLCAnTScsICfoq7gnKSwKICAgICgweEZBMjMsICdWJyksCiAgICAoMHhGQTI1LCAnTScsICfpgLgnKSwKICAgICgweEZBMjYsICdNJywgJ+mDvScpLAogICAgKDB4RkEyNywgJ1YnKSwKICAgICgweEZBMkEsICdNJywgJ+mjrycpLAogICAgKDB4RkEyQiwgJ00nLCAn6aO8JyksCiAgICAoMHhGQTJDLCAnTScsICfppKgnKSwKICAgICgweEZBMkQsICdNJywgJ+m2tCcpLAogICAgKDB4RkEyRSwgJ00nLCAn6YOeJyksCiAgICAoMHhGQTJGLCAnTScsICfpmrcnKSwKICAgICgweEZBMzAsICdNJywgJ+S+ricpLAogICAgKDB4RkEzMSwgJ00nLCAn5YOnJyksCiAgICAoMHhGQTMyLCAnTScsICflhY0nKSwKICAgICgweEZBMzMsICdNJywgJ+WLiScpLAogICAgKDB4RkEzNCwgJ00nLCAn5YukJyksCiAgICAoMHhGQTM1LCAnTScsICfljZEnKSwKICAgICgweEZBMzYsICdNJywgJ+WWnScpLAogICAgKDB4RkEzNywgJ00nLCAn5ZiGJyksCiAgICAoMHhGQTM4LCAnTScsICflmagnKSwKICAgICgweEZBMzksICdNJywgJ+WhgCcpLAogICAgKDB4RkEzQSwgJ00nLCAn5aKoJyksCiAgICAoMHhGQTNCLCAnTScsICflsaQnKSwKICAgICgweEZBM0MsICdNJywgJ+WxricpLAogICAgKDB4RkEzRCwgJ00nLCAn5oKUJyksCiAgICAoMHhGQTNFLCAnTScsICfmhagnKSwKICAgICgweEZBM0YsICdNJywgJ+aGjicpLAogICAgKDB4RkE0MCwgJ00nLCAn5oeyJyksCiAgICAoMHhGQTQxLCAnTScsICfmlY8nKSwKICAgICgweEZBNDIsICdNJywgJ+aXoicpLAogICAgKDB4RkE0MywgJ00nLCAn5pqRJyksCiAgICAoMHhGQTQ0LCAnTScsICfmooUnKSwKICAgICgweEZBNDUsICdNJywgJ+a1tycpLAogICAgKDB4RkE0NiwgJ00nLCAn5riaJyksCiAgICAoMHhGQTQ3LCAnTScsICfmvKInKSwKICAgICgweEZBNDgsICdNJywgJ+eFricpLAogICAgKDB4RkE0OSwgJ00nLCAn54irJyksCiAgICAoMHhGQTRBLCAnTScsICfnkKInKSwKICAgICgweEZBNEIsICdNJywgJ+eikScpLAogICAgKDB4RkE0QywgJ00nLCAn56S+JyksCiAgICAoMHhGQTRELCAnTScsICfnpYknKSwKICAgICgweEZBNEUsICdNJywgJ+eliCcpLAogICAgKDB4RkE0RiwgJ00nLCAn56WQJyksCiAgICAoMHhGQTUwLCAnTScsICfnpZYnKSwKICAgICgweEZBNTEsICdNJywgJ+elnScpLAogICAgKDB4RkE1MiwgJ00nLCAn56aNJyksCiAgICAoMHhGQTUzLCAnTScsICfnpo4nKSwKICAgICgweEZBNTQsICdNJywgJ+epgCcpLAogICAgKDB4RkE1NSwgJ00nLCAn56qBJyksCiAgICAoMHhGQTU2LCAnTScsICfnr4AnKSwKICAgICgweEZBNTcsICdNJywgJ+e3tCcpLAogICAgKDB4RkE1OCwgJ00nLCAn57iJJyksCiAgICAoMHhGQTU5LCAnTScsICfnuYEnKSwKICAgICgweEZBNUEsICdNJywgJ+e9sicpLAogICAgKDB4RkE1QiwgJ00nLCAn6ICFJyksCiAgICAoMHhGQTVDLCAnTScsICfoh60nKSwKICAgICgweEZBNUQsICdNJywgJ+iJuScpLAogICAgKDB4RkE1RiwgJ00nLCAn6JGXJyksCiAgICAoMHhGQTYwLCAnTScsICfopJAnKSwKICAgICgweEZBNjEsICdNJywgJ+imlicpLAogICAgKDB4RkE2MiwgJ00nLCAn6KyBJyksCiAgICAoMHhGQTYzLCAnTScsICforLknKSwKICAgICgweEZBNjQsICdNJywgJ+izkycpLAogICAgKDB4RkE2NSwgJ00nLCAn6LSIJyksCiAgICAoMHhGQTY2LCAnTScsICfovrYnKSwKICAgICgweEZBNjcsICdNJywgJ+mAuCcpLAogICAgKDB4RkE2OCwgJ00nLCAn6ZujJyksCiAgICAoMHhGQTY5LCAnTScsICfpn78nKSwKICAgICgweEZBNkEsICdNJywgJ+mguycpLAogICAgKDB4RkE2QiwgJ00nLCAn5oG1JyksCiAgICAoMHhGQTZDLCAnTScsICfwpIuuJyksCiAgICAoMHhGQTZELCAnTScsICfoiJgnKSwKICAgICgweEZBNkUsICdYJyksCiAgICAoMHhGQTcwLCAnTScsICfkuKYnKSwKICAgICgweEZBNzEsICdNJywgJ+WGtScpLAogICAgKDB4RkE3MiwgJ00nLCAn5YWoJyksCiAgICAoMHhGQTczLCAnTScsICfkvoAnKSwKICAgICgweEZBNzQsICdNJywgJ+WFhScpLAogICAgKDB4RkE3NSwgJ00nLCAn5YaAJyksCiAgICAoMHhGQTc2LCAnTScsICfli4cnKSwKICAgICgweEZBNzcsICdNJywgJ+WLuicpLAogICAgKDB4RkE3OCwgJ00nLCAn5ZadJyksCiAgICBdCgpkZWYgX3NlZ180MygpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweEZBNzksICdNJywgJ+WVlScpLAogICAgKDB4RkE3QSwgJ00nLCAn5ZaZJyksCiAgICAoMHhGQTdCLCAnTScsICfll6InKSwKICAgICgweEZBN0MsICdNJywgJ+WhmicpLAogICAgKDB4RkE3RCwgJ00nLCAn5aKzJyksCiAgICAoMHhGQTdFLCAnTScsICflpYQnKSwKICAgICgweEZBN0YsICdNJywgJ+WllCcpLAogICAgKDB4RkE4MCwgJ00nLCAn5amiJyksCiAgICAoMHhGQTgxLCAnTScsICflrKgnKSwKICAgICgweEZBODIsICdNJywgJ+W7kicpLAogICAgKDB4RkE4MywgJ00nLCAn5buZJyksCiAgICAoMHhGQTg0LCAnTScsICflvaknKSwKICAgICgweEZBODUsICdNJywgJ+W+rScpLAogICAgKDB4RkE4NiwgJ00nLCAn5oOYJyksCiAgICAoMHhGQTg3LCAnTScsICfmhY4nKSwKICAgICgweEZBODgsICdNJywgJ+aEiCcpLAogICAgKDB4RkE4OSwgJ00nLCAn5oaOJyksCiAgICAoMHhGQThBLCAnTScsICfmhaAnKSwKICAgICgweEZBOEIsICdNJywgJ+aHsicpLAogICAgKDB4RkE4QywgJ00nLCAn5oi0JyksCiAgICAoMHhGQThELCAnTScsICfmj4QnKSwKICAgICgweEZBOEUsICdNJywgJ+aQnCcpLAogICAgKDB4RkE4RiwgJ00nLCAn5pGSJyksCiAgICAoMHhGQTkwLCAnTScsICfmlZYnKSwKICAgICgweEZBOTEsICdNJywgJ+aZtCcpLAogICAgKDB4RkE5MiwgJ00nLCAn5pyXJyksCiAgICAoMHhGQTkzLCAnTScsICfmnJsnKSwKICAgICgweEZBOTQsICdNJywgJ+adlicpLAogICAgKDB4RkE5NSwgJ00nLCAn5q25JyksCiAgICAoMHhGQTk2LCAnTScsICfmrronKSwKICAgICgweEZBOTcsICdNJywgJ+a1gScpLAogICAgKDB4RkE5OCwgJ00nLCAn5rubJyksCiAgICAoMHhGQTk5LCAnTScsICfmu4snKSwKICAgICgweEZBOUEsICdNJywgJ+a8oicpLAogICAgKDB4RkE5QiwgJ00nLCAn54CeJyksCiAgICAoMHhGQTlDLCAnTScsICfnha4nKSwKICAgICgweEZBOUQsICdNJywgJ+eepycpLAogICAgKDB4RkE5RSwgJ00nLCAn54i1JyksCiAgICAoMHhGQTlGLCAnTScsICfniq8nKSwKICAgICgweEZBQTAsICdNJywgJ+eMqicpLAogICAgKDB4RkFBMSwgJ00nLCAn55GxJyksCiAgICAoMHhGQUEyLCAnTScsICfnlIYnKSwKICAgICgweEZBQTMsICdNJywgJ+eUuycpLAogICAgKDB4RkFBNCwgJ00nLCAn55idJyksCiAgICAoMHhGQUE1LCAnTScsICfnmJ8nKSwKICAgICgweEZBQTYsICdNJywgJ+ebiicpLAogICAgKDB4RkFBNywgJ00nLCAn55ubJyksCiAgICAoMHhGQUE4LCAnTScsICfnm7QnKSwKICAgICgweEZBQTksICdNJywgJ+ediicpLAogICAgKDB4RkFBQSwgJ00nLCAn552AJyksCiAgICAoMHhGQUFCLCAnTScsICfno4wnKSwKICAgICgweEZBQUMsICdNJywgJ+eqsScpLAogICAgKDB4RkFBRCwgJ00nLCAn56+AJyksCiAgICAoMHhGQUFFLCAnTScsICfnsbsnKSwKICAgICgweEZBQUYsICdNJywgJ+e1mycpLAogICAgKDB4RkFCMCwgJ00nLCAn57e0JyksCiAgICAoMHhGQUIxLCAnTScsICfnvL4nKSwKICAgICgweEZBQjIsICdNJywgJ+iAhScpLAogICAgKDB4RkFCMywgJ00nLCAn6I2SJyksCiAgICAoMHhGQUI0LCAnTScsICfoj68nKSwKICAgICgweEZBQjUsICdNJywgJ+iduScpLAogICAgKDB4RkFCNiwgJ00nLCAn6KWBJyksCiAgICAoMHhGQUI3LCAnTScsICfopoYnKSwKICAgICgweEZBQjgsICdNJywgJ+imlicpLAogICAgKDB4RkFCOSwgJ00nLCAn6Kq/JyksCiAgICAoMHhGQUJBLCAnTScsICfoq7gnKSwKICAgICgweEZBQkIsICdNJywgJ+iriycpLAogICAgKDB4RkFCQywgJ00nLCAn6KyBJyksCiAgICAoMHhGQUJELCAnTScsICfoq74nKSwKICAgICgweEZBQkUsICdNJywgJ+irrScpLAogICAgKDB4RkFCRiwgJ00nLCAn6Ky5JyksCiAgICAoMHhGQUMwLCAnTScsICforoonKSwKICAgICgweEZBQzEsICdNJywgJ+i0iCcpLAogICAgKDB4RkFDMiwgJ00nLCAn6Ly4JyksCiAgICAoMHhGQUMzLCAnTScsICfpgbInKSwKICAgICgweEZBQzQsICdNJywgJ+mGmScpLAogICAgKDB4RkFDNSwgJ00nLCAn6Ym2JyksCiAgICAoMHhGQUM2LCAnTScsICfpmbwnKSwKICAgICgweEZBQzcsICdNJywgJ+mboycpLAogICAgKDB4RkFDOCwgJ00nLCAn6Z2WJyksCiAgICAoMHhGQUM5LCAnTScsICfpn5snKSwKICAgICgweEZBQ0EsICdNJywgJ+mfvycpLAogICAgKDB4RkFDQiwgJ00nLCAn6aCLJyksCiAgICAoMHhGQUNDLCAnTScsICfpoLsnKSwKICAgICgweEZBQ0QsICdNJywgJ+mskicpLAogICAgKDB4RkFDRSwgJ00nLCAn6b6cJyksCiAgICAoMHhGQUNGLCAnTScsICfwoqGKJyksCiAgICAoMHhGQUQwLCAnTScsICfwoqGEJyksCiAgICAoMHhGQUQxLCAnTScsICfwo4+VJyksCiAgICAoMHhGQUQyLCAnTScsICfjrp0nKSwKICAgICgweEZBRDMsICdNJywgJ+SAmCcpLAogICAgKDB4RkFENCwgJ00nLCAn5IC5JyksCiAgICAoMHhGQUQ1LCAnTScsICfwpYmJJyksCiAgICAoMHhGQUQ2LCAnTScsICfwpbOQJyksCiAgICAoMHhGQUQ3LCAnTScsICfwp7uTJyksCiAgICAoMHhGQUQ4LCAnTScsICfpvYMnKSwKICAgICgweEZBRDksICdNJywgJ+m+jicpLAogICAgKDB4RkFEQSwgJ1gnKSwKICAgICgweEZCMDAsICdNJywgJ2ZmJyksCiAgICAoMHhGQjAxLCAnTScsICdmaScpLAogICAgXQoKZGVmIF9zZWdfNDQoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXToKICAgIHJldHVybiBbCiAgICAoMHhGQjAyLCAnTScsICdmbCcpLAogICAgKDB4RkIwMywgJ00nLCAnZmZpJyksCiAgICAoMHhGQjA0LCAnTScsICdmZmwnKSwKICAgICgweEZCMDUsICdNJywgJ3N0JyksCiAgICAoMHhGQjA3LCAnWCcpLAogICAgKDB4RkIxMywgJ00nLCAn1bTVticpLAogICAgKDB4RkIxNCwgJ00nLCAn1bTVpScpLAogICAgKDB4RkIxNSwgJ00nLCAn1bTVqycpLAogICAgKDB4RkIxNiwgJ00nLCAn1b7VticpLAogICAgKDB4RkIxNywgJ00nLCAn1bTVrScpLAogICAgKDB4RkIxOCwgJ1gnKSwKICAgICgweEZCMUQsICdNJywgJ9eZ1rQnKSwKICAgICgweEZCMUUsICdWJyksCiAgICAoMHhGQjFGLCAnTScsICfXsta3JyksCiAgICAoMHhGQjIwLCAnTScsICfXoicpLAogICAgKDB4RkIyMSwgJ00nLCAn15AnKSwKICAgICgweEZCMjIsICdNJywgJ9eTJyksCiAgICAoMHhGQjIzLCAnTScsICfXlCcpLAogICAgKDB4RkIyNCwgJ00nLCAn15snKSwKICAgICgweEZCMjUsICdNJywgJ9ecJyksCiAgICAoMHhGQjI2LCAnTScsICfXnScpLAogICAgKDB4RkIyNywgJ00nLCAn16gnKSwKICAgICgweEZCMjgsICdNJywgJ9eqJyksCiAgICAoMHhGQjI5LCAnMycsICcrJyksCiAgICAoMHhGQjJBLCAnTScsICfXqdeBJyksCiAgICAoMHhGQjJCLCAnTScsICfXqdeCJyksCiAgICAoMHhGQjJDLCAnTScsICfXqda814EnKSwKICAgICgweEZCMkQsICdNJywgJ9ep1rzXgicpLAogICAgKDB4RkIyRSwgJ00nLCAn15DWtycpLAogICAgKDB4RkIyRiwgJ00nLCAn15DWuCcpLAogICAgKDB4RkIzMCwgJ00nLCAn15DWvCcpLAogICAgKDB4RkIzMSwgJ00nLCAn15HWvCcpLAogICAgKDB4RkIzMiwgJ00nLCAn15LWvCcpLAogICAgKDB4RkIzMywgJ00nLCAn15PWvCcpLAogICAgKDB4RkIzNCwgJ00nLCAn15TWvCcpLAogICAgKDB4RkIzNSwgJ00nLCAn15XWvCcpLAogICAgKDB4RkIzNiwgJ00nLCAn15bWvCcpLAogICAgKDB4RkIzNywgJ1gnKSwKICAgICgweEZCMzgsICdNJywgJ9eY1rwnKSwKICAgICgweEZCMzksICdNJywgJ9eZ1rwnKSwKICAgICgweEZCM0EsICdNJywgJ9ea1rwnKSwKICAgICgweEZCM0IsICdNJywgJ9eb1rwnKSwKICAgICgweEZCM0MsICdNJywgJ9ec1rwnKSwKICAgICgweEZCM0QsICdYJyksCiAgICAoMHhGQjNFLCAnTScsICfXnta8JyksCiAgICAoMHhGQjNGLCAnWCcpLAogICAgKDB4RkI0MCwgJ00nLCAn16DWvCcpLAogICAgKDB4RkI0MSwgJ00nLCAn16HWvCcpLAogICAgKDB4RkI0MiwgJ1gnKSwKICAgICgweEZCNDMsICdNJywgJ9ej1rwnKSwKICAgICgweEZCNDQsICdNJywgJ9ek1rwnKSwKICAgICgweEZCNDUsICdYJyksCiAgICAoMHhGQjQ2LCAnTScsICfXpta8JyksCiAgICAoMHhGQjQ3LCAnTScsICfXp9a8JyksCiAgICAoMHhGQjQ4LCAnTScsICfXqNa8JyksCiAgICAoMHhGQjQ5LCAnTScsICfXqda8JyksCiAgICAoMHhGQjRBLCAnTScsICfXqta8JyksCiAgICAoMHhGQjRCLCAnTScsICfXlda5JyksCiAgICAoMHhGQjRDLCAnTScsICfXkda/JyksCiAgICAoMHhGQjRELCAnTScsICfXm9a/JyksCiAgICAoMHhGQjRFLCAnTScsICfXpNa/JyksCiAgICAoMHhGQjRGLCAnTScsICfXkNecJyksCiAgICAoMHhGQjUwLCAnTScsICfZsScpLAogICAgKDB4RkI1MiwgJ00nLCAn2bsnKSwKICAgICgweEZCNTYsICdNJywgJ9m+JyksCiAgICAoMHhGQjVBLCAnTScsICfagCcpLAogICAgKDB4RkI1RSwgJ00nLCAn2bonKSwKICAgICgweEZCNjIsICdNJywgJ9m/JyksCiAgICAoMHhGQjY2LCAnTScsICfZuScpLAogICAgKDB4RkI2QSwgJ00nLCAn2qQnKSwKICAgICgweEZCNkUsICdNJywgJ9qmJyksCiAgICAoMHhGQjcyLCAnTScsICfahCcpLAogICAgKDB4RkI3NiwgJ00nLCAn2oMnKSwKICAgICgweEZCN0EsICdNJywgJ9qGJyksCiAgICAoMHhGQjdFLCAnTScsICfahycpLAogICAgKDB4RkI4MiwgJ00nLCAn2o0nKSwKICAgICgweEZCODQsICdNJywgJ9qMJyksCiAgICAoMHhGQjg2LCAnTScsICfajicpLAogICAgKDB4RkI4OCwgJ00nLCAn2ognKSwKICAgICgweEZCOEEsICdNJywgJ9qYJyksCiAgICAoMHhGQjhDLCAnTScsICfakScpLAogICAgKDB4RkI4RSwgJ00nLCAn2qknKSwKICAgICgweEZCOTIsICdNJywgJ9qvJyksCiAgICAoMHhGQjk2LCAnTScsICfasycpLAogICAgKDB4RkI5QSwgJ00nLCAn2rEnKSwKICAgICgweEZCOUUsICdNJywgJ9q6JyksCiAgICAoMHhGQkEwLCAnTScsICfauycpLAogICAgKDB4RkJBNCwgJ00nLCAn24AnKSwKICAgICgweEZCQTYsICdNJywgJ9uBJyksCiAgICAoMHhGQkFBLCAnTScsICfavicpLAogICAgKDB4RkJBRSwgJ00nLCAn25InKSwKICAgICgweEZCQjAsICdNJywgJ9uTJyksCiAgICAoMHhGQkIyLCAnVicpLAogICAgKDB4RkJDMywgJ1gnKSwKICAgICgweEZCRDMsICdNJywgJ9qtJyksCiAgICAoMHhGQkQ3LCAnTScsICfbhycpLAogICAgKDB4RkJEOSwgJ00nLCAn24YnKSwKICAgICgweEZCREIsICdNJywgJ9uIJyksCiAgICAoMHhGQkRELCAnTScsICfbh9m0JyksCiAgICAoMHhGQkRFLCAnTScsICfbiycpLAogICAgXQoKZGVmIF9zZWdfNDUoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXToKICAgIHJldHVybiBbCiAgICAoMHhGQkUwLCAnTScsICfbhScpLAogICAgKDB4RkJFMiwgJ00nLCAn24knKSwKICAgICgweEZCRTQsICdNJywgJ9uQJyksCiAgICAoMHhGQkU4LCAnTScsICfZiScpLAogICAgKDB4RkJFQSwgJ00nLCAn2KbYpycpLAogICAgKDB4RkJFQywgJ00nLCAn2KbblScpLAogICAgKDB4RkJFRSwgJ00nLCAn2KbZiCcpLAogICAgKDB4RkJGMCwgJ00nLCAn2KbbhycpLAogICAgKDB4RkJGMiwgJ00nLCAn2KbbhicpLAogICAgKDB4RkJGNCwgJ00nLCAn2KbbiCcpLAogICAgKDB4RkJGNiwgJ00nLCAn2KbbkCcpLAogICAgKDB4RkJGOSwgJ00nLCAn2KbZiScpLAogICAgKDB4RkJGQywgJ00nLCAn24wnKSwKICAgICgweEZDMDAsICdNJywgJ9im2KwnKSwKICAgICgweEZDMDEsICdNJywgJ9im2K0nKSwKICAgICgweEZDMDIsICdNJywgJ9im2YUnKSwKICAgICgweEZDMDMsICdNJywgJ9im2YknKSwKICAgICgweEZDMDQsICdNJywgJ9im2YonKSwKICAgICgweEZDMDUsICdNJywgJ9io2KwnKSwKICAgICgweEZDMDYsICdNJywgJ9io2K0nKSwKICAgICgweEZDMDcsICdNJywgJ9io2K4nKSwKICAgICgweEZDMDgsICdNJywgJ9io2YUnKSwKICAgICgweEZDMDksICdNJywgJ9io2YknKSwKICAgICgweEZDMEEsICdNJywgJ9io2YonKSwKICAgICgweEZDMEIsICdNJywgJ9iq2KwnKSwKICAgICgweEZDMEMsICdNJywgJ9iq2K0nKSwKICAgICgweEZDMEQsICdNJywgJ9iq2K4nKSwKICAgICgweEZDMEUsICdNJywgJ9iq2YUnKSwKICAgICgweEZDMEYsICdNJywgJ9iq2YknKSwKICAgICgweEZDMTAsICdNJywgJ9iq2YonKSwKICAgICgweEZDMTEsICdNJywgJ9ir2KwnKSwKICAgICgweEZDMTIsICdNJywgJ9ir2YUnKSwKICAgICgweEZDMTMsICdNJywgJ9ir2YknKSwKICAgICgweEZDMTQsICdNJywgJ9ir2YonKSwKICAgICgweEZDMTUsICdNJywgJ9is2K0nKSwKICAgICgweEZDMTYsICdNJywgJ9is2YUnKSwKICAgICgweEZDMTcsICdNJywgJ9it2KwnKSwKICAgICgweEZDMTgsICdNJywgJ9it2YUnKSwKICAgICgweEZDMTksICdNJywgJ9iu2KwnKSwKICAgICgweEZDMUEsICdNJywgJ9iu2K0nKSwKICAgICgweEZDMUIsICdNJywgJ9iu2YUnKSwKICAgICgweEZDMUMsICdNJywgJ9iz2KwnKSwKICAgICgweEZDMUQsICdNJywgJ9iz2K0nKSwKICAgICgweEZDMUUsICdNJywgJ9iz2K4nKSwKICAgICgweEZDMUYsICdNJywgJ9iz2YUnKSwKICAgICgweEZDMjAsICdNJywgJ9i12K0nKSwKICAgICgweEZDMjEsICdNJywgJ9i12YUnKSwKICAgICgweEZDMjIsICdNJywgJ9i22KwnKSwKICAgICgweEZDMjMsICdNJywgJ9i22K0nKSwKICAgICgweEZDMjQsICdNJywgJ9i22K4nKSwKICAgICgweEZDMjUsICdNJywgJ9i22YUnKSwKICAgICgweEZDMjYsICdNJywgJ9i32K0nKSwKICAgICgweEZDMjcsICdNJywgJ9i32YUnKSwKICAgICgweEZDMjgsICdNJywgJ9i42YUnKSwKICAgICgweEZDMjksICdNJywgJ9i52KwnKSwKICAgICgweEZDMkEsICdNJywgJ9i52YUnKSwKICAgICgweEZDMkIsICdNJywgJ9i62KwnKSwKICAgICgweEZDMkMsICdNJywgJ9i62YUnKSwKICAgICgweEZDMkQsICdNJywgJ9mB2KwnKSwKICAgICgweEZDMkUsICdNJywgJ9mB2K0nKSwKICAgICgweEZDMkYsICdNJywgJ9mB2K4nKSwKICAgICgweEZDMzAsICdNJywgJ9mB2YUnKSwKICAgICgweEZDMzEsICdNJywgJ9mB2YknKSwKICAgICgweEZDMzIsICdNJywgJ9mB2YonKSwKICAgICgweEZDMzMsICdNJywgJ9mC2K0nKSwKICAgICgweEZDMzQsICdNJywgJ9mC2YUnKSwKICAgICgweEZDMzUsICdNJywgJ9mC2YknKSwKICAgICgweEZDMzYsICdNJywgJ9mC2YonKSwKICAgICgweEZDMzcsICdNJywgJ9mD2KcnKSwKICAgICgweEZDMzgsICdNJywgJ9mD2KwnKSwKICAgICgweEZDMzksICdNJywgJ9mD2K0nKSwKICAgICgweEZDM0EsICdNJywgJ9mD2K4nKSwKICAgICgweEZDM0IsICdNJywgJ9mD2YQnKSwKICAgICgweEZDM0MsICdNJywgJ9mD2YUnKSwKICAgICgweEZDM0QsICdNJywgJ9mD2YknKSwKICAgICgweEZDM0UsICdNJywgJ9mD2YonKSwKICAgICgweEZDM0YsICdNJywgJ9mE2KwnKSwKICAgICgweEZDNDAsICdNJywgJ9mE2K0nKSwKICAgICgweEZDNDEsICdNJywgJ9mE2K4nKSwKICAgICgweEZDNDIsICdNJywgJ9mE2YUnKSwKICAgICgweEZDNDMsICdNJywgJ9mE2YknKSwKICAgICgweEZDNDQsICdNJywgJ9mE2YonKSwKICAgICgweEZDNDUsICdNJywgJ9mF2KwnKSwKICAgICgweEZDNDYsICdNJywgJ9mF2K0nKSwKICAgICgweEZDNDcsICdNJywgJ9mF2K4nKSwKICAgICgweEZDNDgsICdNJywgJ9mF2YUnKSwKICAgICgweEZDNDksICdNJywgJ9mF2YknKSwKICAgICgweEZDNEEsICdNJywgJ9mF2YonKSwKICAgICgweEZDNEIsICdNJywgJ9mG2KwnKSwKICAgICgweEZDNEMsICdNJywgJ9mG2K0nKSwKICAgICgweEZDNEQsICdNJywgJ9mG2K4nKSwKICAgICgweEZDNEUsICdNJywgJ9mG2YUnKSwKICAgICgweEZDNEYsICdNJywgJ9mG2YknKSwKICAgICgweEZDNTAsICdNJywgJ9mG2YonKSwKICAgICgweEZDNTEsICdNJywgJ9mH2KwnKSwKICAgICgweEZDNTIsICdNJywgJ9mH2YUnKSwKICAgICgweEZDNTMsICdNJywgJ9mH2YknKSwKICAgICgweEZDNTQsICdNJywgJ9mH2YonKSwKICAgICgweEZDNTUsICdNJywgJ9mK2KwnKSwKICAgICgweEZDNTYsICdNJywgJ9mK2K0nKSwKICAgIF0KCmRlZiBfc2VnXzQ2KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4RkM1NywgJ00nLCAn2YrYricpLAogICAgKDB4RkM1OCwgJ00nLCAn2YrZhScpLAogICAgKDB4RkM1OSwgJ00nLCAn2YrZiScpLAogICAgKDB4RkM1QSwgJ00nLCAn2YrZiicpLAogICAgKDB4RkM1QiwgJ00nLCAn2LDZsCcpLAogICAgKDB4RkM1QywgJ00nLCAn2LHZsCcpLAogICAgKDB4RkM1RCwgJ00nLCAn2YnZsCcpLAogICAgKDB4RkM1RSwgJzMnLCAnINmM2ZEnKSwKICAgICgweEZDNUYsICczJywgJyDZjdmRJyksCiAgICAoMHhGQzYwLCAnMycsICcg2Y7ZkScpLAogICAgKDB4RkM2MSwgJzMnLCAnINmP2ZEnKSwKICAgICgweEZDNjIsICczJywgJyDZkNmRJyksCiAgICAoMHhGQzYzLCAnMycsICcg2ZHZsCcpLAogICAgKDB4RkM2NCwgJ00nLCAn2KbYsScpLAogICAgKDB4RkM2NSwgJ00nLCAn2KbYsicpLAogICAgKDB4RkM2NiwgJ00nLCAn2KbZhScpLAogICAgKDB4RkM2NywgJ00nLCAn2KbZhicpLAogICAgKDB4RkM2OCwgJ00nLCAn2KbZiScpLAogICAgKDB4RkM2OSwgJ00nLCAn2KbZiicpLAogICAgKDB4RkM2QSwgJ00nLCAn2KjYsScpLAogICAgKDB4RkM2QiwgJ00nLCAn2KjYsicpLAogICAgKDB4RkM2QywgJ00nLCAn2KjZhScpLAogICAgKDB4RkM2RCwgJ00nLCAn2KjZhicpLAogICAgKDB4RkM2RSwgJ00nLCAn2KjZiScpLAogICAgKDB4RkM2RiwgJ00nLCAn2KjZiicpLAogICAgKDB4RkM3MCwgJ00nLCAn2KrYsScpLAogICAgKDB4RkM3MSwgJ00nLCAn2KrYsicpLAogICAgKDB4RkM3MiwgJ00nLCAn2KrZhScpLAogICAgKDB4RkM3MywgJ00nLCAn2KrZhicpLAogICAgKDB4RkM3NCwgJ00nLCAn2KrZiScpLAogICAgKDB4RkM3NSwgJ00nLCAn2KrZiicpLAogICAgKDB4RkM3NiwgJ00nLCAn2KvYsScpLAogICAgKDB4RkM3NywgJ00nLCAn2KvYsicpLAogICAgKDB4RkM3OCwgJ00nLCAn2KvZhScpLAogICAgKDB4RkM3OSwgJ00nLCAn2KvZhicpLAogICAgKDB4RkM3QSwgJ00nLCAn2KvZiScpLAogICAgKDB4RkM3QiwgJ00nLCAn2KvZiicpLAogICAgKDB4RkM3QywgJ00nLCAn2YHZiScpLAogICAgKDB4RkM3RCwgJ00nLCAn2YHZiicpLAogICAgKDB4RkM3RSwgJ00nLCAn2YLZiScpLAogICAgKDB4RkM3RiwgJ00nLCAn2YLZiicpLAogICAgKDB4RkM4MCwgJ00nLCAn2YPYpycpLAogICAgKDB4RkM4MSwgJ00nLCAn2YPZhCcpLAogICAgKDB4RkM4MiwgJ00nLCAn2YPZhScpLAogICAgKDB4RkM4MywgJ00nLCAn2YPZiScpLAogICAgKDB4RkM4NCwgJ00nLCAn2YPZiicpLAogICAgKDB4RkM4NSwgJ00nLCAn2YTZhScpLAogICAgKDB4RkM4NiwgJ00nLCAn2YTZiScpLAogICAgKDB4RkM4NywgJ00nLCAn2YTZiicpLAogICAgKDB4RkM4OCwgJ00nLCAn2YXYpycpLAogICAgKDB4RkM4OSwgJ00nLCAn2YXZhScpLAogICAgKDB4RkM4QSwgJ00nLCAn2YbYsScpLAogICAgKDB4RkM4QiwgJ00nLCAn2YbYsicpLAogICAgKDB4RkM4QywgJ00nLCAn2YbZhScpLAogICAgKDB4RkM4RCwgJ00nLCAn2YbZhicpLAogICAgKDB4RkM4RSwgJ00nLCAn2YbZiScpLAogICAgKDB4RkM4RiwgJ00nLCAn2YbZiicpLAogICAgKDB4RkM5MCwgJ00nLCAn2YnZsCcpLAogICAgKDB4RkM5MSwgJ00nLCAn2YrYsScpLAogICAgKDB4RkM5MiwgJ00nLCAn2YrYsicpLAogICAgKDB4RkM5MywgJ00nLCAn2YrZhScpLAogICAgKDB4RkM5NCwgJ00nLCAn2YrZhicpLAogICAgKDB4RkM5NSwgJ00nLCAn2YrZiScpLAogICAgKDB4RkM5NiwgJ00nLCAn2YrZiicpLAogICAgKDB4RkM5NywgJ00nLCAn2KbYrCcpLAogICAgKDB4RkM5OCwgJ00nLCAn2KbYrScpLAogICAgKDB4RkM5OSwgJ00nLCAn2KbYricpLAogICAgKDB4RkM5QSwgJ00nLCAn2KbZhScpLAogICAgKDB4RkM5QiwgJ00nLCAn2KbZhycpLAogICAgKDB4RkM5QywgJ00nLCAn2KjYrCcpLAogICAgKDB4RkM5RCwgJ00nLCAn2KjYrScpLAogICAgKDB4RkM5RSwgJ00nLCAn2KjYricpLAogICAgKDB4RkM5RiwgJ00nLCAn2KjZhScpLAogICAgKDB4RkNBMCwgJ00nLCAn2KjZhycpLAogICAgKDB4RkNBMSwgJ00nLCAn2KrYrCcpLAogICAgKDB4RkNBMiwgJ00nLCAn2KrYrScpLAogICAgKDB4RkNBMywgJ00nLCAn2KrYricpLAogICAgKDB4RkNBNCwgJ00nLCAn2KrZhScpLAogICAgKDB4RkNBNSwgJ00nLCAn2KrZhycpLAogICAgKDB4RkNBNiwgJ00nLCAn2KvZhScpLAogICAgKDB4RkNBNywgJ00nLCAn2KzYrScpLAogICAgKDB4RkNBOCwgJ00nLCAn2KzZhScpLAogICAgKDB4RkNBOSwgJ00nLCAn2K3YrCcpLAogICAgKDB4RkNBQSwgJ00nLCAn2K3ZhScpLAogICAgKDB4RkNBQiwgJ00nLCAn2K7YrCcpLAogICAgKDB4RkNBQywgJ00nLCAn2K7ZhScpLAogICAgKDB4RkNBRCwgJ00nLCAn2LPYrCcpLAogICAgKDB4RkNBRSwgJ00nLCAn2LPYrScpLAogICAgKDB4RkNBRiwgJ00nLCAn2LPYricpLAogICAgKDB4RkNCMCwgJ00nLCAn2LPZhScpLAogICAgKDB4RkNCMSwgJ00nLCAn2LXYrScpLAogICAgKDB4RkNCMiwgJ00nLCAn2LXYricpLAogICAgKDB4RkNCMywgJ00nLCAn2LXZhScpLAogICAgKDB4RkNCNCwgJ00nLCAn2LbYrCcpLAogICAgKDB4RkNCNSwgJ00nLCAn2LbYrScpLAogICAgKDB4RkNCNiwgJ00nLCAn2LbYricpLAogICAgKDB4RkNCNywgJ00nLCAn2LbZhScpLAogICAgKDB4RkNCOCwgJ00nLCAn2LfYrScpLAogICAgKDB4RkNCOSwgJ00nLCAn2LjZhScpLAogICAgKDB4RkNCQSwgJ00nLCAn2LnYrCcpLAogICAgXQoKZGVmIF9zZWdfNDcoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXToKICAgIHJldHVybiBbCiAgICAoMHhGQ0JCLCAnTScsICfYudmFJyksCiAgICAoMHhGQ0JDLCAnTScsICfYutisJyksCiAgICAoMHhGQ0JELCAnTScsICfYutmFJyksCiAgICAoMHhGQ0JFLCAnTScsICfZgdisJyksCiAgICAoMHhGQ0JGLCAnTScsICfZgditJyksCiAgICAoMHhGQ0MwLCAnTScsICfZgdiuJyksCiAgICAoMHhGQ0MxLCAnTScsICfZgdmFJyksCiAgICAoMHhGQ0MyLCAnTScsICfZgtitJyksCiAgICAoMHhGQ0MzLCAnTScsICfZgtmFJyksCiAgICAoMHhGQ0M0LCAnTScsICfZg9isJyksCiAgICAoMHhGQ0M1LCAnTScsICfZg9itJyksCiAgICAoMHhGQ0M2LCAnTScsICfZg9iuJyksCiAgICAoMHhGQ0M3LCAnTScsICfZg9mEJyksCiAgICAoMHhGQ0M4LCAnTScsICfZg9mFJyksCiAgICAoMHhGQ0M5LCAnTScsICfZhNisJyksCiAgICAoMHhGQ0NBLCAnTScsICfZhNitJyksCiAgICAoMHhGQ0NCLCAnTScsICfZhNiuJyksCiAgICAoMHhGQ0NDLCAnTScsICfZhNmFJyksCiAgICAoMHhGQ0NELCAnTScsICfZhNmHJyksCiAgICAoMHhGQ0NFLCAnTScsICfZhdisJyksCiAgICAoMHhGQ0NGLCAnTScsICfZhditJyksCiAgICAoMHhGQ0QwLCAnTScsICfZhdiuJyksCiAgICAoMHhGQ0QxLCAnTScsICfZhdmFJyksCiAgICAoMHhGQ0QyLCAnTScsICfZhtisJyksCiAgICAoMHhGQ0QzLCAnTScsICfZhtitJyksCiAgICAoMHhGQ0Q0LCAnTScsICfZhtiuJyksCiAgICAoMHhGQ0Q1LCAnTScsICfZhtmFJyksCiAgICAoMHhGQ0Q2LCAnTScsICfZhtmHJyksCiAgICAoMHhGQ0Q3LCAnTScsICfZh9isJyksCiAgICAoMHhGQ0Q4LCAnTScsICfZh9mFJyksCiAgICAoMHhGQ0Q5LCAnTScsICfZh9mwJyksCiAgICAoMHhGQ0RBLCAnTScsICfZitisJyksCiAgICAoMHhGQ0RCLCAnTScsICfZititJyksCiAgICAoMHhGQ0RDLCAnTScsICfZitiuJyksCiAgICAoMHhGQ0RELCAnTScsICfZitmFJyksCiAgICAoMHhGQ0RFLCAnTScsICfZitmHJyksCiAgICAoMHhGQ0RGLCAnTScsICfYptmFJyksCiAgICAoMHhGQ0UwLCAnTScsICfYptmHJyksCiAgICAoMHhGQ0UxLCAnTScsICfYqNmFJyksCiAgICAoMHhGQ0UyLCAnTScsICfYqNmHJyksCiAgICAoMHhGQ0UzLCAnTScsICfYqtmFJyksCiAgICAoMHhGQ0U0LCAnTScsICfYqtmHJyksCiAgICAoMHhGQ0U1LCAnTScsICfYq9mFJyksCiAgICAoMHhGQ0U2LCAnTScsICfYq9mHJyksCiAgICAoMHhGQ0U3LCAnTScsICfYs9mFJyksCiAgICAoMHhGQ0U4LCAnTScsICfYs9mHJyksCiAgICAoMHhGQ0U5LCAnTScsICfYtNmFJyksCiAgICAoMHhGQ0VBLCAnTScsICfYtNmHJyksCiAgICAoMHhGQ0VCLCAnTScsICfZg9mEJyksCiAgICAoMHhGQ0VDLCAnTScsICfZg9mFJyksCiAgICAoMHhGQ0VELCAnTScsICfZhNmFJyksCiAgICAoMHhGQ0VFLCAnTScsICfZhtmFJyksCiAgICAoMHhGQ0VGLCAnTScsICfZhtmHJyksCiAgICAoMHhGQ0YwLCAnTScsICfZitmFJyksCiAgICAoMHhGQ0YxLCAnTScsICfZitmHJyksCiAgICAoMHhGQ0YyLCAnTScsICfZgNmO2ZEnKSwKICAgICgweEZDRjMsICdNJywgJ9mA2Y/ZkScpLAogICAgKDB4RkNGNCwgJ00nLCAn2YDZkNmRJyksCiAgICAoMHhGQ0Y1LCAnTScsICfYt9mJJyksCiAgICAoMHhGQ0Y2LCAnTScsICfYt9mKJyksCiAgICAoMHhGQ0Y3LCAnTScsICfYudmJJyksCiAgICAoMHhGQ0Y4LCAnTScsICfYudmKJyksCiAgICAoMHhGQ0Y5LCAnTScsICfYutmJJyksCiAgICAoMHhGQ0ZBLCAnTScsICfYutmKJyksCiAgICAoMHhGQ0ZCLCAnTScsICfYs9mJJyksCiAgICAoMHhGQ0ZDLCAnTScsICfYs9mKJyksCiAgICAoMHhGQ0ZELCAnTScsICfYtNmJJyksCiAgICAoMHhGQ0ZFLCAnTScsICfYtNmKJyksCiAgICAoMHhGQ0ZGLCAnTScsICfYrdmJJyksCiAgICAoMHhGRDAwLCAnTScsICfYrdmKJyksCiAgICAoMHhGRDAxLCAnTScsICfYrNmJJyksCiAgICAoMHhGRDAyLCAnTScsICfYrNmKJyksCiAgICAoMHhGRDAzLCAnTScsICfYrtmJJyksCiAgICAoMHhGRDA0LCAnTScsICfYrtmKJyksCiAgICAoMHhGRDA1LCAnTScsICfYtdmJJyksCiAgICAoMHhGRDA2LCAnTScsICfYtdmKJyksCiAgICAoMHhGRDA3LCAnTScsICfYttmJJyksCiAgICAoMHhGRDA4LCAnTScsICfYttmKJyksCiAgICAoMHhGRDA5LCAnTScsICfYtNisJyksCiAgICAoMHhGRDBBLCAnTScsICfYtNitJyksCiAgICAoMHhGRDBCLCAnTScsICfYtNiuJyksCiAgICAoMHhGRDBDLCAnTScsICfYtNmFJyksCiAgICAoMHhGRDBELCAnTScsICfYtNixJyksCiAgICAoMHhGRDBFLCAnTScsICfYs9ixJyksCiAgICAoMHhGRDBGLCAnTScsICfYtdixJyksCiAgICAoMHhGRDEwLCAnTScsICfYttixJyksCiAgICAoMHhGRDExLCAnTScsICfYt9mJJyksCiAgICAoMHhGRDEyLCAnTScsICfYt9mKJyksCiAgICAoMHhGRDEzLCAnTScsICfYudmJJyksCiAgICAoMHhGRDE0LCAnTScsICfYudmKJyksCiAgICAoMHhGRDE1LCAnTScsICfYutmJJyksCiAgICAoMHhGRDE2LCAnTScsICfYutmKJyksCiAgICAoMHhGRDE3LCAnTScsICfYs9mJJyksCiAgICAoMHhGRDE4LCAnTScsICfYs9mKJyksCiAgICAoMHhGRDE5LCAnTScsICfYtNmJJyksCiAgICAoMHhGRDFBLCAnTScsICfYtNmKJyksCiAgICAoMHhGRDFCLCAnTScsICfYrdmJJyksCiAgICAoMHhGRDFDLCAnTScsICfYrdmKJyksCiAgICAoMHhGRDFELCAnTScsICfYrNmJJyksCiAgICAoMHhGRDFFLCAnTScsICfYrNmKJyksCiAgICBdCgpkZWYgX3NlZ180OCgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweEZEMUYsICdNJywgJ9iu2YknKSwKICAgICgweEZEMjAsICdNJywgJ9iu2YonKSwKICAgICgweEZEMjEsICdNJywgJ9i12YknKSwKICAgICgweEZEMjIsICdNJywgJ9i12YonKSwKICAgICgweEZEMjMsICdNJywgJ9i22YknKSwKICAgICgweEZEMjQsICdNJywgJ9i22YonKSwKICAgICgweEZEMjUsICdNJywgJ9i02KwnKSwKICAgICgweEZEMjYsICdNJywgJ9i02K0nKSwKICAgICgweEZEMjcsICdNJywgJ9i02K4nKSwKICAgICgweEZEMjgsICdNJywgJ9i02YUnKSwKICAgICgweEZEMjksICdNJywgJ9i02LEnKSwKICAgICgweEZEMkEsICdNJywgJ9iz2LEnKSwKICAgICgweEZEMkIsICdNJywgJ9i12LEnKSwKICAgICgweEZEMkMsICdNJywgJ9i22LEnKSwKICAgICgweEZEMkQsICdNJywgJ9i02KwnKSwKICAgICgweEZEMkUsICdNJywgJ9i02K0nKSwKICAgICgweEZEMkYsICdNJywgJ9i02K4nKSwKICAgICgweEZEMzAsICdNJywgJ9i02YUnKSwKICAgICgweEZEMzEsICdNJywgJ9iz2YcnKSwKICAgICgweEZEMzIsICdNJywgJ9i02YcnKSwKICAgICgweEZEMzMsICdNJywgJ9i32YUnKSwKICAgICgweEZEMzQsICdNJywgJ9iz2KwnKSwKICAgICgweEZEMzUsICdNJywgJ9iz2K0nKSwKICAgICgweEZEMzYsICdNJywgJ9iz2K4nKSwKICAgICgweEZEMzcsICdNJywgJ9i02KwnKSwKICAgICgweEZEMzgsICdNJywgJ9i02K0nKSwKICAgICgweEZEMzksICdNJywgJ9i02K4nKSwKICAgICgweEZEM0EsICdNJywgJ9i32YUnKSwKICAgICgweEZEM0IsICdNJywgJ9i42YUnKSwKICAgICgweEZEM0MsICdNJywgJ9in2YsnKSwKICAgICgweEZEM0UsICdWJyksCiAgICAoMHhGRDUwLCAnTScsICfYqtis2YUnKSwKICAgICgweEZENTEsICdNJywgJ9iq2K3YrCcpLAogICAgKDB4RkQ1MywgJ00nLCAn2KrYrdmFJyksCiAgICAoMHhGRDU0LCAnTScsICfYqtiu2YUnKSwKICAgICgweEZENTUsICdNJywgJ9iq2YXYrCcpLAogICAgKDB4RkQ1NiwgJ00nLCAn2KrZhditJyksCiAgICAoMHhGRDU3LCAnTScsICfYqtmF2K4nKSwKICAgICgweEZENTgsICdNJywgJ9is2YXYrScpLAogICAgKDB4RkQ1QSwgJ00nLCAn2K3ZhdmKJyksCiAgICAoMHhGRDVCLCAnTScsICfYrdmF2YknKSwKICAgICgweEZENUMsICdNJywgJ9iz2K3YrCcpLAogICAgKDB4RkQ1RCwgJ00nLCAn2LPYrNitJyksCiAgICAoMHhGRDVFLCAnTScsICfYs9is2YknKSwKICAgICgweEZENUYsICdNJywgJ9iz2YXYrScpLAogICAgKDB4RkQ2MSwgJ00nLCAn2LPZhdisJyksCiAgICAoMHhGRDYyLCAnTScsICfYs9mF2YUnKSwKICAgICgweEZENjQsICdNJywgJ9i12K3YrScpLAogICAgKDB4RkQ2NiwgJ00nLCAn2LXZhdmFJyksCiAgICAoMHhGRDY3LCAnTScsICfYtNit2YUnKSwKICAgICgweEZENjksICdNJywgJ9i02KzZiicpLAogICAgKDB4RkQ2QSwgJ00nLCAn2LTZhdiuJyksCiAgICAoMHhGRDZDLCAnTScsICfYtNmF2YUnKSwKICAgICgweEZENkUsICdNJywgJ9i22K3ZiScpLAogICAgKDB4RkQ2RiwgJ00nLCAn2LbYrtmFJyksCiAgICAoMHhGRDcxLCAnTScsICfYt9mF2K0nKSwKICAgICgweEZENzMsICdNJywgJ9i32YXZhScpLAogICAgKDB4RkQ3NCwgJ00nLCAn2LfZhdmKJyksCiAgICAoMHhGRDc1LCAnTScsICfYudis2YUnKSwKICAgICgweEZENzYsICdNJywgJ9i52YXZhScpLAogICAgKDB4RkQ3OCwgJ00nLCAn2LnZhdmJJyksCiAgICAoMHhGRDc5LCAnTScsICfYutmF2YUnKSwKICAgICgweEZEN0EsICdNJywgJ9i62YXZiicpLAogICAgKDB4RkQ3QiwgJ00nLCAn2LrZhdmJJyksCiAgICAoMHhGRDdDLCAnTScsICfZgdiu2YUnKSwKICAgICgweEZEN0UsICdNJywgJ9mC2YXYrScpLAogICAgKDB4RkQ3RiwgJ00nLCAn2YLZhdmFJyksCiAgICAoMHhGRDgwLCAnTScsICfZhNit2YUnKSwKICAgICgweEZEODEsICdNJywgJ9mE2K3ZiicpLAogICAgKDB4RkQ4MiwgJ00nLCAn2YTYrdmJJyksCiAgICAoMHhGRDgzLCAnTScsICfZhNis2KwnKSwKICAgICgweEZEODUsICdNJywgJ9mE2K7ZhScpLAogICAgKDB4RkQ4NywgJ00nLCAn2YTZhditJyksCiAgICAoMHhGRDg5LCAnTScsICfZhdit2KwnKSwKICAgICgweEZEOEEsICdNJywgJ9mF2K3ZhScpLAogICAgKDB4RkQ4QiwgJ00nLCAn2YXYrdmKJyksCiAgICAoMHhGRDhDLCAnTScsICfZhdis2K0nKSwKICAgICgweEZEOEQsICdNJywgJ9mF2KzZhScpLAogICAgKDB4RkQ4RSwgJ00nLCAn2YXYrtisJyksCiAgICAoMHhGRDhGLCAnTScsICfZhdiu2YUnKSwKICAgICgweEZEOTAsICdYJyksCiAgICAoMHhGRDkyLCAnTScsICfZhdis2K4nKSwKICAgICgweEZEOTMsICdNJywgJ9mH2YXYrCcpLAogICAgKDB4RkQ5NCwgJ00nLCAn2YfZhdmFJyksCiAgICAoMHhGRDk1LCAnTScsICfZhtit2YUnKSwKICAgICgweEZEOTYsICdNJywgJ9mG2K3ZiScpLAogICAgKDB4RkQ5NywgJ00nLCAn2YbYrNmFJyksCiAgICAoMHhGRDk5LCAnTScsICfZhtis2YknKSwKICAgICgweEZEOUEsICdNJywgJ9mG2YXZiicpLAogICAgKDB4RkQ5QiwgJ00nLCAn2YbZhdmJJyksCiAgICAoMHhGRDlDLCAnTScsICfZitmF2YUnKSwKICAgICgweEZEOUUsICdNJywgJ9io2K7ZiicpLAogICAgKDB4RkQ5RiwgJ00nLCAn2KrYrNmKJyksCiAgICAoMHhGREEwLCAnTScsICfYqtis2YknKSwKICAgICgweEZEQTEsICdNJywgJ9iq2K7ZiicpLAogICAgKDB4RkRBMiwgJ00nLCAn2KrYrtmJJyksCiAgICAoMHhGREEzLCAnTScsICfYqtmF2YonKSwKICAgICgweEZEQTQsICdNJywgJ9iq2YXZiScpLAogICAgKDB4RkRBNSwgJ00nLCAn2KzZhdmKJyksCiAgICAoMHhGREE2LCAnTScsICfYrNit2YknKSwKICAgIF0KCmRlZiBfc2VnXzQ5KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4RkRBNywgJ00nLCAn2KzZhdmJJyksCiAgICAoMHhGREE4LCAnTScsICfYs9iu2YknKSwKICAgICgweEZEQTksICdNJywgJ9i12K3ZiicpLAogICAgKDB4RkRBQSwgJ00nLCAn2LTYrdmKJyksCiAgICAoMHhGREFCLCAnTScsICfYttit2YonKSwKICAgICgweEZEQUMsICdNJywgJ9mE2KzZiicpLAogICAgKDB4RkRBRCwgJ00nLCAn2YTZhdmKJyksCiAgICAoMHhGREFFLCAnTScsICfZitit2YonKSwKICAgICgweEZEQUYsICdNJywgJ9mK2KzZiicpLAogICAgKDB4RkRCMCwgJ00nLCAn2YrZhdmKJyksCiAgICAoMHhGREIxLCAnTScsICfZhdmF2YonKSwKICAgICgweEZEQjIsICdNJywgJ9mC2YXZiicpLAogICAgKDB4RkRCMywgJ00nLCAn2YbYrdmKJyksCiAgICAoMHhGREI0LCAnTScsICfZgtmF2K0nKSwKICAgICgweEZEQjUsICdNJywgJ9mE2K3ZhScpLAogICAgKDB4RkRCNiwgJ00nLCAn2LnZhdmKJyksCiAgICAoMHhGREI3LCAnTScsICfZg9mF2YonKSwKICAgICgweEZEQjgsICdNJywgJ9mG2KzYrScpLAogICAgKDB4RkRCOSwgJ00nLCAn2YXYrtmKJyksCiAgICAoMHhGREJBLCAnTScsICfZhNis2YUnKSwKICAgICgweEZEQkIsICdNJywgJ9mD2YXZhScpLAogICAgKDB4RkRCQywgJ00nLCAn2YTYrNmFJyksCiAgICAoMHhGREJELCAnTScsICfZhtis2K0nKSwKICAgICgweEZEQkUsICdNJywgJ9is2K3ZiicpLAogICAgKDB4RkRCRiwgJ00nLCAn2K3YrNmKJyksCiAgICAoMHhGREMwLCAnTScsICfZhdis2YonKSwKICAgICgweEZEQzEsICdNJywgJ9mB2YXZiicpLAogICAgKDB4RkRDMiwgJ00nLCAn2KjYrdmKJyksCiAgICAoMHhGREMzLCAnTScsICfZg9mF2YUnKSwKICAgICgweEZEQzQsICdNJywgJ9i52KzZhScpLAogICAgKDB4RkRDNSwgJ00nLCAn2LXZhdmFJyksCiAgICAoMHhGREM2LCAnTScsICfYs9iu2YonKSwKICAgICgweEZEQzcsICdNJywgJ9mG2KzZiicpLAogICAgKDB4RkRDOCwgJ1gnKSwKICAgICgweEZEQ0YsICdWJyksCiAgICAoMHhGREQwLCAnWCcpLAogICAgKDB4RkRGMCwgJ00nLCAn2LXZhNuSJyksCiAgICAoMHhGREYxLCAnTScsICfZgtmE25InKSwKICAgICgweEZERjIsICdNJywgJ9in2YTZhNmHJyksCiAgICAoMHhGREYzLCAnTScsICfYp9mD2KjYsScpLAogICAgKDB4RkRGNCwgJ00nLCAn2YXYrdmF2K8nKSwKICAgICgweEZERjUsICdNJywgJ9i12YTYudmFJyksCiAgICAoMHhGREY2LCAnTScsICfYsdiz2YjZhCcpLAogICAgKDB4RkRGNywgJ00nLCAn2LnZhNmK2YcnKSwKICAgICgweEZERjgsICdNJywgJ9mI2LPZhNmFJyksCiAgICAoMHhGREY5LCAnTScsICfYtdmE2YknKSwKICAgICgweEZERkEsICczJywgJ9i12YTZiSDYp9mE2YTZhyDYudmE2YrZhyDZiNiz2YTZhScpLAogICAgKDB4RkRGQiwgJzMnLCAn2KzZhCDYrNmE2KfZhNmHJyksCiAgICAoMHhGREZDLCAnTScsICfYsduM2KfZhCcpLAogICAgKDB4RkRGRCwgJ1YnKSwKICAgICgweEZFMDAsICdJJyksCiAgICAoMHhGRTEwLCAnMycsICcsJyksCiAgICAoMHhGRTExLCAnTScsICfjgIEnKSwKICAgICgweEZFMTIsICdYJyksCiAgICAoMHhGRTEzLCAnMycsICc6JyksCiAgICAoMHhGRTE0LCAnMycsICc7JyksCiAgICAoMHhGRTE1LCAnMycsICchJyksCiAgICAoMHhGRTE2LCAnMycsICc/JyksCiAgICAoMHhGRTE3LCAnTScsICfjgJYnKSwKICAgICgweEZFMTgsICdNJywgJ+OAlycpLAogICAgKDB4RkUxOSwgJ1gnKSwKICAgICgweEZFMjAsICdWJyksCiAgICAoMHhGRTMwLCAnWCcpLAogICAgKDB4RkUzMSwgJ00nLCAn4oCUJyksCiAgICAoMHhGRTMyLCAnTScsICfigJMnKSwKICAgICgweEZFMzMsICczJywgJ18nKSwKICAgICgweEZFMzUsICczJywgJygnKSwKICAgICgweEZFMzYsICczJywgJyknKSwKICAgICgweEZFMzcsICczJywgJ3snKSwKICAgICgweEZFMzgsICczJywgJ30nKSwKICAgICgweEZFMzksICdNJywgJ+OAlCcpLAogICAgKDB4RkUzQSwgJ00nLCAn44CVJyksCiAgICAoMHhGRTNCLCAnTScsICfjgJAnKSwKICAgICgweEZFM0MsICdNJywgJ+OAkScpLAogICAgKDB4RkUzRCwgJ00nLCAn44CKJyksCiAgICAoMHhGRTNFLCAnTScsICfjgIsnKSwKICAgICgweEZFM0YsICdNJywgJ+OAiCcpLAogICAgKDB4RkU0MCwgJ00nLCAn44CJJyksCiAgICAoMHhGRTQxLCAnTScsICfjgIwnKSwKICAgICgweEZFNDIsICdNJywgJ+OAjScpLAogICAgKDB4RkU0MywgJ00nLCAn44COJyksCiAgICAoMHhGRTQ0LCAnTScsICfjgI8nKSwKICAgICgweEZFNDUsICdWJyksCiAgICAoMHhGRTQ3LCAnMycsICdbJyksCiAgICAoMHhGRTQ4LCAnMycsICddJyksCiAgICAoMHhGRTQ5LCAnMycsICcgzIUnKSwKICAgICgweEZFNEQsICczJywgJ18nKSwKICAgICgweEZFNTAsICczJywgJywnKSwKICAgICgweEZFNTEsICdNJywgJ+OAgScpLAogICAgKDB4RkU1MiwgJ1gnKSwKICAgICgweEZFNTQsICczJywgJzsnKSwKICAgICgweEZFNTUsICczJywgJzonKSwKICAgICgweEZFNTYsICczJywgJz8nKSwKICAgICgweEZFNTcsICczJywgJyEnKSwKICAgICgweEZFNTgsICdNJywgJ+KAlCcpLAogICAgKDB4RkU1OSwgJzMnLCAnKCcpLAogICAgKDB4RkU1QSwgJzMnLCAnKScpLAogICAgKDB4RkU1QiwgJzMnLCAneycpLAogICAgKDB4RkU1QywgJzMnLCAnfScpLAogICAgKDB4RkU1RCwgJ00nLCAn44CUJyksCiAgICBdCgpkZWYgX3NlZ181MCgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweEZFNUUsICdNJywgJ+OAlScpLAogICAgKDB4RkU1RiwgJzMnLCAnIycpLAogICAgKDB4RkU2MCwgJzMnLCAnJicpLAogICAgKDB4RkU2MSwgJzMnLCAnKicpLAogICAgKDB4RkU2MiwgJzMnLCAnKycpLAogICAgKDB4RkU2MywgJ00nLCAnLScpLAogICAgKDB4RkU2NCwgJzMnLCAnPCcpLAogICAgKDB4RkU2NSwgJzMnLCAnPicpLAogICAgKDB4RkU2NiwgJzMnLCAnPScpLAogICAgKDB4RkU2NywgJ1gnKSwKICAgICgweEZFNjgsICczJywgJ1xcXFwnKSwKICAgICgweEZFNjksICczJywgJyQnKSwKICAgICgweEZFNkEsICczJywgJyUnKSwKICAgICgweEZFNkIsICczJywgJ0AnKSwKICAgICgweEZFNkMsICdYJyksCiAgICAoMHhGRTcwLCAnMycsICcg2YsnKSwKICAgICgweEZFNzEsICdNJywgJ9mA2YsnKSwKICAgICgweEZFNzIsICczJywgJyDZjCcpLAogICAgKDB4RkU3MywgJ1YnKSwKICAgICgweEZFNzQsICczJywgJyDZjScpLAogICAgKDB4RkU3NSwgJ1gnKSwKICAgICgweEZFNzYsICczJywgJyDZjicpLAogICAgKDB4RkU3NywgJ00nLCAn2YDZjicpLAogICAgKDB4RkU3OCwgJzMnLCAnINmPJyksCiAgICAoMHhGRTc5LCAnTScsICfZgNmPJyksCiAgICAoMHhGRTdBLCAnMycsICcg2ZAnKSwKICAgICgweEZFN0IsICdNJywgJ9mA2ZAnKSwKICAgICgweEZFN0MsICczJywgJyDZkScpLAogICAgKDB4RkU3RCwgJ00nLCAn2YDZkScpLAogICAgKDB4RkU3RSwgJzMnLCAnINmSJyksCiAgICAoMHhGRTdGLCAnTScsICfZgNmSJyksCiAgICAoMHhGRTgwLCAnTScsICfYoScpLAogICAgKDB4RkU4MSwgJ00nLCAn2KInKSwKICAgICgweEZFODMsICdNJywgJ9ijJyksCiAgICAoMHhGRTg1LCAnTScsICfYpCcpLAogICAgKDB4RkU4NywgJ00nLCAn2KUnKSwKICAgICgweEZFODksICdNJywgJ9imJyksCiAgICAoMHhGRThELCAnTScsICfYpycpLAogICAgKDB4RkU4RiwgJ00nLCAn2KgnKSwKICAgICgweEZFOTMsICdNJywgJ9ipJyksCiAgICAoMHhGRTk1LCAnTScsICfYqicpLAogICAgKDB4RkU5OSwgJ00nLCAn2KsnKSwKICAgICgweEZFOUQsICdNJywgJ9isJyksCiAgICAoMHhGRUExLCAnTScsICfYrScpLAogICAgKDB4RkVBNSwgJ00nLCAn2K4nKSwKICAgICgweEZFQTksICdNJywgJ9ivJyksCiAgICAoMHhGRUFCLCAnTScsICfYsCcpLAogICAgKDB4RkVBRCwgJ00nLCAn2LEnKSwKICAgICgweEZFQUYsICdNJywgJ9iyJyksCiAgICAoMHhGRUIxLCAnTScsICfYsycpLAogICAgKDB4RkVCNSwgJ00nLCAn2LQnKSwKICAgICgweEZFQjksICdNJywgJ9i1JyksCiAgICAoMHhGRUJELCAnTScsICfYticpLAogICAgKDB4RkVDMSwgJ00nLCAn2LcnKSwKICAgICgweEZFQzUsICdNJywgJ9i4JyksCiAgICAoMHhGRUM5LCAnTScsICfYuScpLAogICAgKDB4RkVDRCwgJ00nLCAn2LonKSwKICAgICgweEZFRDEsICdNJywgJ9mBJyksCiAgICAoMHhGRUQ1LCAnTScsICfZgicpLAogICAgKDB4RkVEOSwgJ00nLCAn2YMnKSwKICAgICgweEZFREQsICdNJywgJ9mEJyksCiAgICAoMHhGRUUxLCAnTScsICfZhScpLAogICAgKDB4RkVFNSwgJ00nLCAn2YYnKSwKICAgICgweEZFRTksICdNJywgJ9mHJyksCiAgICAoMHhGRUVELCAnTScsICfZiCcpLAogICAgKDB4RkVFRiwgJ00nLCAn2YknKSwKICAgICgweEZFRjEsICdNJywgJ9mKJyksCiAgICAoMHhGRUY1LCAnTScsICfZhNiiJyksCiAgICAoMHhGRUY3LCAnTScsICfZhNijJyksCiAgICAoMHhGRUY5LCAnTScsICfZhNilJyksCiAgICAoMHhGRUZCLCAnTScsICfZhNinJyksCiAgICAoMHhGRUZELCAnWCcpLAogICAgKDB4RkVGRiwgJ0knKSwKICAgICgweEZGMDAsICdYJyksCiAgICAoMHhGRjAxLCAnMycsICchJyksCiAgICAoMHhGRjAyLCAnMycsICdcIicpLAogICAgKDB4RkYwMywgJzMnLCAnIycpLAogICAgKDB4RkYwNCwgJzMnLCAnJCcpLAogICAgKDB4RkYwNSwgJzMnLCAnJScpLAogICAgKDB4RkYwNiwgJzMnLCAnJicpLAogICAgKDB4RkYwNywgJzMnLCAnXFwnJyksCiAgICAoMHhGRjA4LCAnMycsICcoJyksCiAgICAoMHhGRjA5LCAnMycsICcpJyksCiAgICAoMHhGRjBBLCAnMycsICcqJyksCiAgICAoMHhGRjBCLCAnMycsICcrJyksCiAgICAoMHhGRjBDLCAnMycsICcsJyksCiAgICAoMHhGRjBELCAnTScsICctJyksCiAgICAoMHhGRjBFLCAnTScsICcuJyksCiAgICAoMHhGRjBGLCAnMycsICcvJyksCiAgICAoMHhGRjEwLCAnTScsICcwJyksCiAgICAoMHhGRjExLCAnTScsICcxJyksCiAgICAoMHhGRjEyLCAnTScsICcyJyksCiAgICAoMHhGRjEzLCAnTScsICczJyksCiAgICAoMHhGRjE0LCAnTScsICc0JyksCiAgICAoMHhGRjE1LCAnTScsICc1JyksCiAgICAoMHhGRjE2LCAnTScsICc2JyksCiAgICAoMHhGRjE3LCAnTScsICc3JyksCiAgICAoMHhGRjE4LCAnTScsICc4JyksCiAgICAoMHhGRjE5LCAnTScsICc5JyksCiAgICAoMHhGRjFBLCAnMycsICc6JyksCiAgICBdCgpkZWYgX3NlZ181MSgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweEZGMUIsICczJywgJzsnKSwKICAgICgweEZGMUMsICczJywgJzwnKSwKICAgICgweEZGMUQsICczJywgJz0nKSwKICAgICgweEZGMUUsICczJywgJz4nKSwKICAgICgweEZGMUYsICczJywgJz8nKSwKICAgICgweEZGMjAsICczJywgJ0AnKSwKICAgICgweEZGMjEsICdNJywgJ2EnKSwKICAgICgweEZGMjIsICdNJywgJ2InKSwKICAgICgweEZGMjMsICdNJywgJ2MnKSwKICAgICgweEZGMjQsICdNJywgJ2QnKSwKICAgICgweEZGMjUsICdNJywgJ2UnKSwKICAgICgweEZGMjYsICdNJywgJ2YnKSwKICAgICgweEZGMjcsICdNJywgJ2cnKSwKICAgICgweEZGMjgsICdNJywgJ2gnKSwKICAgICgweEZGMjksICdNJywgJ2knKSwKICAgICgweEZGMkEsICdNJywgJ2onKSwKICAgICgweEZGMkIsICdNJywgJ2snKSwKICAgICgweEZGMkMsICdNJywgJ2wnKSwKICAgICgweEZGMkQsICdNJywgJ20nKSwKICAgICgweEZGMkUsICdNJywgJ24nKSwKICAgICgweEZGMkYsICdNJywgJ28nKSwKICAgICgweEZGMzAsICdNJywgJ3AnKSwKICAgICgweEZGMzEsICdNJywgJ3EnKSwKICAgICgweEZGMzIsICdNJywgJ3InKSwKICAgICgweEZGMzMsICdNJywgJ3MnKSwKICAgICgweEZGMzQsICdNJywgJ3QnKSwKICAgICgweEZGMzUsICdNJywgJ3UnKSwKICAgICgweEZGMzYsICdNJywgJ3YnKSwKICAgICgweEZGMzcsICdNJywgJ3cnKSwKICAgICgweEZGMzgsICdNJywgJ3gnKSwKICAgICgweEZGMzksICdNJywgJ3knKSwKICAgICgweEZGM0EsICdNJywgJ3onKSwKICAgICgweEZGM0IsICczJywgJ1snKSwKICAgICgweEZGM0MsICczJywgJ1xcXFwnKSwKICAgICgweEZGM0QsICczJywgJ10nKSwKICAgICgweEZGM0UsICczJywgJ14nKSwKICAgICgweEZGM0YsICczJywgJ18nKSwKICAgICgweEZGNDAsICczJywgJ2AnKSwKICAgICgweEZGNDEsICdNJywgJ2EnKSwKICAgICgweEZGNDIsICdNJywgJ2InKSwKICAgICgweEZGNDMsICdNJywgJ2MnKSwKICAgICgweEZGNDQsICdNJywgJ2QnKSwKICAgICgweEZGNDUsICdNJywgJ2UnKSwKICAgICgweEZGNDYsICdNJywgJ2YnKSwKICAgICgweEZGNDcsICdNJywgJ2cnKSwKICAgICgweEZGNDgsICdNJywgJ2gnKSwKICAgICgweEZGNDksICdNJywgJ2knKSwKICAgICgweEZGNEEsICdNJywgJ2onKSwKICAgICgweEZGNEIsICdNJywgJ2snKSwKICAgICgweEZGNEMsICdNJywgJ2wnKSwKICAgICgweEZGNEQsICdNJywgJ20nKSwKICAgICgweEZGNEUsICdNJywgJ24nKSwKICAgICgweEZGNEYsICdNJywgJ28nKSwKICAgICgweEZGNTAsICdNJywgJ3AnKSwKICAgICgweEZGNTEsICdNJywgJ3EnKSwKICAgICgweEZGNTIsICdNJywgJ3InKSwKICAgICgweEZGNTMsICdNJywgJ3MnKSwKICAgICgweEZGNTQsICdNJywgJ3QnKSwKICAgICgweEZGNTUsICdNJywgJ3UnKSwKICAgICgweEZGNTYsICdNJywgJ3YnKSwKICAgICgweEZGNTcsICdNJywgJ3cnKSwKICAgICgweEZGNTgsICdNJywgJ3gnKSwKICAgICgweEZGNTksICdNJywgJ3knKSwKICAgICgweEZGNUEsICdNJywgJ3onKSwKICAgICgweEZGNUIsICczJywgJ3snKSwKICAgICgweEZGNUMsICczJywgJ3wnKSwKICAgICgweEZGNUQsICczJywgJ30nKSwKICAgICgweEZGNUUsICczJywgJ34nKSwKICAgICgweEZGNUYsICdNJywgJ+KmhScpLAogICAgKDB4RkY2MCwgJ00nLCAn4qaGJyksCiAgICAoMHhGRjYxLCAnTScsICcuJyksCiAgICAoMHhGRjYyLCAnTScsICfjgIwnKSwKICAgICgweEZGNjMsICdNJywgJ+OAjScpLAogICAgKDB4RkY2NCwgJ00nLCAn44CBJyksCiAgICAoMHhGRjY1LCAnTScsICfjg7snKSwKICAgICgweEZGNjYsICdNJywgJ+ODsicpLAogICAgKDB4RkY2NywgJ00nLCAn44KhJyksCiAgICAoMHhGRjY4LCAnTScsICfjgqMnKSwKICAgICgweEZGNjksICdNJywgJ+OCpScpLAogICAgKDB4RkY2QSwgJ00nLCAn44KnJyksCiAgICAoMHhGRjZCLCAnTScsICfjgqknKSwKICAgICgweEZGNkMsICdNJywgJ+ODoycpLAogICAgKDB4RkY2RCwgJ00nLCAn44OlJyksCiAgICAoMHhGRjZFLCAnTScsICfjg6cnKSwKICAgICgweEZGNkYsICdNJywgJ+ODgycpLAogICAgKDB4RkY3MCwgJ00nLCAn44O8JyksCiAgICAoMHhGRjcxLCAnTScsICfjgqInKSwKICAgICgweEZGNzIsICdNJywgJ+OCpCcpLAogICAgKDB4RkY3MywgJ00nLCAn44KmJyksCiAgICAoMHhGRjc0LCAnTScsICfjgqgnKSwKICAgICgweEZGNzUsICdNJywgJ+OCqicpLAogICAgKDB4RkY3NiwgJ00nLCAn44KrJyksCiAgICAoMHhGRjc3LCAnTScsICfjgq0nKSwKICAgICgweEZGNzgsICdNJywgJ+OCrycpLAogICAgKDB4RkY3OSwgJ00nLCAn44KxJyksCiAgICAoMHhGRjdBLCAnTScsICfjgrMnKSwKICAgICgweEZGN0IsICdNJywgJ+OCtScpLAogICAgKDB4RkY3QywgJ00nLCAn44K3JyksCiAgICAoMHhGRjdELCAnTScsICfjgrknKSwKICAgICgweEZGN0UsICdNJywgJ+OCuycpLAogICAgXQoKZGVmIF9zZWdfNTIoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXToKICAgIHJldHVybiBbCiAgICAoMHhGRjdGLCAnTScsICfjgr0nKSwKICAgICgweEZGODAsICdNJywgJ+OCvycpLAogICAgKDB4RkY4MSwgJ00nLCAn44OBJyksCiAgICAoMHhGRjgyLCAnTScsICfjg4QnKSwKICAgICgweEZGODMsICdNJywgJ+ODhicpLAogICAgKDB4RkY4NCwgJ00nLCAn44OIJyksCiAgICAoMHhGRjg1LCAnTScsICfjg4onKSwKICAgICgweEZGODYsICdNJywgJ+ODiycpLAogICAgKDB4RkY4NywgJ00nLCAn44OMJyksCiAgICAoMHhGRjg4LCAnTScsICfjg40nKSwKICAgICgweEZGODksICdNJywgJ+ODjicpLAogICAgKDB4RkY4QSwgJ00nLCAn44OPJyksCiAgICAoMHhGRjhCLCAnTScsICfjg5InKSwKICAgICgweEZGOEMsICdNJywgJ+ODlScpLAogICAgKDB4RkY4RCwgJ00nLCAn44OYJyksCiAgICAoMHhGRjhFLCAnTScsICfjg5snKSwKICAgICgweEZGOEYsICdNJywgJ+ODnicpLAogICAgKDB4RkY5MCwgJ00nLCAn44OfJyksCiAgICAoMHhGRjkxLCAnTScsICfjg6AnKSwKICAgICgweEZGOTIsICdNJywgJ+ODoScpLAogICAgKDB4RkY5MywgJ00nLCAn44OiJyksCiAgICAoMHhGRjk0LCAnTScsICfjg6QnKSwKICAgICgweEZGOTUsICdNJywgJ+ODpicpLAogICAgKDB4RkY5NiwgJ00nLCAn44OoJyksCiAgICAoMHhGRjk3LCAnTScsICfjg6knKSwKICAgICgweEZGOTgsICdNJywgJ+ODqicpLAogICAgKDB4RkY5OSwgJ00nLCAn44OrJyksCiAgICAoMHhGRjlBLCAnTScsICfjg6wnKSwKICAgICgweEZGOUIsICdNJywgJ+ODrScpLAogICAgKDB4RkY5QywgJ00nLCAn44OvJyksCiAgICAoMHhGRjlELCAnTScsICfjg7MnKSwKICAgICgweEZGOUUsICdNJywgJ+OCmScpLAogICAgKDB4RkY5RiwgJ00nLCAn44KaJyksCiAgICAoMHhGRkEwLCAnWCcpLAogICAgKDB4RkZBMSwgJ00nLCAn4YSAJyksCiAgICAoMHhGRkEyLCAnTScsICfhhIEnKSwKICAgICgweEZGQTMsICdNJywgJ+GGqicpLAogICAgKDB4RkZBNCwgJ00nLCAn4YSCJyksCiAgICAoMHhGRkE1LCAnTScsICfhhqwnKSwKICAgICgweEZGQTYsICdNJywgJ+GGrScpLAogICAgKDB4RkZBNywgJ00nLCAn4YSDJyksCiAgICAoMHhGRkE4LCAnTScsICfhhIQnKSwKICAgICgweEZGQTksICdNJywgJ+GEhScpLAogICAgKDB4RkZBQSwgJ00nLCAn4YawJyksCiAgICAoMHhGRkFCLCAnTScsICfhhrEnKSwKICAgICgweEZGQUMsICdNJywgJ+GGsicpLAogICAgKDB4RkZBRCwgJ00nLCAn4YazJyksCiAgICAoMHhGRkFFLCAnTScsICfhhrQnKSwKICAgICgweEZGQUYsICdNJywgJ+GGtScpLAogICAgKDB4RkZCMCwgJ00nLCAn4YSaJyksCiAgICAoMHhGRkIxLCAnTScsICfhhIYnKSwKICAgICgweEZGQjIsICdNJywgJ+GEhycpLAogICAgKDB4RkZCMywgJ00nLCAn4YSIJyksCiAgICAoMHhGRkI0LCAnTScsICfhhKEnKSwKICAgICgweEZGQjUsICdNJywgJ+GEiScpLAogICAgKDB4RkZCNiwgJ00nLCAn4YSKJyksCiAgICAoMHhGRkI3LCAnTScsICfhhIsnKSwKICAgICgweEZGQjgsICdNJywgJ+GEjCcpLAogICAgKDB4RkZCOSwgJ00nLCAn4YSNJyksCiAgICAoMHhGRkJBLCAnTScsICfhhI4nKSwKICAgICgweEZGQkIsICdNJywgJ+GEjycpLAogICAgKDB4RkZCQywgJ00nLCAn4YSQJyksCiAgICAoMHhGRkJELCAnTScsICfhhJEnKSwKICAgICgweEZGQkUsICdNJywgJ+GEkicpLAogICAgKDB4RkZCRiwgJ1gnKSwKICAgICgweEZGQzIsICdNJywgJ+GFoScpLAogICAgKDB4RkZDMywgJ00nLCAn4YWiJyksCiAgICAoMHhGRkM0LCAnTScsICfhhaMnKSwKICAgICgweEZGQzUsICdNJywgJ+GFpCcpLAogICAgKDB4RkZDNiwgJ00nLCAn4YWlJyksCiAgICAoMHhGRkM3LCAnTScsICfhhaYnKSwKICAgICgweEZGQzgsICdYJyksCiAgICAoMHhGRkNBLCAnTScsICfhhacnKSwKICAgICgweEZGQ0IsICdNJywgJ+GFqCcpLAogICAgKDB4RkZDQywgJ00nLCAn4YWpJyksCiAgICAoMHhGRkNELCAnTScsICfhhaonKSwKICAgICgweEZGQ0UsICdNJywgJ+GFqycpLAogICAgKDB4RkZDRiwgJ00nLCAn4YWsJyksCiAgICAoMHhGRkQwLCAnWCcpLAogICAgKDB4RkZEMiwgJ00nLCAn4YWtJyksCiAgICAoMHhGRkQzLCAnTScsICfhha4nKSwKICAgICgweEZGRDQsICdNJywgJ+GFrycpLAogICAgKDB4RkZENSwgJ00nLCAn4YWwJyksCiAgICAoMHhGRkQ2LCAnTScsICfhhbEnKSwKICAgICgweEZGRDcsICdNJywgJ+GFsicpLAogICAgKDB4RkZEOCwgJ1gnKSwKICAgICgweEZGREEsICdNJywgJ+GFsycpLAogICAgKDB4RkZEQiwgJ00nLCAn4YW0JyksCiAgICAoMHhGRkRDLCAnTScsICfhhbUnKSwKICAgICgweEZGREQsICdYJyksCiAgICAoMHhGRkUwLCAnTScsICfCoicpLAogICAgKDB4RkZFMSwgJ00nLCAnwqMnKSwKICAgICgweEZGRTIsICdNJywgJ8KsJyksCiAgICAoMHhGRkUzLCAnMycsICcgzIQnKSwKICAgICgweEZGRTQsICdNJywgJ8KmJyksCiAgICAoMHhGRkU1LCAnTScsICfCpScpLAogICAgKDB4RkZFNiwgJ00nLCAn4oKpJyksCiAgICAoMHhGRkU3LCAnWCcpLAogICAgKDB4RkZFOCwgJ00nLCAn4pSCJyksCiAgICAoMHhGRkU5LCAnTScsICfihpAnKSwKICAgIF0KCmRlZiBfc2VnXzUzKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4RkZFQSwgJ00nLCAn4oaRJyksCiAgICAoMHhGRkVCLCAnTScsICfihpInKSwKICAgICgweEZGRUMsICdNJywgJ+KGkycpLAogICAgKDB4RkZFRCwgJ00nLCAn4pagJyksCiAgICAoMHhGRkVFLCAnTScsICfil4snKSwKICAgICgweEZGRUYsICdYJyksCiAgICAoMHgxMDAwMCwgJ1YnKSwKICAgICgweDEwMDBDLCAnWCcpLAogICAgKDB4MTAwMEQsICdWJyksCiAgICAoMHgxMDAyNywgJ1gnKSwKICAgICgweDEwMDI4LCAnVicpLAogICAgKDB4MTAwM0IsICdYJyksCiAgICAoMHgxMDAzQywgJ1YnKSwKICAgICgweDEwMDNFLCAnWCcpLAogICAgKDB4MTAwM0YsICdWJyksCiAgICAoMHgxMDA0RSwgJ1gnKSwKICAgICgweDEwMDUwLCAnVicpLAogICAgKDB4MTAwNUUsICdYJyksCiAgICAoMHgxMDA4MCwgJ1YnKSwKICAgICgweDEwMEZCLCAnWCcpLAogICAgKDB4MTAxMDAsICdWJyksCiAgICAoMHgxMDEwMywgJ1gnKSwKICAgICgweDEwMTA3LCAnVicpLAogICAgKDB4MTAxMzQsICdYJyksCiAgICAoMHgxMDEzNywgJ1YnKSwKICAgICgweDEwMThGLCAnWCcpLAogICAgKDB4MTAxOTAsICdWJyksCiAgICAoMHgxMDE5RCwgJ1gnKSwKICAgICgweDEwMUEwLCAnVicpLAogICAgKDB4MTAxQTEsICdYJyksCiAgICAoMHgxMDFEMCwgJ1YnKSwKICAgICgweDEwMUZFLCAnWCcpLAogICAgKDB4MTAyODAsICdWJyksCiAgICAoMHgxMDI5RCwgJ1gnKSwKICAgICgweDEwMkEwLCAnVicpLAogICAgKDB4MTAyRDEsICdYJyksCiAgICAoMHgxMDJFMCwgJ1YnKSwKICAgICgweDEwMkZDLCAnWCcpLAogICAgKDB4MTAzMDAsICdWJyksCiAgICAoMHgxMDMyNCwgJ1gnKSwKICAgICgweDEwMzJELCAnVicpLAogICAgKDB4MTAzNEIsICdYJyksCiAgICAoMHgxMDM1MCwgJ1YnKSwKICAgICgweDEwMzdCLCAnWCcpLAogICAgKDB4MTAzODAsICdWJyksCiAgICAoMHgxMDM5RSwgJ1gnKSwKICAgICgweDEwMzlGLCAnVicpLAogICAgKDB4MTAzQzQsICdYJyksCiAgICAoMHgxMDNDOCwgJ1YnKSwKICAgICgweDEwM0Q2LCAnWCcpLAogICAgKDB4MTA0MDAsICdNJywgJ/CQkKgnKSwKICAgICgweDEwNDAxLCAnTScsICfwkJCpJyksCiAgICAoMHgxMDQwMiwgJ00nLCAn8JCQqicpLAogICAgKDB4MTA0MDMsICdNJywgJ/CQkKsnKSwKICAgICgweDEwNDA0LCAnTScsICfwkJCsJyksCiAgICAoMHgxMDQwNSwgJ00nLCAn8JCQrScpLAogICAgKDB4MTA0MDYsICdNJywgJ/CQkK4nKSwKICAgICgweDEwNDA3LCAnTScsICfwkJCvJyksCiAgICAoMHgxMDQwOCwgJ00nLCAn8JCQsCcpLAogICAgKDB4MTA0MDksICdNJywgJ/CQkLEnKSwKICAgICgweDEwNDBBLCAnTScsICfwkJCyJyksCiAgICAoMHgxMDQwQiwgJ00nLCAn8JCQsycpLAogICAgKDB4MTA0MEMsICdNJywgJ/CQkLQnKSwKICAgICgweDEwNDBELCAnTScsICfwkJC1JyksCiAgICAoMHgxMDQwRSwgJ00nLCAn8JCQticpLAogICAgKDB4MTA0MEYsICdNJywgJ/CQkLcnKSwKICAgICgweDEwNDEwLCAnTScsICfwkJC4JyksCiAgICAoMHgxMDQxMSwgJ00nLCAn8JCQuScpLAogICAgKDB4MTA0MTIsICdNJywgJ/CQkLonKSwKICAgICgweDEwNDEzLCAnTScsICfwkJC7JyksCiAgICAoMHgxMDQxNCwgJ00nLCAn8JCQvCcpLAogICAgKDB4MTA0MTUsICdNJywgJ/CQkL0nKSwKICAgICgweDEwNDE2LCAnTScsICfwkJC+JyksCiAgICAoMHgxMDQxNywgJ00nLCAn8JCQvycpLAogICAgKDB4MTA0MTgsICdNJywgJ/CQkYAnKSwKICAgICgweDEwNDE5LCAnTScsICfwkJGBJyksCiAgICAoMHgxMDQxQSwgJ00nLCAn8JCRgicpLAogICAgKDB4MTA0MUIsICdNJywgJ/CQkYMnKSwKICAgICgweDEwNDFDLCAnTScsICfwkJGEJyksCiAgICAoMHgxMDQxRCwgJ00nLCAn8JCRhScpLAogICAgKDB4MTA0MUUsICdNJywgJ/CQkYYnKSwKICAgICgweDEwNDFGLCAnTScsICfwkJGHJyksCiAgICAoMHgxMDQyMCwgJ00nLCAn8JCRiCcpLAogICAgKDB4MTA0MjEsICdNJywgJ/CQkYknKSwKICAgICgweDEwNDIyLCAnTScsICfwkJGKJyksCiAgICAoMHgxMDQyMywgJ00nLCAn8JCRiycpLAogICAgKDB4MTA0MjQsICdNJywgJ/CQkYwnKSwKICAgICgweDEwNDI1LCAnTScsICfwkJGNJyksCiAgICAoMHgxMDQyNiwgJ00nLCAn8JCRjicpLAogICAgKDB4MTA0MjcsICdNJywgJ/CQkY8nKSwKICAgICgweDEwNDI4LCAnVicpLAogICAgKDB4MTA0OUUsICdYJyksCiAgICAoMHgxMDRBMCwgJ1YnKSwKICAgICgweDEwNEFBLCAnWCcpLAogICAgKDB4MTA0QjAsICdNJywgJ/CQk5gnKSwKICAgICgweDEwNEIxLCAnTScsICfwkJOZJyksCiAgICAoMHgxMDRCMiwgJ00nLCAn8JCTmicpLAogICAgKDB4MTA0QjMsICdNJywgJ/CQk5snKSwKICAgICgweDEwNEI0LCAnTScsICfwkJOcJyksCiAgICAoMHgxMDRCNSwgJ00nLCAn8JCTnScpLAogICAgXQoKZGVmIF9zZWdfNTQoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXToKICAgIHJldHVybiBbCiAgICAoMHgxMDRCNiwgJ00nLCAn8JCTnicpLAogICAgKDB4MTA0QjcsICdNJywgJ/CQk58nKSwKICAgICgweDEwNEI4LCAnTScsICfwkJOgJyksCiAgICAoMHgxMDRCOSwgJ00nLCAn8JCToScpLAogICAgKDB4MTA0QkEsICdNJywgJ/CQk6InKSwKICAgICgweDEwNEJCLCAnTScsICfwkJOjJyksCiAgICAoMHgxMDRCQywgJ00nLCAn8JCTpCcpLAogICAgKDB4MTA0QkQsICdNJywgJ/CQk6UnKSwKICAgICgweDEwNEJFLCAnTScsICfwkJOmJyksCiAgICAoMHgxMDRCRiwgJ00nLCAn8JCTpycpLAogICAgKDB4MTA0QzAsICdNJywgJ/CQk6gnKSwKICAgICgweDEwNEMxLCAnTScsICfwkJOpJyksCiAgICAoMHgxMDRDMiwgJ00nLCAn8JCTqicpLAogICAgKDB4MTA0QzMsICdNJywgJ/CQk6snKSwKICAgICgweDEwNEM0LCAnTScsICfwkJOsJyksCiAgICAoMHgxMDRDNSwgJ00nLCAn8JCTrScpLAogICAgKDB4MTA0QzYsICdNJywgJ/CQk64nKSwKICAgICgweDEwNEM3LCAnTScsICfwkJOvJyksCiAgICAoMHgxMDRDOCwgJ00nLCAn8JCTsCcpLAogICAgKDB4MTA0QzksICdNJywgJ/CQk7EnKSwKICAgICgweDEwNENBLCAnTScsICfwkJOyJyksCiAgICAoMHgxMDRDQiwgJ00nLCAn8JCTsycpLAogICAgKDB4MTA0Q0MsICdNJywgJ/CQk7QnKSwKICAgICgweDEwNENELCAnTScsICfwkJO1JyksCiAgICAoMHgxMDRDRSwgJ00nLCAn8JCTticpLAogICAgKDB4MTA0Q0YsICdNJywgJ/CQk7cnKSwKICAgICgweDEwNEQwLCAnTScsICfwkJO4JyksCiAgICAoMHgxMDREMSwgJ00nLCAn8JCTuScpLAogICAgKDB4MTA0RDIsICdNJywgJ/CQk7onKSwKICAgICgweDEwNEQzLCAnTScsICfwkJO7JyksCiAgICAoMHgxMDRENCwgJ1gnKSwKICAgICgweDEwNEQ4LCAnVicpLAogICAgKDB4MTA0RkMsICdYJyksCiAgICAoMHgxMDUwMCwgJ1YnKSwKICAgICgweDEwNTI4LCAnWCcpLAogICAgKDB4MTA1MzAsICdWJyksCiAgICAoMHgxMDU2NCwgJ1gnKSwKICAgICgweDEwNTZGLCAnVicpLAogICAgKDB4MTA1NzAsICdNJywgJ/CQlpcnKSwKICAgICgweDEwNTcxLCAnTScsICfwkJaYJyksCiAgICAoMHgxMDU3MiwgJ00nLCAn8JCWmScpLAogICAgKDB4MTA1NzMsICdNJywgJ/CQlponKSwKICAgICgweDEwNTc0LCAnTScsICfwkJabJyksCiAgICAoMHgxMDU3NSwgJ00nLCAn8JCWnCcpLAogICAgKDB4MTA1NzYsICdNJywgJ/CQlp0nKSwKICAgICgweDEwNTc3LCAnTScsICfwkJaeJyksCiAgICAoMHgxMDU3OCwgJ00nLCAn8JCWnycpLAogICAgKDB4MTA1NzksICdNJywgJ/CQlqAnKSwKICAgICgweDEwNTdBLCAnTScsICfwkJahJyksCiAgICAoMHgxMDU3QiwgJ1gnKSwKICAgICgweDEwNTdDLCAnTScsICfwkJajJyksCiAgICAoMHgxMDU3RCwgJ00nLCAn8JCWpCcpLAogICAgKDB4MTA1N0UsICdNJywgJ/CQlqUnKSwKICAgICgweDEwNTdGLCAnTScsICfwkJamJyksCiAgICAoMHgxMDU4MCwgJ00nLCAn8JCWpycpLAogICAgKDB4MTA1ODEsICdNJywgJ/CQlqgnKSwKICAgICgweDEwNTgyLCAnTScsICfwkJapJyksCiAgICAoMHgxMDU4MywgJ00nLCAn8JCWqicpLAogICAgKDB4MTA1ODQsICdNJywgJ/CQlqsnKSwKICAgICgweDEwNTg1LCAnTScsICfwkJasJyksCiAgICAoMHgxMDU4NiwgJ00nLCAn8JCWrScpLAogICAgKDB4MTA1ODcsICdNJywgJ/CQlq4nKSwKICAgICgweDEwNTg4LCAnTScsICfwkJavJyksCiAgICAoMHgxMDU4OSwgJ00nLCAn8JCWsCcpLAogICAgKDB4MTA1OEEsICdNJywgJ/CQlrEnKSwKICAgICgweDEwNThCLCAnWCcpLAogICAgKDB4MTA1OEMsICdNJywgJ/CQlrMnKSwKICAgICgweDEwNThELCAnTScsICfwkJa0JyksCiAgICAoMHgxMDU4RSwgJ00nLCAn8JCWtScpLAogICAgKDB4MTA1OEYsICdNJywgJ/CQlrYnKSwKICAgICgweDEwNTkwLCAnTScsICfwkJa3JyksCiAgICAoMHgxMDU5MSwgJ00nLCAn8JCWuCcpLAogICAgKDB4MTA1OTIsICdNJywgJ/CQlrknKSwKICAgICgweDEwNTkzLCAnWCcpLAogICAgKDB4MTA1OTQsICdNJywgJ/CQlrsnKSwKICAgICgweDEwNTk1LCAnTScsICfwkJa8JyksCiAgICAoMHgxMDU5NiwgJ1gnKSwKICAgICgweDEwNTk3LCAnVicpLAogICAgKDB4MTA1QTIsICdYJyksCiAgICAoMHgxMDVBMywgJ1YnKSwKICAgICgweDEwNUIyLCAnWCcpLAogICAgKDB4MTA1QjMsICdWJyksCiAgICAoMHgxMDVCQSwgJ1gnKSwKICAgICgweDEwNUJCLCAnVicpLAogICAgKDB4MTA1QkQsICdYJyksCiAgICAoMHgxMDYwMCwgJ1YnKSwKICAgICgweDEwNzM3LCAnWCcpLAogICAgKDB4MTA3NDAsICdWJyksCiAgICAoMHgxMDc1NiwgJ1gnKSwKICAgICgweDEwNzYwLCAnVicpLAogICAgKDB4MTA3NjgsICdYJyksCiAgICAoMHgxMDc4MCwgJ1YnKSwKICAgICgweDEwNzgxLCAnTScsICfLkCcpLAogICAgKDB4MTA3ODIsICdNJywgJ8uRJyksCiAgICAoMHgxMDc4MywgJ00nLCAnw6YnKSwKICAgICgweDEwNzg0LCAnTScsICfKmScpLAogICAgKDB4MTA3ODUsICdNJywgJ8mTJyksCiAgICAoMHgxMDc4NiwgJ1gnKSwKICAgICgweDEwNzg3LCAnTScsICfKoycpLAogICAgKDB4MTA3ODgsICdNJywgJ+qtpicpLAogICAgXQoKZGVmIF9zZWdfNTUoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXToKICAgIHJldHVybiBbCiAgICAoMHgxMDc4OSwgJ00nLCAnyqUnKSwKICAgICgweDEwNzhBLCAnTScsICfKpCcpLAogICAgKDB4MTA3OEIsICdNJywgJ8mWJyksCiAgICAoMHgxMDc4QywgJ00nLCAnyZcnKSwKICAgICgweDEwNzhELCAnTScsICfhtpEnKSwKICAgICgweDEwNzhFLCAnTScsICfJmCcpLAogICAgKDB4MTA3OEYsICdNJywgJ8meJyksCiAgICAoMHgxMDc5MCwgJ00nLCAnyqknKSwKICAgICgweDEwNzkxLCAnTScsICfJpCcpLAogICAgKDB4MTA3OTIsICdNJywgJ8miJyksCiAgICAoMHgxMDc5MywgJ00nLCAnyaAnKSwKICAgICgweDEwNzk0LCAnTScsICfKmycpLAogICAgKDB4MTA3OTUsICdNJywgJ8SnJyksCiAgICAoMHgxMDc5NiwgJ00nLCAnypwnKSwKICAgICgweDEwNzk3LCAnTScsICfJpycpLAogICAgKDB4MTA3OTgsICdNJywgJ8qEJyksCiAgICAoMHgxMDc5OSwgJ00nLCAnyqonKSwKICAgICgweDEwNzlBLCAnTScsICfKqycpLAogICAgKDB4MTA3OUIsICdNJywgJ8msJyksCiAgICAoMHgxMDc5QywgJ00nLCAn8J28hCcpLAogICAgKDB4MTA3OUQsICdNJywgJ+qejicpLAogICAgKDB4MTA3OUUsICdNJywgJ8muJyksCiAgICAoMHgxMDc5RiwgJ00nLCAn8J28hScpLAogICAgKDB4MTA3QTAsICdNJywgJ8qOJyksCiAgICAoMHgxMDdBMSwgJ00nLCAn8J28hicpLAogICAgKDB4MTA3QTIsICdNJywgJ8O4JyksCiAgICAoMHgxMDdBMywgJ00nLCAnybYnKSwKICAgICgweDEwN0E0LCAnTScsICfJtycpLAogICAgKDB4MTA3QTUsICdNJywgJ3EnKSwKICAgICgweDEwN0E2LCAnTScsICfJuicpLAogICAgKDB4MTA3QTcsICdNJywgJ/CdvIgnKSwKICAgICgweDEwN0E4LCAnTScsICfJvScpLAogICAgKDB4MTA3QTksICdNJywgJ8m+JyksCiAgICAoMHgxMDdBQSwgJ00nLCAnyoAnKSwKICAgICgweDEwN0FCLCAnTScsICfKqCcpLAogICAgKDB4MTA3QUMsICdNJywgJ8qmJyksCiAgICAoMHgxMDdBRCwgJ00nLCAn6q2nJyksCiAgICAoMHgxMDdBRSwgJ00nLCAnyqcnKSwKICAgICgweDEwN0FGLCAnTScsICfKiCcpLAogICAgKDB4MTA3QjAsICdNJywgJ+KxsScpLAogICAgKDB4MTA3QjEsICdYJyksCiAgICAoMHgxMDdCMiwgJ00nLCAnyo8nKSwKICAgICgweDEwN0IzLCAnTScsICfKoScpLAogICAgKDB4MTA3QjQsICdNJywgJ8qiJyksCiAgICAoMHgxMDdCNSwgJ00nLCAnypgnKSwKICAgICgweDEwN0I2LCAnTScsICfHgCcpLAogICAgKDB4MTA3QjcsICdNJywgJ8eBJyksCiAgICAoMHgxMDdCOCwgJ00nLCAnx4InKSwKICAgICgweDEwN0I5LCAnTScsICfwnbyKJyksCiAgICAoMHgxMDdCQSwgJ00nLCAn8J28nicpLAogICAgKDB4MTA3QkIsICdYJyksCiAgICAoMHgxMDgwMCwgJ1YnKSwKICAgICgweDEwODA2LCAnWCcpLAogICAgKDB4MTA4MDgsICdWJyksCiAgICAoMHgxMDgwOSwgJ1gnKSwKICAgICgweDEwODBBLCAnVicpLAogICAgKDB4MTA4MzYsICdYJyksCiAgICAoMHgxMDgzNywgJ1YnKSwKICAgICgweDEwODM5LCAnWCcpLAogICAgKDB4MTA4M0MsICdWJyksCiAgICAoMHgxMDgzRCwgJ1gnKSwKICAgICgweDEwODNGLCAnVicpLAogICAgKDB4MTA4NTYsICdYJyksCiAgICAoMHgxMDg1NywgJ1YnKSwKICAgICgweDEwODlGLCAnWCcpLAogICAgKDB4MTA4QTcsICdWJyksCiAgICAoMHgxMDhCMCwgJ1gnKSwKICAgICgweDEwOEUwLCAnVicpLAogICAgKDB4MTA4RjMsICdYJyksCiAgICAoMHgxMDhGNCwgJ1YnKSwKICAgICgweDEwOEY2LCAnWCcpLAogICAgKDB4MTA4RkIsICdWJyksCiAgICAoMHgxMDkxQywgJ1gnKSwKICAgICgweDEwOTFGLCAnVicpLAogICAgKDB4MTA5M0EsICdYJyksCiAgICAoMHgxMDkzRiwgJ1YnKSwKICAgICgweDEwOTQwLCAnWCcpLAogICAgKDB4MTA5ODAsICdWJyksCiAgICAoMHgxMDlCOCwgJ1gnKSwKICAgICgweDEwOUJDLCAnVicpLAogICAgKDB4MTA5RDAsICdYJyksCiAgICAoMHgxMDlEMiwgJ1YnKSwKICAgICgweDEwQTA0LCAnWCcpLAogICAgKDB4MTBBMDUsICdWJyksCiAgICAoMHgxMEEwNywgJ1gnKSwKICAgICgweDEwQTBDLCAnVicpLAogICAgKDB4MTBBMTQsICdYJyksCiAgICAoMHgxMEExNSwgJ1YnKSwKICAgICgweDEwQTE4LCAnWCcpLAogICAgKDB4MTBBMTksICdWJyksCiAgICAoMHgxMEEzNiwgJ1gnKSwKICAgICgweDEwQTM4LCAnVicpLAogICAgKDB4MTBBM0IsICdYJyksCiAgICAoMHgxMEEzRiwgJ1YnKSwKICAgICgweDEwQTQ5LCAnWCcpLAogICAgKDB4MTBBNTAsICdWJyksCiAgICAoMHgxMEE1OSwgJ1gnKSwKICAgICgweDEwQTYwLCAnVicpLAogICAgKDB4MTBBQTAsICdYJyksCiAgICAoMHgxMEFDMCwgJ1YnKSwKICAgIF0KCmRlZiBfc2VnXzU2KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4MTBBRTcsICdYJyksCiAgICAoMHgxMEFFQiwgJ1YnKSwKICAgICgweDEwQUY3LCAnWCcpLAogICAgKDB4MTBCMDAsICdWJyksCiAgICAoMHgxMEIzNiwgJ1gnKSwKICAgICgweDEwQjM5LCAnVicpLAogICAgKDB4MTBCNTYsICdYJyksCiAgICAoMHgxMEI1OCwgJ1YnKSwKICAgICgweDEwQjczLCAnWCcpLAogICAgKDB4MTBCNzgsICdWJyksCiAgICAoMHgxMEI5MiwgJ1gnKSwKICAgICgweDEwQjk5LCAnVicpLAogICAgKDB4MTBCOUQsICdYJyksCiAgICAoMHgxMEJBOSwgJ1YnKSwKICAgICgweDEwQkIwLCAnWCcpLAogICAgKDB4MTBDMDAsICdWJyksCiAgICAoMHgxMEM0OSwgJ1gnKSwKICAgICgweDEwQzgwLCAnTScsICfwkLOAJyksCiAgICAoMHgxMEM4MSwgJ00nLCAn8JCzgScpLAogICAgKDB4MTBDODIsICdNJywgJ/CQs4InKSwKICAgICgweDEwQzgzLCAnTScsICfwkLODJyksCiAgICAoMHgxMEM4NCwgJ00nLCAn8JCzhCcpLAogICAgKDB4MTBDODUsICdNJywgJ/CQs4UnKSwKICAgICgweDEwQzg2LCAnTScsICfwkLOGJyksCiAgICAoMHgxMEM4NywgJ00nLCAn8JCzhycpLAogICAgKDB4MTBDODgsICdNJywgJ/CQs4gnKSwKICAgICgweDEwQzg5LCAnTScsICfwkLOJJyksCiAgICAoMHgxMEM4QSwgJ00nLCAn8JCziicpLAogICAgKDB4MTBDOEIsICdNJywgJ/CQs4snKSwKICAgICgweDEwQzhDLCAnTScsICfwkLOMJyksCiAgICAoMHgxMEM4RCwgJ00nLCAn8JCzjScpLAogICAgKDB4MTBDOEUsICdNJywgJ/CQs44nKSwKICAgICgweDEwQzhGLCAnTScsICfwkLOPJyksCiAgICAoMHgxMEM5MCwgJ00nLCAn8JCzkCcpLAogICAgKDB4MTBDOTEsICdNJywgJ/CQs5EnKSwKICAgICgweDEwQzkyLCAnTScsICfwkLOSJyksCiAgICAoMHgxMEM5MywgJ00nLCAn8JCzkycpLAogICAgKDB4MTBDOTQsICdNJywgJ/CQs5QnKSwKICAgICgweDEwQzk1LCAnTScsICfwkLOVJyksCiAgICAoMHgxMEM5NiwgJ00nLCAn8JCzlicpLAogICAgKDB4MTBDOTcsICdNJywgJ/CQs5cnKSwKICAgICgweDEwQzk4LCAnTScsICfwkLOYJyksCiAgICAoMHgxMEM5OSwgJ00nLCAn8JCzmScpLAogICAgKDB4MTBDOUEsICdNJywgJ/CQs5onKSwKICAgICgweDEwQzlCLCAnTScsICfwkLObJyksCiAgICAoMHgxMEM5QywgJ00nLCAn8JCznCcpLAogICAgKDB4MTBDOUQsICdNJywgJ/CQs50nKSwKICAgICgweDEwQzlFLCAnTScsICfwkLOeJyksCiAgICAoMHgxMEM5RiwgJ00nLCAn8JCznycpLAogICAgKDB4MTBDQTAsICdNJywgJ/CQs6AnKSwKICAgICgweDEwQ0ExLCAnTScsICfwkLOhJyksCiAgICAoMHgxMENBMiwgJ00nLCAn8JCzoicpLAogICAgKDB4MTBDQTMsICdNJywgJ/CQs6MnKSwKICAgICgweDEwQ0E0LCAnTScsICfwkLOkJyksCiAgICAoMHgxMENBNSwgJ00nLCAn8JCzpScpLAogICAgKDB4MTBDQTYsICdNJywgJ/CQs6YnKSwKICAgICgweDEwQ0E3LCAnTScsICfwkLOnJyksCiAgICAoMHgxMENBOCwgJ00nLCAn8JCzqCcpLAogICAgKDB4MTBDQTksICdNJywgJ/CQs6knKSwKICAgICgweDEwQ0FBLCAnTScsICfwkLOqJyksCiAgICAoMHgxMENBQiwgJ00nLCAn8JCzqycpLAogICAgKDB4MTBDQUMsICdNJywgJ/CQs6wnKSwKICAgICgweDEwQ0FELCAnTScsICfwkLOtJyksCiAgICAoMHgxMENBRSwgJ00nLCAn8JCzricpLAogICAgKDB4MTBDQUYsICdNJywgJ/CQs68nKSwKICAgICgweDEwQ0IwLCAnTScsICfwkLOwJyksCiAgICAoMHgxMENCMSwgJ00nLCAn8JCzsScpLAogICAgKDB4MTBDQjIsICdNJywgJ/CQs7InKSwKICAgICgweDEwQ0IzLCAnWCcpLAogICAgKDB4MTBDQzAsICdWJyksCiAgICAoMHgxMENGMywgJ1gnKSwKICAgICgweDEwQ0ZBLCAnVicpLAogICAgKDB4MTBEMjgsICdYJyksCiAgICAoMHgxMEQzMCwgJ1YnKSwKICAgICgweDEwRDNBLCAnWCcpLAogICAgKDB4MTBFNjAsICdWJyksCiAgICAoMHgxMEU3RiwgJ1gnKSwKICAgICgweDEwRTgwLCAnVicpLAogICAgKDB4MTBFQUEsICdYJyksCiAgICAoMHgxMEVBQiwgJ1YnKSwKICAgICgweDEwRUFFLCAnWCcpLAogICAgKDB4MTBFQjAsICdWJyksCiAgICAoMHgxMEVCMiwgJ1gnKSwKICAgICgweDEwRjAwLCAnVicpLAogICAgKDB4MTBGMjgsICdYJyksCiAgICAoMHgxMEYzMCwgJ1YnKSwKICAgICgweDEwRjVBLCAnWCcpLAogICAgKDB4MTBGNzAsICdWJyksCiAgICAoMHgxMEY4QSwgJ1gnKSwKICAgICgweDEwRkIwLCAnVicpLAogICAgKDB4MTBGQ0MsICdYJyksCiAgICAoMHgxMEZFMCwgJ1YnKSwKICAgICgweDEwRkY3LCAnWCcpLAogICAgKDB4MTEwMDAsICdWJyksCiAgICAoMHgxMTA0RSwgJ1gnKSwKICAgICgweDExMDUyLCAnVicpLAogICAgKDB4MTEwNzYsICdYJyksCiAgICAoMHgxMTA3RiwgJ1YnKSwKICAgICgweDExMEJELCAnWCcpLAogICAgKDB4MTEwQkUsICdWJyksCiAgICBdCgpkZWYgX3NlZ181NygpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweDExMEMzLCAnWCcpLAogICAgKDB4MTEwRDAsICdWJyksCiAgICAoMHgxMTBFOSwgJ1gnKSwKICAgICgweDExMEYwLCAnVicpLAogICAgKDB4MTEwRkEsICdYJyksCiAgICAoMHgxMTEwMCwgJ1YnKSwKICAgICgweDExMTM1LCAnWCcpLAogICAgKDB4MTExMzYsICdWJyksCiAgICAoMHgxMTE0OCwgJ1gnKSwKICAgICgweDExMTUwLCAnVicpLAogICAgKDB4MTExNzcsICdYJyksCiAgICAoMHgxMTE4MCwgJ1YnKSwKICAgICgweDExMUUwLCAnWCcpLAogICAgKDB4MTExRTEsICdWJyksCiAgICAoMHgxMTFGNSwgJ1gnKSwKICAgICgweDExMjAwLCAnVicpLAogICAgKDB4MTEyMTIsICdYJyksCiAgICAoMHgxMTIxMywgJ1YnKSwKICAgICgweDExMjNGLCAnWCcpLAogICAgKDB4MTEyODAsICdWJyksCiAgICAoMHgxMTI4NywgJ1gnKSwKICAgICgweDExMjg4LCAnVicpLAogICAgKDB4MTEyODksICdYJyksCiAgICAoMHgxMTI4QSwgJ1YnKSwKICAgICgweDExMjhFLCAnWCcpLAogICAgKDB4MTEyOEYsICdWJyksCiAgICAoMHgxMTI5RSwgJ1gnKSwKICAgICgweDExMjlGLCAnVicpLAogICAgKDB4MTEyQUEsICdYJyksCiAgICAoMHgxMTJCMCwgJ1YnKSwKICAgICgweDExMkVCLCAnWCcpLAogICAgKDB4MTEyRjAsICdWJyksCiAgICAoMHgxMTJGQSwgJ1gnKSwKICAgICgweDExMzAwLCAnVicpLAogICAgKDB4MTEzMDQsICdYJyksCiAgICAoMHgxMTMwNSwgJ1YnKSwKICAgICgweDExMzBELCAnWCcpLAogICAgKDB4MTEzMEYsICdWJyksCiAgICAoMHgxMTMxMSwgJ1gnKSwKICAgICgweDExMzEzLCAnVicpLAogICAgKDB4MTEzMjksICdYJyksCiAgICAoMHgxMTMyQSwgJ1YnKSwKICAgICgweDExMzMxLCAnWCcpLAogICAgKDB4MTEzMzIsICdWJyksCiAgICAoMHgxMTMzNCwgJ1gnKSwKICAgICgweDExMzM1LCAnVicpLAogICAgKDB4MTEzM0EsICdYJyksCiAgICAoMHgxMTMzQiwgJ1YnKSwKICAgICgweDExMzQ1LCAnWCcpLAogICAgKDB4MTEzNDcsICdWJyksCiAgICAoMHgxMTM0OSwgJ1gnKSwKICAgICgweDExMzRCLCAnVicpLAogICAgKDB4MTEzNEUsICdYJyksCiAgICAoMHgxMTM1MCwgJ1YnKSwKICAgICgweDExMzUxLCAnWCcpLAogICAgKDB4MTEzNTcsICdWJyksCiAgICAoMHgxMTM1OCwgJ1gnKSwKICAgICgweDExMzVELCAnVicpLAogICAgKDB4MTEzNjQsICdYJyksCiAgICAoMHgxMTM2NiwgJ1YnKSwKICAgICgweDExMzZELCAnWCcpLAogICAgKDB4MTEzNzAsICdWJyksCiAgICAoMHgxMTM3NSwgJ1gnKSwKICAgICgweDExNDAwLCAnVicpLAogICAgKDB4MTE0NUMsICdYJyksCiAgICAoMHgxMTQ1RCwgJ1YnKSwKICAgICgweDExNDYyLCAnWCcpLAogICAgKDB4MTE0ODAsICdWJyksCiAgICAoMHgxMTRDOCwgJ1gnKSwKICAgICgweDExNEQwLCAnVicpLAogICAgKDB4MTE0REEsICdYJyksCiAgICAoMHgxMTU4MCwgJ1YnKSwKICAgICgweDExNUI2LCAnWCcpLAogICAgKDB4MTE1QjgsICdWJyksCiAgICAoMHgxMTVERSwgJ1gnKSwKICAgICgweDExNjAwLCAnVicpLAogICAgKDB4MTE2NDUsICdYJyksCiAgICAoMHgxMTY1MCwgJ1YnKSwKICAgICgweDExNjVBLCAnWCcpLAogICAgKDB4MTE2NjAsICdWJyksCiAgICAoMHgxMTY2RCwgJ1gnKSwKICAgICgweDExNjgwLCAnVicpLAogICAgKDB4MTE2QkEsICdYJyksCiAgICAoMHgxMTZDMCwgJ1YnKSwKICAgICgweDExNkNBLCAnWCcpLAogICAgKDB4MTE3MDAsICdWJyksCiAgICAoMHgxMTcxQiwgJ1gnKSwKICAgICgweDExNzFELCAnVicpLAogICAgKDB4MTE3MkMsICdYJyksCiAgICAoMHgxMTczMCwgJ1YnKSwKICAgICgweDExNzQ3LCAnWCcpLAogICAgKDB4MTE4MDAsICdWJyksCiAgICAoMHgxMTgzQywgJ1gnKSwKICAgICgweDExOEEwLCAnTScsICfwkaOAJyksCiAgICAoMHgxMThBMSwgJ00nLCAn8JGjgScpLAogICAgKDB4MTE4QTIsICdNJywgJ/CRo4InKSwKICAgICgweDExOEEzLCAnTScsICfwkaODJyksCiAgICAoMHgxMThBNCwgJ00nLCAn8JGjhCcpLAogICAgKDB4MTE4QTUsICdNJywgJ/CRo4UnKSwKICAgICgweDExOEE2LCAnTScsICfwkaOGJyksCiAgICBdCgpkZWYgX3NlZ181OCgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweDExOEE3LCAnTScsICfwkaOHJyksCiAgICAoMHgxMThBOCwgJ00nLCAn8JGjiCcpLAogICAgKDB4MTE4QTksICdNJywgJ/CRo4knKSwKICAgICgweDExOEFBLCAnTScsICfwkaOKJyksCiAgICAoMHgxMThBQiwgJ00nLCAn8JGjiycpLAogICAgKDB4MTE4QUMsICdNJywgJ/CRo4wnKSwKICAgICgweDExOEFELCAnTScsICfwkaONJyksCiAgICAoMHgxMThBRSwgJ00nLCAn8JGjjicpLAogICAgKDB4MTE4QUYsICdNJywgJ/CRo48nKSwKICAgICgweDExOEIwLCAnTScsICfwkaOQJyksCiAgICAoMHgxMThCMSwgJ00nLCAn8JGjkScpLAogICAgKDB4MTE4QjIsICdNJywgJ/CRo5InKSwKICAgICgweDExOEIzLCAnTScsICfwkaOTJyksCiAgICAoMHgxMThCNCwgJ00nLCAn8JGjlCcpLAogICAgKDB4MTE4QjUsICdNJywgJ/CRo5UnKSwKICAgICgweDExOEI2LCAnTScsICfwkaOWJyksCiAgICAoMHgxMThCNywgJ00nLCAn8JGjlycpLAogICAgKDB4MTE4QjgsICdNJywgJ/CRo5gnKSwKICAgICgweDExOEI5LCAnTScsICfwkaOZJyksCiAgICAoMHgxMThCQSwgJ00nLCAn8JGjmicpLAogICAgKDB4MTE4QkIsICdNJywgJ/CRo5snKSwKICAgICgweDExOEJDLCAnTScsICfwkaOcJyksCiAgICAoMHgxMThCRCwgJ00nLCAn8JGjnScpLAogICAgKDB4MTE4QkUsICdNJywgJ/CRo54nKSwKICAgICgweDExOEJGLCAnTScsICfwkaOfJyksCiAgICAoMHgxMThDMCwgJ1YnKSwKICAgICgweDExOEYzLCAnWCcpLAogICAgKDB4MTE4RkYsICdWJyksCiAgICAoMHgxMTkwNywgJ1gnKSwKICAgICgweDExOTA5LCAnVicpLAogICAgKDB4MTE5MEEsICdYJyksCiAgICAoMHgxMTkwQywgJ1YnKSwKICAgICgweDExOTE0LCAnWCcpLAogICAgKDB4MTE5MTUsICdWJyksCiAgICAoMHgxMTkxNywgJ1gnKSwKICAgICgweDExOTE4LCAnVicpLAogICAgKDB4MTE5MzYsICdYJyksCiAgICAoMHgxMTkzNywgJ1YnKSwKICAgICgweDExOTM5LCAnWCcpLAogICAgKDB4MTE5M0IsICdWJyksCiAgICAoMHgxMTk0NywgJ1gnKSwKICAgICgweDExOTUwLCAnVicpLAogICAgKDB4MTE5NUEsICdYJyksCiAgICAoMHgxMTlBMCwgJ1YnKSwKICAgICgweDExOUE4LCAnWCcpLAogICAgKDB4MTE5QUEsICdWJyksCiAgICAoMHgxMTlEOCwgJ1gnKSwKICAgICgweDExOURBLCAnVicpLAogICAgKDB4MTE5RTUsICdYJyksCiAgICAoMHgxMUEwMCwgJ1YnKSwKICAgICgweDExQTQ4LCAnWCcpLAogICAgKDB4MTFBNTAsICdWJyksCiAgICAoMHgxMUFBMywgJ1gnKSwKICAgICgweDExQUIwLCAnVicpLAogICAgKDB4MTFBRjksICdYJyksCiAgICAoMHgxMUMwMCwgJ1YnKSwKICAgICgweDExQzA5LCAnWCcpLAogICAgKDB4MTFDMEEsICdWJyksCiAgICAoMHgxMUMzNywgJ1gnKSwKICAgICgweDExQzM4LCAnVicpLAogICAgKDB4MTFDNDYsICdYJyksCiAgICAoMHgxMUM1MCwgJ1YnKSwKICAgICgweDExQzZELCAnWCcpLAogICAgKDB4MTFDNzAsICdWJyksCiAgICAoMHgxMUM5MCwgJ1gnKSwKICAgICgweDExQzkyLCAnVicpLAogICAgKDB4MTFDQTgsICdYJyksCiAgICAoMHgxMUNBOSwgJ1YnKSwKICAgICgweDExQ0I3LCAnWCcpLAogICAgKDB4MTFEMDAsICdWJyksCiAgICAoMHgxMUQwNywgJ1gnKSwKICAgICgweDExRDA4LCAnVicpLAogICAgKDB4MTFEMEEsICdYJyksCiAgICAoMHgxMUQwQiwgJ1YnKSwKICAgICgweDExRDM3LCAnWCcpLAogICAgKDB4MTFEM0EsICdWJyksCiAgICAoMHgxMUQzQiwgJ1gnKSwKICAgICgweDExRDNDLCAnVicpLAogICAgKDB4MTFEM0UsICdYJyksCiAgICAoMHgxMUQzRiwgJ1YnKSwKICAgICgweDExRDQ4LCAnWCcpLAogICAgKDB4MTFENTAsICdWJyksCiAgICAoMHgxMUQ1QSwgJ1gnKSwKICAgICgweDExRDYwLCAnVicpLAogICAgKDB4MTFENjYsICdYJyksCiAgICAoMHgxMUQ2NywgJ1YnKSwKICAgICgweDExRDY5LCAnWCcpLAogICAgKDB4MTFENkEsICdWJyksCiAgICAoMHgxMUQ4RiwgJ1gnKSwKICAgICgweDExRDkwLCAnVicpLAogICAgKDB4MTFEOTIsICdYJyksCiAgICAoMHgxMUQ5MywgJ1YnKSwKICAgICgweDExRDk5LCAnWCcpLAogICAgKDB4MTFEQTAsICdWJyksCiAgICAoMHgxMURBQSwgJ1gnKSwKICAgICgweDExRUUwLCAnVicpLAogICAgKDB4MTFFRjksICdYJyksCiAgICAoMHgxMUZCMCwgJ1YnKSwKICAgICgweDExRkIxLCAnWCcpLAogICAgKDB4MTFGQzAsICdWJyksCiAgICBdCgpkZWYgX3NlZ181OSgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweDExRkYyLCAnWCcpLAogICAgKDB4MTFGRkYsICdWJyksCiAgICAoMHgxMjM5QSwgJ1gnKSwKICAgICgweDEyNDAwLCAnVicpLAogICAgKDB4MTI0NkYsICdYJyksCiAgICAoMHgxMjQ3MCwgJ1YnKSwKICAgICgweDEyNDc1LCAnWCcpLAogICAgKDB4MTI0ODAsICdWJyksCiAgICAoMHgxMjU0NCwgJ1gnKSwKICAgICgweDEyRjkwLCAnVicpLAogICAgKDB4MTJGRjMsICdYJyksCiAgICAoMHgxMzAwMCwgJ1YnKSwKICAgICgweDEzNDJGLCAnWCcpLAogICAgKDB4MTQ0MDAsICdWJyksCiAgICAoMHgxNDY0NywgJ1gnKSwKICAgICgweDE2ODAwLCAnVicpLAogICAgKDB4MTZBMzksICdYJyksCiAgICAoMHgxNkE0MCwgJ1YnKSwKICAgICgweDE2QTVGLCAnWCcpLAogICAgKDB4MTZBNjAsICdWJyksCiAgICAoMHgxNkE2QSwgJ1gnKSwKICAgICgweDE2QTZFLCAnVicpLAogICAgKDB4MTZBQkYsICdYJyksCiAgICAoMHgxNkFDMCwgJ1YnKSwKICAgICgweDE2QUNBLCAnWCcpLAogICAgKDB4MTZBRDAsICdWJyksCiAgICAoMHgxNkFFRSwgJ1gnKSwKICAgICgweDE2QUYwLCAnVicpLAogICAgKDB4MTZBRjYsICdYJyksCiAgICAoMHgxNkIwMCwgJ1YnKSwKICAgICgweDE2QjQ2LCAnWCcpLAogICAgKDB4MTZCNTAsICdWJyksCiAgICAoMHgxNkI1QSwgJ1gnKSwKICAgICgweDE2QjVCLCAnVicpLAogICAgKDB4MTZCNjIsICdYJyksCiAgICAoMHgxNkI2MywgJ1YnKSwKICAgICgweDE2Qjc4LCAnWCcpLAogICAgKDB4MTZCN0QsICdWJyksCiAgICAoMHgxNkI5MCwgJ1gnKSwKICAgICgweDE2RTQwLCAnTScsICfwlrmgJyksCiAgICAoMHgxNkU0MSwgJ00nLCAn8Ja5oScpLAogICAgKDB4MTZFNDIsICdNJywgJ/CWuaInKSwKICAgICgweDE2RTQzLCAnTScsICfwlrmjJyksCiAgICAoMHgxNkU0NCwgJ00nLCAn8Ja5pCcpLAogICAgKDB4MTZFNDUsICdNJywgJ/CWuaUnKSwKICAgICgweDE2RTQ2LCAnTScsICfwlrmmJyksCiAgICAoMHgxNkU0NywgJ00nLCAn8Ja5pycpLAogICAgKDB4MTZFNDgsICdNJywgJ/CWuagnKSwKICAgICgweDE2RTQ5LCAnTScsICfwlrmpJyksCiAgICAoMHgxNkU0QSwgJ00nLCAn8Ja5qicpLAogICAgKDB4MTZFNEIsICdNJywgJ/CWuasnKSwKICAgICgweDE2RTRDLCAnTScsICfwlrmsJyksCiAgICAoMHgxNkU0RCwgJ00nLCAn8Ja5rScpLAogICAgKDB4MTZFNEUsICdNJywgJ/CWua4nKSwKICAgICgweDE2RTRGLCAnTScsICfwlrmvJyksCiAgICAoMHgxNkU1MCwgJ00nLCAn8Ja5sCcpLAogICAgKDB4MTZFNTEsICdNJywgJ/CWubEnKSwKICAgICgweDE2RTUyLCAnTScsICfwlrmyJyksCiAgICAoMHgxNkU1MywgJ00nLCAn8Ja5sycpLAogICAgKDB4MTZFNTQsICdNJywgJ/CWubQnKSwKICAgICgweDE2RTU1LCAnTScsICfwlrm1JyksCiAgICAoMHgxNkU1NiwgJ00nLCAn8Ja5ticpLAogICAgKDB4MTZFNTcsICdNJywgJ/CWubcnKSwKICAgICgweDE2RTU4LCAnTScsICfwlrm4JyksCiAgICAoMHgxNkU1OSwgJ00nLCAn8Ja5uScpLAogICAgKDB4MTZFNUEsICdNJywgJ/CWubonKSwKICAgICgweDE2RTVCLCAnTScsICfwlrm7JyksCiAgICAoMHgxNkU1QywgJ00nLCAn8Ja5vCcpLAogICAgKDB4MTZFNUQsICdNJywgJ/CWub0nKSwKICAgICgweDE2RTVFLCAnTScsICfwlrm+JyksCiAgICAoMHgxNkU1RiwgJ00nLCAn8Ja5vycpLAogICAgKDB4MTZFNjAsICdWJyksCiAgICAoMHgxNkU5QiwgJ1gnKSwKICAgICgweDE2RjAwLCAnVicpLAogICAgKDB4MTZGNEIsICdYJyksCiAgICAoMHgxNkY0RiwgJ1YnKSwKICAgICgweDE2Rjg4LCAnWCcpLAogICAgKDB4MTZGOEYsICdWJyksCiAgICAoMHgxNkZBMCwgJ1gnKSwKICAgICgweDE2RkUwLCAnVicpLAogICAgKDB4MTZGRTUsICdYJyksCiAgICAoMHgxNkZGMCwgJ1YnKSwKICAgICgweDE2RkYyLCAnWCcpLAogICAgKDB4MTcwMDAsICdWJyksCiAgICAoMHgxODdGOCwgJ1gnKSwKICAgICgweDE4ODAwLCAnVicpLAogICAgKDB4MThDRDYsICdYJyksCiAgICAoMHgxOEQwMCwgJ1YnKSwKICAgICgweDE4RDA5LCAnWCcpLAogICAgKDB4MUFGRjAsICdWJyksCiAgICAoMHgxQUZGNCwgJ1gnKSwKICAgICgweDFBRkY1LCAnVicpLAogICAgKDB4MUFGRkMsICdYJyksCiAgICAoMHgxQUZGRCwgJ1YnKSwKICAgICgweDFBRkZGLCAnWCcpLAogICAgKDB4MUIwMDAsICdWJyksCiAgICAoMHgxQjEyMywgJ1gnKSwKICAgICgweDFCMTUwLCAnVicpLAogICAgKDB4MUIxNTMsICdYJyksCiAgICAoMHgxQjE2NCwgJ1YnKSwKICAgIF0KCmRlZiBfc2VnXzYwKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4MUIxNjgsICdYJyksCiAgICAoMHgxQjE3MCwgJ1YnKSwKICAgICgweDFCMkZDLCAnWCcpLAogICAgKDB4MUJDMDAsICdWJyksCiAgICAoMHgxQkM2QiwgJ1gnKSwKICAgICgweDFCQzcwLCAnVicpLAogICAgKDB4MUJDN0QsICdYJyksCiAgICAoMHgxQkM4MCwgJ1YnKSwKICAgICgweDFCQzg5LCAnWCcpLAogICAgKDB4MUJDOTAsICdWJyksCiAgICAoMHgxQkM5QSwgJ1gnKSwKICAgICgweDFCQzlDLCAnVicpLAogICAgKDB4MUJDQTAsICdJJyksCiAgICAoMHgxQkNBNCwgJ1gnKSwKICAgICgweDFDRjAwLCAnVicpLAogICAgKDB4MUNGMkUsICdYJyksCiAgICAoMHgxQ0YzMCwgJ1YnKSwKICAgICgweDFDRjQ3LCAnWCcpLAogICAgKDB4MUNGNTAsICdWJyksCiAgICAoMHgxQ0ZDNCwgJ1gnKSwKICAgICgweDFEMDAwLCAnVicpLAogICAgKDB4MUQwRjYsICdYJyksCiAgICAoMHgxRDEwMCwgJ1YnKSwKICAgICgweDFEMTI3LCAnWCcpLAogICAgKDB4MUQxMjksICdWJyksCiAgICAoMHgxRDE1RSwgJ00nLCAn8J2Fl/CdhaUnKSwKICAgICgweDFEMTVGLCAnTScsICfwnYWY8J2FpScpLAogICAgKDB4MUQxNjAsICdNJywgJ/CdhZjwnYWl8J2FricpLAogICAgKDB4MUQxNjEsICdNJywgJ/CdhZjwnYWl8J2FrycpLAogICAgKDB4MUQxNjIsICdNJywgJ/CdhZjwnYWl8J2FsCcpLAogICAgKDB4MUQxNjMsICdNJywgJ/CdhZjwnYWl8J2FsScpLAogICAgKDB4MUQxNjQsICdNJywgJ/CdhZjwnYWl8J2FsicpLAogICAgKDB4MUQxNjUsICdWJyksCiAgICAoMHgxRDE3MywgJ1gnKSwKICAgICgweDFEMTdCLCAnVicpLAogICAgKDB4MUQxQkIsICdNJywgJ/CdhrnwnYWlJyksCiAgICAoMHgxRDFCQywgJ00nLCAn8J2GuvCdhaUnKSwKICAgICgweDFEMUJELCAnTScsICfwnYa58J2FpfCdha4nKSwKICAgICgweDFEMUJFLCAnTScsICfwnYa68J2FpfCdha4nKSwKICAgICgweDFEMUJGLCAnTScsICfwnYa58J2FpfCdha8nKSwKICAgICgweDFEMUMwLCAnTScsICfwnYa68J2FpfCdha8nKSwKICAgICgweDFEMUMxLCAnVicpLAogICAgKDB4MUQxRUIsICdYJyksCiAgICAoMHgxRDIwMCwgJ1YnKSwKICAgICgweDFEMjQ2LCAnWCcpLAogICAgKDB4MUQyRTAsICdWJyksCiAgICAoMHgxRDJGNCwgJ1gnKSwKICAgICgweDFEMzAwLCAnVicpLAogICAgKDB4MUQzNTcsICdYJyksCiAgICAoMHgxRDM2MCwgJ1YnKSwKICAgICgweDFEMzc5LCAnWCcpLAogICAgKDB4MUQ0MDAsICdNJywgJ2EnKSwKICAgICgweDFENDAxLCAnTScsICdiJyksCiAgICAoMHgxRDQwMiwgJ00nLCAnYycpLAogICAgKDB4MUQ0MDMsICdNJywgJ2QnKSwKICAgICgweDFENDA0LCAnTScsICdlJyksCiAgICAoMHgxRDQwNSwgJ00nLCAnZicpLAogICAgKDB4MUQ0MDYsICdNJywgJ2cnKSwKICAgICgweDFENDA3LCAnTScsICdoJyksCiAgICAoMHgxRDQwOCwgJ00nLCAnaScpLAogICAgKDB4MUQ0MDksICdNJywgJ2onKSwKICAgICgweDFENDBBLCAnTScsICdrJyksCiAgICAoMHgxRDQwQiwgJ00nLCAnbCcpLAogICAgKDB4MUQ0MEMsICdNJywgJ20nKSwKICAgICgweDFENDBELCAnTScsICduJyksCiAgICAoMHgxRDQwRSwgJ00nLCAnbycpLAogICAgKDB4MUQ0MEYsICdNJywgJ3AnKSwKICAgICgweDFENDEwLCAnTScsICdxJyksCiAgICAoMHgxRDQxMSwgJ00nLCAncicpLAogICAgKDB4MUQ0MTIsICdNJywgJ3MnKSwKICAgICgweDFENDEzLCAnTScsICd0JyksCiAgICAoMHgxRDQxNCwgJ00nLCAndScpLAogICAgKDB4MUQ0MTUsICdNJywgJ3YnKSwKICAgICgweDFENDE2LCAnTScsICd3JyksCiAgICAoMHgxRDQxNywgJ00nLCAneCcpLAogICAgKDB4MUQ0MTgsICdNJywgJ3knKSwKICAgICgweDFENDE5LCAnTScsICd6JyksCiAgICAoMHgxRDQxQSwgJ00nLCAnYScpLAogICAgKDB4MUQ0MUIsICdNJywgJ2InKSwKICAgICgweDFENDFDLCAnTScsICdjJyksCiAgICAoMHgxRDQxRCwgJ00nLCAnZCcpLAogICAgKDB4MUQ0MUUsICdNJywgJ2UnKSwKICAgICgweDFENDFGLCAnTScsICdmJyksCiAgICAoMHgxRDQyMCwgJ00nLCAnZycpLAogICAgKDB4MUQ0MjEsICdNJywgJ2gnKSwKICAgICgweDFENDIyLCAnTScsICdpJyksCiAgICAoMHgxRDQyMywgJ00nLCAnaicpLAogICAgKDB4MUQ0MjQsICdNJywgJ2snKSwKICAgICgweDFENDI1LCAnTScsICdsJyksCiAgICAoMHgxRDQyNiwgJ00nLCAnbScpLAogICAgKDB4MUQ0MjcsICdNJywgJ24nKSwKICAgICgweDFENDI4LCAnTScsICdvJyksCiAgICAoMHgxRDQyOSwgJ00nLCAncCcpLAogICAgKDB4MUQ0MkEsICdNJywgJ3EnKSwKICAgICgweDFENDJCLCAnTScsICdyJyksCiAgICAoMHgxRDQyQywgJ00nLCAncycpLAogICAgKDB4MUQ0MkQsICdNJywgJ3QnKSwKICAgICgweDFENDJFLCAnTScsICd1JyksCiAgICAoMHgxRDQyRiwgJ00nLCAndicpLAogICAgKDB4MUQ0MzAsICdNJywgJ3cnKSwKICAgIF0KCmRlZiBfc2VnXzYxKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4MUQ0MzEsICdNJywgJ3gnKSwKICAgICgweDFENDMyLCAnTScsICd5JyksCiAgICAoMHgxRDQzMywgJ00nLCAneicpLAogICAgKDB4MUQ0MzQsICdNJywgJ2EnKSwKICAgICgweDFENDM1LCAnTScsICdiJyksCiAgICAoMHgxRDQzNiwgJ00nLCAnYycpLAogICAgKDB4MUQ0MzcsICdNJywgJ2QnKSwKICAgICgweDFENDM4LCAnTScsICdlJyksCiAgICAoMHgxRDQzOSwgJ00nLCAnZicpLAogICAgKDB4MUQ0M0EsICdNJywgJ2cnKSwKICAgICgweDFENDNCLCAnTScsICdoJyksCiAgICAoMHgxRDQzQywgJ00nLCAnaScpLAogICAgKDB4MUQ0M0QsICdNJywgJ2onKSwKICAgICgweDFENDNFLCAnTScsICdrJyksCiAgICAoMHgxRDQzRiwgJ00nLCAnbCcpLAogICAgKDB4MUQ0NDAsICdNJywgJ20nKSwKICAgICgweDFENDQxLCAnTScsICduJyksCiAgICAoMHgxRDQ0MiwgJ00nLCAnbycpLAogICAgKDB4MUQ0NDMsICdNJywgJ3AnKSwKICAgICgweDFENDQ0LCAnTScsICdxJyksCiAgICAoMHgxRDQ0NSwgJ00nLCAncicpLAogICAgKDB4MUQ0NDYsICdNJywgJ3MnKSwKICAgICgweDFENDQ3LCAnTScsICd0JyksCiAgICAoMHgxRDQ0OCwgJ00nLCAndScpLAogICAgKDB4MUQ0NDksICdNJywgJ3YnKSwKICAgICgweDFENDRBLCAnTScsICd3JyksCiAgICAoMHgxRDQ0QiwgJ00nLCAneCcpLAogICAgKDB4MUQ0NEMsICdNJywgJ3knKSwKICAgICgweDFENDRELCAnTScsICd6JyksCiAgICAoMHgxRDQ0RSwgJ00nLCAnYScpLAogICAgKDB4MUQ0NEYsICdNJywgJ2InKSwKICAgICgweDFENDUwLCAnTScsICdjJyksCiAgICAoMHgxRDQ1MSwgJ00nLCAnZCcpLAogICAgKDB4MUQ0NTIsICdNJywgJ2UnKSwKICAgICgweDFENDUzLCAnTScsICdmJyksCiAgICAoMHgxRDQ1NCwgJ00nLCAnZycpLAogICAgKDB4MUQ0NTUsICdYJyksCiAgICAoMHgxRDQ1NiwgJ00nLCAnaScpLAogICAgKDB4MUQ0NTcsICdNJywgJ2onKSwKICAgICgweDFENDU4LCAnTScsICdrJyksCiAgICAoMHgxRDQ1OSwgJ00nLCAnbCcpLAogICAgKDB4MUQ0NUEsICdNJywgJ20nKSwKICAgICgweDFENDVCLCAnTScsICduJyksCiAgICAoMHgxRDQ1QywgJ00nLCAnbycpLAogICAgKDB4MUQ0NUQsICdNJywgJ3AnKSwKICAgICgweDFENDVFLCAnTScsICdxJyksCiAgICAoMHgxRDQ1RiwgJ00nLCAncicpLAogICAgKDB4MUQ0NjAsICdNJywgJ3MnKSwKICAgICgweDFENDYxLCAnTScsICd0JyksCiAgICAoMHgxRDQ2MiwgJ00nLCAndScpLAogICAgKDB4MUQ0NjMsICdNJywgJ3YnKSwKICAgICgweDFENDY0LCAnTScsICd3JyksCiAgICAoMHgxRDQ2NSwgJ00nLCAneCcpLAogICAgKDB4MUQ0NjYsICdNJywgJ3knKSwKICAgICgweDFENDY3LCAnTScsICd6JyksCiAgICAoMHgxRDQ2OCwgJ00nLCAnYScpLAogICAgKDB4MUQ0NjksICdNJywgJ2InKSwKICAgICgweDFENDZBLCAnTScsICdjJyksCiAgICAoMHgxRDQ2QiwgJ00nLCAnZCcpLAogICAgKDB4MUQ0NkMsICdNJywgJ2UnKSwKICAgICgweDFENDZELCAnTScsICdmJyksCiAgICAoMHgxRDQ2RSwgJ00nLCAnZycpLAogICAgKDB4MUQ0NkYsICdNJywgJ2gnKSwKICAgICgweDFENDcwLCAnTScsICdpJyksCiAgICAoMHgxRDQ3MSwgJ00nLCAnaicpLAogICAgKDB4MUQ0NzIsICdNJywgJ2snKSwKICAgICgweDFENDczLCAnTScsICdsJyksCiAgICAoMHgxRDQ3NCwgJ00nLCAnbScpLAogICAgKDB4MUQ0NzUsICdNJywgJ24nKSwKICAgICgweDFENDc2LCAnTScsICdvJyksCiAgICAoMHgxRDQ3NywgJ00nLCAncCcpLAogICAgKDB4MUQ0NzgsICdNJywgJ3EnKSwKICAgICgweDFENDc5LCAnTScsICdyJyksCiAgICAoMHgxRDQ3QSwgJ00nLCAncycpLAogICAgKDB4MUQ0N0IsICdNJywgJ3QnKSwKICAgICgweDFENDdDLCAnTScsICd1JyksCiAgICAoMHgxRDQ3RCwgJ00nLCAndicpLAogICAgKDB4MUQ0N0UsICdNJywgJ3cnKSwKICAgICgweDFENDdGLCAnTScsICd4JyksCiAgICAoMHgxRDQ4MCwgJ00nLCAneScpLAogICAgKDB4MUQ0ODEsICdNJywgJ3onKSwKICAgICgweDFENDgyLCAnTScsICdhJyksCiAgICAoMHgxRDQ4MywgJ00nLCAnYicpLAogICAgKDB4MUQ0ODQsICdNJywgJ2MnKSwKICAgICgweDFENDg1LCAnTScsICdkJyksCiAgICAoMHgxRDQ4NiwgJ00nLCAnZScpLAogICAgKDB4MUQ0ODcsICdNJywgJ2YnKSwKICAgICgweDFENDg4LCAnTScsICdnJyksCiAgICAoMHgxRDQ4OSwgJ00nLCAnaCcpLAogICAgKDB4MUQ0OEEsICdNJywgJ2knKSwKICAgICgweDFENDhCLCAnTScsICdqJyksCiAgICAoMHgxRDQ4QywgJ00nLCAnaycpLAogICAgKDB4MUQ0OEQsICdNJywgJ2wnKSwKICAgICgweDFENDhFLCAnTScsICdtJyksCiAgICAoMHgxRDQ4RiwgJ00nLCAnbicpLAogICAgKDB4MUQ0OTAsICdNJywgJ28nKSwKICAgICgweDFENDkxLCAnTScsICdwJyksCiAgICAoMHgxRDQ5MiwgJ00nLCAncScpLAogICAgKDB4MUQ0OTMsICdNJywgJ3InKSwKICAgICgweDFENDk0LCAnTScsICdzJyksCiAgICBdCgpkZWYgX3NlZ182MigpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweDFENDk1LCAnTScsICd0JyksCiAgICAoMHgxRDQ5NiwgJ00nLCAndScpLAogICAgKDB4MUQ0OTcsICdNJywgJ3YnKSwKICAgICgweDFENDk4LCAnTScsICd3JyksCiAgICAoMHgxRDQ5OSwgJ00nLCAneCcpLAogICAgKDB4MUQ0OUEsICdNJywgJ3knKSwKICAgICgweDFENDlCLCAnTScsICd6JyksCiAgICAoMHgxRDQ5QywgJ00nLCAnYScpLAogICAgKDB4MUQ0OUQsICdYJyksCiAgICAoMHgxRDQ5RSwgJ00nLCAnYycpLAogICAgKDB4MUQ0OUYsICdNJywgJ2QnKSwKICAgICgweDFENEEwLCAnWCcpLAogICAgKDB4MUQ0QTIsICdNJywgJ2cnKSwKICAgICgweDFENEEzLCAnWCcpLAogICAgKDB4MUQ0QTUsICdNJywgJ2onKSwKICAgICgweDFENEE2LCAnTScsICdrJyksCiAgICAoMHgxRDRBNywgJ1gnKSwKICAgICgweDFENEE5LCAnTScsICduJyksCiAgICAoMHgxRDRBQSwgJ00nLCAnbycpLAogICAgKDB4MUQ0QUIsICdNJywgJ3AnKSwKICAgICgweDFENEFDLCAnTScsICdxJyksCiAgICAoMHgxRDRBRCwgJ1gnKSwKICAgICgweDFENEFFLCAnTScsICdzJyksCiAgICAoMHgxRDRBRiwgJ00nLCAndCcpLAogICAgKDB4MUQ0QjAsICdNJywgJ3UnKSwKICAgICgweDFENEIxLCAnTScsICd2JyksCiAgICAoMHgxRDRCMiwgJ00nLCAndycpLAogICAgKDB4MUQ0QjMsICdNJywgJ3gnKSwKICAgICgweDFENEI0LCAnTScsICd5JyksCiAgICAoMHgxRDRCNSwgJ00nLCAneicpLAogICAgKDB4MUQ0QjYsICdNJywgJ2EnKSwKICAgICgweDFENEI3LCAnTScsICdiJyksCiAgICAoMHgxRDRCOCwgJ00nLCAnYycpLAogICAgKDB4MUQ0QjksICdNJywgJ2QnKSwKICAgICgweDFENEJBLCAnWCcpLAogICAgKDB4MUQ0QkIsICdNJywgJ2YnKSwKICAgICgweDFENEJDLCAnWCcpLAogICAgKDB4MUQ0QkQsICdNJywgJ2gnKSwKICAgICgweDFENEJFLCAnTScsICdpJyksCiAgICAoMHgxRDRCRiwgJ00nLCAnaicpLAogICAgKDB4MUQ0QzAsICdNJywgJ2snKSwKICAgICgweDFENEMxLCAnTScsICdsJyksCiAgICAoMHgxRDRDMiwgJ00nLCAnbScpLAogICAgKDB4MUQ0QzMsICdNJywgJ24nKSwKICAgICgweDFENEM0LCAnWCcpLAogICAgKDB4MUQ0QzUsICdNJywgJ3AnKSwKICAgICgweDFENEM2LCAnTScsICdxJyksCiAgICAoMHgxRDRDNywgJ00nLCAncicpLAogICAgKDB4MUQ0QzgsICdNJywgJ3MnKSwKICAgICgweDFENEM5LCAnTScsICd0JyksCiAgICAoMHgxRDRDQSwgJ00nLCAndScpLAogICAgKDB4MUQ0Q0IsICdNJywgJ3YnKSwKICAgICgweDFENENDLCAnTScsICd3JyksCiAgICAoMHgxRDRDRCwgJ00nLCAneCcpLAogICAgKDB4MUQ0Q0UsICdNJywgJ3knKSwKICAgICgweDFENENGLCAnTScsICd6JyksCiAgICAoMHgxRDREMCwgJ00nLCAnYScpLAogICAgKDB4MUQ0RDEsICdNJywgJ2InKSwKICAgICgweDFENEQyLCAnTScsICdjJyksCiAgICAoMHgxRDREMywgJ00nLCAnZCcpLAogICAgKDB4MUQ0RDQsICdNJywgJ2UnKSwKICAgICgweDFENEQ1LCAnTScsICdmJyksCiAgICAoMHgxRDRENiwgJ00nLCAnZycpLAogICAgKDB4MUQ0RDcsICdNJywgJ2gnKSwKICAgICgweDFENEQ4LCAnTScsICdpJyksCiAgICAoMHgxRDREOSwgJ00nLCAnaicpLAogICAgKDB4MUQ0REEsICdNJywgJ2snKSwKICAgICgweDFENERCLCAnTScsICdsJyksCiAgICAoMHgxRDREQywgJ00nLCAnbScpLAogICAgKDB4MUQ0REQsICdNJywgJ24nKSwKICAgICgweDFENERFLCAnTScsICdvJyksCiAgICAoMHgxRDRERiwgJ00nLCAncCcpLAogICAgKDB4MUQ0RTAsICdNJywgJ3EnKSwKICAgICgweDFENEUxLCAnTScsICdyJyksCiAgICAoMHgxRDRFMiwgJ00nLCAncycpLAogICAgKDB4MUQ0RTMsICdNJywgJ3QnKSwKICAgICgweDFENEU0LCAnTScsICd1JyksCiAgICAoMHgxRDRFNSwgJ00nLCAndicpLAogICAgKDB4MUQ0RTYsICdNJywgJ3cnKSwKICAgICgweDFENEU3LCAnTScsICd4JyksCiAgICAoMHgxRDRFOCwgJ00nLCAneScpLAogICAgKDB4MUQ0RTksICdNJywgJ3onKSwKICAgICgweDFENEVBLCAnTScsICdhJyksCiAgICAoMHgxRDRFQiwgJ00nLCAnYicpLAogICAgKDB4MUQ0RUMsICdNJywgJ2MnKSwKICAgICgweDFENEVELCAnTScsICdkJyksCiAgICAoMHgxRDRFRSwgJ00nLCAnZScpLAogICAgKDB4MUQ0RUYsICdNJywgJ2YnKSwKICAgICgweDFENEYwLCAnTScsICdnJyksCiAgICAoMHgxRDRGMSwgJ00nLCAnaCcpLAogICAgKDB4MUQ0RjIsICdNJywgJ2knKSwKICAgICgweDFENEYzLCAnTScsICdqJyksCiAgICAoMHgxRDRGNCwgJ00nLCAnaycpLAogICAgKDB4MUQ0RjUsICdNJywgJ2wnKSwKICAgICgweDFENEY2LCAnTScsICdtJyksCiAgICAoMHgxRDRGNywgJ00nLCAnbicpLAogICAgKDB4MUQ0RjgsICdNJywgJ28nKSwKICAgICgweDFENEY5LCAnTScsICdwJyksCiAgICAoMHgxRDRGQSwgJ00nLCAncScpLAogICAgKDB4MUQ0RkIsICdNJywgJ3InKSwKICAgIF0KCmRlZiBfc2VnXzYzKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4MUQ0RkMsICdNJywgJ3MnKSwKICAgICgweDFENEZELCAnTScsICd0JyksCiAgICAoMHgxRDRGRSwgJ00nLCAndScpLAogICAgKDB4MUQ0RkYsICdNJywgJ3YnKSwKICAgICgweDFENTAwLCAnTScsICd3JyksCiAgICAoMHgxRDUwMSwgJ00nLCAneCcpLAogICAgKDB4MUQ1MDIsICdNJywgJ3knKSwKICAgICgweDFENTAzLCAnTScsICd6JyksCiAgICAoMHgxRDUwNCwgJ00nLCAnYScpLAogICAgKDB4MUQ1MDUsICdNJywgJ2InKSwKICAgICgweDFENTA2LCAnWCcpLAogICAgKDB4MUQ1MDcsICdNJywgJ2QnKSwKICAgICgweDFENTA4LCAnTScsICdlJyksCiAgICAoMHgxRDUwOSwgJ00nLCAnZicpLAogICAgKDB4MUQ1MEEsICdNJywgJ2cnKSwKICAgICgweDFENTBCLCAnWCcpLAogICAgKDB4MUQ1MEQsICdNJywgJ2onKSwKICAgICgweDFENTBFLCAnTScsICdrJyksCiAgICAoMHgxRDUwRiwgJ00nLCAnbCcpLAogICAgKDB4MUQ1MTAsICdNJywgJ20nKSwKICAgICgweDFENTExLCAnTScsICduJyksCiAgICAoMHgxRDUxMiwgJ00nLCAnbycpLAogICAgKDB4MUQ1MTMsICdNJywgJ3AnKSwKICAgICgweDFENTE0LCAnTScsICdxJyksCiAgICAoMHgxRDUxNSwgJ1gnKSwKICAgICgweDFENTE2LCAnTScsICdzJyksCiAgICAoMHgxRDUxNywgJ00nLCAndCcpLAogICAgKDB4MUQ1MTgsICdNJywgJ3UnKSwKICAgICgweDFENTE5LCAnTScsICd2JyksCiAgICAoMHgxRDUxQSwgJ00nLCAndycpLAogICAgKDB4MUQ1MUIsICdNJywgJ3gnKSwKICAgICgweDFENTFDLCAnTScsICd5JyksCiAgICAoMHgxRDUxRCwgJ1gnKSwKICAgICgweDFENTFFLCAnTScsICdhJyksCiAgICAoMHgxRDUxRiwgJ00nLCAnYicpLAogICAgKDB4MUQ1MjAsICdNJywgJ2MnKSwKICAgICgweDFENTIxLCAnTScsICdkJyksCiAgICAoMHgxRDUyMiwgJ00nLCAnZScpLAogICAgKDB4MUQ1MjMsICdNJywgJ2YnKSwKICAgICgweDFENTI0LCAnTScsICdnJyksCiAgICAoMHgxRDUyNSwgJ00nLCAnaCcpLAogICAgKDB4MUQ1MjYsICdNJywgJ2knKSwKICAgICgweDFENTI3LCAnTScsICdqJyksCiAgICAoMHgxRDUyOCwgJ00nLCAnaycpLAogICAgKDB4MUQ1MjksICdNJywgJ2wnKSwKICAgICgweDFENTJBLCAnTScsICdtJyksCiAgICAoMHgxRDUyQiwgJ00nLCAnbicpLAogICAgKDB4MUQ1MkMsICdNJywgJ28nKSwKICAgICgweDFENTJELCAnTScsICdwJyksCiAgICAoMHgxRDUyRSwgJ00nLCAncScpLAogICAgKDB4MUQ1MkYsICdNJywgJ3InKSwKICAgICgweDFENTMwLCAnTScsICdzJyksCiAgICAoMHgxRDUzMSwgJ00nLCAndCcpLAogICAgKDB4MUQ1MzIsICdNJywgJ3UnKSwKICAgICgweDFENTMzLCAnTScsICd2JyksCiAgICAoMHgxRDUzNCwgJ00nLCAndycpLAogICAgKDB4MUQ1MzUsICdNJywgJ3gnKSwKICAgICgweDFENTM2LCAnTScsICd5JyksCiAgICAoMHgxRDUzNywgJ00nLCAneicpLAogICAgKDB4MUQ1MzgsICdNJywgJ2EnKSwKICAgICgweDFENTM5LCAnTScsICdiJyksCiAgICAoMHgxRDUzQSwgJ1gnKSwKICAgICgweDFENTNCLCAnTScsICdkJyksCiAgICAoMHgxRDUzQywgJ00nLCAnZScpLAogICAgKDB4MUQ1M0QsICdNJywgJ2YnKSwKICAgICgweDFENTNFLCAnTScsICdnJyksCiAgICAoMHgxRDUzRiwgJ1gnKSwKICAgICgweDFENTQwLCAnTScsICdpJyksCiAgICAoMHgxRDU0MSwgJ00nLCAnaicpLAogICAgKDB4MUQ1NDIsICdNJywgJ2snKSwKICAgICgweDFENTQzLCAnTScsICdsJyksCiAgICAoMHgxRDU0NCwgJ00nLCAnbScpLAogICAgKDB4MUQ1NDUsICdYJyksCiAgICAoMHgxRDU0NiwgJ00nLCAnbycpLAogICAgKDB4MUQ1NDcsICdYJyksCiAgICAoMHgxRDU0QSwgJ00nLCAncycpLAogICAgKDB4MUQ1NEIsICdNJywgJ3QnKSwKICAgICgweDFENTRDLCAnTScsICd1JyksCiAgICAoMHgxRDU0RCwgJ00nLCAndicpLAogICAgKDB4MUQ1NEUsICdNJywgJ3cnKSwKICAgICgweDFENTRGLCAnTScsICd4JyksCiAgICAoMHgxRDU1MCwgJ00nLCAneScpLAogICAgKDB4MUQ1NTEsICdYJyksCiAgICAoMHgxRDU1MiwgJ00nLCAnYScpLAogICAgKDB4MUQ1NTMsICdNJywgJ2InKSwKICAgICgweDFENTU0LCAnTScsICdjJyksCiAgICAoMHgxRDU1NSwgJ00nLCAnZCcpLAogICAgKDB4MUQ1NTYsICdNJywgJ2UnKSwKICAgICgweDFENTU3LCAnTScsICdmJyksCiAgICAoMHgxRDU1OCwgJ00nLCAnZycpLAogICAgKDB4MUQ1NTksICdNJywgJ2gnKSwKICAgICgweDFENTVBLCAnTScsICdpJyksCiAgICAoMHgxRDU1QiwgJ00nLCAnaicpLAogICAgKDB4MUQ1NUMsICdNJywgJ2snKSwKICAgICgweDFENTVELCAnTScsICdsJyksCiAgICAoMHgxRDU1RSwgJ00nLCAnbScpLAogICAgKDB4MUQ1NUYsICdNJywgJ24nKSwKICAgICgweDFENTYwLCAnTScsICdvJyksCiAgICAoMHgxRDU2MSwgJ00nLCAncCcpLAogICAgKDB4MUQ1NjIsICdNJywgJ3EnKSwKICAgIF0KCmRlZiBfc2VnXzY0KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4MUQ1NjMsICdNJywgJ3InKSwKICAgICgweDFENTY0LCAnTScsICdzJyksCiAgICAoMHgxRDU2NSwgJ00nLCAndCcpLAogICAgKDB4MUQ1NjYsICdNJywgJ3UnKSwKICAgICgweDFENTY3LCAnTScsICd2JyksCiAgICAoMHgxRDU2OCwgJ00nLCAndycpLAogICAgKDB4MUQ1NjksICdNJywgJ3gnKSwKICAgICgweDFENTZBLCAnTScsICd5JyksCiAgICAoMHgxRDU2QiwgJ00nLCAneicpLAogICAgKDB4MUQ1NkMsICdNJywgJ2EnKSwKICAgICgweDFENTZELCAnTScsICdiJyksCiAgICAoMHgxRDU2RSwgJ00nLCAnYycpLAogICAgKDB4MUQ1NkYsICdNJywgJ2QnKSwKICAgICgweDFENTcwLCAnTScsICdlJyksCiAgICAoMHgxRDU3MSwgJ00nLCAnZicpLAogICAgKDB4MUQ1NzIsICdNJywgJ2cnKSwKICAgICgweDFENTczLCAnTScsICdoJyksCiAgICAoMHgxRDU3NCwgJ00nLCAnaScpLAogICAgKDB4MUQ1NzUsICdNJywgJ2onKSwKICAgICgweDFENTc2LCAnTScsICdrJyksCiAgICAoMHgxRDU3NywgJ00nLCAnbCcpLAogICAgKDB4MUQ1NzgsICdNJywgJ20nKSwKICAgICgweDFENTc5LCAnTScsICduJyksCiAgICAoMHgxRDU3QSwgJ00nLCAnbycpLAogICAgKDB4MUQ1N0IsICdNJywgJ3AnKSwKICAgICgweDFENTdDLCAnTScsICdxJyksCiAgICAoMHgxRDU3RCwgJ00nLCAncicpLAogICAgKDB4MUQ1N0UsICdNJywgJ3MnKSwKICAgICgweDFENTdGLCAnTScsICd0JyksCiAgICAoMHgxRDU4MCwgJ00nLCAndScpLAogICAgKDB4MUQ1ODEsICdNJywgJ3YnKSwKICAgICgweDFENTgyLCAnTScsICd3JyksCiAgICAoMHgxRDU4MywgJ00nLCAneCcpLAogICAgKDB4MUQ1ODQsICdNJywgJ3knKSwKICAgICgweDFENTg1LCAnTScsICd6JyksCiAgICAoMHgxRDU4NiwgJ00nLCAnYScpLAogICAgKDB4MUQ1ODcsICdNJywgJ2InKSwKICAgICgweDFENTg4LCAnTScsICdjJyksCiAgICAoMHgxRDU4OSwgJ00nLCAnZCcpLAogICAgKDB4MUQ1OEEsICdNJywgJ2UnKSwKICAgICgweDFENThCLCAnTScsICdmJyksCiAgICAoMHgxRDU4QywgJ00nLCAnZycpLAogICAgKDB4MUQ1OEQsICdNJywgJ2gnKSwKICAgICgweDFENThFLCAnTScsICdpJyksCiAgICAoMHgxRDU4RiwgJ00nLCAnaicpLAogICAgKDB4MUQ1OTAsICdNJywgJ2snKSwKICAgICgweDFENTkxLCAnTScsICdsJyksCiAgICAoMHgxRDU5MiwgJ00nLCAnbScpLAogICAgKDB4MUQ1OTMsICdNJywgJ24nKSwKICAgICgweDFENTk0LCAnTScsICdvJyksCiAgICAoMHgxRDU5NSwgJ00nLCAncCcpLAogICAgKDB4MUQ1OTYsICdNJywgJ3EnKSwKICAgICgweDFENTk3LCAnTScsICdyJyksCiAgICAoMHgxRDU5OCwgJ00nLCAncycpLAogICAgKDB4MUQ1OTksICdNJywgJ3QnKSwKICAgICgweDFENTlBLCAnTScsICd1JyksCiAgICAoMHgxRDU5QiwgJ00nLCAndicpLAogICAgKDB4MUQ1OUMsICdNJywgJ3cnKSwKICAgICgweDFENTlELCAnTScsICd4JyksCiAgICAoMHgxRDU5RSwgJ00nLCAneScpLAogICAgKDB4MUQ1OUYsICdNJywgJ3onKSwKICAgICgweDFENUEwLCAnTScsICdhJyksCiAgICAoMHgxRDVBMSwgJ00nLCAnYicpLAogICAgKDB4MUQ1QTIsICdNJywgJ2MnKSwKICAgICgweDFENUEzLCAnTScsICdkJyksCiAgICAoMHgxRDVBNCwgJ00nLCAnZScpLAogICAgKDB4MUQ1QTUsICdNJywgJ2YnKSwKICAgICgweDFENUE2LCAnTScsICdnJyksCiAgICAoMHgxRDVBNywgJ00nLCAnaCcpLAogICAgKDB4MUQ1QTgsICdNJywgJ2knKSwKICAgICgweDFENUE5LCAnTScsICdqJyksCiAgICAoMHgxRDVBQSwgJ00nLCAnaycpLAogICAgKDB4MUQ1QUIsICdNJywgJ2wnKSwKICAgICgweDFENUFDLCAnTScsICdtJyksCiAgICAoMHgxRDVBRCwgJ00nLCAnbicpLAogICAgKDB4MUQ1QUUsICdNJywgJ28nKSwKICAgICgweDFENUFGLCAnTScsICdwJyksCiAgICAoMHgxRDVCMCwgJ00nLCAncScpLAogICAgKDB4MUQ1QjEsICdNJywgJ3InKSwKICAgICgweDFENUIyLCAnTScsICdzJyksCiAgICAoMHgxRDVCMywgJ00nLCAndCcpLAogICAgKDB4MUQ1QjQsICdNJywgJ3UnKSwKICAgICgweDFENUI1LCAnTScsICd2JyksCiAgICAoMHgxRDVCNiwgJ00nLCAndycpLAogICAgKDB4MUQ1QjcsICdNJywgJ3gnKSwKICAgICgweDFENUI4LCAnTScsICd5JyksCiAgICAoMHgxRDVCOSwgJ00nLCAneicpLAogICAgKDB4MUQ1QkEsICdNJywgJ2EnKSwKICAgICgweDFENUJCLCAnTScsICdiJyksCiAgICAoMHgxRDVCQywgJ00nLCAnYycpLAogICAgKDB4MUQ1QkQsICdNJywgJ2QnKSwKICAgICgweDFENUJFLCAnTScsICdlJyksCiAgICAoMHgxRDVCRiwgJ00nLCAnZicpLAogICAgKDB4MUQ1QzAsICdNJywgJ2cnKSwKICAgICgweDFENUMxLCAnTScsICdoJyksCiAgICAoMHgxRDVDMiwgJ00nLCAnaScpLAogICAgKDB4MUQ1QzMsICdNJywgJ2onKSwKICAgICgweDFENUM0LCAnTScsICdrJyksCiAgICAoMHgxRDVDNSwgJ00nLCAnbCcpLAogICAgKDB4MUQ1QzYsICdNJywgJ20nKSwKICAgIF0KCmRlZiBfc2VnXzY1KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4MUQ1QzcsICdNJywgJ24nKSwKICAgICgweDFENUM4LCAnTScsICdvJyksCiAgICAoMHgxRDVDOSwgJ00nLCAncCcpLAogICAgKDB4MUQ1Q0EsICdNJywgJ3EnKSwKICAgICgweDFENUNCLCAnTScsICdyJyksCiAgICAoMHgxRDVDQywgJ00nLCAncycpLAogICAgKDB4MUQ1Q0QsICdNJywgJ3QnKSwKICAgICgweDFENUNFLCAnTScsICd1JyksCiAgICAoMHgxRDVDRiwgJ00nLCAndicpLAogICAgKDB4MUQ1RDAsICdNJywgJ3cnKSwKICAgICgweDFENUQxLCAnTScsICd4JyksCiAgICAoMHgxRDVEMiwgJ00nLCAneScpLAogICAgKDB4MUQ1RDMsICdNJywgJ3onKSwKICAgICgweDFENUQ0LCAnTScsICdhJyksCiAgICAoMHgxRDVENSwgJ00nLCAnYicpLAogICAgKDB4MUQ1RDYsICdNJywgJ2MnKSwKICAgICgweDFENUQ3LCAnTScsICdkJyksCiAgICAoMHgxRDVEOCwgJ00nLCAnZScpLAogICAgKDB4MUQ1RDksICdNJywgJ2YnKSwKICAgICgweDFENURBLCAnTScsICdnJyksCiAgICAoMHgxRDVEQiwgJ00nLCAnaCcpLAogICAgKDB4MUQ1REMsICdNJywgJ2knKSwKICAgICgweDFENURELCAnTScsICdqJyksCiAgICAoMHgxRDVERSwgJ00nLCAnaycpLAogICAgKDB4MUQ1REYsICdNJywgJ2wnKSwKICAgICgweDFENUUwLCAnTScsICdtJyksCiAgICAoMHgxRDVFMSwgJ00nLCAnbicpLAogICAgKDB4MUQ1RTIsICdNJywgJ28nKSwKICAgICgweDFENUUzLCAnTScsICdwJyksCiAgICAoMHgxRDVFNCwgJ00nLCAncScpLAogICAgKDB4MUQ1RTUsICdNJywgJ3InKSwKICAgICgweDFENUU2LCAnTScsICdzJyksCiAgICAoMHgxRDVFNywgJ00nLCAndCcpLAogICAgKDB4MUQ1RTgsICdNJywgJ3UnKSwKICAgICgweDFENUU5LCAnTScsICd2JyksCiAgICAoMHgxRDVFQSwgJ00nLCAndycpLAogICAgKDB4MUQ1RUIsICdNJywgJ3gnKSwKICAgICgweDFENUVDLCAnTScsICd5JyksCiAgICAoMHgxRDVFRCwgJ00nLCAneicpLAogICAgKDB4MUQ1RUUsICdNJywgJ2EnKSwKICAgICgweDFENUVGLCAnTScsICdiJyksCiAgICAoMHgxRDVGMCwgJ00nLCAnYycpLAogICAgKDB4MUQ1RjEsICdNJywgJ2QnKSwKICAgICgweDFENUYyLCAnTScsICdlJyksCiAgICAoMHgxRDVGMywgJ00nLCAnZicpLAogICAgKDB4MUQ1RjQsICdNJywgJ2cnKSwKICAgICgweDFENUY1LCAnTScsICdoJyksCiAgICAoMHgxRDVGNiwgJ00nLCAnaScpLAogICAgKDB4MUQ1RjcsICdNJywgJ2onKSwKICAgICgweDFENUY4LCAnTScsICdrJyksCiAgICAoMHgxRDVGOSwgJ00nLCAnbCcpLAogICAgKDB4MUQ1RkEsICdNJywgJ20nKSwKICAgICgweDFENUZCLCAnTScsICduJyksCiAgICAoMHgxRDVGQywgJ00nLCAnbycpLAogICAgKDB4MUQ1RkQsICdNJywgJ3AnKSwKICAgICgweDFENUZFLCAnTScsICdxJyksCiAgICAoMHgxRDVGRiwgJ00nLCAncicpLAogICAgKDB4MUQ2MDAsICdNJywgJ3MnKSwKICAgICgweDFENjAxLCAnTScsICd0JyksCiAgICAoMHgxRDYwMiwgJ00nLCAndScpLAogICAgKDB4MUQ2MDMsICdNJywgJ3YnKSwKICAgICgweDFENjA0LCAnTScsICd3JyksCiAgICAoMHgxRDYwNSwgJ00nLCAneCcpLAogICAgKDB4MUQ2MDYsICdNJywgJ3knKSwKICAgICgweDFENjA3LCAnTScsICd6JyksCiAgICAoMHgxRDYwOCwgJ00nLCAnYScpLAogICAgKDB4MUQ2MDksICdNJywgJ2InKSwKICAgICgweDFENjBBLCAnTScsICdjJyksCiAgICAoMHgxRDYwQiwgJ00nLCAnZCcpLAogICAgKDB4MUQ2MEMsICdNJywgJ2UnKSwKICAgICgweDFENjBELCAnTScsICdmJyksCiAgICAoMHgxRDYwRSwgJ00nLCAnZycpLAogICAgKDB4MUQ2MEYsICdNJywgJ2gnKSwKICAgICgweDFENjEwLCAnTScsICdpJyksCiAgICAoMHgxRDYxMSwgJ00nLCAnaicpLAogICAgKDB4MUQ2MTIsICdNJywgJ2snKSwKICAgICgweDFENjEzLCAnTScsICdsJyksCiAgICAoMHgxRDYxNCwgJ00nLCAnbScpLAogICAgKDB4MUQ2MTUsICdNJywgJ24nKSwKICAgICgweDFENjE2LCAnTScsICdvJyksCiAgICAoMHgxRDYxNywgJ00nLCAncCcpLAogICAgKDB4MUQ2MTgsICdNJywgJ3EnKSwKICAgICgweDFENjE5LCAnTScsICdyJyksCiAgICAoMHgxRDYxQSwgJ00nLCAncycpLAogICAgKDB4MUQ2MUIsICdNJywgJ3QnKSwKICAgICgweDFENjFDLCAnTScsICd1JyksCiAgICAoMHgxRDYxRCwgJ00nLCAndicpLAogICAgKDB4MUQ2MUUsICdNJywgJ3cnKSwKICAgICgweDFENjFGLCAnTScsICd4JyksCiAgICAoMHgxRDYyMCwgJ00nLCAneScpLAogICAgKDB4MUQ2MjEsICdNJywgJ3onKSwKICAgICgweDFENjIyLCAnTScsICdhJyksCiAgICAoMHgxRDYyMywgJ00nLCAnYicpLAogICAgKDB4MUQ2MjQsICdNJywgJ2MnKSwKICAgICgweDFENjI1LCAnTScsICdkJyksCiAgICAoMHgxRDYyNiwgJ00nLCAnZScpLAogICAgKDB4MUQ2MjcsICdNJywgJ2YnKSwKICAgICgweDFENjI4LCAnTScsICdnJyksCiAgICAoMHgxRDYyOSwgJ00nLCAnaCcpLAogICAgKDB4MUQ2MkEsICdNJywgJ2knKSwKICAgIF0KCmRlZiBfc2VnXzY2KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4MUQ2MkIsICdNJywgJ2onKSwKICAgICgweDFENjJDLCAnTScsICdrJyksCiAgICAoMHgxRDYyRCwgJ00nLCAnbCcpLAogICAgKDB4MUQ2MkUsICdNJywgJ20nKSwKICAgICgweDFENjJGLCAnTScsICduJyksCiAgICAoMHgxRDYzMCwgJ00nLCAnbycpLAogICAgKDB4MUQ2MzEsICdNJywgJ3AnKSwKICAgICgweDFENjMyLCAnTScsICdxJyksCiAgICAoMHgxRDYzMywgJ00nLCAncicpLAogICAgKDB4MUQ2MzQsICdNJywgJ3MnKSwKICAgICgweDFENjM1LCAnTScsICd0JyksCiAgICAoMHgxRDYzNiwgJ00nLCAndScpLAogICAgKDB4MUQ2MzcsICdNJywgJ3YnKSwKICAgICgweDFENjM4LCAnTScsICd3JyksCiAgICAoMHgxRDYzOSwgJ00nLCAneCcpLAogICAgKDB4MUQ2M0EsICdNJywgJ3knKSwKICAgICgweDFENjNCLCAnTScsICd6JyksCiAgICAoMHgxRDYzQywgJ00nLCAnYScpLAogICAgKDB4MUQ2M0QsICdNJywgJ2InKSwKICAgICgweDFENjNFLCAnTScsICdjJyksCiAgICAoMHgxRDYzRiwgJ00nLCAnZCcpLAogICAgKDB4MUQ2NDAsICdNJywgJ2UnKSwKICAgICgweDFENjQxLCAnTScsICdmJyksCiAgICAoMHgxRDY0MiwgJ00nLCAnZycpLAogICAgKDB4MUQ2NDMsICdNJywgJ2gnKSwKICAgICgweDFENjQ0LCAnTScsICdpJyksCiAgICAoMHgxRDY0NSwgJ00nLCAnaicpLAogICAgKDB4MUQ2NDYsICdNJywgJ2snKSwKICAgICgweDFENjQ3LCAnTScsICdsJyksCiAgICAoMHgxRDY0OCwgJ00nLCAnbScpLAogICAgKDB4MUQ2NDksICdNJywgJ24nKSwKICAgICgweDFENjRBLCAnTScsICdvJyksCiAgICAoMHgxRDY0QiwgJ00nLCAncCcpLAogICAgKDB4MUQ2NEMsICdNJywgJ3EnKSwKICAgICgweDFENjRELCAnTScsICdyJyksCiAgICAoMHgxRDY0RSwgJ00nLCAncycpLAogICAgKDB4MUQ2NEYsICdNJywgJ3QnKSwKICAgICgweDFENjUwLCAnTScsICd1JyksCiAgICAoMHgxRDY1MSwgJ00nLCAndicpLAogICAgKDB4MUQ2NTIsICdNJywgJ3cnKSwKICAgICgweDFENjUzLCAnTScsICd4JyksCiAgICAoMHgxRDY1NCwgJ00nLCAneScpLAogICAgKDB4MUQ2NTUsICdNJywgJ3onKSwKICAgICgweDFENjU2LCAnTScsICdhJyksCiAgICAoMHgxRDY1NywgJ00nLCAnYicpLAogICAgKDB4MUQ2NTgsICdNJywgJ2MnKSwKICAgICgweDFENjU5LCAnTScsICdkJyksCiAgICAoMHgxRDY1QSwgJ00nLCAnZScpLAogICAgKDB4MUQ2NUIsICdNJywgJ2YnKSwKICAgICgweDFENjVDLCAnTScsICdnJyksCiAgICAoMHgxRDY1RCwgJ00nLCAnaCcpLAogICAgKDB4MUQ2NUUsICdNJywgJ2knKSwKICAgICgweDFENjVGLCAnTScsICdqJyksCiAgICAoMHgxRDY2MCwgJ00nLCAnaycpLAogICAgKDB4MUQ2NjEsICdNJywgJ2wnKSwKICAgICgweDFENjYyLCAnTScsICdtJyksCiAgICAoMHgxRDY2MywgJ00nLCAnbicpLAogICAgKDB4MUQ2NjQsICdNJywgJ28nKSwKICAgICgweDFENjY1LCAnTScsICdwJyksCiAgICAoMHgxRDY2NiwgJ00nLCAncScpLAogICAgKDB4MUQ2NjcsICdNJywgJ3InKSwKICAgICgweDFENjY4LCAnTScsICdzJyksCiAgICAoMHgxRDY2OSwgJ00nLCAndCcpLAogICAgKDB4MUQ2NkEsICdNJywgJ3UnKSwKICAgICgweDFENjZCLCAnTScsICd2JyksCiAgICAoMHgxRDY2QywgJ00nLCAndycpLAogICAgKDB4MUQ2NkQsICdNJywgJ3gnKSwKICAgICgweDFENjZFLCAnTScsICd5JyksCiAgICAoMHgxRDY2RiwgJ00nLCAneicpLAogICAgKDB4MUQ2NzAsICdNJywgJ2EnKSwKICAgICgweDFENjcxLCAnTScsICdiJyksCiAgICAoMHgxRDY3MiwgJ00nLCAnYycpLAogICAgKDB4MUQ2NzMsICdNJywgJ2QnKSwKICAgICgweDFENjc0LCAnTScsICdlJyksCiAgICAoMHgxRDY3NSwgJ00nLCAnZicpLAogICAgKDB4MUQ2NzYsICdNJywgJ2cnKSwKICAgICgweDFENjc3LCAnTScsICdoJyksCiAgICAoMHgxRDY3OCwgJ00nLCAnaScpLAogICAgKDB4MUQ2NzksICdNJywgJ2onKSwKICAgICgweDFENjdBLCAnTScsICdrJyksCiAgICAoMHgxRDY3QiwgJ00nLCAnbCcpLAogICAgKDB4MUQ2N0MsICdNJywgJ20nKSwKICAgICgweDFENjdELCAnTScsICduJyksCiAgICAoMHgxRDY3RSwgJ00nLCAnbycpLAogICAgKDB4MUQ2N0YsICdNJywgJ3AnKSwKICAgICgweDFENjgwLCAnTScsICdxJyksCiAgICAoMHgxRDY4MSwgJ00nLCAncicpLAogICAgKDB4MUQ2ODIsICdNJywgJ3MnKSwKICAgICgweDFENjgzLCAnTScsICd0JyksCiAgICAoMHgxRDY4NCwgJ00nLCAndScpLAogICAgKDB4MUQ2ODUsICdNJywgJ3YnKSwKICAgICgweDFENjg2LCAnTScsICd3JyksCiAgICAoMHgxRDY4NywgJ00nLCAneCcpLAogICAgKDB4MUQ2ODgsICdNJywgJ3knKSwKICAgICgweDFENjg5LCAnTScsICd6JyksCiAgICAoMHgxRDY4QSwgJ00nLCAnYScpLAogICAgKDB4MUQ2OEIsICdNJywgJ2InKSwKICAgICgweDFENjhDLCAnTScsICdjJyksCiAgICAoMHgxRDY4RCwgJ00nLCAnZCcpLAogICAgKDB4MUQ2OEUsICdNJywgJ2UnKSwKICAgIF0KCmRlZiBfc2VnXzY3KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4MUQ2OEYsICdNJywgJ2YnKSwKICAgICgweDFENjkwLCAnTScsICdnJyksCiAgICAoMHgxRDY5MSwgJ00nLCAnaCcpLAogICAgKDB4MUQ2OTIsICdNJywgJ2knKSwKICAgICgweDFENjkzLCAnTScsICdqJyksCiAgICAoMHgxRDY5NCwgJ00nLCAnaycpLAogICAgKDB4MUQ2OTUsICdNJywgJ2wnKSwKICAgICgweDFENjk2LCAnTScsICdtJyksCiAgICAoMHgxRDY5NywgJ00nLCAnbicpLAogICAgKDB4MUQ2OTgsICdNJywgJ28nKSwKICAgICgweDFENjk5LCAnTScsICdwJyksCiAgICAoMHgxRDY5QSwgJ00nLCAncScpLAogICAgKDB4MUQ2OUIsICdNJywgJ3InKSwKICAgICgweDFENjlDLCAnTScsICdzJyksCiAgICAoMHgxRDY5RCwgJ00nLCAndCcpLAogICAgKDB4MUQ2OUUsICdNJywgJ3UnKSwKICAgICgweDFENjlGLCAnTScsICd2JyksCiAgICAoMHgxRDZBMCwgJ00nLCAndycpLAogICAgKDB4MUQ2QTEsICdNJywgJ3gnKSwKICAgICgweDFENkEyLCAnTScsICd5JyksCiAgICAoMHgxRDZBMywgJ00nLCAneicpLAogICAgKDB4MUQ2QTQsICdNJywgJ8SxJyksCiAgICAoMHgxRDZBNSwgJ00nLCAnyLcnKSwKICAgICgweDFENkE2LCAnWCcpLAogICAgKDB4MUQ2QTgsICdNJywgJ86xJyksCiAgICAoMHgxRDZBOSwgJ00nLCAnzrInKSwKICAgICgweDFENkFBLCAnTScsICfOsycpLAogICAgKDB4MUQ2QUIsICdNJywgJ860JyksCiAgICAoMHgxRDZBQywgJ00nLCAnzrUnKSwKICAgICgweDFENkFELCAnTScsICfOticpLAogICAgKDB4MUQ2QUUsICdNJywgJ863JyksCiAgICAoMHgxRDZBRiwgJ00nLCAnzrgnKSwKICAgICgweDFENkIwLCAnTScsICfOuScpLAogICAgKDB4MUQ2QjEsICdNJywgJ866JyksCiAgICAoMHgxRDZCMiwgJ00nLCAnzrsnKSwKICAgICgweDFENkIzLCAnTScsICfOvCcpLAogICAgKDB4MUQ2QjQsICdNJywgJ869JyksCiAgICAoMHgxRDZCNSwgJ00nLCAnzr4nKSwKICAgICgweDFENkI2LCAnTScsICfOvycpLAogICAgKDB4MUQ2QjcsICdNJywgJ8+AJyksCiAgICAoMHgxRDZCOCwgJ00nLCAnz4EnKSwKICAgICgweDFENkI5LCAnTScsICfOuCcpLAogICAgKDB4MUQ2QkEsICdNJywgJ8+DJyksCiAgICAoMHgxRDZCQiwgJ00nLCAnz4QnKSwKICAgICgweDFENkJDLCAnTScsICfPhScpLAogICAgKDB4MUQ2QkQsICdNJywgJ8+GJyksCiAgICAoMHgxRDZCRSwgJ00nLCAnz4cnKSwKICAgICgweDFENkJGLCAnTScsICfPiCcpLAogICAgKDB4MUQ2QzAsICdNJywgJ8+JJyksCiAgICAoMHgxRDZDMSwgJ00nLCAn4oiHJyksCiAgICAoMHgxRDZDMiwgJ00nLCAnzrEnKSwKICAgICgweDFENkMzLCAnTScsICfOsicpLAogICAgKDB4MUQ2QzQsICdNJywgJ86zJyksCiAgICAoMHgxRDZDNSwgJ00nLCAnzrQnKSwKICAgICgweDFENkM2LCAnTScsICfOtScpLAogICAgKDB4MUQ2QzcsICdNJywgJ862JyksCiAgICAoMHgxRDZDOCwgJ00nLCAnzrcnKSwKICAgICgweDFENkM5LCAnTScsICfOuCcpLAogICAgKDB4MUQ2Q0EsICdNJywgJ865JyksCiAgICAoMHgxRDZDQiwgJ00nLCAnzronKSwKICAgICgweDFENkNDLCAnTScsICfOuycpLAogICAgKDB4MUQ2Q0QsICdNJywgJ868JyksCiAgICAoMHgxRDZDRSwgJ00nLCAnzr0nKSwKICAgICgweDFENkNGLCAnTScsICfOvicpLAogICAgKDB4MUQ2RDAsICdNJywgJ86/JyksCiAgICAoMHgxRDZEMSwgJ00nLCAnz4AnKSwKICAgICgweDFENkQyLCAnTScsICfPgScpLAogICAgKDB4MUQ2RDMsICdNJywgJ8+DJyksCiAgICAoMHgxRDZENSwgJ00nLCAnz4QnKSwKICAgICgweDFENkQ2LCAnTScsICfPhScpLAogICAgKDB4MUQ2RDcsICdNJywgJ8+GJyksCiAgICAoMHgxRDZEOCwgJ00nLCAnz4cnKSwKICAgICgweDFENkQ5LCAnTScsICfPiCcpLAogICAgKDB4MUQ2REEsICdNJywgJ8+JJyksCiAgICAoMHgxRDZEQiwgJ00nLCAn4oiCJyksCiAgICAoMHgxRDZEQywgJ00nLCAnzrUnKSwKICAgICgweDFENkRELCAnTScsICfOuCcpLAogICAgKDB4MUQ2REUsICdNJywgJ866JyksCiAgICAoMHgxRDZERiwgJ00nLCAnz4YnKSwKICAgICgweDFENkUwLCAnTScsICfPgScpLAogICAgKDB4MUQ2RTEsICdNJywgJ8+AJyksCiAgICAoMHgxRDZFMiwgJ00nLCAnzrEnKSwKICAgICgweDFENkUzLCAnTScsICfOsicpLAogICAgKDB4MUQ2RTQsICdNJywgJ86zJyksCiAgICAoMHgxRDZFNSwgJ00nLCAnzrQnKSwKICAgICgweDFENkU2LCAnTScsICfOtScpLAogICAgKDB4MUQ2RTcsICdNJywgJ862JyksCiAgICAoMHgxRDZFOCwgJ00nLCAnzrcnKSwKICAgICgweDFENkU5LCAnTScsICfOuCcpLAogICAgKDB4MUQ2RUEsICdNJywgJ865JyksCiAgICAoMHgxRDZFQiwgJ00nLCAnzronKSwKICAgICgweDFENkVDLCAnTScsICfOuycpLAogICAgKDB4MUQ2RUQsICdNJywgJ868JyksCiAgICAoMHgxRDZFRSwgJ00nLCAnzr0nKSwKICAgICgweDFENkVGLCAnTScsICfOvicpLAogICAgKDB4MUQ2RjAsICdNJywgJ86/JyksCiAgICAoMHgxRDZGMSwgJ00nLCAnz4AnKSwKICAgICgweDFENkYyLCAnTScsICfPgScpLAogICAgKDB4MUQ2RjMsICdNJywgJ864JyksCiAgICAoMHgxRDZGNCwgJ00nLCAnz4MnKSwKICAgIF0KCmRlZiBfc2VnXzY4KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4MUQ2RjUsICdNJywgJ8+EJyksCiAgICAoMHgxRDZGNiwgJ00nLCAnz4UnKSwKICAgICgweDFENkY3LCAnTScsICfPhicpLAogICAgKDB4MUQ2RjgsICdNJywgJ8+HJyksCiAgICAoMHgxRDZGOSwgJ00nLCAnz4gnKSwKICAgICgweDFENkZBLCAnTScsICfPiScpLAogICAgKDB4MUQ2RkIsICdNJywgJ+KIhycpLAogICAgKDB4MUQ2RkMsICdNJywgJ86xJyksCiAgICAoMHgxRDZGRCwgJ00nLCAnzrInKSwKICAgICgweDFENkZFLCAnTScsICfOsycpLAogICAgKDB4MUQ2RkYsICdNJywgJ860JyksCiAgICAoMHgxRDcwMCwgJ00nLCAnzrUnKSwKICAgICgweDFENzAxLCAnTScsICfOticpLAogICAgKDB4MUQ3MDIsICdNJywgJ863JyksCiAgICAoMHgxRDcwMywgJ00nLCAnzrgnKSwKICAgICgweDFENzA0LCAnTScsICfOuScpLAogICAgKDB4MUQ3MDUsICdNJywgJ866JyksCiAgICAoMHgxRDcwNiwgJ00nLCAnzrsnKSwKICAgICgweDFENzA3LCAnTScsICfOvCcpLAogICAgKDB4MUQ3MDgsICdNJywgJ869JyksCiAgICAoMHgxRDcwOSwgJ00nLCAnzr4nKSwKICAgICgweDFENzBBLCAnTScsICfOvycpLAogICAgKDB4MUQ3MEIsICdNJywgJ8+AJyksCiAgICAoMHgxRDcwQywgJ00nLCAnz4EnKSwKICAgICgweDFENzBELCAnTScsICfPgycpLAogICAgKDB4MUQ3MEYsICdNJywgJ8+EJyksCiAgICAoMHgxRDcxMCwgJ00nLCAnz4UnKSwKICAgICgweDFENzExLCAnTScsICfPhicpLAogICAgKDB4MUQ3MTIsICdNJywgJ8+HJyksCiAgICAoMHgxRDcxMywgJ00nLCAnz4gnKSwKICAgICgweDFENzE0LCAnTScsICfPiScpLAogICAgKDB4MUQ3MTUsICdNJywgJ+KIgicpLAogICAgKDB4MUQ3MTYsICdNJywgJ861JyksCiAgICAoMHgxRDcxNywgJ00nLCAnzrgnKSwKICAgICgweDFENzE4LCAnTScsICfOuicpLAogICAgKDB4MUQ3MTksICdNJywgJ8+GJyksCiAgICAoMHgxRDcxQSwgJ00nLCAnz4EnKSwKICAgICgweDFENzFCLCAnTScsICfPgCcpLAogICAgKDB4MUQ3MUMsICdNJywgJ86xJyksCiAgICAoMHgxRDcxRCwgJ00nLCAnzrInKSwKICAgICgweDFENzFFLCAnTScsICfOsycpLAogICAgKDB4MUQ3MUYsICdNJywgJ860JyksCiAgICAoMHgxRDcyMCwgJ00nLCAnzrUnKSwKICAgICgweDFENzIxLCAnTScsICfOticpLAogICAgKDB4MUQ3MjIsICdNJywgJ863JyksCiAgICAoMHgxRDcyMywgJ00nLCAnzrgnKSwKICAgICgweDFENzI0LCAnTScsICfOuScpLAogICAgKDB4MUQ3MjUsICdNJywgJ866JyksCiAgICAoMHgxRDcyNiwgJ00nLCAnzrsnKSwKICAgICgweDFENzI3LCAnTScsICfOvCcpLAogICAgKDB4MUQ3MjgsICdNJywgJ869JyksCiAgICAoMHgxRDcyOSwgJ00nLCAnzr4nKSwKICAgICgweDFENzJBLCAnTScsICfOvycpLAogICAgKDB4MUQ3MkIsICdNJywgJ8+AJyksCiAgICAoMHgxRDcyQywgJ00nLCAnz4EnKSwKICAgICgweDFENzJELCAnTScsICfOuCcpLAogICAgKDB4MUQ3MkUsICdNJywgJ8+DJyksCiAgICAoMHgxRDcyRiwgJ00nLCAnz4QnKSwKICAgICgweDFENzMwLCAnTScsICfPhScpLAogICAgKDB4MUQ3MzEsICdNJywgJ8+GJyksCiAgICAoMHgxRDczMiwgJ00nLCAnz4cnKSwKICAgICgweDFENzMzLCAnTScsICfPiCcpLAogICAgKDB4MUQ3MzQsICdNJywgJ8+JJyksCiAgICAoMHgxRDczNSwgJ00nLCAn4oiHJyksCiAgICAoMHgxRDczNiwgJ00nLCAnzrEnKSwKICAgICgweDFENzM3LCAnTScsICfOsicpLAogICAgKDB4MUQ3MzgsICdNJywgJ86zJyksCiAgICAoMHgxRDczOSwgJ00nLCAnzrQnKSwKICAgICgweDFENzNBLCAnTScsICfOtScpLAogICAgKDB4MUQ3M0IsICdNJywgJ862JyksCiAgICAoMHgxRDczQywgJ00nLCAnzrcnKSwKICAgICgweDFENzNELCAnTScsICfOuCcpLAogICAgKDB4MUQ3M0UsICdNJywgJ865JyksCiAgICAoMHgxRDczRiwgJ00nLCAnzronKSwKICAgICgweDFENzQwLCAnTScsICfOuycpLAogICAgKDB4MUQ3NDEsICdNJywgJ868JyksCiAgICAoMHgxRDc0MiwgJ00nLCAnzr0nKSwKICAgICgweDFENzQzLCAnTScsICfOvicpLAogICAgKDB4MUQ3NDQsICdNJywgJ86/JyksCiAgICAoMHgxRDc0NSwgJ00nLCAnz4AnKSwKICAgICgweDFENzQ2LCAnTScsICfPgScpLAogICAgKDB4MUQ3NDcsICdNJywgJ8+DJyksCiAgICAoMHgxRDc0OSwgJ00nLCAnz4QnKSwKICAgICgweDFENzRBLCAnTScsICfPhScpLAogICAgKDB4MUQ3NEIsICdNJywgJ8+GJyksCiAgICAoMHgxRDc0QywgJ00nLCAnz4cnKSwKICAgICgweDFENzRELCAnTScsICfPiCcpLAogICAgKDB4MUQ3NEUsICdNJywgJ8+JJyksCiAgICAoMHgxRDc0RiwgJ00nLCAn4oiCJyksCiAgICAoMHgxRDc1MCwgJ00nLCAnzrUnKSwKICAgICgweDFENzUxLCAnTScsICfOuCcpLAogICAgKDB4MUQ3NTIsICdNJywgJ866JyksCiAgICAoMHgxRDc1MywgJ00nLCAnz4YnKSwKICAgICgweDFENzU0LCAnTScsICfPgScpLAogICAgKDB4MUQ3NTUsICdNJywgJ8+AJyksCiAgICAoMHgxRDc1NiwgJ00nLCAnzrEnKSwKICAgICgweDFENzU3LCAnTScsICfOsicpLAogICAgKDB4MUQ3NTgsICdNJywgJ86zJyksCiAgICAoMHgxRDc1OSwgJ00nLCAnzrQnKSwKICAgICgweDFENzVBLCAnTScsICfOtScpLAogICAgXQoKZGVmIF9zZWdfNjkoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXToKICAgIHJldHVybiBbCiAgICAoMHgxRDc1QiwgJ00nLCAnzrYnKSwKICAgICgweDFENzVDLCAnTScsICfOtycpLAogICAgKDB4MUQ3NUQsICdNJywgJ864JyksCiAgICAoMHgxRDc1RSwgJ00nLCAnzrknKSwKICAgICgweDFENzVGLCAnTScsICfOuicpLAogICAgKDB4MUQ3NjAsICdNJywgJ867JyksCiAgICAoMHgxRDc2MSwgJ00nLCAnzrwnKSwKICAgICgweDFENzYyLCAnTScsICfOvScpLAogICAgKDB4MUQ3NjMsICdNJywgJ86+JyksCiAgICAoMHgxRDc2NCwgJ00nLCAnzr8nKSwKICAgICgweDFENzY1LCAnTScsICfPgCcpLAogICAgKDB4MUQ3NjYsICdNJywgJ8+BJyksCiAgICAoMHgxRDc2NywgJ00nLCAnzrgnKSwKICAgICgweDFENzY4LCAnTScsICfPgycpLAogICAgKDB4MUQ3NjksICdNJywgJ8+EJyksCiAgICAoMHgxRDc2QSwgJ00nLCAnz4UnKSwKICAgICgweDFENzZCLCAnTScsICfPhicpLAogICAgKDB4MUQ3NkMsICdNJywgJ8+HJyksCiAgICAoMHgxRDc2RCwgJ00nLCAnz4gnKSwKICAgICgweDFENzZFLCAnTScsICfPiScpLAogICAgKDB4MUQ3NkYsICdNJywgJ+KIhycpLAogICAgKDB4MUQ3NzAsICdNJywgJ86xJyksCiAgICAoMHgxRDc3MSwgJ00nLCAnzrInKSwKICAgICgweDFENzcyLCAnTScsICfOsycpLAogICAgKDB4MUQ3NzMsICdNJywgJ860JyksCiAgICAoMHgxRDc3NCwgJ00nLCAnzrUnKSwKICAgICgweDFENzc1LCAnTScsICfOticpLAogICAgKDB4MUQ3NzYsICdNJywgJ863JyksCiAgICAoMHgxRDc3NywgJ00nLCAnzrgnKSwKICAgICgweDFENzc4LCAnTScsICfOuScpLAogICAgKDB4MUQ3NzksICdNJywgJ866JyksCiAgICAoMHgxRDc3QSwgJ00nLCAnzrsnKSwKICAgICgweDFENzdCLCAnTScsICfOvCcpLAogICAgKDB4MUQ3N0MsICdNJywgJ869JyksCiAgICAoMHgxRDc3RCwgJ00nLCAnzr4nKSwKICAgICgweDFENzdFLCAnTScsICfOvycpLAogICAgKDB4MUQ3N0YsICdNJywgJ8+AJyksCiAgICAoMHgxRDc4MCwgJ00nLCAnz4EnKSwKICAgICgweDFENzgxLCAnTScsICfPgycpLAogICAgKDB4MUQ3ODMsICdNJywgJ8+EJyksCiAgICAoMHgxRDc4NCwgJ00nLCAnz4UnKSwKICAgICgweDFENzg1LCAnTScsICfPhicpLAogICAgKDB4MUQ3ODYsICdNJywgJ8+HJyksCiAgICAoMHgxRDc4NywgJ00nLCAnz4gnKSwKICAgICgweDFENzg4LCAnTScsICfPiScpLAogICAgKDB4MUQ3ODksICdNJywgJ+KIgicpLAogICAgKDB4MUQ3OEEsICdNJywgJ861JyksCiAgICAoMHgxRDc4QiwgJ00nLCAnzrgnKSwKICAgICgweDFENzhDLCAnTScsICfOuicpLAogICAgKDB4MUQ3OEQsICdNJywgJ8+GJyksCiAgICAoMHgxRDc4RSwgJ00nLCAnz4EnKSwKICAgICgweDFENzhGLCAnTScsICfPgCcpLAogICAgKDB4MUQ3OTAsICdNJywgJ86xJyksCiAgICAoMHgxRDc5MSwgJ00nLCAnzrInKSwKICAgICgweDFENzkyLCAnTScsICfOsycpLAogICAgKDB4MUQ3OTMsICdNJywgJ860JyksCiAgICAoMHgxRDc5NCwgJ00nLCAnzrUnKSwKICAgICgweDFENzk1LCAnTScsICfOticpLAogICAgKDB4MUQ3OTYsICdNJywgJ863JyksCiAgICAoMHgxRDc5NywgJ00nLCAnzrgnKSwKICAgICgweDFENzk4LCAnTScsICfOuScpLAogICAgKDB4MUQ3OTksICdNJywgJ866JyksCiAgICAoMHgxRDc5QSwgJ00nLCAnzrsnKSwKICAgICgweDFENzlCLCAnTScsICfOvCcpLAogICAgKDB4MUQ3OUMsICdNJywgJ869JyksCiAgICAoMHgxRDc5RCwgJ00nLCAnzr4nKSwKICAgICgweDFENzlFLCAnTScsICfOvycpLAogICAgKDB4MUQ3OUYsICdNJywgJ8+AJyksCiAgICAoMHgxRDdBMCwgJ00nLCAnz4EnKSwKICAgICgweDFEN0ExLCAnTScsICfOuCcpLAogICAgKDB4MUQ3QTIsICdNJywgJ8+DJyksCiAgICAoMHgxRDdBMywgJ00nLCAnz4QnKSwKICAgICgweDFEN0E0LCAnTScsICfPhScpLAogICAgKDB4MUQ3QTUsICdNJywgJ8+GJyksCiAgICAoMHgxRDdBNiwgJ00nLCAnz4cnKSwKICAgICgweDFEN0E3LCAnTScsICfPiCcpLAogICAgKDB4MUQ3QTgsICdNJywgJ8+JJyksCiAgICAoMHgxRDdBOSwgJ00nLCAn4oiHJyksCiAgICAoMHgxRDdBQSwgJ00nLCAnzrEnKSwKICAgICgweDFEN0FCLCAnTScsICfOsicpLAogICAgKDB4MUQ3QUMsICdNJywgJ86zJyksCiAgICAoMHgxRDdBRCwgJ00nLCAnzrQnKSwKICAgICgweDFEN0FFLCAnTScsICfOtScpLAogICAgKDB4MUQ3QUYsICdNJywgJ862JyksCiAgICAoMHgxRDdCMCwgJ00nLCAnzrcnKSwKICAgICgweDFEN0IxLCAnTScsICfOuCcpLAogICAgKDB4MUQ3QjIsICdNJywgJ865JyksCiAgICAoMHgxRDdCMywgJ00nLCAnzronKSwKICAgICgweDFEN0I0LCAnTScsICfOuycpLAogICAgKDB4MUQ3QjUsICdNJywgJ868JyksCiAgICAoMHgxRDdCNiwgJ00nLCAnzr0nKSwKICAgICgweDFEN0I3LCAnTScsICfOvicpLAogICAgKDB4MUQ3QjgsICdNJywgJ86/JyksCiAgICAoMHgxRDdCOSwgJ00nLCAnz4AnKSwKICAgICgweDFEN0JBLCAnTScsICfPgScpLAogICAgKDB4MUQ3QkIsICdNJywgJ8+DJyksCiAgICAoMHgxRDdCRCwgJ00nLCAnz4QnKSwKICAgICgweDFEN0JFLCAnTScsICfPhScpLAogICAgKDB4MUQ3QkYsICdNJywgJ8+GJyksCiAgICAoMHgxRDdDMCwgJ00nLCAnz4cnKSwKICAgIF0KCmRlZiBfc2VnXzcwKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4MUQ3QzEsICdNJywgJ8+IJyksCiAgICAoMHgxRDdDMiwgJ00nLCAnz4knKSwKICAgICgweDFEN0MzLCAnTScsICfiiIInKSwKICAgICgweDFEN0M0LCAnTScsICfOtScpLAogICAgKDB4MUQ3QzUsICdNJywgJ864JyksCiAgICAoMHgxRDdDNiwgJ00nLCAnzronKSwKICAgICgweDFEN0M3LCAnTScsICfPhicpLAogICAgKDB4MUQ3QzgsICdNJywgJ8+BJyksCiAgICAoMHgxRDdDOSwgJ00nLCAnz4AnKSwKICAgICgweDFEN0NBLCAnTScsICfPnScpLAogICAgKDB4MUQ3Q0MsICdYJyksCiAgICAoMHgxRDdDRSwgJ00nLCAnMCcpLAogICAgKDB4MUQ3Q0YsICdNJywgJzEnKSwKICAgICgweDFEN0QwLCAnTScsICcyJyksCiAgICAoMHgxRDdEMSwgJ00nLCAnMycpLAogICAgKDB4MUQ3RDIsICdNJywgJzQnKSwKICAgICgweDFEN0QzLCAnTScsICc1JyksCiAgICAoMHgxRDdENCwgJ00nLCAnNicpLAogICAgKDB4MUQ3RDUsICdNJywgJzcnKSwKICAgICgweDFEN0Q2LCAnTScsICc4JyksCiAgICAoMHgxRDdENywgJ00nLCAnOScpLAogICAgKDB4MUQ3RDgsICdNJywgJzAnKSwKICAgICgweDFEN0Q5LCAnTScsICcxJyksCiAgICAoMHgxRDdEQSwgJ00nLCAnMicpLAogICAgKDB4MUQ3REIsICdNJywgJzMnKSwKICAgICgweDFEN0RDLCAnTScsICc0JyksCiAgICAoMHgxRDdERCwgJ00nLCAnNScpLAogICAgKDB4MUQ3REUsICdNJywgJzYnKSwKICAgICgweDFEN0RGLCAnTScsICc3JyksCiAgICAoMHgxRDdFMCwgJ00nLCAnOCcpLAogICAgKDB4MUQ3RTEsICdNJywgJzknKSwKICAgICgweDFEN0UyLCAnTScsICcwJyksCiAgICAoMHgxRDdFMywgJ00nLCAnMScpLAogICAgKDB4MUQ3RTQsICdNJywgJzInKSwKICAgICgweDFEN0U1LCAnTScsICczJyksCiAgICAoMHgxRDdFNiwgJ00nLCAnNCcpLAogICAgKDB4MUQ3RTcsICdNJywgJzUnKSwKICAgICgweDFEN0U4LCAnTScsICc2JyksCiAgICAoMHgxRDdFOSwgJ00nLCAnNycpLAogICAgKDB4MUQ3RUEsICdNJywgJzgnKSwKICAgICgweDFEN0VCLCAnTScsICc5JyksCiAgICAoMHgxRDdFQywgJ00nLCAnMCcpLAogICAgKDB4MUQ3RUQsICdNJywgJzEnKSwKICAgICgweDFEN0VFLCAnTScsICcyJyksCiAgICAoMHgxRDdFRiwgJ00nLCAnMycpLAogICAgKDB4MUQ3RjAsICdNJywgJzQnKSwKICAgICgweDFEN0YxLCAnTScsICc1JyksCiAgICAoMHgxRDdGMiwgJ00nLCAnNicpLAogICAgKDB4MUQ3RjMsICdNJywgJzcnKSwKICAgICgweDFEN0Y0LCAnTScsICc4JyksCiAgICAoMHgxRDdGNSwgJ00nLCAnOScpLAogICAgKDB4MUQ3RjYsICdNJywgJzAnKSwKICAgICgweDFEN0Y3LCAnTScsICcxJyksCiAgICAoMHgxRDdGOCwgJ00nLCAnMicpLAogICAgKDB4MUQ3RjksICdNJywgJzMnKSwKICAgICgweDFEN0ZBLCAnTScsICc0JyksCiAgICAoMHgxRDdGQiwgJ00nLCAnNScpLAogICAgKDB4MUQ3RkMsICdNJywgJzYnKSwKICAgICgweDFEN0ZELCAnTScsICc3JyksCiAgICAoMHgxRDdGRSwgJ00nLCAnOCcpLAogICAgKDB4MUQ3RkYsICdNJywgJzknKSwKICAgICgweDFEODAwLCAnVicpLAogICAgKDB4MURBOEMsICdYJyksCiAgICAoMHgxREE5QiwgJ1YnKSwKICAgICgweDFEQUEwLCAnWCcpLAogICAgKDB4MURBQTEsICdWJyksCiAgICAoMHgxREFCMCwgJ1gnKSwKICAgICgweDFERjAwLCAnVicpLAogICAgKDB4MURGMUYsICdYJyksCiAgICAoMHgxRTAwMCwgJ1YnKSwKICAgICgweDFFMDA3LCAnWCcpLAogICAgKDB4MUUwMDgsICdWJyksCiAgICAoMHgxRTAxOSwgJ1gnKSwKICAgICgweDFFMDFCLCAnVicpLAogICAgKDB4MUUwMjIsICdYJyksCiAgICAoMHgxRTAyMywgJ1YnKSwKICAgICgweDFFMDI1LCAnWCcpLAogICAgKDB4MUUwMjYsICdWJyksCiAgICAoMHgxRTAyQiwgJ1gnKSwKICAgICgweDFFMTAwLCAnVicpLAogICAgKDB4MUUxMkQsICdYJyksCiAgICAoMHgxRTEzMCwgJ1YnKSwKICAgICgweDFFMTNFLCAnWCcpLAogICAgKDB4MUUxNDAsICdWJyksCiAgICAoMHgxRTE0QSwgJ1gnKSwKICAgICgweDFFMTRFLCAnVicpLAogICAgKDB4MUUxNTAsICdYJyksCiAgICAoMHgxRTI5MCwgJ1YnKSwKICAgICgweDFFMkFGLCAnWCcpLAogICAgKDB4MUUyQzAsICdWJyksCiAgICAoMHgxRTJGQSwgJ1gnKSwKICAgICgweDFFMkZGLCAnVicpLAogICAgKDB4MUUzMDAsICdYJyksCiAgICAoMHgxRTdFMCwgJ1YnKSwKICAgICgweDFFN0U3LCAnWCcpLAogICAgKDB4MUU3RTgsICdWJyksCiAgICAoMHgxRTdFQywgJ1gnKSwKICAgICgweDFFN0VELCAnVicpLAogICAgKDB4MUU3RUYsICdYJyksCiAgICAoMHgxRTdGMCwgJ1YnKSwKICAgIF0KCmRlZiBfc2VnXzcxKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4MUU3RkYsICdYJyksCiAgICAoMHgxRTgwMCwgJ1YnKSwKICAgICgweDFFOEM1LCAnWCcpLAogICAgKDB4MUU4QzcsICdWJyksCiAgICAoMHgxRThENywgJ1gnKSwKICAgICgweDFFOTAwLCAnTScsICfwnqSiJyksCiAgICAoMHgxRTkwMSwgJ00nLCAn8J6koycpLAogICAgKDB4MUU5MDIsICdNJywgJ/CepKQnKSwKICAgICgweDFFOTAzLCAnTScsICfwnqSlJyksCiAgICAoMHgxRTkwNCwgJ00nLCAn8J6kpicpLAogICAgKDB4MUU5MDUsICdNJywgJ/CepKcnKSwKICAgICgweDFFOTA2LCAnTScsICfwnqSoJyksCiAgICAoMHgxRTkwNywgJ00nLCAn8J6kqScpLAogICAgKDB4MUU5MDgsICdNJywgJ/CepKonKSwKICAgICgweDFFOTA5LCAnTScsICfwnqSrJyksCiAgICAoMHgxRTkwQSwgJ00nLCAn8J6krCcpLAogICAgKDB4MUU5MEIsICdNJywgJ/CepK0nKSwKICAgICgweDFFOTBDLCAnTScsICfwnqSuJyksCiAgICAoMHgxRTkwRCwgJ00nLCAn8J6krycpLAogICAgKDB4MUU5MEUsICdNJywgJ/CepLAnKSwKICAgICgweDFFOTBGLCAnTScsICfwnqSxJyksCiAgICAoMHgxRTkxMCwgJ00nLCAn8J6ksicpLAogICAgKDB4MUU5MTEsICdNJywgJ/CepLMnKSwKICAgICgweDFFOTEyLCAnTScsICfwnqS0JyksCiAgICAoMHgxRTkxMywgJ00nLCAn8J6ktScpLAogICAgKDB4MUU5MTQsICdNJywgJ/CepLYnKSwKICAgICgweDFFOTE1LCAnTScsICfwnqS3JyksCiAgICAoMHgxRTkxNiwgJ00nLCAn8J6kuCcpLAogICAgKDB4MUU5MTcsICdNJywgJ/CepLknKSwKICAgICgweDFFOTE4LCAnTScsICfwnqS6JyksCiAgICAoMHgxRTkxOSwgJ00nLCAn8J6kuycpLAogICAgKDB4MUU5MUEsICdNJywgJ/CepLwnKSwKICAgICgweDFFOTFCLCAnTScsICfwnqS9JyksCiAgICAoMHgxRTkxQywgJ00nLCAn8J6kvicpLAogICAgKDB4MUU5MUQsICdNJywgJ/CepL8nKSwKICAgICgweDFFOTFFLCAnTScsICfwnqWAJyksCiAgICAoMHgxRTkxRiwgJ00nLCAn8J6lgScpLAogICAgKDB4MUU5MjAsICdNJywgJ/CepYInKSwKICAgICgweDFFOTIxLCAnTScsICfwnqWDJyksCiAgICAoMHgxRTkyMiwgJ1YnKSwKICAgICgweDFFOTRDLCAnWCcpLAogICAgKDB4MUU5NTAsICdWJyksCiAgICAoMHgxRTk1QSwgJ1gnKSwKICAgICgweDFFOTVFLCAnVicpLAogICAgKDB4MUU5NjAsICdYJyksCiAgICAoMHgxRUM3MSwgJ1YnKSwKICAgICgweDFFQ0I1LCAnWCcpLAogICAgKDB4MUVEMDEsICdWJyksCiAgICAoMHgxRUQzRSwgJ1gnKSwKICAgICgweDFFRTAwLCAnTScsICfYpycpLAogICAgKDB4MUVFMDEsICdNJywgJ9ioJyksCiAgICAoMHgxRUUwMiwgJ00nLCAn2KwnKSwKICAgICgweDFFRTAzLCAnTScsICfYrycpLAogICAgKDB4MUVFMDQsICdYJyksCiAgICAoMHgxRUUwNSwgJ00nLCAn2YgnKSwKICAgICgweDFFRTA2LCAnTScsICfYsicpLAogICAgKDB4MUVFMDcsICdNJywgJ9itJyksCiAgICAoMHgxRUUwOCwgJ00nLCAn2LcnKSwKICAgICgweDFFRTA5LCAnTScsICfZiicpLAogICAgKDB4MUVFMEEsICdNJywgJ9mDJyksCiAgICAoMHgxRUUwQiwgJ00nLCAn2YQnKSwKICAgICgweDFFRTBDLCAnTScsICfZhScpLAogICAgKDB4MUVFMEQsICdNJywgJ9mGJyksCiAgICAoMHgxRUUwRSwgJ00nLCAn2LMnKSwKICAgICgweDFFRTBGLCAnTScsICfYuScpLAogICAgKDB4MUVFMTAsICdNJywgJ9mBJyksCiAgICAoMHgxRUUxMSwgJ00nLCAn2LUnKSwKICAgICgweDFFRTEyLCAnTScsICfZgicpLAogICAgKDB4MUVFMTMsICdNJywgJ9ixJyksCiAgICAoMHgxRUUxNCwgJ00nLCAn2LQnKSwKICAgICgweDFFRTE1LCAnTScsICfYqicpLAogICAgKDB4MUVFMTYsICdNJywgJ9irJyksCiAgICAoMHgxRUUxNywgJ00nLCAn2K4nKSwKICAgICgweDFFRTE4LCAnTScsICfYsCcpLAogICAgKDB4MUVFMTksICdNJywgJ9i2JyksCiAgICAoMHgxRUUxQSwgJ00nLCAn2LgnKSwKICAgICgweDFFRTFCLCAnTScsICfYuicpLAogICAgKDB4MUVFMUMsICdNJywgJ9muJyksCiAgICAoMHgxRUUxRCwgJ00nLCAn2ronKSwKICAgICgweDFFRTFFLCAnTScsICfaoScpLAogICAgKDB4MUVFMUYsICdNJywgJ9mvJyksCiAgICAoMHgxRUUyMCwgJ1gnKSwKICAgICgweDFFRTIxLCAnTScsICfYqCcpLAogICAgKDB4MUVFMjIsICdNJywgJ9isJyksCiAgICAoMHgxRUUyMywgJ1gnKSwKICAgICgweDFFRTI0LCAnTScsICfZhycpLAogICAgKDB4MUVFMjUsICdYJyksCiAgICAoMHgxRUUyNywgJ00nLCAn2K0nKSwKICAgICgweDFFRTI4LCAnWCcpLAogICAgKDB4MUVFMjksICdNJywgJ9mKJyksCiAgICAoMHgxRUUyQSwgJ00nLCAn2YMnKSwKICAgICgweDFFRTJCLCAnTScsICfZhCcpLAogICAgKDB4MUVFMkMsICdNJywgJ9mFJyksCiAgICAoMHgxRUUyRCwgJ00nLCAn2YYnKSwKICAgICgweDFFRTJFLCAnTScsICfYsycpLAogICAgKDB4MUVFMkYsICdNJywgJ9i5JyksCiAgICAoMHgxRUUzMCwgJ00nLCAn2YEnKSwKICAgICgweDFFRTMxLCAnTScsICfYtScpLAogICAgKDB4MUVFMzIsICdNJywgJ9mCJyksCiAgICAoMHgxRUUzMywgJ1gnKSwKICAgIF0KCmRlZiBfc2VnXzcyKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4MUVFMzQsICdNJywgJ9i0JyksCiAgICAoMHgxRUUzNSwgJ00nLCAn2KonKSwKICAgICgweDFFRTM2LCAnTScsICfYqycpLAogICAgKDB4MUVFMzcsICdNJywgJ9iuJyksCiAgICAoMHgxRUUzOCwgJ1gnKSwKICAgICgweDFFRTM5LCAnTScsICfYticpLAogICAgKDB4MUVFM0EsICdYJyksCiAgICAoMHgxRUUzQiwgJ00nLCAn2LonKSwKICAgICgweDFFRTNDLCAnWCcpLAogICAgKDB4MUVFNDIsICdNJywgJ9isJyksCiAgICAoMHgxRUU0MywgJ1gnKSwKICAgICgweDFFRTQ3LCAnTScsICfYrScpLAogICAgKDB4MUVFNDgsICdYJyksCiAgICAoMHgxRUU0OSwgJ00nLCAn2YonKSwKICAgICgweDFFRTRBLCAnWCcpLAogICAgKDB4MUVFNEIsICdNJywgJ9mEJyksCiAgICAoMHgxRUU0QywgJ1gnKSwKICAgICgweDFFRTRELCAnTScsICfZhicpLAogICAgKDB4MUVFNEUsICdNJywgJ9izJyksCiAgICAoMHgxRUU0RiwgJ00nLCAn2LknKSwKICAgICgweDFFRTUwLCAnWCcpLAogICAgKDB4MUVFNTEsICdNJywgJ9i1JyksCiAgICAoMHgxRUU1MiwgJ00nLCAn2YInKSwKICAgICgweDFFRTUzLCAnWCcpLAogICAgKDB4MUVFNTQsICdNJywgJ9i0JyksCiAgICAoMHgxRUU1NSwgJ1gnKSwKICAgICgweDFFRTU3LCAnTScsICfYricpLAogICAgKDB4MUVFNTgsICdYJyksCiAgICAoMHgxRUU1OSwgJ00nLCAn2LYnKSwKICAgICgweDFFRTVBLCAnWCcpLAogICAgKDB4MUVFNUIsICdNJywgJ9i6JyksCiAgICAoMHgxRUU1QywgJ1gnKSwKICAgICgweDFFRTVELCAnTScsICfauicpLAogICAgKDB4MUVFNUUsICdYJyksCiAgICAoMHgxRUU1RiwgJ00nLCAn2a8nKSwKICAgICgweDFFRTYwLCAnWCcpLAogICAgKDB4MUVFNjEsICdNJywgJ9ioJyksCiAgICAoMHgxRUU2MiwgJ00nLCAn2KwnKSwKICAgICgweDFFRTYzLCAnWCcpLAogICAgKDB4MUVFNjQsICdNJywgJ9mHJyksCiAgICAoMHgxRUU2NSwgJ1gnKSwKICAgICgweDFFRTY3LCAnTScsICfYrScpLAogICAgKDB4MUVFNjgsICdNJywgJ9i3JyksCiAgICAoMHgxRUU2OSwgJ00nLCAn2YonKSwKICAgICgweDFFRTZBLCAnTScsICfZgycpLAogICAgKDB4MUVFNkIsICdYJyksCiAgICAoMHgxRUU2QywgJ00nLCAn2YUnKSwKICAgICgweDFFRTZELCAnTScsICfZhicpLAogICAgKDB4MUVFNkUsICdNJywgJ9izJyksCiAgICAoMHgxRUU2RiwgJ00nLCAn2LknKSwKICAgICgweDFFRTcwLCAnTScsICfZgScpLAogICAgKDB4MUVFNzEsICdNJywgJ9i1JyksCiAgICAoMHgxRUU3MiwgJ00nLCAn2YInKSwKICAgICgweDFFRTczLCAnWCcpLAogICAgKDB4MUVFNzQsICdNJywgJ9i0JyksCiAgICAoMHgxRUU3NSwgJ00nLCAn2KonKSwKICAgICgweDFFRTc2LCAnTScsICfYqycpLAogICAgKDB4MUVFNzcsICdNJywgJ9iuJyksCiAgICAoMHgxRUU3OCwgJ1gnKSwKICAgICgweDFFRTc5LCAnTScsICfYticpLAogICAgKDB4MUVFN0EsICdNJywgJ9i4JyksCiAgICAoMHgxRUU3QiwgJ00nLCAn2LonKSwKICAgICgweDFFRTdDLCAnTScsICfZricpLAogICAgKDB4MUVFN0QsICdYJyksCiAgICAoMHgxRUU3RSwgJ00nLCAn2qEnKSwKICAgICgweDFFRTdGLCAnWCcpLAogICAgKDB4MUVFODAsICdNJywgJ9inJyksCiAgICAoMHgxRUU4MSwgJ00nLCAn2KgnKSwKICAgICgweDFFRTgyLCAnTScsICfYrCcpLAogICAgKDB4MUVFODMsICdNJywgJ9ivJyksCiAgICAoMHgxRUU4NCwgJ00nLCAn2YcnKSwKICAgICgweDFFRTg1LCAnTScsICfZiCcpLAogICAgKDB4MUVFODYsICdNJywgJ9iyJyksCiAgICAoMHgxRUU4NywgJ00nLCAn2K0nKSwKICAgICgweDFFRTg4LCAnTScsICfYtycpLAogICAgKDB4MUVFODksICdNJywgJ9mKJyksCiAgICAoMHgxRUU4QSwgJ1gnKSwKICAgICgweDFFRThCLCAnTScsICfZhCcpLAogICAgKDB4MUVFOEMsICdNJywgJ9mFJyksCiAgICAoMHgxRUU4RCwgJ00nLCAn2YYnKSwKICAgICgweDFFRThFLCAnTScsICfYsycpLAogICAgKDB4MUVFOEYsICdNJywgJ9i5JyksCiAgICAoMHgxRUU5MCwgJ00nLCAn2YEnKSwKICAgICgweDFFRTkxLCAnTScsICfYtScpLAogICAgKDB4MUVFOTIsICdNJywgJ9mCJyksCiAgICAoMHgxRUU5MywgJ00nLCAn2LEnKSwKICAgICgweDFFRTk0LCAnTScsICfYtCcpLAogICAgKDB4MUVFOTUsICdNJywgJ9iqJyksCiAgICAoMHgxRUU5NiwgJ00nLCAn2KsnKSwKICAgICgweDFFRTk3LCAnTScsICfYricpLAogICAgKDB4MUVFOTgsICdNJywgJ9iwJyksCiAgICAoMHgxRUU5OSwgJ00nLCAn2LYnKSwKICAgICgweDFFRTlBLCAnTScsICfYuCcpLAogICAgKDB4MUVFOUIsICdNJywgJ9i6JyksCiAgICAoMHgxRUU5QywgJ1gnKSwKICAgICgweDFFRUExLCAnTScsICfYqCcpLAogICAgKDB4MUVFQTIsICdNJywgJ9isJyksCiAgICAoMHgxRUVBMywgJ00nLCAn2K8nKSwKICAgICgweDFFRUE0LCAnWCcpLAogICAgKDB4MUVFQTUsICdNJywgJ9mIJyksCiAgICBdCgpkZWYgX3NlZ183MygpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweDFFRUE2LCAnTScsICfYsicpLAogICAgKDB4MUVFQTcsICdNJywgJ9itJyksCiAgICAoMHgxRUVBOCwgJ00nLCAn2LcnKSwKICAgICgweDFFRUE5LCAnTScsICfZiicpLAogICAgKDB4MUVFQUEsICdYJyksCiAgICAoMHgxRUVBQiwgJ00nLCAn2YQnKSwKICAgICgweDFFRUFDLCAnTScsICfZhScpLAogICAgKDB4MUVFQUQsICdNJywgJ9mGJyksCiAgICAoMHgxRUVBRSwgJ00nLCAn2LMnKSwKICAgICgweDFFRUFGLCAnTScsICfYuScpLAogICAgKDB4MUVFQjAsICdNJywgJ9mBJyksCiAgICAoMHgxRUVCMSwgJ00nLCAn2LUnKSwKICAgICgweDFFRUIyLCAnTScsICfZgicpLAogICAgKDB4MUVFQjMsICdNJywgJ9ixJyksCiAgICAoMHgxRUVCNCwgJ00nLCAn2LQnKSwKICAgICgweDFFRUI1LCAnTScsICfYqicpLAogICAgKDB4MUVFQjYsICdNJywgJ9irJyksCiAgICAoMHgxRUVCNywgJ00nLCAn2K4nKSwKICAgICgweDFFRUI4LCAnTScsICfYsCcpLAogICAgKDB4MUVFQjksICdNJywgJ9i2JyksCiAgICAoMHgxRUVCQSwgJ00nLCAn2LgnKSwKICAgICgweDFFRUJCLCAnTScsICfYuicpLAogICAgKDB4MUVFQkMsICdYJyksCiAgICAoMHgxRUVGMCwgJ1YnKSwKICAgICgweDFFRUYyLCAnWCcpLAogICAgKDB4MUYwMDAsICdWJyksCiAgICAoMHgxRjAyQywgJ1gnKSwKICAgICgweDFGMDMwLCAnVicpLAogICAgKDB4MUYwOTQsICdYJyksCiAgICAoMHgxRjBBMCwgJ1YnKSwKICAgICgweDFGMEFGLCAnWCcpLAogICAgKDB4MUYwQjEsICdWJyksCiAgICAoMHgxRjBDMCwgJ1gnKSwKICAgICgweDFGMEMxLCAnVicpLAogICAgKDB4MUYwRDAsICdYJyksCiAgICAoMHgxRjBEMSwgJ1YnKSwKICAgICgweDFGMEY2LCAnWCcpLAogICAgKDB4MUYxMDEsICczJywgJzAsJyksCiAgICAoMHgxRjEwMiwgJzMnLCAnMSwnKSwKICAgICgweDFGMTAzLCAnMycsICcyLCcpLAogICAgKDB4MUYxMDQsICczJywgJzMsJyksCiAgICAoMHgxRjEwNSwgJzMnLCAnNCwnKSwKICAgICgweDFGMTA2LCAnMycsICc1LCcpLAogICAgKDB4MUYxMDcsICczJywgJzYsJyksCiAgICAoMHgxRjEwOCwgJzMnLCAnNywnKSwKICAgICgweDFGMTA5LCAnMycsICc4LCcpLAogICAgKDB4MUYxMEEsICczJywgJzksJyksCiAgICAoMHgxRjEwQiwgJ1YnKSwKICAgICgweDFGMTEwLCAnMycsICcoYSknKSwKICAgICgweDFGMTExLCAnMycsICcoYiknKSwKICAgICgweDFGMTEyLCAnMycsICcoYyknKSwKICAgICgweDFGMTEzLCAnMycsICcoZCknKSwKICAgICgweDFGMTE0LCAnMycsICcoZSknKSwKICAgICgweDFGMTE1LCAnMycsICcoZiknKSwKICAgICgweDFGMTE2LCAnMycsICcoZyknKSwKICAgICgweDFGMTE3LCAnMycsICcoaCknKSwKICAgICgweDFGMTE4LCAnMycsICcoaSknKSwKICAgICgweDFGMTE5LCAnMycsICcoaiknKSwKICAgICgweDFGMTFBLCAnMycsICcoayknKSwKICAgICgweDFGMTFCLCAnMycsICcobCknKSwKICAgICgweDFGMTFDLCAnMycsICcobSknKSwKICAgICgweDFGMTFELCAnMycsICcobiknKSwKICAgICgweDFGMTFFLCAnMycsICcobyknKSwKICAgICgweDFGMTFGLCAnMycsICcocCknKSwKICAgICgweDFGMTIwLCAnMycsICcocSknKSwKICAgICgweDFGMTIxLCAnMycsICcociknKSwKICAgICgweDFGMTIyLCAnMycsICcocyknKSwKICAgICgweDFGMTIzLCAnMycsICcodCknKSwKICAgICgweDFGMTI0LCAnMycsICcodSknKSwKICAgICgweDFGMTI1LCAnMycsICcodiknKSwKICAgICgweDFGMTI2LCAnMycsICcodyknKSwKICAgICgweDFGMTI3LCAnMycsICcoeCknKSwKICAgICgweDFGMTI4LCAnMycsICcoeSknKSwKICAgICgweDFGMTI5LCAnMycsICcoeiknKSwKICAgICgweDFGMTJBLCAnTScsICfjgJRz44CVJyksCiAgICAoMHgxRjEyQiwgJ00nLCAnYycpLAogICAgKDB4MUYxMkMsICdNJywgJ3InKSwKICAgICgweDFGMTJELCAnTScsICdjZCcpLAogICAgKDB4MUYxMkUsICdNJywgJ3d6JyksCiAgICAoMHgxRjEyRiwgJ1YnKSwKICAgICgweDFGMTMwLCAnTScsICdhJyksCiAgICAoMHgxRjEzMSwgJ00nLCAnYicpLAogICAgKDB4MUYxMzIsICdNJywgJ2MnKSwKICAgICgweDFGMTMzLCAnTScsICdkJyksCiAgICAoMHgxRjEzNCwgJ00nLCAnZScpLAogICAgKDB4MUYxMzUsICdNJywgJ2YnKSwKICAgICgweDFGMTM2LCAnTScsICdnJyksCiAgICAoMHgxRjEzNywgJ00nLCAnaCcpLAogICAgKDB4MUYxMzgsICdNJywgJ2knKSwKICAgICgweDFGMTM5LCAnTScsICdqJyksCiAgICAoMHgxRjEzQSwgJ00nLCAnaycpLAogICAgKDB4MUYxM0IsICdNJywgJ2wnKSwKICAgICgweDFGMTNDLCAnTScsICdtJyksCiAgICAoMHgxRjEzRCwgJ00nLCAnbicpLAogICAgKDB4MUYxM0UsICdNJywgJ28nKSwKICAgICgweDFGMTNGLCAnTScsICdwJyksCiAgICAoMHgxRjE0MCwgJ00nLCAncScpLAogICAgKDB4MUYxNDEsICdNJywgJ3InKSwKICAgICgweDFGMTQyLCAnTScsICdzJyksCiAgICAoMHgxRjE0MywgJ00nLCAndCcpLAogICAgXQoKZGVmIF9zZWdfNzQoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXToKICAgIHJldHVybiBbCiAgICAoMHgxRjE0NCwgJ00nLCAndScpLAogICAgKDB4MUYxNDUsICdNJywgJ3YnKSwKICAgICgweDFGMTQ2LCAnTScsICd3JyksCiAgICAoMHgxRjE0NywgJ00nLCAneCcpLAogICAgKDB4MUYxNDgsICdNJywgJ3knKSwKICAgICgweDFGMTQ5LCAnTScsICd6JyksCiAgICAoMHgxRjE0QSwgJ00nLCAnaHYnKSwKICAgICgweDFGMTRCLCAnTScsICdtdicpLAogICAgKDB4MUYxNEMsICdNJywgJ3NkJyksCiAgICAoMHgxRjE0RCwgJ00nLCAnc3MnKSwKICAgICgweDFGMTRFLCAnTScsICdwcHYnKSwKICAgICgweDFGMTRGLCAnTScsICd3YycpLAogICAgKDB4MUYxNTAsICdWJyksCiAgICAoMHgxRjE2QSwgJ00nLCAnbWMnKSwKICAgICgweDFGMTZCLCAnTScsICdtZCcpLAogICAgKDB4MUYxNkMsICdNJywgJ21yJyksCiAgICAoMHgxRjE2RCwgJ1YnKSwKICAgICgweDFGMTkwLCAnTScsICdkaicpLAogICAgKDB4MUYxOTEsICdWJyksCiAgICAoMHgxRjFBRSwgJ1gnKSwKICAgICgweDFGMUU2LCAnVicpLAogICAgKDB4MUYyMDAsICdNJywgJ+OBu+OBiycpLAogICAgKDB4MUYyMDEsICdNJywgJ+OCs+OCsycpLAogICAgKDB4MUYyMDIsICdNJywgJ+OCtScpLAogICAgKDB4MUYyMDMsICdYJyksCiAgICAoMHgxRjIxMCwgJ00nLCAn5omLJyksCiAgICAoMHgxRjIxMSwgJ00nLCAn5a2XJyksCiAgICAoMHgxRjIxMiwgJ00nLCAn5Y+MJyksCiAgICAoMHgxRjIxMywgJ00nLCAn44OHJyksCiAgICAoMHgxRjIxNCwgJ00nLCAn5LqMJyksCiAgICAoMHgxRjIxNSwgJ00nLCAn5aSaJyksCiAgICAoMHgxRjIxNiwgJ00nLCAn6KejJyksCiAgICAoMHgxRjIxNywgJ00nLCAn5aSpJyksCiAgICAoMHgxRjIxOCwgJ00nLCAn5LqkJyksCiAgICAoMHgxRjIxOSwgJ00nLCAn5pigJyksCiAgICAoMHgxRjIxQSwgJ00nLCAn54ShJyksCiAgICAoMHgxRjIxQiwgJ00nLCAn5paZJyksCiAgICAoMHgxRjIxQywgJ00nLCAn5YmNJyksCiAgICAoMHgxRjIxRCwgJ00nLCAn5b6MJyksCiAgICAoMHgxRjIxRSwgJ00nLCAn5YaNJyksCiAgICAoMHgxRjIxRiwgJ00nLCAn5pawJyksCiAgICAoMHgxRjIyMCwgJ00nLCAn5YidJyksCiAgICAoMHgxRjIyMSwgJ00nLCAn57WCJyksCiAgICAoMHgxRjIyMiwgJ00nLCAn55SfJyksCiAgICAoMHgxRjIyMywgJ00nLCAn6LKpJyksCiAgICAoMHgxRjIyNCwgJ00nLCAn5aOwJyksCiAgICAoMHgxRjIyNSwgJ00nLCAn5ZC5JyksCiAgICAoMHgxRjIyNiwgJ00nLCAn5ryUJyksCiAgICAoMHgxRjIyNywgJ00nLCAn5oqVJyksCiAgICAoMHgxRjIyOCwgJ00nLCAn5o2VJyksCiAgICAoMHgxRjIyOSwgJ00nLCAn5LiAJyksCiAgICAoMHgxRjIyQSwgJ00nLCAn5LiJJyksCiAgICAoMHgxRjIyQiwgJ00nLCAn6YGKJyksCiAgICAoMHgxRjIyQywgJ00nLCAn5bemJyksCiAgICAoMHgxRjIyRCwgJ00nLCAn5LitJyksCiAgICAoMHgxRjIyRSwgJ00nLCAn5Y+zJyksCiAgICAoMHgxRjIyRiwgJ00nLCAn5oyHJyksCiAgICAoMHgxRjIzMCwgJ00nLCAn6LWwJyksCiAgICAoMHgxRjIzMSwgJ00nLCAn5omTJyksCiAgICAoMHgxRjIzMiwgJ00nLCAn56aBJyksCiAgICAoMHgxRjIzMywgJ00nLCAn56m6JyksCiAgICAoMHgxRjIzNCwgJ00nLCAn5ZCIJyksCiAgICAoMHgxRjIzNSwgJ00nLCAn5rqAJyksCiAgICAoMHgxRjIzNiwgJ00nLCAn5pyJJyksCiAgICAoMHgxRjIzNywgJ00nLCAn5pyIJyksCiAgICAoMHgxRjIzOCwgJ00nLCAn55SzJyksCiAgICAoMHgxRjIzOSwgJ00nLCAn5YmyJyksCiAgICAoMHgxRjIzQSwgJ00nLCAn5Za2JyksCiAgICAoMHgxRjIzQiwgJ00nLCAn6YWNJyksCiAgICAoMHgxRjIzQywgJ1gnKSwKICAgICgweDFGMjQwLCAnTScsICfjgJTmnKzjgJUnKSwKICAgICgweDFGMjQxLCAnTScsICfjgJTkuInjgJUnKSwKICAgICgweDFGMjQyLCAnTScsICfjgJTkuozjgJUnKSwKICAgICgweDFGMjQzLCAnTScsICfjgJTlronjgJUnKSwKICAgICgweDFGMjQ0LCAnTScsICfjgJTngrnjgJUnKSwKICAgICgweDFGMjQ1LCAnTScsICfjgJTmiZPjgJUnKSwKICAgICgweDFGMjQ2LCAnTScsICfjgJTnm5fjgJUnKSwKICAgICgweDFGMjQ3LCAnTScsICfjgJTli53jgJUnKSwKICAgICgweDFGMjQ4LCAnTScsICfjgJTmlZfjgJUnKSwKICAgICgweDFGMjQ5LCAnWCcpLAogICAgKDB4MUYyNTAsICdNJywgJ+W+lycpLAogICAgKDB4MUYyNTEsICdNJywgJ+WPrycpLAogICAgKDB4MUYyNTIsICdYJyksCiAgICAoMHgxRjI2MCwgJ1YnKSwKICAgICgweDFGMjY2LCAnWCcpLAogICAgKDB4MUYzMDAsICdWJyksCiAgICAoMHgxRjZEOCwgJ1gnKSwKICAgICgweDFGNkRELCAnVicpLAogICAgKDB4MUY2RUQsICdYJyksCiAgICAoMHgxRjZGMCwgJ1YnKSwKICAgICgweDFGNkZELCAnWCcpLAogICAgKDB4MUY3MDAsICdWJyksCiAgICAoMHgxRjc3NCwgJ1gnKSwKICAgICgweDFGNzgwLCAnVicpLAogICAgKDB4MUY3RDksICdYJyksCiAgICAoMHgxRjdFMCwgJ1YnKSwKICAgICgweDFGN0VDLCAnWCcpLAogICAgKDB4MUY3RjAsICdWJyksCiAgICAoMHgxRjdGMSwgJ1gnKSwKICAgICgweDFGODAwLCAnVicpLAogICAgXQoKZGVmIF9zZWdfNzUoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXToKICAgIHJldHVybiBbCiAgICAoMHgxRjgwQywgJ1gnKSwKICAgICgweDFGODEwLCAnVicpLAogICAgKDB4MUY4NDgsICdYJyksCiAgICAoMHgxRjg1MCwgJ1YnKSwKICAgICgweDFGODVBLCAnWCcpLAogICAgKDB4MUY4NjAsICdWJyksCiAgICAoMHgxRjg4OCwgJ1gnKSwKICAgICgweDFGODkwLCAnVicpLAogICAgKDB4MUY4QUUsICdYJyksCiAgICAoMHgxRjhCMCwgJ1YnKSwKICAgICgweDFGOEIyLCAnWCcpLAogICAgKDB4MUY5MDAsICdWJyksCiAgICAoMHgxRkE1NCwgJ1gnKSwKICAgICgweDFGQTYwLCAnVicpLAogICAgKDB4MUZBNkUsICdYJyksCiAgICAoMHgxRkE3MCwgJ1YnKSwKICAgICgweDFGQTc1LCAnWCcpLAogICAgKDB4MUZBNzgsICdWJyksCiAgICAoMHgxRkE3RCwgJ1gnKSwKICAgICgweDFGQTgwLCAnVicpLAogICAgKDB4MUZBODcsICdYJyksCiAgICAoMHgxRkE5MCwgJ1YnKSwKICAgICgweDFGQUFELCAnWCcpLAogICAgKDB4MUZBQjAsICdWJyksCiAgICAoMHgxRkFCQiwgJ1gnKSwKICAgICgweDFGQUMwLCAnVicpLAogICAgKDB4MUZBQzYsICdYJyksCiAgICAoMHgxRkFEMCwgJ1YnKSwKICAgICgweDFGQURBLCAnWCcpLAogICAgKDB4MUZBRTAsICdWJyksCiAgICAoMHgxRkFFOCwgJ1gnKSwKICAgICgweDFGQUYwLCAnVicpLAogICAgKDB4MUZBRjcsICdYJyksCiAgICAoMHgxRkIwMCwgJ1YnKSwKICAgICgweDFGQjkzLCAnWCcpLAogICAgKDB4MUZCOTQsICdWJyksCiAgICAoMHgxRkJDQiwgJ1gnKSwKICAgICgweDFGQkYwLCAnTScsICcwJyksCiAgICAoMHgxRkJGMSwgJ00nLCAnMScpLAogICAgKDB4MUZCRjIsICdNJywgJzInKSwKICAgICgweDFGQkYzLCAnTScsICczJyksCiAgICAoMHgxRkJGNCwgJ00nLCAnNCcpLAogICAgKDB4MUZCRjUsICdNJywgJzUnKSwKICAgICgweDFGQkY2LCAnTScsICc2JyksCiAgICAoMHgxRkJGNywgJ00nLCAnNycpLAogICAgKDB4MUZCRjgsICdNJywgJzgnKSwKICAgICgweDFGQkY5LCAnTScsICc5JyksCiAgICAoMHgxRkJGQSwgJ1gnKSwKICAgICgweDIwMDAwLCAnVicpLAogICAgKDB4MkE2RTAsICdYJyksCiAgICAoMHgyQTcwMCwgJ1YnKSwKICAgICgweDJCNzM5LCAnWCcpLAogICAgKDB4MkI3NDAsICdWJyksCiAgICAoMHgyQjgxRSwgJ1gnKSwKICAgICgweDJCODIwLCAnVicpLAogICAgKDB4MkNFQTIsICdYJyksCiAgICAoMHgyQ0VCMCwgJ1YnKSwKICAgICgweDJFQkUxLCAnWCcpLAogICAgKDB4MkY4MDAsICdNJywgJ+S4vScpLAogICAgKDB4MkY4MDEsICdNJywgJ+S4uCcpLAogICAgKDB4MkY4MDIsICdNJywgJ+S5gScpLAogICAgKDB4MkY4MDMsICdNJywgJ/CghKInKSwKICAgICgweDJGODA0LCAnTScsICfkvaAnKSwKICAgICgweDJGODA1LCAnTScsICfkvq4nKSwKICAgICgweDJGODA2LCAnTScsICfkvrsnKSwKICAgICgweDJGODA3LCAnTScsICflgIInKSwKICAgICgweDJGODA4LCAnTScsICflgbonKSwKICAgICgweDJGODA5LCAnTScsICflgpknKSwKICAgICgweDJGODBBLCAnTScsICflg6cnKSwKICAgICgweDJGODBCLCAnTScsICflg48nKSwKICAgICgweDJGODBDLCAnTScsICfjkp4nKSwKICAgICgweDJGODBELCAnTScsICfwoJi6JyksCiAgICAoMHgyRjgwRSwgJ00nLCAn5YWNJyksCiAgICAoMHgyRjgwRiwgJ00nLCAn5YWUJyksCiAgICAoMHgyRjgxMCwgJ00nLCAn5YWkJyksCiAgICAoMHgyRjgxMSwgJ00nLCAn5YW3JyksCiAgICAoMHgyRjgxMiwgJ00nLCAn8KCUnCcpLAogICAgKDB4MkY4MTMsICdNJywgJ+OSuScpLAogICAgKDB4MkY4MTQsICdNJywgJ+WFpycpLAogICAgKDB4MkY4MTUsICdNJywgJ+WGjScpLAogICAgKDB4MkY4MTYsICdNJywgJ/CglYsnKSwKICAgICgweDJGODE3LCAnTScsICflhpcnKSwKICAgICgweDJGODE4LCAnTScsICflhqQnKSwKICAgICgweDJGODE5LCAnTScsICfku4wnKSwKICAgICgweDJGODFBLCAnTScsICflhqwnKSwKICAgICgweDJGODFCLCAnTScsICflhrUnKSwKICAgICgweDJGODFDLCAnTScsICfwqYefJyksCiAgICAoMHgyRjgxRCwgJ00nLCAn5Ye1JyksCiAgICAoMHgyRjgxRSwgJ00nLCAn5YiDJyksCiAgICAoMHgyRjgxRiwgJ00nLCAn45OfJyksCiAgICAoMHgyRjgyMCwgJ00nLCAn5Yi7JyksCiAgICAoMHgyRjgyMSwgJ00nLCAn5YmGJyksCiAgICAoMHgyRjgyMiwgJ00nLCAn5YmyJyksCiAgICAoMHgyRjgyMywgJ00nLCAn5Ym3JyksCiAgICAoMHgyRjgyNCwgJ00nLCAn45SVJyksCiAgICAoMHgyRjgyNSwgJ00nLCAn5YuHJyksCiAgICAoMHgyRjgyNiwgJ00nLCAn5YuJJyksCiAgICAoMHgyRjgyNywgJ00nLCAn5YukJyksCiAgICAoMHgyRjgyOCwgJ00nLCAn5Yu6JyksCiAgICAoMHgyRjgyOSwgJ00nLCAn5YyFJyksCiAgICBdCgpkZWYgX3NlZ183NigpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweDJGODJBLCAnTScsICfljIYnKSwKICAgICgweDJGODJCLCAnTScsICfljJcnKSwKICAgICgweDJGODJDLCAnTScsICfljYknKSwKICAgICgweDJGODJELCAnTScsICfljZEnKSwKICAgICgweDJGODJFLCAnTScsICfljZonKSwKICAgICgweDJGODJGLCAnTScsICfljbMnKSwKICAgICgweDJGODMwLCAnTScsICfljb0nKSwKICAgICgweDJGODMxLCAnTScsICfljb8nKSwKICAgICgweDJGODM0LCAnTScsICfwoKisJyksCiAgICAoMHgyRjgzNSwgJ00nLCAn54GwJyksCiAgICAoMHgyRjgzNiwgJ00nLCAn5Y+KJyksCiAgICAoMHgyRjgzNywgJ00nLCAn5Y+fJyksCiAgICAoMHgyRjgzOCwgJ00nLCAn8KCtoycpLAogICAgKDB4MkY4MzksICdNJywgJ+WPqycpLAogICAgKDB4MkY4M0EsICdNJywgJ+WPsScpLAogICAgKDB4MkY4M0IsICdNJywgJ+WQhicpLAogICAgKDB4MkY4M0MsICdNJywgJ+WSnicpLAogICAgKDB4MkY4M0QsICdNJywgJ+WQuCcpLAogICAgKDB4MkY4M0UsICdNJywgJ+WRiCcpLAogICAgKDB4MkY4M0YsICdNJywgJ+WRqCcpLAogICAgKDB4MkY4NDAsICdNJywgJ+WSoicpLAogICAgKDB4MkY4NDEsICdNJywgJ+WTticpLAogICAgKDB4MkY4NDIsICdNJywgJ+WUkCcpLAogICAgKDB4MkY4NDMsICdNJywgJ+WVkycpLAogICAgKDB4MkY4NDQsICdNJywgJ+WVoycpLAogICAgKDB4MkY4NDUsICdNJywgJ+WWhCcpLAogICAgKDB4MkY4NDcsICdNJywgJ+WWmScpLAogICAgKDB4MkY4NDgsICdNJywgJ+WWqycpLAogICAgKDB4MkY4NDksICdNJywgJ+WWsycpLAogICAgKDB4MkY4NEEsICdNJywgJ+WXgicpLAogICAgKDB4MkY4NEIsICdNJywgJ+WclicpLAogICAgKDB4MkY4NEMsICdNJywgJ+WYhicpLAogICAgKDB4MkY4NEQsICdNJywgJ+WclycpLAogICAgKDB4MkY4NEUsICdNJywgJ+WZkScpLAogICAgKDB4MkY4NEYsICdNJywgJ+WZtCcpLAogICAgKDB4MkY4NTAsICdNJywgJ+WIhycpLAogICAgKDB4MkY4NTEsICdNJywgJ+WjricpLAogICAgKDB4MkY4NTIsICdNJywgJ+WfjicpLAogICAgKDB4MkY4NTMsICdNJywgJ+WftCcpLAogICAgKDB4MkY4NTQsICdNJywgJ+WgjScpLAogICAgKDB4MkY4NTUsICdNJywgJ+WeiycpLAogICAgKDB4MkY4NTYsICdNJywgJ+WgsicpLAogICAgKDB4MkY4NTcsICdNJywgJ+WgsScpLAogICAgKDB4MkY4NTgsICdNJywgJ+WirCcpLAogICAgKDB4MkY4NTksICdNJywgJ/Chk6QnKSwKICAgICgweDJGODVBLCAnTScsICflo7InKSwKICAgICgweDJGODVCLCAnTScsICflo7cnKSwKICAgICgweDJGODVDLCAnTScsICflpIYnKSwKICAgICgweDJGODVELCAnTScsICflpJonKSwKICAgICgweDJGODVFLCAnTScsICflpKInKSwKICAgICgweDJGODVGLCAnTScsICflpaInKSwKICAgICgweDJGODYwLCAnTScsICfwoZqoJyksCiAgICAoMHgyRjg2MSwgJ00nLCAn8KGbqicpLAogICAgKDB4MkY4NjIsICdNJywgJ+WnrCcpLAogICAgKDB4MkY4NjMsICdNJywgJ+WomycpLAogICAgKDB4MkY4NjQsICdNJywgJ+WopycpLAogICAgKDB4MkY4NjUsICdNJywgJ+WnmCcpLAogICAgKDB4MkY4NjYsICdNJywgJ+WppicpLAogICAgKDB4MkY4NjcsICdNJywgJ+ObricpLAogICAgKDB4MkY4NjgsICdYJyksCiAgICAoMHgyRjg2OSwgJ00nLCAn5ayIJyksCiAgICAoMHgyRjg2QSwgJ00nLCAn5ay+JyksCiAgICAoMHgyRjg2QywgJ00nLCAn8KGniCcpLAogICAgKDB4MkY4NkQsICdNJywgJ+WvgycpLAogICAgKDB4MkY4NkUsICdNJywgJ+WvmCcpLAogICAgKDB4MkY4NkYsICdNJywgJ+WvpycpLAogICAgKDB4MkY4NzAsICdNJywgJ+WvsycpLAogICAgKDB4MkY4NzEsICdNJywgJ/ChrJgnKSwKICAgICgweDJGODcyLCAnTScsICflr78nKSwKICAgICgweDJGODczLCAnTScsICflsIYnKSwKICAgICgweDJGODc0LCAnWCcpLAogICAgKDB4MkY4NzUsICdNJywgJ+WwoicpLAogICAgKDB4MkY4NzYsICdNJywgJ+OegScpLAogICAgKDB4MkY4NzcsICdNJywgJ+WxoCcpLAogICAgKDB4MkY4NzgsICdNJywgJ+WxricpLAogICAgKDB4MkY4NzksICdNJywgJ+WzgCcpLAogICAgKDB4MkY4N0EsICdNJywgJ+WyjScpLAogICAgKDB4MkY4N0IsICdNJywgJ/Cht6QnKSwKICAgICgweDJGODdDLCAnTScsICfltYMnKSwKICAgICgweDJGODdELCAnTScsICfwobemJyksCiAgICAoMHgyRjg3RSwgJ00nLCAn5bWuJyksCiAgICAoMHgyRjg3RiwgJ00nLCAn5bWrJyksCiAgICAoMHgyRjg4MCwgJ00nLCAn5bW8JyksCiAgICAoMHgyRjg4MSwgJ00nLCAn5behJyksCiAgICAoMHgyRjg4MiwgJ00nLCAn5beiJyksCiAgICAoMHgyRjg4MywgJ00nLCAn46CvJyksCiAgICAoMHgyRjg4NCwgJ00nLCAn5be9JyksCiAgICAoMHgyRjg4NSwgJ00nLCAn5bioJyksCiAgICAoMHgyRjg4NiwgJ00nLCAn5bi9JyksCiAgICAoMHgyRjg4NywgJ00nLCAn5bmpJyksCiAgICAoMHgyRjg4OCwgJ00nLCAn46GiJyksCiAgICAoMHgyRjg4OSwgJ00nLCAn8KKGgycpLAogICAgKDB4MkY4OEEsICdNJywgJ+OhvCcpLAogICAgKDB4MkY4OEIsICdNJywgJ+W6sCcpLAogICAgKDB4MkY4OEMsICdNJywgJ+W6sycpLAogICAgKDB4MkY4OEQsICdNJywgJ+W6ticpLAogICAgKDB4MkY4OEUsICdNJywgJ+W7iicpLAogICAgKDB4MkY4OEYsICdNJywgJ/CqjpInKSwKICAgICgweDJGODkwLCAnTScsICflu74nKSwKICAgICgweDJGODkxLCAnTScsICfwooyxJyksCiAgICBdCgpkZWYgX3NlZ183NygpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweDJGODkzLCAnTScsICfoiIEnKSwKICAgICgweDJGODk0LCAnTScsICflvKInKSwKICAgICgweDJGODk2LCAnTScsICfjo4cnKSwKICAgICgweDJGODk3LCAnTScsICfwo4q4JyksCiAgICAoMHgyRjg5OCwgJ00nLCAn8KaHmicpLAogICAgKDB4MkY4OTksICdNJywgJ+W9oicpLAogICAgKDB4MkY4OUEsICdNJywgJ+W9qycpLAogICAgKDB4MkY4OUIsICdNJywgJ+OjoycpLAogICAgKDB4MkY4OUMsICdNJywgJ+W+micpLAogICAgKDB4MkY4OUQsICdNJywgJ+W/jScpLAogICAgKDB4MkY4OUUsICdNJywgJ+W/lycpLAogICAgKDB4MkY4OUYsICdNJywgJ+W/uScpLAogICAgKDB4MkY4QTAsICdNJywgJ+aCgScpLAogICAgKDB4MkY4QTEsICdNJywgJ+OkuicpLAogICAgKDB4MkY4QTIsICdNJywgJ+OknCcpLAogICAgKDB4MkY4QTMsICdNJywgJ+aClCcpLAogICAgKDB4MkY4QTQsICdNJywgJ/Cim5QnKSwKICAgICgweDJGOEE1LCAnTScsICfmg4cnKSwKICAgICgweDJGOEE2LCAnTScsICfmhYgnKSwKICAgICgweDJGOEE3LCAnTScsICfmhYwnKSwKICAgICgweDJGOEE4LCAnTScsICfmhY4nKSwKICAgICgweDJGOEE5LCAnTScsICfmhYwnKSwKICAgICgweDJGOEFBLCAnTScsICfmhbonKSwKICAgICgweDJGOEFCLCAnTScsICfmho4nKSwKICAgICgweDJGOEFDLCAnTScsICfmhrInKSwKICAgICgweDJGOEFELCAnTScsICfmhqQnKSwKICAgICgweDJGOEFFLCAnTScsICfmhq8nKSwKICAgICgweDJGOEFGLCAnTScsICfmh54nKSwKICAgICgweDJGOEIwLCAnTScsICfmh7InKSwKICAgICgweDJGOEIxLCAnTScsICfmh7YnKSwKICAgICgweDJGOEIyLCAnTScsICfmiJAnKSwKICAgICgweDJGOEIzLCAnTScsICfmiJsnKSwKICAgICgweDJGOEI0LCAnTScsICfmiZ0nKSwKICAgICgweDJGOEI1LCAnTScsICfmirEnKSwKICAgICgweDJGOEI2LCAnTScsICfmi5QnKSwKICAgICgweDJGOEI3LCAnTScsICfmjZAnKSwKICAgICgweDJGOEI4LCAnTScsICfwoqyMJyksCiAgICAoMHgyRjhCOSwgJ00nLCAn5oy9JyksCiAgICAoMHgyRjhCQSwgJ00nLCAn5ou8JyksCiAgICAoMHgyRjhCQiwgJ00nLCAn5o2oJyksCiAgICAoMHgyRjhCQywgJ00nLCAn5o6DJyksCiAgICAoMHgyRjhCRCwgJ00nLCAn5o+kJyksCiAgICAoMHgyRjhCRSwgJ00nLCAn8KKvsScpLAogICAgKDB4MkY4QkYsICdNJywgJ+aQoicpLAogICAgKDB4MkY4QzAsICdNJywgJ+aPhScpLAogICAgKDB4MkY4QzEsICdNJywgJ+aOqScpLAogICAgKDB4MkY4QzIsICdNJywgJ+OoricpLAogICAgKDB4MkY4QzMsICdNJywgJ+aRqScpLAogICAgKDB4MkY4QzQsICdNJywgJ+aRvicpLAogICAgKDB4MkY4QzUsICdNJywgJ+aSnScpLAogICAgKDB4MkY4QzYsICdNJywgJ+aRtycpLAogICAgKDB4MkY4QzcsICdNJywgJ+OprCcpLAogICAgKDB4MkY4QzgsICdNJywgJ+aVjycpLAogICAgKDB4MkY4QzksICdNJywgJ+aVrCcpLAogICAgKDB4MkY4Q0EsICdNJywgJ/CjgIonKSwKICAgICgweDJGOENCLCAnTScsICfml6MnKSwKICAgICgweDJGOENDLCAnTScsICfmm7gnKSwKICAgICgweDJGOENELCAnTScsICfmmYknKSwKICAgICgweDJGOENFLCAnTScsICfjrJknKSwKICAgICgweDJGOENGLCAnTScsICfmmpEnKSwKICAgICgweDJGOEQwLCAnTScsICfjrIgnKSwKICAgICgweDJGOEQxLCAnTScsICfjq6QnKSwKICAgICgweDJGOEQyLCAnTScsICflhpInKSwKICAgICgweDJGOEQzLCAnTScsICflhpUnKSwKICAgICgweDJGOEQ0LCAnTScsICfmnIAnKSwKICAgICgweDJGOEQ1LCAnTScsICfmmpwnKSwKICAgICgweDJGOEQ2LCAnTScsICfogq0nKSwKICAgICgweDJGOEQ3LCAnTScsICfkj5knKSwKICAgICgweDJGOEQ4LCAnTScsICfmnJcnKSwKICAgICgweDJGOEQ5LCAnTScsICfmnJsnKSwKICAgICgweDJGOERBLCAnTScsICfmnKEnKSwKICAgICgweDJGOERCLCAnTScsICfmnZ4nKSwKICAgICgweDJGOERDLCAnTScsICfmnZMnKSwKICAgICgweDJGOERELCAnTScsICfwo4+DJyksCiAgICAoMHgyRjhERSwgJ00nLCAn462JJyksCiAgICAoMHgyRjhERiwgJ00nLCAn5p+6JyksCiAgICAoMHgyRjhFMCwgJ00nLCAn5p6FJyksCiAgICAoMHgyRjhFMSwgJ00nLCAn5qGSJyksCiAgICAoMHgyRjhFMiwgJ00nLCAn5qKFJyksCiAgICAoMHgyRjhFMywgJ00nLCAn8KORrScpLAogICAgKDB4MkY4RTQsICdNJywgJ+aijicpLAogICAgKDB4MkY4RTUsICdNJywgJ+agnycpLAogICAgKDB4MkY4RTYsICdNJywgJ+aklCcpLAogICAgKDB4MkY4RTcsICdNJywgJ+OunScpLAogICAgKDB4MkY4RTgsICdNJywgJ+algicpLAogICAgKDB4MkY4RTksICdNJywgJ+amoycpLAogICAgKDB4MkY4RUEsICdNJywgJ+anqicpLAogICAgKDB4MkY4RUIsICdNJywgJ+aqqCcpLAogICAgKDB4MkY4RUMsICdNJywgJ/CjmqMnKSwKICAgICgweDJGOEVELCAnTScsICfmq5snKSwKICAgICgweDJGOEVFLCAnTScsICfjsJgnKSwKICAgICgweDJGOEVGLCAnTScsICfmrKEnKSwKICAgICgweDJGOEYwLCAnTScsICfwo6KnJyksCiAgICAoMHgyRjhGMSwgJ00nLCAn5q2UJyksCiAgICAoMHgyRjhGMiwgJ00nLCAn47GOJyksCiAgICAoMHgyRjhGMywgJ00nLCAn5q2yJyksCiAgICAoMHgyRjhGNCwgJ00nLCAn5q6fJyksCiAgICAoMHgyRjhGNSwgJ00nLCAn5q66JyksCiAgICAoMHgyRjhGNiwgJ00nLCAn5q67JyksCiAgICAoMHgyRjhGNywgJ00nLCAn8KOqjScpLAogICAgXQoKZGVmIF9zZWdfNzgoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXToKICAgIHJldHVybiBbCiAgICAoMHgyRjhGOCwgJ00nLCAn8KG0iycpLAogICAgKDB4MkY4RjksICdNJywgJ/Cjq7onKSwKICAgICgweDJGOEZBLCAnTScsICfmsY4nKSwKICAgICgweDJGOEZCLCAnTScsICfwo7K8JyksCiAgICAoMHgyRjhGQywgJ00nLCAn5rK/JyksCiAgICAoMHgyRjhGRCwgJ00nLCAn5rONJyksCiAgICAoMHgyRjhGRSwgJ00nLCAn5rGnJyksCiAgICAoMHgyRjhGRiwgJ00nLCAn5rSWJyksCiAgICAoMHgyRjkwMCwgJ00nLCAn5rS+JyksCiAgICAoMHgyRjkwMSwgJ00nLCAn5rW3JyksCiAgICAoMHgyRjkwMiwgJ00nLCAn5rWBJyksCiAgICAoMHgyRjkwMywgJ00nLCAn5rWpJyksCiAgICAoMHgyRjkwNCwgJ00nLCAn5rW4JyksCiAgICAoMHgyRjkwNSwgJ00nLCAn5raFJyksCiAgICAoMHgyRjkwNiwgJ00nLCAn8KO0nicpLAogICAgKDB4MkY5MDcsICdNJywgJ+a0tCcpLAogICAgKDB4MkY5MDgsICdNJywgJ+a4rycpLAogICAgKDB4MkY5MDksICdNJywgJ+a5ricpLAogICAgKDB4MkY5MEEsICdNJywgJ+O0sycpLAogICAgKDB4MkY5MEIsICdNJywgJ+a7iycpLAogICAgKDB4MkY5MEMsICdNJywgJ+a7hycpLAogICAgKDB4MkY5MEQsICdNJywgJ/Cju5EnKSwKICAgICgweDJGOTBFLCAnTScsICfmt7knKSwKICAgICgweDJGOTBGLCAnTScsICfmva4nKSwKICAgICgweDJGOTEwLCAnTScsICfwo72eJyksCiAgICAoMHgyRjkxMSwgJ00nLCAn8KO+jicpLAogICAgKDB4MkY5MTIsICdNJywgJ+a/hicpLAogICAgKDB4MkY5MTMsICdNJywgJ+eAuScpLAogICAgKDB4MkY5MTQsICdNJywgJ+eAnicpLAogICAgKDB4MkY5MTUsICdNJywgJ+eAmycpLAogICAgKDB4MkY5MTYsICdNJywgJ+O2licpLAogICAgKDB4MkY5MTcsICdNJywgJ+eBiicpLAogICAgKDB4MkY5MTgsICdNJywgJ+eBvScpLAogICAgKDB4MkY5MTksICdNJywgJ+eBtycpLAogICAgKDB4MkY5MUEsICdNJywgJ+eCrScpLAogICAgKDB4MkY5MUIsICdNJywgJ/CglKUnKSwKICAgICgweDJGOTFDLCAnTScsICfnhYUnKSwKICAgICgweDJGOTFELCAnTScsICfwpImjJyksCiAgICAoMHgyRjkxRSwgJ00nLCAn54acJyksCiAgICAoMHgyRjkxRiwgJ1gnKSwKICAgICgweDJGOTIwLCAnTScsICfniKgnKSwKICAgICgweDJGOTIxLCAnTScsICfniLUnKSwKICAgICgweDJGOTIyLCAnTScsICfniZAnKSwKICAgICgweDJGOTIzLCAnTScsICfwpJiIJyksCiAgICAoMHgyRjkyNCwgJ00nLCAn54qAJyksCiAgICAoMHgyRjkyNSwgJ00nLCAn54qVJyksCiAgICAoMHgyRjkyNiwgJ00nLCAn8KSctScpLAogICAgKDB4MkY5MjcsICdNJywgJ/CkoJQnKSwKICAgICgweDJGOTI4LCAnTScsICfnjbonKSwKICAgICgweDJGOTI5LCAnTScsICfnjosnKSwKICAgICgweDJGOTJBLCAnTScsICfjuqwnKSwKICAgICgweDJGOTJCLCAnTScsICfnjqUnKSwKICAgICgweDJGOTJDLCAnTScsICfjurgnKSwKICAgICgweDJGOTJFLCAnTScsICfnkYcnKSwKICAgICgweDJGOTJGLCAnTScsICfnkZwnKSwKICAgICgweDJGOTMwLCAnTScsICfnkbEnKSwKICAgICgweDJGOTMxLCAnTScsICfnkoUnKSwKICAgICgweDJGOTMyLCAnTScsICfnk4onKSwKICAgICgweDJGOTMzLCAnTScsICfjvJsnKSwKICAgICgweDJGOTM0LCAnTScsICfnlKQnKSwKICAgICgweDJGOTM1LCAnTScsICfwpLC2JyksCiAgICAoMHgyRjkzNiwgJ00nLCAn55S+JyksCiAgICAoMHgyRjkzNywgJ00nLCAn8KSykicpLAogICAgKDB4MkY5MzgsICdNJywgJ+eVsCcpLAogICAgKDB4MkY5MzksICdNJywgJ/Cihp8nKSwKICAgICgweDJGOTNBLCAnTScsICfnmJAnKSwKICAgICgweDJGOTNCLCAnTScsICfwpL6hJyksCiAgICAoMHgyRjkzQywgJ00nLCAn8KS+uCcpLAogICAgKDB4MkY5M0QsICdNJywgJ/ClgYQnKSwKICAgICgweDJGOTNFLCAnTScsICfjv7wnKSwKICAgICgweDJGOTNGLCAnTScsICfkgIgnKSwKICAgICgweDJGOTQwLCAnTScsICfnm7QnKSwKICAgICgweDJGOTQxLCAnTScsICfwpYOzJyksCiAgICAoMHgyRjk0MiwgJ00nLCAn8KWDsicpLAogICAgKDB4MkY5NDMsICdNJywgJ/ClhJknKSwKICAgICgweDJGOTQ0LCAnTScsICfwpYSzJyksCiAgICAoMHgyRjk0NSwgJ00nLCAn55yeJyksCiAgICAoMHgyRjk0NiwgJ00nLCAn55yfJyksCiAgICAoMHgyRjk0OCwgJ00nLCAn552KJyksCiAgICAoMHgyRjk0OSwgJ00nLCAn5IC5JyksCiAgICAoMHgyRjk0QSwgJ00nLCAn556LJyksCiAgICAoMHgyRjk0QiwgJ00nLCAn5IGGJyksCiAgICAoMHgyRjk0QywgJ00nLCAn5IKWJyksCiAgICAoMHgyRjk0RCwgJ00nLCAn8KWQnScpLAogICAgKDB4MkY5NEUsICdNJywgJ+ehjicpLAogICAgKDB4MkY5NEYsICdNJywgJ+eijCcpLAogICAgKDB4MkY5NTAsICdNJywgJ+ejjCcpLAogICAgKDB4MkY5NTEsICdNJywgJ+SDoycpLAogICAgKDB4MkY5NTIsICdNJywgJ/ClmKYnKSwKICAgICgweDJGOTUzLCAnTScsICfnpZYnKSwKICAgICgweDJGOTU0LCAnTScsICfwpZqaJyksCiAgICAoMHgyRjk1NSwgJ00nLCAn8KWbhScpLAogICAgKDB4MkY5NTYsICdNJywgJ+emjycpLAogICAgKDB4MkY5NTcsICdNJywgJ+enqycpLAogICAgKDB4MkY5NTgsICdNJywgJ+SErycpLAogICAgKDB4MkY5NTksICdNJywgJ+epgCcpLAogICAgKDB4MkY5NUEsICdNJywgJ+epiicpLAogICAgKDB4MkY5NUIsICdNJywgJ+epjycpLAogICAgKDB4MkY5NUMsICdNJywgJ/ClpbwnKSwKICAgICgweDJGOTVELCAnTScsICfwpaqnJyksCiAgICBdCgpkZWYgX3NlZ183OSgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOgogICAgcmV0dXJuIFsKICAgICgweDJGOTVGLCAnWCcpLAogICAgKDB4MkY5NjAsICdNJywgJ+SIgicpLAogICAgKDB4MkY5NjEsICdNJywgJ/ClrqsnKSwKICAgICgweDJGOTYyLCAnTScsICfnr4YnKSwKICAgICgweDJGOTYzLCAnTScsICfnr4knKSwKICAgICgweDJGOTY0LCAnTScsICfkiKcnKSwKICAgICgweDJGOTY1LCAnTScsICfwpbKAJyksCiAgICAoMHgyRjk2NiwgJ00nLCAn57OSJyksCiAgICAoMHgyRjk2NywgJ00nLCAn5IqgJyksCiAgICAoMHgyRjk2OCwgJ00nLCAn57OoJyksCiAgICAoMHgyRjk2OSwgJ00nLCAn57OjJyksCiAgICAoMHgyRjk2QSwgJ00nLCAn57SAJyksCiAgICAoMHgyRjk2QiwgJ00nLCAn8KW+hicpLAogICAgKDB4MkY5NkMsICdNJywgJ+e1oycpLAogICAgKDB4MkY5NkQsICdNJywgJ+SMgScpLAogICAgKDB4MkY5NkUsICdNJywgJ+e3hycpLAogICAgKDB4MkY5NkYsICdNJywgJ+e4gicpLAogICAgKDB4MkY5NzAsICdNJywgJ+e5hScpLAogICAgKDB4MkY5NzEsICdNJywgJ+SMtCcpLAogICAgKDB4MkY5NzIsICdNJywgJ/CmiKgnKSwKICAgICgweDJGOTczLCAnTScsICfwpomHJyksCiAgICAoMHgyRjk3NCwgJ00nLCAn5I2ZJyksCiAgICAoMHgyRjk3NSwgJ00nLCAn8KaLmScpLAogICAgKDB4MkY5NzYsICdNJywgJ+e9uicpLAogICAgKDB4MkY5NzcsICdNJywgJ/CmjL4nKSwKICAgICgweDJGOTc4LCAnTScsICfnvpUnKSwKICAgICgweDJGOTc5LCAnTScsICfnv7onKSwKICAgICgweDJGOTdBLCAnTScsICfogIUnKSwKICAgICgweDJGOTdCLCAnTScsICfwppOaJyksCiAgICAoMHgyRjk3QywgJ00nLCAn8KaUoycpLAogICAgKDB4MkY5N0QsICdNJywgJ+iBoCcpLAogICAgKDB4MkY5N0UsICdNJywgJ/CmlqgnKSwKICAgICgweDJGOTdGLCAnTScsICfogbAnKSwKICAgICgweDJGOTgwLCAnTScsICfwo42fJyksCiAgICAoMHgyRjk4MSwgJ00nLCAn5I+VJyksCiAgICAoMHgyRjk4MiwgJ00nLCAn6IKyJyksCiAgICAoMHgyRjk4MywgJ00nLCAn6ISDJyksCiAgICAoMHgyRjk4NCwgJ00nLCAn5JCLJyksCiAgICAoMHgyRjk4NSwgJ00nLCAn6IS+JyksCiAgICAoMHgyRjk4NiwgJ00nLCAn5aq1JyksCiAgICAoMHgyRjk4NywgJ00nLCAn8KaepycpLAogICAgKDB4MkY5ODgsICdNJywgJ/CmnrUnKSwKICAgICgweDJGOTg5LCAnTScsICfwo46TJyksCiAgICAoMHgyRjk4QSwgJ00nLCAn8KOOnCcpLAogICAgKDB4MkY5OEIsICdNJywgJ+iIgScpLAogICAgKDB4MkY5OEMsICdNJywgJ+iIhCcpLAogICAgKDB4MkY5OEQsICdNJywgJ+i+nicpLAogICAgKDB4MkY5OEUsICdNJywgJ+SRqycpLAogICAgKDB4MkY5OEYsICdNJywgJ+iKkScpLAogICAgKDB4MkY5OTAsICdNJywgJ+iKiycpLAogICAgKDB4MkY5OTEsICdNJywgJ+iKnScpLAogICAgKDB4MkY5OTIsICdNJywgJ+WKsycpLAogICAgKDB4MkY5OTMsICdNJywgJ+iKsScpLAogICAgKDB4MkY5OTQsICdNJywgJ+iKsycpLAogICAgKDB4MkY5OTUsICdNJywgJ+iKvScpLAogICAgKDB4MkY5OTYsICdNJywgJ+iLpicpLAogICAgKDB4MkY5OTcsICdNJywgJ/CmrLwnKSwKICAgICgweDJGOTk4LCAnTScsICfoi6UnKSwKICAgICgweDJGOTk5LCAnTScsICfojJ0nKSwKICAgICgweDJGOTlBLCAnTScsICfojaMnKSwKICAgICgweDJGOTlCLCAnTScsICfojq0nKSwKICAgICgweDJGOTlDLCAnTScsICfojKMnKSwKICAgICgweDJGOTlELCAnTScsICfojr0nKSwKICAgICgweDJGOTlFLCAnTScsICfoj6cnKSwKICAgICgweDJGOTlGLCAnTScsICfokZcnKSwKICAgICgweDJGOUEwLCAnTScsICfojZMnKSwKICAgICgweDJGOUExLCAnTScsICfoj4onKSwKICAgICgweDJGOUEyLCAnTScsICfoj4wnKSwKICAgICgweDJGOUEzLCAnTScsICfoj5wnKSwKICAgICgweDJGOUE0LCAnTScsICfwprC2JyksCiAgICAoMHgyRjlBNSwgJ00nLCAn8Ka1qycpLAogICAgKDB4MkY5QTYsICdNJywgJ/Cms5UnKSwKICAgICgweDJGOUE3LCAnTScsICfklKsnKSwKICAgICgweDJGOUE4LCAnTScsICfok7EnKSwKICAgICgweDJGOUE5LCAnTScsICfok7MnKSwKICAgICgweDJGOUFBLCAnTScsICfolJYnKSwKICAgICgweDJGOUFCLCAnTScsICfwp4+KJyksCiAgICAoMHgyRjlBQywgJ00nLCAn6JWkJyksCiAgICAoMHgyRjlBRCwgJ00nLCAn8Ka8rCcpLAogICAgKDB4MkY5QUUsICdNJywgJ+SVnScpLAogICAgKDB4MkY5QUYsICdNJywgJ+SVoScpLAogICAgKDB4MkY5QjAsICdNJywgJ/CmvrEnKSwKICAgICgweDJGOUIxLCAnTScsICfwp4OSJyksCiAgICAoMHgyRjlCMiwgJ00nLCAn5JWrJyksCiAgICAoMHgyRjlCMywgJ00nLCAn6JmQJyksCiAgICAoMHgyRjlCNCwgJ00nLCAn6JmcJyksCiAgICAoMHgyRjlCNSwgJ00nLCAn6JmnJyksCiAgICAoMHgyRjlCNiwgJ00nLCAn6JmpJyksCiAgICAoMHgyRjlCNywgJ00nLCAn6JqpJyksCiAgICAoMHgyRjlCOCwgJ00nLCAn6JqIJyksCiAgICAoMHgyRjlCOSwgJ00nLCAn6JyOJyksCiAgICAoMHgyRjlCQSwgJ00nLCAn6JuiJyksCiAgICAoMHgyRjlCQiwgJ00nLCAn6J25JyksCiAgICAoMHgyRjlCQywgJ00nLCAn6JyoJyksCiAgICAoMHgyRjlCRCwgJ00nLCAn6J2rJyksCiAgICAoMHgyRjlCRSwgJ00nLCAn6J6GJyksCiAgICAoMHgyRjlCRiwgJ1gnKSwKICAgICgweDJGOUMwLCAnTScsICfon6EnKSwKICAgICgweDJGOUMxLCAnTScsICfooIEnKSwKICAgICgweDJGOUMyLCAnTScsICfkl7knKSwKICAgIF0KCmRlZiBfc2VnXzgwKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06CiAgICByZXR1cm4gWwogICAgKDB4MkY5QzMsICdNJywgJ+ihoCcpLAogICAgKDB4MkY5QzQsICdNJywgJ+ihoycpLAogICAgKDB4MkY5QzUsICdNJywgJ/CnmacnKSwKICAgICgweDJGOUM2LCAnTScsICfoo5cnKSwKICAgICgweDJGOUM3LCAnTScsICfoo54nKSwKICAgICgweDJGOUM4LCAnTScsICfkmLUnKSwKICAgICgweDJGOUM5LCAnTScsICfoo7onKSwKICAgICgweDJGOUNBLCAnTScsICfjkrsnKSwKICAgICgweDJGOUNCLCAnTScsICfwp6KuJyksCiAgICAoMHgyRjlDQywgJ00nLCAn8KelpicpLAogICAgKDB4MkY5Q0QsICdNJywgJ+SavicpLAogICAgKDB4MkY5Q0UsICdNJywgJ+SbhycpLAogICAgKDB4MkY5Q0YsICdNJywgJ+iqoCcpLAogICAgKDB4MkY5RDAsICdNJywgJ+irrScpLAogICAgKDB4MkY5RDEsICdNJywgJ+iuiicpLAogICAgKDB4MkY5RDIsICdNJywgJ+ixlScpLAogICAgKDB4MkY5RDMsICdNJywgJ/CnsqgnKSwKICAgICgweDJGOUQ0LCAnTScsICfosqsnKSwKICAgICgweDJGOUQ1LCAnTScsICfos4EnKSwKICAgICgweDJGOUQ2LCAnTScsICfotJsnKSwKICAgICgweDJGOUQ3LCAnTScsICfotbcnKSwKICAgICgweDJGOUQ4LCAnTScsICfwp7yvJyksCiAgICAoMHgyRjlEOSwgJ00nLCAn8KCghCcpLAogICAgKDB4MkY5REEsICdNJywgJ+i3iycpLAogICAgKDB4MkY5REIsICdNJywgJ+i2vCcpLAogICAgKDB4MkY5REMsICdNJywgJ+i3sCcpLAogICAgKDB4MkY5REQsICdNJywgJ/Cgo54nKSwKICAgICgweDJGOURFLCAnTScsICfou5QnKSwKICAgICgweDJGOURGLCAnTScsICfovLgnKSwKICAgICgweDJGOUUwLCAnTScsICfwqJeSJyksCiAgICAoMHgyRjlFMSwgJ00nLCAn8KiXrScpLAogICAgKDB4MkY5RTIsICdNJywgJ+mClCcpLAogICAgKDB4MkY5RTMsICdNJywgJ+mDsScpLAogICAgKDB4MkY5RTQsICdNJywgJ+mEkScpLAogICAgKDB4MkY5RTUsICdNJywgJ/ConK4nKSwKICAgICgweDJGOUU2LCAnTScsICfphJsnKSwKICAgICgweDJGOUU3LCAnTScsICfpiLgnKSwKICAgICgweDJGOUU4LCAnTScsICfpi5cnKSwKICAgICgweDJGOUU5LCAnTScsICfpi5gnKSwKICAgICgweDJGOUVBLCAnTScsICfpibwnKSwKICAgICgweDJGOUVCLCAnTScsICfpj7knKSwKICAgICgweDJGOUVDLCAnTScsICfpkJUnKSwKICAgICgweDJGOUVELCAnTScsICfwqK+6JyksCiAgICAoMHgyRjlFRSwgJ00nLCAn6ZaLJyksCiAgICAoMHgyRjlFRiwgJ00nLCAn5KaVJyksCiAgICAoMHgyRjlGMCwgJ00nLCAn6Za3JyksCiAgICAoMHgyRjlGMSwgJ00nLCAn8Ki1tycpLAogICAgKDB4MkY5RjIsICdNJywgJ+SnpicpLAogICAgKDB4MkY5RjMsICdNJywgJ+mbgycpLAogICAgKDB4MkY5RjQsICdNJywgJ+W2sicpLAogICAgKDB4MkY5RjUsICdNJywgJ+mcoycpLAogICAgKDB4MkY5RjYsICdNJywgJ/CphYUnKSwKICAgICgweDJGOUY3LCAnTScsICfwqYiaJyksCiAgICAoMHgyRjlGOCwgJ00nLCAn5KmuJyksCiAgICAoMHgyRjlGOSwgJ00nLCAn5Km2JyksCiAgICAoMHgyRjlGQSwgJ00nLCAn6Z+gJyksCiAgICAoMHgyRjlGQiwgJ00nLCAn8KmQiicpLAogICAgKDB4MkY5RkMsICdNJywgJ+SqsicpLAogICAgKDB4MkY5RkQsICdNJywgJ/CpkpYnKSwKICAgICgweDJGOUZFLCAnTScsICfpoIsnKSwKICAgICgweDJGQTAwLCAnTScsICfpoKknKSwKICAgICgweDJGQTAxLCAnTScsICfwqZa2JyksCiAgICAoMHgyRkEwMiwgJ00nLCAn6aOiJyksCiAgICAoMHgyRkEwMywgJ00nLCAn5KyzJyksCiAgICAoMHgyRkEwNCwgJ00nLCAn6aSpJyksCiAgICAoMHgyRkEwNSwgJ00nLCAn6aanJyksCiAgICAoMHgyRkEwNiwgJ00nLCAn6aeCJyksCiAgICAoMHgyRkEwNywgJ00nLCAn6ae+JyksCiAgICAoMHgyRkEwOCwgJ00nLCAn5K+OJyksCiAgICAoMHgyRkEwOSwgJ00nLCAn8KmssCcpLAogICAgKDB4MkZBMEEsICdNJywgJ+mskicpLAogICAgKDB4MkZBMEIsICdNJywgJ+mxgCcpLAogICAgKDB4MkZBMEMsICdNJywgJ+mzvScpLAogICAgKDB4MkZBMEQsICdNJywgJ+SzjicpLAogICAgKDB4MkZBMEUsICdNJywgJ+SzrScpLAogICAgKDB4MkZBMEYsICdNJywgJ+m1pycpLAogICAgKDB4MkZBMTAsICdNJywgJ/Cqg44nKSwKICAgICgweDJGQTExLCAnTScsICfks7gnKSwKICAgICgweDJGQTEyLCAnTScsICfwqoSFJyksCiAgICAoMHgyRkExMywgJ00nLCAn8KqIjicpLAogICAgKDB4MkZBMTQsICdNJywgJ/CqipEnKSwKICAgICgweDJGQTE1LCAnTScsICfpursnKSwKICAgICgweDJGQTE2LCAnTScsICfktZYnKSwKICAgICgweDJGQTE3LCAnTScsICfpu7knKSwKICAgICgweDJGQTE4LCAnTScsICfpu74nKSwKICAgICgweDJGQTE5LCAnTScsICfpvIUnKSwKICAgICgweDJGQTFBLCAnTScsICfpvI8nKSwKICAgICgweDJGQTFCLCAnTScsICfpvJYnKSwKICAgICgweDJGQTFDLCAnTScsICfpvLsnKSwKICAgICgweDJGQTFELCAnTScsICfwqpiAJyksCiAgICAoMHgyRkExRSwgJ1gnKSwKICAgICgweDMwMDAwLCAnVicpLAogICAgKDB4MzEzNEIsICdYJyksCiAgICAoMHhFMDEwMCwgJ0knKSwKICAgICgweEUwMUYwLCAnWCcpLAogICAgXQoKdXRzNDZkYXRhID0gdHVwbGUoCiAgICBfc2VnXzAoKQogICAgKyBfc2VnXzEoKQogICAgKyBfc2VnXzIoKQogICAgKyBfc2VnXzMoKQogICAgKyBfc2VnXzQoKQogICAgKyBfc2VnXzUoKQogICAgKyBfc2VnXzYoKQogICAgKyBfc2VnXzcoKQogICAgKyBfc2VnXzgoKQogICAgKyBfc2VnXzkoKQogICAgKyBfc2VnXzEwKCkKICAgICsgX3NlZ18xMSgpCiAgICArIF9zZWdfMTIoKQogICAgKyBfc2VnXzEzKCkKICAgICsgX3NlZ18xNCgpCiAgICArIF9zZWdfMTUoKQogICAgKyBfc2VnXzE2KCkKICAgICsgX3NlZ18xNygpCiAgICArIF9zZWdfMTgoKQogICAgKyBfc2VnXzE5KCkKICAgICsgX3NlZ18yMCgpCiAgICArIF9zZWdfMjEoKQogICAgKyBfc2VnXzIyKCkKICAgICsgX3NlZ18yMygpCiAgICArIF9zZWdfMjQoKQogICAgKyBfc2VnXzI1KCkKICAgICsgX3NlZ18yNigpCiAgICArIF9zZWdfMjcoKQogICAgKyBfc2VnXzI4KCkKICAgICsgX3NlZ18yOSgpCiAgICArIF9zZWdfMzAoKQogICAgKyBfc2VnXzMxKCkKICAgICsgX3NlZ18zMigpCiAgICArIF9zZWdfMzMoKQogICAgKyBfc2VnXzM0KCkKICAgICsgX3NlZ18zNSgpCiAgICArIF9zZWdfMzYoKQogICAgKyBfc2VnXzM3KCkKICAgICsgX3NlZ18zOCgpCiAgICArIF9zZWdfMzkoKQogICAgKyBfc2VnXzQwKCkKICAgICsgX3NlZ180MSgpCiAgICArIF9zZWdfNDIoKQogICAgKyBfc2VnXzQzKCkKICAgICsgX3NlZ180NCgpCiAgICArIF9zZWdfNDUoKQogICAgKyBfc2VnXzQ2KCkKICAgICsgX3NlZ180NygpCiAgICArIF9zZWdfNDgoKQogICAgKyBfc2VnXzQ5KCkKICAgICsgX3NlZ181MCgpCiAgICArIF9zZWdfNTEoKQogICAgKyBfc2VnXzUyKCkKICAgICsgX3NlZ181MygpCiAgICArIF9zZWdfNTQoKQogICAgKyBfc2VnXzU1KCkKICAgICsgX3NlZ181NigpCiAgICArIF9zZWdfNTcoKQogICAgKyBfc2VnXzU4KCkKICAgICsgX3NlZ181OSgpCiAgICArIF9zZWdfNjAoKQogICAgKyBfc2VnXzYxKCkKICAgICsgX3NlZ182MigpCiAgICArIF9zZWdfNjMoKQogICAgKyBfc2VnXzY0KCkKICAgICsgX3NlZ182NSgpCiAgICArIF9zZWdfNjYoKQogICAgKyBfc2VnXzY3KCkKICAgICsgX3NlZ182OCgpCiAgICArIF9zZWdfNjkoKQogICAgKyBfc2VnXzcwKCkKICAgICsgX3NlZ183MSgpCiAgICArIF9zZWdfNzIoKQogICAgKyBfc2VnXzczKCkKICAgICsgX3NlZ183NCgpCiAgICArIF9zZWdfNzUoKQogICAgKyBfc2VnXzc2KCkKICAgICsgX3NlZ183NygpCiAgICArIF9zZWdfNzgoKQogICAgKyBfc2VnXzc5KCkKICAgICsgX3NlZ184MCgpCikgICMgdHlwZTogVHVwbGVbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV0sIC4uLl0KCiIiIgptb2R1bGVfZGljdFsiaWRuYSIrb3Muc2VwKyJjb3JlLnB5Il09IiIiCmZyb20gLiBpbXBvcnQgaWRuYWRhdGEKaW1wb3J0IGJpc2VjdAppbXBvcnQgdW5pY29kZWRhdGEKaW1wb3J0IHJlCmZyb20gdHlwaW5nIGltcG9ydCBVbmlvbiwgT3B0aW9uYWwKZnJvbSAuaW50cmFuZ2VzIGltcG9ydCBpbnRyYW5nZXNfY29udGFpbgoKX3ZpcmFtYV9jb21iaW5pbmdfY2xhc3MgPSA5Cl9hbGFiZWxfcHJlZml4ID0gYid4bi0tJwpfdW5pY29kZV9kb3RzX3JlID0gcmUuY29tcGlsZSgnW1xcdTAwMmVcXHUzMDAyXFx1ZmYwZVxcdWZmNjFdJykKCmNsYXNzIElETkFFcnJvcihVbmljb2RlRXJyb3IpOgogICAgXCJcIlwiIEJhc2UgZXhjZXB0aW9uIGZvciBhbGwgSUROQS1lbmNvZGluZyByZWxhdGVkIHByb2JsZW1zIFwiXCJcIgogICAgcGFzcwoKCmNsYXNzIElETkFCaWRpRXJyb3IoSUROQUVycm9yKToKICAgIFwiXCJcIiBFeGNlcHRpb24gd2hlbiBiaWRpcmVjdGlvbmFsIHJlcXVpcmVtZW50cyBhcmUgbm90IHNhdGlzZmllZCBcIlwiXCIKICAgIHBhc3MKCgpjbGFzcyBJbnZhbGlkQ29kZXBvaW50KElETkFFcnJvcik6CiAgICBcIlwiXCIgRXhjZXB0aW9uIHdoZW4gYSBkaXNhbGxvd2VkIG9yIHVuYWxsb2NhdGVkIGNvZGVwb2ludCBpcyB1c2VkIFwiXCJcIgogICAgcGFzcwoKCmNsYXNzIEludmFsaWRDb2RlcG9pbnRDb250ZXh0KElETkFFcnJvcik6CiAgICBcIlwiXCIgRXhjZXB0aW9uIHdoZW4gdGhlIGNvZGVwb2ludCBpcyBub3QgdmFsaWQgaW4gdGhlIGNvbnRleHQgaXQgaXMgdXNlZCBcIlwiXCIKICAgIHBhc3MKCgpkZWYgX2NvbWJpbmluZ19jbGFzcyhjcDogaW50KSAtPiBpbnQ6CiAgICB2ID0gdW5pY29kZWRhdGEuY29tYmluaW5nKGNocihjcCkpCiAgICBpZiB2ID09IDA6CiAgICAgICAgaWYgbm90IHVuaWNvZGVkYXRhLm5hbWUoY2hyKGNwKSk6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoJ1Vua25vd24gY2hhcmFjdGVyIGluIHVuaWNvZGVkYXRhJykKICAgIHJldHVybiB2CgpkZWYgX2lzX3NjcmlwdChjcDogc3RyLCBzY3JpcHQ6IHN0cikgLT4gYm9vbDoKICAgIHJldHVybiBpbnRyYW5nZXNfY29udGFpbihvcmQoY3ApLCBpZG5hZGF0YS5zY3JpcHRzW3NjcmlwdF0pCgpkZWYgX3B1bnljb2RlKHM6IHN0cikgLT4gYnl0ZXM6CiAgICByZXR1cm4gcy5lbmNvZGUoJ3B1bnljb2RlJykKCmRlZiBfdW5vdChzOiBpbnQpIC0+IHN0cjoKICAgIHJldHVybiAnVSt7OjA0WH0nLmZvcm1hdChzKQoKCmRlZiB2YWxpZF9sYWJlbF9sZW5ndGgobGFiZWw6IFVuaW9uW2J5dGVzLCBzdHJdKSAtPiBib29sOgogICAgaWYgbGVuKGxhYmVsKSA+IDYzOgogICAgICAgIHJldHVybiBGYWxzZQogICAgcmV0dXJuIFRydWUKCgpkZWYgdmFsaWRfc3RyaW5nX2xlbmd0aChsYWJlbDogVW5pb25bYnl0ZXMsIHN0cl0sIHRyYWlsaW5nX2RvdDogYm9vbCkgLT4gYm9vbDoKICAgIGlmIGxlbihsYWJlbCkgPiAoMjU0IGlmIHRyYWlsaW5nX2RvdCBlbHNlIDI1Myk6CiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICByZXR1cm4gVHJ1ZQoKCmRlZiBjaGVja19iaWRpKGxhYmVsOiBzdHIsIGNoZWNrX2x0cjogYm9vbCA9IEZhbHNlKSAtPiBib29sOgogICAgIyBCaWRpIHJ1bGVzIHNob3VsZCBvbmx5IGJlIGFwcGxpZWQgaWYgc3RyaW5nIGNvbnRhaW5zIFJUTCBjaGFyYWN0ZXJzCiAgICBiaWRpX2xhYmVsID0gRmFsc2UKICAgIGZvciAoaWR4LCBjcCkgaW4gZW51bWVyYXRlKGxhYmVsLCAxKToKICAgICAgICBkaXJlY3Rpb24gPSB1bmljb2RlZGF0YS5iaWRpcmVjdGlvbmFsKGNwKQogICAgICAgIGlmIGRpcmVjdGlvbiA9PSAnJzoKICAgICAgICAgICAgIyBTdHJpbmcgbGlrZWx5IGNvbWVzIGZyb20gYSBuZXdlciB2ZXJzaW9uIG9mIFVuaWNvZGUKICAgICAgICAgICAgcmFpc2UgSUROQUJpZGlFcnJvcignVW5rbm93biBkaXJlY3Rpb25hbGl0eSBpbiBsYWJlbCB7fSBhdCBwb3NpdGlvbiB7fScuZm9ybWF0KHJlcHIobGFiZWwpLCBpZHgpKQogICAgICAgIGlmIGRpcmVjdGlvbiBpbiBbJ1InLCAnQUwnLCAnQU4nXToKICAgICAgICAgICAgYmlkaV9sYWJlbCA9IFRydWUKICAgIGlmIG5vdCBiaWRpX2xhYmVsIGFuZCBub3QgY2hlY2tfbHRyOgogICAgICAgIHJldHVybiBUcnVlCgogICAgIyBCaWRpIHJ1bGUgMQogICAgZGlyZWN0aW9uID0gdW5pY29kZWRhdGEuYmlkaXJlY3Rpb25hbChsYWJlbFswXSkKICAgIGlmIGRpcmVjdGlvbiBpbiBbJ1InLCAnQUwnXToKICAgICAgICBydGwgPSBUcnVlCiAgICBlbGlmIGRpcmVjdGlvbiA9PSAnTCc6CiAgICAgICAgcnRsID0gRmFsc2UKICAgIGVsc2U6CiAgICAgICAgcmFpc2UgSUROQUJpZGlFcnJvcignRmlyc3QgY29kZXBvaW50IGluIGxhYmVsIHt9IG11c3QgYmUgZGlyZWN0aW9uYWxpdHkgTCwgUiBvciBBTCcuZm9ybWF0KHJlcHIobGFiZWwpKSkKCiAgICB2YWxpZF9lbmRpbmcgPSBGYWxzZQogICAgbnVtYmVyX3R5cGUgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW3N0cl0KICAgIGZvciAoaWR4LCBjcCkgaW4gZW51bWVyYXRlKGxhYmVsLCAxKToKICAgICAgICBkaXJlY3Rpb24gPSB1bmljb2RlZGF0YS5iaWRpcmVjdGlvbmFsKGNwKQoKICAgICAgICBpZiBydGw6CiAgICAgICAgICAgICMgQmlkaSBydWxlIDIKICAgICAgICAgICAgaWYgbm90IGRpcmVjdGlvbiBpbiBbJ1InLCAnQUwnLCAnQU4nLCAnRU4nLCAnRVMnLCAnQ1MnLCAnRVQnLCAnT04nLCAnQk4nLCAnTlNNJ106CiAgICAgICAgICAgICAgICByYWlzZSBJRE5BQmlkaUVycm9yKCdJbnZhbGlkIGRpcmVjdGlvbiBmb3IgY29kZXBvaW50IGF0IHBvc2l0aW9uIHt9IGluIGEgcmlnaHQtdG8tbGVmdCBsYWJlbCcuZm9ybWF0KGlkeCkpCiAgICAgICAgICAgICMgQmlkaSBydWxlIDMKICAgICAgICAgICAgaWYgZGlyZWN0aW9uIGluIFsnUicsICdBTCcsICdFTicsICdBTiddOgogICAgICAgICAgICAgICAgdmFsaWRfZW5kaW5nID0gVHJ1ZQogICAgICAgICAgICBlbGlmIGRpcmVjdGlvbiAhPSAnTlNNJzoKICAgICAgICAgICAgICAgIHZhbGlkX2VuZGluZyA9IEZhbHNlCiAgICAgICAgICAgICMgQmlkaSBydWxlIDQKICAgICAgICAgICAgaWYgZGlyZWN0aW9uIGluIFsnQU4nLCAnRU4nXToKICAgICAgICAgICAgICAgIGlmIG5vdCBudW1iZXJfdHlwZToKICAgICAgICAgICAgICAgICAgICBudW1iZXJfdHlwZSA9IGRpcmVjdGlvbgogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBpZiBudW1iZXJfdHlwZSAhPSBkaXJlY3Rpb246CiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIElETkFCaWRpRXJyb3IoJ0NhbiBub3QgbWl4IG51bWVyYWwgdHlwZXMgaW4gYSByaWdodC10by1sZWZ0IGxhYmVsJykKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIEJpZGkgcnVsZSA1CiAgICAgICAgICAgIGlmIG5vdCBkaXJlY3Rpb24gaW4gWydMJywgJ0VOJywgJ0VTJywgJ0NTJywgJ0VUJywgJ09OJywgJ0JOJywgJ05TTSddOgogICAgICAgICAgICAgICAgcmFpc2UgSUROQUJpZGlFcnJvcignSW52YWxpZCBkaXJlY3Rpb24gZm9yIGNvZGVwb2ludCBhdCBwb3NpdGlvbiB7fSBpbiBhIGxlZnQtdG8tcmlnaHQgbGFiZWwnLmZvcm1hdChpZHgpKQogICAgICAgICAgICAjIEJpZGkgcnVsZSA2CiAgICAgICAgICAgIGlmIGRpcmVjdGlvbiBpbiBbJ0wnLCAnRU4nXToKICAgICAgICAgICAgICAgIHZhbGlkX2VuZGluZyA9IFRydWUKICAgICAgICAgICAgZWxpZiBkaXJlY3Rpb24gIT0gJ05TTSc6CiAgICAgICAgICAgICAgICB2YWxpZF9lbmRpbmcgPSBGYWxzZQoKICAgIGlmIG5vdCB2YWxpZF9lbmRpbmc6CiAgICAgICAgcmFpc2UgSUROQUJpZGlFcnJvcignTGFiZWwgZW5kcyB3aXRoIGlsbGVnYWwgY29kZXBvaW50IGRpcmVjdGlvbmFsaXR5JykKCiAgICByZXR1cm4gVHJ1ZQoKCmRlZiBjaGVja19pbml0aWFsX2NvbWJpbmVyKGxhYmVsOiBzdHIpIC0+IGJvb2w6CiAgICBpZiB1bmljb2RlZGF0YS5jYXRlZ29yeShsYWJlbFswXSlbMF0gPT0gJ00nOgogICAgICAgIHJhaXNlIElETkFFcnJvcignTGFiZWwgYmVnaW5zIHdpdGggYW4gaWxsZWdhbCBjb21iaW5pbmcgY2hhcmFjdGVyJykKICAgIHJldHVybiBUcnVlCgoKZGVmIGNoZWNrX2h5cGhlbl9vayhsYWJlbDogc3RyKSAtPiBib29sOgogICAgaWYgbGFiZWxbMjo0XSA9PSAnLS0nOgogICAgICAgIHJhaXNlIElETkFFcnJvcignTGFiZWwgaGFzIGRpc2FsbG93ZWQgaHlwaGVucyBpbiAzcmQgYW5kIDR0aCBwb3NpdGlvbicpCiAgICBpZiBsYWJlbFswXSA9PSAnLScgb3IgbGFiZWxbLTFdID09ICctJzoKICAgICAgICByYWlzZSBJRE5BRXJyb3IoJ0xhYmVsIG11c3Qgbm90IHN0YXJ0IG9yIGVuZCB3aXRoIGEgaHlwaGVuJykKICAgIHJldHVybiBUcnVlCgoKZGVmIGNoZWNrX25mYyhsYWJlbDogc3RyKSAtPiBOb25lOgogICAgaWYgdW5pY29kZWRhdGEubm9ybWFsaXplKCdORkMnLCBsYWJlbCkgIT0gbGFiZWw6CiAgICAgICAgcmFpc2UgSUROQUVycm9yKCdMYWJlbCBtdXN0IGJlIGluIE5vcm1hbGl6YXRpb24gRm9ybSBDJykKCgpkZWYgdmFsaWRfY29udGV4dGoobGFiZWw6IHN0ciwgcG9zOiBpbnQpIC0+IGJvb2w6CiAgICBjcF92YWx1ZSA9IG9yZChsYWJlbFtwb3NdKQoKICAgIGlmIGNwX3ZhbHVlID09IDB4MjAwYzoKCiAgICAgICAgaWYgcG9zID4gMDoKICAgICAgICAgICAgaWYgX2NvbWJpbmluZ19jbGFzcyhvcmQobGFiZWxbcG9zIC0gMV0pKSA9PSBfdmlyYW1hX2NvbWJpbmluZ19jbGFzczoKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCgogICAgICAgIG9rID0gRmFsc2UKICAgICAgICBmb3IgaSBpbiByYW5nZShwb3MtMSwgLTEsIC0xKToKICAgICAgICAgICAgam9pbmluZ190eXBlID0gaWRuYWRhdGEuam9pbmluZ190eXBlcy5nZXQob3JkKGxhYmVsW2ldKSkKICAgICAgICAgICAgaWYgam9pbmluZ190eXBlID09IG9yZCgnVCcpOgogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgaWYgam9pbmluZ190eXBlIGluIFtvcmQoJ0wnKSwgb3JkKCdEJyldOgogICAgICAgICAgICAgICAgb2sgPSBUcnVlCiAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICBpZiBub3Qgb2s6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICBvayA9IEZhbHNlCiAgICAgICAgZm9yIGkgaW4gcmFuZ2UocG9zKzEsIGxlbihsYWJlbCkpOgogICAgICAgICAgICBqb2luaW5nX3R5cGUgPSBpZG5hZGF0YS5qb2luaW5nX3R5cGVzLmdldChvcmQobGFiZWxbaV0pKQogICAgICAgICAgICBpZiBqb2luaW5nX3R5cGUgPT0gb3JkKCdUJyk6CiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBpZiBqb2luaW5nX3R5cGUgaW4gW29yZCgnUicpLCBvcmQoJ0QnKV06CiAgICAgICAgICAgICAgICBvayA9IFRydWUKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgcmV0dXJuIG9rCgogICAgaWYgY3BfdmFsdWUgPT0gMHgyMDBkOgoKICAgICAgICBpZiBwb3MgPiAwOgogICAgICAgICAgICBpZiBfY29tYmluaW5nX2NsYXNzKG9yZChsYWJlbFtwb3MgLSAxXSkpID09IF92aXJhbWFfY29tYmluaW5nX2NsYXNzOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBlbHNlOgoKICAgICAgICByZXR1cm4gRmFsc2UKCgpkZWYgdmFsaWRfY29udGV4dG8obGFiZWw6IHN0ciwgcG9zOiBpbnQsIGV4Y2VwdGlvbjogYm9vbCA9IEZhbHNlKSAtPiBib29sOgogICAgY3BfdmFsdWUgPSBvcmQobGFiZWxbcG9zXSkKCiAgICBpZiBjcF92YWx1ZSA9PSAweDAwYjc6CiAgICAgICAgaWYgMCA8IHBvcyA8IGxlbihsYWJlbCktMToKICAgICAgICAgICAgaWYgb3JkKGxhYmVsW3BvcyAtIDFdKSA9PSAweDAwNmMgYW5kIG9yZChsYWJlbFtwb3MgKyAxXSkgPT0gMHgwMDZjOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBlbGlmIGNwX3ZhbHVlID09IDB4MDM3NToKICAgICAgICBpZiBwb3MgPCBsZW4obGFiZWwpLTEgYW5kIGxlbihsYWJlbCkgPiAxOgogICAgICAgICAgICByZXR1cm4gX2lzX3NjcmlwdChsYWJlbFtwb3MgKyAxXSwgJ0dyZWVrJykKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBlbGlmIGNwX3ZhbHVlID09IDB4MDVmMyBvciBjcF92YWx1ZSA9PSAweDA1ZjQ6CiAgICAgICAgaWYgcG9zID4gMDoKICAgICAgICAgICAgcmV0dXJuIF9pc19zY3JpcHQobGFiZWxbcG9zIC0gMV0sICdIZWJyZXcnKQogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGVsaWYgY3BfdmFsdWUgPT0gMHgzMGZiOgogICAgICAgIGZvciBjcCBpbiBsYWJlbDoKICAgICAgICAgICAgaWYgY3AgPT0gJ1xcdTMwZmInOgogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgaWYgX2lzX3NjcmlwdChjcCwgJ0hpcmFnYW5hJykgb3IgX2lzX3NjcmlwdChjcCwgJ0thdGFrYW5hJykgb3IgX2lzX3NjcmlwdChjcCwgJ0hhbicpOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBlbGlmIDB4NjYwIDw9IGNwX3ZhbHVlIDw9IDB4NjY5OgogICAgICAgIGZvciBjcCBpbiBsYWJlbDoKICAgICAgICAgICAgaWYgMHg2ZjAgPD0gb3JkKGNwKSA8PSAweDA2Zjk6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIGVsaWYgMHg2ZjAgPD0gY3BfdmFsdWUgPD0gMHg2Zjk6CiAgICAgICAgZm9yIGNwIGluIGxhYmVsOgogICAgICAgICAgICBpZiAweDY2MCA8PSBvcmQoY3ApIDw9IDB4MDY2OToKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIHJldHVybiBUcnVlCgogICAgcmV0dXJuIEZhbHNlCgoKZGVmIGNoZWNrX2xhYmVsKGxhYmVsOiBVbmlvbltzdHIsIGJ5dGVzLCBieXRlYXJyYXldKSAtPiBOb25lOgogICAgaWYgaXNpbnN0YW5jZShsYWJlbCwgKGJ5dGVzLCBieXRlYXJyYXkpKToKICAgICAgICBsYWJlbCA9IGxhYmVsLmRlY29kZSgndXRmLTgnKQogICAgaWYgbGVuKGxhYmVsKSA9PSAwOgogICAgICAgIHJhaXNlIElETkFFcnJvcignRW1wdHkgTGFiZWwnKQoKICAgIGNoZWNrX25mYyhsYWJlbCkKICAgIGNoZWNrX2h5cGhlbl9vayhsYWJlbCkKICAgIGNoZWNrX2luaXRpYWxfY29tYmluZXIobGFiZWwpCgogICAgZm9yIChwb3MsIGNwKSBpbiBlbnVtZXJhdGUobGFiZWwpOgogICAgICAgIGNwX3ZhbHVlID0gb3JkKGNwKQogICAgICAgIGlmIGludHJhbmdlc19jb250YWluKGNwX3ZhbHVlLCBpZG5hZGF0YS5jb2RlcG9pbnRfY2xhc3Nlc1snUFZBTElEJ10pOgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIGVsaWYgaW50cmFuZ2VzX2NvbnRhaW4oY3BfdmFsdWUsIGlkbmFkYXRhLmNvZGVwb2ludF9jbGFzc2VzWydDT05URVhUSiddKToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgaWYgbm90IHZhbGlkX2NvbnRleHRqKGxhYmVsLCBwb3MpOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIEludmFsaWRDb2RlcG9pbnRDb250ZXh0KCdKb2luZXIge30gbm90IGFsbG93ZWQgYXQgcG9zaXRpb24ge30gaW4ge30nLmZvcm1hdCgKICAgICAgICAgICAgICAgICAgICAgICAgX3Vub3QoY3BfdmFsdWUpLCBwb3MrMSwgcmVwcihsYWJlbCkpKQogICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICAgICAgICAgIHJhaXNlIElETkFFcnJvcignVW5rbm93biBjb2RlcG9pbnQgYWRqYWNlbnQgdG8gam9pbmVyIHt9IGF0IHBvc2l0aW9uIHt9IGluIHt9Jy5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgX3Vub3QoY3BfdmFsdWUpLCBwb3MrMSwgcmVwcihsYWJlbCkpKQogICAgICAgIGVsaWYgaW50cmFuZ2VzX2NvbnRhaW4oY3BfdmFsdWUsIGlkbmFkYXRhLmNvZGVwb2ludF9jbGFzc2VzWydDT05URVhUTyddKToKICAgICAgICAgICAgaWYgbm90IHZhbGlkX2NvbnRleHRvKGxhYmVsLCBwb3MpOgogICAgICAgICAgICAgICAgcmFpc2UgSW52YWxpZENvZGVwb2ludENvbnRleHQoJ0NvZGVwb2ludCB7fSBub3QgYWxsb3dlZCBhdCBwb3NpdGlvbiB7fSBpbiB7fScuZm9ybWF0KF91bm90KGNwX3ZhbHVlKSwgcG9zKzEsIHJlcHIobGFiZWwpKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBJbnZhbGlkQ29kZXBvaW50KCdDb2RlcG9pbnQge30gYXQgcG9zaXRpb24ge30gb2Yge30gbm90IGFsbG93ZWQnLmZvcm1hdChfdW5vdChjcF92YWx1ZSksIHBvcysxLCByZXByKGxhYmVsKSkpCgogICAgY2hlY2tfYmlkaShsYWJlbCkKCgpkZWYgYWxhYmVsKGxhYmVsOiBzdHIpIC0+IGJ5dGVzOgogICAgdHJ5OgogICAgICAgIGxhYmVsX2J5dGVzID0gbGFiZWwuZW5jb2RlKCdhc2NpaScpCiAgICAgICAgdWxhYmVsKGxhYmVsX2J5dGVzKQogICAgICAgIGlmIG5vdCB2YWxpZF9sYWJlbF9sZW5ndGgobGFiZWxfYnl0ZXMpOgogICAgICAgICAgICByYWlzZSBJRE5BRXJyb3IoJ0xhYmVsIHRvbyBsb25nJykKICAgICAgICByZXR1cm4gbGFiZWxfYnl0ZXMKICAgIGV4Y2VwdCBVbmljb2RlRW5jb2RlRXJyb3I6CiAgICAgICAgcGFzcwoKICAgIGlmIG5vdCBsYWJlbDoKICAgICAgICByYWlzZSBJRE5BRXJyb3IoJ05vIElucHV0JykKCiAgICBsYWJlbCA9IHN0cihsYWJlbCkKICAgIGNoZWNrX2xhYmVsKGxhYmVsKQogICAgbGFiZWxfYnl0ZXMgPSBfcHVueWNvZGUobGFiZWwpCiAgICBsYWJlbF9ieXRlcyA9IF9hbGFiZWxfcHJlZml4ICsgbGFiZWxfYnl0ZXMKCiAgICBpZiBub3QgdmFsaWRfbGFiZWxfbGVuZ3RoKGxhYmVsX2J5dGVzKToKICAgICAgICByYWlzZSBJRE5BRXJyb3IoJ0xhYmVsIHRvbyBsb25nJykKCiAgICByZXR1cm4gbGFiZWxfYnl0ZXMKCgpkZWYgdWxhYmVsKGxhYmVsOiBVbmlvbltzdHIsIGJ5dGVzLCBieXRlYXJyYXldKSAtPiBzdHI6CiAgICBpZiBub3QgaXNpbnN0YW5jZShsYWJlbCwgKGJ5dGVzLCBieXRlYXJyYXkpKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGxhYmVsX2J5dGVzID0gbGFiZWwuZW5jb2RlKCdhc2NpaScpCiAgICAgICAgZXhjZXB0IFVuaWNvZGVFbmNvZGVFcnJvcjoKICAgICAgICAgICAgY2hlY2tfbGFiZWwobGFiZWwpCiAgICAgICAgICAgIHJldHVybiBsYWJlbAogICAgZWxzZToKICAgICAgICBsYWJlbF9ieXRlcyA9IGxhYmVsCgogICAgbGFiZWxfYnl0ZXMgPSBsYWJlbF9ieXRlcy5sb3dlcigpCiAgICBpZiBsYWJlbF9ieXRlcy5zdGFydHN3aXRoKF9hbGFiZWxfcHJlZml4KToKICAgICAgICBsYWJlbF9ieXRlcyA9IGxhYmVsX2J5dGVzW2xlbihfYWxhYmVsX3ByZWZpeCk6XQogICAgICAgIGlmIG5vdCBsYWJlbF9ieXRlczoKICAgICAgICAgICAgcmFpc2UgSUROQUVycm9yKCdNYWxmb3JtZWQgQS1sYWJlbCwgbm8gUHVueWNvZGUgZWxpZ2libGUgY29udGVudCBmb3VuZCcpCiAgICAgICAgaWYgbGFiZWxfYnl0ZXMuZGVjb2RlKCdhc2NpaScpWy0xXSA9PSAnLSc6CiAgICAgICAgICAgIHJhaXNlIElETkFFcnJvcignQS1sYWJlbCBtdXN0IG5vdCBlbmQgd2l0aCBhIGh5cGhlbicpCiAgICBlbHNlOgogICAgICAgIGNoZWNrX2xhYmVsKGxhYmVsX2J5dGVzKQogICAgICAgIHJldHVybiBsYWJlbF9ieXRlcy5kZWNvZGUoJ2FzY2lpJykKCiAgICB0cnk6CiAgICAgICAgbGFiZWwgPSBsYWJlbF9ieXRlcy5kZWNvZGUoJ3B1bnljb2RlJykKICAgIGV4Y2VwdCBVbmljb2RlRXJyb3I6CiAgICAgICAgcmFpc2UgSUROQUVycm9yKCdJbnZhbGlkIEEtbGFiZWwnKQogICAgY2hlY2tfbGFiZWwobGFiZWwpCiAgICByZXR1cm4gbGFiZWwKCgpkZWYgdXRzNDZfcmVtYXAoZG9tYWluOiBzdHIsIHN0ZDNfcnVsZXM6IGJvb2wgPSBUcnVlLCB0cmFuc2l0aW9uYWw6IGJvb2wgPSBGYWxzZSkgLT4gc3RyOgogICAgXCJcIlwiUmUtbWFwIHRoZSBjaGFyYWN0ZXJzIGluIHRoZSBzdHJpbmcgYWNjb3JkaW5nIHRvIFVUUzQ2IHByb2Nlc3NpbmcuXCJcIlwiCiAgICBmcm9tIC51dHM0NmRhdGEgaW1wb3J0IHV0czQ2ZGF0YQogICAgb3V0cHV0ID0gJycKCiAgICBmb3IgcG9zLCBjaGFyIGluIGVudW1lcmF0ZShkb21haW4pOgogICAgICAgIGNvZGVfcG9pbnQgPSBvcmQoY2hhcikKICAgICAgICB0cnk6CiAgICAgICAgICAgIHV0czQ2cm93ID0gdXRzNDZkYXRhW2NvZGVfcG9pbnQgaWYgY29kZV9wb2ludCA8IDI1NiBlbHNlCiAgICAgICAgICAgICAgICBiaXNlY3QuYmlzZWN0X2xlZnQodXRzNDZkYXRhLCAoY29kZV9wb2ludCwgJ1onKSkgLSAxXQogICAgICAgICAgICBzdGF0dXMgPSB1dHM0NnJvd1sxXQogICAgICAgICAgICByZXBsYWNlbWVudCA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbc3RyXQogICAgICAgICAgICBpZiBsZW4odXRzNDZyb3cpID09IDM6CiAgICAgICAgICAgICAgICByZXBsYWNlbWVudCA9IHV0czQ2cm93WzJdICAjIHR5cGU6IGlnbm9yZQogICAgICAgICAgICBpZiAoc3RhdHVzID09ICdWJyBvcgogICAgICAgICAgICAgICAgICAgIChzdGF0dXMgPT0gJ0QnIGFuZCBub3QgdHJhbnNpdGlvbmFsKSBvcgogICAgICAgICAgICAgICAgICAgIChzdGF0dXMgPT0gJzMnIGFuZCBub3Qgc3RkM19ydWxlcyBhbmQgcmVwbGFjZW1lbnQgaXMgTm9uZSkpOgogICAgICAgICAgICAgICAgb3V0cHV0ICs9IGNoYXIKICAgICAgICAgICAgZWxpZiByZXBsYWNlbWVudCBpcyBub3QgTm9uZSBhbmQgKHN0YXR1cyA9PSAnTScgb3IKICAgICAgICAgICAgICAgICAgICAoc3RhdHVzID09ICczJyBhbmQgbm90IHN0ZDNfcnVsZXMpIG9yCiAgICAgICAgICAgICAgICAgICAgKHN0YXR1cyA9PSAnRCcgYW5kIHRyYW5zaXRpb25hbCkpOgogICAgICAgICAgICAgICAgb3V0cHV0ICs9IHJlcGxhY2VtZW50CiAgICAgICAgICAgIGVsaWYgc3RhdHVzICE9ICdJJzoKICAgICAgICAgICAgICAgIHJhaXNlIEluZGV4RXJyb3IoKQogICAgICAgIGV4Y2VwdCBJbmRleEVycm9yOgogICAgICAgICAgICByYWlzZSBJbnZhbGlkQ29kZXBvaW50KAogICAgICAgICAgICAgICAgJ0NvZGVwb2ludCB7fSBub3QgYWxsb3dlZCBhdCBwb3NpdGlvbiB7fSBpbiB7fScuZm9ybWF0KAogICAgICAgICAgICAgICAgX3Vub3QoY29kZV9wb2ludCksIHBvcyArIDEsIHJlcHIoZG9tYWluKSkpCgogICAgcmV0dXJuIHVuaWNvZGVkYXRhLm5vcm1hbGl6ZSgnTkZDJywgb3V0cHV0KQoKCmRlZiBlbmNvZGUoczogVW5pb25bc3RyLCBieXRlcywgYnl0ZWFycmF5XSwgc3RyaWN0OiBib29sID0gRmFsc2UsIHV0czQ2OiBib29sID0gRmFsc2UsIHN0ZDNfcnVsZXM6IGJvb2wgPSBGYWxzZSwgdHJhbnNpdGlvbmFsOiBib29sID0gRmFsc2UpIC0+IGJ5dGVzOgogICAgaWYgaXNpbnN0YW5jZShzLCAoYnl0ZXMsIGJ5dGVhcnJheSkpOgogICAgICAgIHMgPSBzLmRlY29kZSgnYXNjaWknKQogICAgaWYgdXRzNDY6CiAgICAgICAgcyA9IHV0czQ2X3JlbWFwKHMsIHN0ZDNfcnVsZXMsIHRyYW5zaXRpb25hbCkKICAgIHRyYWlsaW5nX2RvdCA9IEZhbHNlCiAgICByZXN1bHQgPSBbXQogICAgaWYgc3RyaWN0OgogICAgICAgIGxhYmVscyA9IHMuc3BsaXQoJy4nKQogICAgZWxzZToKICAgICAgICBsYWJlbHMgPSBfdW5pY29kZV9kb3RzX3JlLnNwbGl0KHMpCiAgICBpZiBub3QgbGFiZWxzIG9yIGxhYmVscyA9PSBbJyddOgogICAgICAgIHJhaXNlIElETkFFcnJvcignRW1wdHkgZG9tYWluJykKICAgIGlmIGxhYmVsc1stMV0gPT0gJyc6CiAgICAgICAgZGVsIGxhYmVsc1stMV0KICAgICAgICB0cmFpbGluZ19kb3QgPSBUcnVlCiAgICBmb3IgbGFiZWwgaW4gbGFiZWxzOgogICAgICAgIHMgPSBhbGFiZWwobGFiZWwpCiAgICAgICAgaWYgczoKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIElETkFFcnJvcignRW1wdHkgbGFiZWwnKQogICAgaWYgdHJhaWxpbmdfZG90OgogICAgICAgIHJlc3VsdC5hcHBlbmQoYicnKQogICAgcyA9IGInLicuam9pbihyZXN1bHQpCiAgICBpZiBub3QgdmFsaWRfc3RyaW5nX2xlbmd0aChzLCB0cmFpbGluZ19kb3QpOgogICAgICAgIHJhaXNlIElETkFFcnJvcignRG9tYWluIHRvbyBsb25nJykKICAgIHJldHVybiBzCgoKZGVmIGRlY29kZShzOiBVbmlvbltzdHIsIGJ5dGVzLCBieXRlYXJyYXldLCBzdHJpY3Q6IGJvb2wgPSBGYWxzZSwgdXRzNDY6IGJvb2wgPSBGYWxzZSwgc3RkM19ydWxlczogYm9vbCA9IEZhbHNlKSAtPiBzdHI6CiAgICB0cnk6CiAgICAgICAgaWYgaXNpbnN0YW5jZShzLCAoYnl0ZXMsIGJ5dGVhcnJheSkpOgogICAgICAgICAgICBzID0gcy5kZWNvZGUoJ2FzY2lpJykKICAgIGV4Y2VwdCBVbmljb2RlRGVjb2RlRXJyb3I6CiAgICAgICAgcmFpc2UgSUROQUVycm9yKCdJbnZhbGlkIEFTQ0lJIGluIEEtbGFiZWwnKQogICAgaWYgdXRzNDY6CiAgICAgICAgcyA9IHV0czQ2X3JlbWFwKHMsIHN0ZDNfcnVsZXMsIEZhbHNlKQogICAgdHJhaWxpbmdfZG90ID0gRmFsc2UKICAgIHJlc3VsdCA9IFtdCiAgICBpZiBub3Qgc3RyaWN0OgogICAgICAgIGxhYmVscyA9IF91bmljb2RlX2RvdHNfcmUuc3BsaXQocykKICAgIGVsc2U6CiAgICAgICAgbGFiZWxzID0gcy5zcGxpdCgnLicpCiAgICBpZiBub3QgbGFiZWxzIG9yIGxhYmVscyA9PSBbJyddOgogICAgICAgIHJhaXNlIElETkFFcnJvcignRW1wdHkgZG9tYWluJykKICAgIGlmIG5vdCBsYWJlbHNbLTFdOgogICAgICAgIGRlbCBsYWJlbHNbLTFdCiAgICAgICAgdHJhaWxpbmdfZG90ID0gVHJ1ZQogICAgZm9yIGxhYmVsIGluIGxhYmVsczoKICAgICAgICBzID0gdWxhYmVsKGxhYmVsKQogICAgICAgIGlmIHM6CiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQocykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBJRE5BRXJyb3IoJ0VtcHR5IGxhYmVsJykKICAgIGlmIHRyYWlsaW5nX2RvdDoKICAgICAgICByZXN1bHQuYXBwZW5kKCcnKQogICAgcmV0dXJuICcuJy5qb2luKHJlc3VsdCkKCiIiIgptb2R1bGVfZGljdFsiaWRuYSIrb3Muc2VwKyJpbnRyYW5nZXMucHkiXT0iIiIKXCJcIlwiCkdpdmVuIGEgbGlzdCBvZiBpbnRlZ2VycywgbWFkZSB1cCBvZiAoaG9wZWZ1bGx5KSBhIHNtYWxsIG51bWJlciBvZiBsb25nIHJ1bnMKb2YgY29uc2VjdXRpdmUgaW50ZWdlcnMsIGNvbXB1dGUgYSByZXByZXNlbnRhdGlvbiBvZiB0aGUgZm9ybQooKHN0YXJ0MSwgZW5kMSksIChzdGFydDIsIGVuZDIpIC4uLikuIFRoZW4gYW5zd2VyIHRoZSBxdWVzdGlvbiBcIndhcyB4IHByZXNlbnQKaW4gdGhlIG9yaWdpbmFsIGxpc3Q/XCIgaW4gdGltZSBPKGxvZygjIHJ1bnMpKS4KXCJcIlwiCgppbXBvcnQgYmlzZWN0CmZyb20gdHlwaW5nIGltcG9ydCBMaXN0LCBUdXBsZQoKZGVmIGludHJhbmdlc19mcm9tX2xpc3QobGlzdF86IExpc3RbaW50XSkgLT4gVHVwbGVbaW50LCAuLi5dOgogICAgXCJcIlwiUmVwcmVzZW50IGEgbGlzdCBvZiBpbnRlZ2VycyBhcyBhIHNlcXVlbmNlIG9mIHJhbmdlczoKICAgICgoc3RhcnRfMCwgZW5kXzApLCAoc3RhcnRfMSwgZW5kXzEpLCAuLi4pLCBzdWNoIHRoYXQgdGhlIG9yaWdpbmFsCiAgICBpbnRlZ2VycyBhcmUgZXhhY3RseSB0aG9zZSB4IHN1Y2ggdGhhdCBzdGFydF9pIDw9IHggPCBlbmRfaSBmb3Igc29tZSBpLgoKICAgIFJhbmdlcyBhcmUgZW5jb2RlZCBhcyBzaW5nbGUgaW50ZWdlcnMgKHN0YXJ0IDw8IDMyIHwgZW5kKSwgbm90IGFzIHR1cGxlcy4KICAgIFwiXCJcIgoKICAgIHNvcnRlZF9saXN0ID0gc29ydGVkKGxpc3RfKQogICAgcmFuZ2VzID0gW10KICAgIGxhc3Rfd3JpdGUgPSAtMQogICAgZm9yIGkgaW4gcmFuZ2UobGVuKHNvcnRlZF9saXN0KSk6CiAgICAgICAgaWYgaSsxIDwgbGVuKHNvcnRlZF9saXN0KToKICAgICAgICAgICAgaWYgc29ydGVkX2xpc3RbaV0gPT0gc29ydGVkX2xpc3RbaSsxXS0xOgogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICBjdXJyZW50X3JhbmdlID0gc29ydGVkX2xpc3RbbGFzdF93cml0ZSsxOmkrMV0KICAgICAgICByYW5nZXMuYXBwZW5kKF9lbmNvZGVfcmFuZ2UoY3VycmVudF9yYW5nZVswXSwgY3VycmVudF9yYW5nZVstMV0gKyAxKSkKICAgICAgICBsYXN0X3dyaXRlID0gaQoKICAgIHJldHVybiB0dXBsZShyYW5nZXMpCgpkZWYgX2VuY29kZV9yYW5nZShzdGFydDogaW50LCBlbmQ6IGludCkgLT4gaW50OgogICAgcmV0dXJuIChzdGFydCA8PCAzMikgfCBlbmQKCmRlZiBfZGVjb2RlX3JhbmdlKHI6IGludCkgLT4gVHVwbGVbaW50LCBpbnRdOgogICAgcmV0dXJuIChyID4+IDMyKSwgKHIgJiAoKDEgPDwgMzIpIC0gMSkpCgoKZGVmIGludHJhbmdlc19jb250YWluKGludF86IGludCwgcmFuZ2VzOiBUdXBsZVtpbnQsIC4uLl0pIC0+IGJvb2w6CiAgICBcIlwiXCJEZXRlcm1pbmUgaWYgYGludF9gIGZhbGxzIGludG8gb25lIG9mIHRoZSByYW5nZXMgaW4gYHJhbmdlc2AuXCJcIlwiCiAgICB0dXBsZV8gPSBfZW5jb2RlX3JhbmdlKGludF8sIDApCiAgICBwb3MgPSBiaXNlY3QuYmlzZWN0X2xlZnQocmFuZ2VzLCB0dXBsZV8pCiAgICAjIHdlIGNvdWxkIGJlIGltbWVkaWF0ZWx5IGFoZWFkIG9mIGEgdHVwbGUgKHN0YXJ0LCBlbmQpCiAgICAjIHdpdGggc3RhcnQgPCBpbnRfIDw9IGVuZAogICAgaWYgcG9zID4gMDoKICAgICAgICBsZWZ0LCByaWdodCA9IF9kZWNvZGVfcmFuZ2UocmFuZ2VzW3Bvcy0xXSkKICAgICAgICBpZiBsZWZ0IDw9IGludF8gPCByaWdodDoKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICMgb3Igd2UgY291bGQgYmUgaW1tZWRpYXRlbHkgYmVoaW5kIGEgdHVwbGUgKGludF8sIGVuZCkKICAgIGlmIHBvcyA8IGxlbihyYW5nZXMpOgogICAgICAgIGxlZnQsIF8gPSBfZGVjb2RlX3JhbmdlKHJhbmdlc1twb3NdKQogICAgICAgIGlmIGxlZnQgPT0gaW50XzoKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgIHJldHVybiBGYWxzZQoKIiIiCm1vZHVsZV9kaWN0WyJpZG5hIitvcy5zZXArInBhY2thZ2VfZGF0YS5weSJdPSIiIgpfX3ZlcnNpb25fXyA9ICczLjMnCgoKIiIiCm1vZHVsZV9kaWN0WyJpZG5hIitvcy5zZXArIl9faW5pdF9fLnB5Il09IiIiCmZyb20gLnBhY2thZ2VfZGF0YSBpbXBvcnQgX192ZXJzaW9uX18KZnJvbSAuY29yZSBpbXBvcnQgKAogICAgSUROQUJpZGlFcnJvciwKICAgIElETkFFcnJvciwKICAgIEludmFsaWRDb2RlcG9pbnQsCiAgICBJbnZhbGlkQ29kZXBvaW50Q29udGV4dCwKICAgIGFsYWJlbCwKICAgIGNoZWNrX2JpZGksCiAgICBjaGVja19oeXBoZW5fb2ssCiAgICBjaGVja19pbml0aWFsX2NvbWJpbmVyLAogICAgY2hlY2tfbGFiZWwsCiAgICBjaGVja19uZmMsCiAgICBkZWNvZGUsCiAgICBlbmNvZGUsCiAgICB1bGFiZWwsCiAgICB1dHM0Nl9yZW1hcCwKICAgIHZhbGlkX2NvbnRleHRqLAogICAgdmFsaWRfY29udGV4dG8sCiAgICB2YWxpZF9sYWJlbF9sZW5ndGgsCiAgICB2YWxpZF9zdHJpbmdfbGVuZ3RoLAopCmZyb20gLmludHJhbmdlcyBpbXBvcnQgaW50cmFuZ2VzX2NvbnRhaW4KCl9fYWxsX18gPSBbCiAgICBcIklETkFCaWRpRXJyb3JcIiwKICAgIFwiSUROQUVycm9yXCIsCiAgICBcIkludmFsaWRDb2RlcG9pbnRcIiwKICAgIFwiSW52YWxpZENvZGVwb2ludENvbnRleHRcIiwKICAgIFwiYWxhYmVsXCIsCiAgICBcImNoZWNrX2JpZGlcIiwKICAgIFwiY2hlY2tfaHlwaGVuX29rXCIsCiAgICBcImNoZWNrX2luaXRpYWxfY29tYmluZXJcIiwKICAgIFwiY2hlY2tfbGFiZWxcIiwKICAgIFwiY2hlY2tfbmZjXCIsCiAgICBcImRlY29kZVwiLAogICAgXCJlbmNvZGVcIiwKICAgIFwiaW50cmFuZ2VzX2NvbnRhaW5cIiwKICAgIFwidWxhYmVsXCIsCiAgICBcInV0czQ2X3JlbWFwXCIsCiAgICBcInZhbGlkX2NvbnRleHRqXCIsCiAgICBcInZhbGlkX2NvbnRleHRvXCIsCiAgICBcInZhbGlkX2xhYmVsX2xlbmd0aFwiLAogICAgXCJ2YWxpZF9zdHJpbmdfbGVuZ3RoXCIsCl0KCiIiIgptb2R1bGVfZGljdFsiaWRuYSIrb3Muc2VwKyJjb2RlYy5weSJdPSIiIgpmcm9tIC5jb3JlIGltcG9ydCBlbmNvZGUsIGRlY29kZSwgYWxhYmVsLCB1bGFiZWwsIElETkFFcnJvcgppbXBvcnQgY29kZWNzCmltcG9ydCByZQpmcm9tIHR5cGluZyBpbXBvcnQgVHVwbGUsIE9wdGlvbmFsCgpfdW5pY29kZV9kb3RzX3JlID0gcmUuY29tcGlsZSgnW1xcdTAwMmVcXHUzMDAyXFx1ZmYwZVxcdWZmNjFdJykKCmNsYXNzIENvZGVjKGNvZGVjcy5Db2RlYyk6CgogICAgZGVmIGVuY29kZShzZWxmLCBkYXRhOiBzdHIsIGVycm9yczogc3RyID0gJ3N0cmljdCcpIC0+IFR1cGxlW2J5dGVzLCBpbnRdOgogICAgICAgIGlmIGVycm9ycyAhPSAnc3RyaWN0JzoKICAgICAgICAgICAgcmFpc2UgSUROQUVycm9yKCdVbnN1cHBvcnRlZCBlcnJvciBoYW5kbGluZyBcXFwie31cXFwiJy5mb3JtYXQoZXJyb3JzKSkKCiAgICAgICAgaWYgbm90IGRhdGE6CiAgICAgICAgICAgIHJldHVybiBiXCJcIiwgMAoKICAgICAgICByZXR1cm4gZW5jb2RlKGRhdGEpLCBsZW4oZGF0YSkKCiAgICBkZWYgZGVjb2RlKHNlbGYsIGRhdGE6IGJ5dGVzLCBlcnJvcnM6IHN0ciA9ICdzdHJpY3QnKSAtPiBUdXBsZVtzdHIsIGludF06CiAgICAgICAgaWYgZXJyb3JzICE9ICdzdHJpY3QnOgogICAgICAgICAgICByYWlzZSBJRE5BRXJyb3IoJ1Vuc3VwcG9ydGVkIGVycm9yIGhhbmRsaW5nIFxcXCJ7fVxcXCInLmZvcm1hdChlcnJvcnMpKQoKICAgICAgICBpZiBub3QgZGF0YToKICAgICAgICAgICAgcmV0dXJuICcnLCAwCgogICAgICAgIHJldHVybiBkZWNvZGUoZGF0YSksIGxlbihkYXRhKQoKY2xhc3MgSW5jcmVtZW50YWxFbmNvZGVyKGNvZGVjcy5CdWZmZXJlZEluY3JlbWVudGFsRW5jb2Rlcik6CiAgICBkZWYgX2J1ZmZlcl9lbmNvZGUoc2VsZiwgZGF0YTogc3RyLCBlcnJvcnM6IHN0ciwgZmluYWw6IGJvb2wpIC0+IFR1cGxlW3N0ciwgaW50XTogICMgdHlwZTogaWdub3JlCiAgICAgICAgaWYgZXJyb3JzICE9ICdzdHJpY3QnOgogICAgICAgICAgICByYWlzZSBJRE5BRXJyb3IoJ1Vuc3VwcG9ydGVkIGVycm9yIGhhbmRsaW5nIFxcXCJ7fVxcXCInLmZvcm1hdChlcnJvcnMpKQoKICAgICAgICBpZiBub3QgZGF0YToKICAgICAgICAgICAgcmV0dXJuIFwiXCIsIDAKCiAgICAgICAgbGFiZWxzID0gX3VuaWNvZGVfZG90c19yZS5zcGxpdChkYXRhKQogICAgICAgIHRyYWlsaW5nX2RvdCA9ICcnCiAgICAgICAgaWYgbGFiZWxzOgogICAgICAgICAgICBpZiBub3QgbGFiZWxzWy0xXToKICAgICAgICAgICAgICAgIHRyYWlsaW5nX2RvdCA9ICcuJwogICAgICAgICAgICAgICAgZGVsIGxhYmVsc1stMV0KICAgICAgICAgICAgZWxpZiBub3QgZmluYWw6CiAgICAgICAgICAgICAgICAjIEtlZXAgcG90ZW50aWFsbHkgdW5maW5pc2hlZCBsYWJlbCB1bnRpbCB0aGUgbmV4dCBjYWxsCiAgICAgICAgICAgICAgICBkZWwgbGFiZWxzWy0xXQogICAgICAgICAgICAgICAgaWYgbGFiZWxzOgogICAgICAgICAgICAgICAgICAgIHRyYWlsaW5nX2RvdCA9ICcuJwoKICAgICAgICByZXN1bHQgPSBbXQogICAgICAgIHNpemUgPSAwCiAgICAgICAgZm9yIGxhYmVsIGluIGxhYmVsczoKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChhbGFiZWwobGFiZWwpKQogICAgICAgICAgICBpZiBzaXplOgogICAgICAgICAgICAgICAgc2l6ZSArPSAxCiAgICAgICAgICAgIHNpemUgKz0gbGVuKGxhYmVsKQoKICAgICAgICAjIEpvaW4gd2l0aCBVKzAwMkUKICAgICAgICByZXN1bHRfc3RyID0gJy4nLmpvaW4ocmVzdWx0KSArIHRyYWlsaW5nX2RvdCAgIyB0eXBlOiBpZ25vcmUKICAgICAgICBzaXplICs9IGxlbih0cmFpbGluZ19kb3QpCiAgICAgICAgcmV0dXJuIHJlc3VsdF9zdHIsIHNpemUKCmNsYXNzIEluY3JlbWVudGFsRGVjb2Rlcihjb2RlY3MuQnVmZmVyZWRJbmNyZW1lbnRhbERlY29kZXIpOgogICAgZGVmIF9idWZmZXJfZGVjb2RlKHNlbGYsIGRhdGE6IHN0ciwgZXJyb3JzOiBzdHIsIGZpbmFsOiBib29sKSAtPiBUdXBsZVtzdHIsIGludF06ICAjIHR5cGU6IGlnbm9yZQogICAgICAgIGlmIGVycm9ycyAhPSAnc3RyaWN0JzoKICAgICAgICAgICAgcmFpc2UgSUROQUVycm9yKCdVbnN1cHBvcnRlZCBlcnJvciBoYW5kbGluZyBcXFwie31cXFwiJy5mb3JtYXQoZXJyb3JzKSkKCiAgICAgICAgaWYgbm90IGRhdGE6CiAgICAgICAgICAgIHJldHVybiAoJycsIDApCgogICAgICAgIGxhYmVscyA9IF91bmljb2RlX2RvdHNfcmUuc3BsaXQoZGF0YSkKICAgICAgICB0cmFpbGluZ19kb3QgPSAnJwogICAgICAgIGlmIGxhYmVsczoKICAgICAgICAgICAgaWYgbm90IGxhYmVsc1stMV06CiAgICAgICAgICAgICAgICB0cmFpbGluZ19kb3QgPSAnLicKICAgICAgICAgICAgICAgIGRlbCBsYWJlbHNbLTFdCiAgICAgICAgICAgIGVsaWYgbm90IGZpbmFsOgogICAgICAgICAgICAgICAgIyBLZWVwIHBvdGVudGlhbGx5IHVuZmluaXNoZWQgbGFiZWwgdW50aWwgdGhlIG5leHQgY2FsbAogICAgICAgICAgICAgICAgZGVsIGxhYmVsc1stMV0KICAgICAgICAgICAgICAgIGlmIGxhYmVsczoKICAgICAgICAgICAgICAgICAgICB0cmFpbGluZ19kb3QgPSAnLicKCiAgICAgICAgcmVzdWx0ID0gW10KICAgICAgICBzaXplID0gMAogICAgICAgIGZvciBsYWJlbCBpbiBsYWJlbHM6CiAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQodWxhYmVsKGxhYmVsKSkKICAgICAgICAgICAgaWYgc2l6ZToKICAgICAgICAgICAgICAgIHNpemUgKz0gMQogICAgICAgICAgICBzaXplICs9IGxlbihsYWJlbCkKCiAgICAgICAgcmVzdWx0X3N0ciA9ICcuJy5qb2luKHJlc3VsdCkgKyB0cmFpbGluZ19kb3QKICAgICAgICBzaXplICs9IGxlbih0cmFpbGluZ19kb3QpCiAgICAgICAgcmV0dXJuIChyZXN1bHRfc3RyLCBzaXplKQoKCmNsYXNzIFN0cmVhbVdyaXRlcihDb2RlYywgY29kZWNzLlN0cmVhbVdyaXRlcik6CiAgICBwYXNzCgoKY2xhc3MgU3RyZWFtUmVhZGVyKENvZGVjLCBjb2RlY3MuU3RyZWFtUmVhZGVyKToKICAgIHBhc3MKCgpkZWYgZ2V0cmVnZW50cnkoKSAtPiBjb2RlY3MuQ29kZWNJbmZvOgogICAgIyBDb21wYXRpYmlsaXR5IGFzIGEgc2VhcmNoX2Z1bmN0aW9uIGZvciBjb2RlY3MucmVnaXN0ZXIoKQogICAgcmV0dXJuIGNvZGVjcy5Db2RlY0luZm8oCiAgICAgICAgbmFtZT0naWRuYScsCiAgICAgICAgZW5jb2RlPUNvZGVjKCkuZW5jb2RlLCAgIyB0eXBlOiBpZ25vcmUKICAgICAgICBkZWNvZGU9Q29kZWMoKS5kZWNvZGUsICAjIHR5cGU6IGlnbm9yZQogICAgICAgIGluY3JlbWVudGFsZW5jb2Rlcj1JbmNyZW1lbnRhbEVuY29kZXIsCiAgICAgICAgaW5jcmVtZW50YWxkZWNvZGVyPUluY3JlbWVudGFsRGVjb2RlciwKICAgICAgICBzdHJlYW13cml0ZXI9U3RyZWFtV3JpdGVyLAogICAgICAgIHN0cmVhbXJlYWRlcj1TdHJlYW1SZWFkZXIsCiAgICApCgoiIiIKbW9kdWxlX2RpY3RbImlkbmEiK29zLnNlcCsiY29tcGF0LnB5Il09IiIiCmZyb20gLmNvcmUgaW1wb3J0ICoKZnJvbSAuY29kZWMgaW1wb3J0ICoKZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgVW5pb24KCmRlZiBUb0FTQ0lJKGxhYmVsOiBzdHIpIC0+IGJ5dGVzOgogICAgcmV0dXJuIGVuY29kZShsYWJlbCkKCmRlZiBUb1VuaWNvZGUobGFiZWw6IFVuaW9uW2J5dGVzLCBieXRlYXJyYXldKSAtPiBzdHI6CiAgICByZXR1cm4gZGVjb2RlKGxhYmVsKQoKZGVmIG5hbWVwcmVwKHM6IEFueSkgLT4gTm9uZToKICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IoJ0lETkEgMjAwOCBkb2VzIG5vdCB1dGlsaXNlIG5hbWVwcmVwIHByb3RvY29sJykKCgoiIiIKbW9kdWxlX2RpY3RbImlkbmEiK29zLnNlcCsiaWRuYWRhdGEucHkiXT0iIiIKIyBUaGlzIGZpbGUgaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnkgdG9vbHMvaWRuYS1kYXRhCgpfX3ZlcnNpb25fXyA9ICcxNC4wLjAnCnNjcmlwdHMgPSB7CiAgICAnR3JlZWsnOiAoCiAgICAgICAgMHgzNzAwMDAwMDM3NCwKICAgICAgICAweDM3NTAwMDAwMzc4LAogICAgICAgIDB4MzdhMDAwMDAzN2UsCiAgICAgICAgMHgzN2YwMDAwMDM4MCwKICAgICAgICAweDM4NDAwMDAwMzg1LAogICAgICAgIDB4Mzg2MDAwMDAzODcsCiAgICAgICAgMHgzODgwMDAwMDM4YiwKICAgICAgICAweDM4YzAwMDAwMzhkLAogICAgICAgIDB4MzhlMDAwMDAzYTIsCiAgICAgICAgMHgzYTMwMDAwMDNlMiwKICAgICAgICAweDNmMDAwMDAwNDAwLAogICAgICAgIDB4MWQyNjAwMDAxZDJiLAogICAgICAgIDB4MWQ1ZDAwMDAxZDYyLAogICAgICAgIDB4MWQ2NjAwMDAxZDZiLAogICAgICAgIDB4MWRiZjAwMDAxZGMwLAogICAgICAgIDB4MWYwMDAwMDAxZjE2LAogICAgICAgIDB4MWYxODAwMDAxZjFlLAogICAgICAgIDB4MWYyMDAwMDAxZjQ2LAogICAgICAgIDB4MWY0ODAwMDAxZjRlLAogICAgICAgIDB4MWY1MDAwMDAxZjU4LAogICAgICAgIDB4MWY1OTAwMDAxZjVhLAogICAgICAgIDB4MWY1YjAwMDAxZjVjLAogICAgICAgIDB4MWY1ZDAwMDAxZjVlLAogICAgICAgIDB4MWY1ZjAwMDAxZjdlLAogICAgICAgIDB4MWY4MDAwMDAxZmI1LAogICAgICAgIDB4MWZiNjAwMDAxZmM1LAogICAgICAgIDB4MWZjNjAwMDAxZmQ0LAogICAgICAgIDB4MWZkNjAwMDAxZmRjLAogICAgICAgIDB4MWZkZDAwMDAxZmYwLAogICAgICAgIDB4MWZmMjAwMDAxZmY1LAogICAgICAgIDB4MWZmNjAwMDAxZmZmLAogICAgICAgIDB4MjEyNjAwMDAyMTI3LAogICAgICAgIDB4YWI2NTAwMDBhYjY2LAogICAgICAgIDB4MTAxNDAwMDAxMDE4ZiwKICAgICAgICAweDEwMWEwMDAwMTAxYTEsCiAgICAgICAgMHgxZDIwMDAwMDFkMjQ2LAogICAgKSwKICAgICdIYW4nOiAoCiAgICAgICAgMHgyZTgwMDAwMDJlOWEsCiAgICAgICAgMHgyZTliMDAwMDJlZjQsCiAgICAgICAgMHgyZjAwMDAwMDJmZDYsCiAgICAgICAgMHgzMDA1MDAwMDMwMDYsCiAgICAgICAgMHgzMDA3MDAwMDMwMDgsCiAgICAgICAgMHgzMDIxMDAwMDMwMmEsCiAgICAgICAgMHgzMDM4MDAwMDMwM2MsCiAgICAgICAgMHgzNDAwMDAwMDRkYzAsCiAgICAgICAgMHg0ZTAwMDAwMGEwMDAsCiAgICAgICAgMHhmOTAwMDAwMGZhNmUsCiAgICAgICAgMHhmYTcwMDAwMGZhZGEsCiAgICAgICAgMHgxNmZlMjAwMDE2ZmU0LAogICAgICAgIDB4MTZmZjAwMDAxNmZmMiwKICAgICAgICAweDIwMDAwMDAwMmE2ZTAsCiAgICAgICAgMHgyYTcwMDAwMDJiNzM5LAogICAgICAgIDB4MmI3NDAwMDAyYjgxZSwKICAgICAgICAweDJiODIwMDAwMmNlYTIsCiAgICAgICAgMHgyY2ViMDAwMDJlYmUxLAogICAgICAgIDB4MmY4MDAwMDAyZmExZSwKICAgICAgICAweDMwMDAwMDAwMzEzNGIsCiAgICApLAogICAgJ0hlYnJldyc6ICgKICAgICAgICAweDU5MTAwMDAwNWM4LAogICAgICAgIDB4NWQwMDAwMDA1ZWIsCiAgICAgICAgMHg1ZWYwMDAwMDVmNSwKICAgICAgICAweGZiMWQwMDAwZmIzNywKICAgICAgICAweGZiMzgwMDAwZmIzZCwKICAgICAgICAweGZiM2UwMDAwZmIzZiwKICAgICAgICAweGZiNDAwMDAwZmI0MiwKICAgICAgICAweGZiNDMwMDAwZmI0NSwKICAgICAgICAweGZiNDYwMDAwZmI1MCwKICAgICksCiAgICAnSGlyYWdhbmEnOiAoCiAgICAgICAgMHgzMDQxMDAwMDMwOTcsCiAgICAgICAgMHgzMDlkMDAwMDMwYTAsCiAgICAgICAgMHgxYjAwMTAwMDFiMTIwLAogICAgICAgIDB4MWIxNTAwMDAxYjE1MywKICAgICAgICAweDFmMjAwMDAwMWYyMDEsCiAgICApLAogICAgJ0thdGFrYW5hJzogKAogICAgICAgIDB4MzBhMTAwMDAzMGZiLAogICAgICAgIDB4MzBmZDAwMDAzMTAwLAogICAgICAgIDB4MzFmMDAwMDAzMjAwLAogICAgICAgIDB4MzJkMDAwMDAzMmZmLAogICAgICAgIDB4MzMwMDAwMDAzMzU4LAogICAgICAgIDB4ZmY2NjAwMDBmZjcwLAogICAgICAgIDB4ZmY3MTAwMDBmZjllLAogICAgICAgIDB4MWFmZjAwMDAxYWZmNCwKICAgICAgICAweDFhZmY1MDAwMWFmZmMsCiAgICAgICAgMHgxYWZmZDAwMDFhZmZmLAogICAgICAgIDB4MWIwMDAwMDAxYjAwMSwKICAgICAgICAweDFiMTIwMDAwMWIxMjMsCiAgICAgICAgMHgxYjE2NDAwMDFiMTY4LAogICAgKSwKfQpqb2luaW5nX3R5cGVzID0gewogICAgMHg2MDA6IDg1LAogICAgMHg2MDE6IDg1LAogICAgMHg2MDI6IDg1LAogICAgMHg2MDM6IDg1LAogICAgMHg2MDQ6IDg1LAogICAgMHg2MDU6IDg1LAogICAgMHg2MDg6IDg1LAogICAgMHg2MGI6IDg1LAogICAgMHg2MjA6IDY4LAogICAgMHg2MjE6IDg1LAogICAgMHg2MjI6IDgyLAogICAgMHg2MjM6IDgyLAogICAgMHg2MjQ6IDgyLAogICAgMHg2MjU6IDgyLAogICAgMHg2MjY6IDY4LAogICAgMHg2Mjc6IDgyLAogICAgMHg2Mjg6IDY4LAogICAgMHg2Mjk6IDgyLAogICAgMHg2MmE6IDY4LAogICAgMHg2MmI6IDY4LAogICAgMHg2MmM6IDY4LAogICAgMHg2MmQ6IDY4LAogICAgMHg2MmU6IDY4LAogICAgMHg2MmY6IDgyLAogICAgMHg2MzA6IDgyLAogICAgMHg2MzE6IDgyLAogICAgMHg2MzI6IDgyLAogICAgMHg2MzM6IDY4LAogICAgMHg2MzQ6IDY4LAogICAgMHg2MzU6IDY4LAogICAgMHg2MzY6IDY4LAogICAgMHg2Mzc6IDY4LAogICAgMHg2Mzg6IDY4LAogICAgMHg2Mzk6IDY4LAogICAgMHg2M2E6IDY4LAogICAgMHg2M2I6IDY4LAogICAgMHg2M2M6IDY4LAogICAgMHg2M2Q6IDY4LAogICAgMHg2M2U6IDY4LAogICAgMHg2M2Y6IDY4LAogICAgMHg2NDA6IDY3LAogICAgMHg2NDE6IDY4LAogICAgMHg2NDI6IDY4LAogICAgMHg2NDM6IDY4LAogICAgMHg2NDQ6IDY4LAogICAgMHg2NDU6IDY4LAogICAgMHg2NDY6IDY4LAogICAgMHg2NDc6IDY4LAogICAgMHg2NDg6IDgyLAogICAgMHg2NDk6IDY4LAogICAgMHg2NGE6IDY4LAogICAgMHg2NmU6IDY4LAogICAgMHg2NmY6IDY4LAogICAgMHg2NzE6IDgyLAogICAgMHg2NzI6IDgyLAogICAgMHg2NzM6IDgyLAogICAgMHg2NzQ6IDg1LAogICAgMHg2NzU6IDgyLAogICAgMHg2NzY6IDgyLAogICAgMHg2Nzc6IDgyLAogICAgMHg2Nzg6IDY4LAogICAgMHg2Nzk6IDY4LAogICAgMHg2N2E6IDY4LAogICAgMHg2N2I6IDY4LAogICAgMHg2N2M6IDY4LAogICAgMHg2N2Q6IDY4LAogICAgMHg2N2U6IDY4LAogICAgMHg2N2Y6IDY4LAogICAgMHg2ODA6IDY4LAogICAgMHg2ODE6IDY4LAogICAgMHg2ODI6IDY4LAogICAgMHg2ODM6IDY4LAogICAgMHg2ODQ6IDY4LAogICAgMHg2ODU6IDY4LAogICAgMHg2ODY6IDY4LAogICAgMHg2ODc6IDY4LAogICAgMHg2ODg6IDgyLAogICAgMHg2ODk6IDgyLAogICAgMHg2OGE6IDgyLAogICAgMHg2OGI6IDgyLAogICAgMHg2OGM6IDgyLAogICAgMHg2OGQ6IDgyLAogICAgMHg2OGU6IDgyLAogICAgMHg2OGY6IDgyLAogICAgMHg2OTA6IDgyLAogICAgMHg2OTE6IDgyLAogICAgMHg2OTI6IDgyLAogICAgMHg2OTM6IDgyLAogICAgMHg2OTQ6IDgyLAogICAgMHg2OTU6IDgyLAogICAgMHg2OTY6IDgyLAogICAgMHg2OTc6IDgyLAogICAgMHg2OTg6IDgyLAogICAgMHg2OTk6IDgyLAogICAgMHg2OWE6IDY4LAogICAgMHg2OWI6IDY4LAogICAgMHg2OWM6IDY4LAogICAgMHg2OWQ6IDY4LAogICAgMHg2OWU6IDY4LAogICAgMHg2OWY6IDY4LAogICAgMHg2YTA6IDY4LAogICAgMHg2YTE6IDY4LAogICAgMHg2YTI6IDY4LAogICAgMHg2YTM6IDY4LAogICAgMHg2YTQ6IDY4LAogICAgMHg2YTU6IDY4LAogICAgMHg2YTY6IDY4LAogICAgMHg2YTc6IDY4LAogICAgMHg2YTg6IDY4LAogICAgMHg2YTk6IDY4LAogICAgMHg2YWE6IDY4LAogICAgMHg2YWI6IDY4LAogICAgMHg2YWM6IDY4LAogICAgMHg2YWQ6IDY4LAogICAgMHg2YWU6IDY4LAogICAgMHg2YWY6IDY4LAogICAgMHg2YjA6IDY4LAogICAgMHg2YjE6IDY4LAogICAgMHg2YjI6IDY4LAogICAgMHg2YjM6IDY4LAogICAgMHg2YjQ6IDY4LAogICAgMHg2YjU6IDY4LAogICAgMHg2YjY6IDY4LAogICAgMHg2Yjc6IDY4LAogICAgMHg2Yjg6IDY4LAogICAgMHg2Yjk6IDY4LAogICAgMHg2YmE6IDY4LAogICAgMHg2YmI6IDY4LAogICAgMHg2YmM6IDY4LAogICAgMHg2YmQ6IDY4LAogICAgMHg2YmU6IDY4LAogICAgMHg2YmY6IDY4LAogICAgMHg2YzA6IDgyLAogICAgMHg2YzE6IDY4LAogICAgMHg2YzI6IDY4LAogICAgMHg2YzM6IDgyLAogICAgMHg2YzQ6IDgyLAogICAgMHg2YzU6IDgyLAogICAgMHg2YzY6IDgyLAogICAgMHg2Yzc6IDgyLAogICAgMHg2Yzg6IDgyLAogICAgMHg2Yzk6IDgyLAogICAgMHg2Y2E6IDgyLAogICAgMHg2Y2I6IDgyLAogICAgMHg2Y2M6IDY4LAogICAgMHg2Y2Q6IDgyLAogICAgMHg2Y2U6IDY4LAogICAgMHg2Y2Y6IDgyLAogICAgMHg2ZDA6IDY4LAogICAgMHg2ZDE6IDY4LAogICAgMHg2ZDI6IDgyLAogICAgMHg2ZDM6IDgyLAogICAgMHg2ZDU6IDgyLAogICAgMHg2ZGQ6IDg1LAogICAgMHg2ZWU6IDgyLAogICAgMHg2ZWY6IDgyLAogICAgMHg2ZmE6IDY4LAogICAgMHg2ZmI6IDY4LAogICAgMHg2ZmM6IDY4LAogICAgMHg2ZmY6IDY4LAogICAgMHg3MGY6IDg0LAogICAgMHg3MTA6IDgyLAogICAgMHg3MTI6IDY4LAogICAgMHg3MTM6IDY4LAogICAgMHg3MTQ6IDY4LAogICAgMHg3MTU6IDgyLAogICAgMHg3MTY6IDgyLAogICAgMHg3MTc6IDgyLAogICAgMHg3MTg6IDgyLAogICAgMHg3MTk6IDgyLAogICAgMHg3MWE6IDY4LAogICAgMHg3MWI6IDY4LAogICAgMHg3MWM6IDY4LAogICAgMHg3MWQ6IDY4LAogICAgMHg3MWU6IDgyLAogICAgMHg3MWY6IDY4LAogICAgMHg3MjA6IDY4LAogICAgMHg3MjE6IDY4LAogICAgMHg3MjI6IDY4LAogICAgMHg3MjM6IDY4LAogICAgMHg3MjQ6IDY4LAogICAgMHg3MjU6IDY4LAogICAgMHg3MjY6IDY4LAogICAgMHg3Mjc6IDY4LAogICAgMHg3Mjg6IDgyLAogICAgMHg3Mjk6IDY4LAogICAgMHg3MmE6IDgyLAogICAgMHg3MmI6IDY4LAogICAgMHg3MmM6IDgyLAogICAgMHg3MmQ6IDY4LAogICAgMHg3MmU6IDY4LAogICAgMHg3MmY6IDgyLAogICAgMHg3NGQ6IDgyLAogICAgMHg3NGU6IDY4LAogICAgMHg3NGY6IDY4LAogICAgMHg3NTA6IDY4LAogICAgMHg3NTE6IDY4LAogICAgMHg3NTI6IDY4LAogICAgMHg3NTM6IDY4LAogICAgMHg3NTQ6IDY4LAogICAgMHg3NTU6IDY4LAogICAgMHg3NTY6IDY4LAogICAgMHg3NTc6IDY4LAogICAgMHg3NTg6IDY4LAogICAgMHg3NTk6IDgyLAogICAgMHg3NWE6IDgyLAogICAgMHg3NWI6IDgyLAogICAgMHg3NWM6IDY4LAogICAgMHg3NWQ6IDY4LAogICAgMHg3NWU6IDY4LAogICAgMHg3NWY6IDY4LAogICAgMHg3NjA6IDY4LAogICAgMHg3NjE6IDY4LAogICAgMHg3NjI6IDY4LAogICAgMHg3NjM6IDY4LAogICAgMHg3NjQ6IDY4LAogICAgMHg3NjU6IDY4LAogICAgMHg3NjY6IDY4LAogICAgMHg3Njc6IDY4LAogICAgMHg3Njg6IDY4LAogICAgMHg3Njk6IDY4LAogICAgMHg3NmE6IDY4LAogICAgMHg3NmI6IDgyLAogICAgMHg3NmM6IDgyLAogICAgMHg3NmQ6IDY4LAogICAgMHg3NmU6IDY4LAogICAgMHg3NmY6IDY4LAogICAgMHg3NzA6IDY4LAogICAgMHg3NzE6IDgyLAogICAgMHg3NzI6IDY4LAogICAgMHg3NzM6IDgyLAogICAgMHg3NzQ6IDgyLAogICAgMHg3NzU6IDY4LAogICAgMHg3NzY6IDY4LAogICAgMHg3Nzc6IDY4LAogICAgMHg3Nzg6IDgyLAogICAgMHg3Nzk6IDgyLAogICAgMHg3N2E6IDY4LAogICAgMHg3N2I6IDY4LAogICAgMHg3N2M6IDY4LAogICAgMHg3N2Q6IDY4LAogICAgMHg3N2U6IDY4LAogICAgMHg3N2Y6IDY4LAogICAgMHg3Y2E6IDY4LAogICAgMHg3Y2I6IDY4LAogICAgMHg3Y2M6IDY4LAogICAgMHg3Y2Q6IDY4LAogICAgMHg3Y2U6IDY4LAogICAgMHg3Y2Y6IDY4LAogICAgMHg3ZDA6IDY4LAogICAgMHg3ZDE6IDY4LAogICAgMHg3ZDI6IDY4LAogICAgMHg3ZDM6IDY4LAogICAgMHg3ZDQ6IDY4LAogICAgMHg3ZDU6IDY4LAogICAgMHg3ZDY6IDY4LAogICAgMHg3ZDc6IDY4LAogICAgMHg3ZDg6IDY4LAogICAgMHg3ZDk6IDY4LAogICAgMHg3ZGE6IDY4LAogICAgMHg3ZGI6IDY4LAogICAgMHg3ZGM6IDY4LAogICAgMHg3ZGQ6IDY4LAogICAgMHg3ZGU6IDY4LAogICAgMHg3ZGY6IDY4LAogICAgMHg3ZTA6IDY4LAogICAgMHg3ZTE6IDY4LAogICAgMHg3ZTI6IDY4LAogICAgMHg3ZTM6IDY4LAogICAgMHg3ZTQ6IDY4LAogICAgMHg3ZTU6IDY4LAogICAgMHg3ZTY6IDY4LAogICAgMHg3ZTc6IDY4LAogICAgMHg3ZTg6IDY4LAogICAgMHg3ZTk6IDY4LAogICAgMHg3ZWE6IDY4LAogICAgMHg3ZmE6IDY3LAogICAgMHg4NDA6IDgyLAogICAgMHg4NDE6IDY4LAogICAgMHg4NDI6IDY4LAogICAgMHg4NDM6IDY4LAogICAgMHg4NDQ6IDY4LAogICAgMHg4NDU6IDY4LAogICAgMHg4NDY6IDgyLAogICAgMHg4NDc6IDgyLAogICAgMHg4NDg6IDY4LAogICAgMHg4NDk6IDgyLAogICAgMHg4NGE6IDY4LAogICAgMHg4NGI6IDY4LAogICAgMHg4NGM6IDY4LAogICAgMHg4NGQ6IDY4LAogICAgMHg4NGU6IDY4LAogICAgMHg4NGY6IDY4LAogICAgMHg4NTA6IDY4LAogICAgMHg4NTE6IDY4LAogICAgMHg4NTI6IDY4LAogICAgMHg4NTM6IDY4LAogICAgMHg4NTQ6IDgyLAogICAgMHg4NTU6IDY4LAogICAgMHg4NTY6IDgyLAogICAgMHg4NTc6IDgyLAogICAgMHg4NTg6IDgyLAogICAgMHg4NjA6IDY4LAogICAgMHg4NjE6IDg1LAogICAgMHg4NjI6IDY4LAogICAgMHg4NjM6IDY4LAogICAgMHg4NjQ6IDY4LAogICAgMHg4NjU6IDY4LAogICAgMHg4NjY6IDg1LAogICAgMHg4Njc6IDgyLAogICAgMHg4Njg6IDY4LAogICAgMHg4Njk6IDgyLAogICAgMHg4NmE6IDgyLAogICAgMHg4NzA6IDgyLAogICAgMHg4NzE6IDgyLAogICAgMHg4NzI6IDgyLAogICAgMHg4NzM6IDgyLAogICAgMHg4NzQ6IDgyLAogICAgMHg4NzU6IDgyLAogICAgMHg4NzY6IDgyLAogICAgMHg4Nzc6IDgyLAogICAgMHg4Nzg6IDgyLAogICAgMHg4Nzk6IDgyLAogICAgMHg4N2E6IDgyLAogICAgMHg4N2I6IDgyLAogICAgMHg4N2M6IDgyLAogICAgMHg4N2Q6IDgyLAogICAgMHg4N2U6IDgyLAogICAgMHg4N2Y6IDgyLAogICAgMHg4ODA6IDgyLAogICAgMHg4ODE6IDgyLAogICAgMHg4ODI6IDgyLAogICAgMHg4ODM6IDY3LAogICAgMHg4ODQ6IDY3LAogICAgMHg4ODU6IDY3LAogICAgMHg4ODY6IDY4LAogICAgMHg4ODc6IDg1LAogICAgMHg4ODg6IDg1LAogICAgMHg4ODk6IDY4LAogICAgMHg4OGE6IDY4LAogICAgMHg4OGI6IDY4LAogICAgMHg4OGM6IDY4LAogICAgMHg4OGQ6IDY4LAogICAgMHg4OGU6IDgyLAogICAgMHg4OTA6IDg1LAogICAgMHg4OTE6IDg1LAogICAgMHg4YTA6IDY4LAogICAgMHg4YTE6IDY4LAogICAgMHg4YTI6IDY4LAogICAgMHg4YTM6IDY4LAogICAgMHg4YTQ6IDY4LAogICAgMHg4YTU6IDY4LAogICAgMHg4YTY6IDY4LAogICAgMHg4YTc6IDY4LAogICAgMHg4YTg6IDY4LAogICAgMHg4YTk6IDY4LAogICAgMHg4YWE6IDgyLAogICAgMHg4YWI6IDgyLAogICAgMHg4YWM6IDgyLAogICAgMHg4YWQ6IDg1LAogICAgMHg4YWU6IDgyLAogICAgMHg4YWY6IDY4LAogICAgMHg4YjA6IDY4LAogICAgMHg4YjE6IDgyLAogICAgMHg4YjI6IDgyLAogICAgMHg4YjM6IDY4LAogICAgMHg4YjQ6IDY4LAogICAgMHg4YjU6IDY4LAogICAgMHg4YjY6IDY4LAogICAgMHg4Yjc6IDY4LAogICAgMHg4Yjg6IDY4LAogICAgMHg4Yjk6IDgyLAogICAgMHg4YmE6IDY4LAogICAgMHg4YmI6IDY4LAogICAgMHg4YmM6IDY4LAogICAgMHg4YmQ6IDY4LAogICAgMHg4YmU6IDY4LAogICAgMHg4YmY6IDY4LAogICAgMHg4YzA6IDY4LAogICAgMHg4YzE6IDY4LAogICAgMHg4YzI6IDY4LAogICAgMHg4YzM6IDY4LAogICAgMHg4YzQ6IDY4LAogICAgMHg4YzU6IDY4LAogICAgMHg4YzY6IDY4LAogICAgMHg4Yzc6IDY4LAogICAgMHg4Yzg6IDY4LAogICAgMHg4ZTI6IDg1LAogICAgMHgxODA2OiA4NSwKICAgIDB4MTgwNzogNjgsCiAgICAweDE4MGE6IDY3LAogICAgMHgxODBlOiA4NSwKICAgIDB4MTgyMDogNjgsCiAgICAweDE4MjE6IDY4LAogICAgMHgxODIyOiA2OCwKICAgIDB4MTgyMzogNjgsCiAgICAweDE4MjQ6IDY4LAogICAgMHgxODI1OiA2OCwKICAgIDB4MTgyNjogNjgsCiAgICAweDE4Mjc6IDY4LAogICAgMHgxODI4OiA2OCwKICAgIDB4MTgyOTogNjgsCiAgICAweDE4MmE6IDY4LAogICAgMHgxODJiOiA2OCwKICAgIDB4MTgyYzogNjgsCiAgICAweDE4MmQ6IDY4LAogICAgMHgxODJlOiA2OCwKICAgIDB4MTgyZjogNjgsCiAgICAweDE4MzA6IDY4LAogICAgMHgxODMxOiA2OCwKICAgIDB4MTgzMjogNjgsCiAgICAweDE4MzM6IDY4LAogICAgMHgxODM0OiA2OCwKICAgIDB4MTgzNTogNjgsCiAgICAweDE4MzY6IDY4LAogICAgMHgxODM3OiA2OCwKICAgIDB4MTgzODogNjgsCiAgICAweDE4Mzk6IDY4LAogICAgMHgxODNhOiA2OCwKICAgIDB4MTgzYjogNjgsCiAgICAweDE4M2M6IDY4LAogICAgMHgxODNkOiA2OCwKICAgIDB4MTgzZTogNjgsCiAgICAweDE4M2Y6IDY4LAogICAgMHgxODQwOiA2OCwKICAgIDB4MTg0MTogNjgsCiAgICAweDE4NDI6IDY4LAogICAgMHgxODQzOiA2OCwKICAgIDB4MTg0NDogNjgsCiAgICAweDE4NDU6IDY4LAogICAgMHgxODQ2OiA2OCwKICAgIDB4MTg0NzogNjgsCiAgICAweDE4NDg6IDY4LAogICAgMHgxODQ5OiA2OCwKICAgIDB4MTg0YTogNjgsCiAgICAweDE4NGI6IDY4LAogICAgMHgxODRjOiA2OCwKICAgIDB4MTg0ZDogNjgsCiAgICAweDE4NGU6IDY4LAogICAgMHgxODRmOiA2OCwKICAgIDB4MTg1MDogNjgsCiAgICAweDE4NTE6IDY4LAogICAgMHgxODUyOiA2OCwKICAgIDB4MTg1MzogNjgsCiAgICAweDE4NTQ6IDY4LAogICAgMHgxODU1OiA2OCwKICAgIDB4MTg1NjogNjgsCiAgICAweDE4NTc6IDY4LAogICAgMHgxODU4OiA2OCwKICAgIDB4MTg1OTogNjgsCiAgICAweDE4NWE6IDY4LAogICAgMHgxODViOiA2OCwKICAgIDB4MTg1YzogNjgsCiAgICAweDE4NWQ6IDY4LAogICAgMHgxODVlOiA2OCwKICAgIDB4MTg1ZjogNjgsCiAgICAweDE4NjA6IDY4LAogICAgMHgxODYxOiA2OCwKICAgIDB4MTg2MjogNjgsCiAgICAweDE4NjM6IDY4LAogICAgMHgxODY0OiA2OCwKICAgIDB4MTg2NTogNjgsCiAgICAweDE4NjY6IDY4LAogICAgMHgxODY3OiA2OCwKICAgIDB4MTg2ODogNjgsCiAgICAweDE4Njk6IDY4LAogICAgMHgxODZhOiA2OCwKICAgIDB4MTg2YjogNjgsCiAgICAweDE4NmM6IDY4LAogICAgMHgxODZkOiA2OCwKICAgIDB4MTg2ZTogNjgsCiAgICAweDE4NmY6IDY4LAogICAgMHgxODcwOiA2OCwKICAgIDB4MTg3MTogNjgsCiAgICAweDE4NzI6IDY4LAogICAgMHgxODczOiA2OCwKICAgIDB4MTg3NDogNjgsCiAgICAweDE4NzU6IDY4LAogICAgMHgxODc2OiA2OCwKICAgIDB4MTg3NzogNjgsCiAgICAweDE4Nzg6IDY4LAogICAgMHgxODgwOiA4NSwKICAgIDB4MTg4MTogODUsCiAgICAweDE4ODI6IDg1LAogICAgMHgxODgzOiA4NSwKICAgIDB4MTg4NDogODUsCiAgICAweDE4ODU6IDg0LAogICAgMHgxODg2OiA4NCwKICAgIDB4MTg4NzogNjgsCiAgICAweDE4ODg6IDY4LAogICAgMHgxODg5OiA2OCwKICAgIDB4MTg4YTogNjgsCiAgICAweDE4OGI6IDY4LAogICAgMHgxODhjOiA2OCwKICAgIDB4MTg4ZDogNjgsCiAgICAweDE4OGU6IDY4LAogICAgMHgxODhmOiA2OCwKICAgIDB4MTg5MDogNjgsCiAgICAweDE4OTE6IDY4LAogICAgMHgxODkyOiA2OCwKICAgIDB4MTg5MzogNjgsCiAgICAweDE4OTQ6IDY4LAogICAgMHgxODk1OiA2OCwKICAgIDB4MTg5NjogNjgsCiAgICAweDE4OTc6IDY4LAogICAgMHgxODk4OiA2OCwKICAgIDB4MTg5OTogNjgsCiAgICAweDE4OWE6IDY4LAogICAgMHgxODliOiA2OCwKICAgIDB4MTg5YzogNjgsCiAgICAweDE4OWQ6IDY4LAogICAgMHgxODllOiA2OCwKICAgIDB4MTg5ZjogNjgsCiAgICAweDE4YTA6IDY4LAogICAgMHgxOGExOiA2OCwKICAgIDB4MThhMjogNjgsCiAgICAweDE4YTM6IDY4LAogICAgMHgxOGE0OiA2OCwKICAgIDB4MThhNTogNjgsCiAgICAweDE4YTY6IDY4LAogICAgMHgxOGE3OiA2OCwKICAgIDB4MThhODogNjgsCiAgICAweDE4YWE6IDY4LAogICAgMHgyMDBjOiA4NSwKICAgIDB4MjAwZDogNjcsCiAgICAweDIwMmY6IDg1LAogICAgMHgyMDY2OiA4NSwKICAgIDB4MjA2NzogODUsCiAgICAweDIwNjg6IDg1LAogICAgMHgyMDY5OiA4NSwKICAgIDB4YTg0MDogNjgsCiAgICAweGE4NDE6IDY4LAogICAgMHhhODQyOiA2OCwKICAgIDB4YTg0MzogNjgsCiAgICAweGE4NDQ6IDY4LAogICAgMHhhODQ1OiA2OCwKICAgIDB4YTg0NjogNjgsCiAgICAweGE4NDc6IDY4LAogICAgMHhhODQ4OiA2OCwKICAgIDB4YTg0OTogNjgsCiAgICAweGE4NGE6IDY4LAogICAgMHhhODRiOiA2OCwKICAgIDB4YTg0YzogNjgsCiAgICAweGE4NGQ6IDY4LAogICAgMHhhODRlOiA2OCwKICAgIDB4YTg0ZjogNjgsCiAgICAweGE4NTA6IDY4LAogICAgMHhhODUxOiA2OCwKICAgIDB4YTg1MjogNjgsCiAgICAweGE4NTM6IDY4LAogICAgMHhhODU0OiA2OCwKICAgIDB4YTg1NTogNjgsCiAgICAweGE4NTY6IDY4LAogICAgMHhhODU3OiA2OCwKICAgIDB4YTg1ODogNjgsCiAgICAweGE4NTk6IDY4LAogICAgMHhhODVhOiA2OCwKICAgIDB4YTg1YjogNjgsCiAgICAweGE4NWM6IDY4LAogICAgMHhhODVkOiA2OCwKICAgIDB4YTg1ZTogNjgsCiAgICAweGE4NWY6IDY4LAogICAgMHhhODYwOiA2OCwKICAgIDB4YTg2MTogNjgsCiAgICAweGE4NjI6IDY4LAogICAgMHhhODYzOiA2OCwKICAgIDB4YTg2NDogNjgsCiAgICAweGE4NjU6IDY4LAogICAgMHhhODY2OiA2OCwKICAgIDB4YTg2NzogNjgsCiAgICAweGE4Njg6IDY4LAogICAgMHhhODY5OiA2OCwKICAgIDB4YTg2YTogNjgsCiAgICAweGE4NmI6IDY4LAogICAgMHhhODZjOiA2OCwKICAgIDB4YTg2ZDogNjgsCiAgICAweGE4NmU6IDY4LAogICAgMHhhODZmOiA2OCwKICAgIDB4YTg3MDogNjgsCiAgICAweGE4NzE6IDY4LAogICAgMHhhODcyOiA3NiwKICAgIDB4YTg3MzogODUsCiAgICAweDEwYWMwOiA2OCwKICAgIDB4MTBhYzE6IDY4LAogICAgMHgxMGFjMjogNjgsCiAgICAweDEwYWMzOiA2OCwKICAgIDB4MTBhYzQ6IDY4LAogICAgMHgxMGFjNTogODIsCiAgICAweDEwYWM2OiA4NSwKICAgIDB4MTBhYzc6IDgyLAogICAgMHgxMGFjODogODUsCiAgICAweDEwYWM5OiA4MiwKICAgIDB4MTBhY2E6IDgyLAogICAgMHgxMGFjYjogODUsCiAgICAweDEwYWNjOiA4NSwKICAgIDB4MTBhY2Q6IDc2LAogICAgMHgxMGFjZTogODIsCiAgICAweDEwYWNmOiA4MiwKICAgIDB4MTBhZDA6IDgyLAogICAgMHgxMGFkMTogODIsCiAgICAweDEwYWQyOiA4MiwKICAgIDB4MTBhZDM6IDY4LAogICAgMHgxMGFkNDogNjgsCiAgICAweDEwYWQ1OiA2OCwKICAgIDB4MTBhZDY6IDY4LAogICAgMHgxMGFkNzogNzYsCiAgICAweDEwYWQ4OiA2OCwKICAgIDB4MTBhZDk6IDY4LAogICAgMHgxMGFkYTogNjgsCiAgICAweDEwYWRiOiA2OCwKICAgIDB4MTBhZGM6IDY4LAogICAgMHgxMGFkZDogODIsCiAgICAweDEwYWRlOiA2OCwKICAgIDB4MTBhZGY6IDY4LAogICAgMHgxMGFlMDogNjgsCiAgICAweDEwYWUxOiA4MiwKICAgIDB4MTBhZTI6IDg1LAogICAgMHgxMGFlMzogODUsCiAgICAweDEwYWU0OiA4MiwKICAgIDB4MTBhZWI6IDY4LAogICAgMHgxMGFlYzogNjgsCiAgICAweDEwYWVkOiA2OCwKICAgIDB4MTBhZWU6IDY4LAogICAgMHgxMGFlZjogODIsCiAgICAweDEwYjgwOiA2OCwKICAgIDB4MTBiODE6IDgyLAogICAgMHgxMGI4MjogNjgsCiAgICAweDEwYjgzOiA4MiwKICAgIDB4MTBiODQ6IDgyLAogICAgMHgxMGI4NTogODIsCiAgICAweDEwYjg2OiA2OCwKICAgIDB4MTBiODc6IDY4LAogICAgMHgxMGI4ODogNjgsCiAgICAweDEwYjg5OiA4MiwKICAgIDB4MTBiOGE6IDY4LAogICAgMHgxMGI4YjogNjgsCiAgICAweDEwYjhjOiA4MiwKICAgIDB4MTBiOGQ6IDY4LAogICAgMHgxMGI4ZTogODIsCiAgICAweDEwYjhmOiA4MiwKICAgIDB4MTBiOTA6IDY4LAogICAgMHgxMGI5MTogODIsCiAgICAweDEwYmE5OiA4MiwKICAgIDB4MTBiYWE6IDgyLAogICAgMHgxMGJhYjogODIsCiAgICAweDEwYmFjOiA4MiwKICAgIDB4MTBiYWQ6IDY4LAogICAgMHgxMGJhZTogNjgsCiAgICAweDEwYmFmOiA4NSwKICAgIDB4MTBkMDA6IDc2LAogICAgMHgxMGQwMTogNjgsCiAgICAweDEwZDAyOiA2OCwKICAgIDB4MTBkMDM6IDY4LAogICAgMHgxMGQwNDogNjgsCiAgICAweDEwZDA1OiA2OCwKICAgIDB4MTBkMDY6IDY4LAogICAgMHgxMGQwNzogNjgsCiAgICAweDEwZDA4OiA2OCwKICAgIDB4MTBkMDk6IDY4LAogICAgMHgxMGQwYTogNjgsCiAgICAweDEwZDBiOiA2OCwKICAgIDB4MTBkMGM6IDY4LAogICAgMHgxMGQwZDogNjgsCiAgICAweDEwZDBlOiA2OCwKICAgIDB4MTBkMGY6IDY4LAogICAgMHgxMGQxMDogNjgsCiAgICAweDEwZDExOiA2OCwKICAgIDB4MTBkMTI6IDY4LAogICAgMHgxMGQxMzogNjgsCiAgICAweDEwZDE0OiA2OCwKICAgIDB4MTBkMTU6IDY4LAogICAgMHgxMGQxNjogNjgsCiAgICAweDEwZDE3OiA2OCwKICAgIDB4MTBkMTg6IDY4LAogICAgMHgxMGQxOTogNjgsCiAgICAweDEwZDFhOiA2OCwKICAgIDB4MTBkMWI6IDY4LAogICAgMHgxMGQxYzogNjgsCiAgICAweDEwZDFkOiA2OCwKICAgIDB4MTBkMWU6IDY4LAogICAgMHgxMGQxZjogNjgsCiAgICAweDEwZDIwOiA2OCwKICAgIDB4MTBkMjE6IDY4LAogICAgMHgxMGQyMjogODIsCiAgICAweDEwZDIzOiA2OCwKICAgIDB4MTBmMzA6IDY4LAogICAgMHgxMGYzMTogNjgsCiAgICAweDEwZjMyOiA2OCwKICAgIDB4MTBmMzM6IDgyLAogICAgMHgxMGYzNDogNjgsCiAgICAweDEwZjM1OiA2OCwKICAgIDB4MTBmMzY6IDY4LAogICAgMHgxMGYzNzogNjgsCiAgICAweDEwZjM4OiA2OCwKICAgIDB4MTBmMzk6IDY4LAogICAgMHgxMGYzYTogNjgsCiAgICAweDEwZjNiOiA2OCwKICAgIDB4MTBmM2M6IDY4LAogICAgMHgxMGYzZDogNjgsCiAgICAweDEwZjNlOiA2OCwKICAgIDB4MTBmM2Y6IDY4LAogICAgMHgxMGY0MDogNjgsCiAgICAweDEwZjQxOiA2OCwKICAgIDB4MTBmNDI6IDY4LAogICAgMHgxMGY0MzogNjgsCiAgICAweDEwZjQ0OiA2OCwKICAgIDB4MTBmNDU6IDg1LAogICAgMHgxMGY1MTogNjgsCiAgICAweDEwZjUyOiA2OCwKICAgIDB4MTBmNTM6IDY4LAogICAgMHgxMGY1NDogODIsCiAgICAweDEwZjcwOiA2OCwKICAgIDB4MTBmNzE6IDY4LAogICAgMHgxMGY3MjogNjgsCiAgICAweDEwZjczOiA2OCwKICAgIDB4MTBmNzQ6IDgyLAogICAgMHgxMGY3NTogODIsCiAgICAweDEwZjc2OiA2OCwKICAgIDB4MTBmNzc6IDY4LAogICAgMHgxMGY3ODogNjgsCiAgICAweDEwZjc5OiA2OCwKICAgIDB4MTBmN2E6IDY4LAogICAgMHgxMGY3YjogNjgsCiAgICAweDEwZjdjOiA2OCwKICAgIDB4MTBmN2Q6IDY4LAogICAgMHgxMGY3ZTogNjgsCiAgICAweDEwZjdmOiA2OCwKICAgIDB4MTBmODA6IDY4LAogICAgMHgxMGY4MTogNjgsCiAgICAweDEwZmIwOiA2OCwKICAgIDB4MTBmYjE6IDg1LAogICAgMHgxMGZiMjogNjgsCiAgICAweDEwZmIzOiA2OCwKICAgIDB4MTBmYjQ6IDgyLAogICAgMHgxMGZiNTogODIsCiAgICAweDEwZmI2OiA4MiwKICAgIDB4MTBmYjc6IDg1LAogICAgMHgxMGZiODogNjgsCiAgICAweDEwZmI5OiA4MiwKICAgIDB4MTBmYmE6IDgyLAogICAgMHgxMGZiYjogNjgsCiAgICAweDEwZmJjOiA2OCwKICAgIDB4MTBmYmQ6IDgyLAogICAgMHgxMGZiZTogNjgsCiAgICAweDEwZmJmOiA2OCwKICAgIDB4MTBmYzA6IDg1LAogICAgMHgxMGZjMTogNjgsCiAgICAweDEwZmMyOiA4MiwKICAgIDB4MTBmYzM6IDgyLAogICAgMHgxMGZjNDogNjgsCiAgICAweDEwZmM1OiA4NSwKICAgIDB4MTBmYzY6IDg1LAogICAgMHgxMGZjNzogODUsCiAgICAweDEwZmM4OiA4NSwKICAgIDB4MTBmYzk6IDgyLAogICAgMHgxMGZjYTogNjgsCiAgICAweDEwZmNiOiA3NiwKICAgIDB4MTEwYmQ6IDg1LAogICAgMHgxMTBjZDogODUsCiAgICAweDFlOTAwOiA2OCwKICAgIDB4MWU5MDE6IDY4LAogICAgMHgxZTkwMjogNjgsCiAgICAweDFlOTAzOiA2OCwKICAgIDB4MWU5MDQ6IDY4LAogICAgMHgxZTkwNTogNjgsCiAgICAweDFlOTA2OiA2OCwKICAgIDB4MWU5MDc6IDY4LAogICAgMHgxZTkwODogNjgsCiAgICAweDFlOTA5OiA2OCwKICAgIDB4MWU5MGE6IDY4LAogICAgMHgxZTkwYjogNjgsCiAgICAweDFlOTBjOiA2OCwKICAgIDB4MWU5MGQ6IDY4LAogICAgMHgxZTkwZTogNjgsCiAgICAweDFlOTBmOiA2OCwKICAgIDB4MWU5MTA6IDY4LAogICAgMHgxZTkxMTogNjgsCiAgICAweDFlOTEyOiA2OCwKICAgIDB4MWU5MTM6IDY4LAogICAgMHgxZTkxNDogNjgsCiAgICAweDFlOTE1OiA2OCwKICAgIDB4MWU5MTY6IDY4LAogICAgMHgxZTkxNzogNjgsCiAgICAweDFlOTE4OiA2OCwKICAgIDB4MWU5MTk6IDY4LAogICAgMHgxZTkxYTogNjgsCiAgICAweDFlOTFiOiA2OCwKICAgIDB4MWU5MWM6IDY4LAogICAgMHgxZTkxZDogNjgsCiAgICAweDFlOTFlOiA2OCwKICAgIDB4MWU5MWY6IDY4LAogICAgMHgxZTkyMDogNjgsCiAgICAweDFlOTIxOiA2OCwKICAgIDB4MWU5MjI6IDY4LAogICAgMHgxZTkyMzogNjgsCiAgICAweDFlOTI0OiA2OCwKICAgIDB4MWU5MjU6IDY4LAogICAgMHgxZTkyNjogNjgsCiAgICAweDFlOTI3OiA2OCwKICAgIDB4MWU5Mjg6IDY4LAogICAgMHgxZTkyOTogNjgsCiAgICAweDFlOTJhOiA2OCwKICAgIDB4MWU5MmI6IDY4LAogICAgMHgxZTkyYzogNjgsCiAgICAweDFlOTJkOiA2OCwKICAgIDB4MWU5MmU6IDY4LAogICAgMHgxZTkyZjogNjgsCiAgICAweDFlOTMwOiA2OCwKICAgIDB4MWU5MzE6IDY4LAogICAgMHgxZTkzMjogNjgsCiAgICAweDFlOTMzOiA2OCwKICAgIDB4MWU5MzQ6IDY4LAogICAgMHgxZTkzNTogNjgsCiAgICAweDFlOTM2OiA2OCwKICAgIDB4MWU5Mzc6IDY4LAogICAgMHgxZTkzODogNjgsCiAgICAweDFlOTM5OiA2OCwKICAgIDB4MWU5M2E6IDY4LAogICAgMHgxZTkzYjogNjgsCiAgICAweDFlOTNjOiA2OCwKICAgIDB4MWU5M2Q6IDY4LAogICAgMHgxZTkzZTogNjgsCiAgICAweDFlOTNmOiA2OCwKICAgIDB4MWU5NDA6IDY4LAogICAgMHgxZTk0MTogNjgsCiAgICAweDFlOTQyOiA2OCwKICAgIDB4MWU5NDM6IDY4LAogICAgMHgxZTk0YjogODQsCn0KY29kZXBvaW50X2NsYXNzZXMgPSB7CiAgICAnUFZBTElEJzogKAogICAgICAgIDB4MmQwMDAwMDAyZSwKICAgICAgICAweDMwMDAwMDAwM2EsCiAgICAgICAgMHg2MTAwMDAwMDdiLAogICAgICAgIDB4ZGYwMDAwMDBmNywKICAgICAgICAweGY4MDAwMDAxMDAsCiAgICAgICAgMHgxMDEwMDAwMDEwMiwKICAgICAgICAweDEwMzAwMDAwMTA0LAogICAgICAgIDB4MTA1MDAwMDAxMDYsCiAgICAgICAgMHgxMDcwMDAwMDEwOCwKICAgICAgICAweDEwOTAwMDAwMTBhLAogICAgICAgIDB4MTBiMDAwMDAxMGMsCiAgICAgICAgMHgxMGQwMDAwMDEwZSwKICAgICAgICAweDEwZjAwMDAwMTEwLAogICAgICAgIDB4MTExMDAwMDAxMTIsCiAgICAgICAgMHgxMTMwMDAwMDExNCwKICAgICAgICAweDExNTAwMDAwMTE2LAogICAgICAgIDB4MTE3MDAwMDAxMTgsCiAgICAgICAgMHgxMTkwMDAwMDExYSwKICAgICAgICAweDExYjAwMDAwMTFjLAogICAgICAgIDB4MTFkMDAwMDAxMWUsCiAgICAgICAgMHgxMWYwMDAwMDEyMCwKICAgICAgICAweDEyMTAwMDAwMTIyLAogICAgICAgIDB4MTIzMDAwMDAxMjQsCiAgICAgICAgMHgxMjUwMDAwMDEyNiwKICAgICAgICAweDEyNzAwMDAwMTI4LAogICAgICAgIDB4MTI5MDAwMDAxMmEsCiAgICAgICAgMHgxMmIwMDAwMDEyYywKICAgICAgICAweDEyZDAwMDAwMTJlLAogICAgICAgIDB4MTJmMDAwMDAxMzAsCiAgICAgICAgMHgxMzEwMDAwMDEzMiwKICAgICAgICAweDEzNTAwMDAwMTM2LAogICAgICAgIDB4MTM3MDAwMDAxMzksCiAgICAgICAgMHgxM2EwMDAwMDEzYiwKICAgICAgICAweDEzYzAwMDAwMTNkLAogICAgICAgIDB4MTNlMDAwMDAxM2YsCiAgICAgICAgMHgxNDIwMDAwMDE0MywKICAgICAgICAweDE0NDAwMDAwMTQ1LAogICAgICAgIDB4MTQ2MDAwMDAxNDcsCiAgICAgICAgMHgxNDgwMDAwMDE0OSwKICAgICAgICAweDE0YjAwMDAwMTRjLAogICAgICAgIDB4MTRkMDAwMDAxNGUsCiAgICAgICAgMHgxNGYwMDAwMDE1MCwKICAgICAgICAweDE1MTAwMDAwMTUyLAogICAgICAgIDB4MTUzMDAwMDAxNTQsCiAgICAgICAgMHgxNTUwMDAwMDE1NiwKICAgICAgICAweDE1NzAwMDAwMTU4LAogICAgICAgIDB4MTU5MDAwMDAxNWEsCiAgICAgICAgMHgxNWIwMDAwMDE1YywKICAgICAgICAweDE1ZDAwMDAwMTVlLAogICAgICAgIDB4MTVmMDAwMDAxNjAsCiAgICAgICAgMHgxNjEwMDAwMDE2MiwKICAgICAgICAweDE2MzAwMDAwMTY0LAogICAgICAgIDB4MTY1MDAwMDAxNjYsCiAgICAgICAgMHgxNjcwMDAwMDE2OCwKICAgICAgICAweDE2OTAwMDAwMTZhLAogICAgICAgIDB4MTZiMDAwMDAxNmMsCiAgICAgICAgMHgxNmQwMDAwMDE2ZSwKICAgICAgICAweDE2ZjAwMDAwMTcwLAogICAgICAgIDB4MTcxMDAwMDAxNzIsCiAgICAgICAgMHgxNzMwMDAwMDE3NCwKICAgICAgICAweDE3NTAwMDAwMTc2LAogICAgICAgIDB4MTc3MDAwMDAxNzgsCiAgICAgICAgMHgxN2EwMDAwMDE3YiwKICAgICAgICAweDE3YzAwMDAwMTdkLAogICAgICAgIDB4MTdlMDAwMDAxN2YsCiAgICAgICAgMHgxODAwMDAwMDE4MSwKICAgICAgICAweDE4MzAwMDAwMTg0LAogICAgICAgIDB4MTg1MDAwMDAxODYsCiAgICAgICAgMHgxODgwMDAwMDE4OSwKICAgICAgICAweDE4YzAwMDAwMThlLAogICAgICAgIDB4MTkyMDAwMDAxOTMsCiAgICAgICAgMHgxOTUwMDAwMDE5NiwKICAgICAgICAweDE5OTAwMDAwMTljLAogICAgICAgIDB4MTllMDAwMDAxOWYsCiAgICAgICAgMHgxYTEwMDAwMDFhMiwKICAgICAgICAweDFhMzAwMDAwMWE0LAogICAgICAgIDB4MWE1MDAwMDAxYTYsCiAgICAgICAgMHgxYTgwMDAwMDFhOSwKICAgICAgICAweDFhYTAwMDAwMWFjLAogICAgICAgIDB4MWFkMDAwMDAxYWUsCiAgICAgICAgMHgxYjAwMDAwMDFiMSwKICAgICAgICAweDFiNDAwMDAwMWI1LAogICAgICAgIDB4MWI2MDAwMDAxYjcsCiAgICAgICAgMHgxYjkwMDAwMDFiYywKICAgICAgICAweDFiZDAwMDAwMWM0LAogICAgICAgIDB4MWNlMDAwMDAxY2YsCiAgICAgICAgMHgxZDAwMDAwMDFkMSwKICAgICAgICAweDFkMjAwMDAwMWQzLAogICAgICAgIDB4MWQ0MDAwMDAxZDUsCiAgICAgICAgMHgxZDYwMDAwMDFkNywKICAgICAgICAweDFkODAwMDAwMWQ5LAogICAgICAgIDB4MWRhMDAwMDAxZGIsCiAgICAgICAgMHgxZGMwMDAwMDFkZSwKICAgICAgICAweDFkZjAwMDAwMWUwLAogICAgICAgIDB4MWUxMDAwMDAxZTIsCiAgICAgICAgMHgxZTMwMDAwMDFlNCwKICAgICAgICAweDFlNTAwMDAwMWU2LAogICAgICAgIDB4MWU3MDAwMDAxZTgsCiAgICAgICAgMHgxZTkwMDAwMDFlYSwKICAgICAgICAweDFlYjAwMDAwMWVjLAogICAgICAgIDB4MWVkMDAwMDAxZWUsCiAgICAgICAgMHgxZWYwMDAwMDFmMSwKICAgICAgICAweDFmNTAwMDAwMWY2LAogICAgICAgIDB4MWY5MDAwMDAxZmEsCiAgICAgICAgMHgxZmIwMDAwMDFmYywKICAgICAgICAweDFmZDAwMDAwMWZlLAogICAgICAgIDB4MWZmMDAwMDAyMDAsCiAgICAgICAgMHgyMDEwMDAwMDIwMiwKICAgICAgICAweDIwMzAwMDAwMjA0LAogICAgICAgIDB4MjA1MDAwMDAyMDYsCiAgICAgICAgMHgyMDcwMDAwMDIwOCwKICAgICAgICAweDIwOTAwMDAwMjBhLAogICAgICAgIDB4MjBiMDAwMDAyMGMsCiAgICAgICAgMHgyMGQwMDAwMDIwZSwKICAgICAgICAweDIwZjAwMDAwMjEwLAogICAgICAgIDB4MjExMDAwMDAyMTIsCiAgICAgICAgMHgyMTMwMDAwMDIxNCwKICAgICAgICAweDIxNTAwMDAwMjE2LAogICAgICAgIDB4MjE3MDAwMDAyMTgsCiAgICAgICAgMHgyMTkwMDAwMDIxYSwKICAgICAgICAweDIxYjAwMDAwMjFjLAogICAgICAgIDB4MjFkMDAwMDAyMWUsCiAgICAgICAgMHgyMWYwMDAwMDIyMCwKICAgICAgICAweDIyMTAwMDAwMjIyLAogICAgICAgIDB4MjIzMDAwMDAyMjQsCiAgICAgICAgMHgyMjUwMDAwMDIyNiwKICAgICAgICAweDIyNzAwMDAwMjI4LAogICAgICAgIDB4MjI5MDAwMDAyMmEsCiAgICAgICAgMHgyMmIwMDAwMDIyYywKICAgICAgICAweDIyZDAwMDAwMjJlLAogICAgICAgIDB4MjJmMDAwMDAyMzAsCiAgICAgICAgMHgyMzEwMDAwMDIzMiwKICAgICAgICAweDIzMzAwMDAwMjNhLAogICAgICAgIDB4MjNjMDAwMDAyM2QsCiAgICAgICAgMHgyM2YwMDAwMDI0MSwKICAgICAgICAweDI0MjAwMDAwMjQzLAogICAgICAgIDB4MjQ3MDAwMDAyNDgsCiAgICAgICAgMHgyNDkwMDAwMDI0YSwKICAgICAgICAweDI0YjAwMDAwMjRjLAogICAgICAgIDB4MjRkMDAwMDAyNGUsCiAgICAgICAgMHgyNGYwMDAwMDJiMCwKICAgICAgICAweDJiOTAwMDAwMmMyLAogICAgICAgIDB4MmM2MDAwMDAyZDIsCiAgICAgICAgMHgyZWMwMDAwMDJlZCwKICAgICAgICAweDJlZTAwMDAwMmVmLAogICAgICAgIDB4MzAwMDAwMDAzNDAsCiAgICAgICAgMHgzNDIwMDAwMDM0MywKICAgICAgICAweDM0NjAwMDAwMzRmLAogICAgICAgIDB4MzUwMDAwMDAzNzAsCiAgICAgICAgMHgzNzEwMDAwMDM3MiwKICAgICAgICAweDM3MzAwMDAwMzc0LAogICAgICAgIDB4Mzc3MDAwMDAzNzgsCiAgICAgICAgMHgzN2IwMDAwMDM3ZSwKICAgICAgICAweDM5MDAwMDAwMzkxLAogICAgICAgIDB4M2FjMDAwMDAzY2YsCiAgICAgICAgMHgzZDcwMDAwMDNkOCwKICAgICAgICAweDNkOTAwMDAwM2RhLAogICAgICAgIDB4M2RiMDAwMDAzZGMsCiAgICAgICAgMHgzZGQwMDAwMDNkZSwKICAgICAgICAweDNkZjAwMDAwM2UwLAogICAgICAgIDB4M2UxMDAwMDAzZTIsCiAgICAgICAgMHgzZTMwMDAwMDNlNCwKICAgICAgICAweDNlNTAwMDAwM2U2LAogICAgICAgIDB4M2U3MDAwMDAzZTgsCiAgICAgICAgMHgzZTkwMDAwMDNlYSwKICAgICAgICAweDNlYjAwMDAwM2VjLAogICAgICAgIDB4M2VkMDAwMDAzZWUsCiAgICAgICAgMHgzZWYwMDAwMDNmMCwKICAgICAgICAweDNmMzAwMDAwM2Y0LAogICAgICAgIDB4M2Y4MDAwMDAzZjksCiAgICAgICAgMHgzZmIwMDAwMDNmZCwKICAgICAgICAweDQzMDAwMDAwNDYwLAogICAgICAgIDB4NDYxMDAwMDA0NjIsCiAgICAgICAgMHg0NjMwMDAwMDQ2NCwKICAgICAgICAweDQ2NTAwMDAwNDY2LAogICAgICAgIDB4NDY3MDAwMDA0NjgsCiAgICAgICAgMHg0NjkwMDAwMDQ2YSwKICAgICAgICAweDQ2YjAwMDAwNDZjLAogICAgICAgIDB4NDZkMDAwMDA0NmUsCiAgICAgICAgMHg0NmYwMDAwMDQ3MCwKICAgICAgICAweDQ3MTAwMDAwNDcyLAogICAgICAgIDB4NDczMDAwMDA0NzQsCiAgICAgICAgMHg0NzUwMDAwMDQ3NiwKICAgICAgICAweDQ3NzAwMDAwNDc4LAogICAgICAgIDB4NDc5MDAwMDA0N2EsCiAgICAgICAgMHg0N2IwMDAwMDQ3YywKICAgICAgICAweDQ3ZDAwMDAwNDdlLAogICAgICAgIDB4NDdmMDAwMDA0ODAsCiAgICAgICAgMHg0ODEwMDAwMDQ4MiwKICAgICAgICAweDQ4MzAwMDAwNDg4LAogICAgICAgIDB4NDhiMDAwMDA0OGMsCiAgICAgICAgMHg0OGQwMDAwMDQ4ZSwKICAgICAgICAweDQ4ZjAwMDAwNDkwLAogICAgICAgIDB4NDkxMDAwMDA0OTIsCiAgICAgICAgMHg0OTMwMDAwMDQ5NCwKICAgICAgICAweDQ5NTAwMDAwNDk2LAogICAgICAgIDB4NDk3MDAwMDA0OTgsCiAgICAgICAgMHg0OTkwMDAwMDQ5YSwKICAgICAgICAweDQ5YjAwMDAwNDljLAogICAgICAgIDB4NDlkMDAwMDA0OWUsCiAgICAgICAgMHg0OWYwMDAwMDRhMCwKICAgICAgICAweDRhMTAwMDAwNGEyLAogICAgICAgIDB4NGEzMDAwMDA0YTQsCiAgICAgICAgMHg0YTUwMDAwMDRhNiwKICAgICAgICAweDRhNzAwMDAwNGE4LAogICAgICAgIDB4NGE5MDAwMDA0YWEsCiAgICAgICAgMHg0YWIwMDAwMDRhYywKICAgICAgICAweDRhZDAwMDAwNGFlLAogICAgICAgIDB4NGFmMDAwMDA0YjAsCiAgICAgICAgMHg0YjEwMDAwMDRiMiwKICAgICAgICAweDRiMzAwMDAwNGI0LAogICAgICAgIDB4NGI1MDAwMDA0YjYsCiAgICAgICAgMHg0YjcwMDAwMDRiOCwKICAgICAgICAweDRiOTAwMDAwNGJhLAogICAgICAgIDB4NGJiMDAwMDA0YmMsCiAgICAgICAgMHg0YmQwMDAwMDRiZSwKICAgICAgICAweDRiZjAwMDAwNGMwLAogICAgICAgIDB4NGMyMDAwMDA0YzMsCiAgICAgICAgMHg0YzQwMDAwMDRjNSwKICAgICAgICAweDRjNjAwMDAwNGM3LAogICAgICAgIDB4NGM4MDAwMDA0YzksCiAgICAgICAgMHg0Y2EwMDAwMDRjYiwKICAgICAgICAweDRjYzAwMDAwNGNkLAogICAgICAgIDB4NGNlMDAwMDA0ZDAsCiAgICAgICAgMHg0ZDEwMDAwMDRkMiwKICAgICAgICAweDRkMzAwMDAwNGQ0LAogICAgICAgIDB4NGQ1MDAwMDA0ZDYsCiAgICAgICAgMHg0ZDcwMDAwMDRkOCwKICAgICAgICAweDRkOTAwMDAwNGRhLAogICAgICAgIDB4NGRiMDAwMDA0ZGMsCiAgICAgICAgMHg0ZGQwMDAwMDRkZSwKICAgICAgICAweDRkZjAwMDAwNGUwLAogICAgICAgIDB4NGUxMDAwMDA0ZTIsCiAgICAgICAgMHg0ZTMwMDAwMDRlNCwKICAgICAgICAweDRlNTAwMDAwNGU2LAogICAgICAgIDB4NGU3MDAwMDA0ZTgsCiAgICAgICAgMHg0ZTkwMDAwMDRlYSwKICAgICAgICAweDRlYjAwMDAwNGVjLAogICAgICAgIDB4NGVkMDAwMDA0ZWUsCiAgICAgICAgMHg0ZWYwMDAwMDRmMCwKICAgICAgICAweDRmMTAwMDAwNGYyLAogICAgICAgIDB4NGYzMDAwMDA0ZjQsCiAgICAgICAgMHg0ZjUwMDAwMDRmNiwKICAgICAgICAweDRmNzAwMDAwNGY4LAogICAgICAgIDB4NGY5MDAwMDA0ZmEsCiAgICAgICAgMHg0ZmIwMDAwMDRmYywKICAgICAgICAweDRmZDAwMDAwNGZlLAogICAgICAgIDB4NGZmMDAwMDA1MDAsCiAgICAgICAgMHg1MDEwMDAwMDUwMiwKICAgICAgICAweDUwMzAwMDAwNTA0LAogICAgICAgIDB4NTA1MDAwMDA1MDYsCiAgICAgICAgMHg1MDcwMDAwMDUwOCwKICAgICAgICAweDUwOTAwMDAwNTBhLAogICAgICAgIDB4NTBiMDAwMDA1MGMsCiAgICAgICAgMHg1MGQwMDAwMDUwZSwKICAgICAgICAweDUwZjAwMDAwNTEwLAogICAgICAgIDB4NTExMDAwMDA1MTIsCiAgICAgICAgMHg1MTMwMDAwMDUxNCwKICAgICAgICAweDUxNTAwMDAwNTE2LAogICAgICAgIDB4NTE3MDAwMDA1MTgsCiAgICAgICAgMHg1MTkwMDAwMDUxYSwKICAgICAgICAweDUxYjAwMDAwNTFjLAogICAgICAgIDB4NTFkMDAwMDA1MWUsCiAgICAgICAgMHg1MWYwMDAwMDUyMCwKICAgICAgICAweDUyMTAwMDAwNTIyLAogICAgICAgIDB4NTIzMDAwMDA1MjQsCiAgICAgICAgMHg1MjUwMDAwMDUyNiwKICAgICAgICAweDUyNzAwMDAwNTI4LAogICAgICAgIDB4NTI5MDAwMDA1MmEsCiAgICAgICAgMHg1MmIwMDAwMDUyYywKICAgICAgICAweDUyZDAwMDAwNTJlLAogICAgICAgIDB4NTJmMDAwMDA1MzAsCiAgICAgICAgMHg1NTkwMDAwMDU1YSwKICAgICAgICAweDU2MDAwMDAwNTg3LAogICAgICAgIDB4NTg4MDAwMDA1ODksCiAgICAgICAgMHg1OTEwMDAwMDViZSwKICAgICAgICAweDViZjAwMDAwNWMwLAogICAgICAgIDB4NWMxMDAwMDA1YzMsCiAgICAgICAgMHg1YzQwMDAwMDVjNiwKICAgICAgICAweDVjNzAwMDAwNWM4LAogICAgICAgIDB4NWQwMDAwMDA1ZWIsCiAgICAgICAgMHg1ZWYwMDAwMDVmMywKICAgICAgICAweDYxMDAwMDAwNjFiLAogICAgICAgIDB4NjIwMDAwMDA2NDAsCiAgICAgICAgMHg2NDEwMDAwMDY2MCwKICAgICAgICAweDY2ZTAwMDAwNjc1LAogICAgICAgIDB4Njc5MDAwMDA2ZDQsCiAgICAgICAgMHg2ZDUwMDAwMDZkZCwKICAgICAgICAweDZkZjAwMDAwNmU5LAogICAgICAgIDB4NmVhMDAwMDA2ZjAsCiAgICAgICAgMHg2ZmEwMDAwMDcwMCwKICAgICAgICAweDcxMDAwMDAwNzRiLAogICAgICAgIDB4NzRkMDAwMDA3YjIsCiAgICAgICAgMHg3YzAwMDAwMDdmNiwKICAgICAgICAweDdmZDAwMDAwN2ZlLAogICAgICAgIDB4ODAwMDAwMDA4MmUsCiAgICAgICAgMHg4NDAwMDAwMDg1YywKICAgICAgICAweDg2MDAwMDAwODZiLAogICAgICAgIDB4ODcwMDAwMDA4ODgsCiAgICAgICAgMHg4ODkwMDAwMDg4ZiwKICAgICAgICAweDg5ODAwMDAwOGUyLAogICAgICAgIDB4OGUzMDAwMDA5NTgsCiAgICAgICAgMHg5NjAwMDAwMDk2NCwKICAgICAgICAweDk2NjAwMDAwOTcwLAogICAgICAgIDB4OTcxMDAwMDA5ODQsCiAgICAgICAgMHg5ODUwMDAwMDk4ZCwKICAgICAgICAweDk4ZjAwMDAwOTkxLAogICAgICAgIDB4OTkzMDAwMDA5YTksCiAgICAgICAgMHg5YWEwMDAwMDliMSwKICAgICAgICAweDliMjAwMDAwOWIzLAogICAgICAgIDB4OWI2MDAwMDA5YmEsCiAgICAgICAgMHg5YmMwMDAwMDljNSwKICAgICAgICAweDljNzAwMDAwOWM5LAogICAgICAgIDB4OWNiMDAwMDA5Y2YsCiAgICAgICAgMHg5ZDcwMDAwMDlkOCwKICAgICAgICAweDllMDAwMDAwOWU0LAogICAgICAgIDB4OWU2MDAwMDA5ZjIsCiAgICAgICAgMHg5ZmMwMDAwMDlmZCwKICAgICAgICAweDlmZTAwMDAwOWZmLAogICAgICAgIDB4YTAxMDAwMDBhMDQsCiAgICAgICAgMHhhMDUwMDAwMGEwYiwKICAgICAgICAweGEwZjAwMDAwYTExLAogICAgICAgIDB4YTEzMDAwMDBhMjksCiAgICAgICAgMHhhMmEwMDAwMGEzMSwKICAgICAgICAweGEzMjAwMDAwYTMzLAogICAgICAgIDB4YTM1MDAwMDBhMzYsCiAgICAgICAgMHhhMzgwMDAwMGEzYSwKICAgICAgICAweGEzYzAwMDAwYTNkLAogICAgICAgIDB4YTNlMDAwMDBhNDMsCiAgICAgICAgMHhhNDcwMDAwMGE0OSwKICAgICAgICAweGE0YjAwMDAwYTRlLAogICAgICAgIDB4YTUxMDAwMDBhNTIsCiAgICAgICAgMHhhNWMwMDAwMGE1ZCwKICAgICAgICAweGE2NjAwMDAwYTc2LAogICAgICAgIDB4YTgxMDAwMDBhODQsCiAgICAgICAgMHhhODUwMDAwMGE4ZSwKICAgICAgICAweGE4ZjAwMDAwYTkyLAogICAgICAgIDB4YTkzMDAwMDBhYTksCiAgICAgICAgMHhhYWEwMDAwMGFiMSwKICAgICAgICAweGFiMjAwMDAwYWI0LAogICAgICAgIDB4YWI1MDAwMDBhYmEsCiAgICAgICAgMHhhYmMwMDAwMGFjNiwKICAgICAgICAweGFjNzAwMDAwYWNhLAogICAgICAgIDB4YWNiMDAwMDBhY2UsCiAgICAgICAgMHhhZDAwMDAwMGFkMSwKICAgICAgICAweGFlMDAwMDAwYWU0LAogICAgICAgIDB4YWU2MDAwMDBhZjAsCiAgICAgICAgMHhhZjkwMDAwMGIwMCwKICAgICAgICAweGIwMTAwMDAwYjA0LAogICAgICAgIDB4YjA1MDAwMDBiMGQsCiAgICAgICAgMHhiMGYwMDAwMGIxMSwKICAgICAgICAweGIxMzAwMDAwYjI5LAogICAgICAgIDB4YjJhMDAwMDBiMzEsCiAgICAgICAgMHhiMzIwMDAwMGIzNCwKICAgICAgICAweGIzNTAwMDAwYjNhLAogICAgICAgIDB4YjNjMDAwMDBiNDUsCiAgICAgICAgMHhiNDcwMDAwMGI0OSwKICAgICAgICAweGI0YjAwMDAwYjRlLAogICAgICAgIDB4YjU1MDAwMDBiNTgsCiAgICAgICAgMHhiNWYwMDAwMGI2NCwKICAgICAgICAweGI2NjAwMDAwYjcwLAogICAgICAgIDB4YjcxMDAwMDBiNzIsCiAgICAgICAgMHhiODIwMDAwMGI4NCwKICAgICAgICAweGI4NTAwMDAwYjhiLAogICAgICAgIDB4YjhlMDAwMDBiOTEsCiAgICAgICAgMHhiOTIwMDAwMGI5NiwKICAgICAgICAweGI5OTAwMDAwYjliLAogICAgICAgIDB4YjljMDAwMDBiOWQsCiAgICAgICAgMHhiOWUwMDAwMGJhMCwKICAgICAgICAweGJhMzAwMDAwYmE1LAogICAgICAgIDB4YmE4MDAwMDBiYWIsCiAgICAgICAgMHhiYWUwMDAwMGJiYSwKICAgICAgICAweGJiZTAwMDAwYmMzLAogICAgICAgIDB4YmM2MDAwMDBiYzksCiAgICAgICAgMHhiY2EwMDAwMGJjZSwKICAgICAgICAweGJkMDAwMDAwYmQxLAogICAgICAgIDB4YmQ3MDAwMDBiZDgsCiAgICAgICAgMHhiZTYwMDAwMGJmMCwKICAgICAgICAweGMwMDAwMDAwYzBkLAogICAgICAgIDB4YzBlMDAwMDBjMTEsCiAgICAgICAgMHhjMTIwMDAwMGMyOSwKICAgICAgICAweGMyYTAwMDAwYzNhLAogICAgICAgIDB4YzNjMDAwMDBjNDUsCiAgICAgICAgMHhjNDYwMDAwMGM0OSwKICAgICAgICAweGM0YTAwMDAwYzRlLAogICAgICAgIDB4YzU1MDAwMDBjNTcsCiAgICAgICAgMHhjNTgwMDAwMGM1YiwKICAgICAgICAweGM1ZDAwMDAwYzVlLAogICAgICAgIDB4YzYwMDAwMDBjNjQsCiAgICAgICAgMHhjNjYwMDAwMGM3MCwKICAgICAgICAweGM4MDAwMDAwYzg0LAogICAgICAgIDB4Yzg1MDAwMDBjOGQsCiAgICAgICAgMHhjOGUwMDAwMGM5MSwKICAgICAgICAweGM5MjAwMDAwY2E5LAogICAgICAgIDB4Y2FhMDAwMDBjYjQsCiAgICAgICAgMHhjYjUwMDAwMGNiYSwKICAgICAgICAweGNiYzAwMDAwY2M1LAogICAgICAgIDB4Y2M2MDAwMDBjYzksCiAgICAgICAgMHhjY2EwMDAwMGNjZSwKICAgICAgICAweGNkNTAwMDAwY2Q3LAogICAgICAgIDB4Y2RkMDAwMDBjZGYsCiAgICAgICAgMHhjZTAwMDAwMGNlNCwKICAgICAgICAweGNlNjAwMDAwY2YwLAogICAgICAgIDB4Y2YxMDAwMDBjZjMsCiAgICAgICAgMHhkMDAwMDAwMGQwZCwKICAgICAgICAweGQwZTAwMDAwZDExLAogICAgICAgIDB4ZDEyMDAwMDBkNDUsCiAgICAgICAgMHhkNDYwMDAwMGQ0OSwKICAgICAgICAweGQ0YTAwMDAwZDRmLAogICAgICAgIDB4ZDU0MDAwMDBkNTgsCiAgICAgICAgMHhkNWYwMDAwMGQ2NCwKICAgICAgICAweGQ2NjAwMDAwZDcwLAogICAgICAgIDB4ZDdhMDAwMDBkODAsCiAgICAgICAgMHhkODEwMDAwMGQ4NCwKICAgICAgICAweGQ4NTAwMDAwZDk3LAogICAgICAgIDB4ZDlhMDAwMDBkYjIsCiAgICAgICAgMHhkYjMwMDAwMGRiYywKICAgICAgICAweGRiZDAwMDAwZGJlLAogICAgICAgIDB4ZGMwMDAwMDBkYzcsCiAgICAgICAgMHhkY2EwMDAwMGRjYiwKICAgICAgICAweGRjZjAwMDAwZGQ1LAogICAgICAgIDB4ZGQ2MDAwMDBkZDcsCiAgICAgICAgMHhkZDgwMDAwMGRlMCwKICAgICAgICAweGRlNjAwMDAwZGYwLAogICAgICAgIDB4ZGYyMDAwMDBkZjQsCiAgICAgICAgMHhlMDEwMDAwMGUzMywKICAgICAgICAweGUzNDAwMDAwZTNiLAogICAgICAgIDB4ZTQwMDAwMDBlNGYsCiAgICAgICAgMHhlNTAwMDAwMGU1YSwKICAgICAgICAweGU4MTAwMDAwZTgzLAogICAgICAgIDB4ZTg0MDAwMDBlODUsCiAgICAgICAgMHhlODYwMDAwMGU4YiwKICAgICAgICAweGU4YzAwMDAwZWE0LAogICAgICAgIDB4ZWE1MDAwMDBlYTYsCiAgICAgICAgMHhlYTcwMDAwMGViMywKICAgICAgICAweGViNDAwMDAwZWJlLAogICAgICAgIDB4ZWMwMDAwMDBlYzUsCiAgICAgICAgMHhlYzYwMDAwMGVjNywKICAgICAgICAweGVjODAwMDAwZWNlLAogICAgICAgIDB4ZWQwMDAwMDBlZGEsCiAgICAgICAgMHhlZGUwMDAwMGVlMCwKICAgICAgICAweGYwMDAwMDAwZjAxLAogICAgICAgIDB4ZjBiMDAwMDBmMGMsCiAgICAgICAgMHhmMTgwMDAwMGYxYSwKICAgICAgICAweGYyMDAwMDAwZjJhLAogICAgICAgIDB4ZjM1MDAwMDBmMzYsCiAgICAgICAgMHhmMzcwMDAwMGYzOCwKICAgICAgICAweGYzOTAwMDAwZjNhLAogICAgICAgIDB4ZjNlMDAwMDBmNDMsCiAgICAgICAgMHhmNDQwMDAwMGY0OCwKICAgICAgICAweGY0OTAwMDAwZjRkLAogICAgICAgIDB4ZjRlMDAwMDBmNTIsCiAgICAgICAgMHhmNTMwMDAwMGY1NywKICAgICAgICAweGY1ODAwMDAwZjVjLAogICAgICAgIDB4ZjVkMDAwMDBmNjksCiAgICAgICAgMHhmNmEwMDAwMGY2ZCwKICAgICAgICAweGY3MTAwMDAwZjczLAogICAgICAgIDB4Zjc0MDAwMDBmNzUsCiAgICAgICAgMHhmN2EwMDAwMGY4MSwKICAgICAgICAweGY4MjAwMDAwZjg1LAogICAgICAgIDB4Zjg2MDAwMDBmOTMsCiAgICAgICAgMHhmOTQwMDAwMGY5OCwKICAgICAgICAweGY5OTAwMDAwZjlkLAogICAgICAgIDB4ZjllMDAwMDBmYTIsCiAgICAgICAgMHhmYTMwMDAwMGZhNywKICAgICAgICAweGZhODAwMDAwZmFjLAogICAgICAgIDB4ZmFkMDAwMDBmYjksCiAgICAgICAgMHhmYmEwMDAwMGZiZCwKICAgICAgICAweGZjNjAwMDAwZmM3LAogICAgICAgIDB4MTAwMDAwMDAxMDRhLAogICAgICAgIDB4MTA1MDAwMDAxMDllLAogICAgICAgIDB4MTBkMDAwMDAxMGZiLAogICAgICAgIDB4MTBmZDAwMDAxMTAwLAogICAgICAgIDB4MTIwMDAwMDAxMjQ5LAogICAgICAgIDB4MTI0YTAwMDAxMjRlLAogICAgICAgIDB4MTI1MDAwMDAxMjU3LAogICAgICAgIDB4MTI1ODAwMDAxMjU5LAogICAgICAgIDB4MTI1YTAwMDAxMjVlLAogICAgICAgIDB4MTI2MDAwMDAxMjg5LAogICAgICAgIDB4MTI4YTAwMDAxMjhlLAogICAgICAgIDB4MTI5MDAwMDAxMmIxLAogICAgICAgIDB4MTJiMjAwMDAxMmI2LAogICAgICAgIDB4MTJiODAwMDAxMmJmLAogICAgICAgIDB4MTJjMDAwMDAxMmMxLAogICAgICAgIDB4MTJjMjAwMDAxMmM2LAogICAgICAgIDB4MTJjODAwMDAxMmQ3LAogICAgICAgIDB4MTJkODAwMDAxMzExLAogICAgICAgIDB4MTMxMjAwMDAxMzE2LAogICAgICAgIDB4MTMxODAwMDAxMzViLAogICAgICAgIDB4MTM1ZDAwMDAxMzYwLAogICAgICAgIDB4MTM4MDAwMDAxMzkwLAogICAgICAgIDB4MTNhMDAwMDAxM2Y2LAogICAgICAgIDB4MTQwMTAwMDAxNjZkLAogICAgICAgIDB4MTY2ZjAwMDAxNjgwLAogICAgICAgIDB4MTY4MTAwMDAxNjliLAogICAgICAgIDB4MTZhMDAwMDAxNmViLAogICAgICAgIDB4MTZmMTAwMDAxNmY5LAogICAgICAgIDB4MTcwMDAwMDAxNzE2LAogICAgICAgIDB4MTcxZjAwMDAxNzM1LAogICAgICAgIDB4MTc0MDAwMDAxNzU0LAogICAgICAgIDB4MTc2MDAwMDAxNzZkLAogICAgICAgIDB4MTc2ZTAwMDAxNzcxLAogICAgICAgIDB4MTc3MjAwMDAxNzc0LAogICAgICAgIDB4MTc4MDAwMDAxN2I0LAogICAgICAgIDB4MTdiNjAwMDAxN2Q0LAogICAgICAgIDB4MTdkNzAwMDAxN2Q4LAogICAgICAgIDB4MTdkYzAwMDAxN2RlLAogICAgICAgIDB4MTdlMDAwMDAxN2VhLAogICAgICAgIDB4MTgxMDAwMDAxODFhLAogICAgICAgIDB4MTgyMDAwMDAxODc5LAogICAgICAgIDB4MTg4MDAwMDAxOGFiLAogICAgICAgIDB4MThiMDAwMDAxOGY2LAogICAgICAgIDB4MTkwMDAwMDAxOTFmLAogICAgICAgIDB4MTkyMDAwMDAxOTJjLAogICAgICAgIDB4MTkzMDAwMDAxOTNjLAogICAgICAgIDB4MTk0NjAwMDAxOTZlLAogICAgICAgIDB4MTk3MDAwMDAxOTc1LAogICAgICAgIDB4MTk4MDAwMDAxOWFjLAogICAgICAgIDB4MTliMDAwMDAxOWNhLAogICAgICAgIDB4MTlkMDAwMDAxOWRhLAogICAgICAgIDB4MWEwMDAwMDAxYTFjLAogICAgICAgIDB4MWEyMDAwMDAxYTVmLAogICAgICAgIDB4MWE2MDAwMDAxYTdkLAogICAgICAgIDB4MWE3ZjAwMDAxYThhLAogICAgICAgIDB4MWE5MDAwMDAxYTlhLAogICAgICAgIDB4MWFhNzAwMDAxYWE4LAogICAgICAgIDB4MWFiMDAwMDAxYWJlLAogICAgICAgIDB4MWFiZjAwMDAxYWNmLAogICAgICAgIDB4MWIwMDAwMDAxYjRkLAogICAgICAgIDB4MWI1MDAwMDAxYjVhLAogICAgICAgIDB4MWI2YjAwMDAxYjc0LAogICAgICAgIDB4MWI4MDAwMDAxYmY0LAogICAgICAgIDB4MWMwMDAwMDAxYzM4LAogICAgICAgIDB4MWM0MDAwMDAxYzRhLAogICAgICAgIDB4MWM0ZDAwMDAxYzdlLAogICAgICAgIDB4MWNkMDAwMDAxY2QzLAogICAgICAgIDB4MWNkNDAwMDAxY2ZiLAogICAgICAgIDB4MWQwMDAwMDAxZDJjLAogICAgICAgIDB4MWQyZjAwMDAxZDMwLAogICAgICAgIDB4MWQzYjAwMDAxZDNjLAogICAgICAgIDB4MWQ0ZTAwMDAxZDRmLAogICAgICAgIDB4MWQ2YjAwMDAxZDc4LAogICAgICAgIDB4MWQ3OTAwMDAxZDliLAogICAgICAgIDB4MWRjMDAwMDAxZTAwLAogICAgICAgIDB4MWUwMTAwMDAxZTAyLAogICAgICAgIDB4MWUwMzAwMDAxZTA0LAogICAgICAgIDB4MWUwNTAwMDAxZTA2LAogICAgICAgIDB4MWUwNzAwMDAxZTA4LAogICAgICAgIDB4MWUwOTAwMDAxZTBhLAogICAgICAgIDB4MWUwYjAwMDAxZTBjLAogICAgICAgIDB4MWUwZDAwMDAxZTBlLAogICAgICAgIDB4MWUwZjAwMDAxZTEwLAogICAgICAgIDB4MWUxMTAwMDAxZTEyLAogICAgICAgIDB4MWUxMzAwMDAxZTE0LAogICAgICAgIDB4MWUxNTAwMDAxZTE2LAogICAgICAgIDB4MWUxNzAwMDAxZTE4LAogICAgICAgIDB4MWUxOTAwMDAxZTFhLAogICAgICAgIDB4MWUxYjAwMDAxZTFjLAogICAgICAgIDB4MWUxZDAwMDAxZTFlLAogICAgICAgIDB4MWUxZjAwMDAxZTIwLAogICAgICAgIDB4MWUyMTAwMDAxZTIyLAogICAgICAgIDB4MWUyMzAwMDAxZTI0LAogICAgICAgIDB4MWUyNTAwMDAxZTI2LAogICAgICAgIDB4MWUyNzAwMDAxZTI4LAogICAgICAgIDB4MWUyOTAwMDAxZTJhLAogICAgICAgIDB4MWUyYjAwMDAxZTJjLAogICAgICAgIDB4MWUyZDAwMDAxZTJlLAogICAgICAgIDB4MWUyZjAwMDAxZTMwLAogICAgICAgIDB4MWUzMTAwMDAxZTMyLAogICAgICAgIDB4MWUzMzAwMDAxZTM0LAogICAgICAgIDB4MWUzNTAwMDAxZTM2LAogICAgICAgIDB4MWUzNzAwMDAxZTM4LAogICAgICAgIDB4MWUzOTAwMDAxZTNhLAogICAgICAgIDB4MWUzYjAwMDAxZTNjLAogICAgICAgIDB4MWUzZDAwMDAxZTNlLAogICAgICAgIDB4MWUzZjAwMDAxZTQwLAogICAgICAgIDB4MWU0MTAwMDAxZTQyLAogICAgICAgIDB4MWU0MzAwMDAxZTQ0LAogICAgICAgIDB4MWU0NTAwMDAxZTQ2LAogICAgICAgIDB4MWU0NzAwMDAxZTQ4LAogICAgICAgIDB4MWU0OTAwMDAxZTRhLAogICAgICAgIDB4MWU0YjAwMDAxZTRjLAogICAgICAgIDB4MWU0ZDAwMDAxZTRlLAogICAgICAgIDB4MWU0ZjAwMDAxZTUwLAogICAgICAgIDB4MWU1MTAwMDAxZTUyLAogICAgICAgIDB4MWU1MzAwMDAxZTU0LAogICAgICAgIDB4MWU1NTAwMDAxZTU2LAogICAgICAgIDB4MWU1NzAwMDAxZTU4LAogICAgICAgIDB4MWU1OTAwMDAxZTVhLAogICAgICAgIDB4MWU1YjAwMDAxZTVjLAogICAgICAgIDB4MWU1ZDAwMDAxZTVlLAogICAgICAgIDB4MWU1ZjAwMDAxZTYwLAogICAgICAgIDB4MWU2MTAwMDAxZTYyLAogICAgICAgIDB4MWU2MzAwMDAxZTY0LAogICAgICAgIDB4MWU2NTAwMDAxZTY2LAogICAgICAgIDB4MWU2NzAwMDAxZTY4LAogICAgICAgIDB4MWU2OTAwMDAxZTZhLAogICAgICAgIDB4MWU2YjAwMDAxZTZjLAogICAgICAgIDB4MWU2ZDAwMDAxZTZlLAogICAgICAgIDB4MWU2ZjAwMDAxZTcwLAogICAgICAgIDB4MWU3MTAwMDAxZTcyLAogICAgICAgIDB4MWU3MzAwMDAxZTc0LAogICAgICAgIDB4MWU3NTAwMDAxZTc2LAogICAgICAgIDB4MWU3NzAwMDAxZTc4LAogICAgICAgIDB4MWU3OTAwMDAxZTdhLAogICAgICAgIDB4MWU3YjAwMDAxZTdjLAogICAgICAgIDB4MWU3ZDAwMDAxZTdlLAogICAgICAgIDB4MWU3ZjAwMDAxZTgwLAogICAgICAgIDB4MWU4MTAwMDAxZTgyLAogICAgICAgIDB4MWU4MzAwMDAxZTg0LAogICAgICAgIDB4MWU4NTAwMDAxZTg2LAogICAgICAgIDB4MWU4NzAwMDAxZTg4LAogICAgICAgIDB4MWU4OTAwMDAxZThhLAogICAgICAgIDB4MWU4YjAwMDAxZThjLAogICAgICAgIDB4MWU4ZDAwMDAxZThlLAogICAgICAgIDB4MWU4ZjAwMDAxZTkwLAogICAgICAgIDB4MWU5MTAwMDAxZTkyLAogICAgICAgIDB4MWU5MzAwMDAxZTk0LAogICAgICAgIDB4MWU5NTAwMDAxZTlhLAogICAgICAgIDB4MWU5YzAwMDAxZTllLAogICAgICAgIDB4MWU5ZjAwMDAxZWEwLAogICAgICAgIDB4MWVhMTAwMDAxZWEyLAogICAgICAgIDB4MWVhMzAwMDAxZWE0LAogICAgICAgIDB4MWVhNTAwMDAxZWE2LAogICAgICAgIDB4MWVhNzAwMDAxZWE4LAogICAgICAgIDB4MWVhOTAwMDAxZWFhLAogICAgICAgIDB4MWVhYjAwMDAxZWFjLAogICAgICAgIDB4MWVhZDAwMDAxZWFlLAogICAgICAgIDB4MWVhZjAwMDAxZWIwLAogICAgICAgIDB4MWViMTAwMDAxZWIyLAogICAgICAgIDB4MWViMzAwMDAxZWI0LAogICAgICAgIDB4MWViNTAwMDAxZWI2LAogICAgICAgIDB4MWViNzAwMDAxZWI4LAogICAgICAgIDB4MWViOTAwMDAxZWJhLAogICAgICAgIDB4MWViYjAwMDAxZWJjLAogICAgICAgIDB4MWViZDAwMDAxZWJlLAogICAgICAgIDB4MWViZjAwMDAxZWMwLAogICAgICAgIDB4MWVjMTAwMDAxZWMyLAogICAgICAgIDB4MWVjMzAwMDAxZWM0LAogICAgICAgIDB4MWVjNTAwMDAxZWM2LAogICAgICAgIDB4MWVjNzAwMDAxZWM4LAogICAgICAgIDB4MWVjOTAwMDAxZWNhLAogICAgICAgIDB4MWVjYjAwMDAxZWNjLAogICAgICAgIDB4MWVjZDAwMDAxZWNlLAogICAgICAgIDB4MWVjZjAwMDAxZWQwLAogICAgICAgIDB4MWVkMTAwMDAxZWQyLAogICAgICAgIDB4MWVkMzAwMDAxZWQ0LAogICAgICAgIDB4MWVkNTAwMDAxZWQ2LAogICAgICAgIDB4MWVkNzAwMDAxZWQ4LAogICAgICAgIDB4MWVkOTAwMDAxZWRhLAogICAgICAgIDB4MWVkYjAwMDAxZWRjLAogICAgICAgIDB4MWVkZDAwMDAxZWRlLAogICAgICAgIDB4MWVkZjAwMDAxZWUwLAogICAgICAgIDB4MWVlMTAwMDAxZWUyLAogICAgICAgIDB4MWVlMzAwMDAxZWU0LAogICAgICAgIDB4MWVlNTAwMDAxZWU2LAogICAgICAgIDB4MWVlNzAwMDAxZWU4LAogICAgICAgIDB4MWVlOTAwMDAxZWVhLAogICAgICAgIDB4MWVlYjAwMDAxZWVjLAogICAgICAgIDB4MWVlZDAwMDAxZWVlLAogICAgICAgIDB4MWVlZjAwMDAxZWYwLAogICAgICAgIDB4MWVmMTAwMDAxZWYyLAogICAgICAgIDB4MWVmMzAwMDAxZWY0LAogICAgICAgIDB4MWVmNTAwMDAxZWY2LAogICAgICAgIDB4MWVmNzAwMDAxZWY4LAogICAgICAgIDB4MWVmOTAwMDAxZWZhLAogICAgICAgIDB4MWVmYjAwMDAxZWZjLAogICAgICAgIDB4MWVmZDAwMDAxZWZlLAogICAgICAgIDB4MWVmZjAwMDAxZjA4LAogICAgICAgIDB4MWYxMDAwMDAxZjE2LAogICAgICAgIDB4MWYyMDAwMDAxZjI4LAogICAgICAgIDB4MWYzMDAwMDAxZjM4LAogICAgICAgIDB4MWY0MDAwMDAxZjQ2LAogICAgICAgIDB4MWY1MDAwMDAxZjU4LAogICAgICAgIDB4MWY2MDAwMDAxZjY4LAogICAgICAgIDB4MWY3MDAwMDAxZjcxLAogICAgICAgIDB4MWY3MjAwMDAxZjczLAogICAgICAgIDB4MWY3NDAwMDAxZjc1LAogICAgICAgIDB4MWY3NjAwMDAxZjc3LAogICAgICAgIDB4MWY3ODAwMDAxZjc5LAogICAgICAgIDB4MWY3YTAwMDAxZjdiLAogICAgICAgIDB4MWY3YzAwMDAxZjdkLAogICAgICAgIDB4MWZiMDAwMDAxZmIyLAogICAgICAgIDB4MWZiNjAwMDAxZmI3LAogICAgICAgIDB4MWZjNjAwMDAxZmM3LAogICAgICAgIDB4MWZkMDAwMDAxZmQzLAogICAgICAgIDB4MWZkNjAwMDAxZmQ4LAogICAgICAgIDB4MWZlMDAwMDAxZmUzLAogICAgICAgIDB4MWZlNDAwMDAxZmU4LAogICAgICAgIDB4MWZmNjAwMDAxZmY3LAogICAgICAgIDB4MjE0ZTAwMDAyMTRmLAogICAgICAgIDB4MjE4NDAwMDAyMTg1LAogICAgICAgIDB4MmMzMDAwMDAyYzYwLAogICAgICAgIDB4MmM2MTAwMDAyYzYyLAogICAgICAgIDB4MmM2NTAwMDAyYzY3LAogICAgICAgIDB4MmM2ODAwMDAyYzY5LAogICAgICAgIDB4MmM2YTAwMDAyYzZiLAogICAgICAgIDB4MmM2YzAwMDAyYzZkLAogICAgICAgIDB4MmM3MTAwMDAyYzcyLAogICAgICAgIDB4MmM3MzAwMDAyYzc1LAogICAgICAgIDB4MmM3NjAwMDAyYzdjLAogICAgICAgIDB4MmM4MTAwMDAyYzgyLAogICAgICAgIDB4MmM4MzAwMDAyYzg0LAogICAgICAgIDB4MmM4NTAwMDAyYzg2LAogICAgICAgIDB4MmM4NzAwMDAyYzg4LAogICAgICAgIDB4MmM4OTAwMDAyYzhhLAogICAgICAgIDB4MmM4YjAwMDAyYzhjLAogICAgICAgIDB4MmM4ZDAwMDAyYzhlLAogICAgICAgIDB4MmM4ZjAwMDAyYzkwLAogICAgICAgIDB4MmM5MTAwMDAyYzkyLAogICAgICAgIDB4MmM5MzAwMDAyYzk0LAogICAgICAgIDB4MmM5NTAwMDAyYzk2LAogICAgICAgIDB4MmM5NzAwMDAyYzk4LAogICAgICAgIDB4MmM5OTAwMDAyYzlhLAogICAgICAgIDB4MmM5YjAwMDAyYzljLAogICAgICAgIDB4MmM5ZDAwMDAyYzllLAogICAgICAgIDB4MmM5ZjAwMDAyY2EwLAogICAgICAgIDB4MmNhMTAwMDAyY2EyLAogICAgICAgIDB4MmNhMzAwMDAyY2E0LAogICAgICAgIDB4MmNhNTAwMDAyY2E2LAogICAgICAgIDB4MmNhNzAwMDAyY2E4LAogICAgICAgIDB4MmNhOTAwMDAyY2FhLAogICAgICAgIDB4MmNhYjAwMDAyY2FjLAogICAgICAgIDB4MmNhZDAwMDAyY2FlLAogICAgICAgIDB4MmNhZjAwMDAyY2IwLAogICAgICAgIDB4MmNiMTAwMDAyY2IyLAogICAgICAgIDB4MmNiMzAwMDAyY2I0LAogICAgICAgIDB4MmNiNTAwMDAyY2I2LAogICAgICAgIDB4MmNiNzAwMDAyY2I4LAogICAgICAgIDB4MmNiOTAwMDAyY2JhLAogICAgICAgIDB4MmNiYjAwMDAyY2JjLAogICAgICAgIDB4MmNiZDAwMDAyY2JlLAogICAgICAgIDB4MmNiZjAwMDAyY2MwLAogICAgICAgIDB4MmNjMTAwMDAyY2MyLAogICAgICAgIDB4MmNjMzAwMDAyY2M0LAogICAgICAgIDB4MmNjNTAwMDAyY2M2LAogICAgICAgIDB4MmNjNzAwMDAyY2M4LAogICAgICAgIDB4MmNjOTAwMDAyY2NhLAogICAgICAgIDB4MmNjYjAwMDAyY2NjLAogICAgICAgIDB4MmNjZDAwMDAyY2NlLAogICAgICAgIDB4MmNjZjAwMDAyY2QwLAogICAgICAgIDB4MmNkMTAwMDAyY2QyLAogICAgICAgIDB4MmNkMzAwMDAyY2Q0LAogICAgICAgIDB4MmNkNTAwMDAyY2Q2LAogICAgICAgIDB4MmNkNzAwMDAyY2Q4LAogICAgICAgIDB4MmNkOTAwMDAyY2RhLAogICAgICAgIDB4MmNkYjAwMDAyY2RjLAogICAgICAgIDB4MmNkZDAwMDAyY2RlLAogICAgICAgIDB4MmNkZjAwMDAyY2UwLAogICAgICAgIDB4MmNlMTAwMDAyY2UyLAogICAgICAgIDB4MmNlMzAwMDAyY2U1LAogICAgICAgIDB4MmNlYzAwMDAyY2VkLAogICAgICAgIDB4MmNlZTAwMDAyY2YyLAogICAgICAgIDB4MmNmMzAwMDAyY2Y0LAogICAgICAgIDB4MmQwMDAwMDAyZDI2LAogICAgICAgIDB4MmQyNzAwMDAyZDI4LAogICAgICAgIDB4MmQyZDAwMDAyZDJlLAogICAgICAgIDB4MmQzMDAwMDAyZDY4LAogICAgICAgIDB4MmQ3ZjAwMDAyZDk3LAogICAgICAgIDB4MmRhMDAwMDAyZGE3LAogICAgICAgIDB4MmRhODAwMDAyZGFmLAogICAgICAgIDB4MmRiMDAwMDAyZGI3LAogICAgICAgIDB4MmRiODAwMDAyZGJmLAogICAgICAgIDB4MmRjMDAwMDAyZGM3LAogICAgICAgIDB4MmRjODAwMDAyZGNmLAogICAgICAgIDB4MmRkMDAwMDAyZGQ3LAogICAgICAgIDB4MmRkODAwMDAyZGRmLAogICAgICAgIDB4MmRlMDAwMDAyZTAwLAogICAgICAgIDB4MmUyZjAwMDAyZTMwLAogICAgICAgIDB4MzAwNTAwMDAzMDA4LAogICAgICAgIDB4MzAyYTAwMDAzMDJlLAogICAgICAgIDB4MzAzYzAwMDAzMDNkLAogICAgICAgIDB4MzA0MTAwMDAzMDk3LAogICAgICAgIDB4MzA5OTAwMDAzMDliLAogICAgICAgIDB4MzA5ZDAwMDAzMDlmLAogICAgICAgIDB4MzBhMTAwMDAzMGZiLAogICAgICAgIDB4MzBmYzAwMDAzMGZmLAogICAgICAgIDB4MzEwNTAwMDAzMTMwLAogICAgICAgIDB4MzFhMDAwMDAzMWMwLAogICAgICAgIDB4MzFmMDAwMDAzMjAwLAogICAgICAgIDB4MzQwMDAwMDA0ZGMwLAogICAgICAgIDB4NGUwMDAwMDBhNDhkLAogICAgICAgIDB4YTRkMDAwMDBhNGZlLAogICAgICAgIDB4YTUwMDAwMDBhNjBkLAogICAgICAgIDB4YTYxMDAwMDBhNjJjLAogICAgICAgIDB4YTY0MTAwMDBhNjQyLAogICAgICAgIDB4YTY0MzAwMDBhNjQ0LAogICAgICAgIDB4YTY0NTAwMDBhNjQ2LAogICAgICAgIDB4YTY0NzAwMDBhNjQ4LAogICAgICAgIDB4YTY0OTAwMDBhNjRhLAogICAgICAgIDB4YTY0YjAwMDBhNjRjLAogICAgICAgIDB4YTY0ZDAwMDBhNjRlLAogICAgICAgIDB4YTY0ZjAwMDBhNjUwLAogICAgICAgIDB4YTY1MTAwMDBhNjUyLAogICAgICAgIDB4YTY1MzAwMDBhNjU0LAogICAgICAgIDB4YTY1NTAwMDBhNjU2LAogICAgICAgIDB4YTY1NzAwMDBhNjU4LAogICAgICAgIDB4YTY1OTAwMDBhNjVhLAogICAgICAgIDB4YTY1YjAwMDBhNjVjLAogICAgICAgIDB4YTY1ZDAwMDBhNjVlLAogICAgICAgIDB4YTY1ZjAwMDBhNjYwLAogICAgICAgIDB4YTY2MTAwMDBhNjYyLAogICAgICAgIDB4YTY2MzAwMDBhNjY0LAogICAgICAgIDB4YTY2NTAwMDBhNjY2LAogICAgICAgIDB4YTY2NzAwMDBhNjY4LAogICAgICAgIDB4YTY2OTAwMDBhNjZhLAogICAgICAgIDB4YTY2YjAwMDBhNjZjLAogICAgICAgIDB4YTY2ZDAwMDBhNjcwLAogICAgICAgIDB4YTY3NDAwMDBhNjdlLAogICAgICAgIDB4YTY3ZjAwMDBhNjgwLAogICAgICAgIDB4YTY4MTAwMDBhNjgyLAogICAgICAgIDB4YTY4MzAwMDBhNjg0LAogICAgICAgIDB4YTY4NTAwMDBhNjg2LAogICAgICAgIDB4YTY4NzAwMDBhNjg4LAogICAgICAgIDB4YTY4OTAwMDBhNjhhLAogICAgICAgIDB4YTY4YjAwMDBhNjhjLAogICAgICAgIDB4YTY4ZDAwMDBhNjhlLAogICAgICAgIDB4YTY4ZjAwMDBhNjkwLAogICAgICAgIDB4YTY5MTAwMDBhNjkyLAogICAgICAgIDB4YTY5MzAwMDBhNjk0LAogICAgICAgIDB4YTY5NTAwMDBhNjk2LAogICAgICAgIDB4YTY5NzAwMDBhNjk4LAogICAgICAgIDB4YTY5OTAwMDBhNjlhLAogICAgICAgIDB4YTY5YjAwMDBhNjljLAogICAgICAgIDB4YTY5ZTAwMDBhNmU2LAogICAgICAgIDB4YTZmMDAwMDBhNmYyLAogICAgICAgIDB4YTcxNzAwMDBhNzIwLAogICAgICAgIDB4YTcyMzAwMDBhNzI0LAogICAgICAgIDB4YTcyNTAwMDBhNzI2LAogICAgICAgIDB4YTcyNzAwMDBhNzI4LAogICAgICAgIDB4YTcyOTAwMDBhNzJhLAogICAgICAgIDB4YTcyYjAwMDBhNzJjLAogICAgICAgIDB4YTcyZDAwMDBhNzJlLAogICAgICAgIDB4YTcyZjAwMDBhNzMyLAogICAgICAgIDB4YTczMzAwMDBhNzM0LAogICAgICAgIDB4YTczNTAwMDBhNzM2LAogICAgICAgIDB4YTczNzAwMDBhNzM4LAogICAgICAgIDB4YTczOTAwMDBhNzNhLAogICAgICAgIDB4YTczYjAwMDBhNzNjLAogICAgICAgIDB4YTczZDAwMDBhNzNlLAogICAgICAgIDB4YTczZjAwMDBhNzQwLAogICAgICAgIDB4YTc0MTAwMDBhNzQyLAogICAgICAgIDB4YTc0MzAwMDBhNzQ0LAogICAgICAgIDB4YTc0NTAwMDBhNzQ2LAogICAgICAgIDB4YTc0NzAwMDBhNzQ4LAogICAgICAgIDB4YTc0OTAwMDBhNzRhLAogICAgICAgIDB4YTc0YjAwMDBhNzRjLAogICAgICAgIDB4YTc0ZDAwMDBhNzRlLAogICAgICAgIDB4YTc0ZjAwMDBhNzUwLAogICAgICAgIDB4YTc1MTAwMDBhNzUyLAogICAgICAgIDB4YTc1MzAwMDBhNzU0LAogICAgICAgIDB4YTc1NTAwMDBhNzU2LAogICAgICAgIDB4YTc1NzAwMDBhNzU4LAogICAgICAgIDB4YTc1OTAwMDBhNzVhLAogICAgICAgIDB4YTc1YjAwMDBhNzVjLAogICAgICAgIDB4YTc1ZDAwMDBhNzVlLAogICAgICAgIDB4YTc1ZjAwMDBhNzYwLAogICAgICAgIDB4YTc2MTAwMDBhNzYyLAogICAgICAgIDB4YTc2MzAwMDBhNzY0LAogICAgICAgIDB4YTc2NTAwMDBhNzY2LAogICAgICAgIDB4YTc2NzAwMDBhNzY4LAogICAgICAgIDB4YTc2OTAwMDBhNzZhLAogICAgICAgIDB4YTc2YjAwMDBhNzZjLAogICAgICAgIDB4YTc2ZDAwMDBhNzZlLAogICAgICAgIDB4YTc2ZjAwMDBhNzcwLAogICAgICAgIDB4YTc3MTAwMDBhNzc5LAogICAgICAgIDB4YTc3YTAwMDBhNzdiLAogICAgICAgIDB4YTc3YzAwMDBhNzdkLAogICAgICAgIDB4YTc3ZjAwMDBhNzgwLAogICAgICAgIDB4YTc4MTAwMDBhNzgyLAogICAgICAgIDB4YTc4MzAwMDBhNzg0LAogICAgICAgIDB4YTc4NTAwMDBhNzg2LAogICAgICAgIDB4YTc4NzAwMDBhNzg5LAogICAgICAgIDB4YTc4YzAwMDBhNzhkLAogICAgICAgIDB4YTc4ZTAwMDBhNzkwLAogICAgICAgIDB4YTc5MTAwMDBhNzkyLAogICAgICAgIDB4YTc5MzAwMDBhNzk2LAogICAgICAgIDB4YTc5NzAwMDBhNzk4LAogICAgICAgIDB4YTc5OTAwMDBhNzlhLAogICAgICAgIDB4YTc5YjAwMDBhNzljLAogICAgICAgIDB4YTc5ZDAwMDBhNzllLAogICAgICAgIDB4YTc5ZjAwMDBhN2EwLAogICAgICAgIDB4YTdhMTAwMDBhN2EyLAogICAgICAgIDB4YTdhMzAwMDBhN2E0LAogICAgICAgIDB4YTdhNTAwMDBhN2E2LAogICAgICAgIDB4YTdhNzAwMDBhN2E4LAogICAgICAgIDB4YTdhOTAwMDBhN2FhLAogICAgICAgIDB4YTdhZjAwMDBhN2IwLAogICAgICAgIDB4YTdiNTAwMDBhN2I2LAogICAgICAgIDB4YTdiNzAwMDBhN2I4LAogICAgICAgIDB4YTdiOTAwMDBhN2JhLAogICAgICAgIDB4YTdiYjAwMDBhN2JjLAogICAgICAgIDB4YTdiZDAwMDBhN2JlLAogICAgICAgIDB4YTdiZjAwMDBhN2MwLAogICAgICAgIDB4YTdjMTAwMDBhN2MyLAogICAgICAgIDB4YTdjMzAwMDBhN2M0LAogICAgICAgIDB4YTdjODAwMDBhN2M5LAogICAgICAgIDB4YTdjYTAwMDBhN2NiLAogICAgICAgIDB4YTdkMTAwMDBhN2QyLAogICAgICAgIDB4YTdkMzAwMDBhN2Q0LAogICAgICAgIDB4YTdkNTAwMDBhN2Q2LAogICAgICAgIDB4YTdkNzAwMDBhN2Q4LAogICAgICAgIDB4YTdkOTAwMDBhN2RhLAogICAgICAgIDB4YTdmMjAwMDBhN2Y1LAogICAgICAgIDB4YTdmNjAwMDBhN2Y4LAogICAgICAgIDB4YTdmYTAwMDBhODI4LAogICAgICAgIDB4YTgyYzAwMDBhODJkLAogICAgICAgIDB4YTg0MDAwMDBhODc0LAogICAgICAgIDB4YTg4MDAwMDBhOGM2LAogICAgICAgIDB4YThkMDAwMDBhOGRhLAogICAgICAgIDB4YThlMDAwMDBhOGY4LAogICAgICAgIDB4YThmYjAwMDBhOGZjLAogICAgICAgIDB4YThmZDAwMDBhOTJlLAogICAgICAgIDB4YTkzMDAwMDBhOTU0LAogICAgICAgIDB4YTk4MDAwMDBhOWMxLAogICAgICAgIDB4YTljZjAwMDBhOWRhLAogICAgICAgIDB4YTllMDAwMDBhOWZmLAogICAgICAgIDB4YWEwMDAwMDBhYTM3LAogICAgICAgIDB4YWE0MDAwMDBhYTRlLAogICAgICAgIDB4YWE1MDAwMDBhYTVhLAogICAgICAgIDB4YWE2MDAwMDBhYTc3LAogICAgICAgIDB4YWE3YTAwMDBhYWMzLAogICAgICAgIDB4YWFkYjAwMDBhYWRlLAogICAgICAgIDB4YWFlMDAwMDBhYWYwLAogICAgICAgIDB4YWFmMjAwMDBhYWY3LAogICAgICAgIDB4YWIwMTAwMDBhYjA3LAogICAgICAgIDB4YWIwOTAwMDBhYjBmLAogICAgICAgIDB4YWIxMTAwMDBhYjE3LAogICAgICAgIDB4YWIyMDAwMDBhYjI3LAogICAgICAgIDB4YWIyODAwMDBhYjJmLAogICAgICAgIDB4YWIzMDAwMDBhYjViLAogICAgICAgIDB4YWI2MDAwMDBhYjZhLAogICAgICAgIDB4YWJjMDAwMDBhYmViLAogICAgICAgIDB4YWJlYzAwMDBhYmVlLAogICAgICAgIDB4YWJmMDAwMDBhYmZhLAogICAgICAgIDB4YWMwMDAwMDBkN2E0LAogICAgICAgIDB4ZmEwZTAwMDBmYTEwLAogICAgICAgIDB4ZmExMTAwMDBmYTEyLAogICAgICAgIDB4ZmExMzAwMDBmYTE1LAogICAgICAgIDB4ZmExZjAwMDBmYTIwLAogICAgICAgIDB4ZmEyMTAwMDBmYTIyLAogICAgICAgIDB4ZmEyMzAwMDBmYTI1LAogICAgICAgIDB4ZmEyNzAwMDBmYTJhLAogICAgICAgIDB4ZmIxZTAwMDBmYjFmLAogICAgICAgIDB4ZmUyMDAwMDBmZTMwLAogICAgICAgIDB4ZmU3MzAwMDBmZTc0LAogICAgICAgIDB4MTAwMDAwMDAxMDAwYywKICAgICAgICAweDEwMDBkMDAwMTAwMjcsCiAgICAgICAgMHgxMDAyODAwMDEwMDNiLAogICAgICAgIDB4MTAwM2MwMDAxMDAzZSwKICAgICAgICAweDEwMDNmMDAwMTAwNGUsCiAgICAgICAgMHgxMDA1MDAwMDEwMDVlLAogICAgICAgIDB4MTAwODAwMDAxMDBmYiwKICAgICAgICAweDEwMWZkMDAwMTAxZmUsCiAgICAgICAgMHgxMDI4MDAwMDEwMjlkLAogICAgICAgIDB4MTAyYTAwMDAxMDJkMSwKICAgICAgICAweDEwMmUwMDAwMTAyZTEsCiAgICAgICAgMHgxMDMwMDAwMDEwMzIwLAogICAgICAgIDB4MTAzMmQwMDAxMDM0MSwKICAgICAgICAweDEwMzQyMDAwMTAzNGEsCiAgICAgICAgMHgxMDM1MDAwMDEwMzdiLAogICAgICAgIDB4MTAzODAwMDAxMDM5ZSwKICAgICAgICAweDEwM2EwMDAwMTAzYzQsCiAgICAgICAgMHgxMDNjODAwMDEwM2QwLAogICAgICAgIDB4MTA0MjgwMDAxMDQ5ZSwKICAgICAgICAweDEwNGEwMDAwMTA0YWEsCiAgICAgICAgMHgxMDRkODAwMDEwNGZjLAogICAgICAgIDB4MTA1MDAwMDAxMDUyOCwKICAgICAgICAweDEwNTMwMDAwMTA1NjQsCiAgICAgICAgMHgxMDU5NzAwMDEwNWEyLAogICAgICAgIDB4MTA1YTMwMDAxMDViMiwKICAgICAgICAweDEwNWIzMDAwMTA1YmEsCiAgICAgICAgMHgxMDViYjAwMDEwNWJkLAogICAgICAgIDB4MTA2MDAwMDAxMDczNywKICAgICAgICAweDEwNzQwMDAwMTA3NTYsCiAgICAgICAgMHgxMDc2MDAwMDEwNzY4LAogICAgICAgIDB4MTA3ODAwMDAxMDc4NiwKICAgICAgICAweDEwNzg3MDAwMTA3YjEsCiAgICAgICAgMHgxMDdiMjAwMDEwN2JiLAogICAgICAgIDB4MTA4MDAwMDAxMDgwNiwKICAgICAgICAweDEwODA4MDAwMTA4MDksCiAgICAgICAgMHgxMDgwYTAwMDEwODM2LAogICAgICAgIDB4MTA4MzcwMDAxMDgzOSwKICAgICAgICAweDEwODNjMDAwMTA4M2QsCiAgICAgICAgMHgxMDgzZjAwMDEwODU2LAogICAgICAgIDB4MTA4NjAwMDAxMDg3NywKICAgICAgICAweDEwODgwMDAwMTA4OWYsCiAgICAgICAgMHgxMDhlMDAwMDEwOGYzLAogICAgICAgIDB4MTA4ZjQwMDAxMDhmNiwKICAgICAgICAweDEwOTAwMDAwMTA5MTYsCiAgICAgICAgMHgxMDkyMDAwMDEwOTNhLAogICAgICAgIDB4MTA5ODAwMDAxMDliOCwKICAgICAgICAweDEwOWJlMDAwMTA5YzAsCiAgICAgICAgMHgxMGEwMDAwMDEwYTA0LAogICAgICAgIDB4MTBhMDUwMDAxMGEwNywKICAgICAgICAweDEwYTBjMDAwMTBhMTQsCiAgICAgICAgMHgxMGExNTAwMDEwYTE4LAogICAgICAgIDB4MTBhMTkwMDAxMGEzNiwKICAgICAgICAweDEwYTM4MDAwMTBhM2IsCiAgICAgICAgMHgxMGEzZjAwMDEwYTQwLAogICAgICAgIDB4MTBhNjAwMDAxMGE3ZCwKICAgICAgICAweDEwYTgwMDAwMTBhOWQsCiAgICAgICAgMHgxMGFjMDAwMDEwYWM4LAogICAgICAgIDB4MTBhYzkwMDAxMGFlNywKICAgICAgICAweDEwYjAwMDAwMTBiMzYsCiAgICAgICAgMHgxMGI0MDAwMDEwYjU2LAogICAgICAgIDB4MTBiNjAwMDAxMGI3MywKICAgICAgICAweDEwYjgwMDAwMTBiOTIsCiAgICAgICAgMHgxMGMwMDAwMDEwYzQ5LAogICAgICAgIDB4MTBjYzAwMDAxMGNmMywKICAgICAgICAweDEwZDAwMDAwMTBkMjgsCiAgICAgICAgMHgxMGQzMDAwMDEwZDNhLAogICAgICAgIDB4MTBlODAwMDAxMGVhYSwKICAgICAgICAweDEwZWFiMDAwMTBlYWQsCiAgICAgICAgMHgxMGViMDAwMDEwZWIyLAogICAgICAgIDB4MTBmMDAwMDAxMGYxZCwKICAgICAgICAweDEwZjI3MDAwMTBmMjgsCiAgICAgICAgMHgxMGYzMDAwMDEwZjUxLAogICAgICAgIDB4MTBmNzAwMDAxMGY4NiwKICAgICAgICAweDEwZmIwMDAwMTBmYzUsCiAgICAgICAgMHgxMGZlMDAwMDEwZmY3LAogICAgICAgIDB4MTEwMDAwMDAxMTA0NywKICAgICAgICAweDExMDY2MDAwMTEwNzYsCiAgICAgICAgMHgxMTA3ZjAwMDExMGJiLAogICAgICAgIDB4MTEwYzIwMDAxMTBjMywKICAgICAgICAweDExMGQwMDAwMTEwZTksCiAgICAgICAgMHgxMTBmMDAwMDExMGZhLAogICAgICAgIDB4MTExMDAwMDAxMTEzNSwKICAgICAgICAweDExMTM2MDAwMTExNDAsCiAgICAgICAgMHgxMTE0NDAwMDExMTQ4LAogICAgICAgIDB4MTExNTAwMDAxMTE3NCwKICAgICAgICAweDExMTc2MDAwMTExNzcsCiAgICAgICAgMHgxMTE4MDAwMDExMWM1LAogICAgICAgIDB4MTExYzkwMDAxMTFjZCwKICAgICAgICAweDExMWNlMDAwMTExZGIsCiAgICAgICAgMHgxMTFkYzAwMDExMWRkLAogICAgICAgIDB4MTEyMDAwMDAxMTIxMiwKICAgICAgICAweDExMjEzMDAwMTEyMzgsCiAgICAgICAgMHgxMTIzZTAwMDExMjNmLAogICAgICAgIDB4MTEyODAwMDAxMTI4NywKICAgICAgICAweDExMjg4MDAwMTEyODksCiAgICAgICAgMHgxMTI4YTAwMDExMjhlLAogICAgICAgIDB4MTEyOGYwMDAxMTI5ZSwKICAgICAgICAweDExMjlmMDAwMTEyYTksCiAgICAgICAgMHgxMTJiMDAwMDExMmViLAogICAgICAgIDB4MTEyZjAwMDAxMTJmYSwKICAgICAgICAweDExMzAwMDAwMTEzMDQsCiAgICAgICAgMHgxMTMwNTAwMDExMzBkLAogICAgICAgIDB4MTEzMGYwMDAxMTMxMSwKICAgICAgICAweDExMzEzMDAwMTEzMjksCiAgICAgICAgMHgxMTMyYTAwMDExMzMxLAogICAgICAgIDB4MTEzMzIwMDAxMTMzNCwKICAgICAgICAweDExMzM1MDAwMTEzM2EsCiAgICAgICAgMHgxMTMzYjAwMDExMzQ1LAogICAgICAgIDB4MTEzNDcwMDAxMTM0OSwKICAgICAgICAweDExMzRiMDAwMTEzNGUsCiAgICAgICAgMHgxMTM1MDAwMDExMzUxLAogICAgICAgIDB4MTEzNTcwMDAxMTM1OCwKICAgICAgICAweDExMzVkMDAwMTEzNjQsCiAgICAgICAgMHgxMTM2NjAwMDExMzZkLAogICAgICAgIDB4MTEzNzAwMDAxMTM3NSwKICAgICAgICAweDExNDAwMDAwMTE0NGIsCiAgICAgICAgMHgxMTQ1MDAwMDExNDVhLAogICAgICAgIDB4MTE0NWUwMDAxMTQ2MiwKICAgICAgICAweDExNDgwMDAwMTE0YzYsCiAgICAgICAgMHgxMTRjNzAwMDExNGM4LAogICAgICAgIDB4MTE0ZDAwMDAxMTRkYSwKICAgICAgICAweDExNTgwMDAwMTE1YjYsCiAgICAgICAgMHgxMTViODAwMDExNWMxLAogICAgICAgIDB4MTE1ZDgwMDAxMTVkZSwKICAgICAgICAweDExNjAwMDAwMTE2NDEsCiAgICAgICAgMHgxMTY0NDAwMDExNjQ1LAogICAgICAgIDB4MTE2NTAwMDAxMTY1YSwKICAgICAgICAweDExNjgwMDAwMTE2YjksCiAgICAgICAgMHgxMTZjMDAwMDExNmNhLAogICAgICAgIDB4MTE3MDAwMDAxMTcxYiwKICAgICAgICAweDExNzFkMDAwMTE3MmMsCiAgICAgICAgMHgxMTczMDAwMDExNzNhLAogICAgICAgIDB4MTE3NDAwMDAxMTc0NywKICAgICAgICAweDExODAwMDAwMTE4M2IsCiAgICAgICAgMHgxMThjMDAwMDExOGVhLAogICAgICAgIDB4MTE4ZmYwMDAxMTkwNywKICAgICAgICAweDExOTA5MDAwMTE5MGEsCiAgICAgICAgMHgxMTkwYzAwMDExOTE0LAogICAgICAgIDB4MTE5MTUwMDAxMTkxNywKICAgICAgICAweDExOTE4MDAwMTE5MzYsCiAgICAgICAgMHgxMTkzNzAwMDExOTM5LAogICAgICAgIDB4MTE5M2IwMDAxMTk0NCwKICAgICAgICAweDExOTUwMDAwMTE5NWEsCiAgICAgICAgMHgxMTlhMDAwMDExOWE4LAogICAgICAgIDB4MTE5YWEwMDAxMTlkOCwKICAgICAgICAweDExOWRhMDAwMTE5ZTIsCiAgICAgICAgMHgxMTllMzAwMDExOWU1LAogICAgICAgIDB4MTFhMDAwMDAxMWEzZiwKICAgICAgICAweDExYTQ3MDAwMTFhNDgsCiAgICAgICAgMHgxMWE1MDAwMDExYTlhLAogICAgICAgIDB4MTFhOWQwMDAxMWE5ZSwKICAgICAgICAweDExYWIwMDAwMTFhZjksCiAgICAgICAgMHgxMWMwMDAwMDExYzA5LAogICAgICAgIDB4MTFjMGEwMDAxMWMzNywKICAgICAgICAweDExYzM4MDAwMTFjNDEsCiAgICAgICAgMHgxMWM1MDAwMDExYzVhLAogICAgICAgIDB4MTFjNzIwMDAxMWM5MCwKICAgICAgICAweDExYzkyMDAwMTFjYTgsCiAgICAgICAgMHgxMWNhOTAwMDExY2I3LAogICAgICAgIDB4MTFkMDAwMDAxMWQwNywKICAgICAgICAweDExZDA4MDAwMTFkMGEsCiAgICAgICAgMHgxMWQwYjAwMDExZDM3LAogICAgICAgIDB4MTFkM2EwMDAxMWQzYiwKICAgICAgICAweDExZDNjMDAwMTFkM2UsCiAgICAgICAgMHgxMWQzZjAwMDExZDQ4LAogICAgICAgIDB4MTFkNTAwMDAxMWQ1YSwKICAgICAgICAweDExZDYwMDAwMTFkNjYsCiAgICAgICAgMHgxMWQ2NzAwMDExZDY5LAogICAgICAgIDB4MTFkNmEwMDAxMWQ4ZiwKICAgICAgICAweDExZDkwMDAwMTFkOTIsCiAgICAgICAgMHgxMWQ5MzAwMDExZDk5LAogICAgICAgIDB4MTFkYTAwMDAxMWRhYSwKICAgICAgICAweDExZWUwMDAwMTFlZjcsCiAgICAgICAgMHgxMWZiMDAwMDExZmIxLAogICAgICAgIDB4MTIwMDAwMDAxMjM5YSwKICAgICAgICAweDEyNDgwMDAwMTI1NDQsCiAgICAgICAgMHgxMmY5MDAwMDEyZmYxLAogICAgICAgIDB4MTMwMDAwMDAxMzQyZiwKICAgICAgICAweDE0NDAwMDAwMTQ2NDcsCiAgICAgICAgMHgxNjgwMDAwMDE2YTM5LAogICAgICAgIDB4MTZhNDAwMDAxNmE1ZiwKICAgICAgICAweDE2YTYwMDAwMTZhNmEsCiAgICAgICAgMHgxNmE3MDAwMDE2YWJmLAogICAgICAgIDB4MTZhYzAwMDAxNmFjYSwKICAgICAgICAweDE2YWQwMDAwMTZhZWUsCiAgICAgICAgMHgxNmFmMDAwMDE2YWY1LAogICAgICAgIDB4MTZiMDAwMDAxNmIzNywKICAgICAgICAweDE2YjQwMDAwMTZiNDQsCiAgICAgICAgMHgxNmI1MDAwMDE2YjVhLAogICAgICAgIDB4MTZiNjMwMDAxNmI3OCwKICAgICAgICAweDE2YjdkMDAwMTZiOTAsCiAgICAgICAgMHgxNmU2MDAwMDE2ZTgwLAogICAgICAgIDB4MTZmMDAwMDAxNmY0YiwKICAgICAgICAweDE2ZjRmMDAwMTZmODgsCiAgICAgICAgMHgxNmY4ZjAwMDE2ZmEwLAogICAgICAgIDB4MTZmZTAwMDAxNmZlMiwKICAgICAgICAweDE2ZmUzMDAwMTZmZTUsCiAgICAgICAgMHgxNmZmMDAwMDE2ZmYyLAogICAgICAgIDB4MTcwMDAwMDAxODdmOCwKICAgICAgICAweDE4ODAwMDAwMThjZDYsCiAgICAgICAgMHgxOGQwMDAwMDE4ZDA5LAogICAgICAgIDB4MWFmZjAwMDAxYWZmNCwKICAgICAgICAweDFhZmY1MDAwMWFmZmMsCiAgICAgICAgMHgxYWZmZDAwMDFhZmZmLAogICAgICAgIDB4MWIwMDAwMDAxYjEyMywKICAgICAgICAweDFiMTUwMDAwMWIxNTMsCiAgICAgICAgMHgxYjE2NDAwMDFiMTY4LAogICAgICAgIDB4MWIxNzAwMDAxYjJmYywKICAgICAgICAweDFiYzAwMDAwMWJjNmIsCiAgICAgICAgMHgxYmM3MDAwMDFiYzdkLAogICAgICAgIDB4MWJjODAwMDAxYmM4OSwKICAgICAgICAweDFiYzkwMDAwMWJjOWEsCiAgICAgICAgMHgxYmM5ZDAwMDFiYzlmLAogICAgICAgIDB4MWNmMDAwMDAxY2YyZSwKICAgICAgICAweDFjZjMwMDAwMWNmNDcsCiAgICAgICAgMHgxZGEwMDAwMDFkYTM3LAogICAgICAgIDB4MWRhM2IwMDAxZGE2ZCwKICAgICAgICAweDFkYTc1MDAwMWRhNzYsCiAgICAgICAgMHgxZGE4NDAwMDFkYTg1LAogICAgICAgIDB4MWRhOWIwMDAxZGFhMCwKICAgICAgICAweDFkYWExMDAwMWRhYjAsCiAgICAgICAgMHgxZGYwMDAwMDFkZjFmLAogICAgICAgIDB4MWUwMDAwMDAxZTAwNywKICAgICAgICAweDFlMDA4MDAwMWUwMTksCiAgICAgICAgMHgxZTAxYjAwMDFlMDIyLAogICAgICAgIDB4MWUwMjMwMDAxZTAyNSwKICAgICAgICAweDFlMDI2MDAwMWUwMmIsCiAgICAgICAgMHgxZTEwMDAwMDFlMTJkLAogICAgICAgIDB4MWUxMzAwMDAxZTEzZSwKICAgICAgICAweDFlMTQwMDAwMWUxNGEsCiAgICAgICAgMHgxZTE0ZTAwMDFlMTRmLAogICAgICAgIDB4MWUyOTAwMDAxZTJhZiwKICAgICAgICAweDFlMmMwMDAwMWUyZmEsCiAgICAgICAgMHgxZTdlMDAwMDFlN2U3LAogICAgICAgIDB4MWU3ZTgwMDAxZTdlYywKICAgICAgICAweDFlN2VkMDAwMWU3ZWYsCiAgICAgICAgMHgxZTdmMDAwMDFlN2ZmLAogICAgICAgIDB4MWU4MDAwMDAxZThjNSwKICAgICAgICAweDFlOGQwMDAwMWU4ZDcsCiAgICAgICAgMHgxZTkyMjAwMDFlOTRjLAogICAgICAgIDB4MWU5NTAwMDAxZTk1YSwKICAgICAgICAweDFmYmYwMDAwMWZiZmEsCiAgICAgICAgMHgyMDAwMDAwMDJhNmUwLAogICAgICAgIDB4MmE3MDAwMDAyYjczOSwKICAgICAgICAweDJiNzQwMDAwMmI4MWUsCiAgICAgICAgMHgyYjgyMDAwMDJjZWEyLAogICAgICAgIDB4MmNlYjAwMDAyZWJlMSwKICAgICAgICAweDMwMDAwMDAwMzEzNGIsCiAgICApLAogICAgJ0NPTlRFWFRKJzogKAogICAgICAgIDB4MjAwYzAwMDAyMDBlLAogICAgKSwKICAgICdDT05URVhUTyc6ICgKICAgICAgICAweGI3MDAwMDAwYjgsCiAgICAgICAgMHgzNzUwMDAwMDM3NiwKICAgICAgICAweDVmMzAwMDAwNWY1LAogICAgICAgIDB4NjYwMDAwMDA2NmEsCiAgICAgICAgMHg2ZjAwMDAwMDZmYSwKICAgICAgICAweDMwZmIwMDAwMzBmYywKICAgICksCn0KCiIiIgoKaW1wb3J0IG9zCmltcG9ydCB0eXBlcwppbXBvcnQgemlwZmlsZQppbXBvcnQgc3lzCmltcG9ydCBpbwppbXBvcnQganNvbgoKY2xhc3MgWmlwSW1wb3J0ZXIob2JqZWN0KToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB6aXBfZmlsZSk6CiAgICAgICAgc2VsZi56ZmlsZSA9IHppcF9maWxlCiAgICAgICAgc2VsZi5fcGF0aHMgPSBbeC5maWxlbmFtZSBmb3IgeCBpbiBzZWxmLnpmaWxlLmZpbGVsaXN0XQogICAgICAgIAogICAgZGVmIF9tb2RfdG9fcGF0aHMoc2VsZiwgZnVsbG5hbWUpOgogICAgICAgICMgZ2V0IHRoZSBweXRob24gbW9kdWxlIG5hbWUKICAgICAgICBweV9maWxlbmFtZSA9IGZ1bGxuYW1lLnJlcGxhY2UoIi4iLCBvcy5zZXApICsgIi5weSIKICAgICAgICAjIGdldCB0aGUgZmlsZW5hbWUgaWYgaXQgaXMgYSBwYWNrYWdlL3N1YnBhY2thZ2UKICAgICAgICBweV9wYWNrYWdlID0gZnVsbG5hbWUucmVwbGFjZSgiLiIsIG9zLnNlcCkgKyBvcy5zZXAgKyAiX19pbml0X18ucHkiCiAgICAgICAgaWYgcHlfZmlsZW5hbWUgaW4gc2VsZi5fcGF0aHM6CiAgICAgICAgICAgIHJldHVybiBweV9maWxlbmFtZQogICAgICAgIGVsaWYgcHlfcGFja2FnZSBpbiBzZWxmLl9wYXRoczoKICAgICAgICAgICAgcmV0dXJuIHB5X3BhY2thZ2UKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiBmaW5kX21vZHVsZShzZWxmLCBmdWxsbmFtZSwgcGF0aCk6CiAgICAgICAgaWYgc2VsZi5fbW9kX3RvX3BhdGhzKGZ1bGxuYW1lKSBpcyBub3QgTm9uZToKICAgICAgICAgICAgcmV0dXJuIHNlbGYKICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiBsb2FkX21vZHVsZShzZWxmLCBmdWxsbmFtZSk6CiAgICAgICAgZmlsZW5hbWUgPSBzZWxmLl9tb2RfdG9fcGF0aHMoZnVsbG5hbWUpCiAgICAgICAgaWYgbm90IGZpbGVuYW1lIGluIHNlbGYuX3BhdGhzOgogICAgICAgICAgICByYWlzZSBJbXBvcnRFcnJvcihmdWxsbmFtZSkKICAgICAgICBuZXdfbW9kdWxlID0gdHlwZXMuTW9kdWxlVHlwZShmdWxsbmFtZSkKICAgICAgICBzeXMubW9kdWxlc1tmdWxsbmFtZV09bmV3X21vZHVsZQogICAgICAgIGlmIGZpbGVuYW1lLmVuZHN3aXRoKCJfX2luaXRfXy5weSIpOgogICAgICAgICAgICBuZXdfbW9kdWxlLl9fcGF0aF9fID0gW10gCiAgICAgICAgICAgIG5ld19tb2R1bGUuX19wYWNrYWdlX18gPSBmdWxsbmFtZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG5ld19tb2R1bGUuX19wYWNrYWdlX18gPSBmdWxsbmFtZS5ycGFydGl0aW9uKCcuJylbMF0KICAgICAgICBleGVjKHNlbGYuemZpbGUub3BlbihmaWxlbmFtZSwgJ3InKS5yZWFkKCksbmV3X21vZHVsZS5fX2RpY3RfXykKICAgICAgICBuZXdfbW9kdWxlLl9fZmlsZV9fID0gZmlsZW5hbWUKICAgICAgICBuZXdfbW9kdWxlLl9fbG9hZGVyX18gPSBzZWxmCiAgICAgICAgbmV3X21vZHVsZS5fX3NwZWNfXz1qc29uLl9fc3BlY19fICMgVG8gc2F0aXNmeSBpbXBvcnRsaWIuX2NvbW1vbi5nZXRfcGFja2FnZQogICAgICAgIHJldHVybiBuZXdfbW9kdWxlCgptb2R1bGVfemlwPXppcGZpbGUuWmlwRmlsZShpby5CeXRlc0lPKCksInciKQpmb3Iga2V5IGluIG1vZHVsZV9kaWN0OgogICAgbW9kdWxlX3ppcC53cml0ZXN0cihrZXksbW9kdWxlX2RpY3Rba2V5XSkKCm1vZHVsZV9pbXBvcnRlcj1aaXBJbXBvcnRlcihtb2R1bGVfemlwKQpzeXMubWV0YV9wYXRoLmluc2VydCgwLG1vZHVsZV9pbXBvcnRlcikKCiNmcm9tIGlkbmEgaW1wb3J0ICoKaW1wb3J0IGlkbmEKZ2xvYmFscygpLnVwZGF0ZShpZG5hLl9fZGljdF9fKQogICAgCmlmIG1vZHVsZV9pbXBvcnRlciBpbiBzeXMubWV0YV9wYXRoOgogICAgc3lzLm1ldGFfcGF0aC5yZW1vdmUobW9kdWxlX2ltcG9ydGVyKQoKI2ZvciBrZXkgaW4gc3lzLm1vZHVsZXMuY29weSgpOgojICAgIGlmIGtleT09ImlkbmEiIG9yIGtleS5zdGFydHN3aXRoKCJpZG5hLiIpOgojICAgICAgICBkZWwgc3lzLm1vZHVsZXNba2V5XQo=').decode("utf-8"),idna_module.__dict__)
sys.modules["idna"]=idna_module


import types
import sys
import base64
urllib3_module=types.ModuleType("urllib3")
#setattr(urllib3_module,"__file__",__file__)
exec(base64.b64decode(b'aW1wb3J0IG9zCm1vZHVsZV9kaWN0PXt9Cm1vZHVsZV9kaWN0WyJ1cmxsaWIzIitvcy5zZXArImNvbm5lY3Rpb25wb29sLnB5Il09IiIiCmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYWJzb2x1dGVfaW1wb3J0CgppbXBvcnQgZXJybm8KaW1wb3J0IGxvZ2dpbmcKaW1wb3J0IHJlCmltcG9ydCBzb2NrZXQKaW1wb3J0IHN5cwppbXBvcnQgd2FybmluZ3MKZnJvbSBzb2NrZXQgaW1wb3J0IGVycm9yIGFzIFNvY2tldEVycm9yCmZyb20gc29ja2V0IGltcG9ydCB0aW1lb3V0IGFzIFNvY2tldFRpbWVvdXQKCmZyb20gLmNvbm5lY3Rpb24gaW1wb3J0ICgKICAgIEJhc2VTU0xFcnJvciwKICAgIEJyb2tlblBpcGVFcnJvciwKICAgIER1bW15Q29ubmVjdGlvbiwKICAgIEhUVFBDb25uZWN0aW9uLAogICAgSFRUUEV4Y2VwdGlvbiwKICAgIEhUVFBTQ29ubmVjdGlvbiwKICAgIFZlcmlmaWVkSFRUUFNDb25uZWN0aW9uLAogICAgcG9ydF9ieV9zY2hlbWUsCikKZnJvbSAuZXhjZXB0aW9ucyBpbXBvcnQgKAogICAgQ2xvc2VkUG9vbEVycm9yLAogICAgRW1wdHlQb29sRXJyb3IsCiAgICBIZWFkZXJQYXJzaW5nRXJyb3IsCiAgICBIb3N0Q2hhbmdlZEVycm9yLAogICAgSW5zZWN1cmVSZXF1ZXN0V2FybmluZywKICAgIExvY2F0aW9uVmFsdWVFcnJvciwKICAgIE1heFJldHJ5RXJyb3IsCiAgICBOZXdDb25uZWN0aW9uRXJyb3IsCiAgICBQcm90b2NvbEVycm9yLAogICAgUHJveHlFcnJvciwKICAgIFJlYWRUaW1lb3V0RXJyb3IsCiAgICBTU0xFcnJvciwKICAgIFRpbWVvdXRFcnJvciwKKQpmcm9tIC5wYWNrYWdlcyBpbXBvcnQgc2l4CmZyb20gLnBhY2thZ2VzLnNpeC5tb3ZlcyBpbXBvcnQgcXVldWUKZnJvbSAucmVxdWVzdCBpbXBvcnQgUmVxdWVzdE1ldGhvZHMKZnJvbSAucmVzcG9uc2UgaW1wb3J0IEhUVFBSZXNwb25zZQpmcm9tIC51dGlsLmNvbm5lY3Rpb24gaW1wb3J0IGlzX2Nvbm5lY3Rpb25fZHJvcHBlZApmcm9tIC51dGlsLnByb3h5IGltcG9ydCBjb25uZWN0aW9uX3JlcXVpcmVzX2h0dHBfdHVubmVsCmZyb20gLnV0aWwucXVldWUgaW1wb3J0IExpZm9RdWV1ZQpmcm9tIC51dGlsLnJlcXVlc3QgaW1wb3J0IHNldF9maWxlX3Bvc2l0aW9uCmZyb20gLnV0aWwucmVzcG9uc2UgaW1wb3J0IGFzc2VydF9oZWFkZXJfcGFyc2luZwpmcm9tIC51dGlsLnJldHJ5IGltcG9ydCBSZXRyeQpmcm9tIC51dGlsLnNzbF9tYXRjaF9ob3N0bmFtZSBpbXBvcnQgQ2VydGlmaWNhdGVFcnJvcgpmcm9tIC51dGlsLnRpbWVvdXQgaW1wb3J0IFRpbWVvdXQKZnJvbSAudXRpbC51cmwgaW1wb3J0IFVybCwgX2VuY29kZV90YXJnZXQKZnJvbSAudXRpbC51cmwgaW1wb3J0IF9ub3JtYWxpemVfaG9zdCBhcyBub3JtYWxpemVfaG9zdApmcm9tIC51dGlsLnVybCBpbXBvcnQgZ2V0X2hvc3QsIHBhcnNlX3VybAoKeHJhbmdlID0gc2l4Lm1vdmVzLnhyYW5nZQoKbG9nID0gbG9nZ2luZy5nZXRMb2dnZXIoX19uYW1lX18pCgpfRGVmYXVsdCA9IG9iamVjdCgpCgoKIyBQb29sIG9iamVjdHMKY2xhc3MgQ29ubmVjdGlvblBvb2wob2JqZWN0KToKICAgIFwiXCJcIgogICAgQmFzZSBjbGFzcyBmb3IgYWxsIGNvbm5lY3Rpb24gcG9vbHMsIHN1Y2ggYXMKICAgIDpjbGFzczpgLkhUVFBDb25uZWN0aW9uUG9vbGAgYW5kIDpjbGFzczpgLkhUVFBTQ29ubmVjdGlvblBvb2xgLgoKICAgIC4uIG5vdGU6OgogICAgICAgQ29ubmVjdGlvblBvb2wudXJsb3BlbigpIGRvZXMgbm90IG5vcm1hbGl6ZSBvciBwZXJjZW50LWVuY29kZSB0YXJnZXQgVVJJcwogICAgICAgd2hpY2ggaXMgdXNlZnVsIGlmIHlvdXIgdGFyZ2V0IHNlcnZlciBkb2Vzbid0IHN1cHBvcnQgcGVyY2VudC1lbmNvZGVkCiAgICAgICB0YXJnZXQgVVJJcy4KICAgIFwiXCJcIgoKICAgIHNjaGVtZSA9IE5vbmUKICAgIFF1ZXVlQ2xzID0gTGlmb1F1ZXVlCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhvc3QsIHBvcnQ9Tm9uZSk6CiAgICAgICAgaWYgbm90IGhvc3Q6CiAgICAgICAgICAgIHJhaXNlIExvY2F0aW9uVmFsdWVFcnJvcihcIk5vIGhvc3Qgc3BlY2lmaWVkLlwiKQoKICAgICAgICBzZWxmLmhvc3QgPSBfbm9ybWFsaXplX2hvc3QoaG9zdCwgc2NoZW1lPXNlbGYuc2NoZW1lKQogICAgICAgIHNlbGYuX3Byb3h5X2hvc3QgPSBob3N0Lmxvd2VyKCkKICAgICAgICBzZWxmLnBvcnQgPSBwb3J0CgogICAgZGVmIF9fc3RyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIFwiJXMoaG9zdD0lciwgcG9ydD0lcilcIiAlICh0eXBlKHNlbGYpLl9fbmFtZV9fLCBzZWxmLmhvc3QsIHNlbGYucG9ydCkKCiAgICBkZWYgX19lbnRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fZXhpdF9fKHNlbGYsIGV4Y190eXBlLCBleGNfdmFsLCBleGNfdGIpOgogICAgICAgIHNlbGYuY2xvc2UoKQogICAgICAgICMgUmV0dXJuIEZhbHNlIHRvIHJlLXJhaXNlIGFueSBwb3RlbnRpYWwgZXhjZXB0aW9ucwogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBjbG9zZShzZWxmKToKICAgICAgICBcIlwiXCIKICAgICAgICBDbG9zZSBhbGwgcG9vbGVkIGNvbm5lY3Rpb25zIGFuZCBkaXNhYmxlIHRoZSBwb29sLgogICAgICAgIFwiXCJcIgogICAgICAgIHBhc3MKCgojIFRoaXMgaXMgdGFrZW4gZnJvbSBodHRwOi8vaGcucHl0aG9uLm9yZy9jcHl0aG9uL2ZpbGUvN2FhYmE3MjFlYmMwL0xpYi9zb2NrZXQucHkjbDI1MgpfYmxvY2tpbmdfZXJybm9zID0ge2Vycm5vLkVBR0FJTiwgZXJybm8uRVdPVUxEQkxPQ0t9CgoKY2xhc3MgSFRUUENvbm5lY3Rpb25Qb29sKENvbm5lY3Rpb25Qb29sLCBSZXF1ZXN0TWV0aG9kcyk6CiAgICBcIlwiXCIKICAgIFRocmVhZC1zYWZlIGNvbm5lY3Rpb24gcG9vbCBmb3Igb25lIGhvc3QuCgogICAgOnBhcmFtIGhvc3Q6CiAgICAgICAgSG9zdCB1c2VkIGZvciB0aGlzIEhUVFAgQ29ubmVjdGlvbiAoZS5nLiBcImxvY2FsaG9zdFwiKSwgcGFzc2VkIGludG8KICAgICAgICA6Y2xhc3M6YGh0dHAuY2xpZW50LkhUVFBDb25uZWN0aW9uYC4KCiAgICA6cGFyYW0gcG9ydDoKICAgICAgICBQb3J0IHVzZWQgZm9yIHRoaXMgSFRUUCBDb25uZWN0aW9uIChOb25lIGlzIGVxdWl2YWxlbnQgdG8gODApLCBwYXNzZWQKICAgICAgICBpbnRvIDpjbGFzczpgaHR0cC5jbGllbnQuSFRUUENvbm5lY3Rpb25gLgoKICAgIDpwYXJhbSBzdHJpY3Q6CiAgICAgICAgQ2F1c2VzIEJhZFN0YXR1c0xpbmUgdG8gYmUgcmFpc2VkIGlmIHRoZSBzdGF0dXMgbGluZSBjYW4ndCBiZSBwYXJzZWQKICAgICAgICBhcyBhIHZhbGlkIEhUVFAvMS4wIG9yIDEuMSBzdGF0dXMgbGluZSwgcGFzc2VkIGludG8KICAgICAgICA6Y2xhc3M6YGh0dHAuY2xpZW50LkhUVFBDb25uZWN0aW9uYC4KCiAgICAgICAgLi4gbm90ZTo6CiAgICAgICAgICAgT25seSB3b3JrcyBpbiBQeXRob24gMi4gVGhpcyBwYXJhbWV0ZXIgaXMgaWdub3JlZCBpbiBQeXRob24gMy4KCiAgICA6cGFyYW0gdGltZW91dDoKICAgICAgICBTb2NrZXQgdGltZW91dCBpbiBzZWNvbmRzIGZvciBlYWNoIGluZGl2aWR1YWwgY29ubmVjdGlvbi4gVGhpcyBjYW4KICAgICAgICBiZSBhIGZsb2F0IG9yIGludGVnZXIsIHdoaWNoIHNldHMgdGhlIHRpbWVvdXQgZm9yIHRoZSBIVFRQIHJlcXVlc3QsCiAgICAgICAgb3IgYW4gaW5zdGFuY2Ugb2YgOmNsYXNzOmB1cmxsaWIzLnV0aWwuVGltZW91dGAgd2hpY2ggZ2l2ZXMgeW91IG1vcmUKICAgICAgICBmaW5lLWdyYWluZWQgY29udHJvbCBvdmVyIHJlcXVlc3QgdGltZW91dHMuIEFmdGVyIHRoZSBjb25zdHJ1Y3RvciBoYXMKICAgICAgICBiZWVuIHBhcnNlZCwgdGhpcyBpcyBhbHdheXMgYSBgdXJsbGliMy51dGlsLlRpbWVvdXRgIG9iamVjdC4KCiAgICA6cGFyYW0gbWF4c2l6ZToKICAgICAgICBOdW1iZXIgb2YgY29ubmVjdGlvbnMgdG8gc2F2ZSB0aGF0IGNhbiBiZSByZXVzZWQuIE1vcmUgdGhhbiAxIGlzIHVzZWZ1bAogICAgICAgIGluIG11bHRpdGhyZWFkZWQgc2l0dWF0aW9ucy4gSWYgYGBibG9ja2BgIGlzIHNldCB0byBGYWxzZSwgbW9yZQogICAgICAgIGNvbm5lY3Rpb25zIHdpbGwgYmUgY3JlYXRlZCBidXQgdGhleSB3aWxsIG5vdCBiZSBzYXZlZCBvbmNlIHRoZXkndmUKICAgICAgICBiZWVuIHVzZWQuCgogICAgOnBhcmFtIGJsb2NrOgogICAgICAgIElmIHNldCB0byBUcnVlLCBubyBtb3JlIHRoYW4gYGBtYXhzaXplYGAgY29ubmVjdGlvbnMgd2lsbCBiZSB1c2VkIGF0CiAgICAgICAgYSB0aW1lLiBXaGVuIG5vIGZyZWUgY29ubmVjdGlvbnMgYXJlIGF2YWlsYWJsZSwgdGhlIGNhbGwgd2lsbCBibG9jawogICAgICAgIHVudGlsIGEgY29ubmVjdGlvbiBoYXMgYmVlbiByZWxlYXNlZC4gVGhpcyBpcyBhIHVzZWZ1bCBzaWRlIGVmZmVjdCBmb3IKICAgICAgICBwYXJ0aWN1bGFyIG11bHRpdGhyZWFkZWQgc2l0dWF0aW9ucyB3aGVyZSBvbmUgZG9lcyBub3Qgd2FudCB0byB1c2UgbW9yZQogICAgICAgIHRoYW4gbWF4c2l6ZSBjb25uZWN0aW9ucyBwZXIgaG9zdCB0byBwcmV2ZW50IGZsb29kaW5nLgoKICAgIDpwYXJhbSBoZWFkZXJzOgogICAgICAgIEhlYWRlcnMgdG8gaW5jbHVkZSB3aXRoIGFsbCByZXF1ZXN0cywgdW5sZXNzIG90aGVyIGhlYWRlcnMgYXJlIGdpdmVuCiAgICAgICAgZXhwbGljaXRseS4KCiAgICA6cGFyYW0gcmV0cmllczoKICAgICAgICBSZXRyeSBjb25maWd1cmF0aW9uIHRvIHVzZSBieSBkZWZhdWx0IHdpdGggcmVxdWVzdHMgaW4gdGhpcyBwb29sLgoKICAgIDpwYXJhbSBfcHJveHk6CiAgICAgICAgUGFyc2VkIHByb3h5IFVSTCwgc2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5LCBpbnN0ZWFkLCBzZWUKICAgICAgICA6Y2xhc3M6YHVybGxpYjMuUHJveHlNYW5hZ2VyYAoKICAgIDpwYXJhbSBfcHJveHlfaGVhZGVyczoKICAgICAgICBBIGRpY3Rpb25hcnkgd2l0aCBwcm94eSBoZWFkZXJzLCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHksCiAgICAgICAgaW5zdGVhZCwgc2VlIDpjbGFzczpgdXJsbGliMy5Qcm94eU1hbmFnZXJgCgogICAgOnBhcmFtIFxcXFwqKmNvbm5fa3c6CiAgICAgICAgQWRkaXRpb25hbCBwYXJhbWV0ZXJzIGFyZSB1c2VkIHRvIGNyZWF0ZSBmcmVzaCA6Y2xhc3M6YHVybGxpYjMuY29ubmVjdGlvbi5IVFRQQ29ubmVjdGlvbmAsCiAgICAgICAgOmNsYXNzOmB1cmxsaWIzLmNvbm5lY3Rpb24uSFRUUFNDb25uZWN0aW9uYCBpbnN0YW5jZXMuCiAgICBcIlwiXCIKCiAgICBzY2hlbWUgPSBcImh0dHBcIgogICAgQ29ubmVjdGlvbkNscyA9IEhUVFBDb25uZWN0aW9uCiAgICBSZXNwb25zZUNscyA9IEhUVFBSZXNwb25zZQoKICAgIGRlZiBfX2luaXRfXygKICAgICAgICBzZWxmLAogICAgICAgIGhvc3QsCiAgICAgICAgcG9ydD1Ob25lLAogICAgICAgIHN0cmljdD1GYWxzZSwKICAgICAgICB0aW1lb3V0PVRpbWVvdXQuREVGQVVMVF9USU1FT1VULAogICAgICAgIG1heHNpemU9MSwKICAgICAgICBibG9jaz1GYWxzZSwKICAgICAgICBoZWFkZXJzPU5vbmUsCiAgICAgICAgcmV0cmllcz1Ob25lLAogICAgICAgIF9wcm94eT1Ob25lLAogICAgICAgIF9wcm94eV9oZWFkZXJzPU5vbmUsCiAgICAgICAgX3Byb3h5X2NvbmZpZz1Ob25lLAogICAgICAgICoqY29ubl9rdwogICAgKToKICAgICAgICBDb25uZWN0aW9uUG9vbC5fX2luaXRfXyhzZWxmLCBob3N0LCBwb3J0KQogICAgICAgIFJlcXVlc3RNZXRob2RzLl9faW5pdF9fKHNlbGYsIGhlYWRlcnMpCgogICAgICAgIHNlbGYuc3RyaWN0ID0gc3RyaWN0CgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHRpbWVvdXQsIFRpbWVvdXQpOgogICAgICAgICAgICB0aW1lb3V0ID0gVGltZW91dC5mcm9tX2Zsb2F0KHRpbWVvdXQpCgogICAgICAgIGlmIHJldHJpZXMgaXMgTm9uZToKICAgICAgICAgICAgcmV0cmllcyA9IFJldHJ5LkRFRkFVTFQKCiAgICAgICAgc2VsZi50aW1lb3V0ID0gdGltZW91dAogICAgICAgIHNlbGYucmV0cmllcyA9IHJldHJpZXMKCiAgICAgICAgc2VsZi5wb29sID0gc2VsZi5RdWV1ZUNscyhtYXhzaXplKQogICAgICAgIHNlbGYuYmxvY2sgPSBibG9jawoKICAgICAgICBzZWxmLnByb3h5ID0gX3Byb3h5CiAgICAgICAgc2VsZi5wcm94eV9oZWFkZXJzID0gX3Byb3h5X2hlYWRlcnMgb3Ige30KICAgICAgICBzZWxmLnByb3h5X2NvbmZpZyA9IF9wcm94eV9jb25maWcKCiAgICAgICAgIyBGaWxsIHRoZSBxdWV1ZSB1cCBzbyB0aGF0IGRvaW5nIGdldCgpIG9uIGl0IHdpbGwgYmxvY2sgcHJvcGVybHkKICAgICAgICBmb3IgXyBpbiB4cmFuZ2UobWF4c2l6ZSk6CiAgICAgICAgICAgIHNlbGYucG9vbC5wdXQoTm9uZSkKCiAgICAgICAgIyBUaGVzZSBhcmUgbW9zdGx5IGZvciB0ZXN0aW5nIGFuZCBkZWJ1Z2dpbmcgcHVycG9zZXMuCiAgICAgICAgc2VsZi5udW1fY29ubmVjdGlvbnMgPSAwCiAgICAgICAgc2VsZi5udW1fcmVxdWVzdHMgPSAwCiAgICAgICAgc2VsZi5jb25uX2t3ID0gY29ubl9rdwoKICAgICAgICBpZiBzZWxmLnByb3h5OgogICAgICAgICAgICAjIEVuYWJsZSBOYWdsZSdzIGFsZ29yaXRobSBmb3IgcHJveGllcywgdG8gYXZvaWQgcGFja2V0IGZyYWdtZW50YXRpb24uCiAgICAgICAgICAgICMgV2UgY2Fubm90IGtub3cgaWYgdGhlIHVzZXIgaGFzIGFkZGVkIGRlZmF1bHQgc29ja2V0IG9wdGlvbnMsIHNvIHdlIGNhbm5vdCByZXBsYWNlIHRoZQogICAgICAgICAgICAjIGxpc3QuCiAgICAgICAgICAgIHNlbGYuY29ubl9rdy5zZXRkZWZhdWx0KFwic29ja2V0X29wdGlvbnNcIiwgW10pCgogICAgICAgICAgICBzZWxmLmNvbm5fa3dbXCJwcm94eVwiXSA9IHNlbGYucHJveHkKICAgICAgICAgICAgc2VsZi5jb25uX2t3W1wicHJveHlfY29uZmlnXCJdID0gc2VsZi5wcm94eV9jb25maWcKCiAgICBkZWYgX25ld19jb25uKHNlbGYpOgogICAgICAgIFwiXCJcIgogICAgICAgIFJldHVybiBhIGZyZXNoIDpjbGFzczpgSFRUUENvbm5lY3Rpb25gLgogICAgICAgIFwiXCJcIgogICAgICAgIHNlbGYubnVtX2Nvbm5lY3Rpb25zICs9IDEKICAgICAgICBsb2cuZGVidWcoCiAgICAgICAgICAgIFwiU3RhcnRpbmcgbmV3IEhUVFAgY29ubmVjdGlvbiAoJWQpOiAlczolc1wiLAogICAgICAgICAgICBzZWxmLm51bV9jb25uZWN0aW9ucywKICAgICAgICAgICAgc2VsZi5ob3N0LAogICAgICAgICAgICBzZWxmLnBvcnQgb3IgXCI4MFwiLAogICAgICAgICkKCiAgICAgICAgY29ubiA9IHNlbGYuQ29ubmVjdGlvbkNscygKICAgICAgICAgICAgaG9zdD1zZWxmLmhvc3QsCiAgICAgICAgICAgIHBvcnQ9c2VsZi5wb3J0LAogICAgICAgICAgICB0aW1lb3V0PXNlbGYudGltZW91dC5jb25uZWN0X3RpbWVvdXQsCiAgICAgICAgICAgIHN0cmljdD1zZWxmLnN0cmljdCwKICAgICAgICAgICAgKipzZWxmLmNvbm5fa3cKICAgICAgICApCiAgICAgICAgcmV0dXJuIGNvbm4KCiAgICBkZWYgX2dldF9jb25uKHNlbGYsIHRpbWVvdXQ9Tm9uZSk6CiAgICAgICAgXCJcIlwiCiAgICAgICAgR2V0IGEgY29ubmVjdGlvbi4gV2lsbCByZXR1cm4gYSBwb29sZWQgY29ubmVjdGlvbiBpZiBvbmUgaXMgYXZhaWxhYmxlLgoKICAgICAgICBJZiBubyBjb25uZWN0aW9ucyBhcmUgYXZhaWxhYmxlIGFuZCA6cHJvcDpgLmJsb2NrYCBpcyBgYEZhbHNlYGAsIHRoZW4gYQogICAgICAgIGZyZXNoIGNvbm5lY3Rpb24gaXMgcmV0dXJuZWQuCgogICAgICAgIDpwYXJhbSB0aW1lb3V0OgogICAgICAgICAgICBTZWNvbmRzIHRvIHdhaXQgYmVmb3JlIGdpdmluZyB1cCBhbmQgcmFpc2luZwogICAgICAgICAgICA6Y2xhc3M6YHVybGxpYjMuZXhjZXB0aW9ucy5FbXB0eVBvb2xFcnJvcmAgaWYgdGhlIHBvb2wgaXMgZW1wdHkgYW5kCiAgICAgICAgICAgIDpwcm9wOmAuYmxvY2tgIGlzIGBgVHJ1ZWBgLgogICAgICAgIFwiXCJcIgogICAgICAgIGNvbm4gPSBOb25lCiAgICAgICAgdHJ5OgogICAgICAgICAgICBjb25uID0gc2VsZi5wb29sLmdldChibG9jaz1zZWxmLmJsb2NrLCB0aW1lb3V0PXRpbWVvdXQpCgogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjogICMgc2VsZi5wb29sIGlzIE5vbmUKICAgICAgICAgICAgcmFpc2UgQ2xvc2VkUG9vbEVycm9yKHNlbGYsIFwiUG9vbCBpcyBjbG9zZWQuXCIpCgogICAgICAgIGV4Y2VwdCBxdWV1ZS5FbXB0eToKICAgICAgICAgICAgaWYgc2VsZi5ibG9jazoKICAgICAgICAgICAgICAgIHJhaXNlIEVtcHR5UG9vbEVycm9yKAogICAgICAgICAgICAgICAgICAgIHNlbGYsCiAgICAgICAgICAgICAgICAgICAgXCJQb29sIHJlYWNoZWQgbWF4aW11bSBzaXplIGFuZCBubyBtb3JlIGNvbm5lY3Rpb25zIGFyZSBhbGxvd2VkLlwiLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICBwYXNzICAjIE9oIHdlbGwsIHdlJ2xsIGNyZWF0ZSBhIG5ldyBjb25uZWN0aW9uIHRoZW4KCiAgICAgICAgIyBJZiB0aGlzIGlzIGEgcGVyc2lzdGVudCBjb25uZWN0aW9uLCBjaGVjayBpZiBpdCBnb3QgZGlzY29ubmVjdGVkCiAgICAgICAgaWYgY29ubiBhbmQgaXNfY29ubmVjdGlvbl9kcm9wcGVkKGNvbm4pOgogICAgICAgICAgICBsb2cuZGVidWcoXCJSZXNldHRpbmcgZHJvcHBlZCBjb25uZWN0aW9uOiAlc1wiLCBzZWxmLmhvc3QpCiAgICAgICAgICAgIGNvbm4uY2xvc2UoKQogICAgICAgICAgICBpZiBnZXRhdHRyKGNvbm4sIFwiYXV0b19vcGVuXCIsIDEpID09IDA6CiAgICAgICAgICAgICAgICAjIFRoaXMgaXMgYSBwcm94aWVkIGNvbm5lY3Rpb24gdGhhdCBoYXMgYmVlbiBtdXRhdGVkIGJ5CiAgICAgICAgICAgICAgICAjIGh0dHAuY2xpZW50Ll90dW5uZWwoKSBhbmQgY2Fubm90IGJlIHJldXNlZCAoc2luY2UgaXQgd291bGQKICAgICAgICAgICAgICAgICMgYXR0ZW1wdCB0byBieXBhc3MgdGhlIHByb3h5KQogICAgICAgICAgICAgICAgY29ubiA9IE5vbmUKCiAgICAgICAgcmV0dXJuIGNvbm4gb3Igc2VsZi5fbmV3X2Nvbm4oKQoKICAgIGRlZiBfcHV0X2Nvbm4oc2VsZiwgY29ubik6CiAgICAgICAgXCJcIlwiCiAgICAgICAgUHV0IGEgY29ubmVjdGlvbiBiYWNrIGludG8gdGhlIHBvb2wuCgogICAgICAgIDpwYXJhbSBjb25uOgogICAgICAgICAgICBDb25uZWN0aW9uIG9iamVjdCBmb3IgdGhlIGN1cnJlbnQgaG9zdCBhbmQgcG9ydCBhcyByZXR1cm5lZCBieQogICAgICAgICAgICA6bWV0aDpgLl9uZXdfY29ubmAgb3IgOm1ldGg6YC5fZ2V0X2Nvbm5gLgoKICAgICAgICBJZiB0aGUgcG9vbCBpcyBhbHJlYWR5IGZ1bGwsIHRoZSBjb25uZWN0aW9uIGlzIGNsb3NlZCBhbmQgZGlzY2FyZGVkCiAgICAgICAgYmVjYXVzZSB3ZSBleGNlZWRlZCBtYXhzaXplLiBJZiBjb25uZWN0aW9ucyBhcmUgZGlzY2FyZGVkIGZyZXF1ZW50bHksCiAgICAgICAgdGhlbiBtYXhzaXplIHNob3VsZCBiZSBpbmNyZWFzZWQuCgogICAgICAgIElmIHRoZSBwb29sIGlzIGNsb3NlZCwgdGhlbiB0aGUgY29ubmVjdGlvbiB3aWxsIGJlIGNsb3NlZCBhbmQgZGlzY2FyZGVkLgogICAgICAgIFwiXCJcIgogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5wb29sLnB1dChjb25uLCBibG9jaz1GYWxzZSkKICAgICAgICAgICAgcmV0dXJuICAjIEV2ZXJ5dGhpbmcgaXMgZGFuZHksIGRvbmUuCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOgogICAgICAgICAgICAjIHNlbGYucG9vbCBpcyBOb25lLgogICAgICAgICAgICBwYXNzCiAgICAgICAgZXhjZXB0IHF1ZXVlLkZ1bGw6CiAgICAgICAgICAgICMgVGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuIGlmIHNlbGYuYmxvY2sgPT0gVHJ1ZQogICAgICAgICAgICBsb2cud2FybmluZygKICAgICAgICAgICAgICAgIFwiQ29ubmVjdGlvbiBwb29sIGlzIGZ1bGwsIGRpc2NhcmRpbmcgY29ubmVjdGlvbjogJXMuIENvbm5lY3Rpb24gcG9vbCBzaXplOiAlc1wiLAogICAgICAgICAgICAgICAgc2VsZi5ob3N0LAogICAgICAgICAgICAgICAgc2VsZi5wb29sLnFzaXplKCksCiAgICAgICAgICAgICkKICAgICAgICAjIENvbm5lY3Rpb24gbmV2ZXIgZ290IHB1dCBiYWNrIGludG8gdGhlIHBvb2wsIGNsb3NlIGl0LgogICAgICAgIGlmIGNvbm46CiAgICAgICAgICAgIGNvbm4uY2xvc2UoKQoKICAgIGRlZiBfdmFsaWRhdGVfY29ubihzZWxmLCBjb25uKToKICAgICAgICBcIlwiXCIKICAgICAgICBDYWxsZWQgcmlnaHQgYmVmb3JlIGEgcmVxdWVzdCBpcyBtYWRlLCBhZnRlciB0aGUgc29ja2V0IGlzIGNyZWF0ZWQuCiAgICAgICAgXCJcIlwiCiAgICAgICAgcGFzcwoKICAgIGRlZiBfcHJlcGFyZV9wcm94eShzZWxmLCBjb25uKToKICAgICAgICAjIE5vdGhpbmcgdG8gZG8gZm9yIEhUVFAgY29ubmVjdGlvbnMuCiAgICAgICAgcGFzcwoKICAgIGRlZiBfZ2V0X3RpbWVvdXQoc2VsZiwgdGltZW91dCk6CiAgICAgICAgXCJcIlwiSGVscGVyIHRoYXQgYWx3YXlzIHJldHVybnMgYSA6Y2xhc3M6YHVybGxpYjMudXRpbC5UaW1lb3V0YFwiXCJcIgogICAgICAgIGlmIHRpbWVvdXQgaXMgX0RlZmF1bHQ6CiAgICAgICAgICAgIHJldHVybiBzZWxmLnRpbWVvdXQuY2xvbmUoKQoKICAgICAgICBpZiBpc2luc3RhbmNlKHRpbWVvdXQsIFRpbWVvdXQpOgogICAgICAgICAgICByZXR1cm4gdGltZW91dC5jbG9uZSgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyBVc2VyIHBhc3NlZCB1cyBhbiBpbnQvZmxvYXQuIFRoaXMgaXMgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LAogICAgICAgICAgICAjIGNhbiBiZSByZW1vdmVkIGxhdGVyCiAgICAgICAgICAgIHJldHVybiBUaW1lb3V0LmZyb21fZmxvYXQodGltZW91dCkKCiAgICBkZWYgX3JhaXNlX3RpbWVvdXQoc2VsZiwgZXJyLCB1cmwsIHRpbWVvdXRfdmFsdWUpOgogICAgICAgIFwiXCJcIklzIHRoZSBlcnJvciBhY3R1YWxseSBhIHRpbWVvdXQ/IFdpbGwgcmFpc2UgYSBSZWFkVGltZW91dCBvciBwYXNzXCJcIlwiCgogICAgICAgIGlmIGlzaW5zdGFuY2UoZXJyLCBTb2NrZXRUaW1lb3V0KToKICAgICAgICAgICAgcmFpc2UgUmVhZFRpbWVvdXRFcnJvcigKICAgICAgICAgICAgICAgIHNlbGYsIHVybCwgXCJSZWFkIHRpbWVkIG91dC4gKHJlYWQgdGltZW91dD0lcylcIiAlIHRpbWVvdXRfdmFsdWUKICAgICAgICAgICAgKQoKICAgICAgICAjIFNlZSB0aGUgYWJvdmUgY29tbWVudCBhYm91dCBFQUdBSU4gaW4gUHl0aG9uIDMuIEluIFB5dGhvbiAyIHdlIGhhdmUKICAgICAgICAjIHRvIHNwZWNpZmljYWxseSBjYXRjaCBpdCBhbmQgdGhyb3cgdGhlIHRpbWVvdXQgZXJyb3IKICAgICAgICBpZiBoYXNhdHRyKGVyciwgXCJlcnJub1wiKSBhbmQgZXJyLmVycm5vIGluIF9ibG9ja2luZ19lcnJub3M6CiAgICAgICAgICAgIHJhaXNlIFJlYWRUaW1lb3V0RXJyb3IoCiAgICAgICAgICAgICAgICBzZWxmLCB1cmwsIFwiUmVhZCB0aW1lZCBvdXQuIChyZWFkIHRpbWVvdXQ9JXMpXCIgJSB0aW1lb3V0X3ZhbHVlCiAgICAgICAgICAgICkKCiAgICAgICAgIyBDYXRjaCBwb3NzaWJsZSByZWFkIHRpbWVvdXRzIHRocm93biBhcyBTU0wgZXJyb3JzLiBJZiBub3QgdGhlCiAgICAgICAgIyBjYXNlLCByZXRocm93IHRoZSBvcmlnaW5hbC4gV2UgbmVlZCB0byBkbyB0aGlzIGJlY2F1c2Ugb2Y6CiAgICAgICAgIyBodHRwOi8vYnVncy5weXRob24ub3JnL2lzc3VlMTAyNzIKICAgICAgICBpZiBcInRpbWVkIG91dFwiIGluIHN0cihlcnIpIG9yIFwiZGlkIG5vdCBjb21wbGV0ZSAocmVhZClcIiBpbiBzdHIoCiAgICAgICAgICAgIGVycgogICAgICAgICk6ICAjIFB5dGhvbiA8IDIuNy40CiAgICAgICAgICAgIHJhaXNlIFJlYWRUaW1lb3V0RXJyb3IoCiAgICAgICAgICAgICAgICBzZWxmLCB1cmwsIFwiUmVhZCB0aW1lZCBvdXQuIChyZWFkIHRpbWVvdXQ9JXMpXCIgJSB0aW1lb3V0X3ZhbHVlCiAgICAgICAgICAgICkKCiAgICBkZWYgX21ha2VfcmVxdWVzdCgKICAgICAgICBzZWxmLCBjb25uLCBtZXRob2QsIHVybCwgdGltZW91dD1fRGVmYXVsdCwgY2h1bmtlZD1GYWxzZSwgKipodHRwbGliX3JlcXVlc3Rfa3cKICAgICk6CiAgICAgICAgXCJcIlwiCiAgICAgICAgUGVyZm9ybSBhIHJlcXVlc3Qgb24gYSBnaXZlbiB1cmxsaWIgY29ubmVjdGlvbiBvYmplY3QgdGFrZW4gZnJvbSBvdXIKICAgICAgICBwb29sLgoKICAgICAgICA6cGFyYW0gY29ubjoKICAgICAgICAgICAgYSBjb25uZWN0aW9uIGZyb20gb25lIG9mIG91ciBjb25uZWN0aW9uIHBvb2xzCgogICAgICAgIDpwYXJhbSB0aW1lb3V0OgogICAgICAgICAgICBTb2NrZXQgdGltZW91dCBpbiBzZWNvbmRzIGZvciB0aGUgcmVxdWVzdC4gVGhpcyBjYW4gYmUgYQogICAgICAgICAgICBmbG9hdCBvciBpbnRlZ2VyLCB3aGljaCB3aWxsIHNldCB0aGUgc2FtZSB0aW1lb3V0IHZhbHVlIGZvcgogICAgICAgICAgICB0aGUgc29ja2V0IGNvbm5lY3QgYW5kIHRoZSBzb2NrZXQgcmVhZCwgb3IgYW4gaW5zdGFuY2Ugb2YKICAgICAgICAgICAgOmNsYXNzOmB1cmxsaWIzLnV0aWwuVGltZW91dGAsIHdoaWNoIGdpdmVzIHlvdSBtb3JlIGZpbmUtZ3JhaW5lZAogICAgICAgICAgICBjb250cm9sIG92ZXIgeW91ciB0aW1lb3V0cy4KICAgICAgICBcIlwiXCIKICAgICAgICBzZWxmLm51bV9yZXF1ZXN0cyArPSAxCgogICAgICAgIHRpbWVvdXRfb2JqID0gc2VsZi5fZ2V0X3RpbWVvdXQodGltZW91dCkKICAgICAgICB0aW1lb3V0X29iai5zdGFydF9jb25uZWN0KCkKICAgICAgICBjb25uLnRpbWVvdXQgPSB0aW1lb3V0X29iai5jb25uZWN0X3RpbWVvdXQKCiAgICAgICAgIyBUcmlnZ2VyIGFueSBleHRyYSB2YWxpZGF0aW9uIHdlIG5lZWQgdG8gZG8uCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLl92YWxpZGF0ZV9jb25uKGNvbm4pCiAgICAgICAgZXhjZXB0IChTb2NrZXRUaW1lb3V0LCBCYXNlU1NMRXJyb3IpIGFzIGU6CiAgICAgICAgICAgICMgUHkyIHJhaXNlcyB0aGlzIGFzIGEgQmFzZVNTTEVycm9yLCBQeTMgcmFpc2VzIGl0IGFzIHNvY2tldCB0aW1lb3V0LgogICAgICAgICAgICBzZWxmLl9yYWlzZV90aW1lb3V0KGVycj1lLCB1cmw9dXJsLCB0aW1lb3V0X3ZhbHVlPWNvbm4udGltZW91dCkKICAgICAgICAgICAgcmFpc2UKCiAgICAgICAgIyBjb25uLnJlcXVlc3QoKSBjYWxscyBodHRwLmNsaWVudC4qLnJlcXVlc3QsIG5vdCB0aGUgbWV0aG9kIGluCiAgICAgICAgIyB1cmxsaWIzLnJlcXVlc3QuIEl0IGFsc28gY2FsbHMgbWFrZWZpbGUgKHJlY3YpIG9uIHRoZSBzb2NrZXQuCiAgICAgICAgdHJ5OgogICAgICAgICAgICBpZiBjaHVua2VkOgogICAgICAgICAgICAgICAgY29ubi5yZXF1ZXN0X2NodW5rZWQobWV0aG9kLCB1cmwsICoqaHR0cGxpYl9yZXF1ZXN0X2t3KQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgY29ubi5yZXF1ZXN0KG1ldGhvZCwgdXJsLCAqKmh0dHBsaWJfcmVxdWVzdF9rdykKCiAgICAgICAgIyBXZSBhcmUgc3dhbGxvd2luZyBCcm9rZW5QaXBlRXJyb3IgKGVycm5vLkVQSVBFKSBzaW5jZSB0aGUgc2VydmVyIGlzCiAgICAgICAgIyBsZWdpdGltYXRlbHkgYWJsZSB0byBjbG9zZSB0aGUgY29ubmVjdGlvbiBhZnRlciBzZW5kaW5nIGEgdmFsaWQgcmVzcG9uc2UuCiAgICAgICAgIyBXaXRoIHRoaXMgYmVoYXZpb3VyLCB0aGUgcmVjZWl2ZWQgcmVzcG9uc2UgaXMgc3RpbGwgcmVhZGFibGUuCiAgICAgICAgZXhjZXB0IEJyb2tlblBpcGVFcnJvcjoKICAgICAgICAgICAgIyBQeXRob24gMwogICAgICAgICAgICBwYXNzCiAgICAgICAgZXhjZXB0IElPRXJyb3IgYXMgZToKICAgICAgICAgICAgIyBQeXRob24gMiBhbmQgbWFjT1MvTGludXgKICAgICAgICAgICAgIyBFUElQRSBhbmQgRVNIVVRET1dOIGFyZSBCcm9rZW5QaXBlRXJyb3Igb24gUHl0aG9uIDIsIGFuZCBFUFJPVE9UWVBFIGlzIG5lZWRlZCBvbiBtYWNPUwogICAgICAgICAgICAjIGh0dHBzOi8vZXJpY2t0LmdpdGh1Yi5pby9ibG9nLzIwMTQvMTEvMTkvYWR2ZW50dXJlcy1pbi1kZWJ1Z2dpbmctYS1wb3RlbnRpYWwtb3N4LWtlcm5lbC1idWcvCiAgICAgICAgICAgIGlmIGUuZXJybm8gbm90IGluIHsKICAgICAgICAgICAgICAgIGVycm5vLkVQSVBFLAogICAgICAgICAgICAgICAgZXJybm8uRVNIVVRET1dOLAogICAgICAgICAgICAgICAgZXJybm8uRVBST1RPVFlQRSwKICAgICAgICAgICAgfToKICAgICAgICAgICAgICAgIHJhaXNlCgogICAgICAgICMgUmVzZXQgdGhlIHRpbWVvdXQgZm9yIHRoZSByZWN2KCkgb24gdGhlIHNvY2tldAogICAgICAgIHJlYWRfdGltZW91dCA9IHRpbWVvdXRfb2JqLnJlYWRfdGltZW91dAoKICAgICAgICAjIEFwcCBFbmdpbmUgZG9lc24ndCBoYXZlIGEgc29jayBhdHRyCiAgICAgICAgaWYgZ2V0YXR0cihjb25uLCBcInNvY2tcIiwgTm9uZSk6CiAgICAgICAgICAgICMgSW4gUHl0aG9uIDMgc29ja2V0LnB5IHdpbGwgY2F0Y2ggRUFHQUlOIGFuZCByZXR1cm4gTm9uZSB3aGVuIHlvdQogICAgICAgICAgICAjIHRyeSBhbmQgcmVhZCBpbnRvIHRoZSBmaWxlIHBvaW50ZXIgY3JlYXRlZCBieSBodHRwLmNsaWVudCwgd2hpY2gKICAgICAgICAgICAgIyBpbnN0ZWFkIHJhaXNlcyBhIEJhZFN0YXR1c0xpbmUgZXhjZXB0aW9uLiBJbnN0ZWFkIG9mIGNhdGNoaW5nCiAgICAgICAgICAgICMgdGhlIGV4Y2VwdGlvbiBhbmQgYXNzdW1pbmcgYWxsIEJhZFN0YXR1c0xpbmUgZXhjZXB0aW9ucyBhcmUgcmVhZAogICAgICAgICAgICAjIHRpbWVvdXRzLCBjaGVjayBmb3IgYSB6ZXJvIHRpbWVvdXQgYmVmb3JlIG1ha2luZyB0aGUgcmVxdWVzdC4KICAgICAgICAgICAgaWYgcmVhZF90aW1lb3V0ID09IDA6CiAgICAgICAgICAgICAgICByYWlzZSBSZWFkVGltZW91dEVycm9yKAogICAgICAgICAgICAgICAgICAgIHNlbGYsIHVybCwgXCJSZWFkIHRpbWVkIG91dC4gKHJlYWQgdGltZW91dD0lcylcIiAlIHJlYWRfdGltZW91dAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICBpZiByZWFkX3RpbWVvdXQgaXMgVGltZW91dC5ERUZBVUxUX1RJTUVPVVQ6CiAgICAgICAgICAgICAgICBjb25uLnNvY2suc2V0dGltZW91dChzb2NrZXQuZ2V0ZGVmYXVsdHRpbWVvdXQoKSkKICAgICAgICAgICAgZWxzZTogICMgTm9uZSBvciBhIHZhbHVlCiAgICAgICAgICAgICAgICBjb25uLnNvY2suc2V0dGltZW91dChyZWFkX3RpbWVvdXQpCgogICAgICAgICMgUmVjZWl2ZSB0aGUgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyCiAgICAgICAgdHJ5OgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAjIFB5dGhvbiAyLjcsIHVzZSBidWZmZXJpbmcgb2YgSFRUUCByZXNwb25zZXMKICAgICAgICAgICAgICAgIGh0dHBsaWJfcmVzcG9uc2UgPSBjb25uLmdldHJlc3BvbnNlKGJ1ZmZlcmluZz1UcnVlKQogICAgICAgICAgICBleGNlcHQgVHlwZUVycm9yOgogICAgICAgICAgICAgICAgIyBQeXRob24gMwogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGh0dHBsaWJfcmVzcG9uc2UgPSBjb25uLmdldHJlc3BvbnNlKCkKICAgICAgICAgICAgICAgIGV4Y2VwdCBCYXNlRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgIyBSZW1vdmUgdGhlIFR5cGVFcnJvciBmcm9tIHRoZSBleGNlcHRpb24gY2hhaW4gaW4KICAgICAgICAgICAgICAgICAgICAjIFB5dGhvbiAzIChpbmNsdWRpbmcgZm9yIGV4Y2VwdGlvbnMgbGlrZSBTeXN0ZW1FeGl0KS4KICAgICAgICAgICAgICAgICAgICAjIE90aGVyd2lzZSBpdCBsb29rcyBsaWtlIGEgYnVnIGluIHRoZSBjb2RlLgogICAgICAgICAgICAgICAgICAgIHNpeC5yYWlzZV9mcm9tKGUsIE5vbmUpCiAgICAgICAgZXhjZXB0IChTb2NrZXRUaW1lb3V0LCBCYXNlU1NMRXJyb3IsIFNvY2tldEVycm9yKSBhcyBlOgogICAgICAgICAgICBzZWxmLl9yYWlzZV90aW1lb3V0KGVycj1lLCB1cmw9dXJsLCB0aW1lb3V0X3ZhbHVlPXJlYWRfdGltZW91dCkKICAgICAgICAgICAgcmFpc2UKCiAgICAgICAgIyBBcHBFbmdpbmUgZG9lc24ndCBoYXZlIGEgdmVyc2lvbiBhdHRyLgogICAgICAgIGh0dHBfdmVyc2lvbiA9IGdldGF0dHIoY29ubiwgXCJfaHR0cF92c25fc3RyXCIsIFwiSFRUUC8/XCIpCiAgICAgICAgbG9nLmRlYnVnKAogICAgICAgICAgICAnJXM6Ly8lczolcyBcIiVzICVzICVzXCIgJXMgJXMnLAogICAgICAgICAgICBzZWxmLnNjaGVtZSwKICAgICAgICAgICAgc2VsZi5ob3N0LAogICAgICAgICAgICBzZWxmLnBvcnQsCiAgICAgICAgICAgIG1ldGhvZCwKICAgICAgICAgICAgdXJsLAogICAgICAgICAgICBodHRwX3ZlcnNpb24sCiAgICAgICAgICAgIGh0dHBsaWJfcmVzcG9uc2Uuc3RhdHVzLAogICAgICAgICAgICBodHRwbGliX3Jlc3BvbnNlLmxlbmd0aCwKICAgICAgICApCgogICAgICAgIHRyeToKICAgICAgICAgICAgYXNzZXJ0X2hlYWRlcl9wYXJzaW5nKGh0dHBsaWJfcmVzcG9uc2UubXNnKQogICAgICAgIGV4Y2VwdCAoSGVhZGVyUGFyc2luZ0Vycm9yLCBUeXBlRXJyb3IpIGFzIGhwZTogICMgUGxhdGZvcm0tc3BlY2lmaWM6IFB5dGhvbiAzCiAgICAgICAgICAgIGxvZy53YXJuaW5nKAogICAgICAgICAgICAgICAgXCJGYWlsZWQgdG8gcGFyc2UgaGVhZGVycyAodXJsPSVzKTogJXNcIiwKICAgICAgICAgICAgICAgIHNlbGYuX2Fic29sdXRlX3VybCh1cmwpLAogICAgICAgICAgICAgICAgaHBlLAogICAgICAgICAgICAgICAgZXhjX2luZm89VHJ1ZSwKICAgICAgICAgICAgKQoKICAgICAgICByZXR1cm4gaHR0cGxpYl9yZXNwb25zZQoKICAgIGRlZiBfYWJzb2x1dGVfdXJsKHNlbGYsIHBhdGgpOgogICAgICAgIHJldHVybiBVcmwoc2NoZW1lPXNlbGYuc2NoZW1lLCBob3N0PXNlbGYuaG9zdCwgcG9ydD1zZWxmLnBvcnQsIHBhdGg9cGF0aCkudXJsCgogICAgZGVmIGNsb3NlKHNlbGYpOgogICAgICAgIFwiXCJcIgogICAgICAgIENsb3NlIGFsbCBwb29sZWQgY29ubmVjdGlvbnMgYW5kIGRpc2FibGUgdGhlIHBvb2wuCiAgICAgICAgXCJcIlwiCiAgICAgICAgaWYgc2VsZi5wb29sIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybgogICAgICAgICMgRGlzYWJsZSBhY2Nlc3MgdG8gdGhlIHBvb2wKICAgICAgICBvbGRfcG9vbCwgc2VsZi5wb29sID0gc2VsZi5wb29sLCBOb25lCgogICAgICAgIHRyeToKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGNvbm4gPSBvbGRfcG9vbC5nZXQoYmxvY2s9RmFsc2UpCiAgICAgICAgICAgICAgICBpZiBjb25uOgogICAgICAgICAgICAgICAgICAgIGNvbm4uY2xvc2UoKQoKICAgICAgICBleGNlcHQgcXVldWUuRW1wdHk6CiAgICAgICAgICAgIHBhc3MgICMgRG9uZS4KCiAgICBkZWYgaXNfc2FtZV9ob3N0KHNlbGYsIHVybCk6CiAgICAgICAgXCJcIlwiCiAgICAgICAgQ2hlY2sgaWYgdGhlIGdpdmVuIGBgdXJsYGAgaXMgYSBtZW1iZXIgb2YgdGhlIHNhbWUgaG9zdCBhcyB0aGlzCiAgICAgICAgY29ubmVjdGlvbiBwb29sLgogICAgICAgIFwiXCJcIgogICAgICAgIGlmIHVybC5zdGFydHN3aXRoKFwiL1wiKToKICAgICAgICAgICAgcmV0dXJuIFRydWUKCiAgICAgICAgIyBUT0RPOiBBZGQgb3B0aW9uYWwgc3VwcG9ydCBmb3Igc29ja2V0LmdldGhvc3RieW5hbWUgY2hlY2tpbmcuCiAgICAgICAgc2NoZW1lLCBob3N0LCBwb3J0ID0gZ2V0X2hvc3QodXJsKQogICAgICAgIGlmIGhvc3QgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGhvc3QgPSBfbm9ybWFsaXplX2hvc3QoaG9zdCwgc2NoZW1lPXNjaGVtZSkKCiAgICAgICAgIyBVc2UgZXhwbGljaXQgZGVmYXVsdCBwb3J0IGZvciBjb21wYXJpc29uIHdoZW4gbm9uZSBpcyBnaXZlbgogICAgICAgIGlmIHNlbGYucG9ydCBhbmQgbm90IHBvcnQ6CiAgICAgICAgICAgIHBvcnQgPSBwb3J0X2J5X3NjaGVtZS5nZXQoc2NoZW1lKQogICAgICAgIGVsaWYgbm90IHNlbGYucG9ydCBhbmQgcG9ydCA9PSBwb3J0X2J5X3NjaGVtZS5nZXQoc2NoZW1lKToKICAgICAgICAgICAgcG9ydCA9IE5vbmUKCiAgICAgICAgcmV0dXJuIChzY2hlbWUsIGhvc3QsIHBvcnQpID09IChzZWxmLnNjaGVtZSwgc2VsZi5ob3N0LCBzZWxmLnBvcnQpCgogICAgZGVmIHVybG9wZW4oCiAgICAgICAgc2VsZiwKICAgICAgICBtZXRob2QsCiAgICAgICAgdXJsLAogICAgICAgIGJvZHk9Tm9uZSwKICAgICAgICBoZWFkZXJzPU5vbmUsCiAgICAgICAgcmV0cmllcz1Ob25lLAogICAgICAgIHJlZGlyZWN0PVRydWUsCiAgICAgICAgYXNzZXJ0X3NhbWVfaG9zdD1UcnVlLAogICAgICAgIHRpbWVvdXQ9X0RlZmF1bHQsCiAgICAgICAgcG9vbF90aW1lb3V0PU5vbmUsCiAgICAgICAgcmVsZWFzZV9jb25uPU5vbmUsCiAgICAgICAgY2h1bmtlZD1GYWxzZSwKICAgICAgICBib2R5X3Bvcz1Ob25lLAogICAgICAgICoqcmVzcG9uc2Vfa3cKICAgICk6CiAgICAgICAgXCJcIlwiCiAgICAgICAgR2V0IGEgY29ubmVjdGlvbiBmcm9tIHRoZSBwb29sIGFuZCBwZXJmb3JtIGFuIEhUVFAgcmVxdWVzdC4gVGhpcyBpcyB0aGUKICAgICAgICBsb3dlc3QgbGV2ZWwgY2FsbCBmb3IgbWFraW5nIGEgcmVxdWVzdCwgc28geW91J2xsIG5lZWQgdG8gc3BlY2lmeSBhbGwKICAgICAgICB0aGUgcmF3IGRldGFpbHMuCgogICAgICAgIC4uIG5vdGU6OgoKICAgICAgICAgICBNb3JlIGNvbW1vbmx5LCBpdCdzIGFwcHJvcHJpYXRlIHRvIHVzZSBhIGNvbnZlbmllbmNlIG1ldGhvZCBwcm92aWRlZAogICAgICAgICAgIGJ5IDpjbGFzczpgLlJlcXVlc3RNZXRob2RzYCwgc3VjaCBhcyA6bWV0aDpgcmVxdWVzdGAuCgogICAgICAgIC4uIG5vdGU6OgoKICAgICAgICAgICBgcmVsZWFzZV9jb25uYCB3aWxsIG9ubHkgYmVoYXZlIGFzIGV4cGVjdGVkIGlmCiAgICAgICAgICAgYHByZWxvYWRfY29udGVudD1GYWxzZWAgYmVjYXVzZSB3ZSB3YW50IHRvIG1ha2UKICAgICAgICAgICBgcHJlbG9hZF9jb250ZW50PUZhbHNlYCB0aGUgZGVmYXVsdCBiZWhhdmlvdXIgc29tZWRheSBzb29uIHdpdGhvdXQKICAgICAgICAgICBicmVha2luZyBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS4KCiAgICAgICAgOnBhcmFtIG1ldGhvZDoKICAgICAgICAgICAgSFRUUCByZXF1ZXN0IG1ldGhvZCAoc3VjaCBhcyBHRVQsIFBPU1QsIFBVVCwgZXRjLikKCiAgICAgICAgOnBhcmFtIHVybDoKICAgICAgICAgICAgVGhlIFVSTCB0byBwZXJmb3JtIHRoZSByZXF1ZXN0IG9uLgoKICAgICAgICA6cGFyYW0gYm9keToKICAgICAgICAgICAgRGF0YSB0byBzZW5kIGluIHRoZSByZXF1ZXN0IGJvZHksIGVpdGhlciA6Y2xhc3M6YHN0cmAsIDpjbGFzczpgYnl0ZXNgLAogICAgICAgICAgICBhbiBpdGVyYWJsZSBvZiA6Y2xhc3M6YHN0cmAvOmNsYXNzOmBieXRlc2AsIG9yIGEgZmlsZS1saWtlIG9iamVjdC4KCiAgICAgICAgOnBhcmFtIGhlYWRlcnM6CiAgICAgICAgICAgIERpY3Rpb25hcnkgb2YgY3VzdG9tIGhlYWRlcnMgdG8gc2VuZCwgc3VjaCBhcyBVc2VyLUFnZW50LAogICAgICAgICAgICBJZi1Ob25lLU1hdGNoLCBldGMuIElmIE5vbmUsIHBvb2wgaGVhZGVycyBhcmUgdXNlZC4gSWYgcHJvdmlkZWQsCiAgICAgICAgICAgIHRoZXNlIGhlYWRlcnMgY29tcGxldGVseSByZXBsYWNlIGFueSBwb29sLXNwZWNpZmljIGhlYWRlcnMuCgogICAgICAgIDpwYXJhbSByZXRyaWVzOgogICAgICAgICAgICBDb25maWd1cmUgdGhlIG51bWJlciBvZiByZXRyaWVzIHRvIGFsbG93IGJlZm9yZSByYWlzaW5nIGEKICAgICAgICAgICAgOmNsYXNzOmB+dXJsbGliMy5leGNlcHRpb25zLk1heFJldHJ5RXJyb3JgIGV4Y2VwdGlvbi4KCiAgICAgICAgICAgIFBhc3MgYGBOb25lYGAgdG8gcmV0cnkgdW50aWwgeW91IHJlY2VpdmUgYSByZXNwb25zZS4gUGFzcyBhCiAgICAgICAgICAgIDpjbGFzczpgfnVybGxpYjMudXRpbC5yZXRyeS5SZXRyeWAgb2JqZWN0IGZvciBmaW5lLWdyYWluZWQgY29udHJvbAogICAgICAgICAgICBvdmVyIGRpZmZlcmVudCB0eXBlcyBvZiByZXRyaWVzLgogICAgICAgICAgICBQYXNzIGFuIGludGVnZXIgbnVtYmVyIHRvIHJldHJ5IGNvbm5lY3Rpb24gZXJyb3JzIHRoYXQgbWFueSB0aW1lcywKICAgICAgICAgICAgYnV0IG5vIG90aGVyIHR5cGVzIG9mIGVycm9ycy4gUGFzcyB6ZXJvIHRvIG5ldmVyIHJldHJ5LgoKICAgICAgICAgICAgSWYgYGBGYWxzZWBgLCB0aGVuIHJldHJpZXMgYXJlIGRpc2FibGVkIGFuZCBhbnkgZXhjZXB0aW9uIGlzIHJhaXNlZAogICAgICAgICAgICBpbW1lZGlhdGVseS4gQWxzbywgaW5zdGVhZCBvZiByYWlzaW5nIGEgTWF4UmV0cnlFcnJvciBvbiByZWRpcmVjdHMsCiAgICAgICAgICAgIHRoZSByZWRpcmVjdCByZXNwb25zZSB3aWxsIGJlIHJldHVybmVkLgoKICAgICAgICA6dHlwZSByZXRyaWVzOiA6Y2xhc3M6YH51cmxsaWIzLnV0aWwucmV0cnkuUmV0cnlgLCBGYWxzZSwgb3IgYW4gaW50LgoKICAgICAgICA6cGFyYW0gcmVkaXJlY3Q6CiAgICAgICAgICAgIElmIFRydWUsIGF1dG9tYXRpY2FsbHkgaGFuZGxlIHJlZGlyZWN0cyAoc3RhdHVzIGNvZGVzIDMwMSwgMzAyLAogICAgICAgICAgICAzMDMsIDMwNywgMzA4KS4gRWFjaCByZWRpcmVjdCBjb3VudHMgYXMgYSByZXRyeS4gRGlzYWJsaW5nIHJldHJpZXMKICAgICAgICAgICAgd2lsbCBkaXNhYmxlIHJlZGlyZWN0LCB0b28uCgogICAgICAgIDpwYXJhbSBhc3NlcnRfc2FtZV9ob3N0OgogICAgICAgICAgICBJZiBgYFRydWVgYCwgd2lsbCBtYWtlIHN1cmUgdGhhdCB0aGUgaG9zdCBvZiB0aGUgcG9vbCByZXF1ZXN0cyBpcwogICAgICAgICAgICBjb25zaXN0ZW50IGVsc2Ugd2lsbCByYWlzZSBIb3N0Q2hhbmdlZEVycm9yLiBXaGVuIGBgRmFsc2VgYCwgeW91IGNhbgogICAgICAgICAgICB1c2UgdGhlIHBvb2wgb24gYW4gSFRUUCBwcm94eSBhbmQgcmVxdWVzdCBmb3JlaWduIGhvc3RzLgoKICAgICAgICA6cGFyYW0gdGltZW91dDoKICAgICAgICAgICAgSWYgc3BlY2lmaWVkLCBvdmVycmlkZXMgdGhlIGRlZmF1bHQgdGltZW91dCBmb3IgdGhpcyBvbmUKICAgICAgICAgICAgcmVxdWVzdC4gSXQgbWF5IGJlIGEgZmxvYXQgKGluIHNlY29uZHMpIG9yIGFuIGluc3RhbmNlIG9mCiAgICAgICAgICAgIDpjbGFzczpgdXJsbGliMy51dGlsLlRpbWVvdXRgLgoKICAgICAgICA6cGFyYW0gcG9vbF90aW1lb3V0OgogICAgICAgICAgICBJZiBzZXQgYW5kIHRoZSBwb29sIGlzIHNldCB0byBibG9jaz1UcnVlLCB0aGVuIHRoaXMgbWV0aG9kIHdpbGwKICAgICAgICAgICAgYmxvY2sgZm9yIGBgcG9vbF90aW1lb3V0YGAgc2Vjb25kcyBhbmQgcmFpc2UgRW1wdHlQb29sRXJyb3IgaWYgbm8KICAgICAgICAgICAgY29ubmVjdGlvbiBpcyBhdmFpbGFibGUgd2l0aGluIHRoZSB0aW1lIHBlcmlvZC4KCiAgICAgICAgOnBhcmFtIHJlbGVhc2VfY29ubjoKICAgICAgICAgICAgSWYgRmFsc2UsIHRoZW4gdGhlIHVybG9wZW4gY2FsbCB3aWxsIG5vdCByZWxlYXNlIHRoZSBjb25uZWN0aW9uCiAgICAgICAgICAgIGJhY2sgaW50byB0aGUgcG9vbCBvbmNlIGEgcmVzcG9uc2UgaXMgcmVjZWl2ZWQgKGJ1dCB3aWxsIHJlbGVhc2UgaWYKICAgICAgICAgICAgeW91IHJlYWQgdGhlIGVudGlyZSBjb250ZW50cyBvZiB0aGUgcmVzcG9uc2Ugc3VjaCBhcyB3aGVuCiAgICAgICAgICAgIGBwcmVsb2FkX2NvbnRlbnQ9VHJ1ZWApLiBUaGlzIGlzIHVzZWZ1bCBpZiB5b3UncmUgbm90IHByZWxvYWRpbmcKICAgICAgICAgICAgdGhlIHJlc3BvbnNlJ3MgY29udGVudCBpbW1lZGlhdGVseS4gWW91IHdpbGwgbmVlZCB0byBjYWxsCiAgICAgICAgICAgIGBgci5yZWxlYXNlX2Nvbm4oKWBgIG9uIHRoZSByZXNwb25zZSBgYHJgYCB0byByZXR1cm4gdGhlIGNvbm5lY3Rpb24KICAgICAgICAgICAgYmFjayBpbnRvIHRoZSBwb29sLiBJZiBOb25lLCBpdCB0YWtlcyB0aGUgdmFsdWUgb2YKICAgICAgICAgICAgYGByZXNwb25zZV9rdy5nZXQoJ3ByZWxvYWRfY29udGVudCcsIFRydWUpYGAuCgogICAgICAgIDpwYXJhbSBjaHVua2VkOgogICAgICAgICAgICBJZiBUcnVlLCB1cmxsaWIzIHdpbGwgc2VuZCB0aGUgYm9keSB1c2luZyBjaHVua2VkIHRyYW5zZmVyCiAgICAgICAgICAgIGVuY29kaW5nLiBPdGhlcndpc2UsIHVybGxpYjMgd2lsbCBzZW5kIHRoZSBib2R5IHVzaW5nIHRoZSBzdGFuZGFyZAogICAgICAgICAgICBjb250ZW50LWxlbmd0aCBmb3JtLiBEZWZhdWx0cyB0byBGYWxzZS4KCiAgICAgICAgOnBhcmFtIGludCBib2R5X3BvczoKICAgICAgICAgICAgUG9zaXRpb24gdG8gc2VlayB0byBpbiBmaWxlLWxpa2UgYm9keSBpbiB0aGUgZXZlbnQgb2YgYSByZXRyeSBvcgogICAgICAgICAgICByZWRpcmVjdC4gVHlwaWNhbGx5IHRoaXMgd29uJ3QgbmVlZCB0byBiZSBzZXQgYmVjYXVzZSB1cmxsaWIzIHdpbGwKICAgICAgICAgICAgYXV0by1wb3B1bGF0ZSB0aGUgdmFsdWUgd2hlbiBuZWVkZWQuCgogICAgICAgIDpwYXJhbSBcXFxcKipyZXNwb25zZV9rdzoKICAgICAgICAgICAgQWRkaXRpb25hbCBwYXJhbWV0ZXJzIGFyZSBwYXNzZWQgdG8KICAgICAgICAgICAgOm1ldGg6YHVybGxpYjMucmVzcG9uc2UuSFRUUFJlc3BvbnNlLmZyb21faHR0cGxpYmAKICAgICAgICBcIlwiXCIKCiAgICAgICAgcGFyc2VkX3VybCA9IHBhcnNlX3VybCh1cmwpCiAgICAgICAgZGVzdGluYXRpb25fc2NoZW1lID0gcGFyc2VkX3VybC5zY2hlbWUKCiAgICAgICAgaWYgaGVhZGVycyBpcyBOb25lOgogICAgICAgICAgICBoZWFkZXJzID0gc2VsZi5oZWFkZXJzCgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHJldHJpZXMsIFJldHJ5KToKICAgICAgICAgICAgcmV0cmllcyA9IFJldHJ5LmZyb21faW50KHJldHJpZXMsIHJlZGlyZWN0PXJlZGlyZWN0LCBkZWZhdWx0PXNlbGYucmV0cmllcykKCiAgICAgICAgaWYgcmVsZWFzZV9jb25uIGlzIE5vbmU6CiAgICAgICAgICAgIHJlbGVhc2VfY29ubiA9IHJlc3BvbnNlX2t3LmdldChcInByZWxvYWRfY29udGVudFwiLCBUcnVlKQoKICAgICAgICAjIENoZWNrIGhvc3QKICAgICAgICBpZiBhc3NlcnRfc2FtZV9ob3N0IGFuZCBub3Qgc2VsZi5pc19zYW1lX2hvc3QodXJsKToKICAgICAgICAgICAgcmFpc2UgSG9zdENoYW5nZWRFcnJvcihzZWxmLCB1cmwsIHJldHJpZXMpCgogICAgICAgICMgRW5zdXJlIHRoYXQgdGhlIFVSTCB3ZSdyZSBjb25uZWN0aW5nIHRvIGlzIHByb3Blcmx5IGVuY29kZWQKICAgICAgICBpZiB1cmwuc3RhcnRzd2l0aChcIi9cIik6CiAgICAgICAgICAgIHVybCA9IHNpeC5lbnN1cmVfc3RyKF9lbmNvZGVfdGFyZ2V0KHVybCkpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgdXJsID0gc2l4LmVuc3VyZV9zdHIocGFyc2VkX3VybC51cmwpCgogICAgICAgIGNvbm4gPSBOb25lCgogICAgICAgICMgVHJhY2sgd2hldGhlciBgY29ubmAgbmVlZHMgdG8gYmUgcmVsZWFzZWQgYmVmb3JlCiAgICAgICAgIyByZXR1cm5pbmcvcmFpc2luZy9yZWN1cnNpbmcuIFVwZGF0ZSB0aGlzIHZhcmlhYmxlIGlmIG5lY2Vzc2FyeSwgYW5kCiAgICAgICAgIyBsZWF2ZSBgcmVsZWFzZV9jb25uYCBjb25zdGFudCB0aHJvdWdob3V0IHRoZSBmdW5jdGlvbi4gVGhhdCB3YXksIGlmCiAgICAgICAgIyB0aGUgZnVuY3Rpb24gcmVjdXJzZXMsIHRoZSBvcmlnaW5hbCB2YWx1ZSBvZiBgcmVsZWFzZV9jb25uYCB3aWxsIGJlCiAgICAgICAgIyBwYXNzZWQgZG93biBpbnRvIHRoZSByZWN1cnNpdmUgY2FsbCwgYW5kIGl0cyB2YWx1ZSB3aWxsIGJlIHJlc3BlY3RlZC4KICAgICAgICAjCiAgICAgICAgIyBTZWUgaXNzdWUgIzY1MSBbMV0gZm9yIGRldGFpbHMuCiAgICAgICAgIwogICAgICAgICMgWzFdIDxodHRwczovL2dpdGh1Yi5jb20vdXJsbGliMy91cmxsaWIzL2lzc3Vlcy82NTE+CiAgICAgICAgcmVsZWFzZV90aGlzX2Nvbm4gPSByZWxlYXNlX2Nvbm4KCiAgICAgICAgaHR0cF90dW5uZWxfcmVxdWlyZWQgPSBjb25uZWN0aW9uX3JlcXVpcmVzX2h0dHBfdHVubmVsKAogICAgICAgICAgICBzZWxmLnByb3h5LCBzZWxmLnByb3h5X2NvbmZpZywgZGVzdGluYXRpb25fc2NoZW1lCiAgICAgICAgKQoKICAgICAgICAjIE1lcmdlIHRoZSBwcm94eSBoZWFkZXJzLiBPbmx5IGRvbmUgd2hlbiBub3QgdXNpbmcgSFRUUCBDT05ORUNULiBXZQogICAgICAgICMgaGF2ZSB0byBjb3B5IHRoZSBoZWFkZXJzIGRpY3Qgc28gd2UgY2FuIHNhZmVseSBjaGFuZ2UgaXQgd2l0aG91dCB0aG9zZQogICAgICAgICMgY2hhbmdlcyBiZWluZyByZWZsZWN0ZWQgaW4gYW55b25lIGVsc2UncyBjb3B5LgogICAgICAgIGlmIG5vdCBodHRwX3R1bm5lbF9yZXF1aXJlZDoKICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuY29weSgpCiAgICAgICAgICAgIGhlYWRlcnMudXBkYXRlKHNlbGYucHJveHlfaGVhZGVycykKCiAgICAgICAgIyBNdXN0IGtlZXAgdGhlIGV4Y2VwdGlvbiBib3VuZCB0byBhIHNlcGFyYXRlIHZhcmlhYmxlIG9yIGVsc2UgUHl0aG9uIDMKICAgICAgICAjIGNvbXBsYWlucyBhYm91dCBVbmJvdW5kTG9jYWxFcnJvci4KICAgICAgICBlcnIgPSBOb25lCgogICAgICAgICMgS2VlcCB0cmFjayBvZiB3aGV0aGVyIHdlIGNsZWFubHkgZXhpdGVkIHRoZSBleGNlcHQgYmxvY2suIFRoaXMKICAgICAgICAjIGVuc3VyZXMgd2UgZG8gcHJvcGVyIGNsZWFudXAgaW4gZmluYWxseS4KICAgICAgICBjbGVhbl9leGl0ID0gRmFsc2UKCiAgICAgICAgIyBSZXdpbmQgYm9keSBwb3NpdGlvbiwgaWYgbmVlZGVkLiBSZWNvcmQgY3VycmVudCBwb3NpdGlvbgogICAgICAgICMgZm9yIGZ1dHVyZSByZXdpbmRzIGluIHRoZSBldmVudCBvZiBhIHJlZGlyZWN0L3JldHJ5LgogICAgICAgIGJvZHlfcG9zID0gc2V0X2ZpbGVfcG9zaXRpb24oYm9keSwgYm9keV9wb3MpCgogICAgICAgIHRyeToKICAgICAgICAgICAgIyBSZXF1ZXN0IGEgY29ubmVjdGlvbiBmcm9tIHRoZSBxdWV1ZS4KICAgICAgICAgICAgdGltZW91dF9vYmogPSBzZWxmLl9nZXRfdGltZW91dCh0aW1lb3V0KQogICAgICAgICAgICBjb25uID0gc2VsZi5fZ2V0X2Nvbm4odGltZW91dD1wb29sX3RpbWVvdXQpCgogICAgICAgICAgICBjb25uLnRpbWVvdXQgPSB0aW1lb3V0X29iai5jb25uZWN0X3RpbWVvdXQKCiAgICAgICAgICAgIGlzX25ld19wcm94eV9jb25uID0gc2VsZi5wcm94eSBpcyBub3QgTm9uZSBhbmQgbm90IGdldGF0dHIoCiAgICAgICAgICAgICAgICBjb25uLCBcInNvY2tcIiwgTm9uZQogICAgICAgICAgICApCiAgICAgICAgICAgIGlmIGlzX25ld19wcm94eV9jb25uIGFuZCBodHRwX3R1bm5lbF9yZXF1aXJlZDoKICAgICAgICAgICAgICAgIHNlbGYuX3ByZXBhcmVfcHJveHkoY29ubikKCiAgICAgICAgICAgICMgTWFrZSB0aGUgcmVxdWVzdCBvbiB0aGUgaHR0cGxpYiBjb25uZWN0aW9uIG9iamVjdC4KICAgICAgICAgICAgaHR0cGxpYl9yZXNwb25zZSA9IHNlbGYuX21ha2VfcmVxdWVzdCgKICAgICAgICAgICAgICAgIGNvbm4sCiAgICAgICAgICAgICAgICBtZXRob2QsCiAgICAgICAgICAgICAgICB1cmwsCiAgICAgICAgICAgICAgICB0aW1lb3V0PXRpbWVvdXRfb2JqLAogICAgICAgICAgICAgICAgYm9keT1ib2R5LAogICAgICAgICAgICAgICAgaGVhZGVycz1oZWFkZXJzLAogICAgICAgICAgICAgICAgY2h1bmtlZD1jaHVua2VkLAogICAgICAgICAgICApCgogICAgICAgICAgICAjIElmIHdlJ3JlIGdvaW5nIHRvIHJlbGVhc2UgdGhlIGNvbm5lY3Rpb24gaW4gYGBmaW5hbGx5OmBgLCB0aGVuCiAgICAgICAgICAgICMgdGhlIHJlc3BvbnNlIGRvZXNuJ3QgbmVlZCB0byBrbm93IGFib3V0IHRoZSBjb25uZWN0aW9uLiBPdGhlcndpc2UKICAgICAgICAgICAgIyBpdCB3aWxsIGFsc28gdHJ5IHRvIHJlbGVhc2UgaXQgYW5kIHdlJ2xsIGhhdmUgYSBkb3VibGUtcmVsZWFzZQogICAgICAgICAgICAjIG1lc3MuCiAgICAgICAgICAgIHJlc3BvbnNlX2Nvbm4gPSBjb25uIGlmIG5vdCByZWxlYXNlX2Nvbm4gZWxzZSBOb25lCgogICAgICAgICAgICAjIFBhc3MgbWV0aG9kIHRvIFJlc3BvbnNlIGZvciBsZW5ndGggY2hlY2tpbmcKICAgICAgICAgICAgcmVzcG9uc2Vfa3dbXCJyZXF1ZXN0X21ldGhvZFwiXSA9IG1ldGhvZAoKICAgICAgICAgICAgIyBJbXBvcnQgaHR0cGxpYidzIHJlc3BvbnNlIGludG8gb3VyIG93biB3cmFwcGVyIG9iamVjdAogICAgICAgICAgICByZXNwb25zZSA9IHNlbGYuUmVzcG9uc2VDbHMuZnJvbV9odHRwbGliKAogICAgICAgICAgICAgICAgaHR0cGxpYl9yZXNwb25zZSwKICAgICAgICAgICAgICAgIHBvb2w9c2VsZiwKICAgICAgICAgICAgICAgIGNvbm5lY3Rpb249cmVzcG9uc2VfY29ubiwKICAgICAgICAgICAgICAgIHJldHJpZXM9cmV0cmllcywKICAgICAgICAgICAgICAgICoqcmVzcG9uc2Vfa3cKICAgICAgICAgICAgKQoKICAgICAgICAgICAgIyBFdmVyeXRoaW5nIHdlbnQgZ3JlYXQhCiAgICAgICAgICAgIGNsZWFuX2V4aXQgPSBUcnVlCgogICAgICAgIGV4Y2VwdCBFbXB0eVBvb2xFcnJvcjoKICAgICAgICAgICAgIyBEaWRuJ3QgZ2V0IGEgY29ubmVjdGlvbiBmcm9tIHRoZSBwb29sLCBubyBuZWVkIHRvIGNsZWFuIHVwCiAgICAgICAgICAgIGNsZWFuX2V4aXQgPSBUcnVlCiAgICAgICAgICAgIHJlbGVhc2VfdGhpc19jb25uID0gRmFsc2UKICAgICAgICAgICAgcmFpc2UKCiAgICAgICAgZXhjZXB0ICgKICAgICAgICAgICAgVGltZW91dEVycm9yLAogICAgICAgICAgICBIVFRQRXhjZXB0aW9uLAogICAgICAgICAgICBTb2NrZXRFcnJvciwKICAgICAgICAgICAgUHJvdG9jb2xFcnJvciwKICAgICAgICAgICAgQmFzZVNTTEVycm9yLAogICAgICAgICAgICBTU0xFcnJvciwKICAgICAgICAgICAgQ2VydGlmaWNhdGVFcnJvciwKICAgICAgICApIGFzIGU6CiAgICAgICAgICAgICMgRGlzY2FyZCB0aGUgY29ubmVjdGlvbiBmb3IgdGhlc2UgZXhjZXB0aW9ucy4gSXQgd2lsbCBiZQogICAgICAgICAgICAjIHJlcGxhY2VkIGR1cmluZyB0aGUgbmV4dCBfZ2V0X2Nvbm4oKSBjYWxsLgogICAgICAgICAgICBjbGVhbl9leGl0ID0gRmFsc2UKCiAgICAgICAgICAgIGRlZiBfaXNfc3NsX2Vycm9yX21lc3NhZ2VfZnJvbV9odHRwX3Byb3h5KHNzbF9lcnJvcik6CiAgICAgICAgICAgICAgICAjIFdlJ3JlIHRyeWluZyB0byBkZXRlY3QgdGhlIG1lc3NhZ2UgJ1dST05HX1ZFUlNJT05fTlVNQkVSJyBidXQKICAgICAgICAgICAgICAgICMgU1NMRXJyb3JzIGFyZSBraW5kYSBhbGwgb3ZlciB0aGUgcGxhY2Ugd2hlbiBpdCBjb21lcyB0byB0aGUgbWVzc2FnZSwKICAgICAgICAgICAgICAgICMgc28gd2UgdHJ5IHRvIGNvdmVyIG91ciBiYXNlcyBoZXJlIQogICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiIFwiLmpvaW4ocmUuc3BsaXQoXCJbXmEtel1cIiwgc3RyKHNzbF9lcnJvcikubG93ZXIoKSkpCiAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgIFwid3JvbmcgdmVyc2lvbiBudW1iZXJcIiBpbiBtZXNzYWdlIG9yIFwidW5rbm93biBwcm90b2NvbFwiIGluIG1lc3NhZ2UKICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICMgVHJ5IHRvIGRldGVjdCBhIGNvbW1vbiB1c2VyIGVycm9yIHdpdGggcHJveGllcyB3aGljaCBpcyB0bwogICAgICAgICAgICAjIHNldCBhbiBIVFRQIHByb3h5IHRvIGJlIEhUVFBTIHdoZW4gaXQgc2hvdWxkIGJlICdodHRwOi8vJwogICAgICAgICAgICAjIChpZSB7J2h0dHAnOiAnaHR0cDovL3Byb3h5JywgJ2h0dHBzJzogJ2h0dHBzOi8vcHJveHknfSkKICAgICAgICAgICAgIyBJbnN0ZWFkIHdlIGFkZCBhIG5pY2UgZXJyb3IgbWVzc2FnZSBhbmQgcG9pbnQgdG8gYSBVUkwuCiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIGlzaW5zdGFuY2UoZSwgQmFzZVNTTEVycm9yKQogICAgICAgICAgICAgICAgYW5kIHNlbGYucHJveHkKICAgICAgICAgICAgICAgIGFuZCBfaXNfc3NsX2Vycm9yX21lc3NhZ2VfZnJvbV9odHRwX3Byb3h5KGUpCiAgICAgICAgICAgICAgICBhbmQgY29ubi5wcm94eQogICAgICAgICAgICAgICAgYW5kIGNvbm4ucHJveHkuc2NoZW1lID09IFwiaHR0cHNcIgogICAgICAgICAgICApOgogICAgICAgICAgICAgICAgZSA9IFByb3h5RXJyb3IoCiAgICAgICAgICAgICAgICAgICAgXCJZb3VyIHByb3h5IGFwcGVhcnMgdG8gb25seSB1c2UgSFRUUCBhbmQgbm90IEhUVFBTLCBcIgogICAgICAgICAgICAgICAgICAgIFwidHJ5IGNoYW5naW5nIHlvdXIgcHJveHkgVVJMIHRvIGJlIEhUVFAuIFNlZTogXCIKICAgICAgICAgICAgICAgICAgICBcImh0dHBzOi8vdXJsbGliMy5yZWFkdGhlZG9jcy5pby9lbi8xLjI2LngvYWR2YW5jZWQtdXNhZ2UuaHRtbFwiCiAgICAgICAgICAgICAgICAgICAgXCIjaHR0cHMtcHJveHktZXJyb3ItaHR0cC1wcm94eVwiLAogICAgICAgICAgICAgICAgICAgIFNTTEVycm9yKGUpLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICBlbGlmIGlzaW5zdGFuY2UoZSwgKEJhc2VTU0xFcnJvciwgQ2VydGlmaWNhdGVFcnJvcikpOgogICAgICAgICAgICAgICAgZSA9IFNTTEVycm9yKGUpCiAgICAgICAgICAgIGVsaWYgaXNpbnN0YW5jZShlLCAoU29ja2V0RXJyb3IsIE5ld0Nvbm5lY3Rpb25FcnJvcikpIGFuZCBzZWxmLnByb3h5OgogICAgICAgICAgICAgICAgZSA9IFByb3h5RXJyb3IoXCJDYW5ub3QgY29ubmVjdCB0byBwcm94eS5cIiwgZSkKICAgICAgICAgICAgZWxpZiBpc2luc3RhbmNlKGUsIChTb2NrZXRFcnJvciwgSFRUUEV4Y2VwdGlvbikpOgogICAgICAgICAgICAgICAgZSA9IFByb3RvY29sRXJyb3IoXCJDb25uZWN0aW9uIGFib3J0ZWQuXCIsIGUpCgogICAgICAgICAgICByZXRyaWVzID0gcmV0cmllcy5pbmNyZW1lbnQoCiAgICAgICAgICAgICAgICBtZXRob2QsIHVybCwgZXJyb3I9ZSwgX3Bvb2w9c2VsZiwgX3N0YWNrdHJhY2U9c3lzLmV4Y19pbmZvKClbMl0KICAgICAgICAgICAgKQogICAgICAgICAgICByZXRyaWVzLnNsZWVwKCkKCiAgICAgICAgICAgICMgS2VlcCB0cmFjayBvZiB0aGUgZXJyb3IgZm9yIHRoZSByZXRyeSB3YXJuaW5nLgogICAgICAgICAgICBlcnIgPSBlCgogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgIGlmIG5vdCBjbGVhbl9leGl0OgogICAgICAgICAgICAgICAgIyBXZSBoaXQgc29tZSBraW5kIG9mIGV4Y2VwdGlvbiwgaGFuZGxlZCBvciBvdGhlcndpc2UuIFdlIG5lZWQKICAgICAgICAgICAgICAgICMgdG8gdGhyb3cgdGhlIGNvbm5lY3Rpb24gYXdheSB1bmxlc3MgZXhwbGljaXRseSB0b2xkIG5vdCB0by4KICAgICAgICAgICAgICAgICMgQ2xvc2UgdGhlIGNvbm5lY3Rpb24sIHNldCB0aGUgdmFyaWFibGUgdG8gTm9uZSwgYW5kIG1ha2Ugc3VyZQogICAgICAgICAgICAgICAgIyB3ZSBwdXQgdGhlIE5vbmUgYmFjayBpbiB0aGUgcG9vbCB0byBhdm9pZCBsZWFraW5nIGl0LgogICAgICAgICAgICAgICAgY29ubiA9IGNvbm4gYW5kIGNvbm4uY2xvc2UoKQogICAgICAgICAgICAgICAgcmVsZWFzZV90aGlzX2Nvbm4gPSBUcnVlCgogICAgICAgICAgICBpZiByZWxlYXNlX3RoaXNfY29ubjoKICAgICAgICAgICAgICAgICMgUHV0IHRoZSBjb25uZWN0aW9uIGJhY2sgdG8gYmUgcmV1c2VkLiBJZiB0aGUgY29ubmVjdGlvbiBpcwogICAgICAgICAgICAgICAgIyBleHBpcmVkIHRoZW4gaXQgd2lsbCBiZSBOb25lLCB3aGljaCB3aWxsIGdldCByZXBsYWNlZCB3aXRoIGEKICAgICAgICAgICAgICAgICMgZnJlc2ggY29ubmVjdGlvbiBkdXJpbmcgX2dldF9jb25uLgogICAgICAgICAgICAgICAgc2VsZi5fcHV0X2Nvbm4oY29ubikKCiAgICAgICAgaWYgbm90IGNvbm46CiAgICAgICAgICAgICMgVHJ5IGFnYWluCiAgICAgICAgICAgIGxvZy53YXJuaW5nKAogICAgICAgICAgICAgICAgXCJSZXRyeWluZyAoJXIpIGFmdGVyIGNvbm5lY3Rpb24gYnJva2VuIGJ5ICclcic6ICVzXCIsIHJldHJpZXMsIGVyciwgdXJsCiAgICAgICAgICAgICkKICAgICAgICAgICAgcmV0dXJuIHNlbGYudXJsb3BlbigKICAgICAgICAgICAgICAgIG1ldGhvZCwKICAgICAgICAgICAgICAgIHVybCwKICAgICAgICAgICAgICAgIGJvZHksCiAgICAgICAgICAgICAgICBoZWFkZXJzLAogICAgICAgICAgICAgICAgcmV0cmllcywKICAgICAgICAgICAgICAgIHJlZGlyZWN0LAogICAgICAgICAgICAgICAgYXNzZXJ0X3NhbWVfaG9zdCwKICAgICAgICAgICAgICAgIHRpbWVvdXQ9dGltZW91dCwKICAgICAgICAgICAgICAgIHBvb2xfdGltZW91dD1wb29sX3RpbWVvdXQsCiAgICAgICAgICAgICAgICByZWxlYXNlX2Nvbm49cmVsZWFzZV9jb25uLAogICAgICAgICAgICAgICAgY2h1bmtlZD1jaHVua2VkLAogICAgICAgICAgICAgICAgYm9keV9wb3M9Ym9keV9wb3MsCiAgICAgICAgICAgICAgICAqKnJlc3BvbnNlX2t3CiAgICAgICAgICAgICkKCiAgICAgICAgIyBIYW5kbGUgcmVkaXJlY3Q/CiAgICAgICAgcmVkaXJlY3RfbG9jYXRpb24gPSByZWRpcmVjdCBhbmQgcmVzcG9uc2UuZ2V0X3JlZGlyZWN0X2xvY2F0aW9uKCkKICAgICAgICBpZiByZWRpcmVjdF9sb2NhdGlvbjoKICAgICAgICAgICAgaWYgcmVzcG9uc2Uuc3RhdHVzID09IDMwMzoKICAgICAgICAgICAgICAgIG1ldGhvZCA9IFwiR0VUXCIKCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHJldHJpZXMgPSByZXRyaWVzLmluY3JlbWVudChtZXRob2QsIHVybCwgcmVzcG9uc2U9cmVzcG9uc2UsIF9wb29sPXNlbGYpCiAgICAgICAgICAgIGV4Y2VwdCBNYXhSZXRyeUVycm9yOgogICAgICAgICAgICAgICAgaWYgcmV0cmllcy5yYWlzZV9vbl9yZWRpcmVjdDoKICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kcmFpbl9jb25uKCkKICAgICAgICAgICAgICAgICAgICByYWlzZQogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlCgogICAgICAgICAgICByZXNwb25zZS5kcmFpbl9jb25uKCkKICAgICAgICAgICAgcmV0cmllcy5zbGVlcF9mb3JfcmV0cnkocmVzcG9uc2UpCiAgICAgICAgICAgIGxvZy5kZWJ1ZyhcIlJlZGlyZWN0aW5nICVzIC0+ICVzXCIsIHVybCwgcmVkaXJlY3RfbG9jYXRpb24pCiAgICAgICAgICAgIHJldHVybiBzZWxmLnVybG9wZW4oCiAgICAgICAgICAgICAgICBtZXRob2QsCiAgICAgICAgICAgICAgICByZWRpcmVjdF9sb2NhdGlvbiwKICAgICAgICAgICAgICAgIGJvZHksCiAgICAgICAgICAgICAgICBoZWFkZXJzLAogICAgICAgICAgICAgICAgcmV0cmllcz1yZXRyaWVzLAogICAgICAgICAgICAgICAgcmVkaXJlY3Q9cmVkaXJlY3QsCiAgICAgICAgICAgICAgICBhc3NlcnRfc2FtZV9ob3N0PWFzc2VydF9zYW1lX2hvc3QsCiAgICAgICAgICAgICAgICB0aW1lb3V0PXRpbWVvdXQsCiAgICAgICAgICAgICAgICBwb29sX3RpbWVvdXQ9cG9vbF90aW1lb3V0LAogICAgICAgICAgICAgICAgcmVsZWFzZV9jb25uPXJlbGVhc2VfY29ubiwKICAgICAgICAgICAgICAgIGNodW5rZWQ9Y2h1bmtlZCwKICAgICAgICAgICAgICAgIGJvZHlfcG9zPWJvZHlfcG9zLAogICAgICAgICAgICAgICAgKipyZXNwb25zZV9rdwogICAgICAgICAgICApCgogICAgICAgICMgQ2hlY2sgaWYgd2Ugc2hvdWxkIHJldHJ5IHRoZSBIVFRQIHJlc3BvbnNlLgogICAgICAgIGhhc19yZXRyeV9hZnRlciA9IGJvb2wocmVzcG9uc2UuZ2V0aGVhZGVyKFwiUmV0cnktQWZ0ZXJcIikpCiAgICAgICAgaWYgcmV0cmllcy5pc19yZXRyeShtZXRob2QsIHJlc3BvbnNlLnN0YXR1cywgaGFzX3JldHJ5X2FmdGVyKToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcmV0cmllcyA9IHJldHJpZXMuaW5jcmVtZW50KG1ldGhvZCwgdXJsLCByZXNwb25zZT1yZXNwb25zZSwgX3Bvb2w9c2VsZikKICAgICAgICAgICAgZXhjZXB0IE1heFJldHJ5RXJyb3I6CiAgICAgICAgICAgICAgICBpZiByZXRyaWVzLnJhaXNlX29uX3N0YXR1czoKICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kcmFpbl9jb25uKCkKICAgICAgICAgICAgICAgICAgICByYWlzZQogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlCgogICAgICAgICAgICByZXNwb25zZS5kcmFpbl9jb25uKCkKICAgICAgICAgICAgcmV0cmllcy5zbGVlcChyZXNwb25zZSkKICAgICAgICAgICAgbG9nLmRlYnVnKFwiUmV0cnk6ICVzXCIsIHVybCkKICAgICAgICAgICAgcmV0dXJuIHNlbGYudXJsb3BlbigKICAgICAgICAgICAgICAgIG1ldGhvZCwKICAgICAgICAgICAgICAgIHVybCwKICAgICAgICAgICAgICAgIGJvZHksCiAgICAgICAgICAgICAgICBoZWFkZXJzLAogICAgICAgICAgICAgICAgcmV0cmllcz1yZXRyaWVzLAogICAgICAgICAgICAgICAgcmVkaXJlY3Q9cmVkaXJlY3QsCiAgICAgICAgICAgICAgICBhc3NlcnRfc2FtZV9ob3N0PWFzc2VydF9zYW1lX2hvc3QsCiAgICAgICAgICAgICAgICB0aW1lb3V0PXRpbWVvdXQsCiAgICAgICAgICAgICAgICBwb29sX3RpbWVvdXQ9cG9vbF90aW1lb3V0LAogICAgICAgICAgICAgICAgcmVsZWFzZV9jb25uPXJlbGVhc2VfY29ubiwKICAgICAgICAgICAgICAgIGNodW5rZWQ9Y2h1bmtlZCwKICAgICAgICAgICAgICAgIGJvZHlfcG9zPWJvZHlfcG9zLAogICAgICAgICAgICAgICAgKipyZXNwb25zZV9rdwogICAgICAgICAgICApCgogICAgICAgIHJldHVybiByZXNwb25zZQoKCmNsYXNzIEhUVFBTQ29ubmVjdGlvblBvb2woSFRUUENvbm5lY3Rpb25Qb29sKToKICAgIFwiXCJcIgogICAgU2FtZSBhcyA6Y2xhc3M6YC5IVFRQQ29ubmVjdGlvblBvb2xgLCBidXQgSFRUUFMuCgogICAgOmNsYXNzOmAuSFRUUFNDb25uZWN0aW9uYCB1c2VzIG9uZSBvZiBgYGFzc2VydF9maW5nZXJwcmludGBgLAogICAgYGBhc3NlcnRfaG9zdG5hbWVgYCBhbmQgYGBob3N0YGAgaW4gdGhpcyBvcmRlciB0byB2ZXJpZnkgY29ubmVjdGlvbnMuCiAgICBJZiBgYGFzc2VydF9ob3N0bmFtZWBgIGlzIEZhbHNlLCBubyB2ZXJpZmljYXRpb24gaXMgZG9uZS4KCiAgICBUaGUgYGBrZXlfZmlsZWBgLCBgYGNlcnRfZmlsZWBgLCBgYGNlcnRfcmVxc2BgLCBgYGNhX2NlcnRzYGAsCiAgICBgYGNhX2NlcnRfZGlyYGAsIGBgc3NsX3ZlcnNpb25gYCwgYGBrZXlfcGFzc3dvcmRgYCBhcmUgb25seSB1c2VkIGlmIDptb2Q6YHNzbGAKICAgIGlzIGF2YWlsYWJsZSBhbmQgYXJlIGZlZCBpbnRvIDptZXRoOmB1cmxsaWIzLnV0aWwuc3NsX3dyYXBfc29ja2V0YCB0byB1cGdyYWRlCiAgICB0aGUgY29ubmVjdGlvbiBzb2NrZXQgaW50byBhbiBTU0wgc29ja2V0LgogICAgXCJcIlwiCgogICAgc2NoZW1lID0gXCJodHRwc1wiCiAgICBDb25uZWN0aW9uQ2xzID0gSFRUUFNDb25uZWN0aW9uCgogICAgZGVmIF9faW5pdF9fKAogICAgICAgIHNlbGYsCiAgICAgICAgaG9zdCwKICAgICAgICBwb3J0PU5vbmUsCiAgICAgICAgc3RyaWN0PUZhbHNlLAogICAgICAgIHRpbWVvdXQ9VGltZW91dC5ERUZBVUxUX1RJTUVPVVQsCiAgICAgICAgbWF4c2l6ZT0xLAogICAgICAgIGJsb2NrPUZhbHNlLAogICAgICAgIGhlYWRlcnM9Tm9uZSwKICAgICAgICByZXRyaWVzPU5vbmUsCiAgICAgICAgX3Byb3h5PU5vbmUsCiAgICAgICAgX3Byb3h5X2hlYWRlcnM9Tm9uZSwKICAgICAgICBrZXlfZmlsZT1Ob25lLAogICAgICAgIGNlcnRfZmlsZT1Ob25lLAogICAgICAgIGNlcnRfcmVxcz1Ob25lLAogICAgICAgIGtleV9wYXNzd29yZD1Ob25lLAogICAgICAgIGNhX2NlcnRzPU5vbmUsCiAgICAgICAgc3NsX3ZlcnNpb249Tm9uZSwKICAgICAgICBhc3NlcnRfaG9zdG5hbWU9Tm9uZSwKICAgICAgICBhc3NlcnRfZmluZ2VycHJpbnQ9Tm9uZSwKICAgICAgICBjYV9jZXJ0X2Rpcj1Ob25lLAogICAgICAgICoqY29ubl9rdwogICAgKToKCiAgICAgICAgSFRUUENvbm5lY3Rpb25Qb29sLl9faW5pdF9fKAogICAgICAgICAgICBzZWxmLAogICAgICAgICAgICBob3N0LAogICAgICAgICAgICBwb3J0LAogICAgICAgICAgICBzdHJpY3QsCiAgICAgICAgICAgIHRpbWVvdXQsCiAgICAgICAgICAgIG1heHNpemUsCiAgICAgICAgICAgIGJsb2NrLAogICAgICAgICAgICBoZWFkZXJzLAogICAgICAgICAgICByZXRyaWVzLAogICAgICAgICAgICBfcHJveHksCiAgICAgICAgICAgIF9wcm94eV9oZWFkZXJzLAogICAgICAgICAgICAqKmNvbm5fa3cKICAgICAgICApCgogICAgICAgIHNlbGYua2V5X2ZpbGUgPSBrZXlfZmlsZQogICAgICAgIHNlbGYuY2VydF9maWxlID0gY2VydF9maWxlCiAgICAgICAgc2VsZi5jZXJ0X3JlcXMgPSBjZXJ0X3JlcXMKICAgICAgICBzZWxmLmtleV9wYXNzd29yZCA9IGtleV9wYXNzd29yZAogICAgICAgIHNlbGYuY2FfY2VydHMgPSBjYV9jZXJ0cwogICAgICAgIHNlbGYuY2FfY2VydF9kaXIgPSBjYV9jZXJ0X2RpcgogICAgICAgIHNlbGYuc3NsX3ZlcnNpb24gPSBzc2xfdmVyc2lvbgogICAgICAgIHNlbGYuYXNzZXJ0X2hvc3RuYW1lID0gYXNzZXJ0X2hvc3RuYW1lCiAgICAgICAgc2VsZi5hc3NlcnRfZmluZ2VycHJpbnQgPSBhc3NlcnRfZmluZ2VycHJpbnQKCiAgICBkZWYgX3ByZXBhcmVfY29ubihzZWxmLCBjb25uKToKICAgICAgICBcIlwiXCIKICAgICAgICBQcmVwYXJlIHRoZSBgYGNvbm5lY3Rpb25gYCBmb3IgOm1ldGg6YHVybGxpYjMudXRpbC5zc2xfd3JhcF9zb2NrZXRgCiAgICAgICAgYW5kIGVzdGFibGlzaCB0aGUgdHVubmVsIGlmIHByb3h5IGlzIHVzZWQuCiAgICAgICAgXCJcIlwiCgogICAgICAgIGlmIGlzaW5zdGFuY2UoY29ubiwgVmVyaWZpZWRIVFRQU0Nvbm5lY3Rpb24pOgogICAgICAgICAgICBjb25uLnNldF9jZXJ0KAogICAgICAgICAgICAgICAga2V5X2ZpbGU9c2VsZi5rZXlfZmlsZSwKICAgICAgICAgICAgICAgIGtleV9wYXNzd29yZD1zZWxmLmtleV9wYXNzd29yZCwKICAgICAgICAgICAgICAgIGNlcnRfZmlsZT1zZWxmLmNlcnRfZmlsZSwKICAgICAgICAgICAgICAgIGNlcnRfcmVxcz1zZWxmLmNlcnRfcmVxcywKICAgICAgICAgICAgICAgIGNhX2NlcnRzPXNlbGYuY2FfY2VydHMsCiAgICAgICAgICAgICAgICBjYV9jZXJ0X2Rpcj1zZWxmLmNhX2NlcnRfZGlyLAogICAgICAgICAgICAgICAgYXNzZXJ0X2hvc3RuYW1lPXNlbGYuYXNzZXJ0X2hvc3RuYW1lLAogICAgICAgICAgICAgICAgYXNzZXJ0X2ZpbmdlcnByaW50PXNlbGYuYXNzZXJ0X2ZpbmdlcnByaW50LAogICAgICAgICAgICApCiAgICAgICAgICAgIGNvbm4uc3NsX3ZlcnNpb24gPSBzZWxmLnNzbF92ZXJzaW9uCiAgICAgICAgcmV0dXJuIGNvbm4KCiAgICBkZWYgX3ByZXBhcmVfcHJveHkoc2VsZiwgY29ubik6CiAgICAgICAgXCJcIlwiCiAgICAgICAgRXN0YWJsaXNoZXMgYSB0dW5uZWwgY29ubmVjdGlvbiB0aHJvdWdoIEhUVFAgQ09OTkVDVC4KCiAgICAgICAgVHVubmVsIGNvbm5lY3Rpb24gaXMgZXN0YWJsaXNoZWQgZWFybHkgYmVjYXVzZSBvdGhlcndpc2UgaHR0cGxpYiB3b3VsZAogICAgICAgIGltcHJvcGVybHkgc2V0IEhvc3Q6IGhlYWRlciB0byBwcm94eSdzIElQOnBvcnQuCiAgICAgICAgXCJcIlwiCgogICAgICAgIGNvbm4uc2V0X3R1bm5lbChzZWxmLl9wcm94eV9ob3N0LCBzZWxmLnBvcnQsIHNlbGYucHJveHlfaGVhZGVycykKCiAgICAgICAgaWYgc2VsZi5wcm94eS5zY2hlbWUgPT0gXCJodHRwc1wiOgogICAgICAgICAgICBjb25uLnRsc19pbl90bHNfcmVxdWlyZWQgPSBUcnVlCgogICAgICAgIGNvbm4uY29ubmVjdCgpCgogICAgZGVmIF9uZXdfY29ubihzZWxmKToKICAgICAgICBcIlwiXCIKICAgICAgICBSZXR1cm4gYSBmcmVzaCA6Y2xhc3M6YGh0dHAuY2xpZW50LkhUVFBTQ29ubmVjdGlvbmAuCiAgICAgICAgXCJcIlwiCiAgICAgICAgc2VsZi5udW1fY29ubmVjdGlvbnMgKz0gMQogICAgICAgIGxvZy5kZWJ1ZygKICAgICAgICAgICAgXCJTdGFydGluZyBuZXcgSFRUUFMgY29ubmVjdGlvbiAoJWQpOiAlczolc1wiLAogICAgICAgICAgICBzZWxmLm51bV9jb25uZWN0aW9ucywKICAgICAgICAgICAgc2VsZi5ob3N0LAogICAgICAgICAgICBzZWxmLnBvcnQgb3IgXCI0NDNcIiwKICAgICAgICApCgogICAgICAgIGlmIG5vdCBzZWxmLkNvbm5lY3Rpb25DbHMgb3Igc2VsZi5Db25uZWN0aW9uQ2xzIGlzIER1bW15Q29ubmVjdGlvbjoKICAgICAgICAgICAgcmFpc2UgU1NMRXJyb3IoCiAgICAgICAgICAgICAgICBcIkNhbid0IGNvbm5lY3QgdG8gSFRUUFMgVVJMIGJlY2F1c2UgdGhlIFNTTCBtb2R1bGUgaXMgbm90IGF2YWlsYWJsZS5cIgogICAgICAgICAgICApCgogICAgICAgIGFjdHVhbF9ob3N0ID0gc2VsZi5ob3N0CiAgICAgICAgYWN0dWFsX3BvcnQgPSBzZWxmLnBvcnQKICAgICAgICBpZiBzZWxmLnByb3h5IGlzIG5vdCBOb25lOgogICAgICAgICAgICBhY3R1YWxfaG9zdCA9IHNlbGYucHJveHkuaG9zdAogICAgICAgICAgICBhY3R1YWxfcG9ydCA9IHNlbGYucHJveHkucG9ydAoKICAgICAgICBjb25uID0gc2VsZi5Db25uZWN0aW9uQ2xzKAogICAgICAgICAgICBob3N0PWFjdHVhbF9ob3N0LAogICAgICAgICAgICBwb3J0PWFjdHVhbF9wb3J0LAogICAgICAgICAgICB0aW1lb3V0PXNlbGYudGltZW91dC5jb25uZWN0X3RpbWVvdXQsCiAgICAgICAgICAgIHN0cmljdD1zZWxmLnN0cmljdCwKICAgICAgICAgICAgY2VydF9maWxlPXNlbGYuY2VydF9maWxlLAogICAgICAgICAgICBrZXlfZmlsZT1zZWxmLmtleV9maWxlLAogICAgICAgICAgICBrZXlfcGFzc3dvcmQ9c2VsZi5rZXlfcGFzc3dvcmQsCiAgICAgICAgICAgICoqc2VsZi5jb25uX2t3CiAgICAgICAgKQoKICAgICAgICByZXR1cm4gc2VsZi5fcHJlcGFyZV9jb25uKGNvbm4pCgogICAgZGVmIF92YWxpZGF0ZV9jb25uKHNlbGYsIGNvbm4pOgogICAgICAgIFwiXCJcIgogICAgICAgIENhbGxlZCByaWdodCBiZWZvcmUgYSByZXF1ZXN0IGlzIG1hZGUsIGFmdGVyIHRoZSBzb2NrZXQgaXMgY3JlYXRlZC4KICAgICAgICBcIlwiXCIKICAgICAgICBzdXBlcihIVFRQU0Nvbm5lY3Rpb25Qb29sLCBzZWxmKS5fdmFsaWRhdGVfY29ubihjb25uKQoKICAgICAgICAjIEZvcmNlIGNvbm5lY3QgZWFybHkgdG8gYWxsb3cgdXMgdG8gdmFsaWRhdGUgdGhlIGNvbm5lY3Rpb24uCiAgICAgICAgaWYgbm90IGdldGF0dHIoY29ubiwgXCJzb2NrXCIsIE5vbmUpOiAgIyBBcHBFbmdpbmUgbWlnaHQgbm90IGhhdmUgIGAuc29ja2AKICAgICAgICAgICAgY29ubi5jb25uZWN0KCkKCiAgICAgICAgaWYgbm90IGNvbm4uaXNfdmVyaWZpZWQ6CiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oCiAgICAgICAgICAgICAgICAoCiAgICAgICAgICAgICAgICAgICAgXCJVbnZlcmlmaWVkIEhUVFBTIHJlcXVlc3QgaXMgYmVpbmcgbWFkZSB0byBob3N0ICclcycuIFwiCiAgICAgICAgICAgICAgICAgICAgXCJBZGRpbmcgY2VydGlmaWNhdGUgdmVyaWZpY2F0aW9uIGlzIHN0cm9uZ2x5IGFkdmlzZWQuIFNlZTogXCIKICAgICAgICAgICAgICAgICAgICBcImh0dHBzOi8vdXJsbGliMy5yZWFkdGhlZG9jcy5pby9lbi8xLjI2LngvYWR2YW5jZWQtdXNhZ2UuaHRtbFwiCiAgICAgICAgICAgICAgICAgICAgXCIjc3NsLXdhcm5pbmdzXCIgJSBjb25uLmhvc3QKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBJbnNlY3VyZVJlcXVlc3RXYXJuaW5nLAogICAgICAgICAgICApCgogICAgICAgIGlmIGdldGF0dHIoY29ubiwgXCJwcm94eV9pc192ZXJpZmllZFwiLCBOb25lKSBpcyBGYWxzZToKICAgICAgICAgICAgd2FybmluZ3Mud2FybigKICAgICAgICAgICAgICAgICgKICAgICAgICAgICAgICAgICAgICBcIlVudmVyaWZpZWQgSFRUUFMgY29ubmVjdGlvbiBkb25lIHRvIGFuIEhUVFBTIHByb3h5LiBcIgogICAgICAgICAgICAgICAgICAgIFwiQWRkaW5nIGNlcnRpZmljYXRlIHZlcmlmaWNhdGlvbiBpcyBzdHJvbmdseSBhZHZpc2VkLiBTZWU6IFwiCiAgICAgICAgICAgICAgICAgICAgXCJodHRwczovL3VybGxpYjMucmVhZHRoZWRvY3MuaW8vZW4vMS4yNi54L2FkdmFuY2VkLXVzYWdlLmh0bWxcIgogICAgICAgICAgICAgICAgICAgIFwiI3NzbC13YXJuaW5nc1wiCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgSW5zZWN1cmVSZXF1ZXN0V2FybmluZywKICAgICAgICAgICAgKQoKCmRlZiBjb25uZWN0aW9uX2Zyb21fdXJsKHVybCwgKiprdyk6CiAgICBcIlwiXCIKICAgIEdpdmVuIGEgdXJsLCByZXR1cm4gYW4gOmNsYXNzOmAuQ29ubmVjdGlvblBvb2xgIGluc3RhbmNlIG9mIGl0cyBob3N0LgoKICAgIFRoaXMgaXMgYSBzaG9ydGN1dCBmb3Igbm90IGhhdmluZyB0byBwYXJzZSBvdXQgdGhlIHNjaGVtZSwgaG9zdCwgYW5kIHBvcnQKICAgIG9mIHRoZSB1cmwgYmVmb3JlIGNyZWF0aW5nIGFuIDpjbGFzczpgLkNvbm5lY3Rpb25Qb29sYCBpbnN0YW5jZS4KCiAgICA6cGFyYW0gdXJsOgogICAgICAgIEFic29sdXRlIFVSTCBzdHJpbmcgdGhhdCBtdXN0IGluY2x1ZGUgdGhlIHNjaGVtZS4gUG9ydCBpcyBvcHRpb25hbC4KCiAgICA6cGFyYW0gXFxcXCoqa3c6CiAgICAgICAgUGFzc2VzIGFkZGl0aW9uYWwgcGFyYW1ldGVycyB0byB0aGUgY29uc3RydWN0b3Igb2YgdGhlIGFwcHJvcHJpYXRlCiAgICAgICAgOmNsYXNzOmAuQ29ubmVjdGlvblBvb2xgLiBVc2VmdWwgZm9yIHNwZWNpZnlpbmcgdGhpbmdzIGxpa2UKICAgICAgICB0aW1lb3V0LCBtYXhzaXplLCBoZWFkZXJzLCBldGMuCgogICAgRXhhbXBsZTo6CgogICAgICAgID4+PiBjb25uID0gY29ubmVjdGlvbl9mcm9tX3VybCgnaHR0cDovL2dvb2dsZS5jb20vJykKICAgICAgICA+Pj4gciA9IGNvbm4ucmVxdWVzdCgnR0VUJywgJy8nKQogICAgXCJcIlwiCiAgICBzY2hlbWUsIGhvc3QsIHBvcnQgPSBnZXRfaG9zdCh1cmwpCiAgICBwb3J0ID0gcG9ydCBvciBwb3J0X2J5X3NjaGVtZS5nZXQoc2NoZW1lLCA4MCkKICAgIGlmIHNjaGVtZSA9PSBcImh0dHBzXCI6CiAgICAgICAgcmV0dXJuIEhUVFBTQ29ubmVjdGlvblBvb2woaG9zdCwgcG9ydD1wb3J0LCAqKmt3KQogICAgZWxzZToKICAgICAgICByZXR1cm4gSFRUUENvbm5lY3Rpb25Qb29sKGhvc3QsIHBvcnQ9cG9ydCwgKiprdykKCgpkZWYgX25vcm1hbGl6ZV9ob3N0KGhvc3QsIHNjaGVtZSk6CiAgICBcIlwiXCIKICAgIE5vcm1hbGl6ZSBob3N0cyBmb3IgY29tcGFyaXNvbnMgYW5kIHVzZSB3aXRoIHNvY2tldHMuCiAgICBcIlwiXCIKCiAgICBob3N0ID0gbm9ybWFsaXplX2hvc3QoaG9zdCwgc2NoZW1lKQoKICAgICMgaHR0cGxpYiBkb2Vzbid0IGxpa2UgaXQgd2hlbiB3ZSBpbmNsdWRlIGJyYWNrZXRzIGluIElQdjYgYWRkcmVzc2VzCiAgICAjIFNwZWNpZmljYWxseSwgaWYgd2UgaW5jbHVkZSBicmFja2V0cyBidXQgYWxzbyBwYXNzIHRoZSBwb3J0IHRoZW4KICAgICMgaHR0cGxpYiBjcmF6aWx5IGRvdWJsZXMgdXAgdGhlIHNxdWFyZSBicmFja2V0cyBvbiB0aGUgSG9zdCBoZWFkZXIuCiAgICAjIEluc3RlYWQsIHdlIG5lZWQgdG8gbWFrZSBzdXJlIHdlIG5ldmVyIHBhc3MgYGBOb25lYGAgYXMgdGhlIHBvcnQuCiAgICAjIEhvd2V2ZXIsIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IHJlYXNvbnMgd2UgY2FuJ3QgYWN0dWFsbHkKICAgICMgKmFzc2VydCogdGhhdC4gIFNlZSBodHRwOi8vYnVncy5weXRob24ub3JnL2lzc3VlMjg1MzkKICAgIGlmIGhvc3Quc3RhcnRzd2l0aChcIltcIikgYW5kIGhvc3QuZW5kc3dpdGgoXCJdXCIpOgogICAgICAgIGhvc3QgPSBob3N0WzE6LTFdCiAgICByZXR1cm4gaG9zdAoKIiIiCm1vZHVsZV9kaWN0WyJ1cmxsaWIzIitvcy5zZXArIl9jb2xsZWN0aW9ucy5weSJdPSIiIgpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFic29sdXRlX2ltcG9ydAoKdHJ5OgogICAgZnJvbSBjb2xsZWN0aW9ucy5hYmMgaW1wb3J0IE1hcHBpbmcsIE11dGFibGVNYXBwaW5nCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIGZyb20gY29sbGVjdGlvbnMgaW1wb3J0IE1hcHBpbmcsIE11dGFibGVNYXBwaW5nCnRyeToKICAgIGZyb20gdGhyZWFkaW5nIGltcG9ydCBSTG9jawpleGNlcHQgSW1wb3J0RXJyb3I6ICAjIFBsYXRmb3JtLXNwZWNpZmljOiBObyB0aHJlYWRzIGF2YWlsYWJsZQoKICAgIGNsYXNzIFJMb2NrOgogICAgICAgIGRlZiBfX2VudGVyX18oc2VsZik6CiAgICAgICAgICAgIHBhc3MKCiAgICAgICAgZGVmIF9fZXhpdF9fKHNlbGYsIGV4Y190eXBlLCBleGNfdmFsdWUsIHRyYWNlYmFjayk6CiAgICAgICAgICAgIHBhc3MKCgpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBPcmRlcmVkRGljdAoKZnJvbSAuZXhjZXB0aW9ucyBpbXBvcnQgSW52YWxpZEhlYWRlcgpmcm9tIC5wYWNrYWdlcyBpbXBvcnQgc2l4CmZyb20gLnBhY2thZ2VzLnNpeCBpbXBvcnQgaXRlcmtleXMsIGl0ZXJ2YWx1ZXMKCl9fYWxsX18gPSBbXCJSZWNlbnRseVVzZWRDb250YWluZXJcIiwgXCJIVFRQSGVhZGVyRGljdFwiXQoKCl9OdWxsID0gb2JqZWN0KCkKCgpjbGFzcyBSZWNlbnRseVVzZWRDb250YWluZXIoTXV0YWJsZU1hcHBpbmcpOgogICAgXCJcIlwiCiAgICBQcm92aWRlcyBhIHRocmVhZC1zYWZlIGRpY3QtbGlrZSBjb250YWluZXIgd2hpY2ggbWFpbnRhaW5zIHVwIHRvCiAgICBgYG1heHNpemVgYCBrZXlzIHdoaWxlIHRocm93aW5nIGF3YXkgdGhlIGxlYXN0LXJlY2VudGx5LXVzZWQga2V5cyBiZXlvbmQKICAgIGBgbWF4c2l6ZWBgLgoKICAgIDpwYXJhbSBtYXhzaXplOgogICAgICAgIE1heGltdW0gbnVtYmVyIG9mIHJlY2VudCBlbGVtZW50cyB0byByZXRhaW4uCgogICAgOnBhcmFtIGRpc3Bvc2VfZnVuYzoKICAgICAgICBFdmVyeSB0aW1lIGFuIGl0ZW0gaXMgZXZpY3RlZCBmcm9tIHRoZSBjb250YWluZXIsCiAgICAgICAgYGBkaXNwb3NlX2Z1bmModmFsdWUpYGAgaXMgY2FsbGVkLiAgQ2FsbGJhY2sgd2hpY2ggd2lsbCBnZXQgY2FsbGVkCiAgICBcIlwiXCIKCiAgICBDb250YWluZXJDbHMgPSBPcmRlcmVkRGljdAoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBtYXhzaXplPTEwLCBkaXNwb3NlX2Z1bmM9Tm9uZSk6CiAgICAgICAgc2VsZi5fbWF4c2l6ZSA9IG1heHNpemUKICAgICAgICBzZWxmLmRpc3Bvc2VfZnVuYyA9IGRpc3Bvc2VfZnVuYwoKICAgICAgICBzZWxmLl9jb250YWluZXIgPSBzZWxmLkNvbnRhaW5lckNscygpCiAgICAgICAgc2VsZi5sb2NrID0gUkxvY2soKQoKICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBrZXkpOgogICAgICAgICMgUmUtaW5zZXJ0IHRoZSBpdGVtLCBtb3ZpbmcgaXQgdG8gdGhlIGVuZCBvZiB0aGUgZXZpY3Rpb24gbGluZS4KICAgICAgICB3aXRoIHNlbGYubG9jazoKICAgICAgICAgICAgaXRlbSA9IHNlbGYuX2NvbnRhaW5lci5wb3Aoa2V5KQogICAgICAgICAgICBzZWxmLl9jb250YWluZXJba2V5XSA9IGl0ZW0KICAgICAgICAgICAgcmV0dXJuIGl0ZW0KCiAgICBkZWYgX19zZXRpdGVtX18oc2VsZiwga2V5LCB2YWx1ZSk6CiAgICAgICAgZXZpY3RlZF92YWx1ZSA9IF9OdWxsCiAgICAgICAgd2l0aCBzZWxmLmxvY2s6CiAgICAgICAgICAgICMgUG9zc2libHkgZXZpY3QgdGhlIGV4aXN0aW5nIHZhbHVlIG9mICdrZXknCiAgICAgICAgICAgIGV2aWN0ZWRfdmFsdWUgPSBzZWxmLl9jb250YWluZXIuZ2V0KGtleSwgX051bGwpCiAgICAgICAgICAgIHNlbGYuX2NvbnRhaW5lcltrZXldID0gdmFsdWUKCiAgICAgICAgICAgICMgSWYgd2UgZGlkbid0IGV2aWN0IGFuIGV4aXN0aW5nIHZhbHVlLCB3ZSBtaWdodCBoYXZlIHRvIGV2aWN0IHRoZQogICAgICAgICAgICAjIGxlYXN0IHJlY2VudGx5IHVzZWQgaXRlbSBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGNvbnRhaW5lci4KICAgICAgICAgICAgaWYgbGVuKHNlbGYuX2NvbnRhaW5lcikgPiBzZWxmLl9tYXhzaXplOgogICAgICAgICAgICAgICAgX2tleSwgZXZpY3RlZF92YWx1ZSA9IHNlbGYuX2NvbnRhaW5lci5wb3BpdGVtKGxhc3Q9RmFsc2UpCgogICAgICAgIGlmIHNlbGYuZGlzcG9zZV9mdW5jIGFuZCBldmljdGVkX3ZhbHVlIGlzIG5vdCBfTnVsbDoKICAgICAgICAgICAgc2VsZi5kaXNwb3NlX2Z1bmMoZXZpY3RlZF92YWx1ZSkKCiAgICBkZWYgX19kZWxpdGVtX18oc2VsZiwga2V5KToKICAgICAgICB3aXRoIHNlbGYubG9jazoKICAgICAgICAgICAgdmFsdWUgPSBzZWxmLl9jb250YWluZXIucG9wKGtleSkKCiAgICAgICAgaWYgc2VsZi5kaXNwb3NlX2Z1bmM6CiAgICAgICAgICAgIHNlbGYuZGlzcG9zZV9mdW5jKHZhbHVlKQoKICAgIGRlZiBfX2xlbl9fKHNlbGYpOgogICAgICAgIHdpdGggc2VsZi5sb2NrOgogICAgICAgICAgICByZXR1cm4gbGVuKHNlbGYuX2NvbnRhaW5lcikKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcigKICAgICAgICAgICAgXCJJdGVyYXRpb24gb3ZlciB0aGlzIGNsYXNzIGlzIHVubGlrZWx5IHRvIGJlIHRocmVhZHNhZmUuXCIKICAgICAgICApCgogICAgZGVmIGNsZWFyKHNlbGYpOgogICAgICAgIHdpdGggc2VsZi5sb2NrOgogICAgICAgICAgICAjIENvcHkgcG9pbnRlcnMgdG8gYWxsIHZhbHVlcywgdGhlbiB3aXBlIHRoZSBtYXBwaW5nCiAgICAgICAgICAgIHZhbHVlcyA9IGxpc3QoaXRlcnZhbHVlcyhzZWxmLl9jb250YWluZXIpKQogICAgICAgICAgICBzZWxmLl9jb250YWluZXIuY2xlYXIoKQoKICAgICAgICBpZiBzZWxmLmRpc3Bvc2VfZnVuYzoKICAgICAgICAgICAgZm9yIHZhbHVlIGluIHZhbHVlczoKICAgICAgICAgICAgICAgIHNlbGYuZGlzcG9zZV9mdW5jKHZhbHVlKQoKICAgIGRlZiBrZXlzKHNlbGYpOgogICAgICAgIHdpdGggc2VsZi5sb2NrOgogICAgICAgICAgICByZXR1cm4gbGlzdChpdGVya2V5cyhzZWxmLl9jb250YWluZXIpKQoKCmNsYXNzIEhUVFBIZWFkZXJEaWN0KE11dGFibGVNYXBwaW5nKToKICAgIFwiXCJcIgogICAgOnBhcmFtIGhlYWRlcnM6CiAgICAgICAgQW4gaXRlcmFibGUgb2YgZmllbGQtdmFsdWUgcGFpcnMuIE11c3Qgbm90IGNvbnRhaW4gbXVsdGlwbGUgZmllbGQgbmFtZXMKICAgICAgICB3aGVuIGNvbXBhcmVkIGNhc2UtaW5zZW5zaXRpdmVseS4KCiAgICA6cGFyYW0ga3dhcmdzOgogICAgICAgIEFkZGl0aW9uYWwgZmllbGQtdmFsdWUgcGFpcnMgdG8gcGFzcyBpbiB0byBgYGRpY3QudXBkYXRlYGAuCgogICAgQSBgYGRpY3RgYCBsaWtlIGNvbnRhaW5lciBmb3Igc3RvcmluZyBIVFRQIEhlYWRlcnMuCgogICAgRmllbGQgbmFtZXMgYXJlIHN0b3JlZCBhbmQgY29tcGFyZWQgY2FzZS1pbnNlbnNpdGl2ZWx5IGluIGNvbXBsaWFuY2Ugd2l0aAogICAgUkZDIDcyMzAuIEl0ZXJhdGlvbiBwcm92aWRlcyB0aGUgZmlyc3QgY2FzZS1zZW5zaXRpdmUga2V5IHNlZW4gZm9yIGVhY2gKICAgIGNhc2UtaW5zZW5zaXRpdmUgcGFpci4KCiAgICBVc2luZyBgYF9fc2V0aXRlbV9fYGAgc3ludGF4IG92ZXJ3cml0ZXMgZmllbGRzIHRoYXQgY29tcGFyZSBlcXVhbAogICAgY2FzZS1pbnNlbnNpdGl2ZWx5IGluIG9yZGVyIHRvIG1haW50YWluIGBgZGljdGBgJ3MgYXBpLiBGb3IgZmllbGRzIHRoYXQKICAgIGNvbXBhcmUgZXF1YWwsIGluc3RlYWQgY3JlYXRlIGEgbmV3IGBgSFRUUEhlYWRlckRpY3RgYCBhbmQgdXNlIGBgLmFkZGBgCiAgICBpbiBhIGxvb3AuCgogICAgSWYgbXVsdGlwbGUgZmllbGRzIHRoYXQgYXJlIGVxdWFsIGNhc2UtaW5zZW5zaXRpdmVseSBhcmUgcGFzc2VkIHRvIHRoZQogICAgY29uc3RydWN0b3Igb3IgYGAudXBkYXRlYGAsIHRoZSBiZWhhdmlvciBpcyB1bmRlZmluZWQgYW5kIHNvbWUgd2lsbCBiZQogICAgbG9zdC4KCiAgICA+Pj4gaGVhZGVycyA9IEhUVFBIZWFkZXJEaWN0KCkKICAgID4+PiBoZWFkZXJzLmFkZCgnU2V0LUNvb2tpZScsICdmb289YmFyJykKICAgID4+PiBoZWFkZXJzLmFkZCgnc2V0LWNvb2tpZScsICdiYXo9cXV4eCcpCiAgICA+Pj4gaGVhZGVyc1snY29udGVudC1sZW5ndGgnXSA9ICc3JwogICAgPj4+IGhlYWRlcnNbJ1NFVC1jb29raWUnXQogICAgJ2Zvbz1iYXIsIGJhej1xdXh4JwogICAgPj4+IGhlYWRlcnNbJ0NvbnRlbnQtTGVuZ3RoJ10KICAgICc3JwogICAgXCJcIlwiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhlYWRlcnM9Tm9uZSwgKiprd2FyZ3MpOgogICAgICAgIHN1cGVyKEhUVFBIZWFkZXJEaWN0LCBzZWxmKS5fX2luaXRfXygpCiAgICAgICAgc2VsZi5fY29udGFpbmVyID0gT3JkZXJlZERpY3QoKQogICAgICAgIGlmIGhlYWRlcnMgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoaGVhZGVycywgSFRUUEhlYWRlckRpY3QpOgogICAgICAgICAgICAgICAgc2VsZi5fY29weV9mcm9tKGhlYWRlcnMpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLmV4dGVuZChoZWFkZXJzKQogICAgICAgIGlmIGt3YXJnczoKICAgICAgICAgICAgc2VsZi5leHRlbmQoa3dhcmdzKQoKICAgIGRlZiBfX3NldGl0ZW1fXyhzZWxmLCBrZXksIHZhbCk6CiAgICAgICAgc2VsZi5fY29udGFpbmVyW2tleS5sb3dlcigpXSA9IFtrZXksIHZhbF0KICAgICAgICByZXR1cm4gc2VsZi5fY29udGFpbmVyW2tleS5sb3dlcigpXQoKICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBrZXkpOgogICAgICAgIHZhbCA9IHNlbGYuX2NvbnRhaW5lcltrZXkubG93ZXIoKV0KICAgICAgICByZXR1cm4gXCIsIFwiLmpvaW4odmFsWzE6XSkKCiAgICBkZWYgX19kZWxpdGVtX18oc2VsZiwga2V5KToKICAgICAgICBkZWwgc2VsZi5fY29udGFpbmVyW2tleS5sb3dlcigpXQoKICAgIGRlZiBfX2NvbnRhaW5zX18oc2VsZiwga2V5KToKICAgICAgICByZXR1cm4ga2V5Lmxvd2VyKCkgaW4gc2VsZi5fY29udGFpbmVyCgogICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIE1hcHBpbmcpIGFuZCBub3QgaGFzYXR0cihvdGhlciwgXCJrZXlzXCIpOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgdHlwZShzZWxmKSk6CiAgICAgICAgICAgIG90aGVyID0gdHlwZShzZWxmKShvdGhlcikKICAgICAgICByZXR1cm4gZGljdCgoay5sb3dlcigpLCB2KSBmb3IgaywgdiBpbiBzZWxmLml0ZXJtZXJnZWQoKSkgPT0gZGljdCgKICAgICAgICAgICAgKGsubG93ZXIoKSwgdikgZm9yIGssIHYgaW4gb3RoZXIuaXRlcm1lcmdlZCgpCiAgICAgICAgKQoKICAgIGRlZiBfX25lX18oc2VsZiwgb3RoZXIpOgogICAgICAgIHJldHVybiBub3Qgc2VsZi5fX2VxX18ob3RoZXIpCgogICAgaWYgc2l4LlBZMjogICMgUHl0aG9uIDIKICAgICAgICBpdGVya2V5cyA9IE11dGFibGVNYXBwaW5nLml0ZXJrZXlzCiAgICAgICAgaXRlcnZhbHVlcyA9IE11dGFibGVNYXBwaW5nLml0ZXJ2YWx1ZXMKCiAgICBfX21hcmtlciA9IG9iamVjdCgpCgogICAgZGVmIF9fbGVuX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGxlbihzZWxmLl9jb250YWluZXIpCgogICAgZGVmIF9faXRlcl9fKHNlbGYpOgogICAgICAgICMgT25seSBwcm92aWRlIHRoZSBvcmlnaW5hbGx5IGNhc2VkIG5hbWVzCiAgICAgICAgZm9yIHZhbHMgaW4gc2VsZi5fY29udGFpbmVyLnZhbHVlcygpOgogICAgICAgICAgICB5aWVsZCB2YWxzWzBdCgogICAgZGVmIHBvcChzZWxmLCBrZXksIGRlZmF1bHQ9X19tYXJrZXIpOgogICAgICAgIFwiXCJcIkQucG9wKGtbLGRdKSAtPiB2LCByZW1vdmUgc3BlY2lmaWVkIGtleSBhbmQgcmV0dXJuIHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlLgogICAgICAgIElmIGtleSBpcyBub3QgZm91bmQsIGQgaXMgcmV0dXJuZWQgaWYgZ2l2ZW4sIG90aGVyd2lzZSBLZXlFcnJvciBpcyByYWlzZWQuCiAgICAgICAgXCJcIlwiCiAgICAgICAgIyBVc2luZyB0aGUgTXV0YWJsZU1hcHBpbmcgZnVuY3Rpb24gZGlyZWN0bHkgZmFpbHMgZHVlIHRvIHRoZSBwcml2YXRlIG1hcmtlci4KICAgICAgICAjIFVzaW5nIG9yZGluYXJ5IGRpY3QucG9wIHdvdWxkIGV4cG9zZSB0aGUgaW50ZXJuYWwgc3RydWN0dXJlcy4KICAgICAgICAjIFNvIGxldCdzIHJlaW52ZW50IHRoZSB3aGVlbC4KICAgICAgICB0cnk6CiAgICAgICAgICAgIHZhbHVlID0gc2VsZltrZXldCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICBpZiBkZWZhdWx0IGlzIHNlbGYuX19tYXJrZXI6CiAgICAgICAgICAgICAgICByYWlzZQogICAgICAgICAgICByZXR1cm4gZGVmYXVsdAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGRlbCBzZWxmW2tleV0KICAgICAgICAgICAgcmV0dXJuIHZhbHVlCgogICAgZGVmIGRpc2NhcmQoc2VsZiwga2V5KToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGRlbCBzZWxmW2tleV0KICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgIHBhc3MKCiAgICBkZWYgYWRkKHNlbGYsIGtleSwgdmFsKToKICAgICAgICBcIlwiXCJBZGRzIGEgKG5hbWUsIHZhbHVlKSBwYWlyLCBkb2Vzbid0IG92ZXJ3cml0ZSB0aGUgdmFsdWUgaWYgaXQgYWxyZWFkeQogICAgICAgIGV4aXN0cy4KCiAgICAgICAgPj4+IGhlYWRlcnMgPSBIVFRQSGVhZGVyRGljdChmb289J2JhcicpCiAgICAgICAgPj4+IGhlYWRlcnMuYWRkKCdGb28nLCAnYmF6JykKICAgICAgICA+Pj4gaGVhZGVyc1snZm9vJ10KICAgICAgICAnYmFyLCBiYXonCiAgICAgICAgXCJcIlwiCiAgICAgICAga2V5X2xvd2VyID0ga2V5Lmxvd2VyKCkKICAgICAgICBuZXdfdmFscyA9IFtrZXksIHZhbF0KICAgICAgICAjIEtlZXAgdGhlIGNvbW1vbiBjYXNlIGFrYSBubyBpdGVtIHByZXNlbnQgYXMgZmFzdCBhcyBwb3NzaWJsZQogICAgICAgIHZhbHMgPSBzZWxmLl9jb250YWluZXIuc2V0ZGVmYXVsdChrZXlfbG93ZXIsIG5ld192YWxzKQogICAgICAgIGlmIG5ld192YWxzIGlzIG5vdCB2YWxzOgogICAgICAgICAgICB2YWxzLmFwcGVuZCh2YWwpCgogICAgZGVmIGV4dGVuZChzZWxmLCAqYXJncywgKiprd2FyZ3MpOgogICAgICAgIFwiXCJcIkdlbmVyaWMgaW1wb3J0IGZ1bmN0aW9uIGZvciBhbnkgdHlwZSBvZiBoZWFkZXItbGlrZSBvYmplY3QuCiAgICAgICAgQWRhcHRlZCB2ZXJzaW9uIG9mIE11dGFibGVNYXBwaW5nLnVwZGF0ZSBpbiBvcmRlciB0byBpbnNlcnQgaXRlbXMKICAgICAgICB3aXRoIHNlbGYuYWRkIGluc3RlYWQgb2Ygc2VsZi5fX3NldGl0ZW1fXwogICAgICAgIFwiXCJcIgogICAgICAgIGlmIGxlbihhcmdzKSA+IDE6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigKICAgICAgICAgICAgICAgIFwiZXh0ZW5kKCkgdGFrZXMgYXQgbW9zdCAxIHBvc2l0aW9uYWwgXCIKICAgICAgICAgICAgICAgIFwiYXJndW1lbnRzICh7MH0gZ2l2ZW4pXCIuZm9ybWF0KGxlbihhcmdzKSkKICAgICAgICAgICAgKQogICAgICAgIG90aGVyID0gYXJnc1swXSBpZiBsZW4oYXJncykgPj0gMSBlbHNlICgpCgogICAgICAgIGlmIGlzaW5zdGFuY2Uob3RoZXIsIEhUVFBIZWFkZXJEaWN0KToKICAgICAgICAgICAgZm9yIGtleSwgdmFsIGluIG90aGVyLml0ZXJpdGVtcygpOgogICAgICAgICAgICAgICAgc2VsZi5hZGQoa2V5LCB2YWwpCiAgICAgICAgZWxpZiBpc2luc3RhbmNlKG90aGVyLCBNYXBwaW5nKToKICAgICAgICAgICAgZm9yIGtleSBpbiBvdGhlcjoKICAgICAgICAgICAgICAgIHNlbGYuYWRkKGtleSwgb3RoZXJba2V5XSkKICAgICAgICBlbGlmIGhhc2F0dHIob3RoZXIsIFwia2V5c1wiKToKICAgICAgICAgICAgZm9yIGtleSBpbiBvdGhlci5rZXlzKCk6CiAgICAgICAgICAgICAgICBzZWxmLmFkZChrZXksIG90aGVyW2tleV0pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gb3RoZXI6CiAgICAgICAgICAgICAgICBzZWxmLmFkZChrZXksIHZhbHVlKQoKICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBrd2FyZ3MuaXRlbXMoKToKICAgICAgICAgICAgc2VsZi5hZGQoa2V5LCB2YWx1ZSkKCiAgICBkZWYgZ2V0bGlzdChzZWxmLCBrZXksIGRlZmF1bHQ9X19tYXJrZXIpOgogICAgICAgIFwiXCJcIlJldHVybnMgYSBsaXN0IG9mIGFsbCB0aGUgdmFsdWVzIGZvciB0aGUgbmFtZWQgZmllbGQuIFJldHVybnMgYW4KICAgICAgICBlbXB0eSBsaXN0IGlmIHRoZSBrZXkgZG9lc24ndCBleGlzdC5cIlwiXCIKICAgICAgICB0cnk6CiAgICAgICAgICAgIHZhbHMgPSBzZWxmLl9jb250YWluZXJba2V5Lmxvd2VyKCldCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICBpZiBkZWZhdWx0IGlzIHNlbGYuX19tYXJrZXI6CiAgICAgICAgICAgICAgICByZXR1cm4gW10KICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHQKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gdmFsc1sxOl0KCiAgICAjIEJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IGZvciBodHRwbGliCiAgICBnZXRoZWFkZXJzID0gZ2V0bGlzdAogICAgZ2V0YWxsbWF0Y2hpbmdoZWFkZXJzID0gZ2V0bGlzdAogICAgaWdldCA9IGdldGxpc3QKCiAgICAjIEJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IGZvciBodHRwLmNvb2tpZWphcgogICAgZ2V0X2FsbCA9IGdldGxpc3QKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgcmV0dXJuIFwiJXMoJXMpXCIgJSAodHlwZShzZWxmKS5fX25hbWVfXywgZGljdChzZWxmLml0ZXJtZXJnZWQoKSkpCgogICAgZGVmIF9jb3B5X2Zyb20oc2VsZiwgb3RoZXIpOgogICAgICAgIGZvciBrZXkgaW4gb3RoZXI6CiAgICAgICAgICAgIHZhbCA9IG90aGVyLmdldGxpc3Qoa2V5KQogICAgICAgICAgICBpZiBpc2luc3RhbmNlKHZhbCwgbGlzdCk6CiAgICAgICAgICAgICAgICAjIERvbid0IG5lZWQgdG8gY29udmVydCB0dXBsZXMKICAgICAgICAgICAgICAgIHZhbCA9IGxpc3QodmFsKQogICAgICAgICAgICBzZWxmLl9jb250YWluZXJba2V5Lmxvd2VyKCldID0gW2tleV0gKyB2YWwKCiAgICBkZWYgY29weShzZWxmKToKICAgICAgICBjbG9uZSA9IHR5cGUoc2VsZikoKQogICAgICAgIGNsb25lLl9jb3B5X2Zyb20oc2VsZikKICAgICAgICByZXR1cm4gY2xvbmUKCiAgICBkZWYgaXRlcml0ZW1zKHNlbGYpOgogICAgICAgIFwiXCJcIkl0ZXJhdGUgb3ZlciBhbGwgaGVhZGVyIGxpbmVzLCBpbmNsdWRpbmcgZHVwbGljYXRlIG9uZXMuXCJcIlwiCiAgICAgICAgZm9yIGtleSBpbiBzZWxmOgogICAgICAgICAgICB2YWxzID0gc2VsZi5fY29udGFpbmVyW2tleS5sb3dlcigpXQogICAgICAgICAgICBmb3IgdmFsIGluIHZhbHNbMTpdOgogICAgICAgICAgICAgICAgeWllbGQgdmFsc1swXSwgdmFsCgogICAgZGVmIGl0ZXJtZXJnZWQoc2VsZik6CiAgICAgICAgXCJcIlwiSXRlcmF0ZSBvdmVyIGFsbCBoZWFkZXJzLCBtZXJnaW5nIGR1cGxpY2F0ZSBvbmVzIHRvZ2V0aGVyLlwiXCJcIgogICAgICAgIGZvciBrZXkgaW4gc2VsZjoKICAgICAgICAgICAgdmFsID0gc2VsZi5fY29udGFpbmVyW2tleS5sb3dlcigpXQogICAgICAgICAgICB5aWVsZCB2YWxbMF0sIFwiLCBcIi5qb2luKHZhbFsxOl0pCgogICAgZGVmIGl0ZW1zKHNlbGYpOgogICAgICAgIHJldHVybiBsaXN0KHNlbGYuaXRlcml0ZW1zKCkpCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgZnJvbV9odHRwbGliKGNscywgbWVzc2FnZSk6ICAjIFB5dGhvbiAyCiAgICAgICAgXCJcIlwiUmVhZCBoZWFkZXJzIGZyb20gYSBQeXRob24gMiBodHRwbGliIG1lc3NhZ2Ugb2JqZWN0LlwiXCJcIgogICAgICAgICMgcHl0aG9uMi43IGRvZXMgbm90IGV4cG9zZSBhIHByb3BlciBBUEkgZm9yIGV4cG9ydGluZyBtdWx0aWhlYWRlcnMKICAgICAgICAjIGVmZmljaWVudGx5LiBUaGlzIGZ1bmN0aW9uIHJlLXJlYWRzIHJhdyBsaW5lcyBmcm9tIHRoZSBtZXNzYWdlCiAgICAgICAgIyBvYmplY3QgYW5kIGV4dHJhY3RzIHRoZSBtdWx0aWhlYWRlcnMgcHJvcGVybHkuCiAgICAgICAgb2JzX2ZvbGRfY29udGludWVkX2xlYWRlcnMgPSAoXCIgXCIsIFwiXFx0XCIpCiAgICAgICAgaGVhZGVycyA9IFtdCgogICAgICAgIGZvciBsaW5lIGluIG1lc3NhZ2UuaGVhZGVyczoKICAgICAgICAgICAgaWYgbGluZS5zdGFydHN3aXRoKG9ic19mb2xkX2NvbnRpbnVlZF9sZWFkZXJzKToKICAgICAgICAgICAgICAgIGlmIG5vdCBoZWFkZXJzOgogICAgICAgICAgICAgICAgICAgICMgV2UgcmVjZWl2ZWQgYSBoZWFkZXIgbGluZSB0aGF0IHN0YXJ0cyB3aXRoIE9XUyBhcyBkZXNjcmliZWQKICAgICAgICAgICAgICAgICAgICAjIGluIFJGQy03MjMwIFMzLjIuNC4gVGhpcyBpbmRpY2F0ZXMgYSBtdWx0aWxpbmUgaGVhZGVyLCBidXQKICAgICAgICAgICAgICAgICAgICAjIHRoZXJlIGV4aXN0cyBubyBwcmV2aW91cyBoZWFkZXIgdG8gd2hpY2ggd2UgY2FuIGF0dGFjaCBpdC4KICAgICAgICAgICAgICAgICAgICByYWlzZSBJbnZhbGlkSGVhZGVyKAogICAgICAgICAgICAgICAgICAgICAgICBcIkhlYWRlciBjb250aW51YXRpb24gd2l0aCBubyBwcmV2aW91cyBoZWFkZXI6ICVzXCIgJSBsaW5lCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBrZXksIHZhbHVlID0gaGVhZGVyc1stMV0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzWy0xXSA9IChrZXksIHZhbHVlICsgXCIgXCIgKyBsaW5lLnN0cmlwKCkpCiAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgIGtleSwgdmFsdWUgPSBsaW5lLnNwbGl0KFwiOlwiLCAxKQogICAgICAgICAgICBoZWFkZXJzLmFwcGVuZCgoa2V5LCB2YWx1ZS5zdHJpcCgpKSkKCiAgICAgICAgcmV0dXJuIGNscyhoZWFkZXJzKQoKIiIiCm1vZHVsZV9kaWN0WyJ1cmxsaWIzIitvcy5zZXArImNvbm5lY3Rpb24ucHkiXT0iIiIKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhYnNvbHV0ZV9pbXBvcnQKCmltcG9ydCBkYXRldGltZQppbXBvcnQgbG9nZ2luZwppbXBvcnQgb3MKaW1wb3J0IHJlCmltcG9ydCBzb2NrZXQKaW1wb3J0IHdhcm5pbmdzCmZyb20gc29ja2V0IGltcG9ydCBlcnJvciBhcyBTb2NrZXRFcnJvcgpmcm9tIHNvY2tldCBpbXBvcnQgdGltZW91dCBhcyBTb2NrZXRUaW1lb3V0Cgpmcm9tIC5wYWNrYWdlcyBpbXBvcnQgc2l4CmZyb20gLnBhY2thZ2VzLnNpeC5tb3Zlcy5odHRwX2NsaWVudCBpbXBvcnQgSFRUUENvbm5lY3Rpb24gYXMgX0hUVFBDb25uZWN0aW9uCmZyb20gLnBhY2thZ2VzLnNpeC5tb3Zlcy5odHRwX2NsaWVudCBpbXBvcnQgSFRUUEV4Y2VwdGlvbiAgIyBub3FhOiBGNDAxCmZyb20gLnV0aWwucHJveHkgaW1wb3J0IGNyZWF0ZV9wcm94eV9zc2xfY29udGV4dAoKdHJ5OiAgIyBDb21waWxlZCB3aXRoIFNTTD8KICAgIGltcG9ydCBzc2wKCiAgICBCYXNlU1NMRXJyb3IgPSBzc2wuU1NMRXJyb3IKZXhjZXB0IChJbXBvcnRFcnJvciwgQXR0cmlidXRlRXJyb3IpOiAgIyBQbGF0Zm9ybS1zcGVjaWZpYzogTm8gU1NMLgogICAgc3NsID0gTm9uZQoKICAgIGNsYXNzIEJhc2VTU0xFcnJvcihCYXNlRXhjZXB0aW9uKToKICAgICAgICBwYXNzCgoKdHJ5OgogICAgIyBQeXRob24gMzogbm90IGEgbm8tb3AsIHdlJ3JlIGFkZGluZyB0aGlzIHRvIHRoZSBuYW1lc3BhY2Ugc28gaXQgY2FuIGJlIGltcG9ydGVkLgogICAgQ29ubmVjdGlvbkVycm9yID0gQ29ubmVjdGlvbkVycm9yCmV4Y2VwdCBOYW1lRXJyb3I6CiAgICAjIFB5dGhvbiAyCiAgICBjbGFzcyBDb25uZWN0aW9uRXJyb3IoRXhjZXB0aW9uKToKICAgICAgICBwYXNzCgoKdHJ5OiAgIyBQeXRob24gMzoKICAgICMgTm90IGEgbm8tb3AsIHdlJ3JlIGFkZGluZyB0aGlzIHRvIHRoZSBuYW1lc3BhY2Ugc28gaXQgY2FuIGJlIGltcG9ydGVkLgogICAgQnJva2VuUGlwZUVycm9yID0gQnJva2VuUGlwZUVycm9yCmV4Y2VwdCBOYW1lRXJyb3I6ICAjIFB5dGhvbiAyOgoKICAgIGNsYXNzIEJyb2tlblBpcGVFcnJvcihFeGNlcHRpb24pOgogICAgICAgIHBhc3MKCgpmcm9tIC5fY29sbGVjdGlvbnMgaW1wb3J0IEhUVFBIZWFkZXJEaWN0ICAjIG5vcWEgKGhpc3RvcmljYWwsIHJlbW92ZWQgaW4gdjIpCmZyb20gLl92ZXJzaW9uIGltcG9ydCBfX3ZlcnNpb25fXwpmcm9tIC5leGNlcHRpb25zIGltcG9ydCAoCiAgICBDb25uZWN0VGltZW91dEVycm9yLAogICAgTmV3Q29ubmVjdGlvbkVycm9yLAogICAgU3ViamVjdEFsdE5hbWVXYXJuaW5nLAogICAgU3lzdGVtVGltZVdhcm5pbmcsCikKZnJvbSAudXRpbCBpbXBvcnQgU0tJUF9IRUFERVIsIFNLSVBQQUJMRV9IRUFERVJTLCBjb25uZWN0aW9uCmZyb20gLnV0aWwuc3NsXyBpbXBvcnQgKAogICAgYXNzZXJ0X2ZpbmdlcnByaW50LAogICAgY3JlYXRlX3VybGxpYjNfY29udGV4dCwKICAgIGlzX2lwYWRkcmVzcywKICAgIHJlc29sdmVfY2VydF9yZXFzLAogICAgcmVzb2x2ZV9zc2xfdmVyc2lvbiwKICAgIHNzbF93cmFwX3NvY2tldCwKKQpmcm9tIC51dGlsLnNzbF9tYXRjaF9ob3N0bmFtZSBpbXBvcnQgQ2VydGlmaWNhdGVFcnJvciwgbWF0Y2hfaG9zdG5hbWUKCmxvZyA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKF9fbmFtZV9fKQoKcG9ydF9ieV9zY2hlbWUgPSB7XCJodHRwXCI6IDgwLCBcImh0dHBzXCI6IDQ0M30KCiMgV2hlbiBpdCBjb21lcyB0aW1lIHRvIHVwZGF0ZSB0aGlzIHZhbHVlIGFzIGEgcGFydCBvZiByZWd1bGFyIG1haW50ZW5hbmNlCiMgKGllIHRlc3RfcmVjZW50X2RhdGUgaXMgZmFpbGluZykgdXBkYXRlIGl0IHRvIH42IG1vbnRocyBiZWZvcmUgdGhlIGN1cnJlbnQgZGF0ZS4KUkVDRU5UX0RBVEUgPSBkYXRldGltZS5kYXRlKDIwMjIsIDEsIDEpCgpfQ09OVEFJTlNfQ09OVFJPTF9DSEFSX1JFID0gcmUuY29tcGlsZShyXCJbXi0hIyQlJicqKy5eX2B8fjAtOWEtekEtWl1cIikKCgpjbGFzcyBIVFRQQ29ubmVjdGlvbihfSFRUUENvbm5lY3Rpb24sIG9iamVjdCk6CiAgICBcIlwiXCIKICAgIEJhc2VkIG9uIDpjbGFzczpgaHR0cC5jbGllbnQuSFRUUENvbm5lY3Rpb25gIGJ1dCBwcm92aWRlcyBhbiBleHRyYSBjb25zdHJ1Y3RvcgogICAgYmFja3dhcmRzLWNvbXBhdGliaWxpdHkgbGF5ZXIgYmV0d2VlbiBvbGRlciBhbmQgbmV3ZXIgUHl0aG9ucy4KCiAgICBBZGRpdGlvbmFsIGtleXdvcmQgcGFyYW1ldGVycyBhcmUgdXNlZCB0byBjb25maWd1cmUgYXR0cmlidXRlcyBvZiB0aGUgY29ubmVjdGlvbi4KICAgIEFjY2VwdGVkIHBhcmFtZXRlcnMgaW5jbHVkZToKCiAgICAtIGBgc3RyaWN0YGA6IFNlZSB0aGUgZG9jdW1lbnRhdGlvbiBvbiA6Y2xhc3M6YHVybGxpYjMuY29ubmVjdGlvbnBvb2wuSFRUUENvbm5lY3Rpb25Qb29sYAogICAgLSBgYHNvdXJjZV9hZGRyZXNzYGA6IFNldCB0aGUgc291cmNlIGFkZHJlc3MgZm9yIHRoZSBjdXJyZW50IGNvbm5lY3Rpb24uCiAgICAtIGBgc29ja2V0X29wdGlvbnNgYDogU2V0IHNwZWNpZmljIG9wdGlvbnMgb24gdGhlIHVuZGVybHlpbmcgc29ja2V0LiBJZiBub3Qgc3BlY2lmaWVkLCB0aGVuCiAgICAgIGRlZmF1bHRzIGFyZSBsb2FkZWQgZnJvbSBgYEhUVFBDb25uZWN0aW9uLmRlZmF1bHRfc29ja2V0X29wdGlvbnNgYCB3aGljaCBpbmNsdWRlcyBkaXNhYmxpbmcKICAgICAgTmFnbGUncyBhbGdvcml0aG0gKHNldHMgVENQX05PREVMQVkgdG8gMSkgdW5sZXNzIHRoZSBjb25uZWN0aW9uIGlzIGJlaGluZCBhIHByb3h5LgoKICAgICAgRm9yIGV4YW1wbGUsIGlmIHlvdSB3aXNoIHRvIGVuYWJsZSBUQ1AgS2VlcCBBbGl2ZSBpbiBhZGRpdGlvbiB0byB0aGUgZGVmYXVsdHMsCiAgICAgIHlvdSBtaWdodCBwYXNzOgoKICAgICAgLi4gY29kZS1ibG9jazo6IHB5dGhvbgoKICAgICAgICAgSFRUUENvbm5lY3Rpb24uZGVmYXVsdF9zb2NrZXRfb3B0aW9ucyArIFsKICAgICAgICAgICAgIChzb2NrZXQuU09MX1NPQ0tFVCwgc29ja2V0LlNPX0tFRVBBTElWRSwgMSksCiAgICAgICAgIF0KCiAgICAgIE9yIHlvdSBtYXkgd2FudCB0byBkaXNhYmxlIHRoZSBkZWZhdWx0cyBieSBwYXNzaW5nIGFuIGVtcHR5IGxpc3QgKGUuZy4sIGBgW11gYCkuCiAgICBcIlwiXCIKCiAgICBkZWZhdWx0X3BvcnQgPSBwb3J0X2J5X3NjaGVtZVtcImh0dHBcIl0KCiAgICAjOiBEaXNhYmxlIE5hZ2xlJ3MgYWxnb3JpdGhtIGJ5IGRlZmF1bHQuCiAgICAjOiBgYFsoc29ja2V0LklQUFJPVE9fVENQLCBzb2NrZXQuVENQX05PREVMQVksIDEpXWBgCiAgICBkZWZhdWx0X3NvY2tldF9vcHRpb25zID0gWyhzb2NrZXQuSVBQUk9UT19UQ1AsIHNvY2tldC5UQ1BfTk9ERUxBWSwgMSldCgogICAgIzogV2hldGhlciB0aGlzIGNvbm5lY3Rpb24gdmVyaWZpZXMgdGhlIGhvc3QncyBjZXJ0aWZpY2F0ZS4KICAgIGlzX3ZlcmlmaWVkID0gRmFsc2UKCiAgICAjOiBXaGV0aGVyIHRoaXMgcHJveHkgY29ubmVjdGlvbiAoaWYgdXNlZCkgdmVyaWZpZXMgdGhlIHByb3h5IGhvc3QncwogICAgIzogY2VydGlmaWNhdGUuCiAgICBwcm94eV9pc192ZXJpZmllZCA9IE5vbmUKCiAgICBkZWYgX19pbml0X18oc2VsZiwgKmFyZ3MsICoqa3cpOgogICAgICAgIGlmIG5vdCBzaXguUFkyOgogICAgICAgICAgICBrdy5wb3AoXCJzdHJpY3RcIiwgTm9uZSkKCiAgICAgICAgIyBQcmUtc2V0IHNvdXJjZV9hZGRyZXNzLgogICAgICAgIHNlbGYuc291cmNlX2FkZHJlc3MgPSBrdy5nZXQoXCJzb3VyY2VfYWRkcmVzc1wiKQoKICAgICAgICAjOiBUaGUgc29ja2V0IG9wdGlvbnMgcHJvdmlkZWQgYnkgdGhlIHVzZXIuIElmIG5vIG9wdGlvbnMgYXJlCiAgICAgICAgIzogcHJvdmlkZWQsIHdlIHVzZSB0aGUgZGVmYXVsdCBvcHRpb25zLgogICAgICAgIHNlbGYuc29ja2V0X29wdGlvbnMgPSBrdy5wb3AoXCJzb2NrZXRfb3B0aW9uc1wiLCBzZWxmLmRlZmF1bHRfc29ja2V0X29wdGlvbnMpCgogICAgICAgICMgUHJveHkgb3B0aW9ucyBwcm92aWRlZCBieSB0aGUgdXNlci4KICAgICAgICBzZWxmLnByb3h5ID0ga3cucG9wKFwicHJveHlcIiwgTm9uZSkKICAgICAgICBzZWxmLnByb3h5X2NvbmZpZyA9IGt3LnBvcChcInByb3h5X2NvbmZpZ1wiLCBOb25lKQoKICAgICAgICBfSFRUUENvbm5lY3Rpb24uX19pbml0X18oc2VsZiwgKmFyZ3MsICoqa3cpCgogICAgQHByb3BlcnR5CiAgICBkZWYgaG9zdChzZWxmKToKICAgICAgICBcIlwiXCIKICAgICAgICBHZXR0ZXIgbWV0aG9kIHRvIHJlbW92ZSBhbnkgdHJhaWxpbmcgZG90cyB0aGF0IGluZGljYXRlIHRoZSBob3N0bmFtZSBpcyBhbiBGUUROLgoKICAgICAgICBJbiBnZW5lcmFsLCBTU0wgY2VydGlmaWNhdGVzIGRvbid0IGluY2x1ZGUgdGhlIHRyYWlsaW5nIGRvdCBpbmRpY2F0aW5nIGEKICAgICAgICBmdWxseS1xdWFsaWZpZWQgZG9tYWluIG5hbWUsIGFuZCB0aHVzLCB0aGV5IGRvbid0IHZhbGlkYXRlIHByb3Blcmx5IHdoZW4KICAgICAgICBjaGVja2VkIGFnYWluc3QgYSBkb21haW4gbmFtZSB0aGF0IGluY2x1ZGVzIHRoZSBkb3QuIEluIGFkZGl0aW9uLCBzb21lCiAgICAgICAgc2VydmVycyBtYXkgbm90IGV4cGVjdCB0byByZWNlaXZlIHRoZSB0cmFpbGluZyBkb3Qgd2hlbiBwcm92aWRlZC4KCiAgICAgICAgSG93ZXZlciwgdGhlIGhvc3RuYW1lIHdpdGggdHJhaWxpbmcgZG90IGlzIGNyaXRpY2FsIHRvIEROUyByZXNvbHV0aW9uOyBkb2luZyBhCiAgICAgICAgbG9va3VwIHdpdGggdGhlIHRyYWlsaW5nIGRvdCB3aWxsIHByb3Blcmx5IG9ubHkgcmVzb2x2ZSB0aGUgYXBwcm9wcmlhdGUgRlFETiwKICAgICAgICB3aGVyZWFzIGEgbG9va3VwIHdpdGhvdXQgYSB0cmFpbGluZyBkb3Qgd2lsbCBzZWFyY2ggdGhlIHN5c3RlbSdzIHNlYXJjaCBkb21haW4KICAgICAgICBsaXN0LiBUaHVzLCBpdCdzIGltcG9ydGFudCB0byBrZWVwIHRoZSBvcmlnaW5hbCBob3N0IGFyb3VuZCBmb3IgdXNlIG9ubHkgaW4KICAgICAgICB0aG9zZSBjYXNlcyB3aGVyZSBpdCdzIGFwcHJvcHJpYXRlIChpLmUuLCB3aGVuIGRvaW5nIEROUyBsb29rdXAgdG8gZXN0YWJsaXNoIHRoZQogICAgICAgIGFjdHVhbCBUQ1AgY29ubmVjdGlvbiBhY3Jvc3Mgd2hpY2ggd2UncmUgZ29pbmcgdG8gc2VuZCBIVFRQIHJlcXVlc3RzKS4KICAgICAgICBcIlwiXCIKICAgICAgICByZXR1cm4gc2VsZi5fZG5zX2hvc3QucnN0cmlwKFwiLlwiKQoKICAgIEBob3N0LnNldHRlcgogICAgZGVmIGhvc3Qoc2VsZiwgdmFsdWUpOgogICAgICAgIFwiXCJcIgogICAgICAgIFNldHRlciBmb3IgdGhlIGBob3N0YCBwcm9wZXJ0eS4KCiAgICAgICAgV2UgYXNzdW1lIHRoYXQgb25seSB1cmxsaWIzIHVzZXMgdGhlIF9kbnNfaG9zdCBhdHRyaWJ1dGU7IGh0dHBsaWIgaXRzZWxmCiAgICAgICAgb25seSB1c2VzIGBob3N0YCwgYW5kIGl0IHNlZW1zIHJlYXNvbmFibGUgdGhhdCBvdGhlciBsaWJyYXJpZXMgZm9sbG93IHN1aXQuCiAgICAgICAgXCJcIlwiCiAgICAgICAgc2VsZi5fZG5zX2hvc3QgPSB2YWx1ZQoKICAgIGRlZiBfbmV3X2Nvbm4oc2VsZik6CiAgICAgICAgXCJcIlwiRXN0YWJsaXNoIGEgc29ja2V0IGNvbm5lY3Rpb24gYW5kIHNldCBub2RlbGF5IHNldHRpbmdzIG9uIGl0LgoKICAgICAgICA6cmV0dXJuOiBOZXcgc29ja2V0IGNvbm5lY3Rpb24uCiAgICAgICAgXCJcIlwiCiAgICAgICAgZXh0cmFfa3cgPSB7fQogICAgICAgIGlmIHNlbGYuc291cmNlX2FkZHJlc3M6CiAgICAgICAgICAgIGV4dHJhX2t3W1wic291cmNlX2FkZHJlc3NcIl0gPSBzZWxmLnNvdXJjZV9hZGRyZXNzCgogICAgICAgIGlmIHNlbGYuc29ja2V0X29wdGlvbnM6CiAgICAgICAgICAgIGV4dHJhX2t3W1wic29ja2V0X29wdGlvbnNcIl0gPSBzZWxmLnNvY2tldF9vcHRpb25zCgogICAgICAgIHRyeToKICAgICAgICAgICAgY29ubiA9IGNvbm5lY3Rpb24uY3JlYXRlX2Nvbm5lY3Rpb24oCiAgICAgICAgICAgICAgICAoc2VsZi5fZG5zX2hvc3QsIHNlbGYucG9ydCksIHNlbGYudGltZW91dCwgKipleHRyYV9rdwogICAgICAgICAgICApCgogICAgICAgIGV4Y2VwdCBTb2NrZXRUaW1lb3V0OgogICAgICAgICAgICByYWlzZSBDb25uZWN0VGltZW91dEVycm9yKAogICAgICAgICAgICAgICAgc2VsZiwKICAgICAgICAgICAgICAgIFwiQ29ubmVjdGlvbiB0byAlcyB0aW1lZCBvdXQuIChjb25uZWN0IHRpbWVvdXQ9JXMpXCIKICAgICAgICAgICAgICAgICUgKHNlbGYuaG9zdCwgc2VsZi50aW1lb3V0KSwKICAgICAgICAgICAgKQoKICAgICAgICBleGNlcHQgU29ja2V0RXJyb3IgYXMgZToKICAgICAgICAgICAgcmFpc2UgTmV3Q29ubmVjdGlvbkVycm9yKAogICAgICAgICAgICAgICAgc2VsZiwgXCJGYWlsZWQgdG8gZXN0YWJsaXNoIGEgbmV3IGNvbm5lY3Rpb246ICVzXCIgJSBlCiAgICAgICAgICAgICkKCiAgICAgICAgcmV0dXJuIGNvbm4KCiAgICBkZWYgX2lzX3VzaW5nX3R1bm5lbChzZWxmKToKICAgICAgICAjIEdvb2dsZSBBcHAgRW5naW5lJ3MgaHR0cGxpYiBkb2VzIG5vdCBkZWZpbmUgX3R1bm5lbF9ob3N0CiAgICAgICAgcmV0dXJuIGdldGF0dHIoc2VsZiwgXCJfdHVubmVsX2hvc3RcIiwgTm9uZSkKCiAgICBkZWYgX3ByZXBhcmVfY29ubihzZWxmLCBjb25uKToKICAgICAgICBzZWxmLnNvY2sgPSBjb25uCiAgICAgICAgaWYgc2VsZi5faXNfdXNpbmdfdHVubmVsKCk6CiAgICAgICAgICAgICMgVE9ETzogRml4IHR1bm5lbCBzbyBpdCBkb2Vzbid0IGRlcGVuZCBvbiBzZWxmLnNvY2sgc3RhdGUuCiAgICAgICAgICAgIHNlbGYuX3R1bm5lbCgpCiAgICAgICAgICAgICMgTWFyayB0aGlzIGNvbm5lY3Rpb24gYXMgbm90IHJldXNhYmxlCiAgICAgICAgICAgIHNlbGYuYXV0b19vcGVuID0gMAoKICAgIGRlZiBjb25uZWN0KHNlbGYpOgogICAgICAgIGNvbm4gPSBzZWxmLl9uZXdfY29ubigpCiAgICAgICAgc2VsZi5fcHJlcGFyZV9jb25uKGNvbm4pCgogICAgZGVmIHB1dHJlcXVlc3Qoc2VsZiwgbWV0aG9kLCB1cmwsICphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgXCJcIlwiIFwiXCJcIgogICAgICAgICMgRW1wdHkgZG9jc3RyaW5nIGJlY2F1c2UgdGhlIGluZGVudGF0aW9uIG9mIENQeXRob24ncyBpbXBsZW1lbnRhdGlvbgogICAgICAgICMgaXMgYnJva2VuIGJ1dCB3ZSBkb24ndCB3YW50IHRoaXMgbWV0aG9kIGluIG91ciBkb2N1bWVudGF0aW9uLgogICAgICAgIG1hdGNoID0gX0NPTlRBSU5TX0NPTlRST0xfQ0hBUl9SRS5zZWFyY2gobWV0aG9kKQogICAgICAgIGlmIG1hdGNoOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKAogICAgICAgICAgICAgICAgXCJNZXRob2QgY2Fubm90IGNvbnRhaW4gbm9uLXRva2VuIGNoYXJhY3RlcnMgJXIgKGZvdW5kIGF0IGxlYXN0ICVyKVwiCiAgICAgICAgICAgICAgICAlIChtZXRob2QsIG1hdGNoLmdyb3VwKCkpCiAgICAgICAgICAgICkKCiAgICAgICAgcmV0dXJuIF9IVFRQQ29ubmVjdGlvbi5wdXRyZXF1ZXN0KHNlbGYsIG1ldGhvZCwgdXJsLCAqYXJncywgKiprd2FyZ3MpCgogICAgZGVmIHB1dGhlYWRlcihzZWxmLCBoZWFkZXIsICp2YWx1ZXMpOgogICAgICAgIFwiXCJcIiBcIlwiXCIKICAgICAgICBpZiBub3QgYW55KGlzaW5zdGFuY2Uodiwgc3RyKSBhbmQgdiA9PSBTS0lQX0hFQURFUiBmb3IgdiBpbiB2YWx1ZXMpOgogICAgICAgICAgICBfSFRUUENvbm5lY3Rpb24ucHV0aGVhZGVyKHNlbGYsIGhlYWRlciwgKnZhbHVlcykKICAgICAgICBlbGlmIHNpeC5lbnN1cmVfc3RyKGhlYWRlci5sb3dlcigpKSBub3QgaW4gU0tJUFBBQkxFX0hFQURFUlM6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoCiAgICAgICAgICAgICAgICBcInVybGxpYjMudXRpbC5TS0lQX0hFQURFUiBvbmx5IHN1cHBvcnRzICclcydcIgogICAgICAgICAgICAgICAgJSAoXCInLCAnXCIuam9pbihtYXAoc3RyLnRpdGxlLCBzb3J0ZWQoU0tJUFBBQkxFX0hFQURFUlMpKSksKQogICAgICAgICAgICApCgogICAgZGVmIHJlcXVlc3Qoc2VsZiwgbWV0aG9kLCB1cmwsIGJvZHk9Tm9uZSwgaGVhZGVycz1Ob25lKToKICAgICAgICBpZiBoZWFkZXJzIGlzIE5vbmU6CiAgICAgICAgICAgIGhlYWRlcnMgPSB7fQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgQXZvaWQgbW9kaWZ5aW5nIHRoZSBoZWFkZXJzIHBhc3NlZCBpbnRvIC5yZXF1ZXN0KCkKICAgICAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMuY29weSgpCiAgICAgICAgaWYgXCJ1c2VyLWFnZW50XCIgbm90IGluIChzaXguZW5zdXJlX3N0cihrLmxvd2VyKCkpIGZvciBrIGluIGhlYWRlcnMpOgogICAgICAgICAgICBoZWFkZXJzW1wiVXNlci1BZ2VudFwiXSA9IF9nZXRfZGVmYXVsdF91c2VyX2FnZW50KCkKICAgICAgICBzdXBlcihIVFRQQ29ubmVjdGlvbiwgc2VsZikucmVxdWVzdChtZXRob2QsIHVybCwgYm9keT1ib2R5LCBoZWFkZXJzPWhlYWRlcnMpCgogICAgZGVmIHJlcXVlc3RfY2h1bmtlZChzZWxmLCBtZXRob2QsIHVybCwgYm9keT1Ob25lLCBoZWFkZXJzPU5vbmUpOgogICAgICAgIFwiXCJcIgogICAgICAgIEFsdGVybmF0aXZlIHRvIHRoZSBjb21tb24gcmVxdWVzdCBtZXRob2QsIHdoaWNoIHNlbmRzIHRoZQogICAgICAgIGJvZHkgd2l0aCBjaHVua2VkIGVuY29kaW5nIGFuZCBub3QgYXMgb25lIGJsb2NrCiAgICAgICAgXCJcIlwiCiAgICAgICAgaGVhZGVycyA9IGhlYWRlcnMgb3Ige30KICAgICAgICBoZWFkZXJfa2V5cyA9IHNldChbc2l4LmVuc3VyZV9zdHIoay5sb3dlcigpKSBmb3IgayBpbiBoZWFkZXJzXSkKICAgICAgICBza2lwX2FjY2VwdF9lbmNvZGluZyA9IFwiYWNjZXB0LWVuY29kaW5nXCIgaW4gaGVhZGVyX2tleXMKICAgICAgICBza2lwX2hvc3QgPSBcImhvc3RcIiBpbiBoZWFkZXJfa2V5cwogICAgICAgIHNlbGYucHV0cmVxdWVzdCgKICAgICAgICAgICAgbWV0aG9kLCB1cmwsIHNraXBfYWNjZXB0X2VuY29kaW5nPXNraXBfYWNjZXB0X2VuY29kaW5nLCBza2lwX2hvc3Q9c2tpcF9ob3N0CiAgICAgICAgKQogICAgICAgIGlmIFwidXNlci1hZ2VudFwiIG5vdCBpbiBoZWFkZXJfa2V5czoKICAgICAgICAgICAgc2VsZi5wdXRoZWFkZXIoXCJVc2VyLUFnZW50XCIsIF9nZXRfZGVmYXVsdF91c2VyX2FnZW50KCkpCiAgICAgICAgZm9yIGhlYWRlciwgdmFsdWUgaW4gaGVhZGVycy5pdGVtcygpOgogICAgICAgICAgICBzZWxmLnB1dGhlYWRlcihoZWFkZXIsIHZhbHVlKQogICAgICAgIGlmIFwidHJhbnNmZXItZW5jb2RpbmdcIiBub3QgaW4gaGVhZGVyX2tleXM6CiAgICAgICAgICAgIHNlbGYucHV0aGVhZGVyKFwiVHJhbnNmZXItRW5jb2RpbmdcIiwgXCJjaHVua2VkXCIpCiAgICAgICAgc2VsZi5lbmRoZWFkZXJzKCkKCiAgICAgICAgaWYgYm9keSBpcyBub3QgTm9uZToKICAgICAgICAgICAgc3RyaW5naXNoX3R5cGVzID0gc2l4LnN0cmluZ190eXBlcyArIChieXRlcywpCiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoYm9keSwgc3RyaW5naXNoX3R5cGVzKToKICAgICAgICAgICAgICAgIGJvZHkgPSAoYm9keSwpCiAgICAgICAgICAgIGZvciBjaHVuayBpbiBib2R5OgogICAgICAgICAgICAgICAgaWYgbm90IGNodW5rOgogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShjaHVuaywgYnl0ZXMpOgogICAgICAgICAgICAgICAgICAgIGNodW5rID0gY2h1bmsuZW5jb2RlKFwidXRmOFwiKQogICAgICAgICAgICAgICAgbGVuX3N0ciA9IGhleChsZW4oY2h1bmspKVsyOl0KICAgICAgICAgICAgICAgIHRvX3NlbmQgPSBieXRlYXJyYXkobGVuX3N0ci5lbmNvZGUoKSkKICAgICAgICAgICAgICAgIHRvX3NlbmQgKz0gYlwiXFxyXFxuXCIKICAgICAgICAgICAgICAgIHRvX3NlbmQgKz0gY2h1bmsKICAgICAgICAgICAgICAgIHRvX3NlbmQgKz0gYlwiXFxyXFxuXCIKICAgICAgICAgICAgICAgIHNlbGYuc2VuZCh0b19zZW5kKQoKICAgICAgICAjIEFmdGVyIHRoZSBpZiBjbGF1c2UsIHRvIGFsd2F5cyBoYXZlIGEgY2xvc2VkIGJvZHkKICAgICAgICBzZWxmLnNlbmQoYlwiMFxcclxcblxcclxcblwiKQoKCmNsYXNzIEhUVFBTQ29ubmVjdGlvbihIVFRQQ29ubmVjdGlvbik6CiAgICBcIlwiXCIKICAgIE1hbnkgb2YgdGhlIHBhcmFtZXRlcnMgdG8gdGhpcyBjb25zdHJ1Y3RvciBhcmUgcGFzc2VkIHRvIHRoZSB1bmRlcmx5aW5nIFNTTAogICAgc29ja2V0IGJ5IG1lYW5zIG9mIDpweTpmdW5jOmB1cmxsaWIzLnV0aWwuc3NsX3dyYXBfc29ja2V0YC4KICAgIFwiXCJcIgoKICAgIGRlZmF1bHRfcG9ydCA9IHBvcnRfYnlfc2NoZW1lW1wiaHR0cHNcIl0KCiAgICBjZXJ0X3JlcXMgPSBOb25lCiAgICBjYV9jZXJ0cyA9IE5vbmUKICAgIGNhX2NlcnRfZGlyID0gTm9uZQogICAgY2FfY2VydF9kYXRhID0gTm9uZQogICAgc3NsX3ZlcnNpb24gPSBOb25lCiAgICBhc3NlcnRfZmluZ2VycHJpbnQgPSBOb25lCiAgICB0bHNfaW5fdGxzX3JlcXVpcmVkID0gRmFsc2UKCiAgICBkZWYgX19pbml0X18oCiAgICAgICAgc2VsZiwKICAgICAgICBob3N0LAogICAgICAgIHBvcnQ9Tm9uZSwKICAgICAgICBrZXlfZmlsZT1Ob25lLAogICAgICAgIGNlcnRfZmlsZT1Ob25lLAogICAgICAgIGtleV9wYXNzd29yZD1Ob25lLAogICAgICAgIHN0cmljdD1Ob25lLAogICAgICAgIHRpbWVvdXQ9c29ja2V0Ll9HTE9CQUxfREVGQVVMVF9USU1FT1VULAogICAgICAgIHNzbF9jb250ZXh0PU5vbmUsCiAgICAgICAgc2VydmVyX2hvc3RuYW1lPU5vbmUsCiAgICAgICAgKiprdwogICAgKToKCiAgICAgICAgSFRUUENvbm5lY3Rpb24uX19pbml0X18oc2VsZiwgaG9zdCwgcG9ydCwgc3RyaWN0PXN0cmljdCwgdGltZW91dD10aW1lb3V0LCAqKmt3KQoKICAgICAgICBzZWxmLmtleV9maWxlID0ga2V5X2ZpbGUKICAgICAgICBzZWxmLmNlcnRfZmlsZSA9IGNlcnRfZmlsZQogICAgICAgIHNlbGYua2V5X3Bhc3N3b3JkID0ga2V5X3Bhc3N3b3JkCiAgICAgICAgc2VsZi5zc2xfY29udGV4dCA9IHNzbF9jb250ZXh0CiAgICAgICAgc2VsZi5zZXJ2ZXJfaG9zdG5hbWUgPSBzZXJ2ZXJfaG9zdG5hbWUKCiAgICAgICAgIyBSZXF1aXJlZCBwcm9wZXJ0eSBmb3IgR29vZ2xlIEFwcEVuZ2luZSAxLjkuMCB3aGljaCBvdGhlcndpc2UgY2F1c2VzCiAgICAgICAgIyBIVFRQUyByZXF1ZXN0cyB0byBnbyBvdXQgYXMgSFRUUC4gKFNlZSBJc3N1ZSAjMzU2KQogICAgICAgIHNlbGYuX3Byb3RvY29sID0gXCJodHRwc1wiCgogICAgZGVmIHNldF9jZXJ0KAogICAgICAgIHNlbGYsCiAgICAgICAga2V5X2ZpbGU9Tm9uZSwKICAgICAgICBjZXJ0X2ZpbGU9Tm9uZSwKICAgICAgICBjZXJ0X3JlcXM9Tm9uZSwKICAgICAgICBrZXlfcGFzc3dvcmQ9Tm9uZSwKICAgICAgICBjYV9jZXJ0cz1Ob25lLAogICAgICAgIGFzc2VydF9ob3N0bmFtZT1Ob25lLAogICAgICAgIGFzc2VydF9maW5nZXJwcmludD1Ob25lLAogICAgICAgIGNhX2NlcnRfZGlyPU5vbmUsCiAgICAgICAgY2FfY2VydF9kYXRhPU5vbmUsCiAgICApOgogICAgICAgIFwiXCJcIgogICAgICAgIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBvbmNlLCBiZWZvcmUgdGhlIGNvbm5lY3Rpb24gaXMgdXNlZC4KICAgICAgICBcIlwiXCIKICAgICAgICAjIElmIGNlcnRfcmVxcyBpcyBub3QgcHJvdmlkZWQgd2UnbGwgYXNzdW1lIENFUlRfUkVRVUlSRUQgdW5sZXNzIHdlIGFsc28KICAgICAgICAjIGhhdmUgYW4gU1NMQ29udGV4dCBvYmplY3QgaW4gd2hpY2ggY2FzZSB3ZSdsbCB1c2UgaXRzIHZlcmlmeV9tb2RlLgogICAgICAgIGlmIGNlcnRfcmVxcyBpcyBOb25lOgogICAgICAgICAgICBpZiBzZWxmLnNzbF9jb250ZXh0IGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgY2VydF9yZXFzID0gc2VsZi5zc2xfY29udGV4dC52ZXJpZnlfbW9kZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgY2VydF9yZXFzID0gcmVzb2x2ZV9jZXJ0X3JlcXMoTm9uZSkKCiAgICAgICAgc2VsZi5rZXlfZmlsZSA9IGtleV9maWxlCiAgICAgICAgc2VsZi5jZXJ0X2ZpbGUgPSBjZXJ0X2ZpbGUKICAgICAgICBzZWxmLmNlcnRfcmVxcyA9IGNlcnRfcmVxcwogICAgICAgIHNlbGYua2V5X3Bhc3N3b3JkID0ga2V5X3Bhc3N3b3JkCiAgICAgICAgc2VsZi5hc3NlcnRfaG9zdG5hbWUgPSBhc3NlcnRfaG9zdG5hbWUKICAgICAgICBzZWxmLmFzc2VydF9maW5nZXJwcmludCA9IGFzc2VydF9maW5nZXJwcmludAogICAgICAgIHNlbGYuY2FfY2VydHMgPSBjYV9jZXJ0cyBhbmQgb3MucGF0aC5leHBhbmR1c2VyKGNhX2NlcnRzKQogICAgICAgIHNlbGYuY2FfY2VydF9kaXIgPSBjYV9jZXJ0X2RpciBhbmQgb3MucGF0aC5leHBhbmR1c2VyKGNhX2NlcnRfZGlyKQogICAgICAgIHNlbGYuY2FfY2VydF9kYXRhID0gY2FfY2VydF9kYXRhCgogICAgZGVmIGNvbm5lY3Qoc2VsZik6CiAgICAgICAgIyBBZGQgY2VydGlmaWNhdGUgdmVyaWZpY2F0aW9uCiAgICAgICAgc2VsZi5zb2NrID0gY29ubiA9IHNlbGYuX25ld19jb25uKCkKICAgICAgICBob3N0bmFtZSA9IHNlbGYuaG9zdAogICAgICAgIHRsc19pbl90bHMgPSBGYWxzZQoKICAgICAgICBpZiBzZWxmLl9pc191c2luZ190dW5uZWwoKToKICAgICAgICAgICAgaWYgc2VsZi50bHNfaW5fdGxzX3JlcXVpcmVkOgogICAgICAgICAgICAgICAgc2VsZi5zb2NrID0gY29ubiA9IHNlbGYuX2Nvbm5lY3RfdGxzX3Byb3h5KGhvc3RuYW1lLCBjb25uKQogICAgICAgICAgICAgICAgdGxzX2luX3RscyA9IFRydWUKCiAgICAgICAgICAgICMgQ2FsbHMgc2VsZi5fc2V0X2hvc3Rwb3J0KCksIHNvIHNlbGYuaG9zdCBpcwogICAgICAgICAgICAjIHNlbGYuX3R1bm5lbF9ob3N0IGJlbG93LgogICAgICAgICAgICBzZWxmLl90dW5uZWwoKQogICAgICAgICAgICAjIE1hcmsgdGhpcyBjb25uZWN0aW9uIGFzIG5vdCByZXVzYWJsZQogICAgICAgICAgICBzZWxmLmF1dG9fb3BlbiA9IDAKCiAgICAgICAgICAgICMgT3ZlcnJpZGUgdGhlIGhvc3Qgd2l0aCB0aGUgb25lIHdlJ3JlIHJlcXVlc3RpbmcgZGF0YSBmcm9tLgogICAgICAgICAgICBob3N0bmFtZSA9IHNlbGYuX3R1bm5lbF9ob3N0CgogICAgICAgIHNlcnZlcl9ob3N0bmFtZSA9IGhvc3RuYW1lCiAgICAgICAgaWYgc2VsZi5zZXJ2ZXJfaG9zdG5hbWUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlcnZlcl9ob3N0bmFtZSA9IHNlbGYuc2VydmVyX2hvc3RuYW1lCgogICAgICAgIGlzX3RpbWVfb2ZmID0gZGF0ZXRpbWUuZGF0ZS50b2RheSgpIDwgUkVDRU5UX0RBVEUKICAgICAgICBpZiBpc190aW1lX29mZjoKICAgICAgICAgICAgd2FybmluZ3Mud2FybigKICAgICAgICAgICAgICAgICgKICAgICAgICAgICAgICAgICAgICBcIlN5c3RlbSB0aW1lIGlzIHdheSBvZmYgKGJlZm9yZSB7MH0pLiBUaGlzIHdpbGwgcHJvYmFibHkgXCIKICAgICAgICAgICAgICAgICAgICBcImxlYWQgdG8gU1NMIHZlcmlmaWNhdGlvbiBlcnJvcnNcIgogICAgICAgICAgICAgICAgKS5mb3JtYXQoUkVDRU5UX0RBVEUpLAogICAgICAgICAgICAgICAgU3lzdGVtVGltZVdhcm5pbmcsCiAgICAgICAgICAgICkKCiAgICAgICAgIyBXcmFwIHNvY2tldCB1c2luZyB2ZXJpZmljYXRpb24gd2l0aCB0aGUgcm9vdCBjZXJ0cyBpbgogICAgICAgICMgdHJ1c3RlZF9yb290X2NlcnRzCiAgICAgICAgZGVmYXVsdF9zc2xfY29udGV4dCA9IEZhbHNlCiAgICAgICAgaWYgc2VsZi5zc2xfY29udGV4dCBpcyBOb25lOgogICAgICAgICAgICBkZWZhdWx0X3NzbF9jb250ZXh0ID0gVHJ1ZQogICAgICAgICAgICBzZWxmLnNzbF9jb250ZXh0ID0gY3JlYXRlX3VybGxpYjNfY29udGV4dCgKICAgICAgICAgICAgICAgIHNzbF92ZXJzaW9uPXJlc29sdmVfc3NsX3ZlcnNpb24oc2VsZi5zc2xfdmVyc2lvbiksCiAgICAgICAgICAgICAgICBjZXJ0X3JlcXM9cmVzb2x2ZV9jZXJ0X3JlcXMoc2VsZi5jZXJ0X3JlcXMpLAogICAgICAgICAgICApCgogICAgICAgIGNvbnRleHQgPSBzZWxmLnNzbF9jb250ZXh0CiAgICAgICAgY29udGV4dC52ZXJpZnlfbW9kZSA9IHJlc29sdmVfY2VydF9yZXFzKHNlbGYuY2VydF9yZXFzKQoKICAgICAgICAjIFRyeSB0byBsb2FkIE9TIGRlZmF1bHQgY2VydHMgaWYgbm9uZSBhcmUgZ2l2ZW4uCiAgICAgICAgIyBXb3JrcyB3ZWxsIG9uIFdpbmRvd3MgKHJlcXVpcmVzIFB5dGhvbjMuNCspCiAgICAgICAgaWYgKAogICAgICAgICAgICBub3Qgc2VsZi5jYV9jZXJ0cwogICAgICAgICAgICBhbmQgbm90IHNlbGYuY2FfY2VydF9kaXIKICAgICAgICAgICAgYW5kIG5vdCBzZWxmLmNhX2NlcnRfZGF0YQogICAgICAgICAgICBhbmQgZGVmYXVsdF9zc2xfY29udGV4dAogICAgICAgICAgICBhbmQgaGFzYXR0cihjb250ZXh0LCBcImxvYWRfZGVmYXVsdF9jZXJ0c1wiKQogICAgICAgICk6CiAgICAgICAgICAgIGNvbnRleHQubG9hZF9kZWZhdWx0X2NlcnRzKCkKCiAgICAgICAgc2VsZi5zb2NrID0gc3NsX3dyYXBfc29ja2V0KAogICAgICAgICAgICBzb2NrPWNvbm4sCiAgICAgICAgICAgIGtleWZpbGU9c2VsZi5rZXlfZmlsZSwKICAgICAgICAgICAgY2VydGZpbGU9c2VsZi5jZXJ0X2ZpbGUsCiAgICAgICAgICAgIGtleV9wYXNzd29yZD1zZWxmLmtleV9wYXNzd29yZCwKICAgICAgICAgICAgY2FfY2VydHM9c2VsZi5jYV9jZXJ0cywKICAgICAgICAgICAgY2FfY2VydF9kaXI9c2VsZi5jYV9jZXJ0X2RpciwKICAgICAgICAgICAgY2FfY2VydF9kYXRhPXNlbGYuY2FfY2VydF9kYXRhLAogICAgICAgICAgICBzZXJ2ZXJfaG9zdG5hbWU9c2VydmVyX2hvc3RuYW1lLAogICAgICAgICAgICBzc2xfY29udGV4dD1jb250ZXh0LAogICAgICAgICAgICB0bHNfaW5fdGxzPXRsc19pbl90bHMsCiAgICAgICAgKQoKICAgICAgICAjIElmIHdlJ3JlIHVzaW5nIGFsbCBkZWZhdWx0cyBhbmQgdGhlIGNvbm5lY3Rpb24KICAgICAgICAjIGlzIFRMU3YxIG9yIFRMU3YxLjEgd2UgdGhyb3cgYSBEZXByZWNhdGlvbldhcm5pbmcKICAgICAgICAjIGZvciB0aGUgaG9zdC4KICAgICAgICBpZiAoCiAgICAgICAgICAgIGRlZmF1bHRfc3NsX2NvbnRleHQKICAgICAgICAgICAgYW5kIHNlbGYuc3NsX3ZlcnNpb24gaXMgTm9uZQogICAgICAgICAgICBhbmQgaGFzYXR0cihzZWxmLnNvY2ssIFwidmVyc2lvblwiKQogICAgICAgICAgICBhbmQgc2VsZi5zb2NrLnZlcnNpb24oKSBpbiB7XCJUTFN2MVwiLCBcIlRMU3YxLjFcIn0KICAgICAgICApOgogICAgICAgICAgICB3YXJuaW5ncy53YXJuKAogICAgICAgICAgICAgICAgXCJOZWdvdGlhdGluZyBUTFN2MS9UTFN2MS4xIGJ5IGRlZmF1bHQgaXMgZGVwcmVjYXRlZCBcIgogICAgICAgICAgICAgICAgXCJhbmQgd2lsbCBiZSBkaXNhYmxlZCBpbiB1cmxsaWIzIHYyLjAuMC4gQ29ubmVjdGluZyB0byBcIgogICAgICAgICAgICAgICAgXCInJXMnIHdpdGggJyVzJyBjYW4gYmUgZW5hYmxlZCBieSBleHBsaWNpdGx5IG9wdGluZy1pbiBcIgogICAgICAgICAgICAgICAgXCJ3aXRoICdzc2xfdmVyc2lvbidcIiAlIChzZWxmLmhvc3QsIHNlbGYuc29jay52ZXJzaW9uKCkpLAogICAgICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLAogICAgICAgICAgICApCgogICAgICAgIGlmIHNlbGYuYXNzZXJ0X2ZpbmdlcnByaW50OgogICAgICAgICAgICBhc3NlcnRfZmluZ2VycHJpbnQoCiAgICAgICAgICAgICAgICBzZWxmLnNvY2suZ2V0cGVlcmNlcnQoYmluYXJ5X2Zvcm09VHJ1ZSksIHNlbGYuYXNzZXJ0X2ZpbmdlcnByaW50CiAgICAgICAgICAgICkKICAgICAgICBlbGlmICgKICAgICAgICAgICAgY29udGV4dC52ZXJpZnlfbW9kZSAhPSBzc2wuQ0VSVF9OT05FCiAgICAgICAgICAgIGFuZCBub3QgZ2V0YXR0cihjb250ZXh0LCBcImNoZWNrX2hvc3RuYW1lXCIsIEZhbHNlKQogICAgICAgICAgICBhbmQgc2VsZi5hc3NlcnRfaG9zdG5hbWUgaXMgbm90IEZhbHNlCiAgICAgICAgKToKICAgICAgICAgICAgIyBXaGlsZSB1cmxsaWIzIGF0dGVtcHRzIHRvIGFsd2F5cyB0dXJuIG9mZiBob3N0bmFtZSBtYXRjaGluZyBmcm9tCiAgICAgICAgICAgICMgdGhlIFRMUyBsaWJyYXJ5LCB0aGlzIGNhbm5vdCBhbHdheXMgYmUgZG9uZS4gU28gd2UgY2hlY2sgd2hldGhlcgogICAgICAgICAgICAjIHRoZSBUTFMgTGlicmFyeSBzdGlsbCB0aGlua3MgaXQncyBtYXRjaGluZyBob3N0bmFtZXMuCiAgICAgICAgICAgIGNlcnQgPSBzZWxmLnNvY2suZ2V0cGVlcmNlcnQoKQogICAgICAgICAgICBpZiBub3QgY2VydC5nZXQoXCJzdWJqZWN0QWx0TmFtZVwiLCAoKSk6CiAgICAgICAgICAgICAgICB3YXJuaW5ncy53YXJuKAogICAgICAgICAgICAgICAgICAgICgKICAgICAgICAgICAgICAgICAgICAgICAgXCJDZXJ0aWZpY2F0ZSBmb3IgezB9IGhhcyBubyBgc3ViamVjdEFsdE5hbWVgLCBmYWxsaW5nIGJhY2sgdG8gY2hlY2sgZm9yIGEgXCIKICAgICAgICAgICAgICAgICAgICAgICAgXCJgY29tbW9uTmFtZWAgZm9yIG5vdy4gVGhpcyBmZWF0dXJlIGlzIGJlaW5nIHJlbW92ZWQgYnkgbWFqb3IgYnJvd3NlcnMgYW5kIFwiCiAgICAgICAgICAgICAgICAgICAgICAgIFwiZGVwcmVjYXRlZCBieSBSRkMgMjgxOC4gKFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXJsbGliMy91cmxsaWIzL2lzc3Vlcy80OTcgXCIKICAgICAgICAgICAgICAgICAgICAgICAgXCJmb3IgZGV0YWlscy4pXCIuZm9ybWF0KGhvc3RuYW1lKQogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgU3ViamVjdEFsdE5hbWVXYXJuaW5nLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICBfbWF0Y2hfaG9zdG5hbWUoY2VydCwgc2VsZi5hc3NlcnRfaG9zdG5hbWUgb3Igc2VydmVyX2hvc3RuYW1lKQoKICAgICAgICBzZWxmLmlzX3ZlcmlmaWVkID0gKAogICAgICAgICAgICBjb250ZXh0LnZlcmlmeV9tb2RlID09IHNzbC5DRVJUX1JFUVVJUkVECiAgICAgICAgICAgIG9yIHNlbGYuYXNzZXJ0X2ZpbmdlcnByaW50IGlzIG5vdCBOb25lCiAgICAgICAgKQoKICAgIGRlZiBfY29ubmVjdF90bHNfcHJveHkoc2VsZiwgaG9zdG5hbWUsIGNvbm4pOgogICAgICAgIFwiXCJcIgogICAgICAgIEVzdGFibGlzaCBhIFRMUyBjb25uZWN0aW9uIHRvIHRoZSBwcm94eSB1c2luZyB0aGUgcHJvdmlkZWQgU1NMIGNvbnRleHQuCiAgICAgICAgXCJcIlwiCiAgICAgICAgcHJveHlfY29uZmlnID0gc2VsZi5wcm94eV9jb25maWcKICAgICAgICBzc2xfY29udGV4dCA9IHByb3h5X2NvbmZpZy5zc2xfY29udGV4dAogICAgICAgIGlmIHNzbF9jb250ZXh0OgogICAgICAgICAgICAjIElmIHRoZSB1c2VyIHByb3ZpZGVkIGEgcHJveHkgY29udGV4dCwgd2UgYXNzdW1lIENBIGFuZCBjbGllbnQKICAgICAgICAgICAgIyBjZXJ0aWZpY2F0ZXMgaGF2ZSBhbHJlYWR5IGJlZW4gc2V0CiAgICAgICAgICAgIHJldHVybiBzc2xfd3JhcF9zb2NrZXQoCiAgICAgICAgICAgICAgICBzb2NrPWNvbm4sCiAgICAgICAgICAgICAgICBzZXJ2ZXJfaG9zdG5hbWU9aG9zdG5hbWUsCiAgICAgICAgICAgICAgICBzc2xfY29udGV4dD1zc2xfY29udGV4dCwKICAgICAgICAgICAgKQoKICAgICAgICBzc2xfY29udGV4dCA9IGNyZWF0ZV9wcm94eV9zc2xfY29udGV4dCgKICAgICAgICAgICAgc2VsZi5zc2xfdmVyc2lvbiwKICAgICAgICAgICAgc2VsZi5jZXJ0X3JlcXMsCiAgICAgICAgICAgIHNlbGYuY2FfY2VydHMsCiAgICAgICAgICAgIHNlbGYuY2FfY2VydF9kaXIsCiAgICAgICAgICAgIHNlbGYuY2FfY2VydF9kYXRhLAogICAgICAgICkKCiAgICAgICAgIyBJZiBubyBjZXJ0IHdhcyBwcm92aWRlZCwgdXNlIG9ubHkgdGhlIGRlZmF1bHQgb3B0aW9ucyBmb3Igc2VydmVyCiAgICAgICAgIyBjZXJ0aWZpY2F0ZSB2YWxpZGF0aW9uCiAgICAgICAgc29ja2V0ID0gc3NsX3dyYXBfc29ja2V0KAogICAgICAgICAgICBzb2NrPWNvbm4sCiAgICAgICAgICAgIGNhX2NlcnRzPXNlbGYuY2FfY2VydHMsCiAgICAgICAgICAgIGNhX2NlcnRfZGlyPXNlbGYuY2FfY2VydF9kaXIsCiAgICAgICAgICAgIGNhX2NlcnRfZGF0YT1zZWxmLmNhX2NlcnRfZGF0YSwKICAgICAgICAgICAgc2VydmVyX2hvc3RuYW1lPWhvc3RuYW1lLAogICAgICAgICAgICBzc2xfY29udGV4dD1zc2xfY29udGV4dCwKICAgICAgICApCgogICAgICAgIGlmIHNzbF9jb250ZXh0LnZlcmlmeV9tb2RlICE9IHNzbC5DRVJUX05PTkUgYW5kIG5vdCBnZXRhdHRyKAogICAgICAgICAgICBzc2xfY29udGV4dCwgXCJjaGVja19ob3N0bmFtZVwiLCBGYWxzZQogICAgICAgICk6CiAgICAgICAgICAgICMgV2hpbGUgdXJsbGliMyBhdHRlbXB0cyB0byBhbHdheXMgdHVybiBvZmYgaG9zdG5hbWUgbWF0Y2hpbmcgZnJvbQogICAgICAgICAgICAjIHRoZSBUTFMgbGlicmFyeSwgdGhpcyBjYW5ub3QgYWx3YXlzIGJlIGRvbmUuIFNvIHdlIGNoZWNrIHdoZXRoZXIKICAgICAgICAgICAgIyB0aGUgVExTIExpYnJhcnkgc3RpbGwgdGhpbmtzIGl0J3MgbWF0Y2hpbmcgaG9zdG5hbWVzLgogICAgICAgICAgICBjZXJ0ID0gc29ja2V0LmdldHBlZXJjZXJ0KCkKICAgICAgICAgICAgaWYgbm90IGNlcnQuZ2V0KFwic3ViamVjdEFsdE5hbWVcIiwgKCkpOgogICAgICAgICAgICAgICAgd2FybmluZ3Mud2FybigKICAgICAgICAgICAgICAgICAgICAoCiAgICAgICAgICAgICAgICAgICAgICAgIFwiQ2VydGlmaWNhdGUgZm9yIHswfSBoYXMgbm8gYHN1YmplY3RBbHROYW1lYCwgZmFsbGluZyBiYWNrIHRvIGNoZWNrIGZvciBhIFwiCiAgICAgICAgICAgICAgICAgICAgICAgIFwiYGNvbW1vbk5hbWVgIGZvciBub3cuIFRoaXMgZmVhdHVyZSBpcyBiZWluZyByZW1vdmVkIGJ5IG1ham9yIGJyb3dzZXJzIGFuZCBcIgogICAgICAgICAgICAgICAgICAgICAgICBcImRlcHJlY2F0ZWQgYnkgUkZDIDI4MTguIChTZWUgaHR0cHM6Ly9naXRodWIuY29tL3VybGxpYjMvdXJsbGliMy9pc3N1ZXMvNDk3IFwiCiAgICAgICAgICAgICAgICAgICAgICAgIFwiZm9yIGRldGFpbHMuKVwiLmZvcm1hdChob3N0bmFtZSkKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIFN1YmplY3RBbHROYW1lV2FybmluZywKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgX21hdGNoX2hvc3RuYW1lKGNlcnQsIGhvc3RuYW1lKQoKICAgICAgICBzZWxmLnByb3h5X2lzX3ZlcmlmaWVkID0gc3NsX2NvbnRleHQudmVyaWZ5X21vZGUgPT0gc3NsLkNFUlRfUkVRVUlSRUQKICAgICAgICByZXR1cm4gc29ja2V0CgoKZGVmIF9tYXRjaF9ob3N0bmFtZShjZXJ0LCBhc3NlcnRlZF9ob3N0bmFtZSk6CiAgICAjIE91ciB1cHN0cmVhbSBpbXBsZW1lbnRhdGlvbiBvZiBzc2wubWF0Y2hfaG9zdG5hbWUoKQogICAgIyBvbmx5IGFwcGxpZXMgdGhpcyBub3JtYWxpemF0aW9uIHRvIElQIGFkZHJlc3NlcyBzbyBpdCBkb2Vzbid0CiAgICAjIG1hdGNoIEROUyBTQU5zIHNvIHdlIGRvIHRoZSBzYW1lIHRoaW5nIQogICAgc3RyaXBwZWRfaG9zdG5hbWUgPSBhc3NlcnRlZF9ob3N0bmFtZS5zdHJpcChcInVbXVwiKQogICAgaWYgaXNfaXBhZGRyZXNzKHN0cmlwcGVkX2hvc3RuYW1lKToKICAgICAgICBhc3NlcnRlZF9ob3N0bmFtZSA9IHN0cmlwcGVkX2hvc3RuYW1lCgogICAgdHJ5OgogICAgICAgIG1hdGNoX2hvc3RuYW1lKGNlcnQsIGFzc2VydGVkX2hvc3RuYW1lKQogICAgZXhjZXB0IENlcnRpZmljYXRlRXJyb3IgYXMgZToKICAgICAgICBsb2cud2FybmluZygKICAgICAgICAgICAgXCJDZXJ0aWZpY2F0ZSBkaWQgbm90IG1hdGNoIGV4cGVjdGVkIGhvc3RuYW1lOiAlcy4gQ2VydGlmaWNhdGU6ICVzXCIsCiAgICAgICAgICAgIGFzc2VydGVkX2hvc3RuYW1lLAogICAgICAgICAgICBjZXJ0LAogICAgICAgICkKICAgICAgICAjIEFkZCBjZXJ0IHRvIGV4Y2VwdGlvbiBhbmQgcmVyYWlzZSBzbyBjbGllbnQgY29kZSBjYW4gaW5zcGVjdAogICAgICAgICMgdGhlIGNlcnQgd2hlbiBjYXRjaGluZyB0aGUgZXhjZXB0aW9uLCBpZiB0aGV5IHdhbnQgdG8KICAgICAgICBlLl9wZWVyX2NlcnQgPSBjZXJ0CiAgICAgICAgcmFpc2UKCgpkZWYgX2dldF9kZWZhdWx0X3VzZXJfYWdlbnQoKToKICAgIHJldHVybiBcInB5dGhvbi11cmxsaWIzLyVzXCIgJSBfX3ZlcnNpb25fXwoKCmNsYXNzIER1bW15Q29ubmVjdGlvbihvYmplY3QpOgogICAgXCJcIlwiVXNlZCB0byBkZXRlY3QgYSBmYWlsZWQgQ29ubmVjdGlvbkNscyBpbXBvcnQuXCJcIlwiCgogICAgcGFzcwoKCmlmIG5vdCBzc2w6CiAgICBIVFRQU0Nvbm5lY3Rpb24gPSBEdW1teUNvbm5lY3Rpb24gICMgbm9xYTogRjgxMQoKClZlcmlmaWVkSFRUUFNDb25uZWN0aW9uID0gSFRUUFNDb25uZWN0aW9uCgoiIiIKbW9kdWxlX2RpY3RbInVybGxpYjMiK29zLnNlcCsiZmllbGRzLnB5Il09IiIiCmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYWJzb2x1dGVfaW1wb3J0CgppbXBvcnQgZW1haWwudXRpbHMKaW1wb3J0IG1pbWV0eXBlcwppbXBvcnQgcmUKCmZyb20gLnBhY2thZ2VzIGltcG9ydCBzaXgKCgpkZWYgZ3Vlc3NfY29udGVudF90eXBlKGZpbGVuYW1lLCBkZWZhdWx0PVwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCIpOgogICAgXCJcIlwiCiAgICBHdWVzcyB0aGUgXCJDb250ZW50LVR5cGVcIiBvZiBhIGZpbGUuCgogICAgOnBhcmFtIGZpbGVuYW1lOgogICAgICAgIFRoZSBmaWxlbmFtZSB0byBndWVzcyB0aGUgXCJDb250ZW50LVR5cGVcIiBvZiB1c2luZyA6bW9kOmBtaW1ldHlwZXNgLgogICAgOnBhcmFtIGRlZmF1bHQ6CiAgICAgICAgSWYgbm8gXCJDb250ZW50LVR5cGVcIiBjYW4gYmUgZ3Vlc3NlZCwgZGVmYXVsdCB0byBgZGVmYXVsdGAuCiAgICBcIlwiXCIKICAgIGlmIGZpbGVuYW1lOgogICAgICAgIHJldHVybiBtaW1ldHlwZXMuZ3Vlc3NfdHlwZShmaWxlbmFtZSlbMF0gb3IgZGVmYXVsdAogICAgcmV0dXJuIGRlZmF1bHQKCgpkZWYgZm9ybWF0X2hlYWRlcl9wYXJhbV9yZmMyMjMxKG5hbWUsIHZhbHVlKToKICAgIFwiXCJcIgogICAgSGVscGVyIGZ1bmN0aW9uIHRvIGZvcm1hdCBhbmQgcXVvdGUgYSBzaW5nbGUgaGVhZGVyIHBhcmFtZXRlciB1c2luZyB0aGUKICAgIHN0cmF0ZWd5IGRlZmluZWQgaW4gUkZDIDIyMzEuCgogICAgUGFydGljdWxhcmx5IHVzZWZ1bCBmb3IgaGVhZGVyIHBhcmFtZXRlcnMgd2hpY2ggbWlnaHQgY29udGFpbgogICAgbm9uLUFTQ0lJIHZhbHVlcywgbGlrZSBmaWxlIG5hbWVzLiBUaGlzIGZvbGxvd3MKICAgIGBSRkMgMjM4OCBTZWN0aW9uIDQuNCA8aHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzIzODgjc2VjdGlvbi00LjQ+YF8uCgogICAgOnBhcmFtIG5hbWU6CiAgICAgICAgVGhlIG5hbWUgb2YgdGhlIHBhcmFtZXRlciwgYSBzdHJpbmcgZXhwZWN0ZWQgdG8gYmUgQVNDSUkgb25seS4KICAgIDpwYXJhbSB2YWx1ZToKICAgICAgICBUaGUgdmFsdWUgb2YgdGhlIHBhcmFtZXRlciwgcHJvdmlkZWQgYXMgYGBieXRlc2BgIG9yIGBzdHJgYC4KICAgIDpyZXQ6CiAgICAgICAgQW4gUkZDLTIyMzEtZm9ybWF0dGVkIHVuaWNvZGUgc3RyaW5nLgogICAgXCJcIlwiCiAgICBpZiBpc2luc3RhbmNlKHZhbHVlLCBzaXguYmluYXJ5X3R5cGUpOgogICAgICAgIHZhbHVlID0gdmFsdWUuZGVjb2RlKFwidXRmLThcIikKCiAgICBpZiBub3QgYW55KGNoIGluIHZhbHVlIGZvciBjaCBpbiAnXCJcXFxcXFxyXFxuJyk6CiAgICAgICAgcmVzdWx0ID0gdSclcz1cIiVzXCInICUgKG5hbWUsIHZhbHVlKQogICAgICAgIHRyeToKICAgICAgICAgICAgcmVzdWx0LmVuY29kZShcImFzY2lpXCIpCiAgICAgICAgZXhjZXB0IChVbmljb2RlRW5jb2RlRXJyb3IsIFVuaWNvZGVEZWNvZGVFcnJvcik6CiAgICAgICAgICAgIHBhc3MKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gcmVzdWx0CgogICAgaWYgc2l4LlBZMjogICMgUHl0aG9uIDI6CiAgICAgICAgdmFsdWUgPSB2YWx1ZS5lbmNvZGUoXCJ1dGYtOFwiKQoKICAgICMgZW5jb2RlX3JmYzIyMzEgYWNjZXB0cyBhbiBlbmNvZGVkIHN0cmluZyBhbmQgcmV0dXJucyBhbiBhc2NpaS1lbmNvZGVkCiAgICAjIHN0cmluZyBpbiBQeXRob24gMiBidXQgYWNjZXB0cyBhbmQgcmV0dXJucyB1bmljb2RlIHN0cmluZ3MgaW4gUHl0aG9uIDMKICAgIHZhbHVlID0gZW1haWwudXRpbHMuZW5jb2RlX3JmYzIyMzEodmFsdWUsIFwidXRmLThcIikKICAgIHZhbHVlID0gXCIlcyo9JXNcIiAlIChuYW1lLCB2YWx1ZSkKCiAgICBpZiBzaXguUFkyOiAgIyBQeXRob24gMjoKICAgICAgICB2YWx1ZSA9IHZhbHVlLmRlY29kZShcInV0Zi04XCIpCgogICAgcmV0dXJuIHZhbHVlCgoKX0hUTUw1X1JFUExBQ0VNRU5UUyA9IHsKICAgIHVcIlxcdTAwMjJcIjogdVwiJTIyXCIsCiAgICAjIFJlcGxhY2UgXCJcXFwiIHdpdGggXCJcXFxcXCIuCiAgICB1XCJcXHUwMDVDXCI6IHVcIlxcdTAwNUNcXHUwMDVDXCIsCn0KCiMgQWxsIGNvbnRyb2wgY2hhcmFjdGVycyBmcm9tIDB4MDAgdG8gMHgxRiAqZXhjZXB0KiAweDFCLgpfSFRNTDVfUkVQTEFDRU1FTlRTLnVwZGF0ZSgKICAgIHsKICAgICAgICBzaXgudW5pY2hyKGNjKTogdVwiJXs6MDJYfVwiLmZvcm1hdChjYykKICAgICAgICBmb3IgY2MgaW4gcmFuZ2UoMHgwMCwgMHgxRiArIDEpCiAgICAgICAgaWYgY2Mgbm90IGluICgweDFCLCkKICAgIH0KKQoKCmRlZiBfcmVwbGFjZV9tdWx0aXBsZSh2YWx1ZSwgbmVlZGxlc19hbmRfcmVwbGFjZW1lbnRzKToKICAgIGRlZiByZXBsYWNlcihtYXRjaCk6CiAgICAgICAgcmV0dXJuIG5lZWRsZXNfYW5kX3JlcGxhY2VtZW50c1ttYXRjaC5ncm91cCgwKV0KCiAgICBwYXR0ZXJuID0gcmUuY29tcGlsZSgKICAgICAgICByXCJ8XCIuam9pbihbcmUuZXNjYXBlKG5lZWRsZSkgZm9yIG5lZWRsZSBpbiBuZWVkbGVzX2FuZF9yZXBsYWNlbWVudHMua2V5cygpXSkKICAgICkKCiAgICByZXN1bHQgPSBwYXR0ZXJuLnN1YihyZXBsYWNlciwgdmFsdWUpCgogICAgcmV0dXJuIHJlc3VsdAoKCmRlZiBmb3JtYXRfaGVhZGVyX3BhcmFtX2h0bWw1KG5hbWUsIHZhbHVlKToKICAgIFwiXCJcIgogICAgSGVscGVyIGZ1bmN0aW9uIHRvIGZvcm1hdCBhbmQgcXVvdGUgYSBzaW5nbGUgaGVhZGVyIHBhcmFtZXRlciB1c2luZyB0aGUKICAgIEhUTUw1IHN0cmF0ZWd5LgoKICAgIFBhcnRpY3VsYXJseSB1c2VmdWwgZm9yIGhlYWRlciBwYXJhbWV0ZXJzIHdoaWNoIG1pZ2h0IGNvbnRhaW4KICAgIG5vbi1BU0NJSSB2YWx1ZXMsIGxpa2UgZmlsZSBuYW1lcy4gVGhpcyBmb2xsb3dzIHRoZSBgSFRNTDUgV29ya2luZyBEcmFmdAogICAgU2VjdGlvbiA0LjEwLjIyLjdgXyBhbmQgbWF0Y2hlcyB0aGUgYmVoYXZpb3Igb2YgY3VybCBhbmQgbW9kZXJuIGJyb3dzZXJzLgoKICAgIC4uIF9IVE1MNSBXb3JraW5nIERyYWZ0IFNlY3Rpb24gNC4xMC4yMi43OgogICAgICAgIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9odG1sL3NlYy1mb3Jtcy5odG1sI211bHRpcGFydC1mb3JtLWRhdGEKCiAgICA6cGFyYW0gbmFtZToKICAgICAgICBUaGUgbmFtZSBvZiB0aGUgcGFyYW1ldGVyLCBhIHN0cmluZyBleHBlY3RlZCB0byBiZSBBU0NJSSBvbmx5LgogICAgOnBhcmFtIHZhbHVlOgogICAgICAgIFRoZSB2YWx1ZSBvZiB0aGUgcGFyYW1ldGVyLCBwcm92aWRlZCBhcyBgYGJ5dGVzYGAgb3IgYHN0cmBgLgogICAgOnJldDoKICAgICAgICBBIHVuaWNvZGUgc3RyaW5nLCBzdHJpcHBlZCBvZiB0cm91Ymxlc29tZSBjaGFyYWN0ZXJzLgogICAgXCJcIlwiCiAgICBpZiBpc2luc3RhbmNlKHZhbHVlLCBzaXguYmluYXJ5X3R5cGUpOgogICAgICAgIHZhbHVlID0gdmFsdWUuZGVjb2RlKFwidXRmLThcIikKCiAgICB2YWx1ZSA9IF9yZXBsYWNlX211bHRpcGxlKHZhbHVlLCBfSFRNTDVfUkVQTEFDRU1FTlRTKQoKICAgIHJldHVybiB1JyVzPVwiJXNcIicgJSAobmFtZSwgdmFsdWUpCgoKIyBGb3IgYmFja3dhcmRzLWNvbXBhdGliaWxpdHkuCmZvcm1hdF9oZWFkZXJfcGFyYW0gPSBmb3JtYXRfaGVhZGVyX3BhcmFtX2h0bWw1CgoKY2xhc3MgUmVxdWVzdEZpZWxkKG9iamVjdCk6CiAgICBcIlwiXCIKICAgIEEgZGF0YSBjb250YWluZXIgZm9yIHJlcXVlc3QgYm9keSBwYXJhbWV0ZXJzLgoKICAgIDpwYXJhbSBuYW1lOgogICAgICAgIFRoZSBuYW1lIG9mIHRoaXMgcmVxdWVzdCBmaWVsZC4gTXVzdCBiZSB1bmljb2RlLgogICAgOnBhcmFtIGRhdGE6CiAgICAgICAgVGhlIGRhdGEvdmFsdWUgYm9keS4KICAgIDpwYXJhbSBmaWxlbmFtZToKICAgICAgICBBbiBvcHRpb25hbCBmaWxlbmFtZSBvZiB0aGUgcmVxdWVzdCBmaWVsZC4gTXVzdCBiZSB1bmljb2RlLgogICAgOnBhcmFtIGhlYWRlcnM6CiAgICAgICAgQW4gb3B0aW9uYWwgZGljdC1saWtlIG9iamVjdCBvZiBoZWFkZXJzIHRvIGluaXRpYWxseSB1c2UgZm9yIHRoZSBmaWVsZC4KICAgIDpwYXJhbSBoZWFkZXJfZm9ybWF0dGVyOgogICAgICAgIEFuIG9wdGlvbmFsIGNhbGxhYmxlIHRoYXQgaXMgdXNlZCB0byBlbmNvZGUgYW5kIGZvcm1hdCB0aGUgaGVhZGVycy4gQnkKICAgICAgICBkZWZhdWx0LCB0aGlzIGlzIDpmdW5jOmBmb3JtYXRfaGVhZGVyX3BhcmFtX2h0bWw1YC4KICAgIFwiXCJcIgoKICAgIGRlZiBfX2luaXRfXygKICAgICAgICBzZWxmLAogICAgICAgIG5hbWUsCiAgICAgICAgZGF0YSwKICAgICAgICBmaWxlbmFtZT1Ob25lLAogICAgICAgIGhlYWRlcnM9Tm9uZSwKICAgICAgICBoZWFkZXJfZm9ybWF0dGVyPWZvcm1hdF9oZWFkZXJfcGFyYW1faHRtbDUsCiAgICApOgogICAgICAgIHNlbGYuX25hbWUgPSBuYW1lCiAgICAgICAgc2VsZi5fZmlsZW5hbWUgPSBmaWxlbmFtZQogICAgICAgIHNlbGYuZGF0YSA9IGRhdGEKICAgICAgICBzZWxmLmhlYWRlcnMgPSB7fQogICAgICAgIGlmIGhlYWRlcnM6CiAgICAgICAgICAgIHNlbGYuaGVhZGVycyA9IGRpY3QoaGVhZGVycykKICAgICAgICBzZWxmLmhlYWRlcl9mb3JtYXR0ZXIgPSBoZWFkZXJfZm9ybWF0dGVyCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgZnJvbV90dXBsZXMoY2xzLCBmaWVsZG5hbWUsIHZhbHVlLCBoZWFkZXJfZm9ybWF0dGVyPWZvcm1hdF9oZWFkZXJfcGFyYW1faHRtbDUpOgogICAgICAgIFwiXCJcIgogICAgICAgIEEgOmNsYXNzOmB+dXJsbGliMy5maWVsZHMuUmVxdWVzdEZpZWxkYCBmYWN0b3J5IGZyb20gb2xkLXN0eWxlIHR1cGxlIHBhcmFtZXRlcnMuCgogICAgICAgIFN1cHBvcnRzIGNvbnN0cnVjdGluZyA6Y2xhc3M6YH51cmxsaWIzLmZpZWxkcy5SZXF1ZXN0RmllbGRgIGZyb20KICAgICAgICBwYXJhbWV0ZXIgb2Yga2V5L3ZhbHVlIHN0cmluZ3MgQU5EIGtleS9maWxldHVwbGUuIEEgZmlsZXR1cGxlIGlzIGEKICAgICAgICAoZmlsZW5hbWUsIGRhdGEsIE1JTUUgdHlwZSkgdHVwbGUgd2hlcmUgdGhlIE1JTUUgdHlwZSBpcyBvcHRpb25hbC4KICAgICAgICBGb3IgZXhhbXBsZTo6CgogICAgICAgICAgICAnZm9vJzogJ2JhcicsCiAgICAgICAgICAgICdmYWtlZmlsZSc6ICgnZm9vZmlsZS50eHQnLCAnY29udGVudHMgb2YgZm9vZmlsZScpLAogICAgICAgICAgICAncmVhbGZpbGUnOiAoJ2JhcmZpbGUudHh0Jywgb3BlbigncmVhbGZpbGUnKS5yZWFkKCkpLAogICAgICAgICAgICAndHlwZWRmaWxlJzogKCdiYXpmaWxlLmJpbicsIG9wZW4oJ2JhemZpbGUnKS5yZWFkKCksICdpbWFnZS9qcGVnJyksCiAgICAgICAgICAgICdub25hbWVmaWxlJzogJ2NvbnRlbnRzIG9mIG5vbmFtZWZpbGUgZmllbGQnLAoKICAgICAgICBGaWVsZCBuYW1lcyBhbmQgZmlsZW5hbWVzIG11c3QgYmUgdW5pY29kZS4KICAgICAgICBcIlwiXCIKICAgICAgICBpZiBpc2luc3RhbmNlKHZhbHVlLCB0dXBsZSk6CiAgICAgICAgICAgIGlmIGxlbih2YWx1ZSkgPT0gMzoKICAgICAgICAgICAgICAgIGZpbGVuYW1lLCBkYXRhLCBjb250ZW50X3R5cGUgPSB2YWx1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZmlsZW5hbWUsIGRhdGEgPSB2YWx1ZQogICAgICAgICAgICAgICAgY29udGVudF90eXBlID0gZ3Vlc3NfY29udGVudF90eXBlKGZpbGVuYW1lKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGZpbGVuYW1lID0gTm9uZQogICAgICAgICAgICBjb250ZW50X3R5cGUgPSBOb25lCiAgICAgICAgICAgIGRhdGEgPSB2YWx1ZQoKICAgICAgICByZXF1ZXN0X3BhcmFtID0gY2xzKAogICAgICAgICAgICBmaWVsZG5hbWUsIGRhdGEsIGZpbGVuYW1lPWZpbGVuYW1lLCBoZWFkZXJfZm9ybWF0dGVyPWhlYWRlcl9mb3JtYXR0ZXIKICAgICAgICApCiAgICAgICAgcmVxdWVzdF9wYXJhbS5tYWtlX211bHRpcGFydChjb250ZW50X3R5cGU9Y29udGVudF90eXBlKQoKICAgICAgICByZXR1cm4gcmVxdWVzdF9wYXJhbQoKICAgIGRlZiBfcmVuZGVyX3BhcnQoc2VsZiwgbmFtZSwgdmFsdWUpOgogICAgICAgIFwiXCJcIgogICAgICAgIE92ZXJyaWRhYmxlIGhlbHBlciBmdW5jdGlvbiB0byBmb3JtYXQgYSBzaW5nbGUgaGVhZGVyIHBhcmFtZXRlci4gQnkKICAgICAgICBkZWZhdWx0LCB0aGlzIGNhbGxzIGBgc2VsZi5oZWFkZXJfZm9ybWF0dGVyYGAuCgogICAgICAgIDpwYXJhbSBuYW1lOgogICAgICAgICAgICBUaGUgbmFtZSBvZiB0aGUgcGFyYW1ldGVyLCBhIHN0cmluZyBleHBlY3RlZCB0byBiZSBBU0NJSSBvbmx5LgogICAgICAgIDpwYXJhbSB2YWx1ZToKICAgICAgICAgICAgVGhlIHZhbHVlIG9mIHRoZSBwYXJhbWV0ZXIsIHByb3ZpZGVkIGFzIGEgdW5pY29kZSBzdHJpbmcuCiAgICAgICAgXCJcIlwiCgogICAgICAgIHJldHVybiBzZWxmLmhlYWRlcl9mb3JtYXR0ZXIobmFtZSwgdmFsdWUpCgogICAgZGVmIF9yZW5kZXJfcGFydHMoc2VsZiwgaGVhZGVyX3BhcnRzKToKICAgICAgICBcIlwiXCIKICAgICAgICBIZWxwZXIgZnVuY3Rpb24gdG8gZm9ybWF0IGFuZCBxdW90ZSBhIHNpbmdsZSBoZWFkZXIuCgogICAgICAgIFVzZWZ1bCBmb3Igc2luZ2xlIGhlYWRlcnMgdGhhdCBhcmUgY29tcG9zZWQgb2YgbXVsdGlwbGUgaXRlbXMuIEUuZy4sCiAgICAgICAgJ0NvbnRlbnQtRGlzcG9zaXRpb24nIGZpZWxkcy4KCiAgICAgICAgOnBhcmFtIGhlYWRlcl9wYXJ0czoKICAgICAgICAgICAgQSBzZXF1ZW5jZSBvZiAoaywgdikgdHVwbGVzIG9yIGEgOmNsYXNzOmBkaWN0YCBvZiAoaywgdikgdG8gZm9ybWF0CiAgICAgICAgICAgIGFzIGBrMT1cInYxXCI7IGsyPVwidjJcIjsgLi4uYC4KICAgICAgICBcIlwiXCIKICAgICAgICBwYXJ0cyA9IFtdCiAgICAgICAgaXRlcmFibGUgPSBoZWFkZXJfcGFydHMKICAgICAgICBpZiBpc2luc3RhbmNlKGhlYWRlcl9wYXJ0cywgZGljdCk6CiAgICAgICAgICAgIGl0ZXJhYmxlID0gaGVhZGVyX3BhcnRzLml0ZW1zKCkKCiAgICAgICAgZm9yIG5hbWUsIHZhbHVlIGluIGl0ZXJhYmxlOgogICAgICAgICAgICBpZiB2YWx1ZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHBhcnRzLmFwcGVuZChzZWxmLl9yZW5kZXJfcGFydChuYW1lLCB2YWx1ZSkpCgogICAgICAgIHJldHVybiB1XCI7IFwiLmpvaW4ocGFydHMpCgogICAgZGVmIHJlbmRlcl9oZWFkZXJzKHNlbGYpOgogICAgICAgIFwiXCJcIgogICAgICAgIFJlbmRlcnMgdGhlIGhlYWRlcnMgZm9yIHRoaXMgcmVxdWVzdCBmaWVsZC4KICAgICAgICBcIlwiXCIKICAgICAgICBsaW5lcyA9IFtdCgogICAgICAgIHNvcnRfa2V5cyA9IFtcIkNvbnRlbnQtRGlzcG9zaXRpb25cIiwgXCJDb250ZW50LVR5cGVcIiwgXCJDb250ZW50LUxvY2F0aW9uXCJdCiAgICAgICAgZm9yIHNvcnRfa2V5IGluIHNvcnRfa2V5czoKICAgICAgICAgICAgaWYgc2VsZi5oZWFkZXJzLmdldChzb3J0X2tleSwgRmFsc2UpOgogICAgICAgICAgICAgICAgbGluZXMuYXBwZW5kKHVcIiVzOiAlc1wiICUgKHNvcnRfa2V5LCBzZWxmLmhlYWRlcnNbc29ydF9rZXldKSkKCiAgICAgICAgZm9yIGhlYWRlcl9uYW1lLCBoZWFkZXJfdmFsdWUgaW4gc2VsZi5oZWFkZXJzLml0ZW1zKCk6CiAgICAgICAgICAgIGlmIGhlYWRlcl9uYW1lIG5vdCBpbiBzb3J0X2tleXM6CiAgICAgICAgICAgICAgICBpZiBoZWFkZXJfdmFsdWU6CiAgICAgICAgICAgICAgICAgICAgbGluZXMuYXBwZW5kKHVcIiVzOiAlc1wiICUgKGhlYWRlcl9uYW1lLCBoZWFkZXJfdmFsdWUpKQoKICAgICAgICBsaW5lcy5hcHBlbmQodVwiXFxyXFxuXCIpCiAgICAgICAgcmV0dXJuIHVcIlxcclxcblwiLmpvaW4obGluZXMpCgogICAgZGVmIG1ha2VfbXVsdGlwYXJ0KAogICAgICAgIHNlbGYsIGNvbnRlbnRfZGlzcG9zaXRpb249Tm9uZSwgY29udGVudF90eXBlPU5vbmUsIGNvbnRlbnRfbG9jYXRpb249Tm9uZQogICAgKToKICAgICAgICBcIlwiXCIKICAgICAgICBNYWtlcyB0aGlzIHJlcXVlc3QgZmllbGQgaW50byBhIG11bHRpcGFydCByZXF1ZXN0IGZpZWxkLgoKICAgICAgICBUaGlzIG1ldGhvZCBvdmVycmlkZXMgXCJDb250ZW50LURpc3Bvc2l0aW9uXCIsIFwiQ29udGVudC1UeXBlXCIgYW5kCiAgICAgICAgXCJDb250ZW50LUxvY2F0aW9uXCIgaGVhZGVycyB0byB0aGUgcmVxdWVzdCBwYXJhbWV0ZXIuCgogICAgICAgIDpwYXJhbSBjb250ZW50X3R5cGU6CiAgICAgICAgICAgIFRoZSAnQ29udGVudC1UeXBlJyBvZiB0aGUgcmVxdWVzdCBib2R5LgogICAgICAgIDpwYXJhbSBjb250ZW50X2xvY2F0aW9uOgogICAgICAgICAgICBUaGUgJ0NvbnRlbnQtTG9jYXRpb24nIG9mIHRoZSByZXF1ZXN0IGJvZHkuCgogICAgICAgIFwiXCJcIgogICAgICAgIHNlbGYuaGVhZGVyc1tcIkNvbnRlbnQtRGlzcG9zaXRpb25cIl0gPSBjb250ZW50X2Rpc3Bvc2l0aW9uIG9yIHVcImZvcm0tZGF0YVwiCiAgICAgICAgc2VsZi5oZWFkZXJzW1wiQ29udGVudC1EaXNwb3NpdGlvblwiXSArPSB1XCI7IFwiLmpvaW4oCiAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgIHVcIlwiLAogICAgICAgICAgICAgICAgc2VsZi5fcmVuZGVyX3BhcnRzKAogICAgICAgICAgICAgICAgICAgICgodVwibmFtZVwiLCBzZWxmLl9uYW1lKSwgKHVcImZpbGVuYW1lXCIsIHNlbGYuX2ZpbGVuYW1lKSkKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgIF0KICAgICAgICApCiAgICAgICAgc2VsZi5oZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdID0gY29udGVudF90eXBlCiAgICAgICAgc2VsZi5oZWFkZXJzW1wiQ29udGVudC1Mb2NhdGlvblwiXSA9IGNvbnRlbnRfbG9jYXRpb24KCiIiIgptb2R1bGVfZGljdFsidXJsbGliMyIrb3Muc2VwKyJwb29sbWFuYWdlci5weSJdPSIiIgpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFic29sdXRlX2ltcG9ydAoKaW1wb3J0IGNvbGxlY3Rpb25zCmltcG9ydCBmdW5jdG9vbHMKaW1wb3J0IGxvZ2dpbmcKCmZyb20gLl9jb2xsZWN0aW9ucyBpbXBvcnQgUmVjZW50bHlVc2VkQ29udGFpbmVyCmZyb20gLmNvbm5lY3Rpb25wb29sIGltcG9ydCBIVFRQQ29ubmVjdGlvblBvb2wsIEhUVFBTQ29ubmVjdGlvblBvb2wsIHBvcnRfYnlfc2NoZW1lCmZyb20gLmV4Y2VwdGlvbnMgaW1wb3J0ICgKICAgIExvY2F0aW9uVmFsdWVFcnJvciwKICAgIE1heFJldHJ5RXJyb3IsCiAgICBQcm94eVNjaGVtZVVua25vd24sCiAgICBQcm94eVNjaGVtZVVuc3VwcG9ydGVkLAogICAgVVJMU2NoZW1lVW5rbm93biwKKQpmcm9tIC5wYWNrYWdlcyBpbXBvcnQgc2l4CmZyb20gLnBhY2thZ2VzLnNpeC5tb3Zlcy51cmxsaWIucGFyc2UgaW1wb3J0IHVybGpvaW4KZnJvbSAucmVxdWVzdCBpbXBvcnQgUmVxdWVzdE1ldGhvZHMKZnJvbSAudXRpbC5wcm94eSBpbXBvcnQgY29ubmVjdGlvbl9yZXF1aXJlc19odHRwX3R1bm5lbApmcm9tIC51dGlsLnJldHJ5IGltcG9ydCBSZXRyeQpmcm9tIC51dGlsLnVybCBpbXBvcnQgcGFyc2VfdXJsCgpfX2FsbF9fID0gW1wiUG9vbE1hbmFnZXJcIiwgXCJQcm94eU1hbmFnZXJcIiwgXCJwcm94eV9mcm9tX3VybFwiXQoKCmxvZyA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKF9fbmFtZV9fKQoKU1NMX0tFWVdPUkRTID0gKAogICAgXCJrZXlfZmlsZVwiLAogICAgXCJjZXJ0X2ZpbGVcIiwKICAgIFwiY2VydF9yZXFzXCIsCiAgICBcImNhX2NlcnRzXCIsCiAgICBcInNzbF92ZXJzaW9uXCIsCiAgICBcImNhX2NlcnRfZGlyXCIsCiAgICBcInNzbF9jb250ZXh0XCIsCiAgICBcImtleV9wYXNzd29yZFwiLAogICAgXCJzZXJ2ZXJfaG9zdG5hbWVcIiwKKQoKIyBBbGwga25vd24ga2V5d29yZCBhcmd1bWVudHMgdGhhdCBjb3VsZCBiZSBwcm92aWRlZCB0byB0aGUgcG9vbCBtYW5hZ2VyLCBpdHMKIyBwb29scywgb3IgdGhlIHVuZGVybHlpbmcgY29ubmVjdGlvbnMuIFRoaXMgaXMgdXNlZCB0byBjb25zdHJ1Y3QgYSBwb29sIGtleS4KX2tleV9maWVsZHMgPSAoCiAgICBcImtleV9zY2hlbWVcIiwgICMgc3RyCiAgICBcImtleV9ob3N0XCIsICAjIHN0cgogICAgXCJrZXlfcG9ydFwiLCAgIyBpbnQKICAgIFwia2V5X3RpbWVvdXRcIiwgICMgaW50IG9yIGZsb2F0IG9yIFRpbWVvdXQKICAgIFwia2V5X3JldHJpZXNcIiwgICMgaW50IG9yIFJldHJ5CiAgICBcImtleV9zdHJpY3RcIiwgICMgYm9vbAogICAgXCJrZXlfYmxvY2tcIiwgICMgYm9vbAogICAgXCJrZXlfc291cmNlX2FkZHJlc3NcIiwgICMgc3RyCiAgICBcImtleV9rZXlfZmlsZVwiLCAgIyBzdHIKICAgIFwia2V5X2tleV9wYXNzd29yZFwiLCAgIyBzdHIKICAgIFwia2V5X2NlcnRfZmlsZVwiLCAgIyBzdHIKICAgIFwia2V5X2NlcnRfcmVxc1wiLCAgIyBzdHIKICAgIFwia2V5X2NhX2NlcnRzXCIsICAjIHN0cgogICAgXCJrZXlfc3NsX3ZlcnNpb25cIiwgICMgc3RyCiAgICBcImtleV9jYV9jZXJ0X2RpclwiLCAgIyBzdHIKICAgIFwia2V5X3NzbF9jb250ZXh0XCIsICAjIGluc3RhbmNlIG9mIHNzbC5TU0xDb250ZXh0IG9yIHVybGxpYjMudXRpbC5zc2xfLlNTTENvbnRleHQKICAgIFwia2V5X21heHNpemVcIiwgICMgaW50CiAgICBcImtleV9oZWFkZXJzXCIsICAjIGRpY3QKICAgIFwia2V5X19wcm94eVwiLCAgIyBwYXJzZWQgcHJveHkgdXJsCiAgICBcImtleV9fcHJveHlfaGVhZGVyc1wiLCAgIyBkaWN0CiAgICBcImtleV9fcHJveHlfY29uZmlnXCIsICAjIGNsYXNzCiAgICBcImtleV9zb2NrZXRfb3B0aW9uc1wiLCAgIyBsaXN0IG9mIChsZXZlbCAoaW50KSwgb3B0bmFtZSAoaW50KSwgdmFsdWUgKGludCBvciBzdHIpKSB0dXBsZXMKICAgIFwia2V5X19zb2Nrc19vcHRpb25zXCIsICAjIGRpY3QKICAgIFwia2V5X2Fzc2VydF9ob3N0bmFtZVwiLCAgIyBib29sIG9yIHN0cmluZwogICAgXCJrZXlfYXNzZXJ0X2ZpbmdlcnByaW50XCIsICAjIHN0cgogICAgXCJrZXlfc2VydmVyX2hvc3RuYW1lXCIsICAjIHN0cgopCgojOiBUaGUgbmFtZWR0dXBsZSBjbGFzcyB1c2VkIHRvIGNvbnN0cnVjdCBrZXlzIGZvciB0aGUgY29ubmVjdGlvbiBwb29sLgojOiBBbGwgY3VzdG9tIGtleSBzY2hlbWVzIHNob3VsZCBpbmNsdWRlIHRoZSBmaWVsZHMgaW4gdGhpcyBrZXkgYXQgYSBtaW5pbXVtLgpQb29sS2V5ID0gY29sbGVjdGlvbnMubmFtZWR0dXBsZShcIlBvb2xLZXlcIiwgX2tleV9maWVsZHMpCgpfcHJveHlfY29uZmlnX2ZpZWxkcyA9IChcInNzbF9jb250ZXh0XCIsIFwidXNlX2ZvcndhcmRpbmdfZm9yX2h0dHBzXCIpClByb3h5Q29uZmlnID0gY29sbGVjdGlvbnMubmFtZWR0dXBsZShcIlByb3h5Q29uZmlnXCIsIF9wcm94eV9jb25maWdfZmllbGRzKQoKCmRlZiBfZGVmYXVsdF9rZXlfbm9ybWFsaXplcihrZXlfY2xhc3MsIHJlcXVlc3RfY29udGV4dCk6CiAgICBcIlwiXCIKICAgIENyZWF0ZSBhIHBvb2wga2V5IG91dCBvZiBhIHJlcXVlc3QgY29udGV4dCBkaWN0aW9uYXJ5LgoKICAgIEFjY29yZGluZyB0byBSRkMgMzk4NiwgYm90aCB0aGUgc2NoZW1lIGFuZCBob3N0IGFyZSBjYXNlLWluc2Vuc2l0aXZlLgogICAgVGhlcmVmb3JlLCB0aGlzIGZ1bmN0aW9uIG5vcm1hbGl6ZXMgYm90aCBiZWZvcmUgY29uc3RydWN0aW5nIHRoZSBwb29sCiAgICBrZXkgZm9yIGFuIEhUVFBTIHJlcXVlc3QuIElmIHlvdSB3aXNoIHRvIGNoYW5nZSB0aGlzIGJlaGF2aW91ciwgcHJvdmlkZQogICAgYWx0ZXJuYXRlIGNhbGxhYmxlcyB0byBgYGtleV9mbl9ieV9zY2hlbWVgYC4KCiAgICA6cGFyYW0ga2V5X2NsYXNzOgogICAgICAgIFRoZSBjbGFzcyB0byB1c2Ugd2hlbiBjb25zdHJ1Y3RpbmcgdGhlIGtleS4gVGhpcyBzaG91bGQgYmUgYSBuYW1lZHR1cGxlCiAgICAgICAgd2l0aCB0aGUgYGBzY2hlbWVgYCBhbmQgYGBob3N0YGAga2V5cyBhdCBhIG1pbmltdW0uCiAgICA6dHlwZSAga2V5X2NsYXNzOiBuYW1lZHR1cGxlCiAgICA6cGFyYW0gcmVxdWVzdF9jb250ZXh0OgogICAgICAgIEEgZGljdGlvbmFyeS1saWtlIG9iamVjdCB0aGF0IGNvbnRhaW4gdGhlIGNvbnRleHQgZm9yIGEgcmVxdWVzdC4KICAgIDp0eXBlICByZXF1ZXN0X2NvbnRleHQ6IGRpY3QKCiAgICA6cmV0dXJuOiBBIG5hbWVkdHVwbGUgdGhhdCBjYW4gYmUgdXNlZCBhcyBhIGNvbm5lY3Rpb24gcG9vbCBrZXkuCiAgICA6cnR5cGU6ICBQb29sS2V5CiAgICBcIlwiXCIKICAgICMgU2luY2Ugd2UgbXV0YXRlIHRoZSBkaWN0aW9uYXJ5LCBtYWtlIGEgY29weSBmaXJzdAogICAgY29udGV4dCA9IHJlcXVlc3RfY29udGV4dC5jb3B5KCkKICAgIGNvbnRleHRbXCJzY2hlbWVcIl0gPSBjb250ZXh0W1wic2NoZW1lXCJdLmxvd2VyKCkKICAgIGNvbnRleHRbXCJob3N0XCJdID0gY29udGV4dFtcImhvc3RcIl0ubG93ZXIoKQoKICAgICMgVGhlc2UgYXJlIGJvdGggZGljdGlvbmFyaWVzIGFuZCBuZWVkIHRvIGJlIHRyYW5zZm9ybWVkIGludG8gZnJvemVuc2V0cwogICAgZm9yIGtleSBpbiAoXCJoZWFkZXJzXCIsIFwiX3Byb3h5X2hlYWRlcnNcIiwgXCJfc29ja3Nfb3B0aW9uc1wiKToKICAgICAgICBpZiBrZXkgaW4gY29udGV4dCBhbmQgY29udGV4dFtrZXldIGlzIG5vdCBOb25lOgogICAgICAgICAgICBjb250ZXh0W2tleV0gPSBmcm96ZW5zZXQoY29udGV4dFtrZXldLml0ZW1zKCkpCgogICAgIyBUaGUgc29ja2V0X29wdGlvbnMga2V5IG1heSBiZSBhIGxpc3QgYW5kIG5lZWRzIHRvIGJlIHRyYW5zZm9ybWVkIGludG8gYQogICAgIyB0dXBsZS4KICAgIHNvY2tldF9vcHRzID0gY29udGV4dC5nZXQoXCJzb2NrZXRfb3B0aW9uc1wiKQogICAgaWYgc29ja2V0X29wdHMgaXMgbm90IE5vbmU6CiAgICAgICAgY29udGV4dFtcInNvY2tldF9vcHRpb25zXCJdID0gdHVwbGUoc29ja2V0X29wdHMpCgogICAgIyBNYXAgdGhlIGt3YXJncyB0byB0aGUgbmFtZXMgaW4gdGhlIG5hbWVkdHVwbGUgLSB0aGlzIGlzIG5lY2Vzc2FyeSBzaW5jZQogICAgIyBuYW1lZHR1cGxlcyBjYW4ndCBoYXZlIGZpZWxkcyBzdGFydGluZyB3aXRoICdfJy4KICAgIGZvciBrZXkgaW4gbGlzdChjb250ZXh0LmtleXMoKSk6CiAgICAgICAgY29udGV4dFtcImtleV9cIiArIGtleV0gPSBjb250ZXh0LnBvcChrZXkpCgogICAgIyBEZWZhdWx0IHRvIGBgTm9uZWBgIGZvciBrZXlzIG1pc3NpbmcgZnJvbSB0aGUgY29udGV4dAogICAgZm9yIGZpZWxkIGluIGtleV9jbGFzcy5fZmllbGRzOgogICAgICAgIGlmIGZpZWxkIG5vdCBpbiBjb250ZXh0OgogICAgICAgICAgICBjb250ZXh0W2ZpZWxkXSA9IE5vbmUKCiAgICByZXR1cm4ga2V5X2NsYXNzKCoqY29udGV4dCkKCgojOiBBIGRpY3Rpb25hcnkgdGhhdCBtYXBzIGEgc2NoZW1lIHRvIGEgY2FsbGFibGUgdGhhdCBjcmVhdGVzIGEgcG9vbCBrZXkuCiM6IFRoaXMgY2FuIGJlIHVzZWQgdG8gYWx0ZXIgdGhlIHdheSBwb29sIGtleXMgYXJlIGNvbnN0cnVjdGVkLCBpZiBkZXNpcmVkLgojOiBFYWNoIFBvb2xNYW5hZ2VyIG1ha2VzIGEgY29weSBvZiB0aGlzIGRpY3Rpb25hcnkgc28gdGhleSBjYW4gYmUgY29uZmlndXJlZAojOiBnbG9iYWxseSBoZXJlLCBvciBpbmRpdmlkdWFsbHkgb24gdGhlIGluc3RhbmNlLgprZXlfZm5fYnlfc2NoZW1lID0gewogICAgXCJodHRwXCI6IGZ1bmN0b29scy5wYXJ0aWFsKF9kZWZhdWx0X2tleV9ub3JtYWxpemVyLCBQb29sS2V5KSwKICAgIFwiaHR0cHNcIjogZnVuY3Rvb2xzLnBhcnRpYWwoX2RlZmF1bHRfa2V5X25vcm1hbGl6ZXIsIFBvb2xLZXkpLAp9Cgpwb29sX2NsYXNzZXNfYnlfc2NoZW1lID0ge1wiaHR0cFwiOiBIVFRQQ29ubmVjdGlvblBvb2wsIFwiaHR0cHNcIjogSFRUUFNDb25uZWN0aW9uUG9vbH0KCgpjbGFzcyBQb29sTWFuYWdlcihSZXF1ZXN0TWV0aG9kcyk6CiAgICBcIlwiXCIKICAgIEFsbG93cyBmb3IgYXJiaXRyYXJ5IHJlcXVlc3RzIHdoaWxlIHRyYW5zcGFyZW50bHkga2VlcGluZyB0cmFjayBvZgogICAgbmVjZXNzYXJ5IGNvbm5lY3Rpb24gcG9vbHMgZm9yIHlvdS4KCiAgICA6cGFyYW0gbnVtX3Bvb2xzOgogICAgICAgIE51bWJlciBvZiBjb25uZWN0aW9uIHBvb2xzIHRvIGNhY2hlIGJlZm9yZSBkaXNjYXJkaW5nIHRoZSBsZWFzdAogICAgICAgIHJlY2VudGx5IHVzZWQgcG9vbC4KCiAgICA6cGFyYW0gaGVhZGVyczoKICAgICAgICBIZWFkZXJzIHRvIGluY2x1ZGUgd2l0aCBhbGwgcmVxdWVzdHMsIHVubGVzcyBvdGhlciBoZWFkZXJzIGFyZSBnaXZlbgogICAgICAgIGV4cGxpY2l0bHkuCgogICAgOnBhcmFtIFxcXFwqKmNvbm5lY3Rpb25fcG9vbF9rdzoKICAgICAgICBBZGRpdGlvbmFsIHBhcmFtZXRlcnMgYXJlIHVzZWQgdG8gY3JlYXRlIGZyZXNoCiAgICAgICAgOmNsYXNzOmB1cmxsaWIzLmNvbm5lY3Rpb25wb29sLkNvbm5lY3Rpb25Qb29sYCBpbnN0YW5jZXMuCgogICAgRXhhbXBsZTo6CgogICAgICAgID4+PiBtYW5hZ2VyID0gUG9vbE1hbmFnZXIobnVtX3Bvb2xzPTIpCiAgICAgICAgPj4+IHIgPSBtYW5hZ2VyLnJlcXVlc3QoJ0dFVCcsICdodHRwOi8vZ29vZ2xlLmNvbS8nKQogICAgICAgID4+PiByID0gbWFuYWdlci5yZXF1ZXN0KCdHRVQnLCAnaHR0cDovL2dvb2dsZS5jb20vbWFpbCcpCiAgICAgICAgPj4+IHIgPSBtYW5hZ2VyLnJlcXVlc3QoJ0dFVCcsICdodHRwOi8veWFob28uY29tLycpCiAgICAgICAgPj4+IGxlbihtYW5hZ2VyLnBvb2xzKQogICAgICAgIDIKCiAgICBcIlwiXCIKCiAgICBwcm94eSA9IE5vbmUKICAgIHByb3h5X2NvbmZpZyA9IE5vbmUKCiAgICBkZWYgX19pbml0X18oc2VsZiwgbnVtX3Bvb2xzPTEwLCBoZWFkZXJzPU5vbmUsICoqY29ubmVjdGlvbl9wb29sX2t3KToKICAgICAgICBSZXF1ZXN0TWV0aG9kcy5fX2luaXRfXyhzZWxmLCBoZWFkZXJzKQogICAgICAgIHNlbGYuY29ubmVjdGlvbl9wb29sX2t3ID0gY29ubmVjdGlvbl9wb29sX2t3CiAgICAgICAgc2VsZi5wb29scyA9IFJlY2VudGx5VXNlZENvbnRhaW5lcihudW1fcG9vbHMsIGRpc3Bvc2VfZnVuYz1sYW1iZGEgcDogcC5jbG9zZSgpKQoKICAgICAgICAjIExvY2FsbHkgc2V0IHRoZSBwb29sIGNsYXNzZXMgYW5kIGtleXMgc28gb3RoZXIgUG9vbE1hbmFnZXJzIGNhbgogICAgICAgICMgb3ZlcnJpZGUgdGhlbS4KICAgICAgICBzZWxmLnBvb2xfY2xhc3Nlc19ieV9zY2hlbWUgPSBwb29sX2NsYXNzZXNfYnlfc2NoZW1lCiAgICAgICAgc2VsZi5rZXlfZm5fYnlfc2NoZW1lID0ga2V5X2ZuX2J5X3NjaGVtZS5jb3B5KCkKCiAgICBkZWYgX19lbnRlcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIF9fZXhpdF9fKHNlbGYsIGV4Y190eXBlLCBleGNfdmFsLCBleGNfdGIpOgogICAgICAgIHNlbGYuY2xlYXIoKQogICAgICAgICMgUmV0dXJuIEZhbHNlIHRvIHJlLXJhaXNlIGFueSBwb3RlbnRpYWwgZXhjZXB0aW9ucwogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBfbmV3X3Bvb2woc2VsZiwgc2NoZW1lLCBob3N0LCBwb3J0LCByZXF1ZXN0X2NvbnRleHQ9Tm9uZSk6CiAgICAgICAgXCJcIlwiCiAgICAgICAgQ3JlYXRlIGEgbmV3IDpjbGFzczpgdXJsbGliMy5jb25uZWN0aW9ucG9vbC5Db25uZWN0aW9uUG9vbGAgYmFzZWQgb24gaG9zdCwgcG9ydCwgc2NoZW1lLCBhbmQKICAgICAgICBhbnkgYWRkaXRpb25hbCBwb29sIGtleXdvcmQgYXJndW1lbnRzLgoKICAgICAgICBJZiBgYHJlcXVlc3RfY29udGV4dGBgIGlzIHByb3ZpZGVkLCBpdCBpcyBwcm92aWRlZCBhcyBrZXl3b3JkIGFyZ3VtZW50cwogICAgICAgIHRvIHRoZSBwb29sIGNsYXNzIHVzZWQuIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gYWN0dWFsbHkgY3JlYXRlIHRoZQogICAgICAgIGNvbm5lY3Rpb24gcG9vbHMgaGFuZGVkIG91dCBieSA6bWV0aDpgY29ubmVjdGlvbl9mcm9tX3VybGAgYW5kCiAgICAgICAgY29tcGFuaW9uIG1ldGhvZHMuIEl0IGlzIGludGVuZGVkIHRvIGJlIG92ZXJyaWRkZW4gZm9yIGN1c3RvbWl6YXRpb24uCiAgICAgICAgXCJcIlwiCiAgICAgICAgcG9vbF9jbHMgPSBzZWxmLnBvb2xfY2xhc3Nlc19ieV9zY2hlbWVbc2NoZW1lXQogICAgICAgIGlmIHJlcXVlc3RfY29udGV4dCBpcyBOb25lOgogICAgICAgICAgICByZXF1ZXN0X2NvbnRleHQgPSBzZWxmLmNvbm5lY3Rpb25fcG9vbF9rdy5jb3B5KCkKCiAgICAgICAgIyBBbHRob3VnaCB0aGUgY29udGV4dCBoYXMgZXZlcnl0aGluZyBuZWNlc3NhcnkgdG8gY3JlYXRlIHRoZSBwb29sLAogICAgICAgICMgdGhpcyBmdW5jdGlvbiBoYXMgaGlzdG9yaWNhbGx5IG9ubHkgdXNlZCB0aGUgc2NoZW1lLCBob3N0LCBhbmQgcG9ydAogICAgICAgICMgaW4gdGhlIHBvc2l0aW9uYWwgYXJncy4gV2hlbiBhbiBBUEkgY2hhbmdlIGlzIGFjY2VwdGFibGUgdGhlc2UgY2FuCiAgICAgICAgIyBiZSByZW1vdmVkLgogICAgICAgIGZvciBrZXkgaW4gKFwic2NoZW1lXCIsIFwiaG9zdFwiLCBcInBvcnRcIik6CiAgICAgICAgICAgIHJlcXVlc3RfY29udGV4dC5wb3Aoa2V5LCBOb25lKQoKICAgICAgICBpZiBzY2hlbWUgPT0gXCJodHRwXCI6CiAgICAgICAgICAgIGZvciBrdyBpbiBTU0xfS0VZV09SRFM6CiAgICAgICAgICAgICAgICByZXF1ZXN0X2NvbnRleHQucG9wKGt3LCBOb25lKQoKICAgICAgICByZXR1cm4gcG9vbF9jbHMoaG9zdCwgcG9ydCwgKipyZXF1ZXN0X2NvbnRleHQpCgogICAgZGVmIGNsZWFyKHNlbGYpOgogICAgICAgIFwiXCJcIgogICAgICAgIEVtcHR5IG91ciBzdG9yZSBvZiBwb29scyBhbmQgZGlyZWN0IHRoZW0gYWxsIHRvIGNsb3NlLgoKICAgICAgICBUaGlzIHdpbGwgbm90IGFmZmVjdCBpbi1mbGlnaHQgY29ubmVjdGlvbnMsIGJ1dCB0aGV5IHdpbGwgbm90IGJlCiAgICAgICAgcmUtdXNlZCBhZnRlciBjb21wbGV0aW9uLgogICAgICAgIFwiXCJcIgogICAgICAgIHNlbGYucG9vbHMuY2xlYXIoKQoKICAgIGRlZiBjb25uZWN0aW9uX2Zyb21faG9zdChzZWxmLCBob3N0LCBwb3J0PU5vbmUsIHNjaGVtZT1cImh0dHBcIiwgcG9vbF9rd2FyZ3M9Tm9uZSk6CiAgICAgICAgXCJcIlwiCiAgICAgICAgR2V0IGEgOmNsYXNzOmB1cmxsaWIzLmNvbm5lY3Rpb25wb29sLkNvbm5lY3Rpb25Qb29sYCBiYXNlZCBvbiB0aGUgaG9zdCwgcG9ydCwgYW5kIHNjaGVtZS4KCiAgICAgICAgSWYgYGBwb3J0YGAgaXNuJ3QgZ2l2ZW4sIGl0IHdpbGwgYmUgZGVyaXZlZCBmcm9tIHRoZSBgYHNjaGVtZWBgIHVzaW5nCiAgICAgICAgYGB1cmxsaWIzLmNvbm5lY3Rpb25wb29sLnBvcnRfYnlfc2NoZW1lYGAuIElmIGBgcG9vbF9rd2FyZ3NgYCBpcwogICAgICAgIHByb3ZpZGVkLCBpdCBpcyBtZXJnZWQgd2l0aCB0aGUgaW5zdGFuY2UncyBgYGNvbm5lY3Rpb25fcG9vbF9rd2BgCiAgICAgICAgdmFyaWFibGUgYW5kIHVzZWQgdG8gY3JlYXRlIHRoZSBuZXcgY29ubmVjdGlvbiBwb29sLCBpZiBvbmUgaXMKICAgICAgICBuZWVkZWQuCiAgICAgICAgXCJcIlwiCgogICAgICAgIGlmIG5vdCBob3N0OgogICAgICAgICAgICByYWlzZSBMb2NhdGlvblZhbHVlRXJyb3IoXCJObyBob3N0IHNwZWNpZmllZC5cIikKCiAgICAgICAgcmVxdWVzdF9jb250ZXh0ID0gc2VsZi5fbWVyZ2VfcG9vbF9rd2FyZ3MocG9vbF9rd2FyZ3MpCiAgICAgICAgcmVxdWVzdF9jb250ZXh0W1wic2NoZW1lXCJdID0gc2NoZW1lIG9yIFwiaHR0cFwiCiAgICAgICAgaWYgbm90IHBvcnQ6CiAgICAgICAgICAgIHBvcnQgPSBwb3J0X2J5X3NjaGVtZS5nZXQocmVxdWVzdF9jb250ZXh0W1wic2NoZW1lXCJdLmxvd2VyKCksIDgwKQogICAgICAgIHJlcXVlc3RfY29udGV4dFtcInBvcnRcIl0gPSBwb3J0CiAgICAgICAgcmVxdWVzdF9jb250ZXh0W1wiaG9zdFwiXSA9IGhvc3QKCiAgICAgICAgcmV0dXJuIHNlbGYuY29ubmVjdGlvbl9mcm9tX2NvbnRleHQocmVxdWVzdF9jb250ZXh0KQoKICAgIGRlZiBjb25uZWN0aW9uX2Zyb21fY29udGV4dChzZWxmLCByZXF1ZXN0X2NvbnRleHQpOgogICAgICAgIFwiXCJcIgogICAgICAgIEdldCBhIDpjbGFzczpgdXJsbGliMy5jb25uZWN0aW9ucG9vbC5Db25uZWN0aW9uUG9vbGAgYmFzZWQgb24gdGhlIHJlcXVlc3QgY29udGV4dC4KCiAgICAgICAgYGByZXF1ZXN0X2NvbnRleHRgYCBtdXN0IGF0IGxlYXN0IGNvbnRhaW4gdGhlIGBgc2NoZW1lYGAga2V5IGFuZCBpdHMKICAgICAgICB2YWx1ZSBtdXN0IGJlIGEga2V5IGluIGBga2V5X2ZuX2J5X3NjaGVtZWBgIGluc3RhbmNlIHZhcmlhYmxlLgogICAgICAgIFwiXCJcIgogICAgICAgIHNjaGVtZSA9IHJlcXVlc3RfY29udGV4dFtcInNjaGVtZVwiXS5sb3dlcigpCiAgICAgICAgcG9vbF9rZXlfY29uc3RydWN0b3IgPSBzZWxmLmtleV9mbl9ieV9zY2hlbWUuZ2V0KHNjaGVtZSkKICAgICAgICBpZiBub3QgcG9vbF9rZXlfY29uc3RydWN0b3I6CiAgICAgICAgICAgIHJhaXNlIFVSTFNjaGVtZVVua25vd24oc2NoZW1lKQogICAgICAgIHBvb2xfa2V5ID0gcG9vbF9rZXlfY29uc3RydWN0b3IocmVxdWVzdF9jb250ZXh0KQoKICAgICAgICByZXR1cm4gc2VsZi5jb25uZWN0aW9uX2Zyb21fcG9vbF9rZXkocG9vbF9rZXksIHJlcXVlc3RfY29udGV4dD1yZXF1ZXN0X2NvbnRleHQpCgogICAgZGVmIGNvbm5lY3Rpb25fZnJvbV9wb29sX2tleShzZWxmLCBwb29sX2tleSwgcmVxdWVzdF9jb250ZXh0PU5vbmUpOgogICAgICAgIFwiXCJcIgogICAgICAgIEdldCBhIDpjbGFzczpgdXJsbGliMy5jb25uZWN0aW9ucG9vbC5Db25uZWN0aW9uUG9vbGAgYmFzZWQgb24gdGhlIHByb3ZpZGVkIHBvb2wga2V5LgoKICAgICAgICBgYHBvb2xfa2V5YGAgc2hvdWxkIGJlIGEgbmFtZWR0dXBsZSB0aGF0IG9ubHkgY29udGFpbnMgaW1tdXRhYmxlCiAgICAgICAgb2JqZWN0cy4gQXQgYSBtaW5pbXVtIGl0IG11c3QgaGF2ZSB0aGUgYGBzY2hlbWVgYCwgYGBob3N0YGAsIGFuZAogICAgICAgIGBgcG9ydGBgIGZpZWxkcy4KICAgICAgICBcIlwiXCIKICAgICAgICB3aXRoIHNlbGYucG9vbHMubG9jazoKICAgICAgICAgICAgIyBJZiB0aGUgc2NoZW1lLCBob3N0LCBvciBwb3J0IGRvZXNuJ3QgbWF0Y2ggZXhpc3Rpbmcgb3BlbgogICAgICAgICAgICAjIGNvbm5lY3Rpb25zLCBvcGVuIGEgbmV3IENvbm5lY3Rpb25Qb29sLgogICAgICAgICAgICBwb29sID0gc2VsZi5wb29scy5nZXQocG9vbF9rZXkpCiAgICAgICAgICAgIGlmIHBvb2w6CiAgICAgICAgICAgICAgICByZXR1cm4gcG9vbAoKICAgICAgICAgICAgIyBNYWtlIGEgZnJlc2ggQ29ubmVjdGlvblBvb2wgb2YgdGhlIGRlc2lyZWQgdHlwZQogICAgICAgICAgICBzY2hlbWUgPSByZXF1ZXN0X2NvbnRleHRbXCJzY2hlbWVcIl0KICAgICAgICAgICAgaG9zdCA9IHJlcXVlc3RfY29udGV4dFtcImhvc3RcIl0KICAgICAgICAgICAgcG9ydCA9IHJlcXVlc3RfY29udGV4dFtcInBvcnRcIl0KICAgICAgICAgICAgcG9vbCA9IHNlbGYuX25ld19wb29sKHNjaGVtZSwgaG9zdCwgcG9ydCwgcmVxdWVzdF9jb250ZXh0PXJlcXVlc3RfY29udGV4dCkKICAgICAgICAgICAgc2VsZi5wb29sc1twb29sX2tleV0gPSBwb29sCgogICAgICAgIHJldHVybiBwb29sCgogICAgZGVmIGNvbm5lY3Rpb25fZnJvbV91cmwoc2VsZiwgdXJsLCBwb29sX2t3YXJncz1Ob25lKToKICAgICAgICBcIlwiXCIKICAgICAgICBTaW1pbGFyIHRvIDpmdW5jOmB1cmxsaWIzLmNvbm5lY3Rpb25wb29sLmNvbm5lY3Rpb25fZnJvbV91cmxgLgoKICAgICAgICBJZiBgYHBvb2xfa3dhcmdzYGAgaXMgbm90IHByb3ZpZGVkIGFuZCBhIG5ldyBwb29sIG5lZWRzIHRvIGJlCiAgICAgICAgY29uc3RydWN0ZWQsIGBgc2VsZi5jb25uZWN0aW9uX3Bvb2xfa3dgYCBpcyB1c2VkIHRvIGluaXRpYWxpemUKICAgICAgICB0aGUgOmNsYXNzOmB1cmxsaWIzLmNvbm5lY3Rpb25wb29sLkNvbm5lY3Rpb25Qb29sYC4gSWYgYGBwb29sX2t3YXJnc2BgCiAgICAgICAgaXMgcHJvdmlkZWQsIGl0IGlzIHVzZWQgaW5zdGVhZC4gTm90ZSB0aGF0IGlmIGEgbmV3IHBvb2wgZG9lcyBub3QKICAgICAgICBuZWVkIHRvIGJlIGNyZWF0ZWQgZm9yIHRoZSByZXF1ZXN0LCB0aGUgcHJvdmlkZWQgYGBwb29sX2t3YXJnc2BgIGFyZQogICAgICAgIG5vdCB1c2VkLgogICAgICAgIFwiXCJcIgogICAgICAgIHUgPSBwYXJzZV91cmwodXJsKQogICAgICAgIHJldHVybiBzZWxmLmNvbm5lY3Rpb25fZnJvbV9ob3N0KAogICAgICAgICAgICB1Lmhvc3QsIHBvcnQ9dS5wb3J0LCBzY2hlbWU9dS5zY2hlbWUsIHBvb2xfa3dhcmdzPXBvb2xfa3dhcmdzCiAgICAgICAgKQoKICAgIGRlZiBfbWVyZ2VfcG9vbF9rd2FyZ3Moc2VsZiwgb3ZlcnJpZGUpOgogICAgICAgIFwiXCJcIgogICAgICAgIE1lcmdlIGEgZGljdGlvbmFyeSBvZiBvdmVycmlkZSB2YWx1ZXMgZm9yIHNlbGYuY29ubmVjdGlvbl9wb29sX2t3LgoKICAgICAgICBUaGlzIGRvZXMgbm90IG1vZGlmeSBzZWxmLmNvbm5lY3Rpb25fcG9vbF9rdyBhbmQgcmV0dXJucyBhIG5ldyBkaWN0LgogICAgICAgIEFueSBrZXlzIGluIHRoZSBvdmVycmlkZSBkaWN0aW9uYXJ5IHdpdGggYSB2YWx1ZSBvZiBgYE5vbmVgYCBhcmUKICAgICAgICByZW1vdmVkIGZyb20gdGhlIG1lcmdlZCBkaWN0aW9uYXJ5LgogICAgICAgIFwiXCJcIgogICAgICAgIGJhc2VfcG9vbF9rd2FyZ3MgPSBzZWxmLmNvbm5lY3Rpb25fcG9vbF9rdy5jb3B5KCkKICAgICAgICBpZiBvdmVycmlkZToKICAgICAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gb3ZlcnJpZGUuaXRlbXMoKToKICAgICAgICAgICAgICAgIGlmIHZhbHVlIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICBkZWwgYmFzZV9wb29sX2t3YXJnc1trZXldCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGJhc2VfcG9vbF9rd2FyZ3Nba2V5XSA9IHZhbHVlCiAgICAgICAgcmV0dXJuIGJhc2VfcG9vbF9rd2FyZ3MKCiAgICBkZWYgX3Byb3h5X3JlcXVpcmVzX3VybF9hYnNvbHV0ZV9mb3JtKHNlbGYsIHBhcnNlZF91cmwpOgogICAgICAgIFwiXCJcIgogICAgICAgIEluZGljYXRlcyBpZiB0aGUgcHJveHkgcmVxdWlyZXMgdGhlIGNvbXBsZXRlIGRlc3RpbmF0aW9uIFVSTCBpbiB0aGUKICAgICAgICByZXF1ZXN0LiAgTm9ybWFsbHkgdGhpcyBpcyBvbmx5IG5lZWRlZCB3aGVuIG5vdCB1c2luZyBhbiBIVFRQIENPTk5FQ1QKICAgICAgICB0dW5uZWwuCiAgICAgICAgXCJcIlwiCiAgICAgICAgaWYgc2VsZi5wcm94eSBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgcmV0dXJuIG5vdCBjb25uZWN0aW9uX3JlcXVpcmVzX2h0dHBfdHVubmVsKAogICAgICAgICAgICBzZWxmLnByb3h5LCBzZWxmLnByb3h5X2NvbmZpZywgcGFyc2VkX3VybC5zY2hlbWUKICAgICAgICApCgogICAgZGVmIF92YWxpZGF0ZV9wcm94eV9zY2hlbWVfdXJsX3NlbGVjdGlvbihzZWxmLCB1cmxfc2NoZW1lKToKICAgICAgICBcIlwiXCIKICAgICAgICBWYWxpZGF0ZXMgdGhhdCB3ZXJlIG5vdCBhdHRlbXB0aW5nIHRvIGRvIFRMUyBpbiBUTFMgY29ubmVjdGlvbnMgb24KICAgICAgICBQeXRob24yIG9yIHdpdGggdW5zdXBwb3J0ZWQgU1NMIGltcGxlbWVudGF0aW9ucy4KICAgICAgICBcIlwiXCIKICAgICAgICBpZiBzZWxmLnByb3h5IGlzIE5vbmUgb3IgdXJsX3NjaGVtZSAhPSBcImh0dHBzXCI6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBpZiBzZWxmLnByb3h5LnNjaGVtZSAhPSBcImh0dHBzXCI6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBpZiBzaXguUFkyIGFuZCBub3Qgc2VsZi5wcm94eV9jb25maWcudXNlX2ZvcndhcmRpbmdfZm9yX2h0dHBzOgogICAgICAgICAgICByYWlzZSBQcm94eVNjaGVtZVVuc3VwcG9ydGVkKAogICAgICAgICAgICAgICAgXCJDb250YWN0aW5nIEhUVFBTIGRlc3RpbmF0aW9ucyB0aHJvdWdoIEhUVFBTIHByb3hpZXMgXCIKICAgICAgICAgICAgICAgIFwiJ3ZpYSBDT05ORUNUIHR1bm5lbHMnIGlzIG5vdCBzdXBwb3J0ZWQgaW4gUHl0aG9uIDJcIgogICAgICAgICAgICApCgogICAgZGVmIHVybG9wZW4oc2VsZiwgbWV0aG9kLCB1cmwsIHJlZGlyZWN0PVRydWUsICoqa3cpOgogICAgICAgIFwiXCJcIgogICAgICAgIFNhbWUgYXMgOm1ldGg6YHVybGxpYjMuSFRUUENvbm5lY3Rpb25Qb29sLnVybG9wZW5gCiAgICAgICAgd2l0aCBjdXN0b20gY3Jvc3MtaG9zdCByZWRpcmVjdCBsb2dpYyBhbmQgb25seSBzZW5kcyB0aGUgcmVxdWVzdC11cmkKICAgICAgICBwb3J0aW9uIG9mIHRoZSBgYHVybGBgLgoKICAgICAgICBUaGUgZ2l2ZW4gYGB1cmxgYCBwYXJhbWV0ZXIgbXVzdCBiZSBhYnNvbHV0ZSwgc3VjaCB0aGF0IGFuIGFwcHJvcHJpYXRlCiAgICAgICAgOmNsYXNzOmB1cmxsaWIzLmNvbm5lY3Rpb25wb29sLkNvbm5lY3Rpb25Qb29sYCBjYW4gYmUgY2hvc2VuIGZvciBpdC4KICAgICAgICBcIlwiXCIKICAgICAgICB1ID0gcGFyc2VfdXJsKHVybCkKICAgICAgICBzZWxmLl92YWxpZGF0ZV9wcm94eV9zY2hlbWVfdXJsX3NlbGVjdGlvbih1LnNjaGVtZSkKCiAgICAgICAgY29ubiA9IHNlbGYuY29ubmVjdGlvbl9mcm9tX2hvc3QodS5ob3N0LCBwb3J0PXUucG9ydCwgc2NoZW1lPXUuc2NoZW1lKQoKICAgICAgICBrd1tcImFzc2VydF9zYW1lX2hvc3RcIl0gPSBGYWxzZQogICAgICAgIGt3W1wicmVkaXJlY3RcIl0gPSBGYWxzZQoKICAgICAgICBpZiBcImhlYWRlcnNcIiBub3QgaW4ga3c6CiAgICAgICAgICAgIGt3W1wiaGVhZGVyc1wiXSA9IHNlbGYuaGVhZGVycy5jb3B5KCkKCiAgICAgICAgaWYgc2VsZi5fcHJveHlfcmVxdWlyZXNfdXJsX2Fic29sdXRlX2Zvcm0odSk6CiAgICAgICAgICAgIHJlc3BvbnNlID0gY29ubi51cmxvcGVuKG1ldGhvZCwgdXJsLCAqKmt3KQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJlc3BvbnNlID0gY29ubi51cmxvcGVuKG1ldGhvZCwgdS5yZXF1ZXN0X3VyaSwgKiprdykKCiAgICAgICAgcmVkaXJlY3RfbG9jYXRpb24gPSByZWRpcmVjdCBhbmQgcmVzcG9uc2UuZ2V0X3JlZGlyZWN0X2xvY2F0aW9uKCkKICAgICAgICBpZiBub3QgcmVkaXJlY3RfbG9jYXRpb246CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZQoKICAgICAgICAjIFN1cHBvcnQgcmVsYXRpdmUgVVJMcyBmb3IgcmVkaXJlY3RpbmcuCiAgICAgICAgcmVkaXJlY3RfbG9jYXRpb24gPSB1cmxqb2luKHVybCwgcmVkaXJlY3RfbG9jYXRpb24pCgogICAgICAgICMgUkZDIDcyMzEsIFNlY3Rpb24gNi40LjQKICAgICAgICBpZiByZXNwb25zZS5zdGF0dXMgPT0gMzAzOgogICAgICAgICAgICBtZXRob2QgPSBcIkdFVFwiCgogICAgICAgIHJldHJpZXMgPSBrdy5nZXQoXCJyZXRyaWVzXCIpCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UocmV0cmllcywgUmV0cnkpOgogICAgICAgICAgICByZXRyaWVzID0gUmV0cnkuZnJvbV9pbnQocmV0cmllcywgcmVkaXJlY3Q9cmVkaXJlY3QpCgogICAgICAgICMgU3RyaXAgaGVhZGVycyBtYXJrZWQgYXMgdW5zYWZlIHRvIGZvcndhcmQgdG8gdGhlIHJlZGlyZWN0ZWQgbG9jYXRpb24uCiAgICAgICAgIyBDaGVjayByZW1vdmVfaGVhZGVyc19vbl9yZWRpcmVjdCB0byBhdm9pZCBhIHBvdGVudGlhbCBuZXR3b3JrIGNhbGwgd2l0aGluCiAgICAgICAgIyBjb25uLmlzX3NhbWVfaG9zdCgpIHdoaWNoIG1heSB1c2Ugc29ja2V0LmdldGhvc3RieW5hbWUoKSBpbiB0aGUgZnV0dXJlLgogICAgICAgIGlmIHJldHJpZXMucmVtb3ZlX2hlYWRlcnNfb25fcmVkaXJlY3QgYW5kIG5vdCBjb25uLmlzX3NhbWVfaG9zdCgKICAgICAgICAgICAgcmVkaXJlY3RfbG9jYXRpb24KICAgICAgICApOgogICAgICAgICAgICBoZWFkZXJzID0gbGlzdChzaXguaXRlcmtleXMoa3dbXCJoZWFkZXJzXCJdKSkKICAgICAgICAgICAgZm9yIGhlYWRlciBpbiBoZWFkZXJzOgogICAgICAgICAgICAgICAgaWYgaGVhZGVyLmxvd2VyKCkgaW4gcmV0cmllcy5yZW1vdmVfaGVhZGVyc19vbl9yZWRpcmVjdDoKICAgICAgICAgICAgICAgICAgICBrd1tcImhlYWRlcnNcIl0ucG9wKGhlYWRlciwgTm9uZSkKCiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXRyaWVzID0gcmV0cmllcy5pbmNyZW1lbnQobWV0aG9kLCB1cmwsIHJlc3BvbnNlPXJlc3BvbnNlLCBfcG9vbD1jb25uKQogICAgICAgIGV4Y2VwdCBNYXhSZXRyeUVycm9yOgogICAgICAgICAgICBpZiByZXRyaWVzLnJhaXNlX29uX3JlZGlyZWN0OgogICAgICAgICAgICAgICAgcmVzcG9uc2UuZHJhaW5fY29ubigpCiAgICAgICAgICAgICAgICByYWlzZQogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UKCiAgICAgICAga3dbXCJyZXRyaWVzXCJdID0gcmV0cmllcwogICAgICAgIGt3W1wicmVkaXJlY3RcIl0gPSByZWRpcmVjdAoKICAgICAgICBsb2cuaW5mbyhcIlJlZGlyZWN0aW5nICVzIC0+ICVzXCIsIHVybCwgcmVkaXJlY3RfbG9jYXRpb24pCgogICAgICAgIHJlc3BvbnNlLmRyYWluX2Nvbm4oKQogICAgICAgIHJldHVybiBzZWxmLnVybG9wZW4obWV0aG9kLCByZWRpcmVjdF9sb2NhdGlvbiwgKiprdykKCgpjbGFzcyBQcm94eU1hbmFnZXIoUG9vbE1hbmFnZXIpOgogICAgXCJcIlwiCiAgICBCZWhhdmVzIGp1c3QgbGlrZSA6Y2xhc3M6YFBvb2xNYW5hZ2VyYCwgYnV0IHNlbmRzIGFsbCByZXF1ZXN0cyB0aHJvdWdoCiAgICB0aGUgZGVmaW5lZCBwcm94eSwgdXNpbmcgdGhlIENPTk5FQ1QgbWV0aG9kIGZvciBIVFRQUyBVUkxzLgoKICAgIDpwYXJhbSBwcm94eV91cmw6CiAgICAgICAgVGhlIFVSTCBvZiB0aGUgcHJveHkgdG8gYmUgdXNlZC4KCiAgICA6cGFyYW0gcHJveHlfaGVhZGVyczoKICAgICAgICBBIGRpY3Rpb25hcnkgY29udGFpbmluZyBoZWFkZXJzIHRoYXQgd2lsbCBiZSBzZW50IHRvIHRoZSBwcm94eS4gSW4gY2FzZQogICAgICAgIG9mIEhUVFAgdGhleSBhcmUgYmVpbmcgc2VudCB3aXRoIGVhY2ggcmVxdWVzdCwgd2hpbGUgaW4gdGhlCiAgICAgICAgSFRUUFMvQ09OTkVDVCBjYXNlIHRoZXkgYXJlIHNlbnQgb25seSBvbmNlLiBDb3VsZCBiZSB1c2VkIGZvciBwcm94eQogICAgICAgIGF1dGhlbnRpY2F0aW9uLgoKICAgIDpwYXJhbSBwcm94eV9zc2xfY29udGV4dDoKICAgICAgICBUaGUgcHJveHkgU1NMIGNvbnRleHQgaXMgdXNlZCB0byBlc3RhYmxpc2ggdGhlIFRMUyBjb25uZWN0aW9uIHRvIHRoZQogICAgICAgIHByb3h5IHdoZW4gdXNpbmcgSFRUUFMgcHJveGllcy4KCiAgICA6cGFyYW0gdXNlX2ZvcndhcmRpbmdfZm9yX2h0dHBzOgogICAgICAgIChEZWZhdWx0cyB0byBGYWxzZSkgSWYgc2V0IHRvIFRydWUgd2lsbCBmb3J3YXJkIHJlcXVlc3RzIHRvIHRoZSBIVFRQUwogICAgICAgIHByb3h5IHRvIGJlIG1hZGUgb24gYmVoYWxmIG9mIHRoZSBjbGllbnQgaW5zdGVhZCBvZiBjcmVhdGluZyBhIFRMUwogICAgICAgIHR1bm5lbCB2aWEgdGhlIENPTk5FQ1QgbWV0aG9kLiAqKkVuYWJsaW5nIHRoaXMgZmxhZyBtZWFucyB0aGF0IHJlcXVlc3QKICAgICAgICBhbmQgcmVzcG9uc2UgaGVhZGVycyBhbmQgY29udGVudCB3aWxsIGJlIHZpc2libGUgZnJvbSB0aGUgSFRUUFMgcHJveHkqKgogICAgICAgIHdoZXJlYXMgdHVubmVsaW5nIGtlZXBzIHJlcXVlc3QgYW5kIHJlc3BvbnNlIGhlYWRlcnMgYW5kIGNvbnRlbnQKICAgICAgICBwcml2YXRlLiAgSVAgYWRkcmVzcywgdGFyZ2V0IGhvc3RuYW1lLCBTTkksIGFuZCBwb3J0IGFyZSBhbHdheXMgdmlzaWJsZQogICAgICAgIHRvIGFuIEhUVFBTIHByb3h5IGV2ZW4gd2hlbiB0aGlzIGZsYWcgaXMgZGlzYWJsZWQuCgogICAgRXhhbXBsZToKICAgICAgICA+Pj4gcHJveHkgPSB1cmxsaWIzLlByb3h5TWFuYWdlcignaHR0cDovL2xvY2FsaG9zdDozMTI4LycpCiAgICAgICAgPj4+IHIxID0gcHJveHkucmVxdWVzdCgnR0VUJywgJ2h0dHA6Ly9nb29nbGUuY29tLycpCiAgICAgICAgPj4+IHIyID0gcHJveHkucmVxdWVzdCgnR0VUJywgJ2h0dHA6Ly9odHRwYmluLm9yZy8nKQogICAgICAgID4+PiBsZW4ocHJveHkucG9vbHMpCiAgICAgICAgMQogICAgICAgID4+PiByMyA9IHByb3h5LnJlcXVlc3QoJ0dFVCcsICdodHRwczovL2h0dHBiaW4ub3JnLycpCiAgICAgICAgPj4+IHI0ID0gcHJveHkucmVxdWVzdCgnR0VUJywgJ2h0dHBzOi8vdHdpdHRlci5jb20vJykKICAgICAgICA+Pj4gbGVuKHByb3h5LnBvb2xzKQogICAgICAgIDMKCiAgICBcIlwiXCIKCiAgICBkZWYgX19pbml0X18oCiAgICAgICAgc2VsZiwKICAgICAgICBwcm94eV91cmwsCiAgICAgICAgbnVtX3Bvb2xzPTEwLAogICAgICAgIGhlYWRlcnM9Tm9uZSwKICAgICAgICBwcm94eV9oZWFkZXJzPU5vbmUsCiAgICAgICAgcHJveHlfc3NsX2NvbnRleHQ9Tm9uZSwKICAgICAgICB1c2VfZm9yd2FyZGluZ19mb3JfaHR0cHM9RmFsc2UsCiAgICAgICAgKipjb25uZWN0aW9uX3Bvb2xfa3cKICAgICk6CgogICAgICAgIGlmIGlzaW5zdGFuY2UocHJveHlfdXJsLCBIVFRQQ29ubmVjdGlvblBvb2wpOgogICAgICAgICAgICBwcm94eV91cmwgPSBcIiVzOi8vJXM6JWlcIiAlICgKICAgICAgICAgICAgICAgIHByb3h5X3VybC5zY2hlbWUsCiAgICAgICAgICAgICAgICBwcm94eV91cmwuaG9zdCwKICAgICAgICAgICAgICAgIHByb3h5X3VybC5wb3J0LAogICAgICAgICAgICApCiAgICAgICAgcHJveHkgPSBwYXJzZV91cmwocHJveHlfdXJsKQoKICAgICAgICBpZiBwcm94eS5zY2hlbWUgbm90IGluIChcImh0dHBcIiwgXCJodHRwc1wiKToKICAgICAgICAgICAgcmFpc2UgUHJveHlTY2hlbWVVbmtub3duKHByb3h5LnNjaGVtZSkKCiAgICAgICAgaWYgbm90IHByb3h5LnBvcnQ6CiAgICAgICAgICAgIHBvcnQgPSBwb3J0X2J5X3NjaGVtZS5nZXQocHJveHkuc2NoZW1lLCA4MCkKICAgICAgICAgICAgcHJveHkgPSBwcm94eS5fcmVwbGFjZShwb3J0PXBvcnQpCgogICAgICAgIHNlbGYucHJveHkgPSBwcm94eQogICAgICAgIHNlbGYucHJveHlfaGVhZGVycyA9IHByb3h5X2hlYWRlcnMgb3Ige30KICAgICAgICBzZWxmLnByb3h5X3NzbF9jb250ZXh0ID0gcHJveHlfc3NsX2NvbnRleHQKICAgICAgICBzZWxmLnByb3h5X2NvbmZpZyA9IFByb3h5Q29uZmlnKHByb3h5X3NzbF9jb250ZXh0LCB1c2VfZm9yd2FyZGluZ19mb3JfaHR0cHMpCgogICAgICAgIGNvbm5lY3Rpb25fcG9vbF9rd1tcIl9wcm94eVwiXSA9IHNlbGYucHJveHkKICAgICAgICBjb25uZWN0aW9uX3Bvb2xfa3dbXCJfcHJveHlfaGVhZGVyc1wiXSA9IHNlbGYucHJveHlfaGVhZGVycwogICAgICAgIGNvbm5lY3Rpb25fcG9vbF9rd1tcIl9wcm94eV9jb25maWdcIl0gPSBzZWxmLnByb3h5X2NvbmZpZwoKICAgICAgICBzdXBlcihQcm94eU1hbmFnZXIsIHNlbGYpLl9faW5pdF9fKG51bV9wb29scywgaGVhZGVycywgKipjb25uZWN0aW9uX3Bvb2xfa3cpCgogICAgZGVmIGNvbm5lY3Rpb25fZnJvbV9ob3N0KHNlbGYsIGhvc3QsIHBvcnQ9Tm9uZSwgc2NoZW1lPVwiaHR0cFwiLCBwb29sX2t3YXJncz1Ob25lKToKICAgICAgICBpZiBzY2hlbWUgPT0gXCJodHRwc1wiOgogICAgICAgICAgICByZXR1cm4gc3VwZXIoUHJveHlNYW5hZ2VyLCBzZWxmKS5jb25uZWN0aW9uX2Zyb21faG9zdCgKICAgICAgICAgICAgICAgIGhvc3QsIHBvcnQsIHNjaGVtZSwgcG9vbF9rd2FyZ3M9cG9vbF9rd2FyZ3MKICAgICAgICAgICAgKQoKICAgICAgICByZXR1cm4gc3VwZXIoUHJveHlNYW5hZ2VyLCBzZWxmKS5jb25uZWN0aW9uX2Zyb21faG9zdCgKICAgICAgICAgICAgc2VsZi5wcm94eS5ob3N0LCBzZWxmLnByb3h5LnBvcnQsIHNlbGYucHJveHkuc2NoZW1lLCBwb29sX2t3YXJncz1wb29sX2t3YXJncwogICAgICAgICkKCiAgICBkZWYgX3NldF9wcm94eV9oZWFkZXJzKHNlbGYsIHVybCwgaGVhZGVycz1Ob25lKToKICAgICAgICBcIlwiXCIKICAgICAgICBTZXRzIGhlYWRlcnMgbmVlZGVkIGJ5IHByb3hpZXM6IHNwZWNpZmljYWxseSwgdGhlIEFjY2VwdCBhbmQgSG9zdAogICAgICAgIGhlYWRlcnMuIE9ubHkgc2V0cyBoZWFkZXJzIG5vdCBwcm92aWRlZCBieSB0aGUgdXNlci4KICAgICAgICBcIlwiXCIKICAgICAgICBoZWFkZXJzXyA9IHtcIkFjY2VwdFwiOiBcIiovKlwifQoKICAgICAgICBuZXRsb2MgPSBwYXJzZV91cmwodXJsKS5uZXRsb2MKICAgICAgICBpZiBuZXRsb2M6CiAgICAgICAgICAgIGhlYWRlcnNfW1wiSG9zdFwiXSA9IG5ldGxvYwoKICAgICAgICBpZiBoZWFkZXJzOgogICAgICAgICAgICBoZWFkZXJzXy51cGRhdGUoaGVhZGVycykKICAgICAgICByZXR1cm4gaGVhZGVyc18KCiAgICBkZWYgdXJsb3BlbihzZWxmLCBtZXRob2QsIHVybCwgcmVkaXJlY3Q9VHJ1ZSwgKiprdyk6CiAgICAgICAgXCJTYW1lIGFzIEhUVFAoUylDb25uZWN0aW9uUG9vbC51cmxvcGVuLCBgYHVybGBgIG11c3QgYmUgYWJzb2x1dGUuXCIKICAgICAgICB1ID0gcGFyc2VfdXJsKHVybCkKICAgICAgICBpZiBub3QgY29ubmVjdGlvbl9yZXF1aXJlc19odHRwX3R1bm5lbChzZWxmLnByb3h5LCBzZWxmLnByb3h5X2NvbmZpZywgdS5zY2hlbWUpOgogICAgICAgICAgICAjIEZvciBjb25uZWN0aW9ucyB1c2luZyBIVFRQIENPTk5FQ1QsIGh0dHBsaWIgc2V0cyB0aGUgbmVjZXNzYXJ5CiAgICAgICAgICAgICMgaGVhZGVycyBvbiB0aGUgQ09OTkVDVCB0byB0aGUgcHJveHkuIElmIHdlJ3JlIG5vdCB1c2luZyBDT05ORUNULAogICAgICAgICAgICAjIHdlJ2xsIGRlZmluaXRlbHkgbmVlZCB0byBzZXQgJ0hvc3QnIGF0IHRoZSB2ZXJ5IGxlYXN0LgogICAgICAgICAgICBoZWFkZXJzID0ga3cuZ2V0KFwiaGVhZGVyc1wiLCBzZWxmLmhlYWRlcnMpCiAgICAgICAgICAgIGt3W1wiaGVhZGVyc1wiXSA9IHNlbGYuX3NldF9wcm94eV9oZWFkZXJzKHVybCwgaGVhZGVycykKCiAgICAgICAgcmV0dXJuIHN1cGVyKFByb3h5TWFuYWdlciwgc2VsZikudXJsb3BlbihtZXRob2QsIHVybCwgcmVkaXJlY3Q9cmVkaXJlY3QsICoqa3cpCgoKZGVmIHByb3h5X2Zyb21fdXJsKHVybCwgKiprdyk6CiAgICByZXR1cm4gUHJveHlNYW5hZ2VyKHByb3h5X3VybD11cmwsICoqa3cpCgoiIiIKbW9kdWxlX2RpY3RbInVybGxpYjMiK29zLnNlcCsicmVxdWVzdC5weSJdPSIiIgpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFic29sdXRlX2ltcG9ydAoKZnJvbSAuZmlsZXBvc3QgaW1wb3J0IGVuY29kZV9tdWx0aXBhcnRfZm9ybWRhdGEKZnJvbSAucGFja2FnZXMuc2l4Lm1vdmVzLnVybGxpYi5wYXJzZSBpbXBvcnQgdXJsZW5jb2RlCgpfX2FsbF9fID0gW1wiUmVxdWVzdE1ldGhvZHNcIl0KCgpjbGFzcyBSZXF1ZXN0TWV0aG9kcyhvYmplY3QpOgogICAgXCJcIlwiCiAgICBDb252ZW5pZW5jZSBtaXhpbiBmb3IgY2xhc3NlcyB3aG8gaW1wbGVtZW50IGEgOm1ldGg6YHVybG9wZW5gIG1ldGhvZCwgc3VjaAogICAgYXMgOmNsYXNzOmB1cmxsaWIzLkhUVFBDb25uZWN0aW9uUG9vbGAgYW5kCiAgICA6Y2xhc3M6YHVybGxpYjMuUG9vbE1hbmFnZXJgLgoKICAgIFByb3ZpZGVzIGJlaGF2aW9yIGZvciBtYWtpbmcgY29tbW9uIHR5cGVzIG9mIEhUVFAgcmVxdWVzdCBtZXRob2RzIGFuZAogICAgZGVjaWRlcyB3aGljaCB0eXBlIG9mIHJlcXVlc3QgZmllbGQgZW5jb2RpbmcgdG8gdXNlLgoKICAgIFNwZWNpZmljYWxseSwKCiAgICA6bWV0aDpgLnJlcXVlc3RfZW5jb2RlX3VybGAgaXMgZm9yIHNlbmRpbmcgcmVxdWVzdHMgd2hvc2UgZmllbGRzIGFyZQogICAgZW5jb2RlZCBpbiB0aGUgVVJMIChzdWNoIGFzIEdFVCwgSEVBRCwgREVMRVRFKS4KCiAgICA6bWV0aDpgLnJlcXVlc3RfZW5jb2RlX2JvZHlgIGlzIGZvciBzZW5kaW5nIHJlcXVlc3RzIHdob3NlIGZpZWxkcyBhcmUKICAgIGVuY29kZWQgaW4gdGhlICpib2R5KiBvZiB0aGUgcmVxdWVzdCB1c2luZyBtdWx0aXBhcnQgb3Igd3d3LWZvcm0tdXJsZW5jb2RlZAogICAgKHN1Y2ggYXMgZm9yIFBPU1QsIFBVVCwgUEFUQ0gpLgoKICAgIDptZXRoOmAucmVxdWVzdGAgaXMgZm9yIG1ha2luZyBhbnkga2luZCBvZiByZXF1ZXN0LCBpdCB3aWxsIGxvb2sgdXAgdGhlCiAgICBhcHByb3ByaWF0ZSBlbmNvZGluZyBmb3JtYXQgYW5kIHVzZSBvbmUgb2YgdGhlIGFib3ZlIHR3byBtZXRob2RzIHRvIG1ha2UKICAgIHRoZSByZXF1ZXN0LgoKICAgIEluaXRpYWxpemVyIHBhcmFtZXRlcnM6CgogICAgOnBhcmFtIGhlYWRlcnM6CiAgICAgICAgSGVhZGVycyB0byBpbmNsdWRlIHdpdGggYWxsIHJlcXVlc3RzLCB1bmxlc3Mgb3RoZXIgaGVhZGVycyBhcmUgZ2l2ZW4KICAgICAgICBleHBsaWNpdGx5LgogICAgXCJcIlwiCgogICAgX2VuY29kZV91cmxfbWV0aG9kcyA9IHtcIkRFTEVURVwiLCBcIkdFVFwiLCBcIkhFQURcIiwgXCJPUFRJT05TXCJ9CgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGhlYWRlcnM9Tm9uZSk6CiAgICAgICAgc2VsZi5oZWFkZXJzID0gaGVhZGVycyBvciB7fQoKICAgIGRlZiB1cmxvcGVuKAogICAgICAgIHNlbGYsCiAgICAgICAgbWV0aG9kLAogICAgICAgIHVybCwKICAgICAgICBib2R5PU5vbmUsCiAgICAgICAgaGVhZGVycz1Ob25lLAogICAgICAgIGVuY29kZV9tdWx0aXBhcnQ9VHJ1ZSwKICAgICAgICBtdWx0aXBhcnRfYm91bmRhcnk9Tm9uZSwKICAgICAgICAqKmt3CiAgICApOiAgIyBBYnN0cmFjdAogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IoCiAgICAgICAgICAgIFwiQ2xhc3NlcyBleHRlbmRpbmcgUmVxdWVzdE1ldGhvZHMgbXVzdCBpbXBsZW1lbnQgXCIKICAgICAgICAgICAgXCJ0aGVpciBvd24gYGB1cmxvcGVuYGAgbWV0aG9kLlwiCiAgICAgICAgKQoKICAgIGRlZiByZXF1ZXN0KHNlbGYsIG1ldGhvZCwgdXJsLCBmaWVsZHM9Tm9uZSwgaGVhZGVycz1Ob25lLCAqKnVybG9wZW5fa3cpOgogICAgICAgIFwiXCJcIgogICAgICAgIE1ha2UgYSByZXF1ZXN0IHVzaW5nIDptZXRoOmB1cmxvcGVuYCB3aXRoIHRoZSBhcHByb3ByaWF0ZSBlbmNvZGluZyBvZgogICAgICAgIGBgZmllbGRzYGAgYmFzZWQgb24gdGhlIGBgbWV0aG9kYGAgdXNlZC4KCiAgICAgICAgVGhpcyBpcyBhIGNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IHJlcXVpcmVzIHRoZSBsZWFzdCBhbW91bnQgb2YgbWFudWFsCiAgICAgICAgZWZmb3J0LiBJdCBjYW4gYmUgdXNlZCBpbiBtb3N0IHNpdHVhdGlvbnMsIHdoaWxlIHN0aWxsIGhhdmluZyB0aGUKICAgICAgICBvcHRpb24gdG8gZHJvcCBkb3duIHRvIG1vcmUgc3BlY2lmaWMgbWV0aG9kcyB3aGVuIG5lY2Vzc2FyeSwgc3VjaCBhcwogICAgICAgIDptZXRoOmByZXF1ZXN0X2VuY29kZV91cmxgLCA6bWV0aDpgcmVxdWVzdF9lbmNvZGVfYm9keWAsCiAgICAgICAgb3IgZXZlbiB0aGUgbG93ZXN0IGxldmVsIDptZXRoOmB1cmxvcGVuYC4KICAgICAgICBcIlwiXCIKICAgICAgICBtZXRob2QgPSBtZXRob2QudXBwZXIoKQoKICAgICAgICB1cmxvcGVuX2t3W1wicmVxdWVzdF91cmxcIl0gPSB1cmwKCiAgICAgICAgaWYgbWV0aG9kIGluIHNlbGYuX2VuY29kZV91cmxfbWV0aG9kczoKICAgICAgICAgICAgcmV0dXJuIHNlbGYucmVxdWVzdF9lbmNvZGVfdXJsKAogICAgICAgICAgICAgICAgbWV0aG9kLCB1cmwsIGZpZWxkcz1maWVsZHMsIGhlYWRlcnM9aGVhZGVycywgKip1cmxvcGVuX2t3CiAgICAgICAgICAgICkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gc2VsZi5yZXF1ZXN0X2VuY29kZV9ib2R5KAogICAgICAgICAgICAgICAgbWV0aG9kLCB1cmwsIGZpZWxkcz1maWVsZHMsIGhlYWRlcnM9aGVhZGVycywgKip1cmxvcGVuX2t3CiAgICAgICAgICAgICkKCiAgICBkZWYgcmVxdWVzdF9lbmNvZGVfdXJsKHNlbGYsIG1ldGhvZCwgdXJsLCBmaWVsZHM9Tm9uZSwgaGVhZGVycz1Ob25lLCAqKnVybG9wZW5fa3cpOgogICAgICAgIFwiXCJcIgogICAgICAgIE1ha2UgYSByZXF1ZXN0IHVzaW5nIDptZXRoOmB1cmxvcGVuYCB3aXRoIHRoZSBgYGZpZWxkc2BgIGVuY29kZWQgaW4KICAgICAgICB0aGUgdXJsLiBUaGlzIGlzIHVzZWZ1bCBmb3IgcmVxdWVzdCBtZXRob2RzIGxpa2UgR0VULCBIRUFELCBERUxFVEUsIGV0Yy4KICAgICAgICBcIlwiXCIKICAgICAgICBpZiBoZWFkZXJzIGlzIE5vbmU6CiAgICAgICAgICAgIGhlYWRlcnMgPSBzZWxmLmhlYWRlcnMKCiAgICAgICAgZXh0cmFfa3cgPSB7XCJoZWFkZXJzXCI6IGhlYWRlcnN9CiAgICAgICAgZXh0cmFfa3cudXBkYXRlKHVybG9wZW5fa3cpCgogICAgICAgIGlmIGZpZWxkczoKICAgICAgICAgICAgdXJsICs9IFwiP1wiICsgdXJsZW5jb2RlKGZpZWxkcykKCiAgICAgICAgcmV0dXJuIHNlbGYudXJsb3BlbihtZXRob2QsIHVybCwgKipleHRyYV9rdykKCiAgICBkZWYgcmVxdWVzdF9lbmNvZGVfYm9keSgKICAgICAgICBzZWxmLAogICAgICAgIG1ldGhvZCwKICAgICAgICB1cmwsCiAgICAgICAgZmllbGRzPU5vbmUsCiAgICAgICAgaGVhZGVycz1Ob25lLAogICAgICAgIGVuY29kZV9tdWx0aXBhcnQ9VHJ1ZSwKICAgICAgICBtdWx0aXBhcnRfYm91bmRhcnk9Tm9uZSwKICAgICAgICAqKnVybG9wZW5fa3cKICAgICk6CiAgICAgICAgXCJcIlwiCiAgICAgICAgTWFrZSBhIHJlcXVlc3QgdXNpbmcgOm1ldGg6YHVybG9wZW5gIHdpdGggdGhlIGBgZmllbGRzYGAgZW5jb2RlZCBpbgogICAgICAgIHRoZSBib2R5LiBUaGlzIGlzIHVzZWZ1bCBmb3IgcmVxdWVzdCBtZXRob2RzIGxpa2UgUE9TVCwgUFVULCBQQVRDSCwgZXRjLgoKICAgICAgICBXaGVuIGBgZW5jb2RlX211bHRpcGFydD1UcnVlYGAgKGRlZmF1bHQpLCB0aGVuCiAgICAgICAgOmZ1bmM6YHVybGxpYjMuZW5jb2RlX211bHRpcGFydF9mb3JtZGF0YWAgaXMgdXNlZCB0byBlbmNvZGUKICAgICAgICB0aGUgcGF5bG9hZCB3aXRoIHRoZSBhcHByb3ByaWF0ZSBjb250ZW50IHR5cGUuIE90aGVyd2lzZQogICAgICAgIDpmdW5jOmB1cmxsaWIucGFyc2UudXJsZW5jb2RlYCBpcyB1c2VkIHdpdGggdGhlCiAgICAgICAgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgY29udGVudCB0eXBlLgoKICAgICAgICBNdWx0aXBhcnQgZW5jb2RpbmcgbXVzdCBiZSB1c2VkIHdoZW4gcG9zdGluZyBmaWxlcywgYW5kIGl0J3MgcmVhc29uYWJseQogICAgICAgIHNhZmUgdG8gdXNlIGl0IGluIG90aGVyIHRpbWVzIHRvby4gSG93ZXZlciwgaXQgbWF5IGJyZWFrIHJlcXVlc3QKICAgICAgICBzaWduaW5nLCBzdWNoIGFzIHdpdGggT0F1dGguCgogICAgICAgIFN1cHBvcnRzIGFuIG9wdGlvbmFsIGBgZmllbGRzYGAgcGFyYW1ldGVyIG9mIGtleS92YWx1ZSBzdHJpbmdzIEFORAogICAgICAgIGtleS9maWxldHVwbGUuIEEgZmlsZXR1cGxlIGlzIGEgKGZpbGVuYW1lLCBkYXRhLCBNSU1FIHR5cGUpIHR1cGxlIHdoZXJlCiAgICAgICAgdGhlIE1JTUUgdHlwZSBpcyBvcHRpb25hbC4gRm9yIGV4YW1wbGU6OgoKICAgICAgICAgICAgZmllbGRzID0gewogICAgICAgICAgICAgICAgJ2Zvbyc6ICdiYXInLAogICAgICAgICAgICAgICAgJ2Zha2VmaWxlJzogKCdmb29maWxlLnR4dCcsICdjb250ZW50cyBvZiBmb29maWxlJyksCiAgICAgICAgICAgICAgICAncmVhbGZpbGUnOiAoJ2JhcmZpbGUudHh0Jywgb3BlbigncmVhbGZpbGUnKS5yZWFkKCkpLAogICAgICAgICAgICAgICAgJ3R5cGVkZmlsZSc6ICgnYmF6ZmlsZS5iaW4nLCBvcGVuKCdiYXpmaWxlJykucmVhZCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaW1hZ2UvanBlZycpLAogICAgICAgICAgICAgICAgJ25vbmFtZWZpbGUnOiAnY29udGVudHMgb2Ygbm9uYW1lZmlsZSBmaWVsZCcsCiAgICAgICAgICAgIH0KCiAgICAgICAgV2hlbiB1cGxvYWRpbmcgYSBmaWxlLCBwcm92aWRpbmcgYSBmaWxlbmFtZSAodGhlIGZpcnN0IHBhcmFtZXRlciBvZiB0aGUKICAgICAgICB0dXBsZSkgaXMgb3B0aW9uYWwgYnV0IHJlY29tbWVuZGVkIHRvIGJlc3QgbWltaWMgYmVoYXZpb3Igb2YgYnJvd3NlcnMuCgogICAgICAgIE5vdGUgdGhhdCBpZiBgYGhlYWRlcnNgYCBhcmUgc3VwcGxpZWQsIHRoZSAnQ29udGVudC1UeXBlJyBoZWFkZXIgd2lsbAogICAgICAgIGJlIG92ZXJ3cml0dGVuIGJlY2F1c2UgaXQgZGVwZW5kcyBvbiB0aGUgZHluYW1pYyByYW5kb20gYm91bmRhcnkgc3RyaW5nCiAgICAgICAgd2hpY2ggaXMgdXNlZCB0byBjb21wb3NlIHRoZSBib2R5IG9mIHRoZSByZXF1ZXN0LiBUaGUgcmFuZG9tIGJvdW5kYXJ5CiAgICAgICAgc3RyaW5nIGNhbiBiZSBleHBsaWNpdGx5IHNldCB3aXRoIHRoZSBgYG11bHRpcGFydF9ib3VuZGFyeWBgIHBhcmFtZXRlci4KICAgICAgICBcIlwiXCIKICAgICAgICBpZiBoZWFkZXJzIGlzIE5vbmU6CiAgICAgICAgICAgIGhlYWRlcnMgPSBzZWxmLmhlYWRlcnMKCiAgICAgICAgZXh0cmFfa3cgPSB7XCJoZWFkZXJzXCI6IHt9fQoKICAgICAgICBpZiBmaWVsZHM6CiAgICAgICAgICAgIGlmIFwiYm9keVwiIGluIHVybG9wZW5fa3c6CiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgXCJyZXF1ZXN0IGdvdCB2YWx1ZXMgZm9yIGJvdGggJ2ZpZWxkcycgYW5kICdib2R5JywgY2FuIG9ubHkgc3BlY2lmeSBvbmUuXCIKICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgIGlmIGVuY29kZV9tdWx0aXBhcnQ6CiAgICAgICAgICAgICAgICBib2R5LCBjb250ZW50X3R5cGUgPSBlbmNvZGVfbXVsdGlwYXJ0X2Zvcm1kYXRhKAogICAgICAgICAgICAgICAgICAgIGZpZWxkcywgYm91bmRhcnk9bXVsdGlwYXJ0X2JvdW5kYXJ5CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBib2R5LCBjb250ZW50X3R5cGUgPSAoCiAgICAgICAgICAgICAgICAgICAgdXJsZW5jb2RlKGZpZWxkcyksCiAgICAgICAgICAgICAgICAgICAgXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIiwKICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgIGV4dHJhX2t3W1wiYm9keVwiXSA9IGJvZHkKICAgICAgICAgICAgZXh0cmFfa3dbXCJoZWFkZXJzXCJdID0ge1wiQ29udGVudC1UeXBlXCI6IGNvbnRlbnRfdHlwZX0KCiAgICAgICAgZXh0cmFfa3dbXCJoZWFkZXJzXCJdLnVwZGF0ZShoZWFkZXJzKQogICAgICAgIGV4dHJhX2t3LnVwZGF0ZSh1cmxvcGVuX2t3KQoKICAgICAgICByZXR1cm4gc2VsZi51cmxvcGVuKG1ldGhvZCwgdXJsLCAqKmV4dHJhX2t3KQoKIiIiCm1vZHVsZV9kaWN0WyJ1cmxsaWIzIitvcy5zZXArInJlc3BvbnNlLnB5Il09IiIiCmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYWJzb2x1dGVfaW1wb3J0CiMgPCBpbmNsdWRlICdicm90bGljZmZpLnB5JyA+CgojIDwgaW5jbHVkZSAnYnJvdGxpLnB5JyA+CgoKaW1wb3J0IGlvCmltcG9ydCBsb2dnaW5nCmltcG9ydCB6bGliCmZyb20gY29udGV4dGxpYiBpbXBvcnQgY29udGV4dG1hbmFnZXIKZnJvbSBzb2NrZXQgaW1wb3J0IGVycm9yIGFzIFNvY2tldEVycm9yCmZyb20gc29ja2V0IGltcG9ydCB0aW1lb3V0IGFzIFNvY2tldFRpbWVvdXQKCnRyeToKICAgIHRyeToKICAgICAgICBpbXBvcnQgYnJvdGxpY2ZmaSBhcyBicm90bGkKICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICBpbXBvcnQgYnJvdGxpCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIGJyb3RsaSA9IE5vbmUKCmZyb20gLl9jb2xsZWN0aW9ucyBpbXBvcnQgSFRUUEhlYWRlckRpY3QKZnJvbSAuY29ubmVjdGlvbiBpbXBvcnQgQmFzZVNTTEVycm9yLCBIVFRQRXhjZXB0aW9uCmZyb20gLmV4Y2VwdGlvbnMgaW1wb3J0ICgKICAgIEJvZHlOb3RIdHRwbGliQ29tcGF0aWJsZSwKICAgIERlY29kZUVycm9yLAogICAgSFRUUEVycm9yLAogICAgSW5jb21wbGV0ZVJlYWQsCiAgICBJbnZhbGlkQ2h1bmtMZW5ndGgsCiAgICBJbnZhbGlkSGVhZGVyLAogICAgUHJvdG9jb2xFcnJvciwKICAgIFJlYWRUaW1lb3V0RXJyb3IsCiAgICBSZXNwb25zZU5vdENodW5rZWQsCiAgICBTU0xFcnJvciwKKQpmcm9tIC5wYWNrYWdlcyBpbXBvcnQgc2l4CmZyb20gLnV0aWwucmVzcG9uc2UgaW1wb3J0IGlzX2ZwX2Nsb3NlZCwgaXNfcmVzcG9uc2VfdG9faGVhZAoKbG9nID0gbG9nZ2luZy5nZXRMb2dnZXIoX19uYW1lX18pCgoKY2xhc3MgRGVmbGF0ZURlY29kZXIob2JqZWN0KToKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBzZWxmLl9maXJzdF90cnkgPSBUcnVlCiAgICAgICAgc2VsZi5fZGF0YSA9IGJcIlwiCiAgICAgICAgc2VsZi5fb2JqID0gemxpYi5kZWNvbXByZXNzb2JqKCkKCiAgICBkZWYgX19nZXRhdHRyX18oc2VsZiwgbmFtZSk6CiAgICAgICAgcmV0dXJuIGdldGF0dHIoc2VsZi5fb2JqLCBuYW1lKQoKICAgIGRlZiBkZWNvbXByZXNzKHNlbGYsIGRhdGEpOgogICAgICAgIGlmIG5vdCBkYXRhOgogICAgICAgICAgICByZXR1cm4gZGF0YQoKICAgICAgICBpZiBub3Qgc2VsZi5fZmlyc3RfdHJ5OgogICAgICAgICAgICByZXR1cm4gc2VsZi5fb2JqLmRlY29tcHJlc3MoZGF0YSkKCiAgICAgICAgc2VsZi5fZGF0YSArPSBkYXRhCiAgICAgICAgdHJ5OgogICAgICAgICAgICBkZWNvbXByZXNzZWQgPSBzZWxmLl9vYmouZGVjb21wcmVzcyhkYXRhKQogICAgICAgICAgICBpZiBkZWNvbXByZXNzZWQ6CiAgICAgICAgICAgICAgICBzZWxmLl9maXJzdF90cnkgPSBGYWxzZQogICAgICAgICAgICAgICAgc2VsZi5fZGF0YSA9IE5vbmUKICAgICAgICAgICAgcmV0dXJuIGRlY29tcHJlc3NlZAogICAgICAgIGV4Y2VwdCB6bGliLmVycm9yOgogICAgICAgICAgICBzZWxmLl9maXJzdF90cnkgPSBGYWxzZQogICAgICAgICAgICBzZWxmLl9vYmogPSB6bGliLmRlY29tcHJlc3NvYmooLXpsaWIuTUFYX1dCSVRTKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5kZWNvbXByZXNzKHNlbGYuX2RhdGEpCiAgICAgICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgICAgICBzZWxmLl9kYXRhID0gTm9uZQoKCmNsYXNzIEd6aXBEZWNvZGVyU3RhdGUob2JqZWN0KToKCiAgICBGSVJTVF9NRU1CRVIgPSAwCiAgICBPVEhFUl9NRU1CRVJTID0gMQogICAgU1dBTExPV19EQVRBID0gMgoKCmNsYXNzIEd6aXBEZWNvZGVyKG9iamVjdCk6CiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc2VsZi5fb2JqID0gemxpYi5kZWNvbXByZXNzb2JqKDE2ICsgemxpYi5NQVhfV0JJVFMpCiAgICAgICAgc2VsZi5fc3RhdGUgPSBHemlwRGVjb2RlclN0YXRlLkZJUlNUX01FTUJFUgoKICAgIGRlZiBfX2dldGF0dHJfXyhzZWxmLCBuYW1lKToKICAgICAgICByZXR1cm4gZ2V0YXR0cihzZWxmLl9vYmosIG5hbWUpCgogICAgZGVmIGRlY29tcHJlc3Moc2VsZiwgZGF0YSk6CiAgICAgICAgcmV0ID0gYnl0ZWFycmF5KCkKICAgICAgICBpZiBzZWxmLl9zdGF0ZSA9PSBHemlwRGVjb2RlclN0YXRlLlNXQUxMT1dfREFUQSBvciBub3QgZGF0YToKICAgICAgICAgICAgcmV0dXJuIGJ5dGVzKHJldCkKICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICByZXQgKz0gc2VsZi5fb2JqLmRlY29tcHJlc3MoZGF0YSkKICAgICAgICAgICAgZXhjZXB0IHpsaWIuZXJyb3I6CiAgICAgICAgICAgICAgICBwcmV2aW91c19zdGF0ZSA9IHNlbGYuX3N0YXRlCiAgICAgICAgICAgICAgICAjIElnbm9yZSBkYXRhIGFmdGVyIHRoZSBmaXJzdCBlcnJvcgogICAgICAgICAgICAgICAgc2VsZi5fc3RhdGUgPSBHemlwRGVjb2RlclN0YXRlLlNXQUxMT1dfREFUQQogICAgICAgICAgICAgICAgaWYgcHJldmlvdXNfc3RhdGUgPT0gR3ppcERlY29kZXJTdGF0ZS5PVEhFUl9NRU1CRVJTOgogICAgICAgICAgICAgICAgICAgICMgQWxsb3cgdHJhaWxpbmcgZ2FyYmFnZSBhY2NlcHRhYmxlIGluIG90aGVyIGd6aXAgY2xpZW50cwogICAgICAgICAgICAgICAgICAgIHJldHVybiBieXRlcyhyZXQpCiAgICAgICAgICAgICAgICByYWlzZQogICAgICAgICAgICBkYXRhID0gc2VsZi5fb2JqLnVudXNlZF9kYXRhCiAgICAgICAgICAgIGlmIG5vdCBkYXRhOgogICAgICAgICAgICAgICAgcmV0dXJuIGJ5dGVzKHJldCkKICAgICAgICAgICAgc2VsZi5fc3RhdGUgPSBHemlwRGVjb2RlclN0YXRlLk9USEVSX01FTUJFUlMKICAgICAgICAgICAgc2VsZi5fb2JqID0gemxpYi5kZWNvbXByZXNzb2JqKDE2ICsgemxpYi5NQVhfV0JJVFMpCgoKaWYgYnJvdGxpIGlzIG5vdCBOb25lOgoKICAgIGNsYXNzIEJyb3RsaURlY29kZXIob2JqZWN0KToKICAgICAgICAjIFN1cHBvcnRzIGJvdGggJ2Jyb3RsaXB5JyBhbmQgJ0Jyb3RsaScgcGFja2FnZXMKICAgICAgICAjIHNpbmNlIHRoZXkgc2hhcmUgYW4gaW1wb3J0IG5hbWUuIFRoZSB0b3AgYnJhbmNoZXMKICAgICAgICAjIGFyZSBmb3IgJ2Jyb3RsaXB5JyBhbmQgYm90dG9tIGJyYW5jaGVzIGZvciAnQnJvdGxpJwogICAgICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICAgICAgc2VsZi5fb2JqID0gYnJvdGxpLkRlY29tcHJlc3NvcigpCiAgICAgICAgICAgIGlmIGhhc2F0dHIoc2VsZi5fb2JqLCBcImRlY29tcHJlc3NcIik6CiAgICAgICAgICAgICAgICBzZWxmLmRlY29tcHJlc3MgPSBzZWxmLl9vYmouZGVjb21wcmVzcwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi5kZWNvbXByZXNzID0gc2VsZi5fb2JqLnByb2Nlc3MKCiAgICAgICAgZGVmIGZsdXNoKHNlbGYpOgogICAgICAgICAgICBpZiBoYXNhdHRyKHNlbGYuX29iaiwgXCJmbHVzaFwiKToKICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLl9vYmouZmx1c2goKQogICAgICAgICAgICByZXR1cm4gYlwiXCIKCgpjbGFzcyBNdWx0aURlY29kZXIob2JqZWN0KToKICAgIFwiXCJcIgogICAgRnJvbSBSRkM3MjMxOgogICAgICAgIElmIG9uZSBvciBtb3JlIGVuY29kaW5ncyBoYXZlIGJlZW4gYXBwbGllZCB0byBhIHJlcHJlc2VudGF0aW9uLCB0aGUKICAgICAgICBzZW5kZXIgdGhhdCBhcHBsaWVkIHRoZSBlbmNvZGluZ3MgTVVTVCBnZW5lcmF0ZSBhIENvbnRlbnQtRW5jb2RpbmcKICAgICAgICBoZWFkZXIgZmllbGQgdGhhdCBsaXN0cyB0aGUgY29udGVudCBjb2RpbmdzIGluIHRoZSBvcmRlciBpbiB3aGljaAogICAgICAgIHRoZXkgd2VyZSBhcHBsaWVkLgogICAgXCJcIlwiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG1vZGVzKToKICAgICAgICBzZWxmLl9kZWNvZGVycyA9IFtfZ2V0X2RlY29kZXIobS5zdHJpcCgpKSBmb3IgbSBpbiBtb2Rlcy5zcGxpdChcIixcIildCgogICAgZGVmIGZsdXNoKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLl9kZWNvZGVyc1swXS5mbHVzaCgpCgogICAgZGVmIGRlY29tcHJlc3Moc2VsZiwgZGF0YSk6CiAgICAgICAgZm9yIGQgaW4gcmV2ZXJzZWQoc2VsZi5fZGVjb2RlcnMpOgogICAgICAgICAgICBkYXRhID0gZC5kZWNvbXByZXNzKGRhdGEpCiAgICAgICAgcmV0dXJuIGRhdGEKCgpkZWYgX2dldF9kZWNvZGVyKG1vZGUpOgogICAgaWYgXCIsXCIgaW4gbW9kZToKICAgICAgICByZXR1cm4gTXVsdGlEZWNvZGVyKG1vZGUpCgogICAgaWYgbW9kZSA9PSBcImd6aXBcIjoKICAgICAgICByZXR1cm4gR3ppcERlY29kZXIoKQoKICAgIGlmIGJyb3RsaSBpcyBub3QgTm9uZSBhbmQgbW9kZSA9PSBcImJyXCI6CiAgICAgICAgcmV0dXJuIEJyb3RsaURlY29kZXIoKQoKICAgIHJldHVybiBEZWZsYXRlRGVjb2RlcigpCgoKY2xhc3MgSFRUUFJlc3BvbnNlKGlvLklPQmFzZSk6CiAgICBcIlwiXCIKICAgIEhUVFAgUmVzcG9uc2UgY29udGFpbmVyLgoKICAgIEJhY2t3YXJkcy1jb21wYXRpYmxlIHdpdGggOmNsYXNzOmBodHRwLmNsaWVudC5IVFRQUmVzcG9uc2VgIGJ1dCB0aGUgcmVzcG9uc2UgYGBib2R5YGAgaXMKICAgIGxvYWRlZCBhbmQgZGVjb2RlZCBvbi1kZW1hbmQgd2hlbiB0aGUgYGBkYXRhYGAgcHJvcGVydHkgaXMgYWNjZXNzZWQuICBUaGlzCiAgICBjbGFzcyBpcyBhbHNvIGNvbXBhdGlibGUgd2l0aCB0aGUgUHl0aG9uIHN0YW5kYXJkIGxpYnJhcnkncyA6bW9kOmBpb2AKICAgIG1vZHVsZSwgYW5kIGNhbiBoZW5jZSBiZSB0cmVhdGVkIGFzIGEgcmVhZGFibGUgb2JqZWN0IGluIHRoZSBjb250ZXh0IG9mIHRoYXQKICAgIGZyYW1ld29yay4KCiAgICBFeHRyYSBwYXJhbWV0ZXJzIGZvciBiZWhhdmlvdXIgbm90IHByZXNlbnQgaW4gOmNsYXNzOmBodHRwLmNsaWVudC5IVFRQUmVzcG9uc2VgOgoKICAgIDpwYXJhbSBwcmVsb2FkX2NvbnRlbnQ6CiAgICAgICAgSWYgVHJ1ZSwgdGhlIHJlc3BvbnNlJ3MgYm9keSB3aWxsIGJlIHByZWxvYWRlZCBkdXJpbmcgY29uc3RydWN0aW9uLgoKICAgIDpwYXJhbSBkZWNvZGVfY29udGVudDoKICAgICAgICBJZiBUcnVlLCB3aWxsIGF0dGVtcHQgdG8gZGVjb2RlIHRoZSBib2R5IGJhc2VkIG9uIHRoZQogICAgICAgICdjb250ZW50LWVuY29kaW5nJyBoZWFkZXIuCgogICAgOnBhcmFtIG9yaWdpbmFsX3Jlc3BvbnNlOgogICAgICAgIFdoZW4gdGhpcyBIVFRQUmVzcG9uc2Ugd3JhcHBlciBpcyBnZW5lcmF0ZWQgZnJvbSBhbiA6Y2xhc3M6YGh0dHAuY2xpZW50LkhUVFBSZXNwb25zZWAKICAgICAgICBvYmplY3QsIGl0J3MgY29udmVuaWVudCB0byBpbmNsdWRlIHRoZSBvcmlnaW5hbCBmb3IgZGVidWcgcHVycG9zZXMuIEl0J3MKICAgICAgICBvdGhlcndpc2UgdW51c2VkLgoKICAgIDpwYXJhbSByZXRyaWVzOgogICAgICAgIFRoZSByZXRyaWVzIGNvbnRhaW5zIHRoZSBsYXN0IDpjbGFzczpgfnVybGxpYjMudXRpbC5yZXRyeS5SZXRyeWAgdGhhdAogICAgICAgIHdhcyB1c2VkIGR1cmluZyB0aGUgcmVxdWVzdC4KCiAgICA6cGFyYW0gZW5mb3JjZV9jb250ZW50X2xlbmd0aDoKICAgICAgICBFbmZvcmNlIGNvbnRlbnQgbGVuZ3RoIGNoZWNraW5nLiBCb2R5IHJldHVybmVkIGJ5IHNlcnZlciBtdXN0IG1hdGNoCiAgICAgICAgdmFsdWUgb2YgQ29udGVudC1MZW5ndGggaGVhZGVyLCBpZiBwcmVzZW50LiBPdGhlcndpc2UsIHJhaXNlIGVycm9yLgogICAgXCJcIlwiCgogICAgQ09OVEVOVF9ERUNPREVSUyA9IFtcImd6aXBcIiwgXCJkZWZsYXRlXCJdCiAgICBpZiBicm90bGkgaXMgbm90IE5vbmU6CiAgICAgICAgQ09OVEVOVF9ERUNPREVSUyArPSBbXCJiclwiXQogICAgUkVESVJFQ1RfU1RBVFVTRVMgPSBbMzAxLCAzMDIsIDMwMywgMzA3LCAzMDhdCgogICAgZGVmIF9faW5pdF9fKAogICAgICAgIHNlbGYsCiAgICAgICAgYm9keT1cIlwiLAogICAgICAgIGhlYWRlcnM9Tm9uZSwKICAgICAgICBzdGF0dXM9MCwKICAgICAgICB2ZXJzaW9uPTAsCiAgICAgICAgcmVhc29uPU5vbmUsCiAgICAgICAgc3RyaWN0PTAsCiAgICAgICAgcHJlbG9hZF9jb250ZW50PVRydWUsCiAgICAgICAgZGVjb2RlX2NvbnRlbnQ9VHJ1ZSwKICAgICAgICBvcmlnaW5hbF9yZXNwb25zZT1Ob25lLAogICAgICAgIHBvb2w9Tm9uZSwKICAgICAgICBjb25uZWN0aW9uPU5vbmUsCiAgICAgICAgbXNnPU5vbmUsCiAgICAgICAgcmV0cmllcz1Ob25lLAogICAgICAgIGVuZm9yY2VfY29udGVudF9sZW5ndGg9RmFsc2UsCiAgICAgICAgcmVxdWVzdF9tZXRob2Q9Tm9uZSwKICAgICAgICByZXF1ZXN0X3VybD1Ob25lLAogICAgICAgIGF1dG9fY2xvc2U9VHJ1ZSwKICAgICk6CgogICAgICAgIGlmIGlzaW5zdGFuY2UoaGVhZGVycywgSFRUUEhlYWRlckRpY3QpOgogICAgICAgICAgICBzZWxmLmhlYWRlcnMgPSBoZWFkZXJzCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5oZWFkZXJzID0gSFRUUEhlYWRlckRpY3QoaGVhZGVycykKICAgICAgICBzZWxmLnN0YXR1cyA9IHN0YXR1cwogICAgICAgIHNlbGYudmVyc2lvbiA9IHZlcnNpb24KICAgICAgICBzZWxmLnJlYXNvbiA9IHJlYXNvbgogICAgICAgIHNlbGYuc3RyaWN0ID0gc3RyaWN0CiAgICAgICAgc2VsZi5kZWNvZGVfY29udGVudCA9IGRlY29kZV9jb250ZW50CiAgICAgICAgc2VsZi5yZXRyaWVzID0gcmV0cmllcwogICAgICAgIHNlbGYuZW5mb3JjZV9jb250ZW50X2xlbmd0aCA9IGVuZm9yY2VfY29udGVudF9sZW5ndGgKICAgICAgICBzZWxmLmF1dG9fY2xvc2UgPSBhdXRvX2Nsb3NlCgogICAgICAgIHNlbGYuX2RlY29kZXIgPSBOb25lCiAgICAgICAgc2VsZi5fYm9keSA9IE5vbmUKICAgICAgICBzZWxmLl9mcCA9IE5vbmUKICAgICAgICBzZWxmLl9vcmlnaW5hbF9yZXNwb25zZSA9IG9yaWdpbmFsX3Jlc3BvbnNlCiAgICAgICAgc2VsZi5fZnBfYnl0ZXNfcmVhZCA9IDAKICAgICAgICBzZWxmLm1zZyA9IG1zZwogICAgICAgIHNlbGYuX3JlcXVlc3RfdXJsID0gcmVxdWVzdF91cmwKCiAgICAgICAgaWYgYm9keSBhbmQgaXNpbnN0YW5jZShib2R5LCAoc2l4LnN0cmluZ190eXBlcywgYnl0ZXMpKToKICAgICAgICAgICAgc2VsZi5fYm9keSA9IGJvZHkKCiAgICAgICAgc2VsZi5fcG9vbCA9IHBvb2wKICAgICAgICBzZWxmLl9jb25uZWN0aW9uID0gY29ubmVjdGlvbgoKICAgICAgICBpZiBoYXNhdHRyKGJvZHksIFwicmVhZFwiKToKICAgICAgICAgICAgc2VsZi5fZnAgPSBib2R5CgogICAgICAgICMgQXJlIHdlIHVzaW5nIHRoZSBjaHVua2VkLXN0eWxlIG9mIHRyYW5zZmVyIGVuY29kaW5nPwogICAgICAgIHNlbGYuY2h1bmtlZCA9IEZhbHNlCiAgICAgICAgc2VsZi5jaHVua19sZWZ0ID0gTm9uZQogICAgICAgIHRyX2VuYyA9IHNlbGYuaGVhZGVycy5nZXQoXCJ0cmFuc2Zlci1lbmNvZGluZ1wiLCBcIlwiKS5sb3dlcigpCiAgICAgICAgIyBEb24ndCBpbmN1ciB0aGUgcGVuYWx0eSBvZiBjcmVhdGluZyBhIGxpc3QgYW5kIHRoZW4gZGlzY2FyZGluZyBpdAogICAgICAgIGVuY29kaW5ncyA9IChlbmMuc3RyaXAoKSBmb3IgZW5jIGluIHRyX2VuYy5zcGxpdChcIixcIikpCiAgICAgICAgaWYgXCJjaHVua2VkXCIgaW4gZW5jb2RpbmdzOgogICAgICAgICAgICBzZWxmLmNodW5rZWQgPSBUcnVlCgogICAgICAgICMgRGV0ZXJtaW5lIGxlbmd0aCBvZiByZXNwb25zZQogICAgICAgIHNlbGYubGVuZ3RoX3JlbWFpbmluZyA9IHNlbGYuX2luaXRfbGVuZ3RoKHJlcXVlc3RfbWV0aG9kKQoKICAgICAgICAjIElmIHJlcXVlc3RlZCwgcHJlbG9hZCB0aGUgYm9keS4KICAgICAgICBpZiBwcmVsb2FkX2NvbnRlbnQgYW5kIG5vdCBzZWxmLl9ib2R5OgogICAgICAgICAgICBzZWxmLl9ib2R5ID0gc2VsZi5yZWFkKGRlY29kZV9jb250ZW50PWRlY29kZV9jb250ZW50KQoKICAgIGRlZiBnZXRfcmVkaXJlY3RfbG9jYXRpb24oc2VsZik6CiAgICAgICAgXCJcIlwiCiAgICAgICAgU2hvdWxkIHdlIHJlZGlyZWN0IGFuZCB3aGVyZSB0bz8KCiAgICAgICAgOnJldHVybnM6IFRydXRoeSByZWRpcmVjdCBsb2NhdGlvbiBzdHJpbmcgaWYgd2UgZ290IGEgcmVkaXJlY3Qgc3RhdHVzCiAgICAgICAgICAgIGNvZGUgYW5kIHZhbGlkIGxvY2F0aW9uLiBgYE5vbmVgYCBpZiByZWRpcmVjdCBzdGF0dXMgYW5kIG5vCiAgICAgICAgICAgIGxvY2F0aW9uLiBgYEZhbHNlYGAgaWYgbm90IGEgcmVkaXJlY3Qgc3RhdHVzIGNvZGUuCiAgICAgICAgXCJcIlwiCiAgICAgICAgaWYgc2VsZi5zdGF0dXMgaW4gc2VsZi5SRURJUkVDVF9TVEFUVVNFUzoKICAgICAgICAgICAgcmV0dXJuIHNlbGYuaGVhZGVycy5nZXQoXCJsb2NhdGlvblwiKQoKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgcmVsZWFzZV9jb25uKHNlbGYpOgogICAgICAgIGlmIG5vdCBzZWxmLl9wb29sIG9yIG5vdCBzZWxmLl9jb25uZWN0aW9uOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgc2VsZi5fcG9vbC5fcHV0X2Nvbm4oc2VsZi5fY29ubmVjdGlvbikKICAgICAgICBzZWxmLl9jb25uZWN0aW9uID0gTm9uZQoKICAgIGRlZiBkcmFpbl9jb25uKHNlbGYpOgogICAgICAgIFwiXCJcIgogICAgICAgIFJlYWQgYW5kIGRpc2NhcmQgYW55IHJlbWFpbmluZyBIVFRQIHJlc3BvbnNlIGRhdGEgaW4gdGhlIHJlc3BvbnNlIGNvbm5lY3Rpb24uCgogICAgICAgIFVucmVhZCBkYXRhIGluIHRoZSBIVFRQUmVzcG9uc2UgY29ubmVjdGlvbiBibG9ja3MgdGhlIGNvbm5lY3Rpb24gZnJvbSBiZWluZyByZWxlYXNlZCBiYWNrIHRvIHRoZSBwb29sLgogICAgICAgIFwiXCJcIgogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5yZWFkKCkKICAgICAgICBleGNlcHQgKEhUVFBFcnJvciwgU29ja2V0RXJyb3IsIEJhc2VTU0xFcnJvciwgSFRUUEV4Y2VwdGlvbik6CiAgICAgICAgICAgIHBhc3MKCiAgICBAcHJvcGVydHkKICAgIGRlZiBkYXRhKHNlbGYpOgogICAgICAgICMgRm9yIGJhY2t3YXJkcy1jb21wYXQgd2l0aCBlYXJsaWVyIHVybGxpYjMgMC40IGFuZCBlYXJsaWVyLgogICAgICAgIGlmIHNlbGYuX2JvZHk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9ib2R5CgogICAgICAgIGlmIHNlbGYuX2ZwOgogICAgICAgICAgICByZXR1cm4gc2VsZi5yZWFkKGNhY2hlX2NvbnRlbnQ9VHJ1ZSkKCiAgICBAcHJvcGVydHkKICAgIGRlZiBjb25uZWN0aW9uKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLl9jb25uZWN0aW9uCgogICAgZGVmIGlzY2xvc2VkKHNlbGYpOgogICAgICAgIHJldHVybiBpc19mcF9jbG9zZWQoc2VsZi5fZnApCgogICAgZGVmIHRlbGwoc2VsZik6CiAgICAgICAgXCJcIlwiCiAgICAgICAgT2J0YWluIHRoZSBudW1iZXIgb2YgYnl0ZXMgcHVsbGVkIG92ZXIgdGhlIHdpcmUgc28gZmFyLiBNYXkgZGlmZmVyIGZyb20KICAgICAgICB0aGUgYW1vdW50IG9mIGNvbnRlbnQgcmV0dXJuZWQgYnkgOm1ldGg6YGB1cmxsaWIzLnJlc3BvbnNlLkhUVFBSZXNwb25zZS5yZWFkYGAKICAgICAgICBpZiBieXRlcyBhcmUgZW5jb2RlZCBvbiB0aGUgd2lyZSAoZS5nLCBjb21wcmVzc2VkKS4KICAgICAgICBcIlwiXCIKICAgICAgICByZXR1cm4gc2VsZi5fZnBfYnl0ZXNfcmVhZAoKICAgIGRlZiBfaW5pdF9sZW5ndGgoc2VsZiwgcmVxdWVzdF9tZXRob2QpOgogICAgICAgIFwiXCJcIgogICAgICAgIFNldCBpbml0aWFsIGxlbmd0aCB2YWx1ZSBmb3IgUmVzcG9uc2UgY29udGVudCBpZiBhdmFpbGFibGUuCiAgICAgICAgXCJcIlwiCiAgICAgICAgbGVuZ3RoID0gc2VsZi5oZWFkZXJzLmdldChcImNvbnRlbnQtbGVuZ3RoXCIpCgogICAgICAgIGlmIGxlbmd0aCBpcyBub3QgTm9uZToKICAgICAgICAgICAgaWYgc2VsZi5jaHVua2VkOgogICAgICAgICAgICAgICAgIyBUaGlzIFJlc3BvbnNlIHdpbGwgZmFpbCB3aXRoIGFuIEluY29tcGxldGVSZWFkIGlmIGl0IGNhbid0IGJlCiAgICAgICAgICAgICAgICAjIHJlY2VpdmVkIGFzIGNodW5rZWQuIFRoaXMgbWV0aG9kIGZhbGxzIGJhY2sgdG8gYXR0ZW1wdCByZWFkaW5nCiAgICAgICAgICAgICAgICAjIHRoZSByZXNwb25zZSBiZWZvcmUgcmFpc2luZyBhbiBleGNlcHRpb24uCiAgICAgICAgICAgICAgICBsb2cud2FybmluZygKICAgICAgICAgICAgICAgICAgICBcIlJlY2VpdmVkIHJlc3BvbnNlIHdpdGggYm90aCBDb250ZW50LUxlbmd0aCBhbmQgXCIKICAgICAgICAgICAgICAgICAgICBcIlRyYW5zZmVyLUVuY29kaW5nIHNldC4gVGhpcyBpcyBleHByZXNzbHkgZm9yYmlkZGVuIFwiCiAgICAgICAgICAgICAgICAgICAgXCJieSBSRkMgNzIzMCBzZWMgMy4zLjIuIElnbm9yaW5nIENvbnRlbnQtTGVuZ3RoIGFuZCBcIgogICAgICAgICAgICAgICAgICAgIFwiYXR0ZW1wdGluZyB0byBwcm9jZXNzIHJlc3BvbnNlIGFzIFRyYW5zZmVyLUVuY29kaW5nOiBcIgogICAgICAgICAgICAgICAgICAgIFwiY2h1bmtlZC5cIgogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICMgUkZDIDcyMzAgc2VjdGlvbiAzLjMuMiBzcGVjaWZpZXMgbXVsdGlwbGUgY29udGVudCBsZW5ndGhzIGNhbgogICAgICAgICAgICAgICAgIyBiZSBzZW50IGluIGEgc2luZ2xlIENvbnRlbnQtTGVuZ3RoIGhlYWRlcgogICAgICAgICAgICAgICAgIyAoZS5nLiBDb250ZW50LUxlbmd0aDogNDIsIDQyKS4gVGhpcyBsaW5lIGVuc3VyZXMgdGhlIHZhbHVlcwogICAgICAgICAgICAgICAgIyBhcmUgYWxsIHZhbGlkIGludHMgYW5kIHRoYXQgYXMgbG9uZyBhcyB0aGUgYHNldGAgbGVuZ3RoIGlzIDEsCiAgICAgICAgICAgICAgICAjIGFsbCB2YWx1ZXMgYXJlIHRoZSBzYW1lLiBPdGhlcndpc2UsIHRoZSBoZWFkZXIgaXMgaW52YWxpZC4KICAgICAgICAgICAgICAgIGxlbmd0aHMgPSBzZXQoW2ludCh2YWwpIGZvciB2YWwgaW4gbGVuZ3RoLnNwbGl0KFwiLFwiKV0pCiAgICAgICAgICAgICAgICBpZiBsZW4obGVuZ3RocykgPiAxOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIEludmFsaWRIZWFkZXIoCiAgICAgICAgICAgICAgICAgICAgICAgIFwiQ29udGVudC1MZW5ndGggY29udGFpbmVkIG11bHRpcGxlIFwiCiAgICAgICAgICAgICAgICAgICAgICAgIFwidW5tYXRjaGluZyB2YWx1ZXMgKCVzKVwiICUgbGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgbGVuZ3RoID0gbGVuZ3Rocy5wb3AoKQogICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICAgICAgICAgIGxlbmd0aCA9IE5vbmUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIGxlbmd0aCA8IDA6CiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID0gTm9uZQoKICAgICAgICAjIENvbnZlcnQgc3RhdHVzIHRvIGludCBmb3IgY29tcGFyaXNvbgogICAgICAgICMgSW4gc29tZSBjYXNlcywgaHR0cGxpYiByZXR1cm5zIGEgc3RhdHVzIG9mIFwiX1VOS05PV05cIgogICAgICAgIHRyeToKICAgICAgICAgICAgc3RhdHVzID0gaW50KHNlbGYuc3RhdHVzKQogICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgICAgICBzdGF0dXMgPSAwCgogICAgICAgICMgQ2hlY2sgZm9yIHJlc3BvbnNlcyB0aGF0IHNob3VsZG4ndCBpbmNsdWRlIGEgYm9keQogICAgICAgIGlmIHN0YXR1cyBpbiAoMjA0LCAzMDQpIG9yIDEwMCA8PSBzdGF0dXMgPCAyMDAgb3IgcmVxdWVzdF9tZXRob2QgPT0gXCJIRUFEXCI6CiAgICAgICAgICAgIGxlbmd0aCA9IDAKCiAgICAgICAgcmV0dXJuIGxlbmd0aAoKICAgIGRlZiBfaW5pdF9kZWNvZGVyKHNlbGYpOgogICAgICAgIFwiXCJcIgogICAgICAgIFNldC11cCB0aGUgX2RlY29kZXIgYXR0cmlidXRlIGlmIG5lY2Vzc2FyeS4KICAgICAgICBcIlwiXCIKICAgICAgICAjIE5vdGU6IGNvbnRlbnQtZW5jb2RpbmcgdmFsdWUgc2hvdWxkIGJlIGNhc2UtaW5zZW5zaXRpdmUsIHBlciBSRkMgNzIzMAogICAgICAgICMgU2VjdGlvbiAzLjIKICAgICAgICBjb250ZW50X2VuY29kaW5nID0gc2VsZi5oZWFkZXJzLmdldChcImNvbnRlbnQtZW5jb2RpbmdcIiwgXCJcIikubG93ZXIoKQogICAgICAgIGlmIHNlbGYuX2RlY29kZXIgaXMgTm9uZToKICAgICAgICAgICAgaWYgY29udGVudF9lbmNvZGluZyBpbiBzZWxmLkNPTlRFTlRfREVDT0RFUlM6CiAgICAgICAgICAgICAgICBzZWxmLl9kZWNvZGVyID0gX2dldF9kZWNvZGVyKGNvbnRlbnRfZW5jb2RpbmcpCiAgICAgICAgICAgIGVsaWYgXCIsXCIgaW4gY29udGVudF9lbmNvZGluZzoKICAgICAgICAgICAgICAgIGVuY29kaW5ncyA9IFsKICAgICAgICAgICAgICAgICAgICBlLnN0cmlwKCkKICAgICAgICAgICAgICAgICAgICBmb3IgZSBpbiBjb250ZW50X2VuY29kaW5nLnNwbGl0KFwiLFwiKQogICAgICAgICAgICAgICAgICAgIGlmIGUuc3RyaXAoKSBpbiBzZWxmLkNPTlRFTlRfREVDT0RFUlMKICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgIGlmIGxlbihlbmNvZGluZ3MpOgogICAgICAgICAgICAgICAgICAgIHNlbGYuX2RlY29kZXIgPSBfZ2V0X2RlY29kZXIoY29udGVudF9lbmNvZGluZykKCiAgICBERUNPREVSX0VSUk9SX0NMQVNTRVMgPSAoSU9FcnJvciwgemxpYi5lcnJvcikKICAgIGlmIGJyb3RsaSBpcyBub3QgTm9uZToKICAgICAgICBERUNPREVSX0VSUk9SX0NMQVNTRVMgKz0gKGJyb3RsaS5lcnJvciwpCgogICAgZGVmIF9kZWNvZGUoc2VsZiwgZGF0YSwgZGVjb2RlX2NvbnRlbnQsIGZsdXNoX2RlY29kZXIpOgogICAgICAgIFwiXCJcIgogICAgICAgIERlY29kZSB0aGUgZGF0YSBwYXNzZWQgaW4gYW5kIHBvdGVudGlhbGx5IGZsdXNoIHRoZSBkZWNvZGVyLgogICAgICAgIFwiXCJcIgogICAgICAgIGlmIG5vdCBkZWNvZGVfY29udGVudDoKICAgICAgICAgICAgcmV0dXJuIGRhdGEKCiAgICAgICAgdHJ5OgogICAgICAgICAgICBpZiBzZWxmLl9kZWNvZGVyOgogICAgICAgICAgICAgICAgZGF0YSA9IHNlbGYuX2RlY29kZXIuZGVjb21wcmVzcyhkYXRhKQogICAgICAgIGV4Y2VwdCBzZWxmLkRFQ09ERVJfRVJST1JfQ0xBU1NFUyBhcyBlOgogICAgICAgICAgICBjb250ZW50X2VuY29kaW5nID0gc2VsZi5oZWFkZXJzLmdldChcImNvbnRlbnQtZW5jb2RpbmdcIiwgXCJcIikubG93ZXIoKQogICAgICAgICAgICByYWlzZSBEZWNvZGVFcnJvcigKICAgICAgICAgICAgICAgIFwiUmVjZWl2ZWQgcmVzcG9uc2Ugd2l0aCBjb250ZW50LWVuY29kaW5nOiAlcywgYnV0IFwiCiAgICAgICAgICAgICAgICBcImZhaWxlZCB0byBkZWNvZGUgaXQuXCIgJSBjb250ZW50X2VuY29kaW5nLAogICAgICAgICAgICAgICAgZSwKICAgICAgICAgICAgKQogICAgICAgIGlmIGZsdXNoX2RlY29kZXI6CiAgICAgICAgICAgIGRhdGEgKz0gc2VsZi5fZmx1c2hfZGVjb2RlcigpCgogICAgICAgIHJldHVybiBkYXRhCgogICAgZGVmIF9mbHVzaF9kZWNvZGVyKHNlbGYpOgogICAgICAgIFwiXCJcIgogICAgICAgIEZsdXNoZXMgdGhlIGRlY29kZXIuIFNob3VsZCBvbmx5IGJlIGNhbGxlZCBpZiB0aGUgZGVjb2RlciBpcyBhY3R1YWxseQogICAgICAgIGJlaW5nIHVzZWQuCiAgICAgICAgXCJcIlwiCiAgICAgICAgaWYgc2VsZi5fZGVjb2RlcjoKICAgICAgICAgICAgYnVmID0gc2VsZi5fZGVjb2Rlci5kZWNvbXByZXNzKGJcIlwiKQogICAgICAgICAgICByZXR1cm4gYnVmICsgc2VsZi5fZGVjb2Rlci5mbHVzaCgpCgogICAgICAgIHJldHVybiBiXCJcIgoKICAgIEBjb250ZXh0bWFuYWdlcgogICAgZGVmIF9lcnJvcl9jYXRjaGVyKHNlbGYpOgogICAgICAgIFwiXCJcIgogICAgICAgIENhdGNoIGxvdy1sZXZlbCBweXRob24gZXhjZXB0aW9ucywgaW5zdGVhZCByZS1yYWlzaW5nIHVybGxpYjMKICAgICAgICB2YXJpYW50cywgc28gdGhhdCBsb3ctbGV2ZWwgZXhjZXB0aW9ucyBhcmUgbm90IGxlYWtlZCBpbiB0aGUKICAgICAgICBoaWdoLWxldmVsIGFwaS4KCiAgICAgICAgT24gZXhpdCwgcmVsZWFzZSB0aGUgY29ubmVjdGlvbiBiYWNrIHRvIHRoZSBwb29sLgogICAgICAgIFwiXCJcIgogICAgICAgIGNsZWFuX2V4aXQgPSBGYWxzZQoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHlpZWxkCgogICAgICAgICAgICBleGNlcHQgU29ja2V0VGltZW91dDoKICAgICAgICAgICAgICAgICMgRklYTUU6IElkZWFsbHkgd2UnZCBsaWtlIHRvIGluY2x1ZGUgdGhlIHVybCBpbiB0aGUgUmVhZFRpbWVvdXRFcnJvciBidXQKICAgICAgICAgICAgICAgICMgdGhlcmUgaXMgeWV0IG5vIGNsZWFuIHdheSB0byBnZXQgYXQgaXQgZnJvbSB0aGlzIGNvbnRleHQuCiAgICAgICAgICAgICAgICByYWlzZSBSZWFkVGltZW91dEVycm9yKHNlbGYuX3Bvb2wsIE5vbmUsIFwiUmVhZCB0aW1lZCBvdXQuXCIpCgogICAgICAgICAgICBleGNlcHQgQmFzZVNTTEVycm9yIGFzIGU6CiAgICAgICAgICAgICAgICAjIEZJWE1FOiBJcyB0aGVyZSBhIGJldHRlciB3YXkgdG8gZGlmZmVyZW50aWF0ZSBiZXR3ZWVuIFNTTEVycm9ycz8KICAgICAgICAgICAgICAgIGlmIFwicmVhZCBvcGVyYXRpb24gdGltZWQgb3V0XCIgbm90IGluIHN0cihlKToKICAgICAgICAgICAgICAgICAgICAjIFNTTCBlcnJvcnMgcmVsYXRlZCB0byBmcmFtaW5nL01BQyBnZXQgd3JhcHBlZCBhbmQgcmVyYWlzZWQgaGVyZQogICAgICAgICAgICAgICAgICAgIHJhaXNlIFNTTEVycm9yKGUpCgogICAgICAgICAgICAgICAgcmFpc2UgUmVhZFRpbWVvdXRFcnJvcihzZWxmLl9wb29sLCBOb25lLCBcIlJlYWQgdGltZWQgb3V0LlwiKQoKICAgICAgICAgICAgZXhjZXB0IChIVFRQRXhjZXB0aW9uLCBTb2NrZXRFcnJvcikgYXMgZToKICAgICAgICAgICAgICAgICMgVGhpcyBpbmNsdWRlcyBJbmNvbXBsZXRlUmVhZC4KICAgICAgICAgICAgICAgIHJhaXNlIFByb3RvY29sRXJyb3IoXCJDb25uZWN0aW9uIGJyb2tlbjogJXJcIiAlIGUsIGUpCgogICAgICAgICAgICAjIElmIG5vIGV4Y2VwdGlvbiBpcyB0aHJvd24sIHdlIHNob3VsZCBhdm9pZCBjbGVhbmluZyB1cAogICAgICAgICAgICAjIHVubmVjZXNzYXJpbHkuCiAgICAgICAgICAgIGNsZWFuX2V4aXQgPSBUcnVlCiAgICAgICAgZmluYWxseToKICAgICAgICAgICAgIyBJZiB3ZSBkaWRuJ3QgdGVybWluYXRlIGNsZWFubHksIHdlIG5lZWQgdG8gdGhyb3cgYXdheSBvdXIKICAgICAgICAgICAgIyBjb25uZWN0aW9uLgogICAgICAgICAgICBpZiBub3QgY2xlYW5fZXhpdDoKICAgICAgICAgICAgICAgICMgVGhlIHJlc3BvbnNlIG1heSBub3QgYmUgY2xvc2VkIGJ1dCB3ZSdyZSBub3QgZ29pbmcgdG8gdXNlIGl0CiAgICAgICAgICAgICAgICAjIGFueW1vcmUgc28gY2xvc2UgaXQgbm93IHRvIGVuc3VyZSB0aGF0IHRoZSBjb25uZWN0aW9uIGlzCiAgICAgICAgICAgICAgICAjIHJlbGVhc2VkIGJhY2sgdG8gdGhlIHBvb2wuCiAgICAgICAgICAgICAgICBpZiBzZWxmLl9vcmlnaW5hbF9yZXNwb25zZToKICAgICAgICAgICAgICAgICAgICBzZWxmLl9vcmlnaW5hbF9yZXNwb25zZS5jbG9zZSgpCgogICAgICAgICAgICAgICAgIyBDbG9zaW5nIHRoZSByZXNwb25zZSBtYXkgbm90IGFjdHVhbGx5IGJlIHN1ZmZpY2llbnQgdG8gY2xvc2UKICAgICAgICAgICAgICAgICMgZXZlcnl0aGluZywgc28gaWYgd2UgaGF2ZSBhIGhvbGQgb2YgdGhlIGNvbm5lY3Rpb24gY2xvc2UgdGhhdAogICAgICAgICAgICAgICAgIyB0b28uCiAgICAgICAgICAgICAgICBpZiBzZWxmLl9jb25uZWN0aW9uOgogICAgICAgICAgICAgICAgICAgIHNlbGYuX2Nvbm5lY3Rpb24uY2xvc2UoKQoKICAgICAgICAgICAgIyBJZiB3ZSBob2xkIHRoZSBvcmlnaW5hbCByZXNwb25zZSBidXQgaXQncyBjbG9zZWQgbm93LCB3ZSBzaG91bGQKICAgICAgICAgICAgIyByZXR1cm4gdGhlIGNvbm5lY3Rpb24gYmFjayB0byB0aGUgcG9vbC4KICAgICAgICAgICAgaWYgc2VsZi5fb3JpZ2luYWxfcmVzcG9uc2UgYW5kIHNlbGYuX29yaWdpbmFsX3Jlc3BvbnNlLmlzY2xvc2VkKCk6CiAgICAgICAgICAgICAgICBzZWxmLnJlbGVhc2VfY29ubigpCgogICAgZGVmIHJlYWQoc2VsZiwgYW10PU5vbmUsIGRlY29kZV9jb250ZW50PU5vbmUsIGNhY2hlX2NvbnRlbnQ9RmFsc2UpOgogICAgICAgIFwiXCJcIgogICAgICAgIFNpbWlsYXIgdG8gOm1ldGg6YGh0dHAuY2xpZW50LkhUVFBSZXNwb25zZS5yZWFkYCwgYnV0IHdpdGggdHdvIGFkZGl0aW9uYWwKICAgICAgICBwYXJhbWV0ZXJzOiBgYGRlY29kZV9jb250ZW50YGAgYW5kIGBgY2FjaGVfY29udGVudGBgLgoKICAgICAgICA6cGFyYW0gYW10OgogICAgICAgICAgICBIb3cgbXVjaCBvZiB0aGUgY29udGVudCB0byByZWFkLiBJZiBzcGVjaWZpZWQsIGNhY2hpbmcgaXMgc2tpcHBlZAogICAgICAgICAgICBiZWNhdXNlIGl0IGRvZXNuJ3QgbWFrZSBzZW5zZSB0byBjYWNoZSBwYXJ0aWFsIGNvbnRlbnQgYXMgdGhlIGZ1bGwKICAgICAgICAgICAgcmVzcG9uc2UuCgogICAgICAgIDpwYXJhbSBkZWNvZGVfY29udGVudDoKICAgICAgICAgICAgSWYgVHJ1ZSwgd2lsbCBhdHRlbXB0IHRvIGRlY29kZSB0aGUgYm9keSBiYXNlZCBvbiB0aGUKICAgICAgICAgICAgJ2NvbnRlbnQtZW5jb2RpbmcnIGhlYWRlci4KCiAgICAgICAgOnBhcmFtIGNhY2hlX2NvbnRlbnQ6CiAgICAgICAgICAgIElmIFRydWUsIHdpbGwgc2F2ZSB0aGUgcmV0dXJuZWQgZGF0YSBzdWNoIHRoYXQgdGhlIHNhbWUgcmVzdWx0IGlzCiAgICAgICAgICAgIHJldHVybmVkIGRlc3BpdGUgb2YgdGhlIHN0YXRlIG9mIHRoZSB1bmRlcmx5aW5nIGZpbGUgb2JqZWN0LiBUaGlzCiAgICAgICAgICAgIGlzIHVzZWZ1bCBpZiB5b3Ugd2FudCB0aGUgYGAuZGF0YWBgIHByb3BlcnR5IHRvIGNvbnRpbnVlIHdvcmtpbmcKICAgICAgICAgICAgYWZ0ZXIgaGF2aW5nIGBgLnJlYWQoKWBgIHRoZSBmaWxlIG9iamVjdC4gKE92ZXJyaWRkZW4gaWYgYGBhbXRgYCBpcwogICAgICAgICAgICBzZXQuKQogICAgICAgIFwiXCJcIgogICAgICAgIHNlbGYuX2luaXRfZGVjb2RlcigpCiAgICAgICAgaWYgZGVjb2RlX2NvbnRlbnQgaXMgTm9uZToKICAgICAgICAgICAgZGVjb2RlX2NvbnRlbnQgPSBzZWxmLmRlY29kZV9jb250ZW50CgogICAgICAgIGlmIHNlbGYuX2ZwIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBmbHVzaF9kZWNvZGVyID0gRmFsc2UKICAgICAgICBmcF9jbG9zZWQgPSBnZXRhdHRyKHNlbGYuX2ZwLCBcImNsb3NlZFwiLCBGYWxzZSkKCiAgICAgICAgd2l0aCBzZWxmLl9lcnJvcl9jYXRjaGVyKCk6CiAgICAgICAgICAgIGlmIGFtdCBpcyBOb25lOgogICAgICAgICAgICAgICAgIyBjU3RyaW5nSU8gZG9lc24ndCBsaWtlIGFtdD1Ob25lCiAgICAgICAgICAgICAgICBkYXRhID0gc2VsZi5fZnAucmVhZCgpIGlmIG5vdCBmcF9jbG9zZWQgZWxzZSBiXCJcIgogICAgICAgICAgICAgICAgZmx1c2hfZGVjb2RlciA9IFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGNhY2hlX2NvbnRlbnQgPSBGYWxzZQogICAgICAgICAgICAgICAgZGF0YSA9IHNlbGYuX2ZwLnJlYWQoYW10KSBpZiBub3QgZnBfY2xvc2VkIGVsc2UgYlwiXCIKICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICBhbXQgIT0gMCBhbmQgbm90IGRhdGEKICAgICAgICAgICAgICAgICk6ICAjIFBsYXRmb3JtLXNwZWNpZmljOiBCdWdneSB2ZXJzaW9ucyBvZiBQeXRob24uCiAgICAgICAgICAgICAgICAgICAgIyBDbG9zZSB0aGUgY29ubmVjdGlvbiB3aGVuIG5vIGRhdGEgaXMgcmV0dXJuZWQKICAgICAgICAgICAgICAgICAgICAjCiAgICAgICAgICAgICAgICAgICAgIyBUaGlzIGlzIHJlZHVuZGFudCB0byB3aGF0IGh0dHBsaWIvaHR0cC5jbGllbnQgX3Nob3VsZF8KICAgICAgICAgICAgICAgICAgICAjIGFscmVhZHkgZG8uICBIb3dldmVyLCB2ZXJzaW9ucyBvZiBweXRob24gcmVsZWFzZWQgYmVmb3JlCiAgICAgICAgICAgICAgICAgICAgIyBEZWNlbWJlciAxNSwgMjAxMiAoaHR0cDovL2J1Z3MucHl0aG9uLm9yZy9pc3N1ZTE2Mjk4KSBkbwogICAgICAgICAgICAgICAgICAgICMgbm90IHByb3Blcmx5IGNsb3NlIHRoZSBjb25uZWN0aW9uIGluIGFsbCBjYXNlcy4gVGhlcmUgaXMKICAgICAgICAgICAgICAgICAgICAjIG5vIGhhcm0gaW4gcmVkdW5kYW50bHkgY2FsbGluZyBjbG9zZS4KICAgICAgICAgICAgICAgICAgICBzZWxmLl9mcC5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgZmx1c2hfZGVjb2RlciA9IFRydWUKICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLmVuZm9yY2VfY29udGVudF9sZW5ndGggYW5kIHNlbGYubGVuZ3RoX3JlbWFpbmluZyBub3QgaW4gKAogICAgICAgICAgICAgICAgICAgICAgICAwLAogICAgICAgICAgICAgICAgICAgICAgICBOb25lLAogICAgICAgICAgICAgICAgICAgICk6CiAgICAgICAgICAgICAgICAgICAgICAgICMgVGhpcyBpcyBhbiBlZGdlIGNhc2UgdGhhdCBodHRwbGliIGZhaWxlZCB0byBjb3ZlciBkdWUKICAgICAgICAgICAgICAgICAgICAgICAgIyB0byBjb25jZXJucyBvZiBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LiBXZSdyZQogICAgICAgICAgICAgICAgICAgICAgICAjIGFkZHJlc3NpbmcgaXQgaGVyZSB0byBtYWtlIHN1cmUgSW5jb21wbGV0ZVJlYWQgaXMKICAgICAgICAgICAgICAgICAgICAgICAgIyByYWlzZWQgZHVyaW5nIHN0cmVhbWluZywgc28gYWxsIGNhbGxzIHdpdGggaW5jb3JyZWN0CiAgICAgICAgICAgICAgICAgICAgICAgICMgQ29udGVudC1MZW5ndGggYXJlIGNhdWdodC4KICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgSW5jb21wbGV0ZVJlYWQoc2VsZi5fZnBfYnl0ZXNfcmVhZCwgc2VsZi5sZW5ndGhfcmVtYWluaW5nKQoKICAgICAgICBpZiBkYXRhOgogICAgICAgICAgICBzZWxmLl9mcF9ieXRlc19yZWFkICs9IGxlbihkYXRhKQogICAgICAgICAgICBpZiBzZWxmLmxlbmd0aF9yZW1haW5pbmcgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICBzZWxmLmxlbmd0aF9yZW1haW5pbmcgLT0gbGVuKGRhdGEpCgogICAgICAgICAgICBkYXRhID0gc2VsZi5fZGVjb2RlKGRhdGEsIGRlY29kZV9jb250ZW50LCBmbHVzaF9kZWNvZGVyKQoKICAgICAgICAgICAgaWYgY2FjaGVfY29udGVudDoKICAgICAgICAgICAgICAgIHNlbGYuX2JvZHkgPSBkYXRhCgogICAgICAgIHJldHVybiBkYXRhCgogICAgZGVmIHN0cmVhbShzZWxmLCBhbXQ9MiAqKiAxNiwgZGVjb2RlX2NvbnRlbnQ9Tm9uZSk6CiAgICAgICAgXCJcIlwiCiAgICAgICAgQSBnZW5lcmF0b3Igd3JhcHBlciBmb3IgdGhlIHJlYWQoKSBtZXRob2QuIEEgY2FsbCB3aWxsIGJsb2NrIHVudGlsCiAgICAgICAgYGBhbXRgYCBieXRlcyBoYXZlIGJlZW4gcmVhZCBmcm9tIHRoZSBjb25uZWN0aW9uIG9yIHVudGlsIHRoZQogICAgICAgIGNvbm5lY3Rpb24gaXMgY2xvc2VkLgoKICAgICAgICA6cGFyYW0gYW10OgogICAgICAgICAgICBIb3cgbXVjaCBvZiB0aGUgY29udGVudCB0byByZWFkLiBUaGUgZ2VuZXJhdG9yIHdpbGwgcmV0dXJuIHVwIHRvCiAgICAgICAgICAgIG11Y2ggZGF0YSBwZXIgaXRlcmF0aW9uLCBidXQgbWF5IHJldHVybiBsZXNzLiBUaGlzIGlzIHBhcnRpY3VsYXJseQogICAgICAgICAgICBsaWtlbHkgd2hlbiB1c2luZyBjb21wcmVzc2VkIGRhdGEuIEhvd2V2ZXIsIHRoZSBlbXB0eSBzdHJpbmcgd2lsbAogICAgICAgICAgICBuZXZlciBiZSByZXR1cm5lZC4KCiAgICAgICAgOnBhcmFtIGRlY29kZV9jb250ZW50OgogICAgICAgICAgICBJZiBUcnVlLCB3aWxsIGF0dGVtcHQgdG8gZGVjb2RlIHRoZSBib2R5IGJhc2VkIG9uIHRoZQogICAgICAgICAgICAnY29udGVudC1lbmNvZGluZycgaGVhZGVyLgogICAgICAgIFwiXCJcIgogICAgICAgIGlmIHNlbGYuY2h1bmtlZCBhbmQgc2VsZi5zdXBwb3J0c19jaHVua2VkX3JlYWRzKCk6CiAgICAgICAgICAgIGZvciBsaW5lIGluIHNlbGYucmVhZF9jaHVua2VkKGFtdCwgZGVjb2RlX2NvbnRlbnQ9ZGVjb2RlX2NvbnRlbnQpOgogICAgICAgICAgICAgICAgeWllbGQgbGluZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHdoaWxlIG5vdCBpc19mcF9jbG9zZWQoc2VsZi5fZnApOgogICAgICAgICAgICAgICAgZGF0YSA9IHNlbGYucmVhZChhbXQ9YW10LCBkZWNvZGVfY29udGVudD1kZWNvZGVfY29udGVudCkKCiAgICAgICAgICAgICAgICBpZiBkYXRhOgogICAgICAgICAgICAgICAgICAgIHlpZWxkIGRhdGEKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBmcm9tX2h0dHBsaWIoUmVzcG9uc2VDbHMsIHIsICoqcmVzcG9uc2Vfa3cpOgogICAgICAgIFwiXCJcIgogICAgICAgIEdpdmVuIGFuIDpjbGFzczpgaHR0cC5jbGllbnQuSFRUUFJlc3BvbnNlYCBpbnN0YW5jZSBgYHJgYCwgcmV0dXJuIGEKICAgICAgICBjb3JyZXNwb25kaW5nIDpjbGFzczpgdXJsbGliMy5yZXNwb25zZS5IVFRQUmVzcG9uc2VgIG9iamVjdC4KCiAgICAgICAgUmVtYWluaW5nIHBhcmFtZXRlcnMgYXJlIHBhc3NlZCB0byB0aGUgSFRUUFJlc3BvbnNlIGNvbnN0cnVjdG9yLCBhbG9uZwogICAgICAgIHdpdGggYGBvcmlnaW5hbF9yZXNwb25zZT1yYGAuCiAgICAgICAgXCJcIlwiCiAgICAgICAgaGVhZGVycyA9IHIubXNnCgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGhlYWRlcnMsIEhUVFBIZWFkZXJEaWN0KToKICAgICAgICAgICAgaWYgc2l4LlBZMjoKICAgICAgICAgICAgICAgICMgUHl0aG9uIDIuNwogICAgICAgICAgICAgICAgaGVhZGVycyA9IEhUVFBIZWFkZXJEaWN0LmZyb21faHR0cGxpYihoZWFkZXJzKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaGVhZGVycyA9IEhUVFBIZWFkZXJEaWN0KGhlYWRlcnMuaXRlbXMoKSkKCiAgICAgICAgIyBIVFRQUmVzcG9uc2Ugb2JqZWN0cyBpbiBQeXRob24gMyBkb24ndCBoYXZlIGEgLnN0cmljdCBhdHRyaWJ1dGUKICAgICAgICBzdHJpY3QgPSBnZXRhdHRyKHIsIFwic3RyaWN0XCIsIDApCiAgICAgICAgcmVzcCA9IFJlc3BvbnNlQ2xzKAogICAgICAgICAgICBib2R5PXIsCiAgICAgICAgICAgIGhlYWRlcnM9aGVhZGVycywKICAgICAgICAgICAgc3RhdHVzPXIuc3RhdHVzLAogICAgICAgICAgICB2ZXJzaW9uPXIudmVyc2lvbiwKICAgICAgICAgICAgcmVhc29uPXIucmVhc29uLAogICAgICAgICAgICBzdHJpY3Q9c3RyaWN0LAogICAgICAgICAgICBvcmlnaW5hbF9yZXNwb25zZT1yLAogICAgICAgICAgICAqKnJlc3BvbnNlX2t3CiAgICAgICAgKQogICAgICAgIHJldHVybiByZXNwCgogICAgIyBCYWNrd2FyZHMtY29tcGF0aWJpbGl0eSBtZXRob2RzIGZvciBodHRwLmNsaWVudC5IVFRQUmVzcG9uc2UKICAgIGRlZiBnZXRoZWFkZXJzKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmhlYWRlcnMKCiAgICBkZWYgZ2V0aGVhZGVyKHNlbGYsIG5hbWUsIGRlZmF1bHQ9Tm9uZSk6CiAgICAgICAgcmV0dXJuIHNlbGYuaGVhZGVycy5nZXQobmFtZSwgZGVmYXVsdCkKCiAgICAjIEJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IGZvciBodHRwLmNvb2tpZWphcgogICAgZGVmIGluZm8oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuaGVhZGVycwoKICAgICMgT3ZlcnJpZGVzIGZyb20gaW8uSU9CYXNlCiAgICBkZWYgY2xvc2Uoc2VsZik6CiAgICAgICAgaWYgbm90IHNlbGYuY2xvc2VkOgogICAgICAgICAgICBzZWxmLl9mcC5jbG9zZSgpCgogICAgICAgIGlmIHNlbGYuX2Nvbm5lY3Rpb246CiAgICAgICAgICAgIHNlbGYuX2Nvbm5lY3Rpb24uY2xvc2UoKQoKICAgICAgICBpZiBub3Qgc2VsZi5hdXRvX2Nsb3NlOgogICAgICAgICAgICBpby5JT0Jhc2UuY2xvc2Uoc2VsZikKCiAgICBAcHJvcGVydHkKICAgIGRlZiBjbG9zZWQoc2VsZik6CiAgICAgICAgaWYgbm90IHNlbGYuYXV0b19jbG9zZToKICAgICAgICAgICAgcmV0dXJuIGlvLklPQmFzZS5jbG9zZWQuX19nZXRfXyhzZWxmKQogICAgICAgIGVsaWYgc2VsZi5fZnAgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBlbGlmIGhhc2F0dHIoc2VsZi5fZnAsIFwiaXNjbG9zZWRcIik6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9mcC5pc2Nsb3NlZCgpCiAgICAgICAgZWxpZiBoYXNhdHRyKHNlbGYuX2ZwLCBcImNsb3NlZFwiKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2ZwLmNsb3NlZAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBUcnVlCgogICAgZGVmIGZpbGVubyhzZWxmKToKICAgICAgICBpZiBzZWxmLl9mcCBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBJT0Vycm9yKFwiSFRUUFJlc3BvbnNlIGhhcyBubyBmaWxlIHRvIGdldCBhIGZpbGVubyBmcm9tXCIpCiAgICAgICAgZWxpZiBoYXNhdHRyKHNlbGYuX2ZwLCBcImZpbGVub1wiKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2ZwLmZpbGVubygpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgSU9FcnJvcigKICAgICAgICAgICAgICAgIFwiVGhlIGZpbGUtbGlrZSBvYmplY3QgdGhpcyBIVFRQUmVzcG9uc2UgaXMgd3JhcHBlZCBcIgogICAgICAgICAgICAgICAgXCJhcm91bmQgaGFzIG5vIGZpbGUgZGVzY3JpcHRvclwiCiAgICAgICAgICAgICkKCiAgICBkZWYgZmx1c2goc2VsZik6CiAgICAgICAgaWYgKAogICAgICAgICAgICBzZWxmLl9mcCBpcyBub3QgTm9uZQogICAgICAgICAgICBhbmQgaGFzYXR0cihzZWxmLl9mcCwgXCJmbHVzaFwiKQogICAgICAgICAgICBhbmQgbm90IGdldGF0dHIoc2VsZi5fZnAsIFwiY2xvc2VkXCIsIEZhbHNlKQogICAgICAgICk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9mcC5mbHVzaCgpCgogICAgZGVmIHJlYWRhYmxlKHNlbGYpOgogICAgICAgICMgVGhpcyBtZXRob2QgaXMgcmVxdWlyZWQgZm9yIGBpb2AgbW9kdWxlIGNvbXBhdGliaWxpdHkuCiAgICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYgcmVhZGludG8oc2VsZiwgYik6CiAgICAgICAgIyBUaGlzIG1ldGhvZCBpcyByZXF1aXJlZCBmb3IgYGlvYCBtb2R1bGUgY29tcGF0aWJpbGl0eS4KICAgICAgICB0ZW1wID0gc2VsZi5yZWFkKGxlbihiKSkKICAgICAgICBpZiBsZW4odGVtcCkgPT0gMDoKICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICBlbHNlOgogICAgICAgICAgICBiWzogbGVuKHRlbXApXSA9IHRlbXAKICAgICAgICAgICAgcmV0dXJuIGxlbih0ZW1wKQoKICAgIGRlZiBzdXBwb3J0c19jaHVua2VkX3JlYWRzKHNlbGYpOgogICAgICAgIFwiXCJcIgogICAgICAgIENoZWNrcyBpZiB0aGUgdW5kZXJseWluZyBmaWxlLWxpa2Ugb2JqZWN0IGxvb2tzIGxpa2UgYQogICAgICAgIDpjbGFzczpgaHR0cC5jbGllbnQuSFRUUFJlc3BvbnNlYCBvYmplY3QuIFdlIGRvIHRoaXMgYnkgdGVzdGluZyBmb3IKICAgICAgICB0aGUgZnAgYXR0cmlidXRlLiBJZiBpdCBpcyBwcmVzZW50IHdlIGFzc3VtZSBpdCByZXR1cm5zIHJhdyBjaHVua3MgYXMKICAgICAgICBwcm9jZXNzZWQgYnkgcmVhZF9jaHVua2VkKCkuCiAgICAgICAgXCJcIlwiCiAgICAgICAgcmV0dXJuIGhhc2F0dHIoc2VsZi5fZnAsIFwiZnBcIikKCiAgICBkZWYgX3VwZGF0ZV9jaHVua19sZW5ndGgoc2VsZik6CiAgICAgICAgIyBGaXJzdCwgd2UnbGwgZmlndXJlIG91dCBsZW5ndGggb2YgYSBjaHVuayBhbmQgdGhlbgogICAgICAgICMgd2UnbGwgdHJ5IHRvIHJlYWQgaXQgZnJvbSBzb2NrZXQuCiAgICAgICAgaWYgc2VsZi5jaHVua19sZWZ0IGlzIG5vdCBOb25lOgogICAgICAgICAgICByZXR1cm4KICAgICAgICBsaW5lID0gc2VsZi5fZnAuZnAucmVhZGxpbmUoKQogICAgICAgIGxpbmUgPSBsaW5lLnNwbGl0KGJcIjtcIiwgMSlbMF0KICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuY2h1bmtfbGVmdCA9IGludChsaW5lLCAxNikKICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICAgICAgIyBJbnZhbGlkIGNodW5rZWQgcHJvdG9jb2wgcmVzcG9uc2UsIGFib3J0LgogICAgICAgICAgICBzZWxmLmNsb3NlKCkKICAgICAgICAgICAgcmFpc2UgSW52YWxpZENodW5rTGVuZ3RoKHNlbGYsIGxpbmUpCgogICAgZGVmIF9oYW5kbGVfY2h1bmsoc2VsZiwgYW10KToKICAgICAgICByZXR1cm5lZF9jaHVuayA9IE5vbmUKICAgICAgICBpZiBhbXQgaXMgTm9uZToKICAgICAgICAgICAgY2h1bmsgPSBzZWxmLl9mcC5fc2FmZV9yZWFkKHNlbGYuY2h1bmtfbGVmdCkKICAgICAgICAgICAgcmV0dXJuZWRfY2h1bmsgPSBjaHVuawogICAgICAgICAgICBzZWxmLl9mcC5fc2FmZV9yZWFkKDIpICAjIFRvc3MgdGhlIENSTEYgYXQgdGhlIGVuZCBvZiB0aGUgY2h1bmsuCiAgICAgICAgICAgIHNlbGYuY2h1bmtfbGVmdCA9IE5vbmUKICAgICAgICBlbGlmIGFtdCA8IHNlbGYuY2h1bmtfbGVmdDoKICAgICAgICAgICAgdmFsdWUgPSBzZWxmLl9mcC5fc2FmZV9yZWFkKGFtdCkKICAgICAgICAgICAgc2VsZi5jaHVua19sZWZ0ID0gc2VsZi5jaHVua19sZWZ0IC0gYW10CiAgICAgICAgICAgIHJldHVybmVkX2NodW5rID0gdmFsdWUKICAgICAgICBlbGlmIGFtdCA9PSBzZWxmLmNodW5rX2xlZnQ6CiAgICAgICAgICAgIHZhbHVlID0gc2VsZi5fZnAuX3NhZmVfcmVhZChhbXQpCiAgICAgICAgICAgIHNlbGYuX2ZwLl9zYWZlX3JlYWQoMikgICMgVG9zcyB0aGUgQ1JMRiBhdCB0aGUgZW5kIG9mIHRoZSBjaHVuay4KICAgICAgICAgICAgc2VsZi5jaHVua19sZWZ0ID0gTm9uZQogICAgICAgICAgICByZXR1cm5lZF9jaHVuayA9IHZhbHVlCiAgICAgICAgZWxzZTogICMgYW10ID4gc2VsZi5jaHVua19sZWZ0CiAgICAgICAgICAgIHJldHVybmVkX2NodW5rID0gc2VsZi5fZnAuX3NhZmVfcmVhZChzZWxmLmNodW5rX2xlZnQpCiAgICAgICAgICAgIHNlbGYuX2ZwLl9zYWZlX3JlYWQoMikgICMgVG9zcyB0aGUgQ1JMRiBhdCB0aGUgZW5kIG9mIHRoZSBjaHVuay4KICAgICAgICAgICAgc2VsZi5jaHVua19sZWZ0ID0gTm9uZQogICAgICAgIHJldHVybiByZXR1cm5lZF9jaHVuawoKICAgIGRlZiByZWFkX2NodW5rZWQoc2VsZiwgYW10PU5vbmUsIGRlY29kZV9jb250ZW50PU5vbmUpOgogICAgICAgIFwiXCJcIgogICAgICAgIFNpbWlsYXIgdG8gOm1ldGg6YEhUVFBSZXNwb25zZS5yZWFkYCwgYnV0IHdpdGggYW4gYWRkaXRpb25hbAogICAgICAgIHBhcmFtZXRlcjogYGBkZWNvZGVfY29udGVudGBgLgoKICAgICAgICA6cGFyYW0gYW10OgogICAgICAgICAgICBIb3cgbXVjaCBvZiB0aGUgY29udGVudCB0byByZWFkLiBJZiBzcGVjaWZpZWQsIGNhY2hpbmcgaXMgc2tpcHBlZAogICAgICAgICAgICBiZWNhdXNlIGl0IGRvZXNuJ3QgbWFrZSBzZW5zZSB0byBjYWNoZSBwYXJ0aWFsIGNvbnRlbnQgYXMgdGhlIGZ1bGwKICAgICAgICAgICAgcmVzcG9uc2UuCgogICAgICAgIDpwYXJhbSBkZWNvZGVfY29udGVudDoKICAgICAgICAgICAgSWYgVHJ1ZSwgd2lsbCBhdHRlbXB0IHRvIGRlY29kZSB0aGUgYm9keSBiYXNlZCBvbiB0aGUKICAgICAgICAgICAgJ2NvbnRlbnQtZW5jb2RpbmcnIGhlYWRlci4KICAgICAgICBcIlwiXCIKICAgICAgICBzZWxmLl9pbml0X2RlY29kZXIoKQogICAgICAgICMgRklYTUU6IFJld3JpdGUgdGhpcyBtZXRob2QgYW5kIG1ha2UgaXQgYSBjbGFzcyB3aXRoIGEgYmV0dGVyIHN0cnVjdHVyZWQgbG9naWMuCiAgICAgICAgaWYgbm90IHNlbGYuY2h1bmtlZDoKICAgICAgICAgICAgcmFpc2UgUmVzcG9uc2VOb3RDaHVua2VkKAogICAgICAgICAgICAgICAgXCJSZXNwb25zZSBpcyBub3QgY2h1bmtlZC4gXCIKICAgICAgICAgICAgICAgIFwiSGVhZGVyICd0cmFuc2Zlci1lbmNvZGluZzogY2h1bmtlZCcgaXMgbWlzc2luZy5cIgogICAgICAgICAgICApCiAgICAgICAgaWYgbm90IHNlbGYuc3VwcG9ydHNfY2h1bmtlZF9yZWFkcygpOgogICAgICAgICAgICByYWlzZSBCb2R5Tm90SHR0cGxpYkNvbXBhdGlibGUoCiAgICAgICAgICAgICAgICBcIkJvZHkgc2hvdWxkIGJlIGh0dHAuY2xpZW50LkhUVFBSZXNwb25zZSBsaWtlLiBcIgogICAgICAgICAgICAgICAgXCJJdCBzaG91bGQgaGF2ZSBoYXZlIGFuIGZwIGF0dHJpYnV0ZSB3aGljaCByZXR1cm5zIHJhdyBjaHVua3MuXCIKICAgICAgICAgICAgKQoKICAgICAgICB3aXRoIHNlbGYuX2Vycm9yX2NhdGNoZXIoKToKICAgICAgICAgICAgIyBEb24ndCBib3RoZXIgcmVhZGluZyB0aGUgYm9keSBvZiBhIEhFQUQgcmVxdWVzdC4KICAgICAgICAgICAgaWYgc2VsZi5fb3JpZ2luYWxfcmVzcG9uc2UgYW5kIGlzX3Jlc3BvbnNlX3RvX2hlYWQoc2VsZi5fb3JpZ2luYWxfcmVzcG9uc2UpOgogICAgICAgICAgICAgICAgc2VsZi5fb3JpZ2luYWxfcmVzcG9uc2UuY2xvc2UoKQogICAgICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICAgICAjIElmIGEgcmVzcG9uc2UgaXMgYWxyZWFkeSByZWFkIGFuZCBjbG9zZWQKICAgICAgICAgICAgIyB0aGVuIHJldHVybiBpbW1lZGlhdGVseS4KICAgICAgICAgICAgaWYgc2VsZi5fZnAuZnAgaXMgTm9uZToKICAgICAgICAgICAgICAgIHJldHVybgoKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIHNlbGYuX3VwZGF0ZV9jaHVua19sZW5ndGgoKQogICAgICAgICAgICAgICAgaWYgc2VsZi5jaHVua19sZWZ0ID09IDA6CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGNodW5rID0gc2VsZi5faGFuZGxlX2NodW5rKGFtdCkKICAgICAgICAgICAgICAgIGRlY29kZWQgPSBzZWxmLl9kZWNvZGUoCiAgICAgICAgICAgICAgICAgICAgY2h1bmssIGRlY29kZV9jb250ZW50PWRlY29kZV9jb250ZW50LCBmbHVzaF9kZWNvZGVyPUZhbHNlCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBpZiBkZWNvZGVkOgogICAgICAgICAgICAgICAgICAgIHlpZWxkIGRlY29kZWQKCiAgICAgICAgICAgIGlmIGRlY29kZV9jb250ZW50OgogICAgICAgICAgICAgICAgIyBPbiBDUHl0aG9uIGFuZCBQeVB5LCB3ZSBzaG91bGQgbmV2ZXIgbmVlZCB0byBmbHVzaCB0aGUKICAgICAgICAgICAgICAgICMgZGVjb2Rlci4gSG93ZXZlciwgb24gSnl0aG9uIHdlICptaWdodCogbmVlZCB0bywgc28KICAgICAgICAgICAgICAgICMgbGV0cyBkZWZlbnNpdmVseSBkbyBpdCBhbnl3YXkuCiAgICAgICAgICAgICAgICBkZWNvZGVkID0gc2VsZi5fZmx1c2hfZGVjb2RlcigpCiAgICAgICAgICAgICAgICBpZiBkZWNvZGVkOiAgIyBQbGF0Zm9ybS1zcGVjaWZpYzogSnl0aG9uLgogICAgICAgICAgICAgICAgICAgIHlpZWxkIGRlY29kZWQKCiAgICAgICAgICAgICMgQ2h1bmsgY29udGVudCBlbmRzIHdpdGggXFxyXFxuOiBkaXNjYXJkIGl0LgogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgbGluZSA9IHNlbGYuX2ZwLmZwLnJlYWRsaW5lKCkKICAgICAgICAgICAgICAgIGlmIG5vdCBsaW5lOgogICAgICAgICAgICAgICAgICAgICMgU29tZSBzaXRlcyBtYXkgbm90IGVuZCB3aXRoICdcXHJcXG4nLgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBpZiBsaW5lID09IGJcIlxcclxcblwiOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICAjIFdlIHJlYWQgZXZlcnl0aGluZzsgY2xvc2UgdGhlIFwiZmlsZVwiLgogICAgICAgICAgICBpZiBzZWxmLl9vcmlnaW5hbF9yZXNwb25zZToKICAgICAgICAgICAgICAgIHNlbGYuX29yaWdpbmFsX3Jlc3BvbnNlLmNsb3NlKCkKCiAgICBkZWYgZ2V0dXJsKHNlbGYpOgogICAgICAgIFwiXCJcIgogICAgICAgIFJldHVybnMgdGhlIFVSTCB0aGF0IHdhcyB0aGUgc291cmNlIG9mIHRoaXMgcmVzcG9uc2UuCiAgICAgICAgSWYgdGhlIHJlcXVlc3QgdGhhdCBnZW5lcmF0ZWQgdGhpcyByZXNwb25zZSByZWRpcmVjdGVkLCB0aGlzIG1ldGhvZAogICAgICAgIHdpbGwgcmV0dXJuIHRoZSBmaW5hbCByZWRpcmVjdCBsb2NhdGlvbi4KICAgICAgICBcIlwiXCIKICAgICAgICBpZiBzZWxmLnJldHJpZXMgaXMgbm90IE5vbmUgYW5kIGxlbihzZWxmLnJldHJpZXMuaGlzdG9yeSk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLnJldHJpZXMuaGlzdG9yeVstMV0ucmVkaXJlY3RfbG9jYXRpb24KICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fcmVxdWVzdF91cmwKCiAgICBkZWYgX19pdGVyX18oc2VsZik6CiAgICAgICAgYnVmZmVyID0gW10KICAgICAgICBmb3IgY2h1bmsgaW4gc2VsZi5zdHJlYW0oZGVjb2RlX2NvbnRlbnQ9VHJ1ZSk6CiAgICAgICAgICAgIGlmIGJcIlxcblwiIGluIGNodW5rOgogICAgICAgICAgICAgICAgY2h1bmsgPSBjaHVuay5zcGxpdChiXCJcXG5cIikKICAgICAgICAgICAgICAgIHlpZWxkIGJcIlwiLmpvaW4oYnVmZmVyKSArIGNodW5rWzBdICsgYlwiXFxuXCIKICAgICAgICAgICAgICAgIGZvciB4IGluIGNodW5rWzE6LTFdOgogICAgICAgICAgICAgICAgICAgIHlpZWxkIHggKyBiXCJcXG5cIgogICAgICAgICAgICAgICAgaWYgY2h1bmtbLTFdOgogICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IFtjaHVua1stMV1dCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IFtdCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBidWZmZXIuYXBwZW5kKGNodW5rKQogICAgICAgIGlmIGJ1ZmZlcjoKICAgICAgICAgICAgeWllbGQgYlwiXCIuam9pbihidWZmZXIpCgoiIiIKbW9kdWxlX2RpY3RbInVybGxpYjMiK29zLnNlcCsiZXhjZXB0aW9ucy5weSJdPSIiIgpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFic29sdXRlX2ltcG9ydAoKZnJvbSAucGFja2FnZXMuc2l4Lm1vdmVzLmh0dHBfY2xpZW50IGltcG9ydCBJbmNvbXBsZXRlUmVhZCBhcyBodHRwbGliX0luY29tcGxldGVSZWFkCgojIEJhc2UgRXhjZXB0aW9ucwoKCmNsYXNzIEhUVFBFcnJvcihFeGNlcHRpb24pOgogICAgXCJcIlwiQmFzZSBleGNlcHRpb24gdXNlZCBieSB0aGlzIG1vZHVsZS5cIlwiXCIKCiAgICBwYXNzCgoKY2xhc3MgSFRUUFdhcm5pbmcoV2FybmluZyk6CiAgICBcIlwiXCJCYXNlIHdhcm5pbmcgdXNlZCBieSB0aGlzIG1vZHVsZS5cIlwiXCIKCiAgICBwYXNzCgoKY2xhc3MgUG9vbEVycm9yKEhUVFBFcnJvcik6CiAgICBcIlwiXCJCYXNlIGV4Y2VwdGlvbiBmb3IgZXJyb3JzIGNhdXNlZCB3aXRoaW4gYSBwb29sLlwiXCJcIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBwb29sLCBtZXNzYWdlKToKICAgICAgICBzZWxmLnBvb2wgPSBwb29sCiAgICAgICAgSFRUUEVycm9yLl9faW5pdF9fKHNlbGYsIFwiJXM6ICVzXCIgJSAocG9vbCwgbWVzc2FnZSkpCgogICAgZGVmIF9fcmVkdWNlX18oc2VsZik6CiAgICAgICAgIyBGb3IgcGlja2xpbmcgcHVycG9zZXMuCiAgICAgICAgcmV0dXJuIHNlbGYuX19jbGFzc19fLCAoTm9uZSwgTm9uZSkKCgpjbGFzcyBSZXF1ZXN0RXJyb3IoUG9vbEVycm9yKToKICAgIFwiXCJcIkJhc2UgZXhjZXB0aW9uIGZvciBQb29sRXJyb3JzIHRoYXQgaGF2ZSBhc3NvY2lhdGVkIFVSTHMuXCJcIlwiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHBvb2wsIHVybCwgbWVzc2FnZSk6CiAgICAgICAgc2VsZi51cmwgPSB1cmwKICAgICAgICBQb29sRXJyb3IuX19pbml0X18oc2VsZiwgcG9vbCwgbWVzc2FnZSkKCiAgICBkZWYgX19yZWR1Y2VfXyhzZWxmKToKICAgICAgICAjIEZvciBwaWNrbGluZyBwdXJwb3Nlcy4KICAgICAgICByZXR1cm4gc2VsZi5fX2NsYXNzX18sIChOb25lLCBzZWxmLnVybCwgTm9uZSkKCgpjbGFzcyBTU0xFcnJvcihIVFRQRXJyb3IpOgogICAgXCJcIlwiUmFpc2VkIHdoZW4gU1NMIGNlcnRpZmljYXRlIGZhaWxzIGluIGFuIEhUVFBTIGNvbm5lY3Rpb24uXCJcIlwiCgogICAgcGFzcwoKCmNsYXNzIFByb3h5RXJyb3IoSFRUUEVycm9yKToKICAgIFwiXCJcIlJhaXNlZCB3aGVuIHRoZSBjb25uZWN0aW9uIHRvIGEgcHJveHkgZmFpbHMuXCJcIlwiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG1lc3NhZ2UsIGVycm9yLCAqYXJncyk6CiAgICAgICAgc3VwZXIoUHJveHlFcnJvciwgc2VsZikuX19pbml0X18obWVzc2FnZSwgZXJyb3IsICphcmdzKQogICAgICAgIHNlbGYub3JpZ2luYWxfZXJyb3IgPSBlcnJvcgoKCmNsYXNzIERlY29kZUVycm9yKEhUVFBFcnJvcik6CiAgICBcIlwiXCJSYWlzZWQgd2hlbiBhdXRvbWF0aWMgZGVjb2RpbmcgYmFzZWQgb24gQ29udGVudC1UeXBlIGZhaWxzLlwiXCJcIgoKICAgIHBhc3MKCgpjbGFzcyBQcm90b2NvbEVycm9yKEhUVFBFcnJvcik6CiAgICBcIlwiXCJSYWlzZWQgd2hlbiBzb21ldGhpbmcgdW5leHBlY3RlZCBoYXBwZW5zIG1pZC1yZXF1ZXN0L3Jlc3BvbnNlLlwiXCJcIgoKICAgIHBhc3MKCgojOiBSZW5hbWVkIHRvIFByb3RvY29sRXJyb3IgYnV0IGFsaWFzZWQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LgpDb25uZWN0aW9uRXJyb3IgPSBQcm90b2NvbEVycm9yCgoKIyBMZWFmIEV4Y2VwdGlvbnMKCgpjbGFzcyBNYXhSZXRyeUVycm9yKFJlcXVlc3RFcnJvcik6CiAgICBcIlwiXCJSYWlzZWQgd2hlbiB0aGUgbWF4aW11bSBudW1iZXIgb2YgcmV0cmllcyBpcyBleGNlZWRlZC4KCiAgICA6cGFyYW0gcG9vbDogVGhlIGNvbm5lY3Rpb24gcG9vbAogICAgOnR5cGUgcG9vbDogOmNsYXNzOmB+dXJsbGliMy5jb25uZWN0aW9ucG9vbC5IVFRQQ29ubmVjdGlvblBvb2xgCiAgICA6cGFyYW0gc3RyaW5nIHVybDogVGhlIHJlcXVlc3RlZCBVcmwKICAgIDpwYXJhbSBleGNlcHRpb25zLkV4Y2VwdGlvbiByZWFzb246IFRoZSB1bmRlcmx5aW5nIGVycm9yCgogICAgXCJcIlwiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHBvb2wsIHVybCwgcmVhc29uPU5vbmUpOgogICAgICAgIHNlbGYucmVhc29uID0gcmVhc29uCgogICAgICAgIG1lc3NhZ2UgPSBcIk1heCByZXRyaWVzIGV4Y2VlZGVkIHdpdGggdXJsOiAlcyAoQ2F1c2VkIGJ5ICVyKVwiICUgKHVybCwgcmVhc29uKQoKICAgICAgICBSZXF1ZXN0RXJyb3IuX19pbml0X18oc2VsZiwgcG9vbCwgdXJsLCBtZXNzYWdlKQoKCmNsYXNzIEhvc3RDaGFuZ2VkRXJyb3IoUmVxdWVzdEVycm9yKToKICAgIFwiXCJcIlJhaXNlZCB3aGVuIGFuIGV4aXN0aW5nIHBvb2wgZ2V0cyBhIHJlcXVlc3QgZm9yIGEgZm9yZWlnbiBob3N0LlwiXCJcIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBwb29sLCB1cmwsIHJldHJpZXM9Myk6CiAgICAgICAgbWVzc2FnZSA9IFwiVHJpZWQgdG8gb3BlbiBhIGZvcmVpZ24gaG9zdCB3aXRoIHVybDogJXNcIiAlIHVybAogICAgICAgIFJlcXVlc3RFcnJvci5fX2luaXRfXyhzZWxmLCBwb29sLCB1cmwsIG1lc3NhZ2UpCiAgICAgICAgc2VsZi5yZXRyaWVzID0gcmV0cmllcwoKCmNsYXNzIFRpbWVvdXRTdGF0ZUVycm9yKEhUVFBFcnJvcik6CiAgICBcIlwiXCJSYWlzZWQgd2hlbiBwYXNzaW5nIGFuIGludmFsaWQgc3RhdGUgdG8gYSB0aW1lb3V0XCJcIlwiCgogICAgcGFzcwoKCmNsYXNzIFRpbWVvdXRFcnJvcihIVFRQRXJyb3IpOgogICAgXCJcIlwiUmFpc2VkIHdoZW4gYSBzb2NrZXQgdGltZW91dCBlcnJvciBvY2N1cnMuCgogICAgQ2F0Y2hpbmcgdGhpcyBlcnJvciB3aWxsIGNhdGNoIGJvdGggOmV4YzpgUmVhZFRpbWVvdXRFcnJvcnMKICAgIDxSZWFkVGltZW91dEVycm9yPmAgYW5kIDpleGM6YENvbm5lY3RUaW1lb3V0RXJyb3JzIDxDb25uZWN0VGltZW91dEVycm9yPmAuCiAgICBcIlwiXCIKCiAgICBwYXNzCgoKY2xhc3MgUmVhZFRpbWVvdXRFcnJvcihUaW1lb3V0RXJyb3IsIFJlcXVlc3RFcnJvcik6CiAgICBcIlwiXCJSYWlzZWQgd2hlbiBhIHNvY2tldCB0aW1lb3V0IG9jY3VycyB3aGlsZSByZWNlaXZpbmcgZGF0YSBmcm9tIGEgc2VydmVyXCJcIlwiCgogICAgcGFzcwoKCiMgVGhpcyB0aW1lb3V0IGVycm9yIGRvZXMgbm90IGhhdmUgYSBVUkwgYXR0YWNoZWQgYW5kIG5lZWRzIHRvIGluaGVyaXQgZnJvbSB0aGUKIyBiYXNlIEhUVFBFcnJvcgpjbGFzcyBDb25uZWN0VGltZW91dEVycm9yKFRpbWVvdXRFcnJvcik6CiAgICBcIlwiXCJSYWlzZWQgd2hlbiBhIHNvY2tldCB0aW1lb3V0IG9jY3VycyB3aGlsZSBjb25uZWN0aW5nIHRvIGEgc2VydmVyXCJcIlwiCgogICAgcGFzcwoKCmNsYXNzIE5ld0Nvbm5lY3Rpb25FcnJvcihDb25uZWN0VGltZW91dEVycm9yLCBQb29sRXJyb3IpOgogICAgXCJcIlwiUmFpc2VkIHdoZW4gd2UgZmFpbCB0byBlc3RhYmxpc2ggYSBuZXcgY29ubmVjdGlvbi4gVXN1YWxseSBFQ09OTlJFRlVTRUQuXCJcIlwiCgogICAgcGFzcwoKCmNsYXNzIEVtcHR5UG9vbEVycm9yKFBvb2xFcnJvcik6CiAgICBcIlwiXCJSYWlzZWQgd2hlbiBhIHBvb2wgcnVucyBvdXQgb2YgY29ubmVjdGlvbnMgYW5kIG5vIG1vcmUgYXJlIGFsbG93ZWQuXCJcIlwiCgogICAgcGFzcwoKCmNsYXNzIENsb3NlZFBvb2xFcnJvcihQb29sRXJyb3IpOgogICAgXCJcIlwiUmFpc2VkIHdoZW4gYSByZXF1ZXN0IGVudGVycyBhIHBvb2wgYWZ0ZXIgdGhlIHBvb2wgaGFzIGJlZW4gY2xvc2VkLlwiXCJcIgoKICAgIHBhc3MKCgpjbGFzcyBMb2NhdGlvblZhbHVlRXJyb3IoVmFsdWVFcnJvciwgSFRUUEVycm9yKToKICAgIFwiXCJcIlJhaXNlZCB3aGVuIHRoZXJlIGlzIHNvbWV0aGluZyB3cm9uZyB3aXRoIGEgZ2l2ZW4gVVJMIGlucHV0LlwiXCJcIgoKICAgIHBhc3MKCgpjbGFzcyBMb2NhdGlvblBhcnNlRXJyb3IoTG9jYXRpb25WYWx1ZUVycm9yKToKICAgIFwiXCJcIlJhaXNlZCB3aGVuIGdldF9ob3N0IG9yIHNpbWlsYXIgZmFpbHMgdG8gcGFyc2UgdGhlIFVSTCBpbnB1dC5cIlwiXCIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgbG9jYXRpb24pOgogICAgICAgIG1lc3NhZ2UgPSBcIkZhaWxlZCB0byBwYXJzZTogJXNcIiAlIGxvY2F0aW9uCiAgICAgICAgSFRUUEVycm9yLl9faW5pdF9fKHNlbGYsIG1lc3NhZ2UpCgogICAgICAgIHNlbGYubG9jYXRpb24gPSBsb2NhdGlvbgoKCmNsYXNzIFVSTFNjaGVtZVVua25vd24oTG9jYXRpb25WYWx1ZUVycm9yKToKICAgIFwiXCJcIlJhaXNlZCB3aGVuIGEgVVJMIGlucHV0IGhhcyBhbiB1bnN1cHBvcnRlZCBzY2hlbWUuXCJcIlwiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHNjaGVtZSk6CiAgICAgICAgbWVzc2FnZSA9IFwiTm90IHN1cHBvcnRlZCBVUkwgc2NoZW1lICVzXCIgJSBzY2hlbWUKICAgICAgICBzdXBlcihVUkxTY2hlbWVVbmtub3duLCBzZWxmKS5fX2luaXRfXyhtZXNzYWdlKQoKICAgICAgICBzZWxmLnNjaGVtZSA9IHNjaGVtZQoKCmNsYXNzIFJlc3BvbnNlRXJyb3IoSFRUUEVycm9yKToKICAgIFwiXCJcIlVzZWQgYXMgYSBjb250YWluZXIgZm9yIGFuIGVycm9yIHJlYXNvbiBzdXBwbGllZCBpbiBhIE1heFJldHJ5RXJyb3IuXCJcIlwiCgogICAgR0VORVJJQ19FUlJPUiA9IFwidG9vIG1hbnkgZXJyb3IgcmVzcG9uc2VzXCIKICAgIFNQRUNJRklDX0VSUk9SID0gXCJ0b28gbWFueSB7c3RhdHVzX2NvZGV9IGVycm9yIHJlc3BvbnNlc1wiCgoKY2xhc3MgU2VjdXJpdHlXYXJuaW5nKEhUVFBXYXJuaW5nKToKICAgIFwiXCJcIldhcm5lZCB3aGVuIHBlcmZvcm1pbmcgc2VjdXJpdHkgcmVkdWNpbmcgYWN0aW9uc1wiXCJcIgoKICAgIHBhc3MKCgpjbGFzcyBTdWJqZWN0QWx0TmFtZVdhcm5pbmcoU2VjdXJpdHlXYXJuaW5nKToKICAgIFwiXCJcIldhcm5lZCB3aGVuIGNvbm5lY3RpbmcgdG8gYSBob3N0IHdpdGggYSBjZXJ0aWZpY2F0ZSBtaXNzaW5nIGEgU0FOLlwiXCJcIgoKICAgIHBhc3MKCgpjbGFzcyBJbnNlY3VyZVJlcXVlc3RXYXJuaW5nKFNlY3VyaXR5V2FybmluZyk6CiAgICBcIlwiXCJXYXJuZWQgd2hlbiBtYWtpbmcgYW4gdW52ZXJpZmllZCBIVFRQUyByZXF1ZXN0LlwiXCJcIgoKICAgIHBhc3MKCgpjbGFzcyBTeXN0ZW1UaW1lV2FybmluZyhTZWN1cml0eVdhcm5pbmcpOgogICAgXCJcIlwiV2FybmVkIHdoZW4gc3lzdGVtIHRpbWUgaXMgc3VzcGVjdGVkIHRvIGJlIHdyb25nXCJcIlwiCgogICAgcGFzcwoKCmNsYXNzIEluc2VjdXJlUGxhdGZvcm1XYXJuaW5nKFNlY3VyaXR5V2FybmluZyk6CiAgICBcIlwiXCJXYXJuZWQgd2hlbiBjZXJ0YWluIFRMUy9TU0wgY29uZmlndXJhdGlvbiBpcyBub3QgYXZhaWxhYmxlIG9uIGEgcGxhdGZvcm0uXCJcIlwiCgogICAgcGFzcwoKCmNsYXNzIFNOSU1pc3NpbmdXYXJuaW5nKEhUVFBXYXJuaW5nKToKICAgIFwiXCJcIldhcm5lZCB3aGVuIG1ha2luZyBhIEhUVFBTIHJlcXVlc3Qgd2l0aG91dCBTTkkgYXZhaWxhYmxlLlwiXCJcIgoKICAgIHBhc3MKCgpjbGFzcyBEZXBlbmRlbmN5V2FybmluZyhIVFRQV2FybmluZyk6CiAgICBcIlwiXCIKICAgIFdhcm5lZCB3aGVuIGFuIGF0dGVtcHQgaXMgbWFkZSB0byBpbXBvcnQgYSBtb2R1bGUgd2l0aCBtaXNzaW5nIG9wdGlvbmFsCiAgICBkZXBlbmRlbmNpZXMuCiAgICBcIlwiXCIKCiAgICBwYXNzCgoKY2xhc3MgUmVzcG9uc2VOb3RDaHVua2VkKFByb3RvY29sRXJyb3IsIFZhbHVlRXJyb3IpOgogICAgXCJcIlwiUmVzcG9uc2UgbmVlZHMgdG8gYmUgY2h1bmtlZCBpbiBvcmRlciB0byByZWFkIGl0IGFzIGNodW5rcy5cIlwiXCIKCiAgICBwYXNzCgoKY2xhc3MgQm9keU5vdEh0dHBsaWJDb21wYXRpYmxlKEhUVFBFcnJvcik6CiAgICBcIlwiXCIKICAgIEJvZHkgc2hvdWxkIGJlIDpjbGFzczpgaHR0cC5jbGllbnQuSFRUUFJlc3BvbnNlYCBsaWtlCiAgICAoaGF2ZSBhbiBmcCBhdHRyaWJ1dGUgd2hpY2ggcmV0dXJucyByYXcgY2h1bmtzKSBmb3IgcmVhZF9jaHVua2VkKCkuCiAgICBcIlwiXCIKCiAgICBwYXNzCgoKY2xhc3MgSW5jb21wbGV0ZVJlYWQoSFRUUEVycm9yLCBodHRwbGliX0luY29tcGxldGVSZWFkKToKICAgIFwiXCJcIgogICAgUmVzcG9uc2UgbGVuZ3RoIGRvZXNuJ3QgbWF0Y2ggZXhwZWN0ZWQgQ29udGVudC1MZW5ndGgKCiAgICBTdWJjbGFzcyBvZiA6Y2xhc3M6YGh0dHAuY2xpZW50LkluY29tcGxldGVSZWFkYCB0byBhbGxvdyBpbnQgdmFsdWUKICAgIGZvciBgYHBhcnRpYWxgYCB0byBhdm9pZCBjcmVhdGluZyBsYXJnZSBvYmplY3RzIG9uIHN0cmVhbWVkIHJlYWRzLgogICAgXCJcIlwiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHBhcnRpYWwsIGV4cGVjdGVkKToKICAgICAgICBzdXBlcihJbmNvbXBsZXRlUmVhZCwgc2VsZikuX19pbml0X18ocGFydGlhbCwgZXhwZWN0ZWQpCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBcIkluY29tcGxldGVSZWFkKCVpIGJ5dGVzIHJlYWQsICVpIG1vcmUgZXhwZWN0ZWQpXCIgJSAoCiAgICAgICAgICAgIHNlbGYucGFydGlhbCwKICAgICAgICAgICAgc2VsZi5leHBlY3RlZCwKICAgICAgICApCgoKY2xhc3MgSW52YWxpZENodW5rTGVuZ3RoKEhUVFBFcnJvciwgaHR0cGxpYl9JbmNvbXBsZXRlUmVhZCk6CiAgICBcIlwiXCJJbnZhbGlkIGNodW5rIGxlbmd0aCBpbiBhIGNodW5rZWQgcmVzcG9uc2UuXCJcIlwiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHJlc3BvbnNlLCBsZW5ndGgpOgogICAgICAgIHN1cGVyKEludmFsaWRDaHVua0xlbmd0aCwgc2VsZikuX19pbml0X18oCiAgICAgICAgICAgIHJlc3BvbnNlLnRlbGwoKSwgcmVzcG9uc2UubGVuZ3RoX3JlbWFpbmluZwogICAgICAgICkKICAgICAgICBzZWxmLnJlc3BvbnNlID0gcmVzcG9uc2UKICAgICAgICBzZWxmLmxlbmd0aCA9IGxlbmd0aAoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gXCJJbnZhbGlkQ2h1bmtMZW5ndGgoZ290IGxlbmd0aCAlciwgJWkgYnl0ZXMgcmVhZClcIiAlICgKICAgICAgICAgICAgc2VsZi5sZW5ndGgsCiAgICAgICAgICAgIHNlbGYucGFydGlhbCwKICAgICAgICApCgoKY2xhc3MgSW52YWxpZEhlYWRlcihIVFRQRXJyb3IpOgogICAgXCJcIlwiVGhlIGhlYWRlciBwcm92aWRlZCB3YXMgc29tZWhvdyBpbnZhbGlkLlwiXCJcIgoKICAgIHBhc3MKCgpjbGFzcyBQcm94eVNjaGVtZVVua25vd24oQXNzZXJ0aW9uRXJyb3IsIFVSTFNjaGVtZVVua25vd24pOgogICAgXCJcIlwiUHJveHlNYW5hZ2VyIGRvZXMgbm90IHN1cHBvcnQgdGhlIHN1cHBsaWVkIHNjaGVtZVwiXCJcIgoKICAgICMgVE9ETyh0LThjaCk6IFN0b3AgaW5oZXJpdGluZyBmcm9tIEFzc2VydGlvbkVycm9yIGluIHYyLjAuCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHNjaGVtZSk6CiAgICAgICAgIyAnbG9jYWxob3N0JyBpcyBoZXJlIGJlY2F1c2Ugb3VyIFVSTCBwYXJzZXIgcGFyc2VzCiAgICAgICAgIyBsb2NhbGhvc3Q6ODA4MCAtPiBzY2hlbWU9bG9jYWxob3N0LCByZW1vdmUgaWYgd2UgZml4IHRoaXMuCiAgICAgICAgaWYgc2NoZW1lID09IFwibG9jYWxob3N0XCI6CiAgICAgICAgICAgIHNjaGVtZSA9IE5vbmUKICAgICAgICBpZiBzY2hlbWUgaXMgTm9uZToKICAgICAgICAgICAgbWVzc2FnZSA9IFwiUHJveHkgVVJMIGhhZCBubyBzY2hlbWUsIHNob3VsZCBzdGFydCB3aXRoIGh0dHA6Ly8gb3IgaHR0cHM6Ly9cIgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG1lc3NhZ2UgPSAoCiAgICAgICAgICAgICAgICBcIlByb3h5IFVSTCBoYWQgdW5zdXBwb3J0ZWQgc2NoZW1lICVzLCBzaG91bGQgdXNlIGh0dHA6Ly8gb3IgaHR0cHM6Ly9cIgogICAgICAgICAgICAgICAgJSBzY2hlbWUKICAgICAgICAgICAgKQogICAgICAgIHN1cGVyKFByb3h5U2NoZW1lVW5rbm93biwgc2VsZikuX19pbml0X18obWVzc2FnZSkKCgpjbGFzcyBQcm94eVNjaGVtZVVuc3VwcG9ydGVkKFZhbHVlRXJyb3IpOgogICAgXCJcIlwiRmV0Y2hpbmcgSFRUUFMgcmVzb3VyY2VzIHRocm91Z2ggSFRUUFMgcHJveGllcyBpcyB1bnN1cHBvcnRlZFwiXCJcIgoKICAgIHBhc3MKCgpjbGFzcyBIZWFkZXJQYXJzaW5nRXJyb3IoSFRUUEVycm9yKToKICAgIFwiXCJcIlJhaXNlZCBieSBhc3NlcnRfaGVhZGVyX3BhcnNpbmcsIGJ1dCB3ZSBjb252ZXJ0IGl0IHRvIGEgbG9nLndhcm5pbmcgc3RhdGVtZW50LlwiXCJcIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkZWZlY3RzLCB1bnBhcnNlZF9kYXRhKToKICAgICAgICBtZXNzYWdlID0gXCIlcywgdW5wYXJzZWQgZGF0YTogJXJcIiAlIChkZWZlY3RzIG9yIFwiVW5rbm93blwiLCB1bnBhcnNlZF9kYXRhKQogICAgICAgIHN1cGVyKEhlYWRlclBhcnNpbmdFcnJvciwgc2VsZikuX19pbml0X18obWVzc2FnZSkKCgpjbGFzcyBVbnJld2luZGFibGVCb2R5RXJyb3IoSFRUUEVycm9yKToKICAgIFwiXCJcInVybGxpYjMgZW5jb3VudGVyZWQgYW4gZXJyb3Igd2hlbiB0cnlpbmcgdG8gcmV3aW5kIGEgYm9keVwiXCJcIgoKICAgIHBhc3MKCiIiIgptb2R1bGVfZGljdFsidXJsbGliMyIrb3Muc2VwKyJmaWxlcG9zdC5weSJdPSIiIgpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFic29sdXRlX2ltcG9ydAoKaW1wb3J0IGJpbmFzY2lpCmltcG9ydCBjb2RlY3MKaW1wb3J0IG9zCmZyb20gaW8gaW1wb3J0IEJ5dGVzSU8KCmZyb20gLmZpZWxkcyBpbXBvcnQgUmVxdWVzdEZpZWxkCmZyb20gLnBhY2thZ2VzIGltcG9ydCBzaXgKZnJvbSAucGFja2FnZXMuc2l4IGltcG9ydCBiCgp3cml0ZXIgPSBjb2RlY3MubG9va3VwKFwidXRmLThcIilbM10KCgpkZWYgY2hvb3NlX2JvdW5kYXJ5KCk6CiAgICBcIlwiXCIKICAgIE91ciBlbWJhcnJhc3NpbmdseS1zaW1wbGUgcmVwbGFjZW1lbnQgZm9yIG1pbWV0b29scy5jaG9vc2VfYm91bmRhcnkuCiAgICBcIlwiXCIKICAgIGJvdW5kYXJ5ID0gYmluYXNjaWkuaGV4bGlmeShvcy51cmFuZG9tKDE2KSkKICAgIGlmIG5vdCBzaXguUFkyOgogICAgICAgIGJvdW5kYXJ5ID0gYm91bmRhcnkuZGVjb2RlKFwiYXNjaWlcIikKICAgIHJldHVybiBib3VuZGFyeQoKCmRlZiBpdGVyX2ZpZWxkX29iamVjdHMoZmllbGRzKToKICAgIFwiXCJcIgogICAgSXRlcmF0ZSBvdmVyIGZpZWxkcy4KCiAgICBTdXBwb3J0cyBsaXN0IG9mIChrLCB2KSB0dXBsZXMgYW5kIGRpY3RzLCBhbmQgbGlzdHMgb2YKICAgIDpjbGFzczpgfnVybGxpYjMuZmllbGRzLlJlcXVlc3RGaWVsZGAuCgogICAgXCJcIlwiCiAgICBpZiBpc2luc3RhbmNlKGZpZWxkcywgZGljdCk6CiAgICAgICAgaSA9IHNpeC5pdGVyaXRlbXMoZmllbGRzKQogICAgZWxzZToKICAgICAgICBpID0gaXRlcihmaWVsZHMpCgogICAgZm9yIGZpZWxkIGluIGk6CiAgICAgICAgaWYgaXNpbnN0YW5jZShmaWVsZCwgUmVxdWVzdEZpZWxkKToKICAgICAgICAgICAgeWllbGQgZmllbGQKICAgICAgICBlbHNlOgogICAgICAgICAgICB5aWVsZCBSZXF1ZXN0RmllbGQuZnJvbV90dXBsZXMoKmZpZWxkKQoKCmRlZiBpdGVyX2ZpZWxkcyhmaWVsZHMpOgogICAgXCJcIlwiCiAgICAuLiBkZXByZWNhdGVkOjogMS42CgogICAgSXRlcmF0ZSBvdmVyIGZpZWxkcy4KCiAgICBUaGUgYWRkaXRpb24gb2YgOmNsYXNzOmB+dXJsbGliMy5maWVsZHMuUmVxdWVzdEZpZWxkYCBtYWtlcyB0aGlzIGZ1bmN0aW9uCiAgICBvYnNvbGV0ZS4gSW5zdGVhZCwgdXNlIDpmdW5jOmBpdGVyX2ZpZWxkX29iamVjdHNgLCB3aGljaCByZXR1cm5zCiAgICA6Y2xhc3M6YH51cmxsaWIzLmZpZWxkcy5SZXF1ZXN0RmllbGRgIG9iamVjdHMuCgogICAgU3VwcG9ydHMgbGlzdCBvZiAoaywgdikgdHVwbGVzIGFuZCBkaWN0cy4KICAgIFwiXCJcIgogICAgaWYgaXNpbnN0YW5jZShmaWVsZHMsIGRpY3QpOgogICAgICAgIHJldHVybiAoKGssIHYpIGZvciBrLCB2IGluIHNpeC5pdGVyaXRlbXMoZmllbGRzKSkKCiAgICByZXR1cm4gKChrLCB2KSBmb3IgaywgdiBpbiBmaWVsZHMpCgoKZGVmIGVuY29kZV9tdWx0aXBhcnRfZm9ybWRhdGEoZmllbGRzLCBib3VuZGFyeT1Ob25lKToKICAgIFwiXCJcIgogICAgRW5jb2RlIGEgZGljdGlvbmFyeSBvZiBgYGZpZWxkc2BgIHVzaW5nIHRoZSBtdWx0aXBhcnQvZm9ybS1kYXRhIE1JTUUgZm9ybWF0LgoKICAgIDpwYXJhbSBmaWVsZHM6CiAgICAgICAgRGljdGlvbmFyeSBvZiBmaWVsZHMgb3IgbGlzdCBvZiAoa2V5LCA6Y2xhc3M6YH51cmxsaWIzLmZpZWxkcy5SZXF1ZXN0RmllbGRgKS4KCiAgICA6cGFyYW0gYm91bmRhcnk6CiAgICAgICAgSWYgbm90IHNwZWNpZmllZCwgdGhlbiBhIHJhbmRvbSBib3VuZGFyeSB3aWxsIGJlIGdlbmVyYXRlZCB1c2luZwogICAgICAgIDpmdW5jOmB1cmxsaWIzLmZpbGVwb3N0LmNob29zZV9ib3VuZGFyeWAuCiAgICBcIlwiXCIKICAgIGJvZHkgPSBCeXRlc0lPKCkKICAgIGlmIGJvdW5kYXJ5IGlzIE5vbmU6CiAgICAgICAgYm91bmRhcnkgPSBjaG9vc2VfYm91bmRhcnkoKQoKICAgIGZvciBmaWVsZCBpbiBpdGVyX2ZpZWxkX29iamVjdHMoZmllbGRzKToKICAgICAgICBib2R5LndyaXRlKGIoXCItLSVzXFxyXFxuXCIgJSAoYm91bmRhcnkpKSkKCiAgICAgICAgd3JpdGVyKGJvZHkpLndyaXRlKGZpZWxkLnJlbmRlcl9oZWFkZXJzKCkpCiAgICAgICAgZGF0YSA9IGZpZWxkLmRhdGEKCiAgICAgICAgaWYgaXNpbnN0YW5jZShkYXRhLCBpbnQpOgogICAgICAgICAgICBkYXRhID0gc3RyKGRhdGEpICAjIEJhY2t3YXJkcyBjb21wYXRpYmlsaXR5CgogICAgICAgIGlmIGlzaW5zdGFuY2UoZGF0YSwgc2l4LnRleHRfdHlwZSk6CiAgICAgICAgICAgIHdyaXRlcihib2R5KS53cml0ZShkYXRhKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGJvZHkud3JpdGUoZGF0YSkKCiAgICAgICAgYm9keS53cml0ZShiXCJcXHJcXG5cIikKCiAgICBib2R5LndyaXRlKGIoXCItLSVzLS1cXHJcXG5cIiAlIChib3VuZGFyeSkpKQoKICAgIGNvbnRlbnRfdHlwZSA9IHN0cihcIm11bHRpcGFydC9mb3JtLWRhdGE7IGJvdW5kYXJ5PSVzXCIgJSBib3VuZGFyeSkKCiAgICByZXR1cm4gYm9keS5nZXR2YWx1ZSgpLCBjb250ZW50X3R5cGUKCiIiIgptb2R1bGVfZGljdFsidXJsbGliMyIrb3Muc2VwKyJfX2luaXRfXy5weSJdPSIiIgpcIlwiXCIKUHl0aG9uIEhUVFAgbGlicmFyeSB3aXRoIHRocmVhZC1zYWZlIGNvbm5lY3Rpb24gcG9vbGluZywgZmlsZSBwb3N0IHN1cHBvcnQsIHVzZXIgZnJpZW5kbHksIGFuZCBtb3JlClwiXCJcIgpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFic29sdXRlX2ltcG9ydAoKIyBTZXQgZGVmYXVsdCBsb2dnaW5nIGhhbmRsZXIgdG8gYXZvaWQgXCJObyBoYW5kbGVyIGZvdW5kXCIgd2FybmluZ3MuCmltcG9ydCBsb2dnaW5nCmltcG9ydCB3YXJuaW5ncwpmcm9tIGxvZ2dpbmcgaW1wb3J0IE51bGxIYW5kbGVyCgpmcm9tIC4gaW1wb3J0IGV4Y2VwdGlvbnMKZnJvbSAuX3ZlcnNpb24gaW1wb3J0IF9fdmVyc2lvbl9fCmZyb20gLmNvbm5lY3Rpb25wb29sIGltcG9ydCBIVFRQQ29ubmVjdGlvblBvb2wsIEhUVFBTQ29ubmVjdGlvblBvb2wsIGNvbm5lY3Rpb25fZnJvbV91cmwKZnJvbSAuZmlsZXBvc3QgaW1wb3J0IGVuY29kZV9tdWx0aXBhcnRfZm9ybWRhdGEKZnJvbSAucG9vbG1hbmFnZXIgaW1wb3J0IFBvb2xNYW5hZ2VyLCBQcm94eU1hbmFnZXIsIHByb3h5X2Zyb21fdXJsCmZyb20gLnJlc3BvbnNlIGltcG9ydCBIVFRQUmVzcG9uc2UKZnJvbSAudXRpbC5yZXF1ZXN0IGltcG9ydCBtYWtlX2hlYWRlcnMKZnJvbSAudXRpbC5yZXRyeSBpbXBvcnQgUmV0cnkKZnJvbSAudXRpbC50aW1lb3V0IGltcG9ydCBUaW1lb3V0CmZyb20gLnV0aWwudXJsIGltcG9ydCBnZXRfaG9zdAoKX19hdXRob3JfXyA9IFwiQW5kcmV5IFBldHJvdiAoYW5kcmV5LnBldHJvdkBzaGF6b3cubmV0KVwiCl9fbGljZW5zZV9fID0gXCJNSVRcIgpfX3ZlcnNpb25fXyA9IF9fdmVyc2lvbl9fCgpfX2FsbF9fID0gKAogICAgXCJIVFRQQ29ubmVjdGlvblBvb2xcIiwKICAgIFwiSFRUUFNDb25uZWN0aW9uUG9vbFwiLAogICAgXCJQb29sTWFuYWdlclwiLAogICAgXCJQcm94eU1hbmFnZXJcIiwKICAgIFwiSFRUUFJlc3BvbnNlXCIsCiAgICBcIlJldHJ5XCIsCiAgICBcIlRpbWVvdXRcIiwKICAgIFwiYWRkX3N0ZGVycl9sb2dnZXJcIiwKICAgIFwiY29ubmVjdGlvbl9mcm9tX3VybFwiLAogICAgXCJkaXNhYmxlX3dhcm5pbmdzXCIsCiAgICBcImVuY29kZV9tdWx0aXBhcnRfZm9ybWRhdGFcIiwKICAgIFwiZ2V0X2hvc3RcIiwKICAgIFwibWFrZV9oZWFkZXJzXCIsCiAgICBcInByb3h5X2Zyb21fdXJsXCIsCikKCmxvZ2dpbmcuZ2V0TG9nZ2VyKF9fbmFtZV9fKS5hZGRIYW5kbGVyKE51bGxIYW5kbGVyKCkpCgoKZGVmIGFkZF9zdGRlcnJfbG9nZ2VyKGxldmVsPWxvZ2dpbmcuREVCVUcpOgogICAgXCJcIlwiCiAgICBIZWxwZXIgZm9yIHF1aWNrbHkgYWRkaW5nIGEgU3RyZWFtSGFuZGxlciB0byB0aGUgbG9nZ2VyLiBVc2VmdWwgZm9yCiAgICBkZWJ1Z2dpbmcuCgogICAgUmV0dXJucyB0aGUgaGFuZGxlciBhZnRlciBhZGRpbmcgaXQuCiAgICBcIlwiXCIKICAgICMgVGhpcyBtZXRob2QgbmVlZHMgdG8gYmUgaW4gdGhpcyBfX2luaXRfXy5weSB0byBnZXQgdGhlIF9fbmFtZV9fIGNvcnJlY3QKICAgICMgZXZlbiBpZiB1cmxsaWIzIGlzIHZlbmRvcmVkIHdpdGhpbiBhbm90aGVyIHBhY2thZ2UuCiAgICBsb2dnZXIgPSBsb2dnaW5nLmdldExvZ2dlcihfX25hbWVfXykKICAgIGhhbmRsZXIgPSBsb2dnaW5nLlN0cmVhbUhhbmRsZXIoKQogICAgaGFuZGxlci5zZXRGb3JtYXR0ZXIobG9nZ2luZy5Gb3JtYXR0ZXIoXCIlKGFzY3RpbWUpcyAlKGxldmVsbmFtZSlzICUobWVzc2FnZSlzXCIpKQogICAgbG9nZ2VyLmFkZEhhbmRsZXIoaGFuZGxlcikKICAgIGxvZ2dlci5zZXRMZXZlbChsZXZlbCkKICAgIGxvZ2dlci5kZWJ1ZyhcIkFkZGVkIGEgc3RkZXJyIGxvZ2dpbmcgaGFuZGxlciB0byBsb2dnZXI6ICVzXCIsIF9fbmFtZV9fKQogICAgcmV0dXJuIGhhbmRsZXIKCgojIC4uLiBDbGVhbiB1cC4KZGVsIE51bGxIYW5kbGVyCgoKIyBBbGwgd2FybmluZyBmaWx0ZXJzICptdXN0KiBiZSBhcHBlbmRlZCB1bmxlc3MgeW91J3JlIHJlYWxseSBjZXJ0YWluIHRoYXQgdGhleQojIHNob3VsZG4ndCBiZTogb3RoZXJ3aXNlLCBpdCdzIHZlcnkgaGFyZCBmb3IgdXNlcnMgdG8gdXNlIG1vc3QgUHl0aG9uCiMgbWVjaGFuaXNtcyB0byBzaWxlbmNlIHRoZW0uCiMgU2VjdXJpdHlXYXJuaW5nJ3MgYWx3YXlzIGdvIG9mZiBieSBkZWZhdWx0Lgp3YXJuaW5ncy5zaW1wbGVmaWx0ZXIoXCJhbHdheXNcIiwgZXhjZXB0aW9ucy5TZWN1cml0eVdhcm5pbmcsIGFwcGVuZD1UcnVlKQojIFN1YmplY3RBbHROYW1lV2FybmluZydzIHNob3VsZCBnbyBvZmYgb25jZSBwZXIgaG9zdAp3YXJuaW5ncy5zaW1wbGVmaWx0ZXIoXCJkZWZhdWx0XCIsIGV4Y2VwdGlvbnMuU3ViamVjdEFsdE5hbWVXYXJuaW5nLCBhcHBlbmQ9VHJ1ZSkKIyBJbnNlY3VyZVBsYXRmb3JtV2FybmluZydzIGRvbid0IHZhcnkgYmV0d2VlbiByZXF1ZXN0cywgc28gd2Uga2VlcCBpdCBkZWZhdWx0Lgp3YXJuaW5ncy5zaW1wbGVmaWx0ZXIoXCJkZWZhdWx0XCIsIGV4Y2VwdGlvbnMuSW5zZWN1cmVQbGF0Zm9ybVdhcm5pbmcsIGFwcGVuZD1UcnVlKQojIFNOSU1pc3NpbmdXYXJuaW5ncyBzaG91bGQgZ28gb2ZmIG9ubHkgb25jZS4Kd2FybmluZ3Muc2ltcGxlZmlsdGVyKFwiZGVmYXVsdFwiLCBleGNlcHRpb25zLlNOSU1pc3NpbmdXYXJuaW5nLCBhcHBlbmQ9VHJ1ZSkKCgpkZWYgZGlzYWJsZV93YXJuaW5ncyhjYXRlZ29yeT1leGNlcHRpb25zLkhUVFBXYXJuaW5nKToKICAgIFwiXCJcIgogICAgSGVscGVyIGZvciBxdWlja2x5IGRpc2FibGluZyBhbGwgdXJsbGliMyB3YXJuaW5ncy4KICAgIFwiXCJcIgogICAgd2FybmluZ3Muc2ltcGxlZmlsdGVyKFwiaWdub3JlXCIsIGNhdGVnb3J5KQoKIiIiCm1vZHVsZV9kaWN0WyJ1cmxsaWIzIitvcy5zZXArIl92ZXJzaW9uLnB5Il09IiIiCiMgVGhpcyBmaWxlIGlzIHByb3RlY3RlZCB2aWEgQ09ERU9XTkVSUwpfX3ZlcnNpb25fXyA9IFwiMS4yNi4xMFwiCgoiIiIKbW9kdWxlX2RpY3RbInVybGxpYjMiK29zLnNlcCsicGFja2FnZXMiK29zLnNlcCsic2l4LnB5Il09IiIiCiMgQ29weXJpZ2h0IChjKSAyMDEwLTIwMjAgQmVuamFtaW4gUGV0ZXJzb24KIwojIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkKIyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsCiMgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cwojIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwKIyBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMKIyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgojCiMgVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsCiMgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KIwojIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKIyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKIyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUKIyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSCiMgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwKIyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRQojIFNPRlRXQVJFLgoKXCJcIlwiVXRpbGl0aWVzIGZvciB3cml0aW5nIGNvZGUgdGhhdCBydW5zIG9uIFB5dGhvbiAyIGFuZCAzXCJcIlwiCgpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFic29sdXRlX2ltcG9ydAojIDwgaW5jbHVkZSAnU3RyaW5nSU8ucHknID4KCgppbXBvcnQgZnVuY3Rvb2xzCmltcG9ydCBpdGVydG9vbHMKaW1wb3J0IG9wZXJhdG9yCmltcG9ydCBzeXMKaW1wb3J0IHR5cGVzCgpfX2F1dGhvcl9fID0gXCJCZW5qYW1pbiBQZXRlcnNvbiA8YmVuamFtaW5AcHl0aG9uLm9yZz5cIgpfX3ZlcnNpb25fXyA9IFwiMS4xNi4wXCIKCgojIFVzZWZ1bCBmb3IgdmVyeSBjb2Fyc2UgdmVyc2lvbiBkaWZmZXJlbnRpYXRpb24uClBZMiA9IHN5cy52ZXJzaW9uX2luZm9bMF0gPT0gMgpQWTMgPSBzeXMudmVyc2lvbl9pbmZvWzBdID09IDMKUFkzNCA9IHN5cy52ZXJzaW9uX2luZm9bMDoyXSA+PSAoMywgNCkKCmlmIFBZMzoKICAgIHN0cmluZ190eXBlcyA9IChzdHIsKQogICAgaW50ZWdlcl90eXBlcyA9IChpbnQsKQogICAgY2xhc3NfdHlwZXMgPSAodHlwZSwpCiAgICB0ZXh0X3R5cGUgPSBzdHIKICAgIGJpbmFyeV90eXBlID0gYnl0ZXMKCiAgICBNQVhTSVpFID0gc3lzLm1heHNpemUKZWxzZToKICAgIHN0cmluZ190eXBlcyA9IChiYXNlc3RyaW5nLCkKICAgIGludGVnZXJfdHlwZXMgPSAoaW50LCBsb25nKQogICAgY2xhc3NfdHlwZXMgPSAodHlwZSwgdHlwZXMuQ2xhc3NUeXBlKQogICAgdGV4dF90eXBlID0gdW5pY29kZQogICAgYmluYXJ5X3R5cGUgPSBzdHIKCiAgICBpZiBzeXMucGxhdGZvcm0uc3RhcnRzd2l0aChcImphdmFcIik6CiAgICAgICAgIyBKeXRob24gYWx3YXlzIHVzZXMgMzIgYml0cy4KICAgICAgICBNQVhTSVpFID0gaW50KCgxIDw8IDMxKSAtIDEpCiAgICBlbHNlOgogICAgICAgICMgSXQncyBwb3NzaWJsZSB0byBoYXZlIHNpemVvZihsb25nKSAhPSBzaXplb2YoUHlfc3NpemVfdCkuCiAgICAgICAgY2xhc3MgWChvYmplY3QpOgogICAgICAgICAgICBkZWYgX19sZW5fXyhzZWxmKToKICAgICAgICAgICAgICAgIHJldHVybiAxIDw8IDMxCgogICAgICAgIHRyeToKICAgICAgICAgICAgbGVuKFgoKSkKICAgICAgICBleGNlcHQgT3ZlcmZsb3dFcnJvcjoKICAgICAgICAgICAgIyAzMi1iaXQKICAgICAgICAgICAgTUFYU0laRSA9IGludCgoMSA8PCAzMSkgLSAxKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgNjQtYml0CiAgICAgICAgICAgIE1BWFNJWkUgPSBpbnQoKDEgPDwgNjMpIC0gMSkKICAgICAgICBkZWwgWAoKaWYgUFkzNDoKICAgIGZyb20gaW1wb3J0bGliLnV0aWwgaW1wb3J0IHNwZWNfZnJvbV9sb2FkZXIKZWxzZToKICAgIHNwZWNfZnJvbV9sb2FkZXIgPSBOb25lCgoKZGVmIF9hZGRfZG9jKGZ1bmMsIGRvYyk6CiAgICBcIlwiXCJBZGQgZG9jdW1lbnRhdGlvbiB0byBhIGZ1bmN0aW9uLlwiXCJcIgogICAgZnVuYy5fX2RvY19fID0gZG9jCgoKZGVmIF9pbXBvcnRfbW9kdWxlKG5hbWUpOgogICAgXCJcIlwiSW1wb3J0IG1vZHVsZSwgcmV0dXJuaW5nIHRoZSBtb2R1bGUgYWZ0ZXIgdGhlIGxhc3QgZG90LlwiXCJcIgogICAgX19pbXBvcnRfXyhuYW1lKQogICAgcmV0dXJuIHN5cy5tb2R1bGVzW25hbWVdCgoKY2xhc3MgX0xhenlEZXNjcihvYmplY3QpOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUpOgogICAgICAgIHNlbGYubmFtZSA9IG5hbWUKCiAgICBkZWYgX19nZXRfXyhzZWxmLCBvYmosIHRwKToKICAgICAgICByZXN1bHQgPSBzZWxmLl9yZXNvbHZlKCkKICAgICAgICBzZXRhdHRyKG9iaiwgc2VsZi5uYW1lLCByZXN1bHQpICAjIEludm9rZXMgX19zZXRfXy4KICAgICAgICB0cnk6CiAgICAgICAgICAgICMgVGhpcyBpcyBhIGJpdCB1Z2x5LCBidXQgaXQgYXZvaWRzIHJ1bm5pbmcgdGhpcyBhZ2FpbiBieQogICAgICAgICAgICAjIHJlbW92aW5nIHRoaXMgZGVzY3JpcHRvci4KICAgICAgICAgICAgZGVsYXR0cihvYmouX19jbGFzc19fLCBzZWxmLm5hbWUpCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOgogICAgICAgICAgICBwYXNzCiAgICAgICAgcmV0dXJuIHJlc3VsdAoKCmNsYXNzIE1vdmVkTW9kdWxlKF9MYXp5RGVzY3IpOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUsIG9sZCwgbmV3PU5vbmUpOgogICAgICAgIHN1cGVyKE1vdmVkTW9kdWxlLCBzZWxmKS5fX2luaXRfXyhuYW1lKQogICAgICAgIGlmIFBZMzoKICAgICAgICAgICAgaWYgbmV3IGlzIE5vbmU6CiAgICAgICAgICAgICAgICBuZXcgPSBuYW1lCiAgICAgICAgICAgIHNlbGYubW9kID0gbmV3CiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5tb2QgPSBvbGQKCiAgICBkZWYgX3Jlc29sdmUoc2VsZik6CiAgICAgICAgcmV0dXJuIF9pbXBvcnRfbW9kdWxlKHNlbGYubW9kKQoKICAgIGRlZiBfX2dldGF0dHJfXyhzZWxmLCBhdHRyKToKICAgICAgICBfbW9kdWxlID0gc2VsZi5fcmVzb2x2ZSgpCiAgICAgICAgdmFsdWUgPSBnZXRhdHRyKF9tb2R1bGUsIGF0dHIpCiAgICAgICAgc2V0YXR0cihzZWxmLCBhdHRyLCB2YWx1ZSkKICAgICAgICByZXR1cm4gdmFsdWUKCgpjbGFzcyBfTGF6eU1vZHVsZSh0eXBlcy5Nb2R1bGVUeXBlKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBuYW1lKToKICAgICAgICBzdXBlcihfTGF6eU1vZHVsZSwgc2VsZikuX19pbml0X18obmFtZSkKICAgICAgICBzZWxmLl9fZG9jX18gPSBzZWxmLl9fY2xhc3NfXy5fX2RvY19fCgogICAgZGVmIF9fZGlyX18oc2VsZik6CiAgICAgICAgYXR0cnMgPSBbXCJfX2RvY19fXCIsIFwiX19uYW1lX19cIl0KICAgICAgICBhdHRycyArPSBbYXR0ci5uYW1lIGZvciBhdHRyIGluIHNlbGYuX21vdmVkX2F0dHJpYnV0ZXNdCiAgICAgICAgcmV0dXJuIGF0dHJzCgogICAgIyBTdWJjbGFzc2VzIHNob3VsZCBvdmVycmlkZSB0aGlzCiAgICBfbW92ZWRfYXR0cmlidXRlcyA9IFtdCgoKY2xhc3MgTW92ZWRBdHRyaWJ1dGUoX0xhenlEZXNjcik6CiAgICBkZWYgX19pbml0X18oc2VsZiwgbmFtZSwgb2xkX21vZCwgbmV3X21vZCwgb2xkX2F0dHI9Tm9uZSwgbmV3X2F0dHI9Tm9uZSk6CiAgICAgICAgc3VwZXIoTW92ZWRBdHRyaWJ1dGUsIHNlbGYpLl9faW5pdF9fKG5hbWUpCiAgICAgICAgaWYgUFkzOgogICAgICAgICAgICBpZiBuZXdfbW9kIGlzIE5vbmU6CiAgICAgICAgICAgICAgICBuZXdfbW9kID0gbmFtZQogICAgICAgICAgICBzZWxmLm1vZCA9IG5ld19tb2QKICAgICAgICAgICAgaWYgbmV3X2F0dHIgaXMgTm9uZToKICAgICAgICAgICAgICAgIGlmIG9sZF9hdHRyIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgbmV3X2F0dHIgPSBuYW1lCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIG5ld19hdHRyID0gb2xkX2F0dHIKICAgICAgICAgICAgc2VsZi5hdHRyID0gbmV3X2F0dHIKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLm1vZCA9IG9sZF9tb2QKICAgICAgICAgICAgaWYgb2xkX2F0dHIgaXMgTm9uZToKICAgICAgICAgICAgICAgIG9sZF9hdHRyID0gbmFtZQogICAgICAgICAgICBzZWxmLmF0dHIgPSBvbGRfYXR0cgoKICAgIGRlZiBfcmVzb2x2ZShzZWxmKToKICAgICAgICBtb2R1bGUgPSBfaW1wb3J0X21vZHVsZShzZWxmLm1vZCkKICAgICAgICByZXR1cm4gZ2V0YXR0cihtb2R1bGUsIHNlbGYuYXR0cikKCgpjbGFzcyBfU2l4TWV0YVBhdGhJbXBvcnRlcihvYmplY3QpOgoKICAgIFwiXCJcIgogICAgQSBtZXRhIHBhdGggaW1wb3J0ZXIgdG8gaW1wb3J0IHNpeC5tb3ZlcyBhbmQgaXRzIHN1Ym1vZHVsZXMuCgogICAgVGhpcyBjbGFzcyBpbXBsZW1lbnRzIGEgUEVQMzAyIGZpbmRlciBhbmQgbG9hZGVyLiBJdCBzaG91bGQgYmUgY29tcGF0aWJsZQogICAgd2l0aCBQeXRob24gMi41IGFuZCBhbGwgZXhpc3RpbmcgdmVyc2lvbnMgb2YgUHl0aG9uMwogICAgXCJcIlwiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHNpeF9tb2R1bGVfbmFtZSk6CiAgICAgICAgc2VsZi5uYW1lID0gc2l4X21vZHVsZV9uYW1lCiAgICAgICAgc2VsZi5rbm93bl9tb2R1bGVzID0ge30KCiAgICBkZWYgX2FkZF9tb2R1bGUoc2VsZiwgbW9kLCAqZnVsbG5hbWVzKToKICAgICAgICBmb3IgZnVsbG5hbWUgaW4gZnVsbG5hbWVzOgogICAgICAgICAgICBzZWxmLmtub3duX21vZHVsZXNbc2VsZi5uYW1lICsgXCIuXCIgKyBmdWxsbmFtZV0gPSBtb2QKCiAgICBkZWYgX2dldF9tb2R1bGUoc2VsZiwgZnVsbG5hbWUpOgogICAgICAgIHJldHVybiBzZWxmLmtub3duX21vZHVsZXNbc2VsZi5uYW1lICsgXCIuXCIgKyBmdWxsbmFtZV0KCiAgICBkZWYgZmluZF9tb2R1bGUoc2VsZiwgZnVsbG5hbWUsIHBhdGg9Tm9uZSk6CiAgICAgICAgaWYgZnVsbG5hbWUgaW4gc2VsZi5rbm93bl9tb2R1bGVzOgogICAgICAgICAgICByZXR1cm4gc2VsZgogICAgICAgIHJldHVybiBOb25lCgogICAgZGVmIGZpbmRfc3BlYyhzZWxmLCBmdWxsbmFtZSwgcGF0aCwgdGFyZ2V0PU5vbmUpOgogICAgICAgIGlmIGZ1bGxuYW1lIGluIHNlbGYua25vd25fbW9kdWxlczoKICAgICAgICAgICAgcmV0dXJuIHNwZWNfZnJvbV9sb2FkZXIoZnVsbG5hbWUsIHNlbGYpCiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBkZWYgX19nZXRfbW9kdWxlKHNlbGYsIGZ1bGxuYW1lKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLmtub3duX21vZHVsZXNbZnVsbG5hbWVdCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICByYWlzZSBJbXBvcnRFcnJvcihcIlRoaXMgbG9hZGVyIGRvZXMgbm90IGtub3cgbW9kdWxlIFwiICsgZnVsbG5hbWUpCgogICAgZGVmIGxvYWRfbW9kdWxlKHNlbGYsIGZ1bGxuYW1lKToKICAgICAgICB0cnk6CiAgICAgICAgICAgICMgaW4gY2FzZSBvZiBhIHJlbG9hZAogICAgICAgICAgICByZXR1cm4gc3lzLm1vZHVsZXNbZnVsbG5hbWVdCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICBwYXNzCiAgICAgICAgbW9kID0gc2VsZi5fX2dldF9tb2R1bGUoZnVsbG5hbWUpCiAgICAgICAgaWYgaXNpbnN0YW5jZShtb2QsIE1vdmVkTW9kdWxlKToKICAgICAgICAgICAgbW9kID0gbW9kLl9yZXNvbHZlKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBtb2QuX19sb2FkZXJfXyA9IHNlbGYKICAgICAgICBzeXMubW9kdWxlc1tmdWxsbmFtZV0gPSBtb2QKICAgICAgICByZXR1cm4gbW9kCgogICAgZGVmIGlzX3BhY2thZ2Uoc2VsZiwgZnVsbG5hbWUpOgogICAgICAgIFwiXCJcIgogICAgICAgIFJldHVybiB0cnVlLCBpZiB0aGUgbmFtZWQgbW9kdWxlIGlzIGEgcGFja2FnZS4KCiAgICAgICAgV2UgbmVlZCB0aGlzIG1ldGhvZCB0byBnZXQgY29ycmVjdCBzcGVjIG9iamVjdHMgd2l0aAogICAgICAgIFB5dGhvbiAzLjQgKHNlZSBQRVA0NTEpCiAgICAgICAgXCJcIlwiCiAgICAgICAgcmV0dXJuIGhhc2F0dHIoc2VsZi5fX2dldF9tb2R1bGUoZnVsbG5hbWUpLCBcIl9fcGF0aF9fXCIpCgogICAgZGVmIGdldF9jb2RlKHNlbGYsIGZ1bGxuYW1lKToKICAgICAgICBcIlwiXCJSZXR1cm4gTm9uZQoKICAgICAgICBSZXF1aXJlZCwgaWYgaXNfcGFja2FnZSBpcyBpbXBsZW1lbnRlZFwiXCJcIgogICAgICAgIHNlbGYuX19nZXRfbW9kdWxlKGZ1bGxuYW1lKSAgIyBldmVudHVhbGx5IHJhaXNlcyBJbXBvcnRFcnJvcgogICAgICAgIHJldHVybiBOb25lCgogICAgZ2V0X3NvdXJjZSA9IGdldF9jb2RlICAjIHNhbWUgYXMgZ2V0X2NvZGUKCiAgICBkZWYgY3JlYXRlX21vZHVsZShzZWxmLCBzcGVjKToKICAgICAgICByZXR1cm4gc2VsZi5sb2FkX21vZHVsZShzcGVjLm5hbWUpCgogICAgZGVmIGV4ZWNfbW9kdWxlKHNlbGYsIG1vZHVsZSk6CiAgICAgICAgcGFzcwoKCl9pbXBvcnRlciA9IF9TaXhNZXRhUGF0aEltcG9ydGVyKF9fbmFtZV9fKQoKCmNsYXNzIF9Nb3ZlZEl0ZW1zKF9MYXp5TW9kdWxlKToKCiAgICBcIlwiXCJMYXp5IGxvYWRpbmcgb2YgbW92ZWQgb2JqZWN0c1wiXCJcIgoKICAgIF9fcGF0aF9fID0gW10gICMgbWFyayBhcyBwYWNrYWdlCgoKX21vdmVkX2F0dHJpYnV0ZXMgPSBbCiAgICBNb3ZlZEF0dHJpYnV0ZShcImNTdHJpbmdJT1wiLCBcImNTdHJpbmdJT1wiLCBcImlvXCIsIFwiU3RyaW5nSU9cIiksCiAgICBNb3ZlZEF0dHJpYnV0ZShcImZpbHRlclwiLCBcIml0ZXJ0b29sc1wiLCBcImJ1aWx0aW5zXCIsIFwiaWZpbHRlclwiLCBcImZpbHRlclwiKSwKICAgIE1vdmVkQXR0cmlidXRlKAogICAgICAgIFwiZmlsdGVyZmFsc2VcIiwgXCJpdGVydG9vbHNcIiwgXCJpdGVydG9vbHNcIiwgXCJpZmlsdGVyZmFsc2VcIiwgXCJmaWx0ZXJmYWxzZVwiCiAgICApLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJpbnB1dFwiLCBcIl9fYnVpbHRpbl9fXCIsIFwiYnVpbHRpbnNcIiwgXCJyYXdfaW5wdXRcIiwgXCJpbnB1dFwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwiaW50ZXJuXCIsIFwiX19idWlsdGluX19cIiwgXCJzeXNcIiksCiAgICBNb3ZlZEF0dHJpYnV0ZShcIm1hcFwiLCBcIml0ZXJ0b29sc1wiLCBcImJ1aWx0aW5zXCIsIFwiaW1hcFwiLCBcIm1hcFwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwiZ2V0Y3dkXCIsIFwib3NcIiwgXCJvc1wiLCBcImdldGN3ZHVcIiwgXCJnZXRjd2RcIiksCiAgICBNb3ZlZEF0dHJpYnV0ZShcImdldGN3ZGJcIiwgXCJvc1wiLCBcIm9zXCIsIFwiZ2V0Y3dkXCIsIFwiZ2V0Y3dkYlwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwiZ2V0b3V0cHV0XCIsIFwiY29tbWFuZHNcIiwgXCJzdWJwcm9jZXNzXCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJyYW5nZVwiLCBcIl9fYnVpbHRpbl9fXCIsIFwiYnVpbHRpbnNcIiwgXCJ4cmFuZ2VcIiwgXCJyYW5nZVwiKSwKICAgIE1vdmVkQXR0cmlidXRlKAogICAgICAgIFwicmVsb2FkX21vZHVsZVwiLCBcIl9fYnVpbHRpbl9fXCIsIFwiaW1wb3J0bGliXCIgaWYgUFkzNCBlbHNlIFwiaW1wXCIsIFwicmVsb2FkXCIKICAgICksCiAgICBNb3ZlZEF0dHJpYnV0ZShcInJlZHVjZVwiLCBcIl9fYnVpbHRpbl9fXCIsIFwiZnVuY3Rvb2xzXCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJzaGxleF9xdW90ZVwiLCBcInBpcGVzXCIsIFwic2hsZXhcIiwgXCJxdW90ZVwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwiU3RyaW5nSU9cIiwgXCJTdHJpbmdJT1wiLCBcImlvXCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJVc2VyRGljdFwiLCBcIlVzZXJEaWN0XCIsIFwiY29sbGVjdGlvbnNcIiksCiAgICBNb3ZlZEF0dHJpYnV0ZShcIlVzZXJMaXN0XCIsIFwiVXNlckxpc3RcIiwgXCJjb2xsZWN0aW9uc1wiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwiVXNlclN0cmluZ1wiLCBcIlVzZXJTdHJpbmdcIiwgXCJjb2xsZWN0aW9uc1wiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwieHJhbmdlXCIsIFwiX19idWlsdGluX19cIiwgXCJidWlsdGluc1wiLCBcInhyYW5nZVwiLCBcInJhbmdlXCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJ6aXBcIiwgXCJpdGVydG9vbHNcIiwgXCJidWlsdGluc1wiLCBcIml6aXBcIiwgXCJ6aXBcIiksCiAgICBNb3ZlZEF0dHJpYnV0ZSgKICAgICAgICBcInppcF9sb25nZXN0XCIsIFwiaXRlcnRvb2xzXCIsIFwiaXRlcnRvb2xzXCIsIFwiaXppcF9sb25nZXN0XCIsIFwiemlwX2xvbmdlc3RcIgogICAgKSwKICAgIE1vdmVkTW9kdWxlKFwiYnVpbHRpbnNcIiwgXCJfX2J1aWx0aW5fX1wiKSwKICAgIE1vdmVkTW9kdWxlKFwiY29uZmlncGFyc2VyXCIsIFwiQ29uZmlnUGFyc2VyXCIpLAogICAgTW92ZWRNb2R1bGUoCiAgICAgICAgXCJjb2xsZWN0aW9uc19hYmNcIiwKICAgICAgICBcImNvbGxlY3Rpb25zXCIsCiAgICAgICAgXCJjb2xsZWN0aW9ucy5hYmNcIiBpZiBzeXMudmVyc2lvbl9pbmZvID49ICgzLCAzKSBlbHNlIFwiY29sbGVjdGlvbnNcIiwKICAgICksCiAgICBNb3ZlZE1vZHVsZShcImNvcHlyZWdcIiwgXCJjb3B5X3JlZ1wiKSwKICAgIE1vdmVkTW9kdWxlKFwiZGJtX2dudVwiLCBcImdkYm1cIiwgXCJkYm0uZ251XCIpLAogICAgTW92ZWRNb2R1bGUoXCJkYm1fbmRibVwiLCBcImRibVwiLCBcImRibS5uZGJtXCIpLAogICAgTW92ZWRNb2R1bGUoCiAgICAgICAgXCJfZHVtbXlfdGhyZWFkXCIsCiAgICAgICAgXCJkdW1teV90aHJlYWRcIiwKICAgICAgICBcIl9kdW1teV90aHJlYWRcIiBpZiBzeXMudmVyc2lvbl9pbmZvIDwgKDMsIDkpIGVsc2UgXCJfdGhyZWFkXCIsCiAgICApLAogICAgTW92ZWRNb2R1bGUoXCJodHRwX2Nvb2tpZWphclwiLCBcImNvb2tpZWxpYlwiLCBcImh0dHAuY29va2llamFyXCIpLAogICAgTW92ZWRNb2R1bGUoXCJodHRwX2Nvb2tpZXNcIiwgXCJDb29raWVcIiwgXCJodHRwLmNvb2tpZXNcIiksCiAgICBNb3ZlZE1vZHVsZShcImh0bWxfZW50aXRpZXNcIiwgXCJodG1sZW50aXR5ZGVmc1wiLCBcImh0bWwuZW50aXRpZXNcIiksCiAgICBNb3ZlZE1vZHVsZShcImh0bWxfcGFyc2VyXCIsIFwiSFRNTFBhcnNlclwiLCBcImh0bWwucGFyc2VyXCIpLAogICAgTW92ZWRNb2R1bGUoXCJodHRwX2NsaWVudFwiLCBcImh0dHBsaWJcIiwgXCJodHRwLmNsaWVudFwiKSwKICAgIE1vdmVkTW9kdWxlKFwiZW1haWxfbWltZV9iYXNlXCIsIFwiZW1haWwuTUlNRUJhc2VcIiwgXCJlbWFpbC5taW1lLmJhc2VcIiksCiAgICBNb3ZlZE1vZHVsZShcImVtYWlsX21pbWVfaW1hZ2VcIiwgXCJlbWFpbC5NSU1FSW1hZ2VcIiwgXCJlbWFpbC5taW1lLmltYWdlXCIpLAogICAgTW92ZWRNb2R1bGUoXCJlbWFpbF9taW1lX211bHRpcGFydFwiLCBcImVtYWlsLk1JTUVNdWx0aXBhcnRcIiwgXCJlbWFpbC5taW1lLm11bHRpcGFydFwiKSwKICAgIE1vdmVkTW9kdWxlKAogICAgICAgIFwiZW1haWxfbWltZV9ub25tdWx0aXBhcnRcIiwgXCJlbWFpbC5NSU1FTm9uTXVsdGlwYXJ0XCIsIFwiZW1haWwubWltZS5ub25tdWx0aXBhcnRcIgogICAgKSwKICAgIE1vdmVkTW9kdWxlKFwiZW1haWxfbWltZV90ZXh0XCIsIFwiZW1haWwuTUlNRVRleHRcIiwgXCJlbWFpbC5taW1lLnRleHRcIiksCiAgICBNb3ZlZE1vZHVsZShcIkJhc2VIVFRQU2VydmVyXCIsIFwiQmFzZUhUVFBTZXJ2ZXJcIiwgXCJodHRwLnNlcnZlclwiKSwKICAgIE1vdmVkTW9kdWxlKFwiQ0dJSFRUUFNlcnZlclwiLCBcIkNHSUhUVFBTZXJ2ZXJcIiwgXCJodHRwLnNlcnZlclwiKSwKICAgIE1vdmVkTW9kdWxlKFwiU2ltcGxlSFRUUFNlcnZlclwiLCBcIlNpbXBsZUhUVFBTZXJ2ZXJcIiwgXCJodHRwLnNlcnZlclwiKSwKICAgIE1vdmVkTW9kdWxlKFwiY1BpY2tsZVwiLCBcImNQaWNrbGVcIiwgXCJwaWNrbGVcIiksCiAgICBNb3ZlZE1vZHVsZShcInF1ZXVlXCIsIFwiUXVldWVcIiksCiAgICBNb3ZlZE1vZHVsZShcInJlcHJsaWJcIiwgXCJyZXByXCIpLAogICAgTW92ZWRNb2R1bGUoXCJzb2NrZXRzZXJ2ZXJcIiwgXCJTb2NrZXRTZXJ2ZXJcIiksCiAgICBNb3ZlZE1vZHVsZShcIl90aHJlYWRcIiwgXCJ0aHJlYWRcIiwgXCJfdGhyZWFkXCIpLAogICAgTW92ZWRNb2R1bGUoXCJ0a2ludGVyXCIsIFwiVGtpbnRlclwiKSwKICAgIE1vdmVkTW9kdWxlKFwidGtpbnRlcl9kaWFsb2dcIiwgXCJEaWFsb2dcIiwgXCJ0a2ludGVyLmRpYWxvZ1wiKSwKICAgIE1vdmVkTW9kdWxlKFwidGtpbnRlcl9maWxlZGlhbG9nXCIsIFwiRmlsZURpYWxvZ1wiLCBcInRraW50ZXIuZmlsZWRpYWxvZ1wiKSwKICAgIE1vdmVkTW9kdWxlKFwidGtpbnRlcl9zY3JvbGxlZHRleHRcIiwgXCJTY3JvbGxlZFRleHRcIiwgXCJ0a2ludGVyLnNjcm9sbGVkdGV4dFwiKSwKICAgIE1vdmVkTW9kdWxlKFwidGtpbnRlcl9zaW1wbGVkaWFsb2dcIiwgXCJTaW1wbGVEaWFsb2dcIiwgXCJ0a2ludGVyLnNpbXBsZWRpYWxvZ1wiKSwKICAgIE1vdmVkTW9kdWxlKFwidGtpbnRlcl90aXhcIiwgXCJUaXhcIiwgXCJ0a2ludGVyLnRpeFwiKSwKICAgIE1vdmVkTW9kdWxlKFwidGtpbnRlcl90dGtcIiwgXCJ0dGtcIiwgXCJ0a2ludGVyLnR0a1wiKSwKICAgIE1vdmVkTW9kdWxlKFwidGtpbnRlcl9jb25zdGFudHNcIiwgXCJUa2NvbnN0YW50c1wiLCBcInRraW50ZXIuY29uc3RhbnRzXCIpLAogICAgTW92ZWRNb2R1bGUoXCJ0a2ludGVyX2RuZFwiLCBcIlRrZG5kXCIsIFwidGtpbnRlci5kbmRcIiksCiAgICBNb3ZlZE1vZHVsZShcInRraW50ZXJfY29sb3JjaG9vc2VyXCIsIFwidGtDb2xvckNob29zZXJcIiwgXCJ0a2ludGVyLmNvbG9yY2hvb3NlclwiKSwKICAgIE1vdmVkTW9kdWxlKFwidGtpbnRlcl9jb21tb25kaWFsb2dcIiwgXCJ0a0NvbW1vbkRpYWxvZ1wiLCBcInRraW50ZXIuY29tbW9uZGlhbG9nXCIpLAogICAgTW92ZWRNb2R1bGUoXCJ0a2ludGVyX3RrZmlsZWRpYWxvZ1wiLCBcInRrRmlsZURpYWxvZ1wiLCBcInRraW50ZXIuZmlsZWRpYWxvZ1wiKSwKICAgIE1vdmVkTW9kdWxlKFwidGtpbnRlcl9mb250XCIsIFwidGtGb250XCIsIFwidGtpbnRlci5mb250XCIpLAogICAgTW92ZWRNb2R1bGUoXCJ0a2ludGVyX21lc3NhZ2Vib3hcIiwgXCJ0a01lc3NhZ2VCb3hcIiwgXCJ0a2ludGVyLm1lc3NhZ2Vib3hcIiksCiAgICBNb3ZlZE1vZHVsZShcInRraW50ZXJfdGtzaW1wbGVkaWFsb2dcIiwgXCJ0a1NpbXBsZURpYWxvZ1wiLCBcInRraW50ZXIuc2ltcGxlZGlhbG9nXCIpLAogICAgTW92ZWRNb2R1bGUoXCJ1cmxsaWJfcGFyc2VcIiwgX19uYW1lX18gKyBcIi5tb3Zlcy51cmxsaWJfcGFyc2VcIiwgXCJ1cmxsaWIucGFyc2VcIiksCiAgICBNb3ZlZE1vZHVsZShcInVybGxpYl9lcnJvclwiLCBfX25hbWVfXyArIFwiLm1vdmVzLnVybGxpYl9lcnJvclwiLCBcInVybGxpYi5lcnJvclwiKSwKICAgIE1vdmVkTW9kdWxlKFwidXJsbGliXCIsIF9fbmFtZV9fICsgXCIubW92ZXMudXJsbGliXCIsIF9fbmFtZV9fICsgXCIubW92ZXMudXJsbGliXCIpLAogICAgTW92ZWRNb2R1bGUoXCJ1cmxsaWJfcm9ib3RwYXJzZXJcIiwgXCJyb2JvdHBhcnNlclwiLCBcInVybGxpYi5yb2JvdHBhcnNlclwiKSwKICAgIE1vdmVkTW9kdWxlKFwieG1scnBjX2NsaWVudFwiLCBcInhtbHJwY2xpYlwiLCBcInhtbHJwYy5jbGllbnRcIiksCiAgICBNb3ZlZE1vZHVsZShcInhtbHJwY19zZXJ2ZXJcIiwgXCJTaW1wbGVYTUxSUENTZXJ2ZXJcIiwgXCJ4bWxycGMuc2VydmVyXCIpLApdCiMgQWRkIHdpbmRvd3Mgc3BlY2lmaWMgbW9kdWxlcy4KaWYgc3lzLnBsYXRmb3JtID09IFwid2luMzJcIjoKICAgIF9tb3ZlZF9hdHRyaWJ1dGVzICs9IFsKICAgICAgICBNb3ZlZE1vZHVsZShcIndpbnJlZ1wiLCBcIl93aW5yZWdcIiksCiAgICBdCgpmb3IgYXR0ciBpbiBfbW92ZWRfYXR0cmlidXRlczoKICAgIHNldGF0dHIoX01vdmVkSXRlbXMsIGF0dHIubmFtZSwgYXR0cikKICAgIGlmIGlzaW5zdGFuY2UoYXR0ciwgTW92ZWRNb2R1bGUpOgogICAgICAgIF9pbXBvcnRlci5fYWRkX21vZHVsZShhdHRyLCBcIm1vdmVzLlwiICsgYXR0ci5uYW1lKQpkZWwgYXR0cgoKX01vdmVkSXRlbXMuX21vdmVkX2F0dHJpYnV0ZXMgPSBfbW92ZWRfYXR0cmlidXRlcwoKbW92ZXMgPSBfTW92ZWRJdGVtcyhfX25hbWVfXyArIFwiLm1vdmVzXCIpCl9pbXBvcnRlci5fYWRkX21vZHVsZShtb3ZlcywgXCJtb3Zlc1wiKQoKCmNsYXNzIE1vZHVsZV9zaXhfbW92ZXNfdXJsbGliX3BhcnNlKF9MYXp5TW9kdWxlKToKCiAgICBcIlwiXCJMYXp5IGxvYWRpbmcgb2YgbW92ZWQgb2JqZWN0cyBpbiBzaXgubW92ZXMudXJsbGliX3BhcnNlXCJcIlwiCgoKX3VybGxpYl9wYXJzZV9tb3ZlZF9hdHRyaWJ1dGVzID0gWwogICAgTW92ZWRBdHRyaWJ1dGUoXCJQYXJzZVJlc3VsdFwiLCBcInVybHBhcnNlXCIsIFwidXJsbGliLnBhcnNlXCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJTcGxpdFJlc3VsdFwiLCBcInVybHBhcnNlXCIsIFwidXJsbGliLnBhcnNlXCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJwYXJzZV9xc1wiLCBcInVybHBhcnNlXCIsIFwidXJsbGliLnBhcnNlXCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJwYXJzZV9xc2xcIiwgXCJ1cmxwYXJzZVwiLCBcInVybGxpYi5wYXJzZVwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwidXJsZGVmcmFnXCIsIFwidXJscGFyc2VcIiwgXCJ1cmxsaWIucGFyc2VcIiksCiAgICBNb3ZlZEF0dHJpYnV0ZShcInVybGpvaW5cIiwgXCJ1cmxwYXJzZVwiLCBcInVybGxpYi5wYXJzZVwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwidXJscGFyc2VcIiwgXCJ1cmxwYXJzZVwiLCBcInVybGxpYi5wYXJzZVwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwidXJsc3BsaXRcIiwgXCJ1cmxwYXJzZVwiLCBcInVybGxpYi5wYXJzZVwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwidXJsdW5wYXJzZVwiLCBcInVybHBhcnNlXCIsIFwidXJsbGliLnBhcnNlXCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJ1cmx1bnNwbGl0XCIsIFwidXJscGFyc2VcIiwgXCJ1cmxsaWIucGFyc2VcIiksCiAgICBNb3ZlZEF0dHJpYnV0ZShcInF1b3RlXCIsIFwidXJsbGliXCIsIFwidXJsbGliLnBhcnNlXCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJxdW90ZV9wbHVzXCIsIFwidXJsbGliXCIsIFwidXJsbGliLnBhcnNlXCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJ1bnF1b3RlXCIsIFwidXJsbGliXCIsIFwidXJsbGliLnBhcnNlXCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJ1bnF1b3RlX3BsdXNcIiwgXCJ1cmxsaWJcIiwgXCJ1cmxsaWIucGFyc2VcIiksCiAgICBNb3ZlZEF0dHJpYnV0ZSgKICAgICAgICBcInVucXVvdGVfdG9fYnl0ZXNcIiwgXCJ1cmxsaWJcIiwgXCJ1cmxsaWIucGFyc2VcIiwgXCJ1bnF1b3RlXCIsIFwidW5xdW90ZV90b19ieXRlc1wiCiAgICApLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJ1cmxlbmNvZGVcIiwgXCJ1cmxsaWJcIiwgXCJ1cmxsaWIucGFyc2VcIiksCiAgICBNb3ZlZEF0dHJpYnV0ZShcInNwbGl0cXVlcnlcIiwgXCJ1cmxsaWJcIiwgXCJ1cmxsaWIucGFyc2VcIiksCiAgICBNb3ZlZEF0dHJpYnV0ZShcInNwbGl0dGFnXCIsIFwidXJsbGliXCIsIFwidXJsbGliLnBhcnNlXCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJzcGxpdHVzZXJcIiwgXCJ1cmxsaWJcIiwgXCJ1cmxsaWIucGFyc2VcIiksCiAgICBNb3ZlZEF0dHJpYnV0ZShcInNwbGl0dmFsdWVcIiwgXCJ1cmxsaWJcIiwgXCJ1cmxsaWIucGFyc2VcIiksCiAgICBNb3ZlZEF0dHJpYnV0ZShcInVzZXNfZnJhZ21lbnRcIiwgXCJ1cmxwYXJzZVwiLCBcInVybGxpYi5wYXJzZVwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwidXNlc19uZXRsb2NcIiwgXCJ1cmxwYXJzZVwiLCBcInVybGxpYi5wYXJzZVwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwidXNlc19wYXJhbXNcIiwgXCJ1cmxwYXJzZVwiLCBcInVybGxpYi5wYXJzZVwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwidXNlc19xdWVyeVwiLCBcInVybHBhcnNlXCIsIFwidXJsbGliLnBhcnNlXCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJ1c2VzX3JlbGF0aXZlXCIsIFwidXJscGFyc2VcIiwgXCJ1cmxsaWIucGFyc2VcIiksCl0KZm9yIGF0dHIgaW4gX3VybGxpYl9wYXJzZV9tb3ZlZF9hdHRyaWJ1dGVzOgogICAgc2V0YXR0cihNb2R1bGVfc2l4X21vdmVzX3VybGxpYl9wYXJzZSwgYXR0ci5uYW1lLCBhdHRyKQpkZWwgYXR0cgoKTW9kdWxlX3NpeF9tb3Zlc191cmxsaWJfcGFyc2UuX21vdmVkX2F0dHJpYnV0ZXMgPSBfdXJsbGliX3BhcnNlX21vdmVkX2F0dHJpYnV0ZXMKCl9pbXBvcnRlci5fYWRkX21vZHVsZSgKICAgIE1vZHVsZV9zaXhfbW92ZXNfdXJsbGliX3BhcnNlKF9fbmFtZV9fICsgXCIubW92ZXMudXJsbGliX3BhcnNlXCIpLAogICAgXCJtb3Zlcy51cmxsaWJfcGFyc2VcIiwKICAgIFwibW92ZXMudXJsbGliLnBhcnNlXCIsCikKCgpjbGFzcyBNb2R1bGVfc2l4X21vdmVzX3VybGxpYl9lcnJvcihfTGF6eU1vZHVsZSk6CgogICAgXCJcIlwiTGF6eSBsb2FkaW5nIG9mIG1vdmVkIG9iamVjdHMgaW4gc2l4Lm1vdmVzLnVybGxpYl9lcnJvclwiXCJcIgoKCl91cmxsaWJfZXJyb3JfbW92ZWRfYXR0cmlidXRlcyA9IFsKICAgIE1vdmVkQXR0cmlidXRlKFwiVVJMRXJyb3JcIiwgXCJ1cmxsaWIyXCIsIFwidXJsbGliLmVycm9yXCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJIVFRQRXJyb3JcIiwgXCJ1cmxsaWIyXCIsIFwidXJsbGliLmVycm9yXCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJDb250ZW50VG9vU2hvcnRFcnJvclwiLCBcInVybGxpYlwiLCBcInVybGxpYi5lcnJvclwiKSwKXQpmb3IgYXR0ciBpbiBfdXJsbGliX2Vycm9yX21vdmVkX2F0dHJpYnV0ZXM6CiAgICBzZXRhdHRyKE1vZHVsZV9zaXhfbW92ZXNfdXJsbGliX2Vycm9yLCBhdHRyLm5hbWUsIGF0dHIpCmRlbCBhdHRyCgpNb2R1bGVfc2l4X21vdmVzX3VybGxpYl9lcnJvci5fbW92ZWRfYXR0cmlidXRlcyA9IF91cmxsaWJfZXJyb3JfbW92ZWRfYXR0cmlidXRlcwoKX2ltcG9ydGVyLl9hZGRfbW9kdWxlKAogICAgTW9kdWxlX3NpeF9tb3Zlc191cmxsaWJfZXJyb3IoX19uYW1lX18gKyBcIi5tb3Zlcy51cmxsaWIuZXJyb3JcIiksCiAgICBcIm1vdmVzLnVybGxpYl9lcnJvclwiLAogICAgXCJtb3Zlcy51cmxsaWIuZXJyb3JcIiwKKQoKCmNsYXNzIE1vZHVsZV9zaXhfbW92ZXNfdXJsbGliX3JlcXVlc3QoX0xhenlNb2R1bGUpOgoKICAgIFwiXCJcIkxhenkgbG9hZGluZyBvZiBtb3ZlZCBvYmplY3RzIGluIHNpeC5tb3Zlcy51cmxsaWJfcmVxdWVzdFwiXCJcIgoKCl91cmxsaWJfcmVxdWVzdF9tb3ZlZF9hdHRyaWJ1dGVzID0gWwogICAgTW92ZWRBdHRyaWJ1dGUoXCJ1cmxvcGVuXCIsIFwidXJsbGliMlwiLCBcInVybGxpYi5yZXF1ZXN0XCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJpbnN0YWxsX29wZW5lclwiLCBcInVybGxpYjJcIiwgXCJ1cmxsaWIucmVxdWVzdFwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwiYnVpbGRfb3BlbmVyXCIsIFwidXJsbGliMlwiLCBcInVybGxpYi5yZXF1ZXN0XCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJwYXRobmFtZTJ1cmxcIiwgXCJ1cmxsaWJcIiwgXCJ1cmxsaWIucmVxdWVzdFwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwidXJsMnBhdGhuYW1lXCIsIFwidXJsbGliXCIsIFwidXJsbGliLnJlcXVlc3RcIiksCiAgICBNb3ZlZEF0dHJpYnV0ZShcImdldHByb3hpZXNcIiwgXCJ1cmxsaWJcIiwgXCJ1cmxsaWIucmVxdWVzdFwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwiUmVxdWVzdFwiLCBcInVybGxpYjJcIiwgXCJ1cmxsaWIucmVxdWVzdFwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwiT3BlbmVyRGlyZWN0b3JcIiwgXCJ1cmxsaWIyXCIsIFwidXJsbGliLnJlcXVlc3RcIiksCiAgICBNb3ZlZEF0dHJpYnV0ZShcIkhUVFBEZWZhdWx0RXJyb3JIYW5kbGVyXCIsIFwidXJsbGliMlwiLCBcInVybGxpYi5yZXF1ZXN0XCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJIVFRQUmVkaXJlY3RIYW5kbGVyXCIsIFwidXJsbGliMlwiLCBcInVybGxpYi5yZXF1ZXN0XCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJIVFRQQ29va2llUHJvY2Vzc29yXCIsIFwidXJsbGliMlwiLCBcInVybGxpYi5yZXF1ZXN0XCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJQcm94eUhhbmRsZXJcIiwgXCJ1cmxsaWIyXCIsIFwidXJsbGliLnJlcXVlc3RcIiksCiAgICBNb3ZlZEF0dHJpYnV0ZShcIkJhc2VIYW5kbGVyXCIsIFwidXJsbGliMlwiLCBcInVybGxpYi5yZXF1ZXN0XCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJIVFRQUGFzc3dvcmRNZ3JcIiwgXCJ1cmxsaWIyXCIsIFwidXJsbGliLnJlcXVlc3RcIiksCiAgICBNb3ZlZEF0dHJpYnV0ZShcIkhUVFBQYXNzd29yZE1ncldpdGhEZWZhdWx0UmVhbG1cIiwgXCJ1cmxsaWIyXCIsIFwidXJsbGliLnJlcXVlc3RcIiksCiAgICBNb3ZlZEF0dHJpYnV0ZShcIkFic3RyYWN0QmFzaWNBdXRoSGFuZGxlclwiLCBcInVybGxpYjJcIiwgXCJ1cmxsaWIucmVxdWVzdFwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwiSFRUUEJhc2ljQXV0aEhhbmRsZXJcIiwgXCJ1cmxsaWIyXCIsIFwidXJsbGliLnJlcXVlc3RcIiksCiAgICBNb3ZlZEF0dHJpYnV0ZShcIlByb3h5QmFzaWNBdXRoSGFuZGxlclwiLCBcInVybGxpYjJcIiwgXCJ1cmxsaWIucmVxdWVzdFwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwiQWJzdHJhY3REaWdlc3RBdXRoSGFuZGxlclwiLCBcInVybGxpYjJcIiwgXCJ1cmxsaWIucmVxdWVzdFwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwiSFRUUERpZ2VzdEF1dGhIYW5kbGVyXCIsIFwidXJsbGliMlwiLCBcInVybGxpYi5yZXF1ZXN0XCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJQcm94eURpZ2VzdEF1dGhIYW5kbGVyXCIsIFwidXJsbGliMlwiLCBcInVybGxpYi5yZXF1ZXN0XCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJIVFRQSGFuZGxlclwiLCBcInVybGxpYjJcIiwgXCJ1cmxsaWIucmVxdWVzdFwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwiSFRUUFNIYW5kbGVyXCIsIFwidXJsbGliMlwiLCBcInVybGxpYi5yZXF1ZXN0XCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJGaWxlSGFuZGxlclwiLCBcInVybGxpYjJcIiwgXCJ1cmxsaWIucmVxdWVzdFwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwiRlRQSGFuZGxlclwiLCBcInVybGxpYjJcIiwgXCJ1cmxsaWIucmVxdWVzdFwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwiQ2FjaGVGVFBIYW5kbGVyXCIsIFwidXJsbGliMlwiLCBcInVybGxpYi5yZXF1ZXN0XCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJVbmtub3duSGFuZGxlclwiLCBcInVybGxpYjJcIiwgXCJ1cmxsaWIucmVxdWVzdFwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwiSFRUUEVycm9yUHJvY2Vzc29yXCIsIFwidXJsbGliMlwiLCBcInVybGxpYi5yZXF1ZXN0XCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJ1cmxyZXRyaWV2ZVwiLCBcInVybGxpYlwiLCBcInVybGxpYi5yZXF1ZXN0XCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJ1cmxjbGVhbnVwXCIsIFwidXJsbGliXCIsIFwidXJsbGliLnJlcXVlc3RcIiksCiAgICBNb3ZlZEF0dHJpYnV0ZShcIlVSTG9wZW5lclwiLCBcInVybGxpYlwiLCBcInVybGxpYi5yZXF1ZXN0XCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJGYW5jeVVSTG9wZW5lclwiLCBcInVybGxpYlwiLCBcInVybGxpYi5yZXF1ZXN0XCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJwcm94eV9ieXBhc3NcIiwgXCJ1cmxsaWJcIiwgXCJ1cmxsaWIucmVxdWVzdFwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwicGFyc2VfaHR0cF9saXN0XCIsIFwidXJsbGliMlwiLCBcInVybGxpYi5yZXF1ZXN0XCIpLAogICAgTW92ZWRBdHRyaWJ1dGUoXCJwYXJzZV9rZXF2X2xpc3RcIiwgXCJ1cmxsaWIyXCIsIFwidXJsbGliLnJlcXVlc3RcIiksCl0KZm9yIGF0dHIgaW4gX3VybGxpYl9yZXF1ZXN0X21vdmVkX2F0dHJpYnV0ZXM6CiAgICBzZXRhdHRyKE1vZHVsZV9zaXhfbW92ZXNfdXJsbGliX3JlcXVlc3QsIGF0dHIubmFtZSwgYXR0cikKZGVsIGF0dHIKCk1vZHVsZV9zaXhfbW92ZXNfdXJsbGliX3JlcXVlc3QuX21vdmVkX2F0dHJpYnV0ZXMgPSBfdXJsbGliX3JlcXVlc3RfbW92ZWRfYXR0cmlidXRlcwoKX2ltcG9ydGVyLl9hZGRfbW9kdWxlKAogICAgTW9kdWxlX3NpeF9tb3Zlc191cmxsaWJfcmVxdWVzdChfX25hbWVfXyArIFwiLm1vdmVzLnVybGxpYi5yZXF1ZXN0XCIpLAogICAgXCJtb3Zlcy51cmxsaWJfcmVxdWVzdFwiLAogICAgXCJtb3Zlcy51cmxsaWIucmVxdWVzdFwiLAopCgoKY2xhc3MgTW9kdWxlX3NpeF9tb3Zlc191cmxsaWJfcmVzcG9uc2UoX0xhenlNb2R1bGUpOgoKICAgIFwiXCJcIkxhenkgbG9hZGluZyBvZiBtb3ZlZCBvYmplY3RzIGluIHNpeC5tb3Zlcy51cmxsaWJfcmVzcG9uc2VcIlwiXCIKCgpfdXJsbGliX3Jlc3BvbnNlX21vdmVkX2F0dHJpYnV0ZXMgPSBbCiAgICBNb3ZlZEF0dHJpYnV0ZShcImFkZGJhc2VcIiwgXCJ1cmxsaWJcIiwgXCJ1cmxsaWIucmVzcG9uc2VcIiksCiAgICBNb3ZlZEF0dHJpYnV0ZShcImFkZGNsb3NlaG9va1wiLCBcInVybGxpYlwiLCBcInVybGxpYi5yZXNwb25zZVwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwiYWRkaW5mb1wiLCBcInVybGxpYlwiLCBcInVybGxpYi5yZXNwb25zZVwiKSwKICAgIE1vdmVkQXR0cmlidXRlKFwiYWRkaW5mb3VybFwiLCBcInVybGxpYlwiLCBcInVybGxpYi5yZXNwb25zZVwiKSwKXQpmb3IgYXR0ciBpbiBfdXJsbGliX3Jlc3BvbnNlX21vdmVkX2F0dHJpYnV0ZXM6CiAgICBzZXRhdHRyKE1vZHVsZV9zaXhfbW92ZXNfdXJsbGliX3Jlc3BvbnNlLCBhdHRyLm5hbWUsIGF0dHIpCmRlbCBhdHRyCgpNb2R1bGVfc2l4X21vdmVzX3VybGxpYl9yZXNwb25zZS5fbW92ZWRfYXR0cmlidXRlcyA9IF91cmxsaWJfcmVzcG9uc2VfbW92ZWRfYXR0cmlidXRlcwoKX2ltcG9ydGVyLl9hZGRfbW9kdWxlKAogICAgTW9kdWxlX3NpeF9tb3Zlc191cmxsaWJfcmVzcG9uc2UoX19uYW1lX18gKyBcIi5tb3Zlcy51cmxsaWIucmVzcG9uc2VcIiksCiAgICBcIm1vdmVzLnVybGxpYl9yZXNwb25zZVwiLAogICAgXCJtb3Zlcy51cmxsaWIucmVzcG9uc2VcIiwKKQoKCmNsYXNzIE1vZHVsZV9zaXhfbW92ZXNfdXJsbGliX3JvYm90cGFyc2VyKF9MYXp5TW9kdWxlKToKCiAgICBcIlwiXCJMYXp5IGxvYWRpbmcgb2YgbW92ZWQgb2JqZWN0cyBpbiBzaXgubW92ZXMudXJsbGliX3JvYm90cGFyc2VyXCJcIlwiCgoKX3VybGxpYl9yb2JvdHBhcnNlcl9tb3ZlZF9hdHRyaWJ1dGVzID0gWwogICAgTW92ZWRBdHRyaWJ1dGUoXCJSb2JvdEZpbGVQYXJzZXJcIiwgXCJyb2JvdHBhcnNlclwiLCBcInVybGxpYi5yb2JvdHBhcnNlclwiKSwKXQpmb3IgYXR0ciBpbiBfdXJsbGliX3JvYm90cGFyc2VyX21vdmVkX2F0dHJpYnV0ZXM6CiAgICBzZXRhdHRyKE1vZHVsZV9zaXhfbW92ZXNfdXJsbGliX3JvYm90cGFyc2VyLCBhdHRyLm5hbWUsIGF0dHIpCmRlbCBhdHRyCgpNb2R1bGVfc2l4X21vdmVzX3VybGxpYl9yb2JvdHBhcnNlci5fbW92ZWRfYXR0cmlidXRlcyA9ICgKICAgIF91cmxsaWJfcm9ib3RwYXJzZXJfbW92ZWRfYXR0cmlidXRlcwopCgpfaW1wb3J0ZXIuX2FkZF9tb2R1bGUoCiAgICBNb2R1bGVfc2l4X21vdmVzX3VybGxpYl9yb2JvdHBhcnNlcihfX25hbWVfXyArIFwiLm1vdmVzLnVybGxpYi5yb2JvdHBhcnNlclwiKSwKICAgIFwibW92ZXMudXJsbGliX3JvYm90cGFyc2VyXCIsCiAgICBcIm1vdmVzLnVybGxpYi5yb2JvdHBhcnNlclwiLAopCgoKY2xhc3MgTW9kdWxlX3NpeF9tb3Zlc191cmxsaWIodHlwZXMuTW9kdWxlVHlwZSk6CgogICAgXCJcIlwiQ3JlYXRlIGEgc2l4Lm1vdmVzLnVybGxpYiBuYW1lc3BhY2UgdGhhdCByZXNlbWJsZXMgdGhlIFB5dGhvbiAzIG5hbWVzcGFjZVwiXCJcIgoKICAgIF9fcGF0aF9fID0gW10gICMgbWFyayBhcyBwYWNrYWdlCiAgICBwYXJzZSA9IF9pbXBvcnRlci5fZ2V0X21vZHVsZShcIm1vdmVzLnVybGxpYl9wYXJzZVwiKQogICAgZXJyb3IgPSBfaW1wb3J0ZXIuX2dldF9tb2R1bGUoXCJtb3Zlcy51cmxsaWJfZXJyb3JcIikKICAgIHJlcXVlc3QgPSBfaW1wb3J0ZXIuX2dldF9tb2R1bGUoXCJtb3Zlcy51cmxsaWJfcmVxdWVzdFwiKQogICAgcmVzcG9uc2UgPSBfaW1wb3J0ZXIuX2dldF9tb2R1bGUoXCJtb3Zlcy51cmxsaWJfcmVzcG9uc2VcIikKICAgIHJvYm90cGFyc2VyID0gX2ltcG9ydGVyLl9nZXRfbW9kdWxlKFwibW92ZXMudXJsbGliX3JvYm90cGFyc2VyXCIpCgogICAgZGVmIF9fZGlyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIFtcInBhcnNlXCIsIFwiZXJyb3JcIiwgXCJyZXF1ZXN0XCIsIFwicmVzcG9uc2VcIiwgXCJyb2JvdHBhcnNlclwiXQoKCl9pbXBvcnRlci5fYWRkX21vZHVsZSgKICAgIE1vZHVsZV9zaXhfbW92ZXNfdXJsbGliKF9fbmFtZV9fICsgXCIubW92ZXMudXJsbGliXCIpLCBcIm1vdmVzLnVybGxpYlwiCikKCgpkZWYgYWRkX21vdmUobW92ZSk6CiAgICBcIlwiXCJBZGQgYW4gaXRlbSB0byBzaXgubW92ZXMuXCJcIlwiCiAgICBzZXRhdHRyKF9Nb3ZlZEl0ZW1zLCBtb3ZlLm5hbWUsIG1vdmUpCgoKZGVmIHJlbW92ZV9tb3ZlKG5hbWUpOgogICAgXCJcIlwiUmVtb3ZlIGl0ZW0gZnJvbSBzaXgubW92ZXMuXCJcIlwiCiAgICB0cnk6CiAgICAgICAgZGVsYXR0cihfTW92ZWRJdGVtcywgbmFtZSkKICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGRlbCBtb3Zlcy5fX2RpY3RfX1tuYW1lXQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgcmFpc2UgQXR0cmlidXRlRXJyb3IoXCJubyBzdWNoIG1vdmUsICVyXCIgJSAobmFtZSwpKQoKCmlmIFBZMzoKICAgIF9tZXRoX2Z1bmMgPSBcIl9fZnVuY19fXCIKICAgIF9tZXRoX3NlbGYgPSBcIl9fc2VsZl9fXCIKCiAgICBfZnVuY19jbG9zdXJlID0gXCJfX2Nsb3N1cmVfX1wiCiAgICBfZnVuY19jb2RlID0gXCJfX2NvZGVfX1wiCiAgICBfZnVuY19kZWZhdWx0cyA9IFwiX19kZWZhdWx0c19fXCIKICAgIF9mdW5jX2dsb2JhbHMgPSBcIl9fZ2xvYmFsc19fXCIKZWxzZToKICAgIF9tZXRoX2Z1bmMgPSBcImltX2Z1bmNcIgogICAgX21ldGhfc2VsZiA9IFwiaW1fc2VsZlwiCgogICAgX2Z1bmNfY2xvc3VyZSA9IFwiZnVuY19jbG9zdXJlXCIKICAgIF9mdW5jX2NvZGUgPSBcImZ1bmNfY29kZVwiCiAgICBfZnVuY19kZWZhdWx0cyA9IFwiZnVuY19kZWZhdWx0c1wiCiAgICBfZnVuY19nbG9iYWxzID0gXCJmdW5jX2dsb2JhbHNcIgoKCnRyeToKICAgIGFkdmFuY2VfaXRlcmF0b3IgPSBuZXh0CmV4Y2VwdCBOYW1lRXJyb3I6CgogICAgZGVmIGFkdmFuY2VfaXRlcmF0b3IoaXQpOgogICAgICAgIHJldHVybiBpdC5uZXh0KCkKCgpuZXh0ID0gYWR2YW5jZV9pdGVyYXRvcgoKCnRyeToKICAgIGNhbGxhYmxlID0gY2FsbGFibGUKZXhjZXB0IE5hbWVFcnJvcjoKCiAgICBkZWYgY2FsbGFibGUob2JqKToKICAgICAgICByZXR1cm4gYW55KFwiX19jYWxsX19cIiBpbiBrbGFzcy5fX2RpY3RfXyBmb3Iga2xhc3MgaW4gdHlwZShvYmopLl9fbXJvX18pCgoKaWYgUFkzOgoKICAgIGRlZiBnZXRfdW5ib3VuZF9mdW5jdGlvbih1bmJvdW5kKToKICAgICAgICByZXR1cm4gdW5ib3VuZAoKICAgIGNyZWF0ZV9ib3VuZF9tZXRob2QgPSB0eXBlcy5NZXRob2RUeXBlCgogICAgZGVmIGNyZWF0ZV91bmJvdW5kX21ldGhvZChmdW5jLCBjbHMpOgogICAgICAgIHJldHVybiBmdW5jCgogICAgSXRlcmF0b3IgPSBvYmplY3QKZWxzZToKCiAgICBkZWYgZ2V0X3VuYm91bmRfZnVuY3Rpb24odW5ib3VuZCk6CiAgICAgICAgcmV0dXJuIHVuYm91bmQuaW1fZnVuYwoKICAgIGRlZiBjcmVhdGVfYm91bmRfbWV0aG9kKGZ1bmMsIG9iaik6CiAgICAgICAgcmV0dXJuIHR5cGVzLk1ldGhvZFR5cGUoZnVuYywgb2JqLCBvYmouX19jbGFzc19fKQoKICAgIGRlZiBjcmVhdGVfdW5ib3VuZF9tZXRob2QoZnVuYywgY2xzKToKICAgICAgICByZXR1cm4gdHlwZXMuTWV0aG9kVHlwZShmdW5jLCBOb25lLCBjbHMpCgogICAgY2xhc3MgSXRlcmF0b3Iob2JqZWN0KToKICAgICAgICBkZWYgbmV4dChzZWxmKToKICAgICAgICAgICAgcmV0dXJuIHR5cGUoc2VsZikuX19uZXh0X18oc2VsZikKCiAgICBjYWxsYWJsZSA9IGNhbGxhYmxlCl9hZGRfZG9jKAogICAgZ2V0X3VuYm91bmRfZnVuY3Rpb24sIFwiXCJcIkdldCB0aGUgZnVuY3Rpb24gb3V0IG9mIGEgcG9zc2libHkgdW5ib3VuZCBmdW5jdGlvblwiXCJcIgopCgoKZ2V0X21ldGhvZF9mdW5jdGlvbiA9IG9wZXJhdG9yLmF0dHJnZXR0ZXIoX21ldGhfZnVuYykKZ2V0X21ldGhvZF9zZWxmID0gb3BlcmF0b3IuYXR0cmdldHRlcihfbWV0aF9zZWxmKQpnZXRfZnVuY3Rpb25fY2xvc3VyZSA9IG9wZXJhdG9yLmF0dHJnZXR0ZXIoX2Z1bmNfY2xvc3VyZSkKZ2V0X2Z1bmN0aW9uX2NvZGUgPSBvcGVyYXRvci5hdHRyZ2V0dGVyKF9mdW5jX2NvZGUpCmdldF9mdW5jdGlvbl9kZWZhdWx0cyA9IG9wZXJhdG9yLmF0dHJnZXR0ZXIoX2Z1bmNfZGVmYXVsdHMpCmdldF9mdW5jdGlvbl9nbG9iYWxzID0gb3BlcmF0b3IuYXR0cmdldHRlcihfZnVuY19nbG9iYWxzKQoKCmlmIFBZMzoKCiAgICBkZWYgaXRlcmtleXMoZCwgKiprdyk6CiAgICAgICAgcmV0dXJuIGl0ZXIoZC5rZXlzKCoqa3cpKQoKICAgIGRlZiBpdGVydmFsdWVzKGQsICoqa3cpOgogICAgICAgIHJldHVybiBpdGVyKGQudmFsdWVzKCoqa3cpKQoKICAgIGRlZiBpdGVyaXRlbXMoZCwgKiprdyk6CiAgICAgICAgcmV0dXJuIGl0ZXIoZC5pdGVtcygqKmt3KSkKCiAgICBkZWYgaXRlcmxpc3RzKGQsICoqa3cpOgogICAgICAgIHJldHVybiBpdGVyKGQubGlzdHMoKiprdykpCgogICAgdmlld2tleXMgPSBvcGVyYXRvci5tZXRob2RjYWxsZXIoXCJrZXlzXCIpCgogICAgdmlld3ZhbHVlcyA9IG9wZXJhdG9yLm1ldGhvZGNhbGxlcihcInZhbHVlc1wiKQoKICAgIHZpZXdpdGVtcyA9IG9wZXJhdG9yLm1ldGhvZGNhbGxlcihcIml0ZW1zXCIpCmVsc2U6CgogICAgZGVmIGl0ZXJrZXlzKGQsICoqa3cpOgogICAgICAgIHJldHVybiBkLml0ZXJrZXlzKCoqa3cpCgogICAgZGVmIGl0ZXJ2YWx1ZXMoZCwgKiprdyk6CiAgICAgICAgcmV0dXJuIGQuaXRlcnZhbHVlcygqKmt3KQoKICAgIGRlZiBpdGVyaXRlbXMoZCwgKiprdyk6CiAgICAgICAgcmV0dXJuIGQuaXRlcml0ZW1zKCoqa3cpCgogICAgZGVmIGl0ZXJsaXN0cyhkLCAqKmt3KToKICAgICAgICByZXR1cm4gZC5pdGVybGlzdHMoKiprdykKCiAgICB2aWV3a2V5cyA9IG9wZXJhdG9yLm1ldGhvZGNhbGxlcihcInZpZXdrZXlzXCIpCgogICAgdmlld3ZhbHVlcyA9IG9wZXJhdG9yLm1ldGhvZGNhbGxlcihcInZpZXd2YWx1ZXNcIikKCiAgICB2aWV3aXRlbXMgPSBvcGVyYXRvci5tZXRob2RjYWxsZXIoXCJ2aWV3aXRlbXNcIikKCl9hZGRfZG9jKGl0ZXJrZXlzLCBcIlJldHVybiBhbiBpdGVyYXRvciBvdmVyIHRoZSBrZXlzIG9mIGEgZGljdGlvbmFyeS5cIikKX2FkZF9kb2MoaXRlcnZhbHVlcywgXCJSZXR1cm4gYW4gaXRlcmF0b3Igb3ZlciB0aGUgdmFsdWVzIG9mIGEgZGljdGlvbmFyeS5cIikKX2FkZF9kb2MoaXRlcml0ZW1zLCBcIlJldHVybiBhbiBpdGVyYXRvciBvdmVyIHRoZSAoa2V5LCB2YWx1ZSkgcGFpcnMgb2YgYSBkaWN0aW9uYXJ5LlwiKQpfYWRkX2RvYygKICAgIGl0ZXJsaXN0cywgXCJSZXR1cm4gYW4gaXRlcmF0b3Igb3ZlciB0aGUgKGtleSwgW3ZhbHVlc10pIHBhaXJzIG9mIGEgZGljdGlvbmFyeS5cIgopCgoKaWYgUFkzOgoKICAgIGRlZiBiKHMpOgogICAgICAgIHJldHVybiBzLmVuY29kZShcImxhdGluLTFcIikKCiAgICBkZWYgdShzKToKICAgICAgICByZXR1cm4gcwoKICAgIHVuaWNociA9IGNocgogICAgaW1wb3J0IHN0cnVjdAoKICAgIGludDJieXRlID0gc3RydWN0LlN0cnVjdChcIj5CXCIpLnBhY2sKICAgIGRlbCBzdHJ1Y3QKICAgIGJ5dGUyaW50ID0gb3BlcmF0b3IuaXRlbWdldHRlcigwKQogICAgaW5kZXhieXRlcyA9IG9wZXJhdG9yLmdldGl0ZW0KICAgIGl0ZXJieXRlcyA9IGl0ZXIKICAgIGltcG9ydCBpbwoKICAgIFN0cmluZ0lPID0gaW8uU3RyaW5nSU8KICAgIEJ5dGVzSU8gPSBpby5CeXRlc0lPCiAgICBkZWwgaW8KICAgIF9hc3NlcnRDb3VudEVxdWFsID0gXCJhc3NlcnRDb3VudEVxdWFsXCIKICAgIGlmIHN5cy52ZXJzaW9uX2luZm9bMV0gPD0gMToKICAgICAgICBfYXNzZXJ0UmFpc2VzUmVnZXggPSBcImFzc2VydFJhaXNlc1JlZ2V4cFwiCiAgICAgICAgX2Fzc2VydFJlZ2V4ID0gXCJhc3NlcnRSZWdleHBNYXRjaGVzXCIKICAgICAgICBfYXNzZXJ0Tm90UmVnZXggPSBcImFzc2VydE5vdFJlZ2V4cE1hdGNoZXNcIgogICAgZWxzZToKICAgICAgICBfYXNzZXJ0UmFpc2VzUmVnZXggPSBcImFzc2VydFJhaXNlc1JlZ2V4XCIKICAgICAgICBfYXNzZXJ0UmVnZXggPSBcImFzc2VydFJlZ2V4XCIKICAgICAgICBfYXNzZXJ0Tm90UmVnZXggPSBcImFzc2VydE5vdFJlZ2V4XCIKZWxzZToKCiAgICBkZWYgYihzKToKICAgICAgICByZXR1cm4gcwoKICAgICMgV29ya2Fyb3VuZCBmb3Igc3RhbmRhbG9uZSBiYWNrc2xhc2gKCiAgICBkZWYgdShzKToKICAgICAgICByZXR1cm4gdW5pY29kZShzLnJlcGxhY2UoclwiXFxcXFwiLCByXCJcXFxcXFxcXFwiKSwgXCJ1bmljb2RlX2VzY2FwZVwiKQoKICAgIHVuaWNociA9IHVuaWNocgogICAgaW50MmJ5dGUgPSBjaHIKCiAgICBkZWYgYnl0ZTJpbnQoYnMpOgogICAgICAgIHJldHVybiBvcmQoYnNbMF0pCgogICAgZGVmIGluZGV4Ynl0ZXMoYnVmLCBpKToKICAgICAgICByZXR1cm4gb3JkKGJ1ZltpXSkKCiAgICBpdGVyYnl0ZXMgPSBmdW5jdG9vbHMucGFydGlhbChpdGVydG9vbHMuaW1hcCwgb3JkKQogICAgaW1wb3J0IFN0cmluZ0lPCgogICAgU3RyaW5nSU8gPSBCeXRlc0lPID0gU3RyaW5nSU8uU3RyaW5nSU8KICAgIF9hc3NlcnRDb3VudEVxdWFsID0gXCJhc3NlcnRJdGVtc0VxdWFsXCIKICAgIF9hc3NlcnRSYWlzZXNSZWdleCA9IFwiYXNzZXJ0UmFpc2VzUmVnZXhwXCIKICAgIF9hc3NlcnRSZWdleCA9IFwiYXNzZXJ0UmVnZXhwTWF0Y2hlc1wiCiAgICBfYXNzZXJ0Tm90UmVnZXggPSBcImFzc2VydE5vdFJlZ2V4cE1hdGNoZXNcIgpfYWRkX2RvYyhiLCBcIlwiXCJCeXRlIGxpdGVyYWxcIlwiXCIpCl9hZGRfZG9jKHUsIFwiXCJcIlRleHQgbGl0ZXJhbFwiXCJcIikKCgpkZWYgYXNzZXJ0Q291bnRFcXVhbChzZWxmLCAqYXJncywgKiprd2FyZ3MpOgogICAgcmV0dXJuIGdldGF0dHIoc2VsZiwgX2Fzc2VydENvdW50RXF1YWwpKCphcmdzLCAqKmt3YXJncykKCgpkZWYgYXNzZXJ0UmFpc2VzUmVnZXgoc2VsZiwgKmFyZ3MsICoqa3dhcmdzKToKICAgIHJldHVybiBnZXRhdHRyKHNlbGYsIF9hc3NlcnRSYWlzZXNSZWdleCkoKmFyZ3MsICoqa3dhcmdzKQoKCmRlZiBhc3NlcnRSZWdleChzZWxmLCAqYXJncywgKiprd2FyZ3MpOgogICAgcmV0dXJuIGdldGF0dHIoc2VsZiwgX2Fzc2VydFJlZ2V4KSgqYXJncywgKiprd2FyZ3MpCgoKZGVmIGFzc2VydE5vdFJlZ2V4KHNlbGYsICphcmdzLCAqKmt3YXJncyk6CiAgICByZXR1cm4gZ2V0YXR0cihzZWxmLCBfYXNzZXJ0Tm90UmVnZXgpKCphcmdzLCAqKmt3YXJncykKCgppZiBQWTM6CiAgICBleGVjXyA9IGdldGF0dHIobW92ZXMuYnVpbHRpbnMsIFwiZXhlY1wiKQoKICAgIGRlZiByZXJhaXNlKHRwLCB2YWx1ZSwgdGI9Tm9uZSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBpZiB2YWx1ZSBpcyBOb25lOgogICAgICAgICAgICAgICAgdmFsdWUgPSB0cCgpCiAgICAgICAgICAgIGlmIHZhbHVlLl9fdHJhY2ViYWNrX18gaXMgbm90IHRiOgogICAgICAgICAgICAgICAgcmFpc2UgdmFsdWUud2l0aF90cmFjZWJhY2sodGIpCiAgICAgICAgICAgIHJhaXNlIHZhbHVlCiAgICAgICAgZmluYWxseToKICAgICAgICAgICAgdmFsdWUgPSBOb25lCiAgICAgICAgICAgIHRiID0gTm9uZQoKZWxzZToKCiAgICBkZWYgZXhlY18oX2NvZGVfLCBfZ2xvYnNfPU5vbmUsIF9sb2NzXz1Ob25lKToKICAgICAgICBcIlwiXCJFeGVjdXRlIGNvZGUgaW4gYSBuYW1lc3BhY2UuXCJcIlwiCiAgICAgICAgaWYgX2dsb2JzXyBpcyBOb25lOgogICAgICAgICAgICBmcmFtZSA9IHN5cy5fZ2V0ZnJhbWUoMSkKICAgICAgICAgICAgX2dsb2JzXyA9IGZyYW1lLmZfZ2xvYmFscwogICAgICAgICAgICBpZiBfbG9jc18gaXMgTm9uZToKICAgICAgICAgICAgICAgIF9sb2NzXyA9IGZyYW1lLmZfbG9jYWxzCiAgICAgICAgICAgIGRlbCBmcmFtZQogICAgICAgIGVsaWYgX2xvY3NfIGlzIE5vbmU6CiAgICAgICAgICAgIF9sb2NzXyA9IF9nbG9ic18KICAgICAgICBleGVjIChcIlwiXCJleGVjIF9jb2RlXyBpbiBfZ2xvYnNfLCBfbG9jc19cIlwiXCIpCgogICAgZXhlY18oCiAgICAgICAgXCJcIlwiZGVmIHJlcmFpc2UodHAsIHZhbHVlLCB0Yj1Ob25lKToKICAgIHRyeToKICAgICAgICByYWlzZSB0cCwgdmFsdWUsIHRiCiAgICBmaW5hbGx5OgogICAgICAgIHRiID0gTm9uZQpcIlwiXCIKICAgICkKCgppZiBzeXMudmVyc2lvbl9pbmZvWzoyXSA+ICgzLCk6CiAgICBleGVjXygKICAgICAgICBcIlwiXCJkZWYgcmFpc2VfZnJvbSh2YWx1ZSwgZnJvbV92YWx1ZSk6CiAgICB0cnk6CiAgICAgICAgcmFpc2UgdmFsdWUgZnJvbSBmcm9tX3ZhbHVlCiAgICBmaW5hbGx5OgogICAgICAgIHZhbHVlID0gTm9uZQpcIlwiXCIKICAgICkKZWxzZToKCiAgICBkZWYgcmFpc2VfZnJvbSh2YWx1ZSwgZnJvbV92YWx1ZSk6CiAgICAgICAgcmFpc2UgdmFsdWUKCgpwcmludF8gPSBnZXRhdHRyKG1vdmVzLmJ1aWx0aW5zLCBcInByaW50XCIsIE5vbmUpCmlmIHByaW50XyBpcyBOb25lOgoKICAgIGRlZiBwcmludF8oKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICBcIlwiXCJUaGUgbmV3LXN0eWxlIHByaW50IGZ1bmN0aW9uIGZvciBQeXRob24gMi40IGFuZCAyLjUuXCJcIlwiCiAgICAgICAgZnAgPSBrd2FyZ3MucG9wKFwiZmlsZVwiLCBzeXMuc3Rkb3V0KQogICAgICAgIGlmIGZwIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBkZWYgd3JpdGUoZGF0YSk6CiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGRhdGEsIGJhc2VzdHJpbmcpOgogICAgICAgICAgICAgICAgZGF0YSA9IHN0cihkYXRhKQogICAgICAgICAgICAjIElmIHRoZSBmaWxlIGhhcyBhbiBlbmNvZGluZywgZW5jb2RlIHVuaWNvZGUgd2l0aCBpdC4KICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgaXNpbnN0YW5jZShmcCwgZmlsZSkKICAgICAgICAgICAgICAgIGFuZCBpc2luc3RhbmNlKGRhdGEsIHVuaWNvZGUpCiAgICAgICAgICAgICAgICBhbmQgZnAuZW5jb2RpbmcgaXMgbm90IE5vbmUKICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgIGVycm9ycyA9IGdldGF0dHIoZnAsIFwiZXJyb3JzXCIsIE5vbmUpCiAgICAgICAgICAgICAgICBpZiBlcnJvcnMgaXMgTm9uZToKICAgICAgICAgICAgICAgICAgICBlcnJvcnMgPSBcInN0cmljdFwiCiAgICAgICAgICAgICAgICBkYXRhID0gZGF0YS5lbmNvZGUoZnAuZW5jb2RpbmcsIGVycm9ycykKICAgICAgICAgICAgZnAud3JpdGUoZGF0YSkKCiAgICAgICAgd2FudF91bmljb2RlID0gRmFsc2UKICAgICAgICBzZXAgPSBrd2FyZ3MucG9wKFwic2VwXCIsIE5vbmUpCiAgICAgICAgaWYgc2VwIGlzIG5vdCBOb25lOgogICAgICAgICAgICBpZiBpc2luc3RhbmNlKHNlcCwgdW5pY29kZSk6CiAgICAgICAgICAgICAgICB3YW50X3VuaWNvZGUgPSBUcnVlCiAgICAgICAgICAgIGVsaWYgbm90IGlzaW5zdGFuY2Uoc2VwLCBzdHIpOgogICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFwic2VwIG11c3QgYmUgTm9uZSBvciBhIHN0cmluZ1wiKQogICAgICAgIGVuZCA9IGt3YXJncy5wb3AoXCJlbmRcIiwgTm9uZSkKICAgICAgICBpZiBlbmQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoZW5kLCB1bmljb2RlKToKICAgICAgICAgICAgICAgIHdhbnRfdW5pY29kZSA9IFRydWUKICAgICAgICAgICAgZWxpZiBub3QgaXNpbnN0YW5jZShlbmQsIHN0cik6CiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXCJlbmQgbXVzdCBiZSBOb25lIG9yIGEgc3RyaW5nXCIpCiAgICAgICAgaWYga3dhcmdzOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXCJpbnZhbGlkIGtleXdvcmQgYXJndW1lbnRzIHRvIHByaW50KClcIikKICAgICAgICBpZiBub3Qgd2FudF91bmljb2RlOgogICAgICAgICAgICBmb3IgYXJnIGluIGFyZ3M6CiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKGFyZywgdW5pY29kZSk6CiAgICAgICAgICAgICAgICAgICAgd2FudF91bmljb2RlID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgaWYgd2FudF91bmljb2RlOgogICAgICAgICAgICBuZXdsaW5lID0gdW5pY29kZShcIlxcblwiKQogICAgICAgICAgICBzcGFjZSA9IHVuaWNvZGUoXCIgXCIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbmV3bGluZSA9IFwiXFxuXCIKICAgICAgICAgICAgc3BhY2UgPSBcIiBcIgogICAgICAgIGlmIHNlcCBpcyBOb25lOgogICAgICAgICAgICBzZXAgPSBzcGFjZQogICAgICAgIGlmIGVuZCBpcyBOb25lOgogICAgICAgICAgICBlbmQgPSBuZXdsaW5lCiAgICAgICAgZm9yIGksIGFyZyBpbiBlbnVtZXJhdGUoYXJncyk6CiAgICAgICAgICAgIGlmIGk6CiAgICAgICAgICAgICAgICB3cml0ZShzZXApCiAgICAgICAgICAgIHdyaXRlKGFyZykKICAgICAgICB3cml0ZShlbmQpCgoKaWYgc3lzLnZlcnNpb25faW5mb1s6Ml0gPCAoMywgMyk6CiAgICBfcHJpbnQgPSBwcmludF8KCiAgICBkZWYgcHJpbnRfKCphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgZnAgPSBrd2FyZ3MuZ2V0KFwiZmlsZVwiLCBzeXMuc3Rkb3V0KQogICAgICAgIGZsdXNoID0ga3dhcmdzLnBvcChcImZsdXNoXCIsIEZhbHNlKQogICAgICAgIF9wcmludCgqYXJncywgKiprd2FyZ3MpCiAgICAgICAgaWYgZmx1c2ggYW5kIGZwIGlzIG5vdCBOb25lOgogICAgICAgICAgICBmcC5mbHVzaCgpCgoKX2FkZF9kb2MocmVyYWlzZSwgXCJcIlwiUmVyYWlzZSBhbiBleGNlcHRpb24uXCJcIlwiKQoKaWYgc3lzLnZlcnNpb25faW5mb1swOjJdIDwgKDMsIDQpOgogICAgIyBUaGlzIGRvZXMgZXhhY3RseSB0aGUgc2FtZSB3aGF0IHRoZSA6ZnVuYzpgcHkzOmZ1bmN0b29scy51cGRhdGVfd3JhcHBlcmAKICAgICMgZnVuY3Rpb24gZG9lcyBvbiBQeXRob24gdmVyc2lvbnMgYWZ0ZXIgMy4yLiBJdCBzZXRzIHRoZSBgYF9fd3JhcHBlZF9fYGAKICAgICMgYXR0cmlidXRlIG9uIGBgd3JhcHBlcmBgIG9iamVjdCBhbmQgaXQgZG9lc24ndCByYWlzZSBhbiBlcnJvciBpZiBhbnkgb2YKICAgICMgdGhlIGF0dHJpYnV0ZXMgbWVudGlvbmVkIGluIGBgYXNzaWduZWRgYCBhbmQgYGB1cGRhdGVkYGAgYXJlIG1pc3Npbmcgb24KICAgICMgYGB3cmFwcGVkYGAgb2JqZWN0LgogICAgZGVmIF91cGRhdGVfd3JhcHBlcigKICAgICAgICB3cmFwcGVyLAogICAgICAgIHdyYXBwZWQsCiAgICAgICAgYXNzaWduZWQ9ZnVuY3Rvb2xzLldSQVBQRVJfQVNTSUdOTUVOVFMsCiAgICAgICAgdXBkYXRlZD1mdW5jdG9vbHMuV1JBUFBFUl9VUERBVEVTLAogICAgKToKICAgICAgICBmb3IgYXR0ciBpbiBhc3NpZ25lZDoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgdmFsdWUgPSBnZXRhdHRyKHdyYXBwZWQsIGF0dHIpCiAgICAgICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZXRhdHRyKHdyYXBwZXIsIGF0dHIsIHZhbHVlKQogICAgICAgIGZvciBhdHRyIGluIHVwZGF0ZWQ6CiAgICAgICAgICAgIGdldGF0dHIod3JhcHBlciwgYXR0cikudXBkYXRlKGdldGF0dHIod3JhcHBlZCwgYXR0ciwge30pKQogICAgICAgIHdyYXBwZXIuX193cmFwcGVkX18gPSB3cmFwcGVkCiAgICAgICAgcmV0dXJuIHdyYXBwZXIKCiAgICBfdXBkYXRlX3dyYXBwZXIuX19kb2NfXyA9IGZ1bmN0b29scy51cGRhdGVfd3JhcHBlci5fX2RvY19fCgogICAgZGVmIHdyYXBzKAogICAgICAgIHdyYXBwZWQsCiAgICAgICAgYXNzaWduZWQ9ZnVuY3Rvb2xzLldSQVBQRVJfQVNTSUdOTUVOVFMsCiAgICAgICAgdXBkYXRlZD1mdW5jdG9vbHMuV1JBUFBFUl9VUERBVEVTLAogICAgKToKICAgICAgICByZXR1cm4gZnVuY3Rvb2xzLnBhcnRpYWwoCiAgICAgICAgICAgIF91cGRhdGVfd3JhcHBlciwgd3JhcHBlZD13cmFwcGVkLCBhc3NpZ25lZD1hc3NpZ25lZCwgdXBkYXRlZD11cGRhdGVkCiAgICAgICAgKQoKICAgIHdyYXBzLl9fZG9jX18gPSBmdW5jdG9vbHMud3JhcHMuX19kb2NfXwoKZWxzZToKICAgIHdyYXBzID0gZnVuY3Rvb2xzLndyYXBzCgoKZGVmIHdpdGhfbWV0YWNsYXNzKG1ldGEsICpiYXNlcyk6CiAgICBcIlwiXCJDcmVhdGUgYSBiYXNlIGNsYXNzIHdpdGggYSBtZXRhY2xhc3MuXCJcIlwiCiAgICAjIFRoaXMgcmVxdWlyZXMgYSBiaXQgb2YgZXhwbGFuYXRpb246IHRoZSBiYXNpYyBpZGVhIGlzIHRvIG1ha2UgYSBkdW1teQogICAgIyBtZXRhY2xhc3MgZm9yIG9uZSBsZXZlbCBvZiBjbGFzcyBpbnN0YW50aWF0aW9uIHRoYXQgcmVwbGFjZXMgaXRzZWxmIHdpdGgKICAgICMgdGhlIGFjdHVhbCBtZXRhY2xhc3MuCiAgICBjbGFzcyBtZXRhY2xhc3ModHlwZSk6CiAgICAgICAgZGVmIF9fbmV3X18oY2xzLCBuYW1lLCB0aGlzX2Jhc2VzLCBkKToKICAgICAgICAgICAgaWYgc3lzLnZlcnNpb25faW5mb1s6Ml0gPj0gKDMsIDcpOgogICAgICAgICAgICAgICAgIyBUaGlzIHZlcnNpb24gaW50cm9kdWNlZCBQRVAgNTYwIHRoYXQgcmVxdWlyZXMgYSBiaXQKICAgICAgICAgICAgICAgICMgb2YgZXh0cmEgY2FyZSAod2UgbWltaWMgd2hhdCBpcyBkb25lIGJ5IF9fYnVpbGRfY2xhc3NfXykuCiAgICAgICAgICAgICAgICByZXNvbHZlZF9iYXNlcyA9IHR5cGVzLnJlc29sdmVfYmFzZXMoYmFzZXMpCiAgICAgICAgICAgICAgICBpZiByZXNvbHZlZF9iYXNlcyBpcyBub3QgYmFzZXM6CiAgICAgICAgICAgICAgICAgICAgZFtcIl9fb3JpZ19iYXNlc19fXCJdID0gYmFzZXMKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJlc29sdmVkX2Jhc2VzID0gYmFzZXMKICAgICAgICAgICAgcmV0dXJuIG1ldGEobmFtZSwgcmVzb2x2ZWRfYmFzZXMsIGQpCgogICAgICAgIEBjbGFzc21ldGhvZAogICAgICAgIGRlZiBfX3ByZXBhcmVfXyhjbHMsIG5hbWUsIHRoaXNfYmFzZXMpOgogICAgICAgICAgICByZXR1cm4gbWV0YS5fX3ByZXBhcmVfXyhuYW1lLCBiYXNlcykKCiAgICByZXR1cm4gdHlwZS5fX25ld19fKG1ldGFjbGFzcywgXCJ0ZW1wb3JhcnlfY2xhc3NcIiwgKCksIHt9KQoKCmRlZiBhZGRfbWV0YWNsYXNzKG1ldGFjbGFzcyk6CiAgICBcIlwiXCJDbGFzcyBkZWNvcmF0b3IgZm9yIGNyZWF0aW5nIGEgY2xhc3Mgd2l0aCBhIG1ldGFjbGFzcy5cIlwiXCIKCiAgICBkZWYgd3JhcHBlcihjbHMpOgogICAgICAgIG9yaWdfdmFycyA9IGNscy5fX2RpY3RfXy5jb3B5KCkKICAgICAgICBzbG90cyA9IG9yaWdfdmFycy5nZXQoXCJfX3Nsb3RzX19cIikKICAgICAgICBpZiBzbG90cyBpcyBub3QgTm9uZToKICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShzbG90cywgc3RyKToKICAgICAgICAgICAgICAgIHNsb3RzID0gW3Nsb3RzXQogICAgICAgICAgICBmb3Igc2xvdHNfdmFyIGluIHNsb3RzOgogICAgICAgICAgICAgICAgb3JpZ192YXJzLnBvcChzbG90c192YXIpCiAgICAgICAgb3JpZ192YXJzLnBvcChcIl9fZGljdF9fXCIsIE5vbmUpCiAgICAgICAgb3JpZ192YXJzLnBvcChcIl9fd2Vha3JlZl9fXCIsIE5vbmUpCiAgICAgICAgaWYgaGFzYXR0cihjbHMsIFwiX19xdWFsbmFtZV9fXCIpOgogICAgICAgICAgICBvcmlnX3ZhcnNbXCJfX3F1YWxuYW1lX19cIl0gPSBjbHMuX19xdWFsbmFtZV9fCiAgICAgICAgcmV0dXJuIG1ldGFjbGFzcyhjbHMuX19uYW1lX18sIGNscy5fX2Jhc2VzX18sIG9yaWdfdmFycykKCiAgICByZXR1cm4gd3JhcHBlcgoKCmRlZiBlbnN1cmVfYmluYXJ5KHMsIGVuY29kaW5nPVwidXRmLThcIiwgZXJyb3JzPVwic3RyaWN0XCIpOgogICAgXCJcIlwiQ29lcmNlICoqcyoqIHRvIHNpeC5iaW5hcnlfdHlwZS4KCiAgICBGb3IgUHl0aG9uIDI6CiAgICAgIC0gYHVuaWNvZGVgIC0+IGVuY29kZWQgdG8gYHN0cmAKICAgICAgLSBgc3RyYCAtPiBgc3RyYAoKICAgIEZvciBQeXRob24gMzoKICAgICAgLSBgc3RyYCAtPiBlbmNvZGVkIHRvIGBieXRlc2AKICAgICAgLSBgYnl0ZXNgIC0+IGBieXRlc2AKICAgIFwiXCJcIgogICAgaWYgaXNpbnN0YW5jZShzLCBiaW5hcnlfdHlwZSk6CiAgICAgICAgcmV0dXJuIHMKICAgIGlmIGlzaW5zdGFuY2UocywgdGV4dF90eXBlKToKICAgICAgICByZXR1cm4gcy5lbmNvZGUoZW5jb2RpbmcsIGVycm9ycykKICAgIHJhaXNlIFR5cGVFcnJvcihcIm5vdCBleHBlY3RpbmcgdHlwZSAnJXMnXCIgJSB0eXBlKHMpKQoKCmRlZiBlbnN1cmVfc3RyKHMsIGVuY29kaW5nPVwidXRmLThcIiwgZXJyb3JzPVwic3RyaWN0XCIpOgogICAgXCJcIlwiQ29lcmNlICpzKiB0byBgc3RyYC4KCiAgICBGb3IgUHl0aG9uIDI6CiAgICAgIC0gYHVuaWNvZGVgIC0+IGVuY29kZWQgdG8gYHN0cmAKICAgICAgLSBgc3RyYCAtPiBgc3RyYAoKICAgIEZvciBQeXRob24gMzoKICAgICAgLSBgc3RyYCAtPiBgc3RyYAogICAgICAtIGBieXRlc2AgLT4gZGVjb2RlZCB0byBgc3RyYAogICAgXCJcIlwiCiAgICAjIE9wdGltaXphdGlvbjogRmFzdCByZXR1cm4gZm9yIHRoZSBjb21tb24gY2FzZS4KICAgIGlmIHR5cGUocykgaXMgc3RyOgogICAgICAgIHJldHVybiBzCiAgICBpZiBQWTIgYW5kIGlzaW5zdGFuY2UocywgdGV4dF90eXBlKToKICAgICAgICByZXR1cm4gcy5lbmNvZGUoZW5jb2RpbmcsIGVycm9ycykKICAgIGVsaWYgUFkzIGFuZCBpc2luc3RhbmNlKHMsIGJpbmFyeV90eXBlKToKICAgICAgICByZXR1cm4gcy5kZWNvZGUoZW5jb2RpbmcsIGVycm9ycykKICAgIGVsaWYgbm90IGlzaW5zdGFuY2UocywgKHRleHRfdHlwZSwgYmluYXJ5X3R5cGUpKToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoXCJub3QgZXhwZWN0aW5nIHR5cGUgJyVzJ1wiICUgdHlwZShzKSkKICAgIHJldHVybiBzCgoKZGVmIGVuc3VyZV90ZXh0KHMsIGVuY29kaW5nPVwidXRmLThcIiwgZXJyb3JzPVwic3RyaWN0XCIpOgogICAgXCJcIlwiQ29lcmNlICpzKiB0byBzaXgudGV4dF90eXBlLgoKICAgIEZvciBQeXRob24gMjoKICAgICAgLSBgdW5pY29kZWAgLT4gYHVuaWNvZGVgCiAgICAgIC0gYHN0cmAgLT4gYHVuaWNvZGVgCgogICAgRm9yIFB5dGhvbiAzOgogICAgICAtIGBzdHJgIC0+IGBzdHJgCiAgICAgIC0gYGJ5dGVzYCAtPiBkZWNvZGVkIHRvIGBzdHJgCiAgICBcIlwiXCIKICAgIGlmIGlzaW5zdGFuY2UocywgYmluYXJ5X3R5cGUpOgogICAgICAgIHJldHVybiBzLmRlY29kZShlbmNvZGluZywgZXJyb3JzKQogICAgZWxpZiBpc2luc3RhbmNlKHMsIHRleHRfdHlwZSk6CiAgICAgICAgcmV0dXJuIHMKICAgIGVsc2U6CiAgICAgICAgcmFpc2UgVHlwZUVycm9yKFwibm90IGV4cGVjdGluZyB0eXBlICclcydcIiAlIHR5cGUocykpCgoKZGVmIHB5dGhvbl8yX3VuaWNvZGVfY29tcGF0aWJsZShrbGFzcyk6CiAgICBcIlwiXCIKICAgIEEgY2xhc3MgZGVjb3JhdG9yIHRoYXQgZGVmaW5lcyBfX3VuaWNvZGVfXyBhbmQgX19zdHJfXyBtZXRob2RzIHVuZGVyIFB5dGhvbiAyLgogICAgVW5kZXIgUHl0aG9uIDMgaXQgZG9lcyBub3RoaW5nLgoKICAgIFRvIHN1cHBvcnQgUHl0aG9uIDIgYW5kIDMgd2l0aCBhIHNpbmdsZSBjb2RlIGJhc2UsIGRlZmluZSBhIF9fc3RyX18gbWV0aG9kCiAgICByZXR1cm5pbmcgdGV4dCBhbmQgYXBwbHkgdGhpcyBkZWNvcmF0b3IgdG8gdGhlIGNsYXNzLgogICAgXCJcIlwiCiAgICBpZiBQWTI6CiAgICAgICAgaWYgXCJfX3N0cl9fXCIgbm90IGluIGtsYXNzLl9fZGljdF9fOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKAogICAgICAgICAgICAgICAgXCJAcHl0aG9uXzJfdW5pY29kZV9jb21wYXRpYmxlIGNhbm5vdCBiZSBhcHBsaWVkIFwiCiAgICAgICAgICAgICAgICBcInRvICVzIGJlY2F1c2UgaXQgZG9lc24ndCBkZWZpbmUgX19zdHJfXygpLlwiICUga2xhc3MuX19uYW1lX18KICAgICAgICAgICAgKQogICAgICAgIGtsYXNzLl9fdW5pY29kZV9fID0ga2xhc3MuX19zdHJfXwogICAgICAgIGtsYXNzLl9fc3RyX18gPSBsYW1iZGEgc2VsZjogc2VsZi5fX3VuaWNvZGVfXygpLmVuY29kZShcInV0Zi04XCIpCiAgICByZXR1cm4ga2xhc3MKCgojIENvbXBsZXRlIHRoZSBtb3ZlcyBpbXBsZW1lbnRhdGlvbi4KIyBUaGlzIGNvZGUgaXMgYXQgdGhlIGVuZCBvZiB0aGlzIG1vZHVsZSB0byBzcGVlZCB1cCBtb2R1bGUgbG9hZGluZy4KIyBUdXJuIHRoaXMgbW9kdWxlIGludG8gYSBwYWNrYWdlLgpfX3BhdGhfXyA9IFtdICAjIHJlcXVpcmVkIGZvciBQRVAgMzAyIGFuZCBQRVAgNDUxCl9fcGFja2FnZV9fID0gX19uYW1lX18gICMgc2VlIFBFUCAzNjYgQFJlc2VydmVkQXNzaWdubWVudAppZiBnbG9iYWxzKCkuZ2V0KFwiX19zcGVjX19cIikgaXMgbm90IE5vbmU6CiAgICBfX3NwZWNfXy5zdWJtb2R1bGVfc2VhcmNoX2xvY2F0aW9ucyA9IFtdICAjIFBFUCA0NTEgQFVuZGVmaW5lZFZhcmlhYmxlCiMgUmVtb3ZlIG90aGVyIHNpeCBtZXRhIHBhdGggaW1wb3J0ZXJzLCBzaW5jZSB0aGV5IGNhdXNlIHByb2JsZW1zLiBUaGlzIGNhbgojIGhhcHBlbiBpZiBzaXggaXMgcmVtb3ZlZCBmcm9tIHN5cy5tb2R1bGVzIGFuZCB0aGVuIHJlbG9hZGVkLiAoU2V0dXB0b29scyBkb2VzCiMgdGhpcyBmb3Igc29tZSByZWFzb24uKQppZiBzeXMubWV0YV9wYXRoOgogICAgZm9yIGksIGltcG9ydGVyIGluIGVudW1lcmF0ZShzeXMubWV0YV9wYXRoKToKICAgICAgICAjIEhlcmUncyBzb21lIHJlYWwgbmFzdGluZXNzOiBBbm90aGVyIFwiaW5zdGFuY2VcIiBvZiB0aGUgc2l4IG1vZHVsZSBtaWdodAogICAgICAgICMgYmUgZmxvYXRpbmcgYXJvdW5kLiBUaGVyZWZvcmUsIHdlIGNhbid0IHVzZSBpc2luc3RhbmNlKCkgdG8gY2hlY2sgZm9yCiAgICAgICAgIyB0aGUgc2l4IG1ldGEgcGF0aCBpbXBvcnRlciwgc2luY2UgdGhlIG90aGVyIHNpeCBpbnN0YW5jZSB3aWxsIGhhdmUKICAgICAgICAjIGluc2VydGVkIGFuIGltcG9ydGVyIHdpdGggZGlmZmVyZW50IGNsYXNzLgogICAgICAgIGlmICgKICAgICAgICAgICAgdHlwZShpbXBvcnRlcikuX19uYW1lX18gPT0gXCJfU2l4TWV0YVBhdGhJbXBvcnRlclwiCiAgICAgICAgICAgIGFuZCBpbXBvcnRlci5uYW1lID09IF9fbmFtZV9fCiAgICAgICAgKToKICAgICAgICAgICAgZGVsIHN5cy5tZXRhX3BhdGhbaV0KICAgICAgICAgICAgYnJlYWsKICAgIGRlbCBpLCBpbXBvcnRlcgojIEZpbmFsbHksIGFkZCB0aGUgaW1wb3J0ZXIgdG8gdGhlIG1ldGEgcGF0aCBpbXBvcnQgaG9vay4Kc3lzLm1ldGFfcGF0aC5hcHBlbmQoX2ltcG9ydGVyKQoKIiIiCm1vZHVsZV9kaWN0WyJ1cmxsaWIzIitvcy5zZXArInBhY2thZ2VzIitvcy5zZXArIl9faW5pdF9fLnB5Il09IiIiCgoiIiIKbW9kdWxlX2RpY3RbInVybGxpYjMiK29zLnNlcCsicGFja2FnZXMiK29zLnNlcCsiYmFja3BvcnRzIitvcy5zZXArIm1ha2VmaWxlLnB5Il09IiIiCiMgLSotIGNvZGluZzogdXRmLTggLSotClwiXCJcIgpiYWNrcG9ydHMubWFrZWZpbGUKfn5+fn5+fn5+fn5+fn5+fn5+CgpCYWNrcG9ydHMgdGhlIFB5dGhvbiAzIGBgc29ja2V0Lm1ha2VmaWxlYGAgbWV0aG9kIGZvciB1c2Ugd2l0aCBhbnl0aGluZyB0aGF0CndhbnRzIHRvIGNyZWF0ZSBhIFwiZmFrZVwiIHNvY2tldCBvYmplY3QuClwiXCJcIgppbXBvcnQgaW8KZnJvbSBzb2NrZXQgaW1wb3J0IFNvY2tldElPCgoKZGVmIGJhY2twb3J0X21ha2VmaWxlKAogICAgc2VsZiwgbW9kZT1cInJcIiwgYnVmZmVyaW5nPU5vbmUsIGVuY29kaW5nPU5vbmUsIGVycm9ycz1Ob25lLCBuZXdsaW5lPU5vbmUKKToKICAgIFwiXCJcIgogICAgQmFja3BvcnQgb2YgYGBzb2NrZXQubWFrZWZpbGVgYCBmcm9tIFB5dGhvbiAzLjUuCiAgICBcIlwiXCIKICAgIGlmIG5vdCBzZXQobW9kZSkgPD0ge1wiclwiLCBcIndcIiwgXCJiXCJ9OgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXCJpbnZhbGlkIG1vZGUgJXIgKG9ubHkgciwgdywgYiBhbGxvd2VkKVwiICUgKG1vZGUsKSkKICAgIHdyaXRpbmcgPSBcIndcIiBpbiBtb2RlCiAgICByZWFkaW5nID0gXCJyXCIgaW4gbW9kZSBvciBub3Qgd3JpdGluZwogICAgYXNzZXJ0IHJlYWRpbmcgb3Igd3JpdGluZwogICAgYmluYXJ5ID0gXCJiXCIgaW4gbW9kZQogICAgcmF3bW9kZSA9IFwiXCIKICAgIGlmIHJlYWRpbmc6CiAgICAgICAgcmF3bW9kZSArPSBcInJcIgogICAgaWYgd3JpdGluZzoKICAgICAgICByYXdtb2RlICs9IFwid1wiCiAgICByYXcgPSBTb2NrZXRJTyhzZWxmLCByYXdtb2RlKQogICAgc2VsZi5fbWFrZWZpbGVfcmVmcyArPSAxCiAgICBpZiBidWZmZXJpbmcgaXMgTm9uZToKICAgICAgICBidWZmZXJpbmcgPSAtMQogICAgaWYgYnVmZmVyaW5nIDwgMDoKICAgICAgICBidWZmZXJpbmcgPSBpby5ERUZBVUxUX0JVRkZFUl9TSVpFCiAgICBpZiBidWZmZXJpbmcgPT0gMDoKICAgICAgICBpZiBub3QgYmluYXJ5OgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFwidW5idWZmZXJlZCBzdHJlYW1zIG11c3QgYmUgYmluYXJ5XCIpCiAgICAgICAgcmV0dXJuIHJhdwogICAgaWYgcmVhZGluZyBhbmQgd3JpdGluZzoKICAgICAgICBidWZmZXIgPSBpby5CdWZmZXJlZFJXUGFpcihyYXcsIHJhdywgYnVmZmVyaW5nKQogICAgZWxpZiByZWFkaW5nOgogICAgICAgIGJ1ZmZlciA9IGlvLkJ1ZmZlcmVkUmVhZGVyKHJhdywgYnVmZmVyaW5nKQogICAgZWxzZToKICAgICAgICBhc3NlcnQgd3JpdGluZwogICAgICAgIGJ1ZmZlciA9IGlvLkJ1ZmZlcmVkV3JpdGVyKHJhdywgYnVmZmVyaW5nKQogICAgaWYgYmluYXJ5OgogICAgICAgIHJldHVybiBidWZmZXIKICAgIHRleHQgPSBpby5UZXh0SU9XcmFwcGVyKGJ1ZmZlciwgZW5jb2RpbmcsIGVycm9ycywgbmV3bGluZSkKICAgIHRleHQubW9kZSA9IG1vZGUKICAgIHJldHVybiB0ZXh0CgoiIiIKbW9kdWxlX2RpY3RbInVybGxpYjMiK29zLnNlcCsicGFja2FnZXMiK29zLnNlcCsiYmFja3BvcnRzIitvcy5zZXArIl9faW5pdF9fLnB5Il09IiIiCgoiIiIKbW9kdWxlX2RpY3RbInVybGxpYjMiK29zLnNlcCsidXRpbCIrb3Muc2VwKyJzc2xfLnB5Il09IiIiCmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYWJzb2x1dGVfaW1wb3J0CgppbXBvcnQgaG1hYwppbXBvcnQgb3MKaW1wb3J0IHN5cwppbXBvcnQgd2FybmluZ3MKZnJvbSBiaW5hc2NpaSBpbXBvcnQgaGV4bGlmeSwgdW5oZXhsaWZ5CmZyb20gaGFzaGxpYiBpbXBvcnQgbWQ1LCBzaGExLCBzaGEyNTYKCmZyb20gLi5leGNlcHRpb25zIGltcG9ydCAoCiAgICBJbnNlY3VyZVBsYXRmb3JtV2FybmluZywKICAgIFByb3h5U2NoZW1lVW5zdXBwb3J0ZWQsCiAgICBTTklNaXNzaW5nV2FybmluZywKICAgIFNTTEVycm9yLAopCmZyb20gLi5wYWNrYWdlcyBpbXBvcnQgc2l4CmZyb20gLnVybCBpbXBvcnQgQlJBQ0VMRVNTX0lQVjZfQUREUlpfUkUsIElQVjRfUkUKClNTTENvbnRleHQgPSBOb25lClNTTFRyYW5zcG9ydCA9IE5vbmUKSEFTX1NOSSA9IEZhbHNlCklTX1BZT1BFTlNTTCA9IEZhbHNlCklTX1NFQ1VSRVRSQU5TUE9SVCA9IEZhbHNlCkFMUE5fUFJPVE9DT0xTID0gW1wiaHR0cC8xLjFcIl0KCiMgTWFwcyB0aGUgbGVuZ3RoIG9mIGEgZGlnZXN0IHRvIGEgcG9zc2libGUgaGFzaCBmdW5jdGlvbiBwcm9kdWNpbmcgdGhpcyBkaWdlc3QKSEFTSEZVTkNfTUFQID0gezMyOiBtZDUsIDQwOiBzaGExLCA2NDogc2hhMjU2fQoKCmRlZiBfY29uc3RfY29tcGFyZV9kaWdlc3RfYmFja3BvcnQoYSwgYik6CiAgICBcIlwiXCIKICAgIENvbXBhcmUgdHdvIGRpZ2VzdHMgb2YgZXF1YWwgbGVuZ3RoIGluIGNvbnN0YW50IHRpbWUuCgogICAgVGhlIGRpZ2VzdHMgbXVzdCBiZSBvZiB0eXBlIHN0ci9ieXRlcy4KICAgIFJldHVybnMgVHJ1ZSBpZiB0aGUgZGlnZXN0cyBtYXRjaCwgYW5kIEZhbHNlIG90aGVyd2lzZS4KICAgIFwiXCJcIgogICAgcmVzdWx0ID0gYWJzKGxlbihhKSAtIGxlbihiKSkKICAgIGZvciBsZWZ0LCByaWdodCBpbiB6aXAoYnl0ZWFycmF5KGEpLCBieXRlYXJyYXkoYikpOgogICAgICAgIHJlc3VsdCB8PSBsZWZ0IF4gcmlnaHQKICAgIHJldHVybiByZXN1bHQgPT0gMAoKCl9jb25zdF9jb21wYXJlX2RpZ2VzdCA9IGdldGF0dHIoaG1hYywgXCJjb21wYXJlX2RpZ2VzdFwiLCBfY29uc3RfY29tcGFyZV9kaWdlc3RfYmFja3BvcnQpCgp0cnk6ICAjIFRlc3QgZm9yIFNTTCBmZWF0dXJlcwogICAgaW1wb3J0IHNzbAogICAgZnJvbSBzc2wgaW1wb3J0IENFUlRfUkVRVUlSRUQsIHdyYXBfc29ja2V0CmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIHBhc3MKCnRyeToKICAgIGZyb20gc3NsIGltcG9ydCBIQVNfU05JICAjIEhhcyBTTkk/CmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIHBhc3MKCnRyeToKICAgIGZyb20gLnNzbHRyYW5zcG9ydCBpbXBvcnQgU1NMVHJhbnNwb3J0CmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIHBhc3MKCgp0cnk6ICAjIFBsYXRmb3JtLXNwZWNpZmljOiBQeXRob24gMy42CiAgICBmcm9tIHNzbCBpbXBvcnQgUFJPVE9DT0xfVExTCgogICAgUFJPVE9DT0xfU1NMdjIzID0gUFJPVE9DT0xfVExTCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIHRyeToKICAgICAgICBmcm9tIHNzbCBpbXBvcnQgUFJPVE9DT0xfU1NMdjIzIGFzIFBST1RPQ09MX1RMUwoKICAgICAgICBQUk9UT0NPTF9TU0x2MjMgPSBQUk9UT0NPTF9UTFMKICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICBQUk9UT0NPTF9TU0x2MjMgPSBQUk9UT0NPTF9UTFMgPSAyCgp0cnk6CiAgICBmcm9tIHNzbCBpbXBvcnQgUFJPVE9DT0xfVExTX0NMSUVOVApleGNlcHQgSW1wb3J0RXJyb3I6CiAgICBQUk9UT0NPTF9UTFNfQ0xJRU5UID0gUFJPVE9DT0xfVExTCgoKdHJ5OgogICAgZnJvbSBzc2wgaW1wb3J0IE9QX05PX0NPTVBSRVNTSU9OLCBPUF9OT19TU0x2MiwgT1BfTk9fU1NMdjMKZXhjZXB0IEltcG9ydEVycm9yOgogICAgT1BfTk9fU1NMdjIsIE9QX05PX1NTTHYzID0gMHgxMDAwMDAwLCAweDIwMDAwMDAKICAgIE9QX05PX0NPTVBSRVNTSU9OID0gMHgyMDAwMAoKCnRyeTogICMgT1BfTk9fVElDS0VUIHdhcyBhZGRlZCBpbiBQeXRob24gMy42CiAgICBmcm9tIHNzbCBpbXBvcnQgT1BfTk9fVElDS0VUCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIE9QX05PX1RJQ0tFVCA9IDB4NDAwMAoKCiMgQSBzZWN1cmUgZGVmYXVsdC4KIyBTb3VyY2VzIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIFRMUyBjaXBoZXJzOgojCiMgLSBodHRwczovL3dpa2kubW96aWxsYS5vcmcvU2VjdXJpdHkvU2VydmVyX1NpZGVfVExTCiMgLSBodHRwczovL3d3dy5zc2xsYWJzLmNvbS9wcm9qZWN0cy9iZXN0LXByYWN0aWNlcy9pbmRleC5odG1sCiMgLSBodHRwczovL2h5bmVrLm1lL2FydGljbGVzL2hhcmRlbmluZy15b3VyLXdlYi1zZXJ2ZXJzLXNzbC1jaXBoZXJzLwojCiMgVGhlIGdlbmVyYWwgaW50ZW50IGlzOgojIC0gcHJlZmVyIGNpcGhlciBzdWl0ZXMgdGhhdCBvZmZlciBwZXJmZWN0IGZvcndhcmQgc2VjcmVjeSAoREhFL0VDREhFKSwKIyAtIHByZWZlciBFQ0RIRSBvdmVyIERIRSBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlLAojIC0gcHJlZmVyIGFueSBBRVMtR0NNIGFuZCBDaGFDaGEyMCBvdmVyIGFueSBBRVMtQ0JDIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UgYW5kCiMgICBzZWN1cml0eSwKIyAtIHByZWZlciBBRVMtR0NNIG92ZXIgQ2hhQ2hhMjAgYmVjYXVzZSBoYXJkd2FyZS1hY2NlbGVyYXRlZCBBRVMgaXMgY29tbW9uLAojIC0gZGlzYWJsZSBOVUxMIGF1dGhlbnRpY2F0aW9uLCBNRDUgTUFDcywgRFNTLCBhbmQgb3RoZXIKIyAgIGluc2VjdXJlIGNpcGhlcnMgZm9yIHNlY3VyaXR5IHJlYXNvbnMuCiMgLSBOT1RFOiBUTFMgMS4zIGNpcGhlciBzdWl0ZXMgYXJlIG1hbmFnZWQgdGhyb3VnaCBhIGRpZmZlcmVudCBpbnRlcmZhY2UKIyAgIG5vdCBleHBvc2VkIGJ5IENQeXRob24gKHlldCEpIGFuZCBhcmUgZW5hYmxlZCBieSBkZWZhdWx0IGlmIHRoZXkncmUgYXZhaWxhYmxlLgpERUZBVUxUX0NJUEhFUlMgPSBcIjpcIi5qb2luKAogICAgWwogICAgICAgIFwiRUNESEUrQUVTR0NNXCIsCiAgICAgICAgXCJFQ0RIRStDSEFDSEEyMFwiLAogICAgICAgIFwiREhFK0FFU0dDTVwiLAogICAgICAgIFwiREhFK0NIQUNIQTIwXCIsCiAgICAgICAgXCJFQ0RIK0FFU0dDTVwiLAogICAgICAgIFwiREgrQUVTR0NNXCIsCiAgICAgICAgXCJFQ0RIK0FFU1wiLAogICAgICAgIFwiREgrQUVTXCIsCiAgICAgICAgXCJSU0ErQUVTR0NNXCIsCiAgICAgICAgXCJSU0ErQUVTXCIsCiAgICAgICAgXCIhYU5VTExcIiwKICAgICAgICBcIiFlTlVMTFwiLAogICAgICAgIFwiIU1ENVwiLAogICAgICAgIFwiIURTU1wiLAogICAgXQopCgp0cnk6CiAgICBmcm9tIHNzbCBpbXBvcnQgU1NMQ29udGV4dCAgIyBNb2Rlcm4gU1NMPwpleGNlcHQgSW1wb3J0RXJyb3I6CgogICAgY2xhc3MgU1NMQ29udGV4dChvYmplY3QpOiAgIyBQbGF0Zm9ybS1zcGVjaWZpYzogUHl0aG9uIDIKICAgICAgICBkZWYgX19pbml0X18oc2VsZiwgcHJvdG9jb2xfdmVyc2lvbik6CiAgICAgICAgICAgIHNlbGYucHJvdG9jb2wgPSBwcm90b2NvbF92ZXJzaW9uCiAgICAgICAgICAgICMgVXNlIGRlZmF1bHQgdmFsdWVzIGZyb20gYSByZWFsIFNTTENvbnRleHQKICAgICAgICAgICAgc2VsZi5jaGVja19ob3N0bmFtZSA9IEZhbHNlCiAgICAgICAgICAgIHNlbGYudmVyaWZ5X21vZGUgPSBzc2wuQ0VSVF9OT05FCiAgICAgICAgICAgIHNlbGYuY2FfY2VydHMgPSBOb25lCiAgICAgICAgICAgIHNlbGYub3B0aW9ucyA9IDAKICAgICAgICAgICAgc2VsZi5jZXJ0ZmlsZSA9IE5vbmUKICAgICAgICAgICAgc2VsZi5rZXlmaWxlID0gTm9uZQogICAgICAgICAgICBzZWxmLmNpcGhlcnMgPSBOb25lCgogICAgICAgIGRlZiBsb2FkX2NlcnRfY2hhaW4oc2VsZiwgY2VydGZpbGUsIGtleWZpbGUpOgogICAgICAgICAgICBzZWxmLmNlcnRmaWxlID0gY2VydGZpbGUKICAgICAgICAgICAgc2VsZi5rZXlmaWxlID0ga2V5ZmlsZQoKICAgICAgICBkZWYgbG9hZF92ZXJpZnlfbG9jYXRpb25zKHNlbGYsIGNhZmlsZT1Ob25lLCBjYXBhdGg9Tm9uZSwgY2FkYXRhPU5vbmUpOgogICAgICAgICAgICBzZWxmLmNhX2NlcnRzID0gY2FmaWxlCgogICAgICAgICAgICBpZiBjYXBhdGggaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICByYWlzZSBTU0xFcnJvcihcIkNBIGRpcmVjdG9yaWVzIG5vdCBzdXBwb3J0ZWQgaW4gb2xkZXIgUHl0aG9uc1wiKQoKICAgICAgICAgICAgaWYgY2FkYXRhIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgcmFpc2UgU1NMRXJyb3IoXCJDQSBkYXRhIG5vdCBzdXBwb3J0ZWQgaW4gb2xkZXIgUHl0aG9uc1wiKQoKICAgICAgICBkZWYgc2V0X2NpcGhlcnMoc2VsZiwgY2lwaGVyX3N1aXRlKToKICAgICAgICAgICAgc2VsZi5jaXBoZXJzID0gY2lwaGVyX3N1aXRlCgogICAgICAgIGRlZiB3cmFwX3NvY2tldChzZWxmLCBzb2NrZXQsIHNlcnZlcl9ob3N0bmFtZT1Ob25lLCBzZXJ2ZXJfc2lkZT1GYWxzZSk6CiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oCiAgICAgICAgICAgICAgICBcIkEgdHJ1ZSBTU0xDb250ZXh0IG9iamVjdCBpcyBub3QgYXZhaWxhYmxlLiBUaGlzIHByZXZlbnRzIFwiCiAgICAgICAgICAgICAgICBcInVybGxpYjMgZnJvbSBjb25maWd1cmluZyBTU0wgYXBwcm9wcmlhdGVseSBhbmQgbWF5IGNhdXNlIFwiCiAgICAgICAgICAgICAgICBcImNlcnRhaW4gU1NMIGNvbm5lY3Rpb25zIHRvIGZhaWwuIFlvdSBjYW4gdXBncmFkZSB0byBhIG5ld2VyIFwiCiAgICAgICAgICAgICAgICBcInZlcnNpb24gb2YgUHl0aG9uIHRvIHNvbHZlIHRoaXMuIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWUgXCIKICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly91cmxsaWIzLnJlYWR0aGVkb2NzLmlvL2VuLzEuMjYueC9hZHZhbmNlZC11c2FnZS5odG1sXCIKICAgICAgICAgICAgICAgIFwiI3NzbC13YXJuaW5nc1wiLAogICAgICAgICAgICAgICAgSW5zZWN1cmVQbGF0Zm9ybVdhcm5pbmcsCiAgICAgICAgICAgICkKICAgICAgICAgICAga3dhcmdzID0gewogICAgICAgICAgICAgICAgXCJrZXlmaWxlXCI6IHNlbGYua2V5ZmlsZSwKICAgICAgICAgICAgICAgIFwiY2VydGZpbGVcIjogc2VsZi5jZXJ0ZmlsZSwKICAgICAgICAgICAgICAgIFwiY2FfY2VydHNcIjogc2VsZi5jYV9jZXJ0cywKICAgICAgICAgICAgICAgIFwiY2VydF9yZXFzXCI6IHNlbGYudmVyaWZ5X21vZGUsCiAgICAgICAgICAgICAgICBcInNzbF92ZXJzaW9uXCI6IHNlbGYucHJvdG9jb2wsCiAgICAgICAgICAgICAgICBcInNlcnZlcl9zaWRlXCI6IHNlcnZlcl9zaWRlLAogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB3cmFwX3NvY2tldChzb2NrZXQsIGNpcGhlcnM9c2VsZi5jaXBoZXJzLCAqKmt3YXJncykKCgpkZWYgYXNzZXJ0X2ZpbmdlcnByaW50KGNlcnQsIGZpbmdlcnByaW50KToKICAgIFwiXCJcIgogICAgQ2hlY2tzIGlmIGdpdmVuIGZpbmdlcnByaW50IG1hdGNoZXMgdGhlIHN1cHBsaWVkIGNlcnRpZmljYXRlLgoKICAgIDpwYXJhbSBjZXJ0OgogICAgICAgIENlcnRpZmljYXRlIGFzIGJ5dGVzIG9iamVjdC4KICAgIDpwYXJhbSBmaW5nZXJwcmludDoKICAgICAgICBGaW5nZXJwcmludCBhcyBzdHJpbmcgb2YgaGV4ZGlnaXRzLCBjYW4gYmUgaW50ZXJzcGVyc2VkIGJ5IGNvbG9ucy4KICAgIFwiXCJcIgoKICAgIGZpbmdlcnByaW50ID0gZmluZ2VycHJpbnQucmVwbGFjZShcIjpcIiwgXCJcIikubG93ZXIoKQogICAgZGlnZXN0X2xlbmd0aCA9IGxlbihmaW5nZXJwcmludCkKICAgIGhhc2hmdW5jID0gSEFTSEZVTkNfTUFQLmdldChkaWdlc3RfbGVuZ3RoKQogICAgaWYgbm90IGhhc2hmdW5jOgogICAgICAgIHJhaXNlIFNTTEVycm9yKFwiRmluZ2VycHJpbnQgb2YgaW52YWxpZCBsZW5ndGg6IHswfVwiLmZvcm1hdChmaW5nZXJwcmludCkpCgogICAgIyBXZSBuZWVkIGVuY29kZSgpIGhlcmUgZm9yIHB5MzI7IHdvcmtzIG9uIHB5MiBhbmQgcDMzLgogICAgZmluZ2VycHJpbnRfYnl0ZXMgPSB1bmhleGxpZnkoZmluZ2VycHJpbnQuZW5jb2RlKCkpCgogICAgY2VydF9kaWdlc3QgPSBoYXNoZnVuYyhjZXJ0KS5kaWdlc3QoKQoKICAgIGlmIG5vdCBfY29uc3RfY29tcGFyZV9kaWdlc3QoY2VydF9kaWdlc3QsIGZpbmdlcnByaW50X2J5dGVzKToKICAgICAgICByYWlzZSBTU0xFcnJvcigKICAgICAgICAgICAgJ0ZpbmdlcnByaW50cyBkaWQgbm90IG1hdGNoLiBFeHBlY3RlZCBcInswfVwiLCBnb3QgXCJ7MX1cIi4nLmZvcm1hdCgKICAgICAgICAgICAgICAgIGZpbmdlcnByaW50LCBoZXhsaWZ5KGNlcnRfZGlnZXN0KQogICAgICAgICAgICApCiAgICAgICAgKQoKCmRlZiByZXNvbHZlX2NlcnRfcmVxcyhjYW5kaWRhdGUpOgogICAgXCJcIlwiCiAgICBSZXNvbHZlcyB0aGUgYXJndW1lbnQgdG8gYSBudW1lcmljIGNvbnN0YW50LCB3aGljaCBjYW4gYmUgcGFzc2VkIHRvCiAgICB0aGUgd3JhcF9zb2NrZXQgZnVuY3Rpb24vbWV0aG9kIGZyb20gdGhlIHNzbCBtb2R1bGUuCiAgICBEZWZhdWx0cyB0byA6ZGF0YTpgc3NsLkNFUlRfUkVRVUlSRURgLgogICAgSWYgZ2l2ZW4gYSBzdHJpbmcgaXQgaXMgYXNzdW1lZCB0byBiZSB0aGUgbmFtZSBvZiB0aGUgY29uc3RhbnQgaW4gdGhlCiAgICA6bW9kOmBzc2xgIG1vZHVsZSBvciBpdHMgYWJicmV2aWF0aW9uLgogICAgKFNvIHlvdSBjYW4gc3BlY2lmeSBgUkVRVUlSRURgIGluc3RlYWQgb2YgYENFUlRfUkVRVUlSRURgLgogICAgSWYgaXQncyBuZWl0aGVyIGBOb25lYCBub3IgYSBzdHJpbmcgd2UgYXNzdW1lIGl0IGlzIGFscmVhZHkgdGhlIG51bWVyaWMKICAgIGNvbnN0YW50IHdoaWNoIGNhbiBkaXJlY3RseSBiZSBwYXNzZWQgdG8gd3JhcF9zb2NrZXQuCiAgICBcIlwiXCIKICAgIGlmIGNhbmRpZGF0ZSBpcyBOb25lOgogICAgICAgIHJldHVybiBDRVJUX1JFUVVJUkVECgogICAgaWYgaXNpbnN0YW5jZShjYW5kaWRhdGUsIHN0cik6CiAgICAgICAgcmVzID0gZ2V0YXR0cihzc2wsIGNhbmRpZGF0ZSwgTm9uZSkKICAgICAgICBpZiByZXMgaXMgTm9uZToKICAgICAgICAgICAgcmVzID0gZ2V0YXR0cihzc2wsIFwiQ0VSVF9cIiArIGNhbmRpZGF0ZSkKICAgICAgICByZXR1cm4gcmVzCgogICAgcmV0dXJuIGNhbmRpZGF0ZQoKCmRlZiByZXNvbHZlX3NzbF92ZXJzaW9uKGNhbmRpZGF0ZSk6CiAgICBcIlwiXCIKICAgIGxpa2UgcmVzb2x2ZV9jZXJ0X3JlcXMKICAgIFwiXCJcIgogICAgaWYgY2FuZGlkYXRlIGlzIE5vbmU6CiAgICAgICAgcmV0dXJuIFBST1RPQ09MX1RMUwoKICAgIGlmIGlzaW5zdGFuY2UoY2FuZGlkYXRlLCBzdHIpOgogICAgICAgIHJlcyA9IGdldGF0dHIoc3NsLCBjYW5kaWRhdGUsIE5vbmUpCiAgICAgICAgaWYgcmVzIGlzIE5vbmU6CiAgICAgICAgICAgIHJlcyA9IGdldGF0dHIoc3NsLCBcIlBST1RPQ09MX1wiICsgY2FuZGlkYXRlKQogICAgICAgIHJldHVybiByZXMKCiAgICByZXR1cm4gY2FuZGlkYXRlCgoKZGVmIGNyZWF0ZV91cmxsaWIzX2NvbnRleHQoCiAgICBzc2xfdmVyc2lvbj1Ob25lLCBjZXJ0X3JlcXM9Tm9uZSwgb3B0aW9ucz1Ob25lLCBjaXBoZXJzPU5vbmUKKToKICAgIFwiXCJcIkFsbCBhcmd1bWVudHMgaGF2ZSB0aGUgc2FtZSBtZWFuaW5nIGFzIGBgc3NsX3dyYXBfc29ja2V0YGAuCgogICAgQnkgZGVmYXVsdCwgdGhpcyBmdW5jdGlvbiBkb2VzIGEgbG90IG9mIHRoZSBzYW1lIHdvcmsgdGhhdAogICAgYGBzc2wuY3JlYXRlX2RlZmF1bHRfY29udGV4dGBgIGRvZXMgb24gUHl0aG9uIDMuNCsuIEl0OgoKICAgIC0gRGlzYWJsZXMgU1NMdjIsIFNTTHYzLCBhbmQgY29tcHJlc3Npb24KICAgIC0gU2V0cyBhIHJlc3RyaWN0ZWQgc2V0IG9mIHNlcnZlciBjaXBoZXJzCgogICAgSWYgeW91IHdpc2ggdG8gZW5hYmxlIFNTTHYzLCB5b3UgY2FuIGRvOjoKCiAgICAgICAgZnJvbSB1cmxsaWIzLnV0aWwgaW1wb3J0IHNzbF8KICAgICAgICBjb250ZXh0ID0gc3NsXy5jcmVhdGVfdXJsbGliM19jb250ZXh0KCkKICAgICAgICBjb250ZXh0Lm9wdGlvbnMgJj0gfnNzbF8uT1BfTk9fU1NMdjMKCiAgICBZb3UgY2FuIGRvIHRoZSBzYW1lIHRvIGVuYWJsZSBjb21wcmVzc2lvbiAoc3Vic3RpdHV0aW5nIGBgQ09NUFJFU1NJT05gYAogICAgZm9yIGBgU1NMdjNgYCBpbiB0aGUgbGFzdCBsaW5lIGFib3ZlKS4KCiAgICA6cGFyYW0gc3NsX3ZlcnNpb246CiAgICAgICAgVGhlIGRlc2lyZWQgcHJvdG9jb2wgdmVyc2lvbiB0byB1c2UuIFRoaXMgd2lsbCBkZWZhdWx0IHRvCiAgICAgICAgUFJPVE9DT0xfU1NMdjIzIHdoaWNoIHdpbGwgbmVnb3RpYXRlIHRoZSBoaWdoZXN0IHByb3RvY29sIHRoYXQgYm90aAogICAgICAgIHRoZSBzZXJ2ZXIgYW5kIHlvdXIgaW5zdGFsbGF0aW9uIG9mIE9wZW5TU0wgc3VwcG9ydC4KICAgIDpwYXJhbSBjZXJ0X3JlcXM6CiAgICAgICAgV2hldGhlciB0byByZXF1aXJlIHRoZSBjZXJ0aWZpY2F0ZSB2ZXJpZmljYXRpb24uIFRoaXMgZGVmYXVsdHMgdG8KICAgICAgICBgYHNzbC5DRVJUX1JFUVVJUkVEYGAuCiAgICA6cGFyYW0gb3B0aW9uczoKICAgICAgICBTcGVjaWZpYyBPcGVuU1NMIG9wdGlvbnMuIFRoZXNlIGRlZmF1bHQgdG8gYGBzc2wuT1BfTk9fU1NMdjJgYCwKICAgICAgICBgYHNzbC5PUF9OT19TU0x2M2BgLCBgYHNzbC5PUF9OT19DT01QUkVTU0lPTmBgLCBhbmQgYGBzc2wuT1BfTk9fVElDS0VUYGAuCiAgICA6cGFyYW0gY2lwaGVyczoKICAgICAgICBXaGljaCBjaXBoZXIgc3VpdGVzIHRvIGFsbG93IHRoZSBzZXJ2ZXIgdG8gc2VsZWN0LgogICAgOnJldHVybnM6CiAgICAgICAgQ29uc3RydWN0ZWQgU1NMQ29udGV4dCBvYmplY3Qgd2l0aCBzcGVjaWZpZWQgb3B0aW9ucwogICAgOnJ0eXBlOiBTU0xDb250ZXh0CiAgICBcIlwiXCIKICAgICMgUFJPVE9DT0xfVExTIGlzIGRlcHJlY2F0ZWQgaW4gUHl0aG9uIDMuMTAKICAgIGlmIG5vdCBzc2xfdmVyc2lvbiBvciBzc2xfdmVyc2lvbiA9PSBQUk9UT0NPTF9UTFM6CiAgICAgICAgc3NsX3ZlcnNpb24gPSBQUk9UT0NPTF9UTFNfQ0xJRU5UCgogICAgY29udGV4dCA9IFNTTENvbnRleHQoc3NsX3ZlcnNpb24pCgogICAgY29udGV4dC5zZXRfY2lwaGVycyhjaXBoZXJzIG9yIERFRkFVTFRfQ0lQSEVSUykKCiAgICAjIFNldHRpbmcgdGhlIGRlZmF1bHQgaGVyZSwgYXMgd2UgbWF5IGhhdmUgbm8gc3NsIG1vZHVsZSBvbiBpbXBvcnQKICAgIGNlcnRfcmVxcyA9IHNzbC5DRVJUX1JFUVVJUkVEIGlmIGNlcnRfcmVxcyBpcyBOb25lIGVsc2UgY2VydF9yZXFzCgogICAgaWYgb3B0aW9ucyBpcyBOb25lOgogICAgICAgIG9wdGlvbnMgPSAwCiAgICAgICAgIyBTU0x2MiBpcyBlYXNpbHkgYnJva2VuIGFuZCBpcyBjb25zaWRlcmVkIGhhcm1mdWwgYW5kIGRhbmdlcm91cwogICAgICAgIG9wdGlvbnMgfD0gT1BfTk9fU1NMdjIKICAgICAgICAjIFNTTHYzIGhhcyBzZXZlcmFsIHByb2JsZW1zIGFuZCBpcyBub3cgZGFuZ2Vyb3VzCiAgICAgICAgb3B0aW9ucyB8PSBPUF9OT19TU0x2MwogICAgICAgICMgRGlzYWJsZSBjb21wcmVzc2lvbiB0byBwcmV2ZW50IENSSU1FIGF0dGFja3MgZm9yIE9wZW5TU0wgMS4wKwogICAgICAgICMgKGlzc3VlICMzMDkpCiAgICAgICAgb3B0aW9ucyB8PSBPUF9OT19DT01QUkVTU0lPTgogICAgICAgICMgVExTdjEuMiBvbmx5LiBVbmxlc3Mgc2V0IGV4cGxpY2l0bHksIGRvIG5vdCByZXF1ZXN0IHRpY2tldHMuCiAgICAgICAgIyBUaGlzIG1heSBzYXZlIHNvbWUgYmFuZHdpZHRoIG9uIHdpcmUsIGFuZCBhbHRob3VnaCB0aGUgdGlja2V0IGlzIGVuY3J5cHRlZCwKICAgICAgICAjIHRoZXJlIGlzIGEgcmlzayBhc3NvY2lhdGVkIHdpdGggaXQgYmVpbmcgb24gd2lyZSwKICAgICAgICAjIGlmIHRoZSBzZXJ2ZXIgaXMgbm90IHJvdGF0aW5nIGl0cyB0aWNrZXRpbmcga2V5cyBwcm9wZXJseS4KICAgICAgICBvcHRpb25zIHw9IE9QX05PX1RJQ0tFVAoKICAgIGNvbnRleHQub3B0aW9ucyB8PSBvcHRpb25zCgogICAgIyBFbmFibGUgcG9zdC1oYW5kc2hha2UgYXV0aGVudGljYXRpb24gZm9yIFRMUyAxLjMsIHNlZSBHSCAjMTYzNC4gUEhBIGlzCiAgICAjIG5lY2Vzc2FyeSBmb3IgY29uZGl0aW9uYWwgY2xpZW50IGNlcnQgYXV0aGVudGljYXRpb24gd2l0aCBUTFMgMS4zLgogICAgIyBUaGUgYXR0cmlidXRlIGlzIE5vbmUgZm9yIE9wZW5TU0wgPD0gMS4xLjAgb3IgZG9lcyBub3QgZXhpc3QgaW4gb2xkZXIKICAgICMgdmVyc2lvbnMgb2YgUHl0aG9uLiAgV2Ugb25seSBlbmFibGUgb24gUHl0aG9uIDMuNy40KyBvciBpZiBjZXJ0aWZpY2F0ZQogICAgIyB2ZXJpZmljYXRpb24gaXMgZW5hYmxlZCB0byB3b3JrIGFyb3VuZCBQeXRob24gaXNzdWUgIzM3NDI4CiAgICAjIFNlZTogaHR0cHM6Ly9idWdzLnB5dGhvbi5vcmcvaXNzdWUzNzQyOAogICAgaWYgKGNlcnRfcmVxcyA9PSBzc2wuQ0VSVF9SRVFVSVJFRCBvciBzeXMudmVyc2lvbl9pbmZvID49ICgzLCA3LCA0KSkgYW5kIGdldGF0dHIoCiAgICAgICAgY29udGV4dCwgXCJwb3N0X2hhbmRzaGFrZV9hdXRoXCIsIE5vbmUKICAgICkgaXMgbm90IE5vbmU6CiAgICAgICAgY29udGV4dC5wb3N0X2hhbmRzaGFrZV9hdXRoID0gVHJ1ZQoKICAgIGRlZiBkaXNhYmxlX2NoZWNrX2hvc3RuYW1lKCk6CiAgICAgICAgaWYgKAogICAgICAgICAgICBnZXRhdHRyKGNvbnRleHQsIFwiY2hlY2tfaG9zdG5hbWVcIiwgTm9uZSkgaXMgbm90IE5vbmUKICAgICAgICApOiAgIyBQbGF0Zm9ybS1zcGVjaWZpYzogUHl0aG9uIDMuMgogICAgICAgICAgICAjIFdlIGRvIG91ciBvd24gdmVyaWZpY2F0aW9uLCBpbmNsdWRpbmcgZmluZ2VycHJpbnRzIGFuZCBhbHRlcm5hdGl2ZQogICAgICAgICAgICAjIGhvc3RuYW1lcy4gU28gZGlzYWJsZSBpdCBoZXJlCiAgICAgICAgICAgIGNvbnRleHQuY2hlY2tfaG9zdG5hbWUgPSBGYWxzZQoKICAgICMgVGhlIG9yZGVyIG9mIHRoZSBiZWxvdyBsaW5lcyBzZXR0aW5nIHZlcmlmeV9tb2RlIGFuZCBjaGVja19ob3N0bmFtZQogICAgIyBtYXR0ZXIgZHVlIHRvIHNhZmUtZ3VhcmRzIFNTTENvbnRleHQgaGFzIHRvIHByZXZlbnQgYW4gU1NMQ29udGV4dCB3aXRoCiAgICAjIGNoZWNrX2hvc3RuYW1lPVRydWUsIHZlcmlmeV9tb2RlPU5PTkUvT1BUSU9OQUwuIFRoaXMgaXMgbWFkZSBldmVuIG1vcmUKICAgICMgY29tcGxleCBiZWNhdXNlIHdlIGRvbid0IGtub3cgd2hldGhlciBQUk9UT0NPTF9UTFNfQ0xJRU5UIHdpbGwgYmUgdXNlZAogICAgIyBvciBub3Qgc28gd2UgZG9uJ3Qga25vdyB0aGUgaW5pdGlhbCBzdGF0ZSBvZiB0aGUgZnJlc2hseSBjcmVhdGVkIFNTTENvbnRleHQuCiAgICBpZiBjZXJ0X3JlcXMgPT0gc3NsLkNFUlRfUkVRVUlSRUQ6CiAgICAgICAgY29udGV4dC52ZXJpZnlfbW9kZSA9IGNlcnRfcmVxcwogICAgICAgIGRpc2FibGVfY2hlY2tfaG9zdG5hbWUoKQogICAgZWxzZToKICAgICAgICBkaXNhYmxlX2NoZWNrX2hvc3RuYW1lKCkKICAgICAgICBjb250ZXh0LnZlcmlmeV9tb2RlID0gY2VydF9yZXFzCgogICAgIyBFbmFibGUgbG9nZ2luZyBvZiBUTFMgc2Vzc2lvbiBrZXlzIHZpYSBkZWZhY3RvIHN0YW5kYXJkIGVudmlyb25tZW50IHZhcmlhYmxlCiAgICAjICdTU0xLRVlMT0dGSUxFJywgaWYgdGhlIGZlYXR1cmUgaXMgYXZhaWxhYmxlIChQeXRob24gMy44KykuIFNraXAgZW1wdHkgdmFsdWVzLgogICAgaWYgaGFzYXR0cihjb250ZXh0LCBcImtleWxvZ19maWxlbmFtZVwiKToKICAgICAgICBzc2xrZXlsb2dmaWxlID0gb3MuZW52aXJvbi5nZXQoXCJTU0xLRVlMT0dGSUxFXCIpCiAgICAgICAgaWYgc3Nsa2V5bG9nZmlsZToKICAgICAgICAgICAgY29udGV4dC5rZXlsb2dfZmlsZW5hbWUgPSBzc2xrZXlsb2dmaWxlCgogICAgcmV0dXJuIGNvbnRleHQKCgpkZWYgc3NsX3dyYXBfc29ja2V0KAogICAgc29jaywKICAgIGtleWZpbGU9Tm9uZSwKICAgIGNlcnRmaWxlPU5vbmUsCiAgICBjZXJ0X3JlcXM9Tm9uZSwKICAgIGNhX2NlcnRzPU5vbmUsCiAgICBzZXJ2ZXJfaG9zdG5hbWU9Tm9uZSwKICAgIHNzbF92ZXJzaW9uPU5vbmUsCiAgICBjaXBoZXJzPU5vbmUsCiAgICBzc2xfY29udGV4dD1Ob25lLAogICAgY2FfY2VydF9kaXI9Tm9uZSwKICAgIGtleV9wYXNzd29yZD1Ob25lLAogICAgY2FfY2VydF9kYXRhPU5vbmUsCiAgICB0bHNfaW5fdGxzPUZhbHNlLAopOgogICAgXCJcIlwiCiAgICBBbGwgYXJndW1lbnRzIGV4Y2VwdCBmb3Igc2VydmVyX2hvc3RuYW1lLCBzc2xfY29udGV4dCwgYW5kIGNhX2NlcnRfZGlyIGhhdmUKICAgIHRoZSBzYW1lIG1lYW5pbmcgYXMgdGhleSBkbyB3aGVuIHVzaW5nIDpmdW5jOmBzc2wud3JhcF9zb2NrZXRgLgoKICAgIDpwYXJhbSBzZXJ2ZXJfaG9zdG5hbWU6CiAgICAgICAgV2hlbiBTTkkgaXMgc3VwcG9ydGVkLCB0aGUgZXhwZWN0ZWQgaG9zdG5hbWUgb2YgdGhlIGNlcnRpZmljYXRlCiAgICA6cGFyYW0gc3NsX2NvbnRleHQ6CiAgICAgICAgQSBwcmUtbWFkZSA6Y2xhc3M6YFNTTENvbnRleHRgIG9iamVjdC4gSWYgbm9uZSBpcyBwcm92aWRlZCwgb25lIHdpbGwKICAgICAgICBiZSBjcmVhdGVkIHVzaW5nIDpmdW5jOmBjcmVhdGVfdXJsbGliM19jb250ZXh0YC4KICAgIDpwYXJhbSBjaXBoZXJzOgogICAgICAgIEEgc3RyaW5nIG9mIGNpcGhlcnMgd2Ugd2lzaCB0aGUgY2xpZW50IHRvIHN1cHBvcnQuCiAgICA6cGFyYW0gY2FfY2VydF9kaXI6CiAgICAgICAgQSBkaXJlY3RvcnkgY29udGFpbmluZyBDQSBjZXJ0aWZpY2F0ZXMgaW4gbXVsdGlwbGUgc2VwYXJhdGUgZmlsZXMsIGFzCiAgICAgICAgc3VwcG9ydGVkIGJ5IE9wZW5TU0wncyAtQ0FwYXRoIGZsYWcgb3IgdGhlIGNhcGF0aCBhcmd1bWVudCB0bwogICAgICAgIFNTTENvbnRleHQubG9hZF92ZXJpZnlfbG9jYXRpb25zKCkuCiAgICA6cGFyYW0ga2V5X3Bhc3N3b3JkOgogICAgICAgIE9wdGlvbmFsIHBhc3N3b3JkIGlmIHRoZSBrZXlmaWxlIGlzIGVuY3J5cHRlZC4KICAgIDpwYXJhbSBjYV9jZXJ0X2RhdGE6CiAgICAgICAgT3B0aW9uYWwgc3RyaW5nIGNvbnRhaW5pbmcgQ0EgY2VydGlmaWNhdGVzIGluIFBFTSBmb3JtYXQgc3VpdGFibGUgZm9yCiAgICAgICAgcGFzc2luZyBhcyB0aGUgY2FkYXRhIHBhcmFtZXRlciB0byBTU0xDb250ZXh0LmxvYWRfdmVyaWZ5X2xvY2F0aW9ucygpCiAgICA6cGFyYW0gdGxzX2luX3RsczoKICAgICAgICBVc2UgU1NMVHJhbnNwb3J0IHRvIHdyYXAgdGhlIGV4aXN0aW5nIHNvY2tldC4KICAgIFwiXCJcIgogICAgY29udGV4dCA9IHNzbF9jb250ZXh0CiAgICBpZiBjb250ZXh0IGlzIE5vbmU6CiAgICAgICAgIyBOb3RlOiBUaGlzIGJyYW5jaCBvZiBjb2RlIGFuZCBhbGwgdGhlIHZhcmlhYmxlcyBpbiBpdCBhcmUgbm8gbG9uZ2VyCiAgICAgICAgIyB1c2VkIGJ5IHVybGxpYjMgaXRzZWxmLiBXZSBzaG91bGQgY29uc2lkZXIgZGVwcmVjYXRpbmcgYW5kIHJlbW92aW5nCiAgICAgICAgIyB0aGlzIGNvZGUuCiAgICAgICAgY29udGV4dCA9IGNyZWF0ZV91cmxsaWIzX2NvbnRleHQoc3NsX3ZlcnNpb24sIGNlcnRfcmVxcywgY2lwaGVycz1jaXBoZXJzKQoKICAgIGlmIGNhX2NlcnRzIG9yIGNhX2NlcnRfZGlyIG9yIGNhX2NlcnRfZGF0YToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGNvbnRleHQubG9hZF92ZXJpZnlfbG9jYXRpb25zKGNhX2NlcnRzLCBjYV9jZXJ0X2RpciwgY2FfY2VydF9kYXRhKQogICAgICAgIGV4Y2VwdCAoSU9FcnJvciwgT1NFcnJvcikgYXMgZToKICAgICAgICAgICAgcmFpc2UgU1NMRXJyb3IoZSkKCiAgICBlbGlmIHNzbF9jb250ZXh0IGlzIE5vbmUgYW5kIGhhc2F0dHIoY29udGV4dCwgXCJsb2FkX2RlZmF1bHRfY2VydHNcIik6CiAgICAgICAgIyB0cnkgdG8gbG9hZCBPUyBkZWZhdWx0IGNlcnRzOyB3b3JrcyB3ZWxsIG9uIFdpbmRvd3MgKHJlcXVpcmUgUHl0aG9uMy40KykKICAgICAgICBjb250ZXh0LmxvYWRfZGVmYXVsdF9jZXJ0cygpCgogICAgIyBBdHRlbXB0IHRvIGRldGVjdCBpZiB3ZSBnZXQgdGhlIGdvb2Z5IGJlaGF2aW9yIG9mIHRoZQogICAgIyBrZXlmaWxlIGJlaW5nIGVuY3J5cHRlZCBhbmQgT3BlblNTTCBhc2tpbmcgZm9yIHRoZQogICAgIyBwYXNzcGhyYXNlIHZpYSB0aGUgdGVybWluYWwgYW5kIGluc3RlYWQgZXJyb3Igb3V0LgogICAgaWYga2V5ZmlsZSBhbmQga2V5X3Bhc3N3b3JkIGlzIE5vbmUgYW5kIF9pc19rZXlfZmlsZV9lbmNyeXB0ZWQoa2V5ZmlsZSk6CiAgICAgICAgcmFpc2UgU1NMRXJyb3IoXCJDbGllbnQgcHJpdmF0ZSBrZXkgaXMgZW5jcnlwdGVkLCBwYXNzd29yZCBpcyByZXF1aXJlZFwiKQoKICAgIGlmIGNlcnRmaWxlOgogICAgICAgIGlmIGtleV9wYXNzd29yZCBpcyBOb25lOgogICAgICAgICAgICBjb250ZXh0LmxvYWRfY2VydF9jaGFpbihjZXJ0ZmlsZSwga2V5ZmlsZSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBjb250ZXh0LmxvYWRfY2VydF9jaGFpbihjZXJ0ZmlsZSwga2V5ZmlsZSwga2V5X3Bhc3N3b3JkKQoKICAgIHRyeToKICAgICAgICBpZiBoYXNhdHRyKGNvbnRleHQsIFwic2V0X2FscG5fcHJvdG9jb2xzXCIpOgogICAgICAgICAgICBjb250ZXh0LnNldF9hbHBuX3Byb3RvY29scyhBTFBOX1BST1RPQ09MUykKICAgIGV4Y2VwdCBOb3RJbXBsZW1lbnRlZEVycm9yOiAgIyBEZWZlbnNpdmU6IGluIENJLCB3ZSBhbHdheXMgaGF2ZSBzZXRfYWxwbl9wcm90b2NvbHMKICAgICAgICBwYXNzCgogICAgIyBJZiB3ZSBkZXRlY3Qgc2VydmVyX2hvc3RuYW1lIGlzIGFuIElQIGFkZHJlc3MgdGhlbiB0aGUgU05JCiAgICAjIGV4dGVuc2lvbiBzaG91bGQgbm90IGJlIHVzZWQgYWNjb3JkaW5nIHRvIFJGQzM1NDYgU2VjdGlvbiAzLjEKICAgIHVzZV9zbmlfaG9zdG5hbWUgPSBzZXJ2ZXJfaG9zdG5hbWUgYW5kIG5vdCBpc19pcGFkZHJlc3Moc2VydmVyX2hvc3RuYW1lKQogICAgIyBTZWN1cmVUcmFuc3BvcnQgdXNlcyBzZXJ2ZXJfaG9zdG5hbWUgaW4gY2VydGlmaWNhdGUgdmVyaWZpY2F0aW9uLgogICAgc2VuZF9zbmkgPSAodXNlX3NuaV9ob3N0bmFtZSBhbmQgSEFTX1NOSSkgb3IgKAogICAgICAgIElTX1NFQ1VSRVRSQU5TUE9SVCBhbmQgc2VydmVyX2hvc3RuYW1lCiAgICApCiAgICAjIERvIG5vdCB3YXJuIHRoZSB1c2VyIGlmIHNlcnZlcl9ob3N0bmFtZSBpcyBhbiBpbnZhbGlkIFNOSSBob3N0bmFtZS4KICAgIGlmIG5vdCBIQVNfU05JIGFuZCB1c2Vfc25pX2hvc3RuYW1lOgogICAgICAgIHdhcm5pbmdzLndhcm4oCiAgICAgICAgICAgIFwiQW4gSFRUUFMgcmVxdWVzdCBoYXMgYmVlbiBtYWRlLCBidXQgdGhlIFNOSSAoU2VydmVyIE5hbWUgXCIKICAgICAgICAgICAgXCJJbmRpY2F0aW9uKSBleHRlbnNpb24gdG8gVExTIGlzIG5vdCBhdmFpbGFibGUgb24gdGhpcyBwbGF0Zm9ybS4gXCIKICAgICAgICAgICAgXCJUaGlzIG1heSBjYXVzZSB0aGUgc2VydmVyIHRvIHByZXNlbnQgYW4gaW5jb3JyZWN0IFRMUyBcIgogICAgICAgICAgICBcImNlcnRpZmljYXRlLCB3aGljaCBjYW4gY2F1c2UgdmFsaWRhdGlvbiBmYWlsdXJlcy4gWW91IGNhbiB1cGdyYWRlIHRvIFwiCiAgICAgICAgICAgIFwiYSBuZXdlciB2ZXJzaW9uIG9mIFB5dGhvbiB0byBzb2x2ZSB0aGlzLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlIFwiCiAgICAgICAgICAgIFwiaHR0cHM6Ly91cmxsaWIzLnJlYWR0aGVkb2NzLmlvL2VuLzEuMjYueC9hZHZhbmNlZC11c2FnZS5odG1sXCIKICAgICAgICAgICAgXCIjc3NsLXdhcm5pbmdzXCIsCiAgICAgICAgICAgIFNOSU1pc3NpbmdXYXJuaW5nLAogICAgICAgICkKCiAgICBpZiBzZW5kX3NuaToKICAgICAgICBzc2xfc29jayA9IF9zc2xfd3JhcF9zb2NrZXRfaW1wbCgKICAgICAgICAgICAgc29jaywgY29udGV4dCwgdGxzX2luX3Rscywgc2VydmVyX2hvc3RuYW1lPXNlcnZlcl9ob3N0bmFtZQogICAgICAgICkKICAgIGVsc2U6CiAgICAgICAgc3NsX3NvY2sgPSBfc3NsX3dyYXBfc29ja2V0X2ltcGwoc29jaywgY29udGV4dCwgdGxzX2luX3RscykKICAgIHJldHVybiBzc2xfc29jawoKCmRlZiBpc19pcGFkZHJlc3MoaG9zdG5hbWUpOgogICAgXCJcIlwiRGV0ZWN0cyB3aGV0aGVyIHRoZSBob3N0bmFtZSBnaXZlbiBpcyBhbiBJUHY0IG9yIElQdjYgYWRkcmVzcy4KICAgIEFsc28gZGV0ZWN0cyBJUHY2IGFkZHJlc3NlcyB3aXRoIFpvbmUgSURzLgoKICAgIDpwYXJhbSBzdHIgaG9zdG5hbWU6IEhvc3RuYW1lIHRvIGV4YW1pbmUuCiAgICA6cmV0dXJuOiBUcnVlIGlmIHRoZSBob3N0bmFtZSBpcyBhbiBJUCBhZGRyZXNzLCBGYWxzZSBvdGhlcndpc2UuCiAgICBcIlwiXCIKICAgIGlmIG5vdCBzaXguUFkyIGFuZCBpc2luc3RhbmNlKGhvc3RuYW1lLCBieXRlcyk6CiAgICAgICAgIyBJRE4gQS1sYWJlbCBieXRlcyBhcmUgQVNDSUkgY29tcGF0aWJsZS4KICAgICAgICBob3N0bmFtZSA9IGhvc3RuYW1lLmRlY29kZShcImFzY2lpXCIpCiAgICByZXR1cm4gYm9vbChJUFY0X1JFLm1hdGNoKGhvc3RuYW1lKSBvciBCUkFDRUxFU1NfSVBWNl9BRERSWl9SRS5tYXRjaChob3N0bmFtZSkpCgoKZGVmIF9pc19rZXlfZmlsZV9lbmNyeXB0ZWQoa2V5X2ZpbGUpOgogICAgXCJcIlwiRGV0ZWN0cyBpZiBhIGtleSBmaWxlIGlzIGVuY3J5cHRlZCBvciBub3QuXCJcIlwiCiAgICB3aXRoIG9wZW4oa2V5X2ZpbGUsIFwiclwiKSBhcyBmOgogICAgICAgIGZvciBsaW5lIGluIGY6CiAgICAgICAgICAgICMgTG9vayBmb3IgUHJvYy1UeXBlOiA0LEVOQ1JZUFRFRAogICAgICAgICAgICBpZiBcIkVOQ1JZUFRFRFwiIGluIGxpbmU6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIHJldHVybiBGYWxzZQoKCmRlZiBfc3NsX3dyYXBfc29ja2V0X2ltcGwoc29jaywgc3NsX2NvbnRleHQsIHRsc19pbl90bHMsIHNlcnZlcl9ob3N0bmFtZT1Ob25lKToKICAgIGlmIHRsc19pbl90bHM6CiAgICAgICAgaWYgbm90IFNTTFRyYW5zcG9ydDoKICAgICAgICAgICAgIyBJbXBvcnQgZXJyb3IsIHNzbCBpcyBub3QgYXZhaWxhYmxlLgogICAgICAgICAgICByYWlzZSBQcm94eVNjaGVtZVVuc3VwcG9ydGVkKAogICAgICAgICAgICAgICAgXCJUTFMgaW4gVExTIHJlcXVpcmVzIHN1cHBvcnQgZm9yIHRoZSAnc3NsJyBtb2R1bGVcIgogICAgICAgICAgICApCgogICAgICAgIFNTTFRyYW5zcG9ydC5fdmFsaWRhdGVfc3NsX2NvbnRleHRfZm9yX3Rsc19pbl90bHMoc3NsX2NvbnRleHQpCiAgICAgICAgcmV0dXJuIFNTTFRyYW5zcG9ydChzb2NrLCBzc2xfY29udGV4dCwgc2VydmVyX2hvc3RuYW1lKQoKICAgIGlmIHNlcnZlcl9ob3N0bmFtZToKICAgICAgICByZXR1cm4gc3NsX2NvbnRleHQud3JhcF9zb2NrZXQoc29jaywgc2VydmVyX2hvc3RuYW1lPXNlcnZlcl9ob3N0bmFtZSkKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIHNzbF9jb250ZXh0LndyYXBfc29ja2V0KHNvY2spCgoiIiIKbW9kdWxlX2RpY3RbInVybGxpYjMiK29zLnNlcCsidXRpbCIrb3Muc2VwKyJ3YWl0LnB5Il09IiIiCmltcG9ydCBlcnJubwppbXBvcnQgc2VsZWN0CmltcG9ydCBzeXMKZnJvbSBmdW5jdG9vbHMgaW1wb3J0IHBhcnRpYWwKCnRyeToKICAgIGZyb20gdGltZSBpbXBvcnQgbW9ub3RvbmljCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIGZyb20gdGltZSBpbXBvcnQgdGltZSBhcyBtb25vdG9uaWMKCl9fYWxsX18gPSBbXCJOb1dheVRvV2FpdEZvclNvY2tldEVycm9yXCIsIFwid2FpdF9mb3JfcmVhZFwiLCBcIndhaXRfZm9yX3dyaXRlXCJdCgoKY2xhc3MgTm9XYXlUb1dhaXRGb3JTb2NrZXRFcnJvcihFeGNlcHRpb24pOgogICAgcGFzcwoKCiMgSG93IHNob3VsZCB3ZSB3YWl0IG9uIHNvY2tldHM/CiMKIyBUaGVyZSBhcmUgdHdvIHR5cGVzIG9mIEFQSXMgeW91IGNhbiB1c2UgZm9yIHdhaXRpbmcgb24gc29ja2V0czogdGhlIGZhbmN5CiMgbW9kZXJuIHN0YXRlZnVsIEFQSXMgbGlrZSBlcG9sbC9rcXVldWUsIGFuZCB0aGUgb2xkZXIgc3RhdGVsZXNzIEFQSXMgbGlrZQojIHNlbGVjdC9wb2xsLiBUaGUgc3RhdGVmdWwgQVBJcyBhcmUgbW9yZSBlZmZpY2llbnQgd2hlbiB5b3UgaGF2ZSBhIGxvdHMgb2YKIyBzb2NrZXRzIHRvIGtlZXAgdHJhY2sgb2YsIGJlY2F1c2UgeW91IGNhbiBzZXQgdGhlbSB1cCBvbmNlIGFuZCB0aGVuIHVzZSB0aGVtCiMgbG90cyBvZiB0aW1lcy4gQnV0IHdlIG9ubHkgZXZlciB3YW50IHRvIHdhaXQgb24gYSBzaW5nbGUgc29ja2V0IGF0IGEgdGltZQojIGFuZCBkb24ndCB3YW50IHRvIGtlZXAgdHJhY2sgb2Ygc3RhdGUsIHNvIHRoZSBzdGF0ZWxlc3MgQVBJcyBhcmUgYWN0dWFsbHkKIyBtb3JlIGVmZmljaWVudC4gU28gd2Ugd2FudCB0byB1c2Ugc2VsZWN0KCkgb3IgcG9sbCgpLgojCiMgTm93LCBob3cgZG8gd2UgY2hvb3NlIGJldHdlZW4gc2VsZWN0KCkgYW5kIHBvbGwoKT8gT24gdHJhZGl0aW9uYWwgVW5peGVzLAojIHNlbGVjdCgpIGhhcyBhIHN0cmFuZ2UgY2FsbGluZyBjb252ZW50aW9uIHRoYXQgbWFrZXMgaXQgc2xvdywgb3IgZmFpbAojIGFsdG9nZXRoZXIsIGZvciBoaWdoLW51bWJlcmVkIGZpbGUgZGVzY3JpcHRvcnMuIFRoZSBwb2ludCBvZiBwb2xsKCkgaXMgdG8gZml4CiMgdGhhdCwgc28gb24gVW5peGVzLCB3ZSBwcmVmZXIgcG9sbCgpLgojCiMgT24gV2luZG93cywgdGhlcmUgaXMgbm8gcG9sbCgpIChvciBhdCBsZWFzdCBQeXRob24gZG9lc24ndCBwcm92aWRlIGEgd3JhcHBlcgojIGZvciBpdCksIGJ1dCB0aGF0J3MgT0ssIGJlY2F1c2Ugb24gV2luZG93cywgc2VsZWN0KCkgZG9lc24ndCBoYXZlIHRoaXMKIyBzdHJhbmdlIGNhbGxpbmcgY29udmVudGlvbjsgcGxhaW4gc2VsZWN0KCkgd29ya3MgZmluZS4KIwojIFNvOiBvbiBXaW5kb3dzIHdlIHVzZSBzZWxlY3QoKSwgYW5kIGV2ZXJ5d2hlcmUgZWxzZSB3ZSB1c2UgcG9sbCgpLiBXZSBhbHNvCiMgZmFsbCBiYWNrIHRvIHNlbGVjdCgpIGluIGNhc2UgcG9sbCgpIGlzIHNvbWVob3cgYnJva2VuIG9yIG1pc3NpbmcuCgppZiBzeXMudmVyc2lvbl9pbmZvID49ICgzLCA1KToKICAgICMgTW9kZXJuIFB5dGhvbiwgdGhhdCByZXRyaWVzIHN5c2NhbGxzIGJ5IGRlZmF1bHQKICAgIGRlZiBfcmV0cnlfb25faW50cihmbiwgdGltZW91dCk6CiAgICAgICAgcmV0dXJuIGZuKHRpbWVvdXQpCgplbHNlOgogICAgIyBPbGQgYW5kIGJyb2tlbiBQeXRob25zLgogICAgZGVmIF9yZXRyeV9vbl9pbnRyKGZuLCB0aW1lb3V0KToKICAgICAgICBpZiB0aW1lb3V0IGlzIE5vbmU6CiAgICAgICAgICAgIGRlYWRsaW5lID0gZmxvYXQoXCJpbmZcIikKICAgICAgICBlbHNlOgogICAgICAgICAgICBkZWFkbGluZSA9IG1vbm90b25pYygpICsgdGltZW91dAoKICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICByZXR1cm4gZm4odGltZW91dCkKICAgICAgICAgICAgIyBPU0Vycm9yIGZvciAzIDw9IHB5dmVyIDwgMy41LCBzZWxlY3QuZXJyb3IgZm9yIHB5dmVyIDw9IDIuNwogICAgICAgICAgICBleGNlcHQgKE9TRXJyb3IsIHNlbGVjdC5lcnJvcikgYXMgZToKICAgICAgICAgICAgICAgICMgJ2UuYXJnc1swXScgaW5jYW50YXRpb24gd29ya3MgZm9yIGJvdGggT1NFcnJvciBhbmQgc2VsZWN0LmVycm9yCiAgICAgICAgICAgICAgICBpZiBlLmFyZ3NbMF0gIT0gZXJybm8uRUlOVFI6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IGRlYWRsaW5lIC0gbW9ub3RvbmljKCkKICAgICAgICAgICAgICAgICAgICBpZiB0aW1lb3V0IDwgMDoKICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IDAKICAgICAgICAgICAgICAgICAgICBpZiB0aW1lb3V0ID09IGZsb2F0KFwiaW5mXCIpOgogICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gTm9uZQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCgoKZGVmIHNlbGVjdF93YWl0X2Zvcl9zb2NrZXQoc29jaywgcmVhZD1GYWxzZSwgd3JpdGU9RmFsc2UsIHRpbWVvdXQ9Tm9uZSk6CiAgICBpZiBub3QgcmVhZCBhbmQgbm90IHdyaXRlOgogICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihcIm11c3Qgc3BlY2lmeSBhdCBsZWFzdCBvbmUgb2YgcmVhZD1UcnVlLCB3cml0ZT1UcnVlXCIpCiAgICByY2hlY2sgPSBbXQogICAgd2NoZWNrID0gW10KICAgIGlmIHJlYWQ6CiAgICAgICAgcmNoZWNrLmFwcGVuZChzb2NrKQogICAgaWYgd3JpdGU6CiAgICAgICAgd2NoZWNrLmFwcGVuZChzb2NrKQogICAgIyBXaGVuIGRvaW5nIGEgbm9uLWJsb2NraW5nIGNvbm5lY3QsIG1vc3Qgc3lzdGVtcyBzaWduYWwgc3VjY2VzcyBieQogICAgIyBtYXJraW5nIHRoZSBzb2NrZXQgd3JpdGFibGUuIFdpbmRvd3MsIHRob3VnaCwgc2lnbmFscyBzdWNjZXNzIGJ5IG1hcmtlZAogICAgIyBpdCBhcyBcImV4Y2VwdGlvbmFsXCIuIFdlIHBhcGVyIG92ZXIgdGhlIGRpZmZlcmVuY2UgYnkgY2hlY2tpbmcgdGhlIHdyaXRlCiAgICAjIHNvY2tldHMgZm9yIGJvdGggY29uZGl0aW9ucy4gKFRoZSBzdGRsaWIgc2VsZWN0b3JzIG1vZHVsZSBkb2VzIHRoZSBzYW1lCiAgICAjIHRoaW5nLikKICAgIGZuID0gcGFydGlhbChzZWxlY3Quc2VsZWN0LCByY2hlY2ssIHdjaGVjaywgd2NoZWNrKQogICAgcnJlYWR5LCB3cmVhZHksIHhyZWFkeSA9IF9yZXRyeV9vbl9pbnRyKGZuLCB0aW1lb3V0KQogICAgcmV0dXJuIGJvb2wocnJlYWR5IG9yIHdyZWFkeSBvciB4cmVhZHkpCgoKZGVmIHBvbGxfd2FpdF9mb3Jfc29ja2V0KHNvY2ssIHJlYWQ9RmFsc2UsIHdyaXRlPUZhbHNlLCB0aW1lb3V0PU5vbmUpOgogICAgaWYgbm90IHJlYWQgYW5kIG5vdCB3cml0ZToKICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoXCJtdXN0IHNwZWNpZnkgYXQgbGVhc3Qgb25lIG9mIHJlYWQ9VHJ1ZSwgd3JpdGU9VHJ1ZVwiKQogICAgbWFzayA9IDAKICAgIGlmIHJlYWQ6CiAgICAgICAgbWFzayB8PSBzZWxlY3QuUE9MTElOCiAgICBpZiB3cml0ZToKICAgICAgICBtYXNrIHw9IHNlbGVjdC5QT0xMT1VUCiAgICBwb2xsX29iaiA9IHNlbGVjdC5wb2xsKCkKICAgIHBvbGxfb2JqLnJlZ2lzdGVyKHNvY2ssIG1hc2spCgogICAgIyBGb3Igc29tZSByZWFzb24sIHBvbGwoKSB0YWtlcyB0aW1lb3V0IGluIG1pbGxpc2Vjb25kcwogICAgZGVmIGRvX3BvbGwodCk6CiAgICAgICAgaWYgdCBpcyBub3QgTm9uZToKICAgICAgICAgICAgdCAqPSAxMDAwCiAgICAgICAgcmV0dXJuIHBvbGxfb2JqLnBvbGwodCkKCiAgICByZXR1cm4gYm9vbChfcmV0cnlfb25faW50cihkb19wb2xsLCB0aW1lb3V0KSkKCgpkZWYgbnVsbF93YWl0X2Zvcl9zb2NrZXQoKmFyZ3MsICoqa3dhcmdzKToKICAgIHJhaXNlIE5vV2F5VG9XYWl0Rm9yU29ja2V0RXJyb3IoXCJubyBzZWxlY3QtZXF1aXZhbGVudCBhdmFpbGFibGVcIikKCgpkZWYgX2hhdmVfd29ya2luZ19wb2xsKCk6CiAgICAjIEFwcGFyZW50bHkgc29tZSBzeXN0ZW1zIGhhdmUgYSBzZWxlY3QucG9sbCB0aGF0IGZhaWxzIGFzIHNvb24gYXMgeW91IHRyeQogICAgIyB0byB1c2UgaXQsIGVpdGhlciBkdWUgdG8gc3RyYW5nZSBjb25maWd1cmF0aW9uIG9yIGJyb2tlbiBtb25rZXlwYXRjaGluZwogICAgIyBmcm9tIGxpYnJhcmllcyBsaWtlIGV2ZW50bGV0L2dyZWVubGV0LgogICAgdHJ5OgogICAgICAgIHBvbGxfb2JqID0gc2VsZWN0LnBvbGwoKQogICAgICAgIF9yZXRyeV9vbl9pbnRyKHBvbGxfb2JqLnBvbGwsIDApCiAgICBleGNlcHQgKEF0dHJpYnV0ZUVycm9yLCBPU0Vycm9yKToKICAgICAgICByZXR1cm4gRmFsc2UKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIFRydWUKCgpkZWYgd2FpdF9mb3Jfc29ja2V0KCphcmdzLCAqKmt3YXJncyk6CiAgICAjIFdlIGRlbGF5IGNob29zaW5nIHdoaWNoIGltcGxlbWVudGF0aW9uIHRvIHVzZSB1bnRpbCB0aGUgZmlyc3QgdGltZSB3ZSdyZQogICAgIyBjYWxsZWQuIFdlIGNvdWxkIGRvIGl0IGF0IGltcG9ydCB0aW1lLCBidXQgdGhlbiB3ZSBtaWdodCBtYWtlIHRoZSB3cm9uZwogICAgIyBkZWNpc2lvbiBpZiBzb21lb25lIGdvZXMgd2lsZCB3aXRoIG1vbmtleXBhdGNoaW5nIHNlbGVjdC5wb2xsIGFmdGVyCiAgICAjIHdlJ3JlIGltcG9ydGVkLgogICAgZ2xvYmFsIHdhaXRfZm9yX3NvY2tldAogICAgaWYgX2hhdmVfd29ya2luZ19wb2xsKCk6CiAgICAgICAgd2FpdF9mb3Jfc29ja2V0ID0gcG9sbF93YWl0X2Zvcl9zb2NrZXQKICAgIGVsaWYgaGFzYXR0cihzZWxlY3QsIFwic2VsZWN0XCIpOgogICAgICAgIHdhaXRfZm9yX3NvY2tldCA9IHNlbGVjdF93YWl0X2Zvcl9zb2NrZXQKICAgIGVsc2U6ICAjIFBsYXRmb3JtLXNwZWNpZmljOiBBcHBlbmdpbmUuCiAgICAgICAgd2FpdF9mb3Jfc29ja2V0ID0gbnVsbF93YWl0X2Zvcl9zb2NrZXQKICAgIHJldHVybiB3YWl0X2Zvcl9zb2NrZXQoKmFyZ3MsICoqa3dhcmdzKQoKCmRlZiB3YWl0X2Zvcl9yZWFkKHNvY2ssIHRpbWVvdXQ9Tm9uZSk6CiAgICBcIlwiXCJXYWl0cyBmb3IgcmVhZGluZyB0byBiZSBhdmFpbGFibGUgb24gYSBnaXZlbiBzb2NrZXQuCiAgICBSZXR1cm5zIFRydWUgaWYgdGhlIHNvY2tldCBpcyByZWFkYWJsZSwgb3IgRmFsc2UgaWYgdGhlIHRpbWVvdXQgZXhwaXJlZC4KICAgIFwiXCJcIgogICAgcmV0dXJuIHdhaXRfZm9yX3NvY2tldChzb2NrLCByZWFkPVRydWUsIHRpbWVvdXQ9dGltZW91dCkKCgpkZWYgd2FpdF9mb3Jfd3JpdGUoc29jaywgdGltZW91dD1Ob25lKToKICAgIFwiXCJcIldhaXRzIGZvciB3cml0aW5nIHRvIGJlIGF2YWlsYWJsZSBvbiBhIGdpdmVuIHNvY2tldC4KICAgIFJldHVybnMgVHJ1ZSBpZiB0aGUgc29ja2V0IGlzIHJlYWRhYmxlLCBvciBGYWxzZSBpZiB0aGUgdGltZW91dCBleHBpcmVkLgogICAgXCJcIlwiCiAgICByZXR1cm4gd2FpdF9mb3Jfc29ja2V0KHNvY2ssIHdyaXRlPVRydWUsIHRpbWVvdXQ9dGltZW91dCkKCiIiIgptb2R1bGVfZGljdFsidXJsbGliMyIrb3Muc2VwKyJ1dGlsIitvcy5zZXArInF1ZXVlLnB5Il09IiIiCiMgPCBpbmNsdWRlICdRdWV1ZS5weScgPgoKaW1wb3J0IGNvbGxlY3Rpb25zCgpmcm9tIC4ucGFja2FnZXMgaW1wb3J0IHNpeApmcm9tIC4ucGFja2FnZXMuc2l4Lm1vdmVzIGltcG9ydCBxdWV1ZQoKaWYgc2l4LlBZMjoKICAgICMgUXVldWUgaXMgaW1wb3J0ZWQgZm9yIHNpZGUgZWZmZWN0cyBvbiBNUyBXaW5kb3dzLiBTZWUgaXNzdWUgIzIyOS4KICAgIGltcG9ydCBRdWV1ZSBhcyBfdW51c2VkX21vZHVsZV9RdWV1ZSAgIyBub3FhOiBGNDAxCgoKY2xhc3MgTGlmb1F1ZXVlKHF1ZXVlLlF1ZXVlKToKICAgIGRlZiBfaW5pdChzZWxmLCBfKToKICAgICAgICBzZWxmLnF1ZXVlID0gY29sbGVjdGlvbnMuZGVxdWUoKQoKICAgIGRlZiBfcXNpemUoc2VsZiwgbGVuPWxlbik6CiAgICAgICAgcmV0dXJuIGxlbihzZWxmLnF1ZXVlKQoKICAgIGRlZiBfcHV0KHNlbGYsIGl0ZW0pOgogICAgICAgIHNlbGYucXVldWUuYXBwZW5kKGl0ZW0pCgogICAgZGVmIF9nZXQoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYucXVldWUucG9wKCkKCiIiIgptb2R1bGVfZGljdFsidXJsbGliMyIrb3Muc2VwKyJ1dGlsIitvcy5zZXArInVybC5weSJdPSIiIgpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFic29sdXRlX2ltcG9ydAojIDwgaW5jbHVkZSAnaWRuYS5weScgPgoKCmltcG9ydCByZQpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBuYW1lZHR1cGxlCgpmcm9tIC4uZXhjZXB0aW9ucyBpbXBvcnQgTG9jYXRpb25QYXJzZUVycm9yCmZyb20gLi5wYWNrYWdlcyBpbXBvcnQgc2l4Cgp1cmxfYXR0cnMgPSBbXCJzY2hlbWVcIiwgXCJhdXRoXCIsIFwiaG9zdFwiLCBcInBvcnRcIiwgXCJwYXRoXCIsIFwicXVlcnlcIiwgXCJmcmFnbWVudFwiXQoKIyBXZSBvbmx5IHdhbnQgdG8gbm9ybWFsaXplIHVybHMgd2l0aCBhbiBIVFRQKFMpIHNjaGVtZS4KIyB1cmxsaWIzIGluZmVycyBVUkxzIHdpdGhvdXQgYSBzY2hlbWUgKE5vbmUpIHRvIGJlIGh0dHAuCk5PUk1BTElaQUJMRV9TQ0hFTUVTID0gKFwiaHR0cFwiLCBcImh0dHBzXCIsIE5vbmUpCgojIEFsbW9zdCBhbGwgb2YgdGhlc2UgcGF0dGVybnMgd2VyZSBkZXJpdmVkIGZyb20gdGhlCiMgJ3JmYzM5ODYnIG1vZHVsZTogaHR0cHM6Ly9naXRodWIuY29tL3B5dGhvbi1oeXBlci9yZmMzOTg2ClBFUkNFTlRfUkUgPSByZS5jb21waWxlKHJcIiVbYS1mQS1GMC05XXsyfVwiKQpTQ0hFTUVfUkUgPSByZS5jb21waWxlKHJcIl4oPzpbYS16QS1aXVthLXpBLVowLTkrLV0qOnwvKVwiKQpVUklfUkUgPSByZS5jb21waWxlKAogICAgclwiXig/OihbYS16QS1aXVthLXpBLVowLTkrLi1dKik6KT9cIgogICAgclwiKD86Ly8oW15cXFxcLz8jXSopKT9cIgogICAgclwiKFtePyNdKilcIgogICAgclwiKD86XFw/KFteI10qKSk/XCIKICAgIHJcIig/OiMoLiopKT8kXCIsCiAgICByZS5VTklDT0RFIHwgcmUuRE9UQUxMLAopCgpJUFY0X1BBVCA9IHJcIig/OlswLTldezEsM31cXC4pezN9WzAtOV17MSwzfVwiCkhFWF9QQVQgPSBcIlswLTlBLUZhLWZdezEsNH1cIgpMUzMyX1BBVCA9IFwiKD86e2hleH06e2hleH18e2lwdjR9KVwiLmZvcm1hdChoZXg9SEVYX1BBVCwgaXB2ND1JUFY0X1BBVCkKX3N1YnMgPSB7XCJoZXhcIjogSEVYX1BBVCwgXCJsczMyXCI6IExTMzJfUEFUfQpfdmFyaWF0aW9ucyA9IFsKICAgICMgICAgICAgICAgICAgICAgICAgICAgICAgICAgNiggaDE2IFwiOlwiICkgbHMzMgogICAgXCIoPzolKGhleClzOil7Nn0lKGxzMzIpc1wiLAogICAgIyAgICAgICAgICAgICAgICAgICAgICAgXCI6OlwiIDUoIGgxNiBcIjpcIiApIGxzMzIKICAgIFwiOjooPzolKGhleClzOil7NX0lKGxzMzIpc1wiLAogICAgIyBbICAgICAgICAgICAgICAgaDE2IF0gXCI6OlwiIDQoIGgxNiBcIjpcIiApIGxzMzIKICAgIFwiKD86JShoZXgpcyk/OjooPzolKGhleClzOil7NH0lKGxzMzIpc1wiLAogICAgIyBbICoxKCBoMTYgXCI6XCIgKSBoMTYgXSBcIjo6XCIgMyggaDE2IFwiOlwiICkgbHMzMgogICAgXCIoPzooPzolKGhleClzOik/JShoZXgpcyk/OjooPzolKGhleClzOil7M30lKGxzMzIpc1wiLAogICAgIyBbICoyKCBoMTYgXCI6XCIgKSBoMTYgXSBcIjo6XCIgMiggaDE2IFwiOlwiICkgbHMzMgogICAgXCIoPzooPzolKGhleClzOil7MCwyfSUoaGV4KXMpPzo6KD86JShoZXgpczopezJ9JShsczMyKXNcIiwKICAgICMgWyAqMyggaDE2IFwiOlwiICkgaDE2IF0gXCI6OlwiICAgIGgxNiBcIjpcIiAgIGxzMzIKICAgIFwiKD86KD86JShoZXgpczopezAsM30lKGhleClzKT86OiUoaGV4KXM6JShsczMyKXNcIiwKICAgICMgWyAqNCggaDE2IFwiOlwiICkgaDE2IF0gXCI6OlwiICAgICAgICAgICAgICBsczMyCiAgICBcIig/Oig/OiUoaGV4KXM6KXswLDR9JShoZXgpcyk/OjolKGxzMzIpc1wiLAogICAgIyBbICo1KCBoMTYgXCI6XCIgKSBoMTYgXSBcIjo6XCIgICAgICAgICAgICAgIGgxNgogICAgXCIoPzooPzolKGhleClzOil7MCw1fSUoaGV4KXMpPzo6JShoZXgpc1wiLAogICAgIyBbICo2KCBoMTYgXCI6XCIgKSBoMTYgXSBcIjo6XCIKICAgIFwiKD86KD86JShoZXgpczopezAsNn0lKGhleClzKT86OlwiLApdCgpVTlJFU0VSVkVEX1BBVCA9IHJcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ll8hXFwtflwiCklQVjZfUEFUID0gXCIoPzpcIiArIFwifFwiLmpvaW4oW3ggJSBfc3VicyBmb3IgeCBpbiBfdmFyaWF0aW9uc10pICsgXCIpXCIKWk9ORV9JRF9QQVQgPSBcIig/OiUyNXwlKSg/OltcIiArIFVOUkVTRVJWRURfUEFUICsgXCJdfCVbYS1mQS1GMC05XXsyfSkrXCIKSVBWNl9BRERSWl9QQVQgPSByXCJcXFtcIiArIElQVjZfUEFUICsgclwiKD86XCIgKyBaT05FX0lEX1BBVCArIHJcIik/XFxdXCIKUkVHX05BTUVfUEFUID0gclwiKD86W15cXFtcXF0lOi8/I118JVthLWZBLUYwLTldezJ9KSpcIgpUQVJHRVRfUkUgPSByZS5jb21waWxlKHJcIl4oL1tePyNdKikoPzpcXD8oW14jXSopKT8oPzojLiopPyRcIikKCklQVjRfUkUgPSByZS5jb21waWxlKFwiXlwiICsgSVBWNF9QQVQgKyBcIiRcIikKSVBWNl9SRSA9IHJlLmNvbXBpbGUoXCJeXCIgKyBJUFY2X1BBVCArIFwiJFwiKQpJUFY2X0FERFJaX1JFID0gcmUuY29tcGlsZShcIl5cIiArIElQVjZfQUREUlpfUEFUICsgXCIkXCIpCkJSQUNFTEVTU19JUFY2X0FERFJaX1JFID0gcmUuY29tcGlsZShcIl5cIiArIElQVjZfQUREUlpfUEFUWzI6LTJdICsgXCIkXCIpClpPTkVfSURfUkUgPSByZS5jb21waWxlKFwiKFwiICsgWk9ORV9JRF9QQVQgKyByXCIpXFxdJFwiKQoKX0hPU1RfUE9SVF9QQVQgPSAoXCJeKCVzfCVzfCVzKSg/OjooWzAtOV17MCw1fSkpPyRcIikgJSAoCiAgICBSRUdfTkFNRV9QQVQsCiAgICBJUFY0X1BBVCwKICAgIElQVjZfQUREUlpfUEFULAopCl9IT1NUX1BPUlRfUkUgPSByZS5jb21waWxlKF9IT1NUX1BPUlRfUEFULCByZS5VTklDT0RFIHwgcmUuRE9UQUxMKQoKVU5SRVNFUlZFRF9DSEFSUyA9IHNldCgKICAgIFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkuXy1+XCIKKQpTVUJfREVMSU1fQ0hBUlMgPSBzZXQoXCIhJCYnKCkqKyw7PVwiKQpVU0VSSU5GT19DSEFSUyA9IFVOUkVTRVJWRURfQ0hBUlMgfCBTVUJfREVMSU1fQ0hBUlMgfCB7XCI6XCJ9ClBBVEhfQ0hBUlMgPSBVU0VSSU5GT19DSEFSUyB8IHtcIkBcIiwgXCIvXCJ9ClFVRVJZX0NIQVJTID0gRlJBR01FTlRfQ0hBUlMgPSBQQVRIX0NIQVJTIHwge1wiP1wifQoKCmNsYXNzIFVybChuYW1lZHR1cGxlKFwiVXJsXCIsIHVybF9hdHRycykpOgogICAgXCJcIlwiCiAgICBEYXRhIHN0cnVjdHVyZSBmb3IgcmVwcmVzZW50aW5nIGFuIEhUVFAgVVJMLiBVc2VkIGFzIGEgcmV0dXJuIHZhbHVlIGZvcgogICAgOmZ1bmM6YHBhcnNlX3VybGAuIEJvdGggdGhlIHNjaGVtZSBhbmQgaG9zdCBhcmUgbm9ybWFsaXplZCBhcyB0aGV5IGFyZQogICAgYm90aCBjYXNlLWluc2Vuc2l0aXZlIGFjY29yZGluZyB0byBSRkMgMzk4Ni4KICAgIFwiXCJcIgoKICAgIF9fc2xvdHNfXyA9ICgpCgogICAgZGVmIF9fbmV3X18oCiAgICAgICAgY2xzLAogICAgICAgIHNjaGVtZT1Ob25lLAogICAgICAgIGF1dGg9Tm9uZSwKICAgICAgICBob3N0PU5vbmUsCiAgICAgICAgcG9ydD1Ob25lLAogICAgICAgIHBhdGg9Tm9uZSwKICAgICAgICBxdWVyeT1Ob25lLAogICAgICAgIGZyYWdtZW50PU5vbmUsCiAgICApOgogICAgICAgIGlmIHBhdGggYW5kIG5vdCBwYXRoLnN0YXJ0c3dpdGgoXCIvXCIpOgogICAgICAgICAgICBwYXRoID0gXCIvXCIgKyBwYXRoCiAgICAgICAgaWYgc2NoZW1lIGlzIG5vdCBOb25lOgogICAgICAgICAgICBzY2hlbWUgPSBzY2hlbWUubG93ZXIoKQogICAgICAgIHJldHVybiBzdXBlcihVcmwsIGNscykuX19uZXdfXygKICAgICAgICAgICAgY2xzLCBzY2hlbWUsIGF1dGgsIGhvc3QsIHBvcnQsIHBhdGgsIHF1ZXJ5LCBmcmFnbWVudAogICAgICAgICkKCiAgICBAcHJvcGVydHkKICAgIGRlZiBob3N0bmFtZShzZWxmKToKICAgICAgICBcIlwiXCJGb3IgYmFja3dhcmRzLWNvbXBhdGliaWxpdHkgd2l0aCB1cmxwYXJzZS4gV2UncmUgbmljZSBsaWtlIHRoYXQuXCJcIlwiCiAgICAgICAgcmV0dXJuIHNlbGYuaG9zdAoKICAgIEBwcm9wZXJ0eQogICAgZGVmIHJlcXVlc3RfdXJpKHNlbGYpOgogICAgICAgIFwiXCJcIkFic29sdXRlIHBhdGggaW5jbHVkaW5nIHRoZSBxdWVyeSBzdHJpbmcuXCJcIlwiCiAgICAgICAgdXJpID0gc2VsZi5wYXRoIG9yIFwiL1wiCgogICAgICAgIGlmIHNlbGYucXVlcnkgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHVyaSArPSBcIj9cIiArIHNlbGYucXVlcnkKCiAgICAgICAgcmV0dXJuIHVyaQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIG5ldGxvYyhzZWxmKToKICAgICAgICBcIlwiXCJOZXR3b3JrIGxvY2F0aW9uIGluY2x1ZGluZyBob3N0IGFuZCBwb3J0XCJcIlwiCiAgICAgICAgaWYgc2VsZi5wb3J0OgogICAgICAgICAgICByZXR1cm4gXCIlczolZFwiICUgKHNlbGYuaG9zdCwgc2VsZi5wb3J0KQogICAgICAgIHJldHVybiBzZWxmLmhvc3QKCiAgICBAcHJvcGVydHkKICAgIGRlZiB1cmwoc2VsZik6CiAgICAgICAgXCJcIlwiCiAgICAgICAgQ29udmVydCBzZWxmIGludG8gYSB1cmwKCiAgICAgICAgVGhpcyBmdW5jdGlvbiBzaG91bGQgbW9yZSBvciBsZXNzIHJvdW5kLXRyaXAgd2l0aCA6ZnVuYzpgLnBhcnNlX3VybGAuIFRoZQogICAgICAgIHJldHVybmVkIHVybCBtYXkgbm90IGJlIGV4YWN0bHkgdGhlIHNhbWUgYXMgdGhlIHVybCBpbnB1dHRlZCB0bwogICAgICAgIDpmdW5jOmAucGFyc2VfdXJsYCwgYnV0IGl0IHNob3VsZCBiZSBlcXVpdmFsZW50IGJ5IHRoZSBSRkMgKGUuZy4sIHVybHMKICAgICAgICB3aXRoIGEgYmxhbmsgcG9ydCB3aWxsIGhhdmUgOiByZW1vdmVkKS4KCiAgICAgICAgRXhhbXBsZTogOjoKCiAgICAgICAgICAgID4+PiBVID0gcGFyc2VfdXJsKCdodHRwOi8vZ29vZ2xlLmNvbS9tYWlsLycpCiAgICAgICAgICAgID4+PiBVLnVybAogICAgICAgICAgICAnaHR0cDovL2dvb2dsZS5jb20vbWFpbC8nCiAgICAgICAgICAgID4+PiBVcmwoJ2h0dHAnLCAndXNlcm5hbWU6cGFzc3dvcmQnLCAnaG9zdC5jb20nLCA4MCwKICAgICAgICAgICAgLi4uICcvcGF0aCcsICdxdWVyeScsICdmcmFnbWVudCcpLnVybAogICAgICAgICAgICAnaHR0cDovL3VzZXJuYW1lOnBhc3N3b3JkQGhvc3QuY29tOjgwL3BhdGg/cXVlcnkjZnJhZ21lbnQnCiAgICAgICAgXCJcIlwiCiAgICAgICAgc2NoZW1lLCBhdXRoLCBob3N0LCBwb3J0LCBwYXRoLCBxdWVyeSwgZnJhZ21lbnQgPSBzZWxmCiAgICAgICAgdXJsID0gdVwiXCIKCiAgICAgICAgIyBXZSB1c2UgXCJpcyBub3QgTm9uZVwiIHdlIHdhbnQgdGhpbmdzIHRvIGhhcHBlbiB3aXRoIGVtcHR5IHN0cmluZ3MgKG9yIDAgcG9ydCkKICAgICAgICBpZiBzY2hlbWUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHVybCArPSBzY2hlbWUgKyB1XCI6Ly9cIgogICAgICAgIGlmIGF1dGggaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHVybCArPSBhdXRoICsgdVwiQFwiCiAgICAgICAgaWYgaG9zdCBpcyBub3QgTm9uZToKICAgICAgICAgICAgdXJsICs9IGhvc3QKICAgICAgICBpZiBwb3J0IGlzIG5vdCBOb25lOgogICAgICAgICAgICB1cmwgKz0gdVwiOlwiICsgc3RyKHBvcnQpCiAgICAgICAgaWYgcGF0aCBpcyBub3QgTm9uZToKICAgICAgICAgICAgdXJsICs9IHBhdGgKICAgICAgICBpZiBxdWVyeSBpcyBub3QgTm9uZToKICAgICAgICAgICAgdXJsICs9IHVcIj9cIiArIHF1ZXJ5CiAgICAgICAgaWYgZnJhZ21lbnQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHVybCArPSB1XCIjXCIgKyBmcmFnbWVudAoKICAgICAgICByZXR1cm4gdXJsCgogICAgZGVmIF9fc3RyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYudXJsCgoKZGVmIHNwbGl0X2ZpcnN0KHMsIGRlbGltcyk6CiAgICBcIlwiXCIKICAgIC4uIGRlcHJlY2F0ZWQ6OiAxLjI1CgogICAgR2l2ZW4gYSBzdHJpbmcgYW5kIGFuIGl0ZXJhYmxlIG9mIGRlbGltaXRlcnMsIHNwbGl0IG9uIHRoZSBmaXJzdCBmb3VuZAogICAgZGVsaW1pdGVyLiBSZXR1cm4gdHdvIHNwbGl0IHBhcnRzIGFuZCB0aGUgbWF0Y2hlZCBkZWxpbWl0ZXIuCgogICAgSWYgbm90IGZvdW5kLCB0aGVuIHRoZSBmaXJzdCBwYXJ0IGlzIHRoZSBmdWxsIGlucHV0IHN0cmluZy4KCiAgICBFeGFtcGxlOjoKCiAgICAgICAgPj4+IHNwbGl0X2ZpcnN0KCdmb28vYmFyP2JheicsICc/Lz0nKQogICAgICAgICgnZm9vJywgJ2Jhcj9iYXonLCAnLycpCiAgICAgICAgPj4+IHNwbGl0X2ZpcnN0KCdmb28vYmFyP2JheicsICcxMjMnKQogICAgICAgICgnZm9vL2Jhcj9iYXonLCAnJywgTm9uZSkKCiAgICBTY2FsZXMgbGluZWFybHkgd2l0aCBudW1iZXIgb2YgZGVsaW1zLiBOb3QgaWRlYWwgZm9yIGxhcmdlIG51bWJlciBvZiBkZWxpbXMuCiAgICBcIlwiXCIKICAgIG1pbl9pZHggPSBOb25lCiAgICBtaW5fZGVsaW0gPSBOb25lCiAgICBmb3IgZCBpbiBkZWxpbXM6CiAgICAgICAgaWR4ID0gcy5maW5kKGQpCiAgICAgICAgaWYgaWR4IDwgMDoKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgaWYgbWluX2lkeCBpcyBOb25lIG9yIGlkeCA8IG1pbl9pZHg6CiAgICAgICAgICAgIG1pbl9pZHggPSBpZHgKICAgICAgICAgICAgbWluX2RlbGltID0gZAoKICAgIGlmIG1pbl9pZHggaXMgTm9uZSBvciBtaW5faWR4IDwgMDoKICAgICAgICByZXR1cm4gcywgXCJcIiwgTm9uZQoKICAgIHJldHVybiBzWzptaW5faWR4XSwgc1ttaW5faWR4ICsgMSA6XSwgbWluX2RlbGltCgoKZGVmIF9lbmNvZGVfaW52YWxpZF9jaGFycyhjb21wb25lbnQsIGFsbG93ZWRfY2hhcnMsIGVuY29kaW5nPVwidXRmLThcIik6CiAgICBcIlwiXCJQZXJjZW50LWVuY29kZXMgYSBVUkkgY29tcG9uZW50IHdpdGhvdXQgcmVhcHBseWluZwogICAgb250byBhbiBhbHJlYWR5IHBlcmNlbnQtZW5jb2RlZCBjb21wb25lbnQuCiAgICBcIlwiXCIKICAgIGlmIGNvbXBvbmVudCBpcyBOb25lOgogICAgICAgIHJldHVybiBjb21wb25lbnQKCiAgICBjb21wb25lbnQgPSBzaXguZW5zdXJlX3RleHQoY29tcG9uZW50KQoKICAgICMgTm9ybWFsaXplIGV4aXN0aW5nIHBlcmNlbnQtZW5jb2RlZCBieXRlcy4KICAgICMgVHJ5IHRvIHNlZSBpZiB0aGUgY29tcG9uZW50IHdlJ3JlIGVuY29kaW5nIGlzIGFscmVhZHkgcGVyY2VudC1lbmNvZGVkCiAgICAjIHNvIHdlIGNhbiBza2lwIGFsbCAnJScgY2hhcmFjdGVycyBidXQgc3RpbGwgZW5jb2RlIGFsbCBvdGhlcnMuCiAgICBjb21wb25lbnQsIHBlcmNlbnRfZW5jb2RpbmdzID0gUEVSQ0VOVF9SRS5zdWJuKAogICAgICAgIGxhbWJkYSBtYXRjaDogbWF0Y2guZ3JvdXAoMCkudXBwZXIoKSwgY29tcG9uZW50CiAgICApCgogICAgdXJpX2J5dGVzID0gY29tcG9uZW50LmVuY29kZShcInV0Zi04XCIsIFwic3Vycm9nYXRlcGFzc1wiKQogICAgaXNfcGVyY2VudF9lbmNvZGVkID0gcGVyY2VudF9lbmNvZGluZ3MgPT0gdXJpX2J5dGVzLmNvdW50KGJcIiVcIikKICAgIGVuY29kZWRfY29tcG9uZW50ID0gYnl0ZWFycmF5KCkKCiAgICBmb3IgaSBpbiByYW5nZSgwLCBsZW4odXJpX2J5dGVzKSk6CiAgICAgICAgIyBXaWxsIHJldHVybiBhIHNpbmdsZSBjaGFyYWN0ZXIgYnl0ZXN0cmluZyBvbiBib3RoIFB5dGhvbiAyICYgMwogICAgICAgIGJ5dGUgPSB1cmlfYnl0ZXNbaSA6IGkgKyAxXQogICAgICAgIGJ5dGVfb3JkID0gb3JkKGJ5dGUpCiAgICAgICAgaWYgKGlzX3BlcmNlbnRfZW5jb2RlZCBhbmQgYnl0ZSA9PSBiXCIlXCIpIG9yICgKICAgICAgICAgICAgYnl0ZV9vcmQgPCAxMjggYW5kIGJ5dGUuZGVjb2RlKCkgaW4gYWxsb3dlZF9jaGFycwogICAgICAgICk6CiAgICAgICAgICAgIGVuY29kZWRfY29tcG9uZW50ICs9IGJ5dGUKICAgICAgICAgICAgY29udGludWUKICAgICAgICBlbmNvZGVkX2NvbXBvbmVudC5leHRlbmQoYlwiJVwiICsgKGhleChieXRlX29yZClbMjpdLmVuY29kZSgpLnpmaWxsKDIpLnVwcGVyKCkpKQoKICAgIHJldHVybiBlbmNvZGVkX2NvbXBvbmVudC5kZWNvZGUoZW5jb2RpbmcpCgoKZGVmIF9yZW1vdmVfcGF0aF9kb3Rfc2VnbWVudHMocGF0aCk6CiAgICAjIFNlZSBodHRwOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzOTg2I3NlY3Rpb24tNS4yLjQgZm9yIHBzZXVkby1jb2RlCiAgICBzZWdtZW50cyA9IHBhdGguc3BsaXQoXCIvXCIpICAjIFR1cm4gdGhlIHBhdGggaW50byBhIGxpc3Qgb2Ygc2VnbWVudHMKICAgIG91dHB1dCA9IFtdICAjIEluaXRpYWxpemUgdGhlIHZhcmlhYmxlIHRvIHVzZSB0byBzdG9yZSBvdXRwdXQKCiAgICBmb3Igc2VnbWVudCBpbiBzZWdtZW50czoKICAgICAgICAjICcuJyBpcyB0aGUgY3VycmVudCBkaXJlY3RvcnksIHNvIGlnbm9yZSBpdCwgaXQgaXMgc3VwZXJmbHVvdXMKICAgICAgICBpZiBzZWdtZW50ID09IFwiLlwiOgogICAgICAgICAgICBjb250aW51ZQogICAgICAgICMgQW55dGhpbmcgb3RoZXIgdGhhbiAnLi4nLCBzaG91bGQgYmUgYXBwZW5kZWQgdG8gdGhlIG91dHB1dAogICAgICAgIGVsaWYgc2VnbWVudCAhPSBcIi4uXCI6CiAgICAgICAgICAgIG91dHB1dC5hcHBlbmQoc2VnbWVudCkKICAgICAgICAjIEluIHRoaXMgY2FzZSBzZWdtZW50ID09ICcuLicsIGlmIHdlIGNhbiwgd2Ugc2hvdWxkIHBvcCB0aGUgbGFzdAogICAgICAgICMgZWxlbWVudAogICAgICAgIGVsaWYgb3V0cHV0OgogICAgICAgICAgICBvdXRwdXQucG9wKCkKCiAgICAjIElmIHRoZSBwYXRoIHN0YXJ0cyB3aXRoICcvJyBhbmQgdGhlIG91dHB1dCBpcyBlbXB0eSBvciB0aGUgZmlyc3Qgc3RyaW5nCiAgICAjIGlzIG5vbi1lbXB0eQogICAgaWYgcGF0aC5zdGFydHN3aXRoKFwiL1wiKSBhbmQgKG5vdCBvdXRwdXQgb3Igb3V0cHV0WzBdKToKICAgICAgICBvdXRwdXQuaW5zZXJ0KDAsIFwiXCIpCgogICAgIyBJZiB0aGUgcGF0aCBzdGFydHMgd2l0aCAnLy4nIG9yICcvLi4nIGVuc3VyZSB3ZSBhZGQgb25lIG1vcmUgZW1wdHkKICAgICMgc3RyaW5nIHRvIGFkZCBhIHRyYWlsaW5nICcvJwogICAgaWYgcGF0aC5lbmRzd2l0aCgoXCIvLlwiLCBcIi8uLlwiKSk6CiAgICAgICAgb3V0cHV0LmFwcGVuZChcIlwiKQoKICAgIHJldHVybiBcIi9cIi5qb2luKG91dHB1dCkKCgpkZWYgX25vcm1hbGl6ZV9ob3N0KGhvc3QsIHNjaGVtZSk6CiAgICBpZiBob3N0OgogICAgICAgIGlmIGlzaW5zdGFuY2UoaG9zdCwgc2l4LmJpbmFyeV90eXBlKToKICAgICAgICAgICAgaG9zdCA9IHNpeC5lbnN1cmVfc3RyKGhvc3QpCgogICAgICAgIGlmIHNjaGVtZSBpbiBOT1JNQUxJWkFCTEVfU0NIRU1FUzoKICAgICAgICAgICAgaXNfaXB2NiA9IElQVjZfQUREUlpfUkUubWF0Y2goaG9zdCkKICAgICAgICAgICAgaWYgaXNfaXB2NjoKICAgICAgICAgICAgICAgICMgSVB2NiBob3N0cyBvZiB0aGUgZm9ybSAnYTo6YiV6b25lJyBhcmUgZW5jb2RlZCBpbiBhIFVSTCBhcwogICAgICAgICAgICAgICAgIyBzdWNoIHBlciBSRkMgNjg3NDogJ2E6OmIlMjV6b25lJy4gVW5xdW90ZSB0aGUgWm9uZUlECiAgICAgICAgICAgICAgICAjIHNlcGFyYXRvciBhcyBuZWNlc3NhcnkgdG8gcmV0dXJuIGEgdmFsaWQgUkZDIDQwMDcgc2NvcGVkIElQLgogICAgICAgICAgICAgICAgbWF0Y2ggPSBaT05FX0lEX1JFLnNlYXJjaChob3N0KQogICAgICAgICAgICAgICAgaWYgbWF0Y2g6CiAgICAgICAgICAgICAgICAgICAgc3RhcnQsIGVuZCA9IG1hdGNoLnNwYW4oMSkKICAgICAgICAgICAgICAgICAgICB6b25lX2lkID0gaG9zdFtzdGFydDplbmRdCgogICAgICAgICAgICAgICAgICAgIGlmIHpvbmVfaWQuc3RhcnRzd2l0aChcIiUyNVwiKSBhbmQgem9uZV9pZCAhPSBcIiUyNVwiOgogICAgICAgICAgICAgICAgICAgICAgICB6b25lX2lkID0gem9uZV9pZFszOl0KICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB6b25lX2lkID0gem9uZV9pZFsxOl0KICAgICAgICAgICAgICAgICAgICB6b25lX2lkID0gXCIlXCIgKyBfZW5jb2RlX2ludmFsaWRfY2hhcnMoem9uZV9pZCwgVU5SRVNFUlZFRF9DSEFSUykKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaG9zdFs6c3RhcnRdLmxvd2VyKCkgKyB6b25lX2lkICsgaG9zdFtlbmQ6XQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaG9zdC5sb3dlcigpCiAgICAgICAgICAgIGVsaWYgbm90IElQVjRfUkUubWF0Y2goaG9zdCk6CiAgICAgICAgICAgICAgICByZXR1cm4gc2l4LmVuc3VyZV9zdHIoCiAgICAgICAgICAgICAgICAgICAgYlwiLlwiLmpvaW4oW19pZG5hX2VuY29kZShsYWJlbCkgZm9yIGxhYmVsIGluIGhvc3Quc3BsaXQoXCIuXCIpXSkKICAgICAgICAgICAgICAgICkKICAgIHJldHVybiBob3N0CgoKZGVmIF9pZG5hX2VuY29kZShuYW1lKToKICAgIGlmIG5hbWUgYW5kIGFueShbb3JkKHgpID4gMTI4IGZvciB4IGluIG5hbWVdKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGltcG9ydCBpZG5hCiAgICAgICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgICAgICBzaXgucmFpc2VfZnJvbSgKICAgICAgICAgICAgICAgIExvY2F0aW9uUGFyc2VFcnJvcihcIlVuYWJsZSB0byBwYXJzZSBVUkwgd2l0aG91dCB0aGUgJ2lkbmEnIG1vZHVsZVwiKSwKICAgICAgICAgICAgICAgIE5vbmUsCiAgICAgICAgICAgICkKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJldHVybiBpZG5hLmVuY29kZShuYW1lLmxvd2VyKCksIHN0cmljdD1UcnVlLCBzdGQzX3J1bGVzPVRydWUpCiAgICAgICAgZXhjZXB0IGlkbmEuSUROQUVycm9yOgogICAgICAgICAgICBzaXgucmFpc2VfZnJvbSgKICAgICAgICAgICAgICAgIExvY2F0aW9uUGFyc2VFcnJvcih1XCJOYW1lICclcycgaXMgbm90IGEgdmFsaWQgSUROQSBsYWJlbFwiICUgbmFtZSksIE5vbmUKICAgICAgICAgICAgKQogICAgcmV0dXJuIG5hbWUubG93ZXIoKS5lbmNvZGUoXCJhc2NpaVwiKQoKCmRlZiBfZW5jb2RlX3RhcmdldCh0YXJnZXQpOgogICAgXCJcIlwiUGVyY2VudC1lbmNvZGVzIGEgcmVxdWVzdCB0YXJnZXQgc28gdGhhdCB0aGVyZSBhcmUgbm8gaW52YWxpZCBjaGFyYWN0ZXJzXCJcIlwiCiAgICBwYXRoLCBxdWVyeSA9IFRBUkdFVF9SRS5tYXRjaCh0YXJnZXQpLmdyb3VwcygpCiAgICB0YXJnZXQgPSBfZW5jb2RlX2ludmFsaWRfY2hhcnMocGF0aCwgUEFUSF9DSEFSUykKICAgIHF1ZXJ5ID0gX2VuY29kZV9pbnZhbGlkX2NoYXJzKHF1ZXJ5LCBRVUVSWV9DSEFSUykKICAgIGlmIHF1ZXJ5IGlzIG5vdCBOb25lOgogICAgICAgIHRhcmdldCArPSBcIj9cIiArIHF1ZXJ5CiAgICByZXR1cm4gdGFyZ2V0CgoKZGVmIHBhcnNlX3VybCh1cmwpOgogICAgXCJcIlwiCiAgICBHaXZlbiBhIHVybCwgcmV0dXJuIGEgcGFyc2VkIDpjbGFzczpgLlVybGAgbmFtZWR0dXBsZS4gQmVzdC1lZmZvcnQgaXMKICAgIHBlcmZvcm1lZCB0byBwYXJzZSBpbmNvbXBsZXRlIHVybHMuIEZpZWxkcyBub3QgcHJvdmlkZWQgd2lsbCBiZSBOb25lLgogICAgVGhpcyBwYXJzZXIgaXMgUkZDIDM5ODYgYW5kIFJGQyA2ODc0IGNvbXBsaWFudC4KCiAgICBUaGUgcGFyc2VyIGxvZ2ljIGFuZCBoZWxwZXIgZnVuY3Rpb25zIGFyZSBiYXNlZCBoZWF2aWx5IG9uCiAgICB3b3JrIGRvbmUgaW4gdGhlIGBgcmZjMzk4NmBgIG1vZHVsZS4KCiAgICA6cGFyYW0gc3RyIHVybDogVVJMIHRvIHBhcnNlIGludG8gYSA6Y2xhc3M6YC5VcmxgIG5hbWVkdHVwbGUuCgogICAgUGFydGx5IGJhY2t3YXJkcy1jb21wYXRpYmxlIHdpdGggOm1vZDpgdXJscGFyc2VgLgoKICAgIEV4YW1wbGU6OgoKICAgICAgICA+Pj4gcGFyc2VfdXJsKCdodHRwOi8vZ29vZ2xlLmNvbS9tYWlsLycpCiAgICAgICAgVXJsKHNjaGVtZT0naHR0cCcsIGhvc3Q9J2dvb2dsZS5jb20nLCBwb3J0PU5vbmUsIHBhdGg9Jy9tYWlsLycsIC4uLikKICAgICAgICA+Pj4gcGFyc2VfdXJsKCdnb29nbGUuY29tOjgwJykKICAgICAgICBVcmwoc2NoZW1lPU5vbmUsIGhvc3Q9J2dvb2dsZS5jb20nLCBwb3J0PTgwLCBwYXRoPU5vbmUsIC4uLikKICAgICAgICA+Pj4gcGFyc2VfdXJsKCcvZm9vP2JhcicpCiAgICAgICAgVXJsKHNjaGVtZT1Ob25lLCBob3N0PU5vbmUsIHBvcnQ9Tm9uZSwgcGF0aD0nL2ZvbycsIHF1ZXJ5PSdiYXInLCAuLi4pCiAgICBcIlwiXCIKICAgIGlmIG5vdCB1cmw6CiAgICAgICAgIyBFbXB0eQogICAgICAgIHJldHVybiBVcmwoKQoKICAgIHNvdXJjZV91cmwgPSB1cmwKICAgIGlmIG5vdCBTQ0hFTUVfUkUuc2VhcmNoKHVybCk6CiAgICAgICAgdXJsID0gXCIvL1wiICsgdXJsCgogICAgdHJ5OgogICAgICAgIHNjaGVtZSwgYXV0aG9yaXR5LCBwYXRoLCBxdWVyeSwgZnJhZ21lbnQgPSBVUklfUkUubWF0Y2godXJsKS5ncm91cHMoKQogICAgICAgIG5vcm1hbGl6ZV91cmkgPSBzY2hlbWUgaXMgTm9uZSBvciBzY2hlbWUubG93ZXIoKSBpbiBOT1JNQUxJWkFCTEVfU0NIRU1FUwoKICAgICAgICBpZiBzY2hlbWU6CiAgICAgICAgICAgIHNjaGVtZSA9IHNjaGVtZS5sb3dlcigpCgogICAgICAgIGlmIGF1dGhvcml0eToKICAgICAgICAgICAgYXV0aCwgXywgaG9zdF9wb3J0ID0gYXV0aG9yaXR5LnJwYXJ0aXRpb24oXCJAXCIpCiAgICAgICAgICAgIGF1dGggPSBhdXRoIG9yIE5vbmUKICAgICAgICAgICAgaG9zdCwgcG9ydCA9IF9IT1NUX1BPUlRfUkUubWF0Y2goaG9zdF9wb3J0KS5ncm91cHMoKQogICAgICAgICAgICBpZiBhdXRoIGFuZCBub3JtYWxpemVfdXJpOgogICAgICAgICAgICAgICAgYXV0aCA9IF9lbmNvZGVfaW52YWxpZF9jaGFycyhhdXRoLCBVU0VSSU5GT19DSEFSUykKICAgICAgICAgICAgaWYgcG9ydCA9PSBcIlwiOgogICAgICAgICAgICAgICAgcG9ydCA9IE5vbmUKICAgICAgICBlbHNlOgogICAgICAgICAgICBhdXRoLCBob3N0LCBwb3J0ID0gTm9uZSwgTm9uZSwgTm9uZQoKICAgICAgICBpZiBwb3J0IGlzIG5vdCBOb25lOgogICAgICAgICAgICBwb3J0ID0gaW50KHBvcnQpCiAgICAgICAgICAgIGlmIG5vdCAoMCA8PSBwb3J0IDw9IDY1NTM1KToKICAgICAgICAgICAgICAgIHJhaXNlIExvY2F0aW9uUGFyc2VFcnJvcih1cmwpCgogICAgICAgIGhvc3QgPSBfbm9ybWFsaXplX2hvc3QoaG9zdCwgc2NoZW1lKQoKICAgICAgICBpZiBub3JtYWxpemVfdXJpIGFuZCBwYXRoOgogICAgICAgICAgICBwYXRoID0gX3JlbW92ZV9wYXRoX2RvdF9zZWdtZW50cyhwYXRoKQogICAgICAgICAgICBwYXRoID0gX2VuY29kZV9pbnZhbGlkX2NoYXJzKHBhdGgsIFBBVEhfQ0hBUlMpCiAgICAgICAgaWYgbm9ybWFsaXplX3VyaSBhbmQgcXVlcnk6CiAgICAgICAgICAgIHF1ZXJ5ID0gX2VuY29kZV9pbnZhbGlkX2NoYXJzKHF1ZXJ5LCBRVUVSWV9DSEFSUykKICAgICAgICBpZiBub3JtYWxpemVfdXJpIGFuZCBmcmFnbWVudDoKICAgICAgICAgICAgZnJhZ21lbnQgPSBfZW5jb2RlX2ludmFsaWRfY2hhcnMoZnJhZ21lbnQsIEZSQUdNRU5UX0NIQVJTKQoKICAgIGV4Y2VwdCAoVmFsdWVFcnJvciwgQXR0cmlidXRlRXJyb3IpOgogICAgICAgIHJldHVybiBzaXgucmFpc2VfZnJvbShMb2NhdGlvblBhcnNlRXJyb3Ioc291cmNlX3VybCksIE5vbmUpCgogICAgIyBGb3IgdGhlIHNha2Ugb2YgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2UgcHV0IGVtcHR5CiAgICAjIHN0cmluZyB2YWx1ZXMgZm9yIHBhdGggaWYgdGhlcmUgYXJlIGFueSBkZWZpbmVkIHZhbHVlcwogICAgIyBiZXlvbmQgdGhlIHBhdGggaW4gdGhlIFVSTC4KICAgICMgVE9ETzogUmVtb3ZlIHRoaXMgd2hlbiB3ZSBicmVhayBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS4KICAgIGlmIG5vdCBwYXRoOgogICAgICAgIGlmIHF1ZXJ5IGlzIG5vdCBOb25lIG9yIGZyYWdtZW50IGlzIG5vdCBOb25lOgogICAgICAgICAgICBwYXRoID0gXCJcIgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHBhdGggPSBOb25lCgogICAgIyBFbnN1cmUgdGhhdCBlYWNoIHBhcnQgb2YgdGhlIFVSTCBpcyBhIGBzdHJgIGZvcgogICAgIyBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS4KICAgIGlmIGlzaW5zdGFuY2UodXJsLCBzaXgudGV4dF90eXBlKToKICAgICAgICBlbnN1cmVfZnVuYyA9IHNpeC5lbnN1cmVfdGV4dAogICAgZWxzZToKICAgICAgICBlbnN1cmVfZnVuYyA9IHNpeC5lbnN1cmVfc3RyCgogICAgZGVmIGVuc3VyZV90eXBlKHgpOgogICAgICAgIHJldHVybiB4IGlmIHggaXMgTm9uZSBlbHNlIGVuc3VyZV9mdW5jKHgpCgogICAgcmV0dXJuIFVybCgKICAgICAgICBzY2hlbWU9ZW5zdXJlX3R5cGUoc2NoZW1lKSwKICAgICAgICBhdXRoPWVuc3VyZV90eXBlKGF1dGgpLAogICAgICAgIGhvc3Q9ZW5zdXJlX3R5cGUoaG9zdCksCiAgICAgICAgcG9ydD1wb3J0LAogICAgICAgIHBhdGg9ZW5zdXJlX3R5cGUocGF0aCksCiAgICAgICAgcXVlcnk9ZW5zdXJlX3R5cGUocXVlcnkpLAogICAgICAgIGZyYWdtZW50PWVuc3VyZV90eXBlKGZyYWdtZW50KSwKICAgICkKCgpkZWYgZ2V0X2hvc3QodXJsKToKICAgIFwiXCJcIgogICAgRGVwcmVjYXRlZC4gVXNlIDpmdW5jOmBwYXJzZV91cmxgIGluc3RlYWQuCiAgICBcIlwiXCIKICAgIHAgPSBwYXJzZV91cmwodXJsKQogICAgcmV0dXJuIHAuc2NoZW1lIG9yIFwiaHR0cFwiLCBwLmhvc3RuYW1lLCBwLnBvcnQKCiIiIgptb2R1bGVfZGljdFsidXJsbGliMyIrb3Muc2VwKyJ1dGlsIitvcy5zZXArImNvbm5lY3Rpb24ucHkiXT0iIiIKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhYnNvbHV0ZV9pbXBvcnQKCmltcG9ydCBzb2NrZXQKCmZyb20gLi5jb250cmliIGltcG9ydCBfYXBwZW5naW5lX2Vudmlyb24KZnJvbSAuLmV4Y2VwdGlvbnMgaW1wb3J0IExvY2F0aW9uUGFyc2VFcnJvcgpmcm9tIC4ucGFja2FnZXMgaW1wb3J0IHNpeApmcm9tIC53YWl0IGltcG9ydCBOb1dheVRvV2FpdEZvclNvY2tldEVycm9yLCB3YWl0X2Zvcl9yZWFkCgoKZGVmIGlzX2Nvbm5lY3Rpb25fZHJvcHBlZChjb25uKTogICMgUGxhdGZvcm0tc3BlY2lmaWMKICAgIFwiXCJcIgogICAgUmV0dXJucyBUcnVlIGlmIHRoZSBjb25uZWN0aW9uIGlzIGRyb3BwZWQgYW5kIHNob3VsZCBiZSBjbG9zZWQuCgogICAgOnBhcmFtIGNvbm46CiAgICAgICAgOmNsYXNzOmBodHRwLmNsaWVudC5IVFRQQ29ubmVjdGlvbmAgb2JqZWN0LgoKICAgIE5vdGU6IEZvciBwbGF0Zm9ybXMgbGlrZSBBcHBFbmdpbmUsIHRoaXMgd2lsbCBhbHdheXMgcmV0dXJuIGBgRmFsc2VgYCB0bwogICAgbGV0IHRoZSBwbGF0Zm9ybSBoYW5kbGUgY29ubmVjdGlvbiByZWN5Y2xpbmcgdHJhbnNwYXJlbnRseSBmb3IgdXMuCiAgICBcIlwiXCIKICAgIHNvY2sgPSBnZXRhdHRyKGNvbm4sIFwic29ja1wiLCBGYWxzZSkKICAgIGlmIHNvY2sgaXMgRmFsc2U6ICAjIFBsYXRmb3JtLXNwZWNpZmljOiBBcHBFbmdpbmUKICAgICAgICByZXR1cm4gRmFsc2UKICAgIGlmIHNvY2sgaXMgTm9uZTogICMgQ29ubmVjdGlvbiBhbHJlYWR5IGNsb3NlZCAoc3VjaCBhcyBieSBodHRwbGliKS4KICAgICAgICByZXR1cm4gVHJ1ZQogICAgdHJ5OgogICAgICAgICMgUmV0dXJucyBUcnVlIGlmIHJlYWRhYmxlLCB3aGljaCBoZXJlIG1lYW5zIGl0J3MgYmVlbiBkcm9wcGVkCiAgICAgICAgcmV0dXJuIHdhaXRfZm9yX3JlYWQoc29jaywgdGltZW91dD0wLjApCiAgICBleGNlcHQgTm9XYXlUb1dhaXRGb3JTb2NrZXRFcnJvcjogICMgUGxhdGZvcm0tc3BlY2lmaWM6IEFwcEVuZ2luZQogICAgICAgIHJldHVybiBGYWxzZQoKCiMgVGhpcyBmdW5jdGlvbiBpcyBjb3BpZWQgZnJvbSBzb2NrZXQucHkgaW4gdGhlIFB5dGhvbiAyLjcgc3RhbmRhcmQKIyBsaWJyYXJ5IHRlc3Qgc3VpdGUuIEFkZGVkIHRvIGl0cyBzaWduYXR1cmUgaXMgb25seSBgc29ja2V0X29wdGlvbnNgLgojIE9uZSBhZGRpdGlvbmFsIG1vZGlmaWNhdGlvbiBpcyB0aGF0IHdlIGF2b2lkIGJpbmRpbmcgdG8gSVB2NiBzZXJ2ZXJzCiMgZGlzY292ZXJlZCBpbiBETlMgaWYgdGhlIHN5c3RlbSBkb2Vzbid0IGhhdmUgSVB2NiBmdW5jdGlvbmFsaXR5LgpkZWYgY3JlYXRlX2Nvbm5lY3Rpb24oCiAgICBhZGRyZXNzLAogICAgdGltZW91dD1zb2NrZXQuX0dMT0JBTF9ERUZBVUxUX1RJTUVPVVQsCiAgICBzb3VyY2VfYWRkcmVzcz1Ob25lLAogICAgc29ja2V0X29wdGlvbnM9Tm9uZSwKKToKICAgIFwiXCJcIkNvbm5lY3QgdG8gKmFkZHJlc3MqIGFuZCByZXR1cm4gdGhlIHNvY2tldCBvYmplY3QuCgogICAgQ29udmVuaWVuY2UgZnVuY3Rpb24uICBDb25uZWN0IHRvICphZGRyZXNzKiAoYSAyLXR1cGxlIGBgKGhvc3QsCiAgICBwb3J0KWBgKSBhbmQgcmV0dXJuIHRoZSBzb2NrZXQgb2JqZWN0LiAgUGFzc2luZyB0aGUgb3B0aW9uYWwKICAgICp0aW1lb3V0KiBwYXJhbWV0ZXIgd2lsbCBzZXQgdGhlIHRpbWVvdXQgb24gdGhlIHNvY2tldCBpbnN0YW5jZQogICAgYmVmb3JlIGF0dGVtcHRpbmcgdG8gY29ubmVjdC4gIElmIG5vICp0aW1lb3V0KiBpcyBzdXBwbGllZCwgdGhlCiAgICBnbG9iYWwgZGVmYXVsdCB0aW1lb3V0IHNldHRpbmcgcmV0dXJuZWQgYnkgOmZ1bmM6YHNvY2tldC5nZXRkZWZhdWx0dGltZW91dGAKICAgIGlzIHVzZWQuICBJZiAqc291cmNlX2FkZHJlc3MqIGlzIHNldCBpdCBtdXN0IGJlIGEgdHVwbGUgb2YgKGhvc3QsIHBvcnQpCiAgICBmb3IgdGhlIHNvY2tldCB0byBiaW5kIGFzIGEgc291cmNlIGFkZHJlc3MgYmVmb3JlIG1ha2luZyB0aGUgY29ubmVjdGlvbi4KICAgIEFuIGhvc3Qgb2YgJycgb3IgcG9ydCAwIHRlbGxzIHRoZSBPUyB0byB1c2UgdGhlIGRlZmF1bHQuCiAgICBcIlwiXCIKCiAgICBob3N0LCBwb3J0ID0gYWRkcmVzcwogICAgaWYgaG9zdC5zdGFydHN3aXRoKFwiW1wiKToKICAgICAgICBob3N0ID0gaG9zdC5zdHJpcChcIltdXCIpCiAgICBlcnIgPSBOb25lCgogICAgIyBVc2luZyB0aGUgdmFsdWUgZnJvbSBhbGxvd2VkX2dhaV9mYW1pbHkoKSBpbiB0aGUgY29udGV4dCBvZiBnZXRhZGRyaW5mbyBsZXRzCiAgICAjIHVzIHNlbGVjdCB3aGV0aGVyIHRvIHdvcmsgd2l0aCBJUHY0IEROUyByZWNvcmRzLCBJUHY2IHJlY29yZHMsIG9yIGJvdGguCiAgICAjIFRoZSBvcmlnaW5hbCBjcmVhdGVfY29ubmVjdGlvbiBmdW5jdGlvbiBhbHdheXMgcmV0dXJucyBhbGwgcmVjb3Jkcy4KICAgIGZhbWlseSA9IGFsbG93ZWRfZ2FpX2ZhbWlseSgpCgogICAgdHJ5OgogICAgICAgIGhvc3QuZW5jb2RlKFwiaWRuYVwiKQogICAgZXhjZXB0IFVuaWNvZGVFcnJvcjoKICAgICAgICByZXR1cm4gc2l4LnJhaXNlX2Zyb20oCiAgICAgICAgICAgIExvY2F0aW9uUGFyc2VFcnJvcih1XCInJXMnLCBsYWJlbCBlbXB0eSBvciB0b28gbG9uZ1wiICUgaG9zdCksIE5vbmUKICAgICAgICApCgogICAgZm9yIHJlcyBpbiBzb2NrZXQuZ2V0YWRkcmluZm8oaG9zdCwgcG9ydCwgZmFtaWx5LCBzb2NrZXQuU09DS19TVFJFQU0pOgogICAgICAgIGFmLCBzb2NrdHlwZSwgcHJvdG8sIGNhbm9ubmFtZSwgc2EgPSByZXMKICAgICAgICBzb2NrID0gTm9uZQogICAgICAgIHRyeToKICAgICAgICAgICAgc29jayA9IHNvY2tldC5zb2NrZXQoYWYsIHNvY2t0eXBlLCBwcm90bykKCiAgICAgICAgICAgICMgSWYgcHJvdmlkZWQsIHNldCBzb2NrZXQgbGV2ZWwgb3B0aW9ucyBiZWZvcmUgY29ubmVjdGluZy4KICAgICAgICAgICAgX3NldF9zb2NrZXRfb3B0aW9ucyhzb2NrLCBzb2NrZXRfb3B0aW9ucykKCiAgICAgICAgICAgIGlmIHRpbWVvdXQgaXMgbm90IHNvY2tldC5fR0xPQkFMX0RFRkFVTFRfVElNRU9VVDoKICAgICAgICAgICAgICAgIHNvY2suc2V0dGltZW91dCh0aW1lb3V0KQogICAgICAgICAgICBpZiBzb3VyY2VfYWRkcmVzczoKICAgICAgICAgICAgICAgIHNvY2suYmluZChzb3VyY2VfYWRkcmVzcykKICAgICAgICAgICAgc29jay5jb25uZWN0KHNhKQogICAgICAgICAgICByZXR1cm4gc29jawoKICAgICAgICBleGNlcHQgc29ja2V0LmVycm9yIGFzIGU6CiAgICAgICAgICAgIGVyciA9IGUKICAgICAgICAgICAgaWYgc29jayBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHNvY2suY2xvc2UoKQogICAgICAgICAgICAgICAgc29jayA9IE5vbmUKCiAgICBpZiBlcnIgaXMgbm90IE5vbmU6CiAgICAgICAgcmFpc2UgZXJyCgogICAgcmFpc2Ugc29ja2V0LmVycm9yKFwiZ2V0YWRkcmluZm8gcmV0dXJucyBhbiBlbXB0eSBsaXN0XCIpCgoKZGVmIF9zZXRfc29ja2V0X29wdGlvbnMoc29jaywgb3B0aW9ucyk6CiAgICBpZiBvcHRpb25zIGlzIE5vbmU6CiAgICAgICAgcmV0dXJuCgogICAgZm9yIG9wdCBpbiBvcHRpb25zOgogICAgICAgIHNvY2suc2V0c29ja29wdCgqb3B0KQoKCmRlZiBhbGxvd2VkX2dhaV9mYW1pbHkoKToKICAgIFwiXCJcIlRoaXMgZnVuY3Rpb24gaXMgZGVzaWduZWQgdG8gd29yayBpbiB0aGUgY29udGV4dCBvZgogICAgZ2V0YWRkcmluZm8sIHdoZXJlIGZhbWlseT1zb2NrZXQuQUZfVU5TUEVDIGlzIHRoZSBkZWZhdWx0IGFuZAogICAgd2lsbCBwZXJmb3JtIGEgRE5TIHNlYXJjaCBmb3IgYm90aCBJUHY2IGFuZCBJUHY0IHJlY29yZHMuXCJcIlwiCgogICAgZmFtaWx5ID0gc29ja2V0LkFGX0lORVQKICAgIGlmIEhBU19JUFY2OgogICAgICAgIGZhbWlseSA9IHNvY2tldC5BRl9VTlNQRUMKICAgIHJldHVybiBmYW1pbHkKCgpkZWYgX2hhc19pcHY2KGhvc3QpOgogICAgXCJcIlwiUmV0dXJucyBUcnVlIGlmIHRoZSBzeXN0ZW0gY2FuIGJpbmQgYW4gSVB2NiBhZGRyZXNzLlwiXCJcIgogICAgc29jayA9IE5vbmUKICAgIGhhc19pcHY2ID0gRmFsc2UKCiAgICAjIEFwcCBFbmdpbmUgZG9lc24ndCBzdXBwb3J0IElQVjYgc29ja2V0cyBhbmQgYWN0dWFsbHkgaGFzIGEgcXVvdGEgb24gdGhlCiAgICAjIG51bWJlciBvZiBzb2NrZXRzIHRoYXQgY2FuIGJlIHVzZWQsIHNvIGp1c3QgZWFybHkgb3V0IGhlcmUgaW5zdGVhZCBvZgogICAgIyBjcmVhdGluZyBhIHNvY2tldCBuZWVkbGVzc2x5LgogICAgIyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3VybGxpYjMvdXJsbGliMy9pc3N1ZXMvMTQ0NgogICAgaWYgX2FwcGVuZ2luZV9lbnZpcm9uLmlzX2FwcGVuZ2luZV9zYW5kYm94KCk6CiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgaWYgc29ja2V0Lmhhc19pcHY2OgogICAgICAgICMgaGFzX2lwdjYgcmV0dXJucyB0cnVlIGlmIGNQeXRob24gd2FzIGNvbXBpbGVkIHdpdGggSVB2NiBzdXBwb3J0LgogICAgICAgICMgSXQgZG9lcyBub3QgdGVsbCB1cyBpZiB0aGUgc3lzdGVtIGhhcyBJUHY2IHN1cHBvcnQgZW5hYmxlZC4gVG8KICAgICAgICAjIGRldGVybWluZSB0aGF0IHdlIG11c3QgYmluZCB0byBhbiBJUHY2IGFkZHJlc3MuCiAgICAgICAgIyBodHRwczovL2dpdGh1Yi5jb20vdXJsbGliMy91cmxsaWIzL3B1bGwvNjExCiAgICAgICAgIyBodHRwczovL2J1Z3MucHl0aG9uLm9yZy9pc3N1ZTY1ODMyNwogICAgICAgIHRyeToKICAgICAgICAgICAgc29jayA9IHNvY2tldC5zb2NrZXQoc29ja2V0LkFGX0lORVQ2KQogICAgICAgICAgICBzb2NrLmJpbmQoKGhvc3QsIDApKQogICAgICAgICAgICBoYXNfaXB2NiA9IFRydWUKICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICBwYXNzCgogICAgaWYgc29jazoKICAgICAgICBzb2NrLmNsb3NlKCkKICAgIHJldHVybiBoYXNfaXB2NgoKCkhBU19JUFY2ID0gX2hhc19pcHY2KFwiOjoxXCIpCgoiIiIKbW9kdWxlX2RpY3RbInVybGxpYjMiK29zLnNlcCsidXRpbCIrb3Muc2VwKyJ0aW1lb3V0LnB5Il09IiIiCmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYWJzb2x1dGVfaW1wb3J0CgppbXBvcnQgdGltZQoKIyBUaGUgZGVmYXVsdCBzb2NrZXQgdGltZW91dCwgdXNlZCBieSBodHRwbGliIHRvIGluZGljYXRlIHRoYXQgbm8gdGltZW91dCB3YXMKIyBzcGVjaWZpZWQgYnkgdGhlIHVzZXIKZnJvbSBzb2NrZXQgaW1wb3J0IF9HTE9CQUxfREVGQVVMVF9USU1FT1VUCgpmcm9tIC4uZXhjZXB0aW9ucyBpbXBvcnQgVGltZW91dFN0YXRlRXJyb3IKCiMgQSBzZW50aW5lbCB2YWx1ZSB0byBpbmRpY2F0ZSB0aGF0IG5vIHRpbWVvdXQgd2FzIHNwZWNpZmllZCBieSB0aGUgdXNlciBpbgojIHVybGxpYjMKX0RlZmF1bHQgPSBvYmplY3QoKQoKCiMgVXNlIHRpbWUubW9ub3RvbmljIGlmIGF2YWlsYWJsZS4KY3VycmVudF90aW1lID0gZ2V0YXR0cih0aW1lLCBcIm1vbm90b25pY1wiLCB0aW1lLnRpbWUpCgoKY2xhc3MgVGltZW91dChvYmplY3QpOgogICAgXCJcIlwiVGltZW91dCBjb25maWd1cmF0aW9uLgoKICAgIFRpbWVvdXRzIGNhbiBiZSBkZWZpbmVkIGFzIGEgZGVmYXVsdCBmb3IgYSBwb29sOgoKICAgIC4uIGNvZGUtYmxvY2s6OiBweXRob24KCiAgICAgICB0aW1lb3V0ID0gVGltZW91dChjb25uZWN0PTIuMCwgcmVhZD03LjApCiAgICAgICBodHRwID0gUG9vbE1hbmFnZXIodGltZW91dD10aW1lb3V0KQogICAgICAgcmVzcG9uc2UgPSBodHRwLnJlcXVlc3QoJ0dFVCcsICdodHRwOi8vZXhhbXBsZS5jb20vJykKCiAgICBPciBwZXItcmVxdWVzdCAod2hpY2ggb3ZlcnJpZGVzIHRoZSBkZWZhdWx0IGZvciB0aGUgcG9vbCk6CgogICAgLi4gY29kZS1ibG9jazo6IHB5dGhvbgoKICAgICAgIHJlc3BvbnNlID0gaHR0cC5yZXF1ZXN0KCdHRVQnLCAnaHR0cDovL2V4YW1wbGUuY29tLycsIHRpbWVvdXQ9VGltZW91dCgxMCkpCgogICAgVGltZW91dHMgY2FuIGJlIGRpc2FibGVkIGJ5IHNldHRpbmcgYWxsIHRoZSBwYXJhbWV0ZXJzIHRvIGBgTm9uZWBgOgoKICAgIC4uIGNvZGUtYmxvY2s6OiBweXRob24KCiAgICAgICBub190aW1lb3V0ID0gVGltZW91dChjb25uZWN0PU5vbmUsIHJlYWQ9Tm9uZSkKICAgICAgIHJlc3BvbnNlID0gaHR0cC5yZXF1ZXN0KCdHRVQnLCAnaHR0cDovL2V4YW1wbGUuY29tLywgdGltZW91dD1ub190aW1lb3V0KQoKCiAgICA6cGFyYW0gdG90YWw6CiAgICAgICAgVGhpcyBjb21iaW5lcyB0aGUgY29ubmVjdCBhbmQgcmVhZCB0aW1lb3V0cyBpbnRvIG9uZTsgdGhlIHJlYWQgdGltZW91dAogICAgICAgIHdpbGwgYmUgc2V0IHRvIHRoZSB0aW1lIGxlZnRvdmVyIGZyb20gdGhlIGNvbm5lY3QgYXR0ZW1wdC4gSW4gdGhlCiAgICAgICAgZXZlbnQgdGhhdCBib3RoIGEgY29ubmVjdCB0aW1lb3V0IGFuZCBhIHRvdGFsIGFyZSBzcGVjaWZpZWQsIG9yIGEgcmVhZAogICAgICAgIHRpbWVvdXQgYW5kIGEgdG90YWwgYXJlIHNwZWNpZmllZCwgdGhlIHNob3J0ZXIgdGltZW91dCB3aWxsIGJlIGFwcGxpZWQuCgogICAgICAgIERlZmF1bHRzIHRvIE5vbmUuCgogICAgOnR5cGUgdG90YWw6IGludCwgZmxvYXQsIG9yIE5vbmUKCiAgICA6cGFyYW0gY29ubmVjdDoKICAgICAgICBUaGUgbWF4aW11bSBhbW91bnQgb2YgdGltZSAoaW4gc2Vjb25kcykgdG8gd2FpdCBmb3IgYSBjb25uZWN0aW9uCiAgICAgICAgYXR0ZW1wdCB0byBhIHNlcnZlciB0byBzdWNjZWVkLiBPbWl0dGluZyB0aGUgcGFyYW1ldGVyIHdpbGwgZGVmYXVsdCB0aGUKICAgICAgICBjb25uZWN0IHRpbWVvdXQgdG8gdGhlIHN5c3RlbSBkZWZhdWx0LCBwcm9iYWJseSBgdGhlIGdsb2JhbCBkZWZhdWx0CiAgICAgICAgdGltZW91dCBpbiBzb2NrZXQucHkKICAgICAgICA8aHR0cDovL2hnLnB5dGhvbi5vcmcvY3B5dGhvbi9maWxlLzYwM2I0ZDU5Mzc1OC9MaWIvc29ja2V0LnB5I2w1MzU+YF8uCiAgICAgICAgTm9uZSB3aWxsIHNldCBhbiBpbmZpbml0ZSB0aW1lb3V0IGZvciBjb25uZWN0aW9uIGF0dGVtcHRzLgoKICAgIDp0eXBlIGNvbm5lY3Q6IGludCwgZmxvYXQsIG9yIE5vbmUKCiAgICA6cGFyYW0gcmVhZDoKICAgICAgICBUaGUgbWF4aW11bSBhbW91bnQgb2YgdGltZSAoaW4gc2Vjb25kcykgdG8gd2FpdCBiZXR3ZWVuIGNvbnNlY3V0aXZlCiAgICAgICAgcmVhZCBvcGVyYXRpb25zIGZvciBhIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlci4gT21pdHRpbmcgdGhlIHBhcmFtZXRlcgogICAgICAgIHdpbGwgZGVmYXVsdCB0aGUgcmVhZCB0aW1lb3V0IHRvIHRoZSBzeXN0ZW0gZGVmYXVsdCwgcHJvYmFibHkgYHRoZQogICAgICAgIGdsb2JhbCBkZWZhdWx0IHRpbWVvdXQgaW4gc29ja2V0LnB5CiAgICAgICAgPGh0dHA6Ly9oZy5weXRob24ub3JnL2NweXRob24vZmlsZS82MDNiNGQ1OTM3NTgvTGliL3NvY2tldC5weSNsNTM1PmBfLgogICAgICAgIE5vbmUgd2lsbCBzZXQgYW4gaW5maW5pdGUgdGltZW91dC4KCiAgICA6dHlwZSByZWFkOiBpbnQsIGZsb2F0LCBvciBOb25lCgogICAgLi4gbm90ZTo6CgogICAgICAgIE1hbnkgZmFjdG9ycyBjYW4gYWZmZWN0IHRoZSB0b3RhbCBhbW91bnQgb2YgdGltZSBmb3IgdXJsbGliMyB0byByZXR1cm4KICAgICAgICBhbiBIVFRQIHJlc3BvbnNlLgoKICAgICAgICBGb3IgZXhhbXBsZSwgUHl0aG9uJ3MgRE5TIHJlc29sdmVyIGRvZXMgbm90IG9iZXkgdGhlIHRpbWVvdXQgc3BlY2lmaWVkCiAgICAgICAgb24gdGhlIHNvY2tldC4gT3RoZXIgZmFjdG9ycyB0aGF0IGNhbiBhZmZlY3QgdG90YWwgcmVxdWVzdCB0aW1lIGluY2x1ZGUKICAgICAgICBoaWdoIENQVSBsb2FkLCBoaWdoIHN3YXAsIHRoZSBwcm9ncmFtIHJ1bm5pbmcgYXQgYSBsb3cgcHJpb3JpdHkgbGV2ZWwsCiAgICAgICAgb3Igb3RoZXIgYmVoYXZpb3JzLgoKICAgICAgICBJbiBhZGRpdGlvbiwgdGhlIHJlYWQgYW5kIHRvdGFsIHRpbWVvdXRzIG9ubHkgbWVhc3VyZSB0aGUgdGltZSBiZXR3ZWVuCiAgICAgICAgcmVhZCBvcGVyYXRpb25zIG9uIHRoZSBzb2NrZXQgY29ubmVjdGluZyB0aGUgY2xpZW50IGFuZCB0aGUgc2VydmVyLAogICAgICAgIG5vdCB0aGUgdG90YWwgYW1vdW50IG9mIHRpbWUgZm9yIHRoZSByZXF1ZXN0IHRvIHJldHVybiBhIGNvbXBsZXRlCiAgICAgICAgcmVzcG9uc2UuIEZvciBtb3N0IHJlcXVlc3RzLCB0aGUgdGltZW91dCBpcyByYWlzZWQgYmVjYXVzZSB0aGUgc2VydmVyCiAgICAgICAgaGFzIG5vdCBzZW50IHRoZSBmaXJzdCBieXRlIGluIHRoZSBzcGVjaWZpZWQgdGltZS4gVGhpcyBpcyBub3QgYWx3YXlzCiAgICAgICAgdGhlIGNhc2U7IGlmIGEgc2VydmVyIHN0cmVhbXMgb25lIGJ5dGUgZXZlcnkgZmlmdGVlbiBzZWNvbmRzLCBhIHRpbWVvdXQKICAgICAgICBvZiAyMCBzZWNvbmRzIHdpbGwgbm90IHRyaWdnZXIsIGV2ZW4gdGhvdWdoIHRoZSByZXF1ZXN0IHdpbGwgdGFrZQogICAgICAgIHNldmVyYWwgbWludXRlcyB0byBjb21wbGV0ZS4KCiAgICAgICAgSWYgeW91ciBnb2FsIGlzIHRvIGN1dCBvZmYgYW55IHJlcXVlc3QgYWZ0ZXIgYSBzZXQgYW1vdW50IG9mIHdhbGwgY2xvY2sKICAgICAgICB0aW1lLCBjb25zaWRlciBoYXZpbmcgYSBzZWNvbmQgXCJ3YXRjaGVyXCIgdGhyZWFkIHRvIGN1dCBvZmYgYSBzbG93CiAgICAgICAgcmVxdWVzdC4KICAgIFwiXCJcIgoKICAgICM6IEEgc2VudGluZWwgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgZGVmYXVsdCB0aW1lb3V0IHZhbHVlCiAgICBERUZBVUxUX1RJTUVPVVQgPSBfR0xPQkFMX0RFRkFVTFRfVElNRU9VVAoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB0b3RhbD1Ob25lLCBjb25uZWN0PV9EZWZhdWx0LCByZWFkPV9EZWZhdWx0KToKICAgICAgICBzZWxmLl9jb25uZWN0ID0gc2VsZi5fdmFsaWRhdGVfdGltZW91dChjb25uZWN0LCBcImNvbm5lY3RcIikKICAgICAgICBzZWxmLl9yZWFkID0gc2VsZi5fdmFsaWRhdGVfdGltZW91dChyZWFkLCBcInJlYWRcIikKICAgICAgICBzZWxmLnRvdGFsID0gc2VsZi5fdmFsaWRhdGVfdGltZW91dCh0b3RhbCwgXCJ0b3RhbFwiKQogICAgICAgIHNlbGYuX3N0YXJ0X2Nvbm5lY3QgPSBOb25lCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBcIiVzKGNvbm5lY3Q9JXIsIHJlYWQ9JXIsIHRvdGFsPSVyKVwiICUgKAogICAgICAgICAgICB0eXBlKHNlbGYpLl9fbmFtZV9fLAogICAgICAgICAgICBzZWxmLl9jb25uZWN0LAogICAgICAgICAgICBzZWxmLl9yZWFkLAogICAgICAgICAgICBzZWxmLnRvdGFsLAogICAgICAgICkKCiAgICAjIF9fc3RyX18gcHJvdmlkZWQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5CiAgICBfX3N0cl9fID0gX19yZXByX18KCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBfdmFsaWRhdGVfdGltZW91dChjbHMsIHZhbHVlLCBuYW1lKToKICAgICAgICBcIlwiXCJDaGVjayB0aGF0IGEgdGltZW91dCBhdHRyaWJ1dGUgaXMgdmFsaWQuCgogICAgICAgIDpwYXJhbSB2YWx1ZTogVGhlIHRpbWVvdXQgdmFsdWUgdG8gdmFsaWRhdGUKICAgICAgICA6cGFyYW0gbmFtZTogVGhlIG5hbWUgb2YgdGhlIHRpbWVvdXQgYXR0cmlidXRlIHRvIHZhbGlkYXRlLiBUaGlzIGlzCiAgICAgICAgICAgIHVzZWQgdG8gc3BlY2lmeSBpbiBlcnJvciBtZXNzYWdlcy4KICAgICAgICA6cmV0dXJuOiBUaGUgdmFsaWRhdGVkIGFuZCBjYXN0ZWQgdmVyc2lvbiBvZiB0aGUgZ2l2ZW4gdmFsdWUuCiAgICAgICAgOnJhaXNlcyBWYWx1ZUVycm9yOiBJZiBpdCBpcyBhIG51bWVyaWMgdmFsdWUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvCiAgICAgICAgICAgIHplcm8sIG9yIHRoZSB0eXBlIGlzIG5vdCBhbiBpbnRlZ2VyLCBmbG9hdCwgb3IgTm9uZS4KICAgICAgICBcIlwiXCIKICAgICAgICBpZiB2YWx1ZSBpcyBfRGVmYXVsdDoKICAgICAgICAgICAgcmV0dXJuIGNscy5ERUZBVUxUX1RJTUVPVVQKCiAgICAgICAgaWYgdmFsdWUgaXMgTm9uZSBvciB2YWx1ZSBpcyBjbHMuREVGQVVMVF9USU1FT1VUOgogICAgICAgICAgICByZXR1cm4gdmFsdWUKCiAgICAgICAgaWYgaXNpbnN0YW5jZSh2YWx1ZSwgYm9vbCk6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoCiAgICAgICAgICAgICAgICBcIlRpbWVvdXQgY2Fubm90IGJlIGEgYm9vbGVhbiB2YWx1ZS4gSXQgbXVzdCBcIgogICAgICAgICAgICAgICAgXCJiZSBhbiBpbnQsIGZsb2F0IG9yIE5vbmUuXCIKICAgICAgICAgICAgKQogICAgICAgIHRyeToKICAgICAgICAgICAgZmxvYXQodmFsdWUpCiAgICAgICAgZXhjZXB0IChUeXBlRXJyb3IsIFZhbHVlRXJyb3IpOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKAogICAgICAgICAgICAgICAgXCJUaW1lb3V0IHZhbHVlICVzIHdhcyAlcywgYnV0IGl0IG11c3QgYmUgYW4gXCIKICAgICAgICAgICAgICAgIFwiaW50LCBmbG9hdCBvciBOb25lLlwiICUgKG5hbWUsIHZhbHVlKQogICAgICAgICAgICApCgogICAgICAgIHRyeToKICAgICAgICAgICAgaWYgdmFsdWUgPD0gMDoKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgXCJBdHRlbXB0ZWQgdG8gc2V0ICVzIHRpbWVvdXQgdG8gJXMsIGJ1dCB0aGUgXCIKICAgICAgICAgICAgICAgICAgICBcInRpbWVvdXQgY2Fubm90IGJlIHNldCB0byBhIHZhbHVlIGxlc3MgXCIKICAgICAgICAgICAgICAgICAgICBcInRoYW4gb3IgZXF1YWwgdG8gMC5cIiAlIChuYW1lLCB2YWx1ZSkKICAgICAgICAgICAgICAgICkKICAgICAgICBleGNlcHQgVHlwZUVycm9yOgogICAgICAgICAgICAjIFB5dGhvbiAzCiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoCiAgICAgICAgICAgICAgICBcIlRpbWVvdXQgdmFsdWUgJXMgd2FzICVzLCBidXQgaXQgbXVzdCBiZSBhbiBcIgogICAgICAgICAgICAgICAgXCJpbnQsIGZsb2F0IG9yIE5vbmUuXCIgJSAobmFtZSwgdmFsdWUpCiAgICAgICAgICAgICkKCiAgICAgICAgcmV0dXJuIHZhbHVlCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgZnJvbV9mbG9hdChjbHMsIHRpbWVvdXQpOgogICAgICAgIFwiXCJcIkNyZWF0ZSBhIG5ldyBUaW1lb3V0IGZyb20gYSBsZWdhY3kgdGltZW91dCB2YWx1ZS4KCiAgICAgICAgVGhlIHRpbWVvdXQgdmFsdWUgdXNlZCBieSBodHRwbGliLnB5IHNldHMgdGhlIHNhbWUgdGltZW91dCBvbiB0aGUKICAgICAgICBjb25uZWN0KCksIGFuZCByZWN2KCkgc29ja2V0IHJlcXVlc3RzLiBUaGlzIGNyZWF0ZXMgYSA6Y2xhc3M6YFRpbWVvdXRgCiAgICAgICAgb2JqZWN0IHRoYXQgc2V0cyB0aGUgaW5kaXZpZHVhbCB0aW1lb3V0cyB0byB0aGUgYGB0aW1lb3V0YGAgdmFsdWUKICAgICAgICBwYXNzZWQgdG8gdGhpcyBmdW5jdGlvbi4KCiAgICAgICAgOnBhcmFtIHRpbWVvdXQ6IFRoZSBsZWdhY3kgdGltZW91dCB2YWx1ZS4KICAgICAgICA6dHlwZSB0aW1lb3V0OiBpbnRlZ2VyLCBmbG9hdCwgc2VudGluZWwgZGVmYXVsdCBvYmplY3QsIG9yIE5vbmUKICAgICAgICA6cmV0dXJuOiBUaW1lb3V0IG9iamVjdAogICAgICAgIDpydHlwZTogOmNsYXNzOmBUaW1lb3V0YAogICAgICAgIFwiXCJcIgogICAgICAgIHJldHVybiBUaW1lb3V0KHJlYWQ9dGltZW91dCwgY29ubmVjdD10aW1lb3V0KQoKICAgIGRlZiBjbG9uZShzZWxmKToKICAgICAgICBcIlwiXCJDcmVhdGUgYSBjb3B5IG9mIHRoZSB0aW1lb3V0IG9iamVjdAoKICAgICAgICBUaW1lb3V0IHByb3BlcnRpZXMgYXJlIHN0b3JlZCBwZXItcG9vbCBidXQgZWFjaCByZXF1ZXN0IG5lZWRzIGEgZnJlc2gKICAgICAgICBUaW1lb3V0IG9iamVjdCB0byBlbnN1cmUgZWFjaCBvbmUgaGFzIGl0cyBvd24gc3RhcnQvc3RvcCBjb25maWd1cmVkLgoKICAgICAgICA6cmV0dXJuOiBhIGNvcHkgb2YgdGhlIHRpbWVvdXQgb2JqZWN0CiAgICAgICAgOnJ0eXBlOiA6Y2xhc3M6YFRpbWVvdXRgCiAgICAgICAgXCJcIlwiCiAgICAgICAgIyBXZSBjYW4ndCB1c2UgY29weS5kZWVwY29weSBiZWNhdXNlIHRoYXQgd2lsbCBhbHNvIGNyZWF0ZSBhIG5ldyBvYmplY3QKICAgICAgICAjIGZvciBfR0xPQkFMX0RFRkFVTFRfVElNRU9VVCwgd2hpY2ggc29ja2V0LnB5IHVzZXMgYXMgYSBzZW50aW5lbCB0bwogICAgICAgICMgZGV0ZWN0IHRoZSB1c2VyIGRlZmF1bHQuCiAgICAgICAgcmV0dXJuIFRpbWVvdXQoY29ubmVjdD1zZWxmLl9jb25uZWN0LCByZWFkPXNlbGYuX3JlYWQsIHRvdGFsPXNlbGYudG90YWwpCgogICAgZGVmIHN0YXJ0X2Nvbm5lY3Qoc2VsZik6CiAgICAgICAgXCJcIlwiU3RhcnQgdGhlIHRpbWVvdXQgY2xvY2ssIHVzZWQgZHVyaW5nIGEgY29ubmVjdCgpIGF0dGVtcHQKCiAgICAgICAgOnJhaXNlcyB1cmxsaWIzLmV4Y2VwdGlvbnMuVGltZW91dFN0YXRlRXJyb3I6IGlmIHlvdSBhdHRlbXB0CiAgICAgICAgICAgIHRvIHN0YXJ0IGEgdGltZXIgdGhhdCBoYXMgYmVlbiBzdGFydGVkIGFscmVhZHkuCiAgICAgICAgXCJcIlwiCiAgICAgICAgaWYgc2VsZi5fc3RhcnRfY29ubmVjdCBpcyBub3QgTm9uZToKICAgICAgICAgICAgcmFpc2UgVGltZW91dFN0YXRlRXJyb3IoXCJUaW1lb3V0IHRpbWVyIGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZC5cIikKICAgICAgICBzZWxmLl9zdGFydF9jb25uZWN0ID0gY3VycmVudF90aW1lKCkKICAgICAgICByZXR1cm4gc2VsZi5fc3RhcnRfY29ubmVjdAoKICAgIGRlZiBnZXRfY29ubmVjdF9kdXJhdGlvbihzZWxmKToKICAgICAgICBcIlwiXCJHZXRzIHRoZSB0aW1lIGVsYXBzZWQgc2luY2UgdGhlIGNhbGwgdG8gOm1ldGg6YHN0YXJ0X2Nvbm5lY3RgLgoKICAgICAgICA6cmV0dXJuOiBFbGFwc2VkIHRpbWUgaW4gc2Vjb25kcy4KICAgICAgICA6cnR5cGU6IGZsb2F0CiAgICAgICAgOnJhaXNlcyB1cmxsaWIzLmV4Y2VwdGlvbnMuVGltZW91dFN0YXRlRXJyb3I6IGlmIHlvdSBhdHRlbXB0CiAgICAgICAgICAgIHRvIGdldCBkdXJhdGlvbiBmb3IgYSB0aW1lciB0aGF0IGhhc24ndCBiZWVuIHN0YXJ0ZWQuCiAgICAgICAgXCJcIlwiCiAgICAgICAgaWYgc2VsZi5fc3RhcnRfY29ubmVjdCBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBUaW1lb3V0U3RhdGVFcnJvcigKICAgICAgICAgICAgICAgIFwiQ2FuJ3QgZ2V0IGNvbm5lY3QgZHVyYXRpb24gZm9yIHRpbWVyIHRoYXQgaGFzIG5vdCBzdGFydGVkLlwiCiAgICAgICAgICAgICkKICAgICAgICByZXR1cm4gY3VycmVudF90aW1lKCkgLSBzZWxmLl9zdGFydF9jb25uZWN0CgogICAgQHByb3BlcnR5CiAgICBkZWYgY29ubmVjdF90aW1lb3V0KHNlbGYpOgogICAgICAgIFwiXCJcIkdldCB0aGUgdmFsdWUgdG8gdXNlIHdoZW4gc2V0dGluZyBhIGNvbm5lY3Rpb24gdGltZW91dC4KCiAgICAgICAgVGhpcyB3aWxsIGJlIGEgcG9zaXRpdmUgZmxvYXQgb3IgaW50ZWdlciwgdGhlIHZhbHVlIE5vbmUKICAgICAgICAobmV2ZXIgdGltZW91dCksIG9yIHRoZSBkZWZhdWx0IHN5c3RlbSB0aW1lb3V0LgoKICAgICAgICA6cmV0dXJuOiBDb25uZWN0IHRpbWVvdXQuCiAgICAgICAgOnJ0eXBlOiBpbnQsIGZsb2F0LCA6YXR0cjpgVGltZW91dC5ERUZBVUxUX1RJTUVPVVRgIG9yIE5vbmUKICAgICAgICBcIlwiXCIKICAgICAgICBpZiBzZWxmLnRvdGFsIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jb25uZWN0CgogICAgICAgIGlmIHNlbGYuX2Nvbm5lY3QgaXMgTm9uZSBvciBzZWxmLl9jb25uZWN0IGlzIHNlbGYuREVGQVVMVF9USU1FT1VUOgogICAgICAgICAgICByZXR1cm4gc2VsZi50b3RhbAoKICAgICAgICByZXR1cm4gbWluKHNlbGYuX2Nvbm5lY3QsIHNlbGYudG90YWwpCgogICAgQHByb3BlcnR5CiAgICBkZWYgcmVhZF90aW1lb3V0KHNlbGYpOgogICAgICAgIFwiXCJcIkdldCB0aGUgdmFsdWUgZm9yIHRoZSByZWFkIHRpbWVvdXQuCgogICAgICAgIFRoaXMgYXNzdW1lcyBzb21lIHRpbWUgaGFzIGVsYXBzZWQgaW4gdGhlIGNvbm5lY3Rpb24gdGltZW91dCBhbmQKICAgICAgICBjb21wdXRlcyB0aGUgcmVhZCB0aW1lb3V0IGFwcHJvcHJpYXRlbHkuCgogICAgICAgIElmIHNlbGYudG90YWwgaXMgc2V0LCB0aGUgcmVhZCB0aW1lb3V0IGlzIGRlcGVuZGVudCBvbiB0aGUgYW1vdW50IG9mCiAgICAgICAgdGltZSB0YWtlbiBieSB0aGUgY29ubmVjdCB0aW1lb3V0LiBJZiB0aGUgY29ubmVjdGlvbiB0aW1lIGhhcyBub3QgYmVlbgogICAgICAgIGVzdGFibGlzaGVkLCBhIDpleGM6YH51cmxsaWIzLmV4Y2VwdGlvbnMuVGltZW91dFN0YXRlRXJyb3JgIHdpbGwgYmUKICAgICAgICByYWlzZWQuCgogICAgICAgIDpyZXR1cm46IFZhbHVlIHRvIHVzZSBmb3IgdGhlIHJlYWQgdGltZW91dC4KICAgICAgICA6cnR5cGU6IGludCwgZmxvYXQsIDphdHRyOmBUaW1lb3V0LkRFRkFVTFRfVElNRU9VVGAgb3IgTm9uZQogICAgICAgIDpyYWlzZXMgdXJsbGliMy5leGNlcHRpb25zLlRpbWVvdXRTdGF0ZUVycm9yOiBJZiA6bWV0aDpgc3RhcnRfY29ubmVjdGAKICAgICAgICAgICAgaGFzIG5vdCB5ZXQgYmVlbiBjYWxsZWQgb24gdGhpcyBvYmplY3QuCiAgICAgICAgXCJcIlwiCiAgICAgICAgaWYgKAogICAgICAgICAgICBzZWxmLnRvdGFsIGlzIG5vdCBOb25lCiAgICAgICAgICAgIGFuZCBzZWxmLnRvdGFsIGlzIG5vdCBzZWxmLkRFRkFVTFRfVElNRU9VVAogICAgICAgICAgICBhbmQgc2VsZi5fcmVhZCBpcyBub3QgTm9uZQogICAgICAgICAgICBhbmQgc2VsZi5fcmVhZCBpcyBub3Qgc2VsZi5ERUZBVUxUX1RJTUVPVVQKICAgICAgICApOgogICAgICAgICAgICAjIEluIGNhc2UgdGhlIGNvbm5lY3QgdGltZW91dCBoYXMgbm90IHlldCBiZWVuIGVzdGFibGlzaGVkLgogICAgICAgICAgICBpZiBzZWxmLl9zdGFydF9jb25uZWN0IGlzIE5vbmU6CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fcmVhZAogICAgICAgICAgICByZXR1cm4gbWF4KDAsIG1pbihzZWxmLnRvdGFsIC0gc2VsZi5nZXRfY29ubmVjdF9kdXJhdGlvbigpLCBzZWxmLl9yZWFkKSkKICAgICAgICBlbGlmIHNlbGYudG90YWwgaXMgbm90IE5vbmUgYW5kIHNlbGYudG90YWwgaXMgbm90IHNlbGYuREVGQVVMVF9USU1FT1VUOgogICAgICAgICAgICByZXR1cm4gbWF4KDAsIHNlbGYudG90YWwgLSBzZWxmLmdldF9jb25uZWN0X2R1cmF0aW9uKCkpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3JlYWQKCiIiIgptb2R1bGVfZGljdFsidXJsbGliMyIrb3Muc2VwKyJ1dGlsIitvcy5zZXArInJldHJ5LnB5Il09IiIiCmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYWJzb2x1dGVfaW1wb3J0CgppbXBvcnQgZW1haWwKaW1wb3J0IGxvZ2dpbmcKaW1wb3J0IHJlCmltcG9ydCB0aW1lCmltcG9ydCB3YXJuaW5ncwpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBuYW1lZHR1cGxlCmZyb20gaXRlcnRvb2xzIGltcG9ydCB0YWtld2hpbGUKCmZyb20gLi5leGNlcHRpb25zIGltcG9ydCAoCiAgICBDb25uZWN0VGltZW91dEVycm9yLAogICAgSW52YWxpZEhlYWRlciwKICAgIE1heFJldHJ5RXJyb3IsCiAgICBQcm90b2NvbEVycm9yLAogICAgUHJveHlFcnJvciwKICAgIFJlYWRUaW1lb3V0RXJyb3IsCiAgICBSZXNwb25zZUVycm9yLAopCmZyb20gLi5wYWNrYWdlcyBpbXBvcnQgc2l4Cgpsb2cgPSBsb2dnaW5nLmdldExvZ2dlcihfX25hbWVfXykKCgojIERhdGEgc3RydWN0dXJlIGZvciByZXByZXNlbnRpbmcgdGhlIG1ldGFkYXRhIG9mIHJlcXVlc3RzIHRoYXQgcmVzdWx0IGluIGEgcmV0cnkuClJlcXVlc3RIaXN0b3J5ID0gbmFtZWR0dXBsZSgKICAgIFwiUmVxdWVzdEhpc3RvcnlcIiwgW1wibWV0aG9kXCIsIFwidXJsXCIsIFwiZXJyb3JcIiwgXCJzdGF0dXNcIiwgXCJyZWRpcmVjdF9sb2NhdGlvblwiXQopCgoKIyBUT0RPOiBJbiB2MiB3ZSBjYW4gcmVtb3ZlIHRoaXMgc2VudGluZWwgYW5kIG1ldGFjbGFzcyB3aXRoIGRlcHJlY2F0ZWQgb3B0aW9ucy4KX0RlZmF1bHQgPSBvYmplY3QoKQoKCmNsYXNzIF9SZXRyeU1ldGEodHlwZSk6CiAgICBAcHJvcGVydHkKICAgIGRlZiBERUZBVUxUX01FVEhPRF9XSElURUxJU1QoY2xzKToKICAgICAgICB3YXJuaW5ncy53YXJuKAogICAgICAgICAgICBcIlVzaW5nICdSZXRyeS5ERUZBVUxUX01FVEhPRF9XSElURUxJU1QnIGlzIGRlcHJlY2F0ZWQgYW5kIFwiCiAgICAgICAgICAgIFwid2lsbCBiZSByZW1vdmVkIGluIHYyLjAuIFVzZSAnUmV0cnkuREVGQVVMVF9BTExPV0VEX01FVEhPRFMnIGluc3RlYWRcIiwKICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLAogICAgICAgICkKICAgICAgICByZXR1cm4gY2xzLkRFRkFVTFRfQUxMT1dFRF9NRVRIT0RTCgogICAgQERFRkFVTFRfTUVUSE9EX1dISVRFTElTVC5zZXR0ZXIKICAgIGRlZiBERUZBVUxUX01FVEhPRF9XSElURUxJU1QoY2xzLCB2YWx1ZSk6CiAgICAgICAgd2FybmluZ3Mud2FybigKICAgICAgICAgICAgXCJVc2luZyAnUmV0cnkuREVGQVVMVF9NRVRIT0RfV0hJVEVMSVNUJyBpcyBkZXByZWNhdGVkIGFuZCBcIgogICAgICAgICAgICBcIndpbGwgYmUgcmVtb3ZlZCBpbiB2Mi4wLiBVc2UgJ1JldHJ5LkRFRkFVTFRfQUxMT1dFRF9NRVRIT0RTJyBpbnN0ZWFkXCIsCiAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZywKICAgICAgICApCiAgICAgICAgY2xzLkRFRkFVTFRfQUxMT1dFRF9NRVRIT0RTID0gdmFsdWUKCiAgICBAcHJvcGVydHkKICAgIGRlZiBERUZBVUxUX1JFRElSRUNUX0hFQURFUlNfQkxBQ0tMSVNUKGNscyk6CiAgICAgICAgd2FybmluZ3Mud2FybigKICAgICAgICAgICAgXCJVc2luZyAnUmV0cnkuREVGQVVMVF9SRURJUkVDVF9IRUFERVJTX0JMQUNLTElTVCcgaXMgZGVwcmVjYXRlZCBhbmQgXCIKICAgICAgICAgICAgXCJ3aWxsIGJlIHJlbW92ZWQgaW4gdjIuMC4gVXNlICdSZXRyeS5ERUZBVUxUX1JFTU9WRV9IRUFERVJTX09OX1JFRElSRUNUJyBpbnN0ZWFkXCIsCiAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZywKICAgICAgICApCiAgICAgICAgcmV0dXJuIGNscy5ERUZBVUxUX1JFTU9WRV9IRUFERVJTX09OX1JFRElSRUNUCgogICAgQERFRkFVTFRfUkVESVJFQ1RfSEVBREVSU19CTEFDS0xJU1Quc2V0dGVyCiAgICBkZWYgREVGQVVMVF9SRURJUkVDVF9IRUFERVJTX0JMQUNLTElTVChjbHMsIHZhbHVlKToKICAgICAgICB3YXJuaW5ncy53YXJuKAogICAgICAgICAgICBcIlVzaW5nICdSZXRyeS5ERUZBVUxUX1JFRElSRUNUX0hFQURFUlNfQkxBQ0tMSVNUJyBpcyBkZXByZWNhdGVkIGFuZCBcIgogICAgICAgICAgICBcIndpbGwgYmUgcmVtb3ZlZCBpbiB2Mi4wLiBVc2UgJ1JldHJ5LkRFRkFVTFRfUkVNT1ZFX0hFQURFUlNfT05fUkVESVJFQ1QnIGluc3RlYWRcIiwKICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLAogICAgICAgICkKICAgICAgICBjbHMuREVGQVVMVF9SRU1PVkVfSEVBREVSU19PTl9SRURJUkVDVCA9IHZhbHVlCgogICAgQHByb3BlcnR5CiAgICBkZWYgQkFDS09GRl9NQVgoY2xzKToKICAgICAgICB3YXJuaW5ncy53YXJuKAogICAgICAgICAgICBcIlVzaW5nICdSZXRyeS5CQUNLT0ZGX01BWCcgaXMgZGVwcmVjYXRlZCBhbmQgXCIKICAgICAgICAgICAgXCJ3aWxsIGJlIHJlbW92ZWQgaW4gdjIuMC4gVXNlICdSZXRyeS5ERUZBVUxUX0JBQ0tPRkZfTUFYJyBpbnN0ZWFkXCIsCiAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZywKICAgICAgICApCiAgICAgICAgcmV0dXJuIGNscy5ERUZBVUxUX0JBQ0tPRkZfTUFYCgogICAgQEJBQ0tPRkZfTUFYLnNldHRlcgogICAgZGVmIEJBQ0tPRkZfTUFYKGNscywgdmFsdWUpOgogICAgICAgIHdhcm5pbmdzLndhcm4oCiAgICAgICAgICAgIFwiVXNpbmcgJ1JldHJ5LkJBQ0tPRkZfTUFYJyBpcyBkZXByZWNhdGVkIGFuZCBcIgogICAgICAgICAgICBcIndpbGwgYmUgcmVtb3ZlZCBpbiB2Mi4wLiBVc2UgJ1JldHJ5LkRFRkFVTFRfQkFDS09GRl9NQVgnIGluc3RlYWRcIiwKICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLAogICAgICAgICkKICAgICAgICBjbHMuREVGQVVMVF9CQUNLT0ZGX01BWCA9IHZhbHVlCgoKQHNpeC5hZGRfbWV0YWNsYXNzKF9SZXRyeU1ldGEpCmNsYXNzIFJldHJ5KG9iamVjdCk6CiAgICBcIlwiXCJSZXRyeSBjb25maWd1cmF0aW9uLgoKICAgIEVhY2ggcmV0cnkgYXR0ZW1wdCB3aWxsIGNyZWF0ZSBhIG5ldyBSZXRyeSBvYmplY3Qgd2l0aCB1cGRhdGVkIHZhbHVlcywgc28KICAgIHRoZXkgY2FuIGJlIHNhZmVseSByZXVzZWQuCgogICAgUmV0cmllcyBjYW4gYmUgZGVmaW5lZCBhcyBhIGRlZmF1bHQgZm9yIGEgcG9vbDo6CgogICAgICAgIHJldHJpZXMgPSBSZXRyeShjb25uZWN0PTUsIHJlYWQ9MiwgcmVkaXJlY3Q9NSkKICAgICAgICBodHRwID0gUG9vbE1hbmFnZXIocmV0cmllcz1yZXRyaWVzKQogICAgICAgIHJlc3BvbnNlID0gaHR0cC5yZXF1ZXN0KCdHRVQnLCAnaHR0cDovL2V4YW1wbGUuY29tLycpCgogICAgT3IgcGVyLXJlcXVlc3QgKHdoaWNoIG92ZXJyaWRlcyB0aGUgZGVmYXVsdCBmb3IgdGhlIHBvb2wpOjoKCiAgICAgICAgcmVzcG9uc2UgPSBodHRwLnJlcXVlc3QoJ0dFVCcsICdodHRwOi8vZXhhbXBsZS5jb20vJywgcmV0cmllcz1SZXRyeSgxMCkpCgogICAgUmV0cmllcyBjYW4gYmUgZGlzYWJsZWQgYnkgcGFzc2luZyBgYEZhbHNlYGA6OgoKICAgICAgICByZXNwb25zZSA9IGh0dHAucmVxdWVzdCgnR0VUJywgJ2h0dHA6Ly9leGFtcGxlLmNvbS8nLCByZXRyaWVzPUZhbHNlKQoKICAgIEVycm9ycyB3aWxsIGJlIHdyYXBwZWQgaW4gOmNsYXNzOmB+dXJsbGliMy5leGNlcHRpb25zLk1heFJldHJ5RXJyb3JgIHVubGVzcwogICAgcmV0cmllcyBhcmUgZGlzYWJsZWQsIGluIHdoaWNoIGNhc2UgdGhlIGNhdXNpbmcgZXhjZXB0aW9uIHdpbGwgYmUgcmFpc2VkLgoKICAgIDpwYXJhbSBpbnQgdG90YWw6CiAgICAgICAgVG90YWwgbnVtYmVyIG9mIHJldHJpZXMgdG8gYWxsb3cuIFRha2VzIHByZWNlZGVuY2Ugb3ZlciBvdGhlciBjb3VudHMuCgogICAgICAgIFNldCB0byBgYE5vbmVgYCB0byByZW1vdmUgdGhpcyBjb25zdHJhaW50IGFuZCBmYWxsIGJhY2sgb24gb3RoZXIKICAgICAgICBjb3VudHMuCgogICAgICAgIFNldCB0byBgYDBgYCB0byBmYWlsIG9uIHRoZSBmaXJzdCByZXRyeS4KCiAgICAgICAgU2V0IHRvIGBgRmFsc2VgYCB0byBkaXNhYmxlIGFuZCBpbXBseSBgYHJhaXNlX29uX3JlZGlyZWN0PUZhbHNlYGAuCgogICAgOnBhcmFtIGludCBjb25uZWN0OgogICAgICAgIEhvdyBtYW55IGNvbm5lY3Rpb24tcmVsYXRlZCBlcnJvcnMgdG8gcmV0cnkgb24uCgogICAgICAgIFRoZXNlIGFyZSBlcnJvcnMgcmFpc2VkIGJlZm9yZSB0aGUgcmVxdWVzdCBpcyBzZW50IHRvIHRoZSByZW1vdGUgc2VydmVyLAogICAgICAgIHdoaWNoIHdlIGFzc3VtZSBoYXMgbm90IHRyaWdnZXJlZCB0aGUgc2VydmVyIHRvIHByb2Nlc3MgdGhlIHJlcXVlc3QuCgogICAgICAgIFNldCB0byBgYDBgYCB0byBmYWlsIG9uIHRoZSBmaXJzdCByZXRyeSBvZiB0aGlzIHR5cGUuCgogICAgOnBhcmFtIGludCByZWFkOgogICAgICAgIEhvdyBtYW55IHRpbWVzIHRvIHJldHJ5IG9uIHJlYWQgZXJyb3JzLgoKICAgICAgICBUaGVzZSBlcnJvcnMgYXJlIHJhaXNlZCBhZnRlciB0aGUgcmVxdWVzdCB3YXMgc2VudCB0byB0aGUgc2VydmVyLCBzbyB0aGUKICAgICAgICByZXF1ZXN0IG1heSBoYXZlIHNpZGUtZWZmZWN0cy4KCiAgICAgICAgU2V0IHRvIGBgMGBgIHRvIGZhaWwgb24gdGhlIGZpcnN0IHJldHJ5IG9mIHRoaXMgdHlwZS4KCiAgICA6cGFyYW0gaW50IHJlZGlyZWN0OgogICAgICAgIEhvdyBtYW55IHJlZGlyZWN0cyB0byBwZXJmb3JtLiBMaW1pdCB0aGlzIHRvIGF2b2lkIGluZmluaXRlIHJlZGlyZWN0CiAgICAgICAgbG9vcHMuCgogICAgICAgIEEgcmVkaXJlY3QgaXMgYSBIVFRQIHJlc3BvbnNlIHdpdGggYSBzdGF0dXMgY29kZSAzMDEsIDMwMiwgMzAzLCAzMDcgb3IKICAgICAgICAzMDguCgogICAgICAgIFNldCB0byBgYDBgYCB0byBmYWlsIG9uIHRoZSBmaXJzdCByZXRyeSBvZiB0aGlzIHR5cGUuCgogICAgICAgIFNldCB0byBgYEZhbHNlYGAgdG8gZGlzYWJsZSBhbmQgaW1wbHkgYGByYWlzZV9vbl9yZWRpcmVjdD1GYWxzZWBgLgoKICAgIDpwYXJhbSBpbnQgc3RhdHVzOgogICAgICAgIEhvdyBtYW55IHRpbWVzIHRvIHJldHJ5IG9uIGJhZCBzdGF0dXMgY29kZXMuCgogICAgICAgIFRoZXNlIGFyZSByZXRyaWVzIG1hZGUgb24gcmVzcG9uc2VzLCB3aGVyZSBzdGF0dXMgY29kZSBtYXRjaGVzCiAgICAgICAgYGBzdGF0dXNfZm9yY2VsaXN0YGAuCgogICAgICAgIFNldCB0byBgYDBgYCB0byBmYWlsIG9uIHRoZSBmaXJzdCByZXRyeSBvZiB0aGlzIHR5cGUuCgogICAgOnBhcmFtIGludCBvdGhlcjoKICAgICAgICBIb3cgbWFueSB0aW1lcyB0byByZXRyeSBvbiBvdGhlciBlcnJvcnMuCgogICAgICAgIE90aGVyIGVycm9ycyBhcmUgZXJyb3JzIHRoYXQgYXJlIG5vdCBjb25uZWN0LCByZWFkLCByZWRpcmVjdCBvciBzdGF0dXMgZXJyb3JzLgogICAgICAgIFRoZXNlIGVycm9ycyBtaWdodCBiZSByYWlzZWQgYWZ0ZXIgdGhlIHJlcXVlc3Qgd2FzIHNlbnQgdG8gdGhlIHNlcnZlciwgc28gdGhlCiAgICAgICAgcmVxdWVzdCBtaWdodCBoYXZlIHNpZGUtZWZmZWN0cy4KCiAgICAgICAgU2V0IHRvIGBgMGBgIHRvIGZhaWwgb24gdGhlIGZpcnN0IHJldHJ5IG9mIHRoaXMgdHlwZS4KCiAgICAgICAgSWYgYGB0b3RhbGBgIGlzIG5vdCBzZXQsIGl0J3MgYSBnb29kIGlkZWEgdG8gc2V0IHRoaXMgdG8gMCB0byBhY2NvdW50CiAgICAgICAgZm9yIHVuZXhwZWN0ZWQgZWRnZSBjYXNlcyBhbmQgYXZvaWQgaW5maW5pdGUgcmV0cnkgbG9vcHMuCgogICAgOnBhcmFtIGl0ZXJhYmxlIGFsbG93ZWRfbWV0aG9kczoKICAgICAgICBTZXQgb2YgdXBwZXJjYXNlZCBIVFRQIG1ldGhvZCB2ZXJicyB0aGF0IHdlIHNob3VsZCByZXRyeSBvbi4KCiAgICAgICAgQnkgZGVmYXVsdCwgd2Ugb25seSByZXRyeSBvbiBtZXRob2RzIHdoaWNoIGFyZSBjb25zaWRlcmVkIHRvIGJlCiAgICAgICAgaWRlbXBvdGVudCAobXVsdGlwbGUgcmVxdWVzdHMgd2l0aCB0aGUgc2FtZSBwYXJhbWV0ZXJzIGVuZCB3aXRoIHRoZQogICAgICAgIHNhbWUgc3RhdGUpLiBTZWUgOmF0dHI6YFJldHJ5LkRFRkFVTFRfQUxMT1dFRF9NRVRIT0RTYC4KCiAgICAgICAgU2V0IHRvIGEgYGBGYWxzZWBgIHZhbHVlIHRvIHJldHJ5IG9uIGFueSB2ZXJiLgoKICAgICAgICAuLiB3YXJuaW5nOjoKCiAgICAgICAgICAgIFByZXZpb3VzbHkgdGhpcyBwYXJhbWV0ZXIgd2FzIG5hbWVkIGBgbWV0aG9kX3doaXRlbGlzdGBgLCB0aGF0CiAgICAgICAgICAgIHVzYWdlIGlzIGRlcHJlY2F0ZWQgaW4gdjEuMjYuMCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHYyLjAuCgogICAgOnBhcmFtIGl0ZXJhYmxlIHN0YXR1c19mb3JjZWxpc3Q6CiAgICAgICAgQSBzZXQgb2YgaW50ZWdlciBIVFRQIHN0YXR1cyBjb2RlcyB0aGF0IHdlIHNob3VsZCBmb3JjZSBhIHJldHJ5IG9uLgogICAgICAgIEEgcmV0cnkgaXMgaW5pdGlhdGVkIGlmIHRoZSByZXF1ZXN0IG1ldGhvZCBpcyBpbiBgYGFsbG93ZWRfbWV0aG9kc2BgCiAgICAgICAgYW5kIHRoZSByZXNwb25zZSBzdGF0dXMgY29kZSBpcyBpbiBgYHN0YXR1c19mb3JjZWxpc3RgYC4KCiAgICAgICAgQnkgZGVmYXVsdCwgdGhpcyBpcyBkaXNhYmxlZCB3aXRoIGBgTm9uZWBgLgoKICAgIDpwYXJhbSBmbG9hdCBiYWNrb2ZmX2ZhY3RvcjoKICAgICAgICBBIGJhY2tvZmYgZmFjdG9yIHRvIGFwcGx5IGJldHdlZW4gYXR0ZW1wdHMgYWZ0ZXIgdGhlIHNlY29uZCB0cnkKICAgICAgICAobW9zdCBlcnJvcnMgYXJlIHJlc29sdmVkIGltbWVkaWF0ZWx5IGJ5IGEgc2Vjb25kIHRyeSB3aXRob3V0IGEKICAgICAgICBkZWxheSkuIHVybGxpYjMgd2lsbCBzbGVlcCBmb3I6OgoKICAgICAgICAgICAge2JhY2tvZmYgZmFjdG9yfSAqICgyICoqICh7bnVtYmVyIG9mIHRvdGFsIHJldHJpZXN9IC0gMSkpCgogICAgICAgIHNlY29uZHMuIElmIHRoZSBiYWNrb2ZmX2ZhY3RvciBpcyAwLjEsIHRoZW4gOmZ1bmM6YC5zbGVlcGAgd2lsbCBzbGVlcAogICAgICAgIGZvciBbMC4wcywgMC4ycywgMC40cywgLi4uXSBiZXR3ZWVuIHJldHJpZXMuIEl0IHdpbGwgbmV2ZXIgYmUgbG9uZ2VyCiAgICAgICAgdGhhbiA6YXR0cjpgUmV0cnkuREVGQVVMVF9CQUNLT0ZGX01BWGAuCgogICAgICAgIEJ5IGRlZmF1bHQsIGJhY2tvZmYgaXMgZGlzYWJsZWQgKHNldCB0byAwKS4KCiAgICA6cGFyYW0gYm9vbCByYWlzZV9vbl9yZWRpcmVjdDogV2hldGhlciwgaWYgdGhlIG51bWJlciBvZiByZWRpcmVjdHMgaXMKICAgICAgICBleGhhdXN0ZWQsIHRvIHJhaXNlIGEgTWF4UmV0cnlFcnJvciwgb3IgdG8gcmV0dXJuIGEgcmVzcG9uc2Ugd2l0aCBhCiAgICAgICAgcmVzcG9uc2UgY29kZSBpbiB0aGUgM3h4IHJhbmdlLgoKICAgIDpwYXJhbSBib29sIHJhaXNlX29uX3N0YXR1czogU2ltaWxhciBtZWFuaW5nIHRvIGBgcmFpc2Vfb25fcmVkaXJlY3RgYDoKICAgICAgICB3aGV0aGVyIHdlIHNob3VsZCByYWlzZSBhbiBleGNlcHRpb24sIG9yIHJldHVybiBhIHJlc3BvbnNlLAogICAgICAgIGlmIHN0YXR1cyBmYWxscyBpbiBgYHN0YXR1c19mb3JjZWxpc3RgYCByYW5nZSBhbmQgcmV0cmllcyBoYXZlCiAgICAgICAgYmVlbiBleGhhdXN0ZWQuCgogICAgOnBhcmFtIHR1cGxlIGhpc3Rvcnk6IFRoZSBoaXN0b3J5IG9mIHRoZSByZXF1ZXN0IGVuY291bnRlcmVkIGR1cmluZwogICAgICAgIGVhY2ggY2FsbCB0byA6bWV0aDpgflJldHJ5LmluY3JlbWVudGAuIFRoZSBsaXN0IGlzIGluIHRoZSBvcmRlcgogICAgICAgIHRoZSByZXF1ZXN0cyBvY2N1cnJlZC4gRWFjaCBsaXN0IGl0ZW0gaXMgb2YgY2xhc3MgOmNsYXNzOmBSZXF1ZXN0SGlzdG9yeWAuCgogICAgOnBhcmFtIGJvb2wgcmVzcGVjdF9yZXRyeV9hZnRlcl9oZWFkZXI6CiAgICAgICAgV2hldGhlciB0byByZXNwZWN0IFJldHJ5LUFmdGVyIGhlYWRlciBvbiBzdGF0dXMgY29kZXMgZGVmaW5lZCBhcwogICAgICAgIDphdHRyOmBSZXRyeS5SRVRSWV9BRlRFUl9TVEFUVVNfQ09ERVNgIG9yIG5vdC4KCiAgICA6cGFyYW0gaXRlcmFibGUgcmVtb3ZlX2hlYWRlcnNfb25fcmVkaXJlY3Q6CiAgICAgICAgU2VxdWVuY2Ugb2YgaGVhZGVycyB0byByZW1vdmUgZnJvbSB0aGUgcmVxdWVzdCB3aGVuIGEgcmVzcG9uc2UKICAgICAgICBpbmRpY2F0aW5nIGEgcmVkaXJlY3QgaXMgcmV0dXJuZWQgYmVmb3JlIGZpcmluZyBvZmYgdGhlIHJlZGlyZWN0ZWQKICAgICAgICByZXF1ZXN0LgogICAgXCJcIlwiCgogICAgIzogRGVmYXVsdCBtZXRob2RzIHRvIGJlIHVzZWQgZm9yIGBgYWxsb3dlZF9tZXRob2RzYGAKICAgIERFRkFVTFRfQUxMT1dFRF9NRVRIT0RTID0gZnJvemVuc2V0KAogICAgICAgIFtcIkhFQURcIiwgXCJHRVRcIiwgXCJQVVRcIiwgXCJERUxFVEVcIiwgXCJPUFRJT05TXCIsIFwiVFJBQ0VcIl0KICAgICkKCiAgICAjOiBEZWZhdWx0IHN0YXR1cyBjb2RlcyB0byBiZSB1c2VkIGZvciBgYHN0YXR1c19mb3JjZWxpc3RgYAogICAgUkVUUllfQUZURVJfU1RBVFVTX0NPREVTID0gZnJvemVuc2V0KFs0MTMsIDQyOSwgNTAzXSkKCiAgICAjOiBEZWZhdWx0IGhlYWRlcnMgdG8gYmUgdXNlZCBmb3IgYGByZW1vdmVfaGVhZGVyc19vbl9yZWRpcmVjdGBgCiAgICBERUZBVUxUX1JFTU9WRV9IRUFERVJTX09OX1JFRElSRUNUID0gZnJvemVuc2V0KFtcIkF1dGhvcml6YXRpb25cIl0pCgogICAgIzogTWF4aW11bSBiYWNrb2ZmIHRpbWUuCiAgICBERUZBVUxUX0JBQ0tPRkZfTUFYID0gMTIwCgogICAgZGVmIF9faW5pdF9fKAogICAgICAgIHNlbGYsCiAgICAgICAgdG90YWw9MTAsCiAgICAgICAgY29ubmVjdD1Ob25lLAogICAgICAgIHJlYWQ9Tm9uZSwKICAgICAgICByZWRpcmVjdD1Ob25lLAogICAgICAgIHN0YXR1cz1Ob25lLAogICAgICAgIG90aGVyPU5vbmUsCiAgICAgICAgYWxsb3dlZF9tZXRob2RzPV9EZWZhdWx0LAogICAgICAgIHN0YXR1c19mb3JjZWxpc3Q9Tm9uZSwKICAgICAgICBiYWNrb2ZmX2ZhY3Rvcj0wLAogICAgICAgIHJhaXNlX29uX3JlZGlyZWN0PVRydWUsCiAgICAgICAgcmFpc2Vfb25fc3RhdHVzPVRydWUsCiAgICAgICAgaGlzdG9yeT1Ob25lLAogICAgICAgIHJlc3BlY3RfcmV0cnlfYWZ0ZXJfaGVhZGVyPVRydWUsCiAgICAgICAgcmVtb3ZlX2hlYWRlcnNfb25fcmVkaXJlY3Q9X0RlZmF1bHQsCiAgICAgICAgIyBUT0RPOiBEZXByZWNhdGVkLCByZW1vdmUgaW4gdjIuMAogICAgICAgIG1ldGhvZF93aGl0ZWxpc3Q9X0RlZmF1bHQsCiAgICApOgoKICAgICAgICBpZiBtZXRob2Rfd2hpdGVsaXN0IGlzIG5vdCBfRGVmYXVsdDoKICAgICAgICAgICAgaWYgYWxsb3dlZF9tZXRob2RzIGlzIG5vdCBfRGVmYXVsdDoKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgXCJVc2luZyBib3RoICdhbGxvd2VkX21ldGhvZHMnIGFuZCBcIgogICAgICAgICAgICAgICAgICAgIFwiJ21ldGhvZF93aGl0ZWxpc3QnIHRvZ2V0aGVyIGlzIG5vdCBhbGxvd2VkLiBcIgogICAgICAgICAgICAgICAgICAgIFwiSW5zdGVhZCBvbmx5IHVzZSAnYWxsb3dlZF9tZXRob2RzJ1wiCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oCiAgICAgICAgICAgICAgICBcIlVzaW5nICdtZXRob2Rfd2hpdGVsaXN0JyB3aXRoIFJldHJ5IGlzIGRlcHJlY2F0ZWQgYW5kIFwiCiAgICAgICAgICAgICAgICBcIndpbGwgYmUgcmVtb3ZlZCBpbiB2Mi4wLiBVc2UgJ2FsbG93ZWRfbWV0aG9kcycgaW5zdGVhZFwiLAogICAgICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLAogICAgICAgICAgICAgICAgc3RhY2tsZXZlbD0yLAogICAgICAgICAgICApCiAgICAgICAgICAgIGFsbG93ZWRfbWV0aG9kcyA9IG1ldGhvZF93aGl0ZWxpc3QKICAgICAgICBpZiBhbGxvd2VkX21ldGhvZHMgaXMgX0RlZmF1bHQ6CiAgICAgICAgICAgIGFsbG93ZWRfbWV0aG9kcyA9IHNlbGYuREVGQVVMVF9BTExPV0VEX01FVEhPRFMKICAgICAgICBpZiByZW1vdmVfaGVhZGVyc19vbl9yZWRpcmVjdCBpcyBfRGVmYXVsdDoKICAgICAgICAgICAgcmVtb3ZlX2hlYWRlcnNfb25fcmVkaXJlY3QgPSBzZWxmLkRFRkFVTFRfUkVNT1ZFX0hFQURFUlNfT05fUkVESVJFQ1QKCiAgICAgICAgc2VsZi50b3RhbCA9IHRvdGFsCiAgICAgICAgc2VsZi5jb25uZWN0ID0gY29ubmVjdAogICAgICAgIHNlbGYucmVhZCA9IHJlYWQKICAgICAgICBzZWxmLnN0YXR1cyA9IHN0YXR1cwogICAgICAgIHNlbGYub3RoZXIgPSBvdGhlcgoKICAgICAgICBpZiByZWRpcmVjdCBpcyBGYWxzZSBvciB0b3RhbCBpcyBGYWxzZToKICAgICAgICAgICAgcmVkaXJlY3QgPSAwCiAgICAgICAgICAgIHJhaXNlX29uX3JlZGlyZWN0ID0gRmFsc2UKCiAgICAgICAgc2VsZi5yZWRpcmVjdCA9IHJlZGlyZWN0CiAgICAgICAgc2VsZi5zdGF0dXNfZm9yY2VsaXN0ID0gc3RhdHVzX2ZvcmNlbGlzdCBvciBzZXQoKQogICAgICAgIHNlbGYuYWxsb3dlZF9tZXRob2RzID0gYWxsb3dlZF9tZXRob2RzCiAgICAgICAgc2VsZi5iYWNrb2ZmX2ZhY3RvciA9IGJhY2tvZmZfZmFjdG9yCiAgICAgICAgc2VsZi5yYWlzZV9vbl9yZWRpcmVjdCA9IHJhaXNlX29uX3JlZGlyZWN0CiAgICAgICAgc2VsZi5yYWlzZV9vbl9zdGF0dXMgPSByYWlzZV9vbl9zdGF0dXMKICAgICAgICBzZWxmLmhpc3RvcnkgPSBoaXN0b3J5IG9yIHR1cGxlKCkKICAgICAgICBzZWxmLnJlc3BlY3RfcmV0cnlfYWZ0ZXJfaGVhZGVyID0gcmVzcGVjdF9yZXRyeV9hZnRlcl9oZWFkZXIKICAgICAgICBzZWxmLnJlbW92ZV9oZWFkZXJzX29uX3JlZGlyZWN0ID0gZnJvemVuc2V0KAogICAgICAgICAgICBbaC5sb3dlcigpIGZvciBoIGluIHJlbW92ZV9oZWFkZXJzX29uX3JlZGlyZWN0XQogICAgICAgICkKCiAgICBkZWYgbmV3KHNlbGYsICoqa3cpOgogICAgICAgIHBhcmFtcyA9IGRpY3QoCiAgICAgICAgICAgIHRvdGFsPXNlbGYudG90YWwsCiAgICAgICAgICAgIGNvbm5lY3Q9c2VsZi5jb25uZWN0LAogICAgICAgICAgICByZWFkPXNlbGYucmVhZCwKICAgICAgICAgICAgcmVkaXJlY3Q9c2VsZi5yZWRpcmVjdCwKICAgICAgICAgICAgc3RhdHVzPXNlbGYuc3RhdHVzLAogICAgICAgICAgICBvdGhlcj1zZWxmLm90aGVyLAogICAgICAgICAgICBzdGF0dXNfZm9yY2VsaXN0PXNlbGYuc3RhdHVzX2ZvcmNlbGlzdCwKICAgICAgICAgICAgYmFja29mZl9mYWN0b3I9c2VsZi5iYWNrb2ZmX2ZhY3RvciwKICAgICAgICAgICAgcmFpc2Vfb25fcmVkaXJlY3Q9c2VsZi5yYWlzZV9vbl9yZWRpcmVjdCwKICAgICAgICAgICAgcmFpc2Vfb25fc3RhdHVzPXNlbGYucmFpc2Vfb25fc3RhdHVzLAogICAgICAgICAgICBoaXN0b3J5PXNlbGYuaGlzdG9yeSwKICAgICAgICAgICAgcmVtb3ZlX2hlYWRlcnNfb25fcmVkaXJlY3Q9c2VsZi5yZW1vdmVfaGVhZGVyc19vbl9yZWRpcmVjdCwKICAgICAgICAgICAgcmVzcGVjdF9yZXRyeV9hZnRlcl9oZWFkZXI9c2VsZi5yZXNwZWN0X3JldHJ5X2FmdGVyX2hlYWRlciwKICAgICAgICApCgogICAgICAgICMgVE9ETzogSWYgYWxyZWFkeSBnaXZlbiBpbiAqKmt3IHdlIHVzZSB3aGF0J3MgZ2l2ZW4gdG8gdXMKICAgICAgICAjIElmIG5vdCBnaXZlbiB3ZSBuZWVkIHRvIGZpZ3VyZSBvdXQgd2hhdCB0byBwYXNzLiBXZSBkZWNpZGUKICAgICAgICAjIGJhc2VkIG9uIHdoZXRoZXIgb3VyIGNsYXNzIGhhcyB0aGUgJ21ldGhvZF93aGl0ZWxpc3QnIHByb3BlcnR5CiAgICAgICAgIyBhbmQgaWYgc28gd2UgcGFzcyB0aGUgZGVwcmVjYXRlZCAnbWV0aG9kX3doaXRlbGlzdCcgb3RoZXJ3aXNlCiAgICAgICAgIyB3ZSB1c2UgJ2FsbG93ZWRfbWV0aG9kcycuIFJlbW92ZSBpbiB2Mi4wCiAgICAgICAgaWYgXCJtZXRob2Rfd2hpdGVsaXN0XCIgbm90IGluIGt3IGFuZCBcImFsbG93ZWRfbWV0aG9kc1wiIG5vdCBpbiBrdzoKICAgICAgICAgICAgaWYgXCJtZXRob2Rfd2hpdGVsaXN0XCIgaW4gc2VsZi5fX2RpY3RfXzoKICAgICAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oCiAgICAgICAgICAgICAgICAgICAgXCJVc2luZyAnbWV0aG9kX3doaXRlbGlzdCcgd2l0aCBSZXRyeSBpcyBkZXByZWNhdGVkIGFuZCBcIgogICAgICAgICAgICAgICAgICAgIFwid2lsbCBiZSByZW1vdmVkIGluIHYyLjAuIFVzZSAnYWxsb3dlZF9tZXRob2RzJyBpbnN0ZWFkXCIsCiAgICAgICAgICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgcGFyYW1zW1wibWV0aG9kX3doaXRlbGlzdFwiXSA9IHNlbGYuYWxsb3dlZF9tZXRob2RzCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwYXJhbXNbXCJhbGxvd2VkX21ldGhvZHNcIl0gPSBzZWxmLmFsbG93ZWRfbWV0aG9kcwoKICAgICAgICBwYXJhbXMudXBkYXRlKGt3KQogICAgICAgIHJldHVybiB0eXBlKHNlbGYpKCoqcGFyYW1zKQoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIGZyb21faW50KGNscywgcmV0cmllcywgcmVkaXJlY3Q9VHJ1ZSwgZGVmYXVsdD1Ob25lKToKICAgICAgICBcIlwiXCJCYWNrd2FyZHMtY29tcGF0aWJpbGl0eSBmb3IgdGhlIG9sZCByZXRyaWVzIGZvcm1hdC5cIlwiXCIKICAgICAgICBpZiByZXRyaWVzIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHJpZXMgPSBkZWZhdWx0IGlmIGRlZmF1bHQgaXMgbm90IE5vbmUgZWxzZSBjbHMuREVGQVVMVAoKICAgICAgICBpZiBpc2luc3RhbmNlKHJldHJpZXMsIFJldHJ5KToKICAgICAgICAgICAgcmV0dXJuIHJldHJpZXMKCiAgICAgICAgcmVkaXJlY3QgPSBib29sKHJlZGlyZWN0KSBhbmQgTm9uZQogICAgICAgIG5ld19yZXRyaWVzID0gY2xzKHJldHJpZXMsIHJlZGlyZWN0PXJlZGlyZWN0KQogICAgICAgIGxvZy5kZWJ1ZyhcIkNvbnZlcnRlZCByZXRyaWVzIHZhbHVlOiAlciAtPiAlclwiLCByZXRyaWVzLCBuZXdfcmV0cmllcykKICAgICAgICByZXR1cm4gbmV3X3JldHJpZXMKCiAgICBkZWYgZ2V0X2JhY2tvZmZfdGltZShzZWxmKToKICAgICAgICBcIlwiXCJGb3JtdWxhIGZvciBjb21wdXRpbmcgdGhlIGN1cnJlbnQgYmFja29mZgoKICAgICAgICA6cnR5cGU6IGZsb2F0CiAgICAgICAgXCJcIlwiCiAgICAgICAgIyBXZSB3YW50IHRvIGNvbnNpZGVyIG9ubHkgdGhlIGxhc3QgY29uc2VjdXRpdmUgZXJyb3JzIHNlcXVlbmNlIChJZ25vcmUgcmVkaXJlY3RzKS4KICAgICAgICBjb25zZWN1dGl2ZV9lcnJvcnNfbGVuID0gbGVuKAogICAgICAgICAgICBsaXN0KAogICAgICAgICAgICAgICAgdGFrZXdoaWxlKGxhbWJkYSB4OiB4LnJlZGlyZWN0X2xvY2F0aW9uIGlzIE5vbmUsIHJldmVyc2VkKHNlbGYuaGlzdG9yeSkpCiAgICAgICAgICAgICkKICAgICAgICApCiAgICAgICAgaWYgY29uc2VjdXRpdmVfZXJyb3JzX2xlbiA8PSAxOgogICAgICAgICAgICByZXR1cm4gMAoKICAgICAgICBiYWNrb2ZmX3ZhbHVlID0gc2VsZi5iYWNrb2ZmX2ZhY3RvciAqICgyICoqIChjb25zZWN1dGl2ZV9lcnJvcnNfbGVuIC0gMSkpCiAgICAgICAgcmV0dXJuIG1pbihzZWxmLkRFRkFVTFRfQkFDS09GRl9NQVgsIGJhY2tvZmZfdmFsdWUpCgogICAgZGVmIHBhcnNlX3JldHJ5X2FmdGVyKHNlbGYsIHJldHJ5X2FmdGVyKToKICAgICAgICAjIFdoaXRlc3BhY2U6IGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM3MjMwI3NlY3Rpb24tMy4yLjQKICAgICAgICBpZiByZS5tYXRjaChyXCJeXFxzKlswLTldK1xccyokXCIsIHJldHJ5X2FmdGVyKToKICAgICAgICAgICAgc2Vjb25kcyA9IGludChyZXRyeV9hZnRlcikKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXRyeV9kYXRlX3R1cGxlID0gZW1haWwudXRpbHMucGFyc2VkYXRlX3R6KHJldHJ5X2FmdGVyKQogICAgICAgICAgICBpZiByZXRyeV9kYXRlX3R1cGxlIGlzIE5vbmU6CiAgICAgICAgICAgICAgICByYWlzZSBJbnZhbGlkSGVhZGVyKFwiSW52YWxpZCBSZXRyeS1BZnRlciBoZWFkZXI6ICVzXCIgJSByZXRyeV9hZnRlcikKICAgICAgICAgICAgaWYgcmV0cnlfZGF0ZV90dXBsZVs5XSBpcyBOb25lOiAgIyBQeXRob24gMgogICAgICAgICAgICAgICAgIyBBc3N1bWUgVVRDIGlmIG5vIHRpbWV6b25lIHdhcyBzcGVjaWZpZWQKICAgICAgICAgICAgICAgICMgT24gUHl0aG9uMi43LCBwYXJzZWRhdGVfdHogcmV0dXJucyBOb25lIGZvciBhIHRpbWV6b25lIG9mZnNldAogICAgICAgICAgICAgICAgIyBpbnN0ZWFkIG9mIDAgaWYgbm8gdGltZXpvbmUgaXMgZ2l2ZW4sIHdoZXJlIG1rdGltZV90eiB0cmVhdHMKICAgICAgICAgICAgICAgICMgYSBOb25lIHRpbWV6b25lIG9mZnNldCBhcyBsb2NhbCB0aW1lLgogICAgICAgICAgICAgICAgcmV0cnlfZGF0ZV90dXBsZSA9IHJldHJ5X2RhdGVfdHVwbGVbOjldICsgKDAsKSArIHJldHJ5X2RhdGVfdHVwbGVbMTA6XQoKICAgICAgICAgICAgcmV0cnlfZGF0ZSA9IGVtYWlsLnV0aWxzLm1rdGltZV90eihyZXRyeV9kYXRlX3R1cGxlKQogICAgICAgICAgICBzZWNvbmRzID0gcmV0cnlfZGF0ZSAtIHRpbWUudGltZSgpCgogICAgICAgIGlmIHNlY29uZHMgPCAwOgogICAgICAgICAgICBzZWNvbmRzID0gMAoKICAgICAgICByZXR1cm4gc2Vjb25kcwoKICAgIGRlZiBnZXRfcmV0cnlfYWZ0ZXIoc2VsZiwgcmVzcG9uc2UpOgogICAgICAgIFwiXCJcIkdldCB0aGUgdmFsdWUgb2YgUmV0cnktQWZ0ZXIgaW4gc2Vjb25kcy5cIlwiXCIKCiAgICAgICAgcmV0cnlfYWZ0ZXIgPSByZXNwb25zZS5nZXRoZWFkZXIoXCJSZXRyeS1BZnRlclwiKQoKICAgICAgICBpZiByZXRyeV9hZnRlciBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgICAgICByZXR1cm4gc2VsZi5wYXJzZV9yZXRyeV9hZnRlcihyZXRyeV9hZnRlcikKCiAgICBkZWYgc2xlZXBfZm9yX3JldHJ5KHNlbGYsIHJlc3BvbnNlPU5vbmUpOgogICAgICAgIHJldHJ5X2FmdGVyID0gc2VsZi5nZXRfcmV0cnlfYWZ0ZXIocmVzcG9uc2UpCiAgICAgICAgaWYgcmV0cnlfYWZ0ZXI6CiAgICAgICAgICAgIHRpbWUuc2xlZXAocmV0cnlfYWZ0ZXIpCiAgICAgICAgICAgIHJldHVybiBUcnVlCgogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBfc2xlZXBfYmFja29mZihzZWxmKToKICAgICAgICBiYWNrb2ZmID0gc2VsZi5nZXRfYmFja29mZl90aW1lKCkKICAgICAgICBpZiBiYWNrb2ZmIDw9IDA6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIHRpbWUuc2xlZXAoYmFja29mZikKCiAgICBkZWYgc2xlZXAoc2VsZiwgcmVzcG9uc2U9Tm9uZSk6CiAgICAgICAgXCJcIlwiU2xlZXAgYmV0d2VlbiByZXRyeSBhdHRlbXB0cy4KCiAgICAgICAgVGhpcyBtZXRob2Qgd2lsbCByZXNwZWN0IGEgc2VydmVyJ3MgYGBSZXRyeS1BZnRlcmBgIHJlc3BvbnNlIGhlYWRlcgogICAgICAgIGFuZCBzbGVlcCB0aGUgZHVyYXRpb24gb2YgdGhlIHRpbWUgcmVxdWVzdGVkLiBJZiB0aGF0IGlzIG5vdCBwcmVzZW50LCBpdAogICAgICAgIHdpbGwgdXNlIGFuIGV4cG9uZW50aWFsIGJhY2tvZmYuIEJ5IGRlZmF1bHQsIHRoZSBiYWNrb2ZmIGZhY3RvciBpcyAwIGFuZAogICAgICAgIHRoaXMgbWV0aG9kIHdpbGwgcmV0dXJuIGltbWVkaWF0ZWx5LgogICAgICAgIFwiXCJcIgoKICAgICAgICBpZiBzZWxmLnJlc3BlY3RfcmV0cnlfYWZ0ZXJfaGVhZGVyIGFuZCByZXNwb25zZToKICAgICAgICAgICAgc2xlcHQgPSBzZWxmLnNsZWVwX2Zvcl9yZXRyeShyZXNwb25zZSkKICAgICAgICAgICAgaWYgc2xlcHQ6CiAgICAgICAgICAgICAgICByZXR1cm4KCiAgICAgICAgc2VsZi5fc2xlZXBfYmFja29mZigpCgogICAgZGVmIF9pc19jb25uZWN0aW9uX2Vycm9yKHNlbGYsIGVycik6CiAgICAgICAgXCJcIlwiRXJyb3JzIHdoZW4gd2UncmUgZmFpcmx5IHN1cmUgdGhhdCB0aGUgc2VydmVyIGRpZCBub3QgcmVjZWl2ZSB0aGUKICAgICAgICByZXF1ZXN0LCBzbyBpdCBzaG91bGQgYmUgc2FmZSB0byByZXRyeS4KICAgICAgICBcIlwiXCIKICAgICAgICBpZiBpc2luc3RhbmNlKGVyciwgUHJveHlFcnJvcik6CiAgICAgICAgICAgIGVyciA9IGVyci5vcmlnaW5hbF9lcnJvcgogICAgICAgIHJldHVybiBpc2luc3RhbmNlKGVyciwgQ29ubmVjdFRpbWVvdXRFcnJvcikKCiAgICBkZWYgX2lzX3JlYWRfZXJyb3Ioc2VsZiwgZXJyKToKICAgICAgICBcIlwiXCJFcnJvcnMgdGhhdCBvY2N1ciBhZnRlciB0aGUgcmVxdWVzdCBoYXMgYmVlbiBzdGFydGVkLCBzbyB3ZSBzaG91bGQKICAgICAgICBhc3N1bWUgdGhhdCB0aGUgc2VydmVyIGJlZ2FuIHByb2Nlc3NpbmcgaXQuCiAgICAgICAgXCJcIlwiCiAgICAgICAgcmV0dXJuIGlzaW5zdGFuY2UoZXJyLCAoUmVhZFRpbWVvdXRFcnJvciwgUHJvdG9jb2xFcnJvcikpCgogICAgZGVmIF9pc19tZXRob2RfcmV0cnlhYmxlKHNlbGYsIG1ldGhvZCk6CiAgICAgICAgXCJcIlwiQ2hlY2tzIGlmIGEgZ2l2ZW4gSFRUUCBtZXRob2Qgc2hvdWxkIGJlIHJldHJpZWQgdXBvbiwgZGVwZW5kaW5nIGlmCiAgICAgICAgaXQgaXMgaW5jbHVkZWQgaW4gdGhlIGFsbG93ZWRfbWV0aG9kcwogICAgICAgIFwiXCJcIgogICAgICAgICMgVE9ETzogRm9yIG5vdyBmYXZvciBpZiB0aGUgUmV0cnkgaW1wbGVtZW50YXRpb24gc2V0cyBpdHMgb3duIG1ldGhvZF93aGl0ZWxpc3QKICAgICAgICAjIHByb3BlcnR5IG91dHNpZGUgb2Ygb3VyIGNvbnN0cnVjdG9yIHRvIGF2b2lkIGJyZWFraW5nIGN1c3RvbSBpbXBsZW1lbnRhdGlvbnMuCiAgICAgICAgaWYgXCJtZXRob2Rfd2hpdGVsaXN0XCIgaW4gc2VsZi5fX2RpY3RfXzoKICAgICAgICAgICAgd2FybmluZ3Mud2FybigKICAgICAgICAgICAgICAgIFwiVXNpbmcgJ21ldGhvZF93aGl0ZWxpc3QnIHdpdGggUmV0cnkgaXMgZGVwcmVjYXRlZCBhbmQgXCIKICAgICAgICAgICAgICAgIFwid2lsbCBiZSByZW1vdmVkIGluIHYyLjAuIFVzZSAnYWxsb3dlZF9tZXRob2RzJyBpbnN0ZWFkXCIsCiAgICAgICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsCiAgICAgICAgICAgICkKICAgICAgICAgICAgYWxsb3dlZF9tZXRob2RzID0gc2VsZi5tZXRob2Rfd2hpdGVsaXN0CiAgICAgICAgZWxzZToKICAgICAgICAgICAgYWxsb3dlZF9tZXRob2RzID0gc2VsZi5hbGxvd2VkX21ldGhvZHMKCiAgICAgICAgaWYgYWxsb3dlZF9tZXRob2RzIGFuZCBtZXRob2QudXBwZXIoKSBub3QgaW4gYWxsb3dlZF9tZXRob2RzOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIGRlZiBpc19yZXRyeShzZWxmLCBtZXRob2QsIHN0YXR1c19jb2RlLCBoYXNfcmV0cnlfYWZ0ZXI9RmFsc2UpOgogICAgICAgIFwiXCJcIklzIHRoaXMgbWV0aG9kL3N0YXR1cyBjb2RlIHJldHJ5YWJsZT8gKEJhc2VkIG9uIGFsbG93bGlzdHMgYW5kIGNvbnRyb2wKICAgICAgICB2YXJpYWJsZXMgc3VjaCBhcyB0aGUgbnVtYmVyIG9mIHRvdGFsIHJldHJpZXMgdG8gYWxsb3csIHdoZXRoZXIgdG8KICAgICAgICByZXNwZWN0IHRoZSBSZXRyeS1BZnRlciBoZWFkZXIsIHdoZXRoZXIgdGhpcyBoZWFkZXIgaXMgcHJlc2VudCwgYW5kCiAgICAgICAgd2hldGhlciB0aGUgcmV0dXJuZWQgc3RhdHVzIGNvZGUgaXMgb24gdGhlIGxpc3Qgb2Ygc3RhdHVzIGNvZGVzIHRvCiAgICAgICAgYmUgcmV0cmllZCB1cG9uIG9uIHRoZSBwcmVzZW5jZSBvZiB0aGUgYWZvcmVtZW50aW9uZWQgaGVhZGVyKQogICAgICAgIFwiXCJcIgogICAgICAgIGlmIG5vdCBzZWxmLl9pc19tZXRob2RfcmV0cnlhYmxlKG1ldGhvZCk6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICBpZiBzZWxmLnN0YXR1c19mb3JjZWxpc3QgYW5kIHN0YXR1c19jb2RlIGluIHNlbGYuc3RhdHVzX2ZvcmNlbGlzdDoKICAgICAgICAgICAgcmV0dXJuIFRydWUKCiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgc2VsZi50b3RhbAogICAgICAgICAgICBhbmQgc2VsZi5yZXNwZWN0X3JldHJ5X2FmdGVyX2hlYWRlcgogICAgICAgICAgICBhbmQgaGFzX3JldHJ5X2FmdGVyCiAgICAgICAgICAgIGFuZCAoc3RhdHVzX2NvZGUgaW4gc2VsZi5SRVRSWV9BRlRFUl9TVEFUVVNfQ09ERVMpCiAgICAgICAgKQoKICAgIGRlZiBpc19leGhhdXN0ZWQoc2VsZik6CiAgICAgICAgXCJcIlwiQXJlIHdlIG91dCBvZiByZXRyaWVzP1wiXCJcIgogICAgICAgIHJldHJ5X2NvdW50cyA9ICgKICAgICAgICAgICAgc2VsZi50b3RhbCwKICAgICAgICAgICAgc2VsZi5jb25uZWN0LAogICAgICAgICAgICBzZWxmLnJlYWQsCiAgICAgICAgICAgIHNlbGYucmVkaXJlY3QsCiAgICAgICAgICAgIHNlbGYuc3RhdHVzLAogICAgICAgICAgICBzZWxmLm90aGVyLAogICAgICAgICkKICAgICAgICByZXRyeV9jb3VudHMgPSBsaXN0KGZpbHRlcihOb25lLCByZXRyeV9jb3VudHMpKQogICAgICAgIGlmIG5vdCByZXRyeV9jb3VudHM6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICByZXR1cm4gbWluKHJldHJ5X2NvdW50cykgPCAwCgogICAgZGVmIGluY3JlbWVudCgKICAgICAgICBzZWxmLAogICAgICAgIG1ldGhvZD1Ob25lLAogICAgICAgIHVybD1Ob25lLAogICAgICAgIHJlc3BvbnNlPU5vbmUsCiAgICAgICAgZXJyb3I9Tm9uZSwKICAgICAgICBfcG9vbD1Ob25lLAogICAgICAgIF9zdGFja3RyYWNlPU5vbmUsCiAgICApOgogICAgICAgIFwiXCJcIlJldHVybiBhIG5ldyBSZXRyeSBvYmplY3Qgd2l0aCBpbmNyZW1lbnRlZCByZXRyeSBjb3VudGVycy4KCiAgICAgICAgOnBhcmFtIHJlc3BvbnNlOiBBIHJlc3BvbnNlIG9iamVjdCwgb3IgTm9uZSwgaWYgdGhlIHNlcnZlciBkaWQgbm90CiAgICAgICAgICAgIHJldHVybiBhIHJlc3BvbnNlLgogICAgICAgIDp0eXBlIHJlc3BvbnNlOiA6Y2xhc3M6YH51cmxsaWIzLnJlc3BvbnNlLkhUVFBSZXNwb25zZWAKICAgICAgICA6cGFyYW0gRXhjZXB0aW9uIGVycm9yOiBBbiBlcnJvciBlbmNvdW50ZXJlZCBkdXJpbmcgdGhlIHJlcXVlc3QsIG9yCiAgICAgICAgICAgIE5vbmUgaWYgdGhlIHJlc3BvbnNlIHdhcyByZWNlaXZlZCBzdWNjZXNzZnVsbHkuCgogICAgICAgIDpyZXR1cm46IEEgbmV3IGBgUmV0cnlgYCBvYmplY3QuCiAgICAgICAgXCJcIlwiCiAgICAgICAgaWYgc2VsZi50b3RhbCBpcyBGYWxzZSBhbmQgZXJyb3I6CiAgICAgICAgICAgICMgRGlzYWJsZWQsIGluZGljYXRlIHRvIHJlLXJhaXNlIHRoZSBlcnJvci4KICAgICAgICAgICAgcmFpc2Ugc2l4LnJlcmFpc2UodHlwZShlcnJvciksIGVycm9yLCBfc3RhY2t0cmFjZSkKCiAgICAgICAgdG90YWwgPSBzZWxmLnRvdGFsCiAgICAgICAgaWYgdG90YWwgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHRvdGFsIC09IDEKCiAgICAgICAgY29ubmVjdCA9IHNlbGYuY29ubmVjdAogICAgICAgIHJlYWQgPSBzZWxmLnJlYWQKICAgICAgICByZWRpcmVjdCA9IHNlbGYucmVkaXJlY3QKICAgICAgICBzdGF0dXNfY291bnQgPSBzZWxmLnN0YXR1cwogICAgICAgIG90aGVyID0gc2VsZi5vdGhlcgogICAgICAgIGNhdXNlID0gXCJ1bmtub3duXCIKICAgICAgICBzdGF0dXMgPSBOb25lCiAgICAgICAgcmVkaXJlY3RfbG9jYXRpb24gPSBOb25lCgogICAgICAgIGlmIGVycm9yIGFuZCBzZWxmLl9pc19jb25uZWN0aW9uX2Vycm9yKGVycm9yKToKICAgICAgICAgICAgIyBDb25uZWN0IHJldHJ5PwogICAgICAgICAgICBpZiBjb25uZWN0IGlzIEZhbHNlOgogICAgICAgICAgICAgICAgcmFpc2Ugc2l4LnJlcmFpc2UodHlwZShlcnJvciksIGVycm9yLCBfc3RhY2t0cmFjZSkKICAgICAgICAgICAgZWxpZiBjb25uZWN0IGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgY29ubmVjdCAtPSAxCgogICAgICAgIGVsaWYgZXJyb3IgYW5kIHNlbGYuX2lzX3JlYWRfZXJyb3IoZXJyb3IpOgogICAgICAgICAgICAjIFJlYWQgcmV0cnk/CiAgICAgICAgICAgIGlmIHJlYWQgaXMgRmFsc2Ugb3Igbm90IHNlbGYuX2lzX21ldGhvZF9yZXRyeWFibGUobWV0aG9kKToKICAgICAgICAgICAgICAgIHJhaXNlIHNpeC5yZXJhaXNlKHR5cGUoZXJyb3IpLCBlcnJvciwgX3N0YWNrdHJhY2UpCiAgICAgICAgICAgIGVsaWYgcmVhZCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHJlYWQgLT0gMQoKICAgICAgICBlbGlmIGVycm9yOgogICAgICAgICAgICAjIE90aGVyIHJldHJ5PwogICAgICAgICAgICBpZiBvdGhlciBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIG90aGVyIC09IDEKCiAgICAgICAgZWxpZiByZXNwb25zZSBhbmQgcmVzcG9uc2UuZ2V0X3JlZGlyZWN0X2xvY2F0aW9uKCk6CiAgICAgICAgICAgICMgUmVkaXJlY3QgcmV0cnk/CiAgICAgICAgICAgIGlmIHJlZGlyZWN0IGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgcmVkaXJlY3QgLT0gMQogICAgICAgICAgICBjYXVzZSA9IFwidG9vIG1hbnkgcmVkaXJlY3RzXCIKICAgICAgICAgICAgcmVkaXJlY3RfbG9jYXRpb24gPSByZXNwb25zZS5nZXRfcmVkaXJlY3RfbG9jYXRpb24oKQogICAgICAgICAgICBzdGF0dXMgPSByZXNwb25zZS5zdGF0dXMKCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyBJbmNyZW1lbnRpbmcgYmVjYXVzZSBvZiBhIHNlcnZlciBlcnJvciBsaWtlIGEgNTAwIGluCiAgICAgICAgICAgICMgc3RhdHVzX2ZvcmNlbGlzdCBhbmQgdGhlIGdpdmVuIG1ldGhvZCBpcyBpbiB0aGUgYWxsb3dlZF9tZXRob2RzCiAgICAgICAgICAgIGNhdXNlID0gUmVzcG9uc2VFcnJvci5HRU5FUklDX0VSUk9SCiAgICAgICAgICAgIGlmIHJlc3BvbnNlIGFuZCByZXNwb25zZS5zdGF0dXM6CiAgICAgICAgICAgICAgICBpZiBzdGF0dXNfY291bnQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzX2NvdW50IC09IDEKICAgICAgICAgICAgICAgIGNhdXNlID0gUmVzcG9uc2VFcnJvci5TUEVDSUZJQ19FUlJPUi5mb3JtYXQoc3RhdHVzX2NvZGU9cmVzcG9uc2Uuc3RhdHVzKQogICAgICAgICAgICAgICAgc3RhdHVzID0gcmVzcG9uc2Uuc3RhdHVzCgogICAgICAgIGhpc3RvcnkgPSBzZWxmLmhpc3RvcnkgKyAoCiAgICAgICAgICAgIFJlcXVlc3RIaXN0b3J5KG1ldGhvZCwgdXJsLCBlcnJvciwgc3RhdHVzLCByZWRpcmVjdF9sb2NhdGlvbiksCiAgICAgICAgKQoKICAgICAgICBuZXdfcmV0cnkgPSBzZWxmLm5ldygKICAgICAgICAgICAgdG90YWw9dG90YWwsCiAgICAgICAgICAgIGNvbm5lY3Q9Y29ubmVjdCwKICAgICAgICAgICAgcmVhZD1yZWFkLAogICAgICAgICAgICByZWRpcmVjdD1yZWRpcmVjdCwKICAgICAgICAgICAgc3RhdHVzPXN0YXR1c19jb3VudCwKICAgICAgICAgICAgb3RoZXI9b3RoZXIsCiAgICAgICAgICAgIGhpc3Rvcnk9aGlzdG9yeSwKICAgICAgICApCgogICAgICAgIGlmIG5ld19yZXRyeS5pc19leGhhdXN0ZWQoKToKICAgICAgICAgICAgcmFpc2UgTWF4UmV0cnlFcnJvcihfcG9vbCwgdXJsLCBlcnJvciBvciBSZXNwb25zZUVycm9yKGNhdXNlKSkKCiAgICAgICAgbG9nLmRlYnVnKFwiSW5jcmVtZW50ZWQgUmV0cnkgZm9yICh1cmw9JyVzJyk6ICVyXCIsIHVybCwgbmV3X3JldHJ5KQoKICAgICAgICByZXR1cm4gbmV3X3JldHJ5CgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIFwie2Nscy5fX25hbWVfX30odG90YWw9e3NlbGYudG90YWx9LCBjb25uZWN0PXtzZWxmLmNvbm5lY3R9LCBcIgogICAgICAgICAgICBcInJlYWQ9e3NlbGYucmVhZH0sIHJlZGlyZWN0PXtzZWxmLnJlZGlyZWN0fSwgc3RhdHVzPXtzZWxmLnN0YXR1c30pXCIKICAgICAgICApLmZvcm1hdChjbHM9dHlwZShzZWxmKSwgc2VsZj1zZWxmKQoKICAgIGRlZiBfX2dldGF0dHJfXyhzZWxmLCBpdGVtKToKICAgICAgICBpZiBpdGVtID09IFwibWV0aG9kX3doaXRlbGlzdFwiOgogICAgICAgICAgICAjIFRPRE86IFJlbW92ZSB0aGlzIGRlcHJlY2F0ZWQgYWxpYXMgaW4gdjIuMAogICAgICAgICAgICB3YXJuaW5ncy53YXJuKAogICAgICAgICAgICAgICAgXCJVc2luZyAnbWV0aG9kX3doaXRlbGlzdCcgd2l0aCBSZXRyeSBpcyBkZXByZWNhdGVkIGFuZCBcIgogICAgICAgICAgICAgICAgXCJ3aWxsIGJlIHJlbW92ZWQgaW4gdjIuMC4gVXNlICdhbGxvd2VkX21ldGhvZHMnIGluc3RlYWRcIiwKICAgICAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZywKICAgICAgICAgICAgKQogICAgICAgICAgICByZXR1cm4gc2VsZi5hbGxvd2VkX21ldGhvZHMKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJldHVybiBnZXRhdHRyKHN1cGVyKFJldHJ5LCBzZWxmKSwgaXRlbSkKICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgICAgIHJldHVybiBnZXRhdHRyKFJldHJ5LCBpdGVtKQoKCiMgRm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IChlcXVpdmFsZW50IHRvIHByZS12MS45KToKUmV0cnkuREVGQVVMVCA9IFJldHJ5KDMpCgoiIiIKbW9kdWxlX2RpY3RbInVybGxpYjMiK29zLnNlcCsidXRpbCIrb3Muc2VwKyJyZXF1ZXN0LnB5Il09IiIiCmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYWJzb2x1dGVfaW1wb3J0CiMgPCBpbmNsdWRlICdicm90bGljZmZpLnB5JyA+CgojIDwgaW5jbHVkZSAnYnJvdGxpLnB5JyA+CgoKZnJvbSBiYXNlNjQgaW1wb3J0IGI2NGVuY29kZQoKZnJvbSAuLmV4Y2VwdGlvbnMgaW1wb3J0IFVucmV3aW5kYWJsZUJvZHlFcnJvcgpmcm9tIC4ucGFja2FnZXMuc2l4IGltcG9ydCBiLCBpbnRlZ2VyX3R5cGVzCgojIFBhc3MgYXMgYSB2YWx1ZSB3aXRoaW4gYGBoZWFkZXJzYGAgdG8gc2tpcAojIGVtaXR0aW5nIHNvbWUgSFRUUCBoZWFkZXJzIHRoYXQgYXJlIGFkZGVkIGF1dG9tYXRpY2FsbHkuCiMgVGhlIG9ubHkgaGVhZGVycyB0aGF0IGFyZSBzdXBwb3J0ZWQgYXJlIGBgQWNjZXB0LUVuY29kaW5nYGAsCiMgYGBIb3N0YGAsIGFuZCBgYFVzZXItQWdlbnRgYC4KU0tJUF9IRUFERVIgPSBcIkBAQFNLSVBfSEVBREVSQEBAXCIKU0tJUFBBQkxFX0hFQURFUlMgPSBmcm96ZW5zZXQoW1wiYWNjZXB0LWVuY29kaW5nXCIsIFwiaG9zdFwiLCBcInVzZXItYWdlbnRcIl0pCgpBQ0NFUFRfRU5DT0RJTkcgPSBcImd6aXAsZGVmbGF0ZVwiCnRyeToKICAgIHRyeToKICAgICAgICBpbXBvcnQgYnJvdGxpY2ZmaSBhcyBfdW51c2VkX21vZHVsZV9icm90bGkgICMgbm9xYTogRjQwMQogICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgIGltcG9ydCBicm90bGkgYXMgX3VudXNlZF9tb2R1bGVfYnJvdGxpICAjIG5vcWE6IEY0MDEKZXhjZXB0IEltcG9ydEVycm9yOgogICAgcGFzcwplbHNlOgogICAgQUNDRVBUX0VOQ09ESU5HICs9IFwiLGJyXCIKCl9GQUlMRURURUxMID0gb2JqZWN0KCkKCgpkZWYgbWFrZV9oZWFkZXJzKAogICAga2VlcF9hbGl2ZT1Ob25lLAogICAgYWNjZXB0X2VuY29kaW5nPU5vbmUsCiAgICB1c2VyX2FnZW50PU5vbmUsCiAgICBiYXNpY19hdXRoPU5vbmUsCiAgICBwcm94eV9iYXNpY19hdXRoPU5vbmUsCiAgICBkaXNhYmxlX2NhY2hlPU5vbmUsCik6CiAgICBcIlwiXCIKICAgIFNob3J0Y3V0cyBmb3IgZ2VuZXJhdGluZyByZXF1ZXN0IGhlYWRlcnMuCgogICAgOnBhcmFtIGtlZXBfYWxpdmU6CiAgICAgICAgSWYgYGBUcnVlYGAsIGFkZHMgJ2Nvbm5lY3Rpb246IGtlZXAtYWxpdmUnIGhlYWRlci4KCiAgICA6cGFyYW0gYWNjZXB0X2VuY29kaW5nOgogICAgICAgIENhbiBiZSBhIGJvb2xlYW4sIGxpc3QsIG9yIHN0cmluZy4KICAgICAgICBgYFRydWVgYCB0cmFuc2xhdGVzIHRvICdnemlwLGRlZmxhdGUnLgogICAgICAgIExpc3Qgd2lsbCBnZXQgam9pbmVkIGJ5IGNvbW1hLgogICAgICAgIFN0cmluZyB3aWxsIGJlIHVzZWQgYXMgcHJvdmlkZWQuCgogICAgOnBhcmFtIHVzZXJfYWdlbnQ6CiAgICAgICAgU3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdXNlci1hZ2VudCB5b3Ugd2FudCwgc3VjaCBhcwogICAgICAgIFwicHl0aG9uLXVybGxpYjMvMC42XCIKCiAgICA6cGFyYW0gYmFzaWNfYXV0aDoKICAgICAgICBDb2xvbi1zZXBhcmF0ZWQgdXNlcm5hbWU6cGFzc3dvcmQgc3RyaW5nIGZvciAnYXV0aG9yaXphdGlvbjogYmFzaWMgLi4uJwogICAgICAgIGF1dGggaGVhZGVyLgoKICAgIDpwYXJhbSBwcm94eV9iYXNpY19hdXRoOgogICAgICAgIENvbG9uLXNlcGFyYXRlZCB1c2VybmFtZTpwYXNzd29yZCBzdHJpbmcgZm9yICdwcm94eS1hdXRob3JpemF0aW9uOiBiYXNpYyAuLi4nCiAgICAgICAgYXV0aCBoZWFkZXIuCgogICAgOnBhcmFtIGRpc2FibGVfY2FjaGU6CiAgICAgICAgSWYgYGBUcnVlYGAsIGFkZHMgJ2NhY2hlLWNvbnRyb2w6IG5vLWNhY2hlJyBoZWFkZXIuCgogICAgRXhhbXBsZTo6CgogICAgICAgID4+PiBtYWtlX2hlYWRlcnMoa2VlcF9hbGl2ZT1UcnVlLCB1c2VyX2FnZW50PVwiQmF0bWFuLzEuMFwiKQogICAgICAgIHsnY29ubmVjdGlvbic6ICdrZWVwLWFsaXZlJywgJ3VzZXItYWdlbnQnOiAnQmF0bWFuLzEuMCd9CiAgICAgICAgPj4+IG1ha2VfaGVhZGVycyhhY2NlcHRfZW5jb2Rpbmc9VHJ1ZSkKICAgICAgICB7J2FjY2VwdC1lbmNvZGluZyc6ICdnemlwLGRlZmxhdGUnfQogICAgXCJcIlwiCiAgICBoZWFkZXJzID0ge30KICAgIGlmIGFjY2VwdF9lbmNvZGluZzoKICAgICAgICBpZiBpc2luc3RhbmNlKGFjY2VwdF9lbmNvZGluZywgc3RyKToKICAgICAgICAgICAgcGFzcwogICAgICAgIGVsaWYgaXNpbnN0YW5jZShhY2NlcHRfZW5jb2RpbmcsIGxpc3QpOgogICAgICAgICAgICBhY2NlcHRfZW5jb2RpbmcgPSBcIixcIi5qb2luKGFjY2VwdF9lbmNvZGluZykKICAgICAgICBlbHNlOgogICAgICAgICAgICBhY2NlcHRfZW5jb2RpbmcgPSBBQ0NFUFRfRU5DT0RJTkcKICAgICAgICBoZWFkZXJzW1wiYWNjZXB0LWVuY29kaW5nXCJdID0gYWNjZXB0X2VuY29kaW5nCgogICAgaWYgdXNlcl9hZ2VudDoKICAgICAgICBoZWFkZXJzW1widXNlci1hZ2VudFwiXSA9IHVzZXJfYWdlbnQKCiAgICBpZiBrZWVwX2FsaXZlOgogICAgICAgIGhlYWRlcnNbXCJjb25uZWN0aW9uXCJdID0gXCJrZWVwLWFsaXZlXCIKCiAgICBpZiBiYXNpY19hdXRoOgogICAgICAgIGhlYWRlcnNbXCJhdXRob3JpemF0aW9uXCJdID0gXCJCYXNpYyBcIiArIGI2NGVuY29kZShiKGJhc2ljX2F1dGgpKS5kZWNvZGUoXCJ1dGYtOFwiKQoKICAgIGlmIHByb3h5X2Jhc2ljX2F1dGg6CiAgICAgICAgaGVhZGVyc1tcInByb3h5LWF1dGhvcml6YXRpb25cIl0gPSBcIkJhc2ljIFwiICsgYjY0ZW5jb2RlKAogICAgICAgICAgICBiKHByb3h5X2Jhc2ljX2F1dGgpCiAgICAgICAgKS5kZWNvZGUoXCJ1dGYtOFwiKQoKICAgIGlmIGRpc2FibGVfY2FjaGU6CiAgICAgICAgaGVhZGVyc1tcImNhY2hlLWNvbnRyb2xcIl0gPSBcIm5vLWNhY2hlXCIKCiAgICByZXR1cm4gaGVhZGVycwoKCmRlZiBzZXRfZmlsZV9wb3NpdGlvbihib2R5LCBwb3MpOgogICAgXCJcIlwiCiAgICBJZiBhIHBvc2l0aW9uIGlzIHByb3ZpZGVkLCBtb3ZlIGZpbGUgdG8gdGhhdCBwb2ludC4KICAgIE90aGVyd2lzZSwgd2UnbGwgYXR0ZW1wdCB0byByZWNvcmQgYSBwb3NpdGlvbiBmb3IgZnV0dXJlIHVzZS4KICAgIFwiXCJcIgogICAgaWYgcG9zIGlzIG5vdCBOb25lOgogICAgICAgIHJld2luZF9ib2R5KGJvZHksIHBvcykKICAgIGVsaWYgZ2V0YXR0cihib2R5LCBcInRlbGxcIiwgTm9uZSkgaXMgbm90IE5vbmU6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBwb3MgPSBib2R5LnRlbGwoKQogICAgICAgIGV4Y2VwdCAoSU9FcnJvciwgT1NFcnJvcik6CiAgICAgICAgICAgICMgVGhpcyBkaWZmZXJlbnRpYXRlcyBmcm9tIE5vbmUsIGFsbG93aW5nIHVzIHRvIGNhdGNoCiAgICAgICAgICAgICMgYSBmYWlsZWQgYHRlbGwoKWAgbGF0ZXIgd2hlbiB0cnlpbmcgdG8gcmV3aW5kIHRoZSBib2R5LgogICAgICAgICAgICBwb3MgPSBfRkFJTEVEVEVMTAoKICAgIHJldHVybiBwb3MKCgpkZWYgcmV3aW5kX2JvZHkoYm9keSwgYm9keV9wb3MpOgogICAgXCJcIlwiCiAgICBBdHRlbXB0IHRvIHJld2luZCBib2R5IHRvIGEgY2VydGFpbiBwb3NpdGlvbi4KICAgIFByaW1hcmlseSB1c2VkIGZvciByZXF1ZXN0IHJlZGlyZWN0cyBhbmQgcmV0cmllcy4KCiAgICA6cGFyYW0gYm9keToKICAgICAgICBGaWxlLWxpa2Ugb2JqZWN0IHRoYXQgc3VwcG9ydHMgc2Vlay4KCiAgICA6cGFyYW0gaW50IHBvczoKICAgICAgICBQb3NpdGlvbiB0byBzZWVrIHRvIGluIGZpbGUuCiAgICBcIlwiXCIKICAgIGJvZHlfc2VlayA9IGdldGF0dHIoYm9keSwgXCJzZWVrXCIsIE5vbmUpCiAgICBpZiBib2R5X3NlZWsgaXMgbm90IE5vbmUgYW5kIGlzaW5zdGFuY2UoYm9keV9wb3MsIGludGVnZXJfdHlwZXMpOgogICAgICAgIHRyeToKICAgICAgICAgICAgYm9keV9zZWVrKGJvZHlfcG9zKQogICAgICAgIGV4Y2VwdCAoSU9FcnJvciwgT1NFcnJvcik6CiAgICAgICAgICAgIHJhaXNlIFVucmV3aW5kYWJsZUJvZHlFcnJvcigKICAgICAgICAgICAgICAgIFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hlbiByZXdpbmRpbmcgcmVxdWVzdCBib2R5IGZvciByZWRpcmVjdC9yZXRyeS5cIgogICAgICAgICAgICApCiAgICBlbGlmIGJvZHlfcG9zIGlzIF9GQUlMRURURUxMOgogICAgICAgIHJhaXNlIFVucmV3aW5kYWJsZUJvZHlFcnJvcigKICAgICAgICAgICAgXCJVbmFibGUgdG8gcmVjb3JkIGZpbGUgcG9zaXRpb24gZm9yIHJld2luZGluZyBcIgogICAgICAgICAgICBcInJlcXVlc3QgYm9keSBkdXJpbmcgYSByZWRpcmVjdC9yZXRyeS5cIgogICAgICAgICkKICAgIGVsc2U6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigKICAgICAgICAgICAgXCJib2R5X3BvcyBtdXN0IGJlIG9mIHR5cGUgaW50ZWdlciwgaW5zdGVhZCBpdCB3YXMgJXMuXCIgJSB0eXBlKGJvZHlfcG9zKQogICAgICAgICkKCiIiIgptb2R1bGVfZGljdFsidXJsbGliMyIrb3Muc2VwKyJ1dGlsIitvcy5zZXArInNzbF9tYXRjaF9ob3N0bmFtZS5weSJdPSIiIgpcIlwiXCJUaGUgbWF0Y2hfaG9zdG5hbWUoKSBmdW5jdGlvbiBmcm9tIFB5dGhvbiAzLjMuMywgZXNzZW50aWFsIHdoZW4gdXNpbmcgU1NMLlwiXCJcIgoKIyBOb3RlOiBUaGlzIGZpbGUgaXMgdW5kZXIgdGhlIFBTRiBsaWNlbnNlIGFzIHRoZSBjb2RlIGNvbWVzIGZyb20gdGhlIHB5dGhvbgojIHN0ZGxpYi4gICBodHRwOi8vZG9jcy5weXRob24ub3JnLzMvbGljZW5zZS5odG1sCgppbXBvcnQgcmUKaW1wb3J0IHN5cwoKIyBpcGFkZHJlc3MgaGFzIGJlZW4gYmFja3BvcnRlZCB0byAyLjYrIGluIHB5cGkuICBJZiBpdCBpcyBpbnN0YWxsZWQgb24gdGhlCiMgc3lzdGVtLCB1c2UgaXQgdG8gaGFuZGxlIElQQWRkcmVzcyBTZXJ2ZXJBbHRuYW1lcyAodGhpcyB3YXMgYWRkZWQgaW4KIyBweXRob24tMy41KSBvdGhlcndpc2Ugb25seSBkbyBETlMgbWF0Y2hpbmcuICBUaGlzIGFsbG93cwojIHV0aWwuc3NsX21hdGNoX2hvc3RuYW1lIHRvIGNvbnRpbnVlIHRvIGJlIHVzZWQgaW4gUHl0aG9uIDIuNy4KdHJ5OgogICAgaW1wb3J0IGlwYWRkcmVzcwpleGNlcHQgSW1wb3J0RXJyb3I6CiAgICBpcGFkZHJlc3MgPSBOb25lCgpfX3ZlcnNpb25fXyA9IFwiMy41LjAuMVwiCgoKY2xhc3MgQ2VydGlmaWNhdGVFcnJvcihWYWx1ZUVycm9yKToKICAgIHBhc3MKCgpkZWYgX2Ruc25hbWVfbWF0Y2goZG4sIGhvc3RuYW1lLCBtYXhfd2lsZGNhcmRzPTEpOgogICAgXCJcIlwiTWF0Y2hpbmcgYWNjb3JkaW5nIHRvIFJGQyA2MTI1LCBzZWN0aW9uIDYuNC4zCgogICAgaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjEyNSNzZWN0aW9uLTYuNC4zCiAgICBcIlwiXCIKICAgIHBhdHMgPSBbXQogICAgaWYgbm90IGRuOgogICAgICAgIHJldHVybiBGYWxzZQoKICAgICMgUG9ydGVkIGZyb20gcHl0aG9uMy1zeW50YXg6CiAgICAjIGxlZnRtb3N0LCAqcmVtYWluZGVyID0gZG4uc3BsaXQocicuJykKICAgIHBhcnRzID0gZG4uc3BsaXQoclwiLlwiKQogICAgbGVmdG1vc3QgPSBwYXJ0c1swXQogICAgcmVtYWluZGVyID0gcGFydHNbMTpdCgogICAgd2lsZGNhcmRzID0gbGVmdG1vc3QuY291bnQoXCIqXCIpCiAgICBpZiB3aWxkY2FyZHMgPiBtYXhfd2lsZGNhcmRzOgogICAgICAgICMgSXNzdWUgIzE3OTgwOiBhdm9pZCBkZW5pYWxzIG9mIHNlcnZpY2UgYnkgcmVmdXNpbmcgbW9yZQogICAgICAgICMgdGhhbiBvbmUgd2lsZGNhcmQgcGVyIGZyYWdtZW50LiAgQSBzdXJ2ZXkgb2YgZXN0YWJsaXNoZWQKICAgICAgICAjIHBvbGljeSBhbW9uZyBTU0wgaW1wbGVtZW50YXRpb25zIHNob3dlZCBpdCB0byBiZSBhCiAgICAgICAgIyByZWFzb25hYmxlIGNob2ljZS4KICAgICAgICByYWlzZSBDZXJ0aWZpY2F0ZUVycm9yKAogICAgICAgICAgICBcInRvbyBtYW55IHdpbGRjYXJkcyBpbiBjZXJ0aWZpY2F0ZSBETlMgbmFtZTogXCIgKyByZXByKGRuKQogICAgICAgICkKCiAgICAjIHNwZWVkIHVwIGNvbW1vbiBjYXNlIHcvbyB3aWxkY2FyZHMKICAgIGlmIG5vdCB3aWxkY2FyZHM6CiAgICAgICAgcmV0dXJuIGRuLmxvd2VyKCkgPT0gaG9zdG5hbWUubG93ZXIoKQoKICAgICMgUkZDIDYxMjUsIHNlY3Rpb24gNi40LjMsIHN1Yml0ZW0gMS4KICAgICMgVGhlIGNsaWVudCBTSE9VTEQgTk9UIGF0dGVtcHQgdG8gbWF0Y2ggYSBwcmVzZW50ZWQgaWRlbnRpZmllciBpbiB3aGljaAogICAgIyB0aGUgd2lsZGNhcmQgY2hhcmFjdGVyIGNvbXByaXNlcyBhIGxhYmVsIG90aGVyIHRoYW4gdGhlIGxlZnQtbW9zdCBsYWJlbC4KICAgIGlmIGxlZnRtb3N0ID09IFwiKlwiOgogICAgICAgICMgV2hlbiAnKicgaXMgYSBmcmFnbWVudCBieSBpdHNlbGYsIGl0IG1hdGNoZXMgYSBub24tZW1wdHkgZG90bGVzcwogICAgICAgICMgZnJhZ21lbnQuCiAgICAgICAgcGF0cy5hcHBlbmQoXCJbXi5dK1wiKQogICAgZWxpZiBsZWZ0bW9zdC5zdGFydHN3aXRoKFwieG4tLVwiKSBvciBob3N0bmFtZS5zdGFydHN3aXRoKFwieG4tLVwiKToKICAgICAgICAjIFJGQyA2MTI1LCBzZWN0aW9uIDYuNC4zLCBzdWJpdGVtIDMuCiAgICAgICAgIyBUaGUgY2xpZW50IFNIT1VMRCBOT1QgYXR0ZW1wdCB0byBtYXRjaCBhIHByZXNlbnRlZCBpZGVudGlmaWVyCiAgICAgICAgIyB3aGVyZSB0aGUgd2lsZGNhcmQgY2hhcmFjdGVyIGlzIGVtYmVkZGVkIHdpdGhpbiBhbiBBLWxhYmVsIG9yCiAgICAgICAgIyBVLWxhYmVsIG9mIGFuIGludGVybmF0aW9uYWxpemVkIGRvbWFpbiBuYW1lLgogICAgICAgIHBhdHMuYXBwZW5kKHJlLmVzY2FwZShsZWZ0bW9zdCkpCiAgICBlbHNlOgogICAgICAgICMgT3RoZXJ3aXNlLCAnKicgbWF0Y2hlcyBhbnkgZG90bGVzcyBzdHJpbmcsIGUuZy4gd3d3KgogICAgICAgIHBhdHMuYXBwZW5kKHJlLmVzY2FwZShsZWZ0bW9zdCkucmVwbGFjZShyXCJcXCpcIiwgXCJbXi5dKlwiKSkKCiAgICAjIGFkZCB0aGUgcmVtYWluaW5nIGZyYWdtZW50cywgaWdub3JlIGFueSB3aWxkY2FyZHMKICAgIGZvciBmcmFnIGluIHJlbWFpbmRlcjoKICAgICAgICBwYXRzLmFwcGVuZChyZS5lc2NhcGUoZnJhZykpCgogICAgcGF0ID0gcmUuY29tcGlsZShyXCJcXEFcIiArIHJcIlxcLlwiLmpvaW4ocGF0cykgKyByXCJcXFpcIiwgcmUuSUdOT1JFQ0FTRSkKICAgIHJldHVybiBwYXQubWF0Y2goaG9zdG5hbWUpCgoKZGVmIF90b191bmljb2RlKG9iaik6CiAgICBpZiBpc2luc3RhbmNlKG9iaiwgc3RyKSBhbmQgc3lzLnZlcnNpb25faW5mbyA8ICgzLCk6CiAgICAgICAgIyBpZ25vcmVkIGZsYWtlOCAjIEY4MjEgdG8gc3VwcG9ydCBweXRob24gMi43IGZ1bmN0aW9uCiAgICAgICAgb2JqID0gdW5pY29kZShvYmosIGVuY29kaW5nPVwiYXNjaWlcIiwgZXJyb3JzPVwic3RyaWN0XCIpICAjIG5vcWE6IEY4MjEKICAgIHJldHVybiBvYmoKCgpkZWYgX2lwYWRkcmVzc19tYXRjaChpcG5hbWUsIGhvc3RfaXApOgogICAgXCJcIlwiRXhhY3QgbWF0Y2hpbmcgb2YgSVAgYWRkcmVzc2VzLgoKICAgIFJGQyA2MTI1IGV4cGxpY2l0bHkgZG9lc24ndCBkZWZpbmUgYW4gYWxnb3JpdGhtIGZvciB0aGlzCiAgICAoc2VjdGlvbiAxLjcuMiAtIFwiT3V0IG9mIFNjb3BlXCIpLgogICAgXCJcIlwiCiAgICAjIE9wZW5TU0wgbWF5IGFkZCBhIHRyYWlsaW5nIG5ld2xpbmUgdG8gYSBzdWJqZWN0QWx0TmFtZSdzIElQIGFkZHJlc3MKICAgICMgRGl2ZXJnZW5jZSBmcm9tIHVwc3RyZWFtOiBpcGFkZHJlc3MgY2FuJ3QgaGFuZGxlIGJ5dGUgc3RyCiAgICBpcCA9IGlwYWRkcmVzcy5pcF9hZGRyZXNzKF90b191bmljb2RlKGlwbmFtZSkucnN0cmlwKCkpCiAgICByZXR1cm4gaXAgPT0gaG9zdF9pcAoKCmRlZiBtYXRjaF9ob3N0bmFtZShjZXJ0LCBob3N0bmFtZSk6CiAgICBcIlwiXCJWZXJpZnkgdGhhdCAqY2VydCogKGluIGRlY29kZWQgZm9ybWF0IGFzIHJldHVybmVkIGJ5CiAgICBTU0xTb2NrZXQuZ2V0cGVlcmNlcnQoKSkgbWF0Y2hlcyB0aGUgKmhvc3RuYW1lKi4gIFJGQyAyODE4IGFuZCBSRkMgNjEyNQogICAgcnVsZXMgYXJlIGZvbGxvd2VkLCBidXQgSVAgYWRkcmVzc2VzIGFyZSBub3QgYWNjZXB0ZWQgZm9yICpob3N0bmFtZSouCgogICAgQ2VydGlmaWNhdGVFcnJvciBpcyByYWlzZWQgb24gZmFpbHVyZS4gT24gc3VjY2VzcywgdGhlIGZ1bmN0aW9uCiAgICByZXR1cm5zIG5vdGhpbmcuCiAgICBcIlwiXCIKICAgIGlmIG5vdCBjZXJ0OgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoCiAgICAgICAgICAgIFwiZW1wdHkgb3Igbm8gY2VydGlmaWNhdGUsIG1hdGNoX2hvc3RuYW1lIG5lZWRzIGEgXCIKICAgICAgICAgICAgXCJTU0wgc29ja2V0IG9yIFNTTCBjb250ZXh0IHdpdGggZWl0aGVyIFwiCiAgICAgICAgICAgIFwiQ0VSVF9PUFRJT05BTCBvciBDRVJUX1JFUVVJUkVEXCIKICAgICAgICApCiAgICB0cnk6CiAgICAgICAgIyBEaXZlcmdlbmNlIGZyb20gdXBzdHJlYW06IGlwYWRkcmVzcyBjYW4ndCBoYW5kbGUgYnl0ZSBzdHIKICAgICAgICBob3N0X2lwID0gaXBhZGRyZXNzLmlwX2FkZHJlc3MoX3RvX3VuaWNvZGUoaG9zdG5hbWUpKQogICAgZXhjZXB0IChVbmljb2RlRXJyb3IsIFZhbHVlRXJyb3IpOgogICAgICAgICMgVmFsdWVFcnJvcjogTm90IGFuIElQIGFkZHJlc3MgKGNvbW1vbiBjYXNlKQogICAgICAgICMgVW5pY29kZUVycm9yOiBEaXZlcmdlbmNlIGZyb20gdXBzdHJlYW06IEhhdmUgdG8gZGVhbCB3aXRoIGlwYWRkcmVzcyBub3QgdGFraW5nCiAgICAgICAgIyBieXRlIHN0cmluZ3MuICBhZGRyZXNzZXMgc2hvdWxkIGJlIGFsbCBhc2NpaSwgc28gd2UgY29uc2lkZXIgaXQgbm90CiAgICAgICAgIyBhbiBpcGFkZHJlc3MgaW4gdGhpcyBjYXNlCiAgICAgICAgaG9zdF9pcCA9IE5vbmUKICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAjIERpdmVyZ2VuY2UgZnJvbSB1cHN0cmVhbTogTWFrZSBpcGFkZHJlc3MgbGlicmFyeSBvcHRpb25hbAogICAgICAgIGlmIGlwYWRkcmVzcyBpcyBOb25lOgogICAgICAgICAgICBob3N0X2lwID0gTm9uZQogICAgICAgIGVsc2U6ICAjIERlZmVuc2l2ZQogICAgICAgICAgICByYWlzZQogICAgZG5zbmFtZXMgPSBbXQogICAgc2FuID0gY2VydC5nZXQoXCJzdWJqZWN0QWx0TmFtZVwiLCAoKSkKICAgIGZvciBrZXksIHZhbHVlIGluIHNhbjoKICAgICAgICBpZiBrZXkgPT0gXCJETlNcIjoKICAgICAgICAgICAgaWYgaG9zdF9pcCBpcyBOb25lIGFuZCBfZG5zbmFtZV9tYXRjaCh2YWx1ZSwgaG9zdG5hbWUpOgogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIGRuc25hbWVzLmFwcGVuZCh2YWx1ZSkKICAgICAgICBlbGlmIGtleSA9PSBcIklQIEFkZHJlc3NcIjoKICAgICAgICAgICAgaWYgaG9zdF9pcCBpcyBub3QgTm9uZSBhbmQgX2lwYWRkcmVzc19tYXRjaCh2YWx1ZSwgaG9zdF9pcCk6CiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgZG5zbmFtZXMuYXBwZW5kKHZhbHVlKQogICAgaWYgbm90IGRuc25hbWVzOgogICAgICAgICMgVGhlIHN1YmplY3QgaXMgb25seSBjaGVja2VkIHdoZW4gdGhlcmUgaXMgbm8gZE5TTmFtZSBlbnRyeQogICAgICAgICMgaW4gc3ViamVjdEFsdE5hbWUKICAgICAgICBmb3Igc3ViIGluIGNlcnQuZ2V0KFwic3ViamVjdFwiLCAoKSk6CiAgICAgICAgICAgIGZvciBrZXksIHZhbHVlIGluIHN1YjoKICAgICAgICAgICAgICAgICMgWFhYIGFjY29yZGluZyB0byBSRkMgMjgxOCwgdGhlIG1vc3Qgc3BlY2lmaWMgQ29tbW9uIE5hbWUKICAgICAgICAgICAgICAgICMgbXVzdCBiZSB1c2VkLgogICAgICAgICAgICAgICAgaWYga2V5ID09IFwiY29tbW9uTmFtZVwiOgogICAgICAgICAgICAgICAgICAgIGlmIF9kbnNuYW1lX21hdGNoKHZhbHVlLCBob3N0bmFtZSk6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgICAgICAgIGRuc25hbWVzLmFwcGVuZCh2YWx1ZSkKICAgIGlmIGxlbihkbnNuYW1lcykgPiAxOgogICAgICAgIHJhaXNlIENlcnRpZmljYXRlRXJyb3IoCiAgICAgICAgICAgIFwiaG9zdG5hbWUgJXIgXCIKICAgICAgICAgICAgXCJkb2Vzbid0IG1hdGNoIGVpdGhlciBvZiAlc1wiICUgKGhvc3RuYW1lLCBcIiwgXCIuam9pbihtYXAocmVwciwgZG5zbmFtZXMpKSkKICAgICAgICApCiAgICBlbGlmIGxlbihkbnNuYW1lcykgPT0gMToKICAgICAgICByYWlzZSBDZXJ0aWZpY2F0ZUVycm9yKFwiaG9zdG5hbWUgJXIgZG9lc24ndCBtYXRjaCAlclwiICUgKGhvc3RuYW1lLCBkbnNuYW1lc1swXSkpCiAgICBlbHNlOgogICAgICAgIHJhaXNlIENlcnRpZmljYXRlRXJyb3IoCiAgICAgICAgICAgIFwibm8gYXBwcm9wcmlhdGUgY29tbW9uTmFtZSBvciBzdWJqZWN0QWx0TmFtZSBmaWVsZHMgd2VyZSBmb3VuZFwiCiAgICAgICAgKQoKIiIiCm1vZHVsZV9kaWN0WyJ1cmxsaWIzIitvcy5zZXArInV0aWwiK29zLnNlcCsicmVzcG9uc2UucHkiXT0iIiIKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhYnNvbHV0ZV9pbXBvcnQKCmZyb20gZW1haWwuZXJyb3JzIGltcG9ydCBNdWx0aXBhcnRJbnZhcmlhbnRWaW9sYXRpb25EZWZlY3QsIFN0YXJ0Qm91bmRhcnlOb3RGb3VuZERlZmVjdAoKZnJvbSAuLmV4Y2VwdGlvbnMgaW1wb3J0IEhlYWRlclBhcnNpbmdFcnJvcgpmcm9tIC4ucGFja2FnZXMuc2l4Lm1vdmVzIGltcG9ydCBodHRwX2NsaWVudCBhcyBodHRwbGliCgoKZGVmIGlzX2ZwX2Nsb3NlZChvYmopOgogICAgXCJcIlwiCiAgICBDaGVja3Mgd2hldGhlciBhIGdpdmVuIGZpbGUtbGlrZSBvYmplY3QgaXMgY2xvc2VkLgoKICAgIDpwYXJhbSBvYmo6CiAgICAgICAgVGhlIGZpbGUtbGlrZSBvYmplY3QgdG8gY2hlY2suCiAgICBcIlwiXCIKCiAgICB0cnk6CiAgICAgICAgIyBDaGVjayBgaXNjbG9zZWQoKWAgZmlyc3QsIGluIGNhc2UgUHl0aG9uMyBkb2Vzbid0IHNldCBgY2xvc2VkYC4KICAgICAgICAjIEdIIElzc3VlICM5MjgKICAgICAgICByZXR1cm4gb2JqLmlzY2xvc2VkKCkKICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICBwYXNzCgogICAgdHJ5OgogICAgICAgICMgQ2hlY2sgdmlhIHRoZSBvZmZpY2lhbCBmaWxlLWxpa2Utb2JqZWN0IHdheS4KICAgICAgICByZXR1cm4gb2JqLmNsb3NlZAogICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOgogICAgICAgIHBhc3MKCiAgICB0cnk6CiAgICAgICAgIyBDaGVjayBpZiB0aGUgb2JqZWN0IGlzIGEgY29udGFpbmVyIGZvciBhbm90aGVyIGZpbGUtbGlrZSBvYmplY3QgdGhhdAogICAgICAgICMgZ2V0cyByZWxlYXNlZCBvbiBleGhhdXN0aW9uIChlLmcuIEhUVFBSZXNwb25zZSkuCiAgICAgICAgcmV0dXJuIG9iai5mcCBpcyBOb25lCiAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgcGFzcwoKICAgIHJhaXNlIFZhbHVlRXJyb3IoXCJVbmFibGUgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgZnAgaXMgY2xvc2VkLlwiKQoKCmRlZiBhc3NlcnRfaGVhZGVyX3BhcnNpbmcoaGVhZGVycyk6CiAgICBcIlwiXCIKICAgIEFzc2VydHMgd2hldGhlciBhbGwgaGVhZGVycyBoYXZlIGJlZW4gc3VjY2Vzc2Z1bGx5IHBhcnNlZC4KICAgIEV4dHJhY3RzIGVuY291bnRlcmVkIGVycm9ycyBmcm9tIHRoZSByZXN1bHQgb2YgcGFyc2luZyBoZWFkZXJzLgoKICAgIE9ubHkgd29ya3Mgb24gUHl0aG9uIDMuCgogICAgOnBhcmFtIGh0dHAuY2xpZW50LkhUVFBNZXNzYWdlIGhlYWRlcnM6IEhlYWRlcnMgdG8gdmVyaWZ5LgoKICAgIDpyYWlzZXMgdXJsbGliMy5leGNlcHRpb25zLkhlYWRlclBhcnNpbmdFcnJvcjoKICAgICAgICBJZiBwYXJzaW5nIGVycm9ycyBhcmUgZm91bmQuCiAgICBcIlwiXCIKCiAgICAjIFRoaXMgd2lsbCBmYWlsIHNpbGVudGx5IGlmIHdlIHBhc3MgaW4gdGhlIHdyb25nIGtpbmQgb2YgcGFyYW1ldGVyLgogICAgIyBUbyBtYWtlIGRlYnVnZ2luZyBlYXNpZXIgYWRkIGFuIGV4cGxpY2l0IGNoZWNrLgogICAgaWYgbm90IGlzaW5zdGFuY2UoaGVhZGVycywgaHR0cGxpYi5IVFRQTWVzc2FnZSk6CiAgICAgICAgcmFpc2UgVHlwZUVycm9yKFwiZXhwZWN0ZWQgaHR0cGxpYi5NZXNzYWdlLCBnb3QgezB9LlwiLmZvcm1hdCh0eXBlKGhlYWRlcnMpKSkKCiAgICBkZWZlY3RzID0gZ2V0YXR0cihoZWFkZXJzLCBcImRlZmVjdHNcIiwgTm9uZSkKICAgIGdldF9wYXlsb2FkID0gZ2V0YXR0cihoZWFkZXJzLCBcImdldF9wYXlsb2FkXCIsIE5vbmUpCgogICAgdW5wYXJzZWRfZGF0YSA9IE5vbmUKICAgIGlmIGdldF9wYXlsb2FkOgogICAgICAgICMgZ2V0X3BheWxvYWQgaXMgYWN0dWFsbHkgZW1haWwubWVzc2FnZS5NZXNzYWdlLmdldF9wYXlsb2FkOwogICAgICAgICMgd2UncmUgb25seSBpbnRlcmVzdGVkIGluIHRoZSByZXN1bHQgaWYgaXQncyBub3QgYSBtdWx0aXBhcnQgbWVzc2FnZQogICAgICAgIGlmIG5vdCBoZWFkZXJzLmlzX211bHRpcGFydCgpOgogICAgICAgICAgICBwYXlsb2FkID0gZ2V0X3BheWxvYWQoKQoKICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShwYXlsb2FkLCAoYnl0ZXMsIHN0cikpOgogICAgICAgICAgICAgICAgdW5wYXJzZWRfZGF0YSA9IHBheWxvYWQKICAgIGlmIGRlZmVjdHM6CiAgICAgICAgIyBodHRwbGliIGlzIGFzc3VtaW5nIGEgcmVzcG9uc2UgYm9keSBpcyBhdmFpbGFibGUKICAgICAgICAjIHdoZW4gcGFyc2luZyBoZWFkZXJzIGV2ZW4gd2hlbiBodHRwbGliIG9ubHkgc2VuZHMKICAgICAgICAjIGhlYWRlciBkYXRhIHRvIHBhcnNlX2hlYWRlcnMoKSBUaGlzIHJlc3VsdHMgaW4KICAgICAgICAjIGRlZmVjdHMgb24gbXVsdGlwYXJ0IHJlc3BvbnNlcyBpbiBwYXJ0aWN1bGFyLgogICAgICAgICMgU2VlOiBodHRwczovL2dpdGh1Yi5jb20vdXJsbGliMy91cmxsaWIzL2lzc3Vlcy84MDAKCiAgICAgICAgIyBTbyB3ZSBpZ25vcmUgdGhlIGZvbGxvd2luZyBkZWZlY3RzOgogICAgICAgICMgLSBTdGFydEJvdW5kYXJ5Tm90Rm91bmREZWZlY3Q6CiAgICAgICAgIyAgICAgVGhlIGNsYWltZWQgc3RhcnQgYm91bmRhcnkgd2FzIG5ldmVyIGZvdW5kLgogICAgICAgICMgLSBNdWx0aXBhcnRJbnZhcmlhbnRWaW9sYXRpb25EZWZlY3Q6CiAgICAgICAgIyAgICAgQSBtZXNzYWdlIGNsYWltZWQgdG8gYmUgYSBtdWx0aXBhcnQgYnV0IG5vIHN1YnBhcnRzIHdlcmUgZm91bmQuCiAgICAgICAgZGVmZWN0cyA9IFsKICAgICAgICAgICAgZGVmZWN0CiAgICAgICAgICAgIGZvciBkZWZlY3QgaW4gZGVmZWN0cwogICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSgKICAgICAgICAgICAgICAgIGRlZmVjdCwgKFN0YXJ0Qm91bmRhcnlOb3RGb3VuZERlZmVjdCwgTXVsdGlwYXJ0SW52YXJpYW50VmlvbGF0aW9uRGVmZWN0KQogICAgICAgICAgICApCiAgICAgICAgXQoKICAgIGlmIGRlZmVjdHMgb3IgdW5wYXJzZWRfZGF0YToKICAgICAgICByYWlzZSBIZWFkZXJQYXJzaW5nRXJyb3IoZGVmZWN0cz1kZWZlY3RzLCB1bnBhcnNlZF9kYXRhPXVucGFyc2VkX2RhdGEpCgoKZGVmIGlzX3Jlc3BvbnNlX3RvX2hlYWQocmVzcG9uc2UpOgogICAgXCJcIlwiCiAgICBDaGVja3Mgd2hldGhlciB0aGUgcmVxdWVzdCBvZiBhIHJlc3BvbnNlIGhhcyBiZWVuIGEgSEVBRC1yZXF1ZXN0LgogICAgSGFuZGxlcyB0aGUgcXVpcmtzIG9mIEFwcEVuZ2luZS4KCiAgICA6cGFyYW0gaHR0cC5jbGllbnQuSFRUUFJlc3BvbnNlIHJlc3BvbnNlOgogICAgICAgIFJlc3BvbnNlIHRvIGNoZWNrIGlmIHRoZSBvcmlnaW5hdGluZyByZXF1ZXN0CiAgICAgICAgdXNlZCAnSEVBRCcgYXMgYSBtZXRob2QuCiAgICBcIlwiXCIKICAgICMgRklYTUU6IENhbiB3ZSBkbyB0aGlzIHNvbWVob3cgd2l0aG91dCBhY2Nlc3NpbmcgcHJpdmF0ZSBodHRwbGliIF9tZXRob2Q/CiAgICBtZXRob2QgPSByZXNwb25zZS5fbWV0aG9kCiAgICBpZiBpc2luc3RhbmNlKG1ldGhvZCwgaW50KTogICMgUGxhdGZvcm0tc3BlY2lmaWM6IEFwcGVuZ2luZQogICAgICAgIHJldHVybiBtZXRob2QgPT0gMwogICAgcmV0dXJuIG1ldGhvZC51cHBlcigpID09IFwiSEVBRFwiCgoiIiIKbW9kdWxlX2RpY3RbInVybGxpYjMiK29zLnNlcCsidXRpbCIrb3Muc2VwKyJwcm94eS5weSJdPSIiIgpmcm9tIC5zc2xfIGltcG9ydCBjcmVhdGVfdXJsbGliM19jb250ZXh0LCByZXNvbHZlX2NlcnRfcmVxcywgcmVzb2x2ZV9zc2xfdmVyc2lvbgoKCmRlZiBjb25uZWN0aW9uX3JlcXVpcmVzX2h0dHBfdHVubmVsKAogICAgcHJveHlfdXJsPU5vbmUsIHByb3h5X2NvbmZpZz1Ob25lLCBkZXN0aW5hdGlvbl9zY2hlbWU9Tm9uZQopOgogICAgXCJcIlwiCiAgICBSZXR1cm5zIFRydWUgaWYgdGhlIGNvbm5lY3Rpb24gcmVxdWlyZXMgYW4gSFRUUCBDT05ORUNUIHRocm91Z2ggdGhlIHByb3h5LgoKICAgIDpwYXJhbSBVUkwgcHJveHlfdXJsOgogICAgICAgIFVSTCBvZiB0aGUgcHJveHkuCiAgICA6cGFyYW0gUHJveHlDb25maWcgcHJveHlfY29uZmlnOgogICAgICAgIFByb3h5IGNvbmZpZ3VyYXRpb24gZnJvbSBwb29sbWFuYWdlci5weQogICAgOnBhcmFtIHN0ciBkZXN0aW5hdGlvbl9zY2hlbWU6CiAgICAgICAgVGhlIHNjaGVtZSBvZiB0aGUgZGVzdGluYXRpb24uIChpLmUgaHR0cHMsIGh0dHAsIGV0YykKICAgIFwiXCJcIgogICAgIyBJZiB3ZSdyZSBub3QgdXNpbmcgYSBwcm94eSwgbm8gd2F5IHRvIHVzZSBhIHR1bm5lbC4KICAgIGlmIHByb3h5X3VybCBpcyBOb25lOgogICAgICAgIHJldHVybiBGYWxzZQoKICAgICMgSFRUUCBkZXN0aW5hdGlvbnMgbmV2ZXIgcmVxdWlyZSB0dW5uZWxpbmcsIHdlIGFsd2F5cyBmb3J3YXJkLgogICAgaWYgZGVzdGluYXRpb25fc2NoZW1lID09IFwiaHR0cFwiOgogICAgICAgIHJldHVybiBGYWxzZQoKICAgICMgU3VwcG9ydCBmb3IgZm9yd2FyZGluZyB3aXRoIEhUVFBTIHByb3hpZXMgYW5kIEhUVFBTIGRlc3RpbmF0aW9ucy4KICAgIGlmICgKICAgICAgICBwcm94eV91cmwuc2NoZW1lID09IFwiaHR0cHNcIgogICAgICAgIGFuZCBwcm94eV9jb25maWcKICAgICAgICBhbmQgcHJveHlfY29uZmlnLnVzZV9mb3J3YXJkaW5nX2Zvcl9odHRwcwogICAgKToKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAjIE90aGVyd2lzZSBhbHdheXMgdXNlIGEgdHVubmVsLgogICAgcmV0dXJuIFRydWUKCgpkZWYgY3JlYXRlX3Byb3h5X3NzbF9jb250ZXh0KAogICAgc3NsX3ZlcnNpb24sIGNlcnRfcmVxcywgY2FfY2VydHM9Tm9uZSwgY2FfY2VydF9kaXI9Tm9uZSwgY2FfY2VydF9kYXRhPU5vbmUKKToKICAgIFwiXCJcIgogICAgR2VuZXJhdGVzIGEgZGVmYXVsdCBwcm94eSBzc2wgY29udGV4dCBpZiBvbmUgaGFzbid0IGJlZW4gcHJvdmlkZWQgYnkgdGhlCiAgICB1c2VyLgogICAgXCJcIlwiCiAgICBzc2xfY29udGV4dCA9IGNyZWF0ZV91cmxsaWIzX2NvbnRleHQoCiAgICAgICAgc3NsX3ZlcnNpb249cmVzb2x2ZV9zc2xfdmVyc2lvbihzc2xfdmVyc2lvbiksCiAgICAgICAgY2VydF9yZXFzPXJlc29sdmVfY2VydF9yZXFzKGNlcnRfcmVxcyksCiAgICApCgogICAgaWYgKAogICAgICAgIG5vdCBjYV9jZXJ0cwogICAgICAgIGFuZCBub3QgY2FfY2VydF9kaXIKICAgICAgICBhbmQgbm90IGNhX2NlcnRfZGF0YQogICAgICAgIGFuZCBoYXNhdHRyKHNzbF9jb250ZXh0LCBcImxvYWRfZGVmYXVsdF9jZXJ0c1wiKQogICAgKToKICAgICAgICBzc2xfY29udGV4dC5sb2FkX2RlZmF1bHRfY2VydHMoKQoKICAgIHJldHVybiBzc2xfY29udGV4dAoKIiIiCm1vZHVsZV9kaWN0WyJ1cmxsaWIzIitvcy5zZXArInV0aWwiK29zLnNlcCsiX19pbml0X18ucHkiXT0iIiIKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhYnNvbHV0ZV9pbXBvcnQKCiMgRm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LCBwcm92aWRlIGltcG9ydHMgdGhhdCB1c2VkIHRvIGJlIGhlcmUuCmZyb20gLmNvbm5lY3Rpb24gaW1wb3J0IGlzX2Nvbm5lY3Rpb25fZHJvcHBlZApmcm9tIC5yZXF1ZXN0IGltcG9ydCBTS0lQX0hFQURFUiwgU0tJUFBBQkxFX0hFQURFUlMsIG1ha2VfaGVhZGVycwpmcm9tIC5yZXNwb25zZSBpbXBvcnQgaXNfZnBfY2xvc2VkCmZyb20gLnJldHJ5IGltcG9ydCBSZXRyeQpmcm9tIC5zc2xfIGltcG9ydCAoCiAgICBBTFBOX1BST1RPQ09MUywKICAgIEhBU19TTkksCiAgICBJU19QWU9QRU5TU0wsCiAgICBJU19TRUNVUkVUUkFOU1BPUlQsCiAgICBQUk9UT0NPTF9UTFMsCiAgICBTU0xDb250ZXh0LAogICAgYXNzZXJ0X2ZpbmdlcnByaW50LAogICAgcmVzb2x2ZV9jZXJ0X3JlcXMsCiAgICByZXNvbHZlX3NzbF92ZXJzaW9uLAogICAgc3NsX3dyYXBfc29ja2V0LAopCmZyb20gLnRpbWVvdXQgaW1wb3J0IFRpbWVvdXQsIGN1cnJlbnRfdGltZQpmcm9tIC51cmwgaW1wb3J0IFVybCwgZ2V0X2hvc3QsIHBhcnNlX3VybCwgc3BsaXRfZmlyc3QKZnJvbSAud2FpdCBpbXBvcnQgd2FpdF9mb3JfcmVhZCwgd2FpdF9mb3Jfd3JpdGUKCl9fYWxsX18gPSAoCiAgICBcIkhBU19TTklcIiwKICAgIFwiSVNfUFlPUEVOU1NMXCIsCiAgICBcIklTX1NFQ1VSRVRSQU5TUE9SVFwiLAogICAgXCJTU0xDb250ZXh0XCIsCiAgICBcIlBST1RPQ09MX1RMU1wiLAogICAgXCJBTFBOX1BST1RPQ09MU1wiLAogICAgXCJSZXRyeVwiLAogICAgXCJUaW1lb3V0XCIsCiAgICBcIlVybFwiLAogICAgXCJhc3NlcnRfZmluZ2VycHJpbnRcIiwKICAgIFwiY3VycmVudF90aW1lXCIsCiAgICBcImlzX2Nvbm5lY3Rpb25fZHJvcHBlZFwiLAogICAgXCJpc19mcF9jbG9zZWRcIiwKICAgIFwiZ2V0X2hvc3RcIiwKICAgIFwicGFyc2VfdXJsXCIsCiAgICBcIm1ha2VfaGVhZGVyc1wiLAogICAgXCJyZXNvbHZlX2NlcnRfcmVxc1wiLAogICAgXCJyZXNvbHZlX3NzbF92ZXJzaW9uXCIsCiAgICBcInNwbGl0X2ZpcnN0XCIsCiAgICBcInNzbF93cmFwX3NvY2tldFwiLAogICAgXCJ3YWl0X2Zvcl9yZWFkXCIsCiAgICBcIndhaXRfZm9yX3dyaXRlXCIsCiAgICBcIlNLSVBfSEVBREVSXCIsCiAgICBcIlNLSVBQQUJMRV9IRUFERVJTXCIsCikKCiIiIgptb2R1bGVfZGljdFsidXJsbGliMyIrb3Muc2VwKyJ1dGlsIitvcy5zZXArInNzbHRyYW5zcG9ydC5weSJdPSIiIgppbXBvcnQgaW8KaW1wb3J0IHNvY2tldAppbXBvcnQgc3NsCgpmcm9tIC4uZXhjZXB0aW9ucyBpbXBvcnQgUHJveHlTY2hlbWVVbnN1cHBvcnRlZApmcm9tIC4ucGFja2FnZXMgaW1wb3J0IHNpeAoKU1NMX0JMT0NLU0laRSA9IDE2Mzg0CgoKY2xhc3MgU1NMVHJhbnNwb3J0OgogICAgXCJcIlwiCiAgICBUaGUgU1NMVHJhbnNwb3J0IHdyYXBzIGFuIGV4aXN0aW5nIHNvY2tldCBhbmQgZXN0YWJsaXNoZXMgYW4gU1NMIGNvbm5lY3Rpb24uCgogICAgQ29udHJhcnkgdG8gUHl0aG9uJ3MgaW1wbGVtZW50YXRpb24gb2YgU1NMU29ja2V0LCBpdCBhbGxvd3MgeW91IHRvIGNoYWluCiAgICBtdWx0aXBsZSBUTFMgY29ubmVjdGlvbnMgdG9nZXRoZXIuIEl0J3MgcGFydGljdWxhcmx5IHVzZWZ1bCBpZiB5b3UgbmVlZCB0bwogICAgaW1wbGVtZW50IFRMUyB3aXRoaW4gVExTLgoKICAgIFRoZSBjbGFzcyBzdXBwb3J0cyBtb3N0IG9mIHRoZSBzb2NrZXQgQVBJIG9wZXJhdGlvbnMuCiAgICBcIlwiXCIKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgX3ZhbGlkYXRlX3NzbF9jb250ZXh0X2Zvcl90bHNfaW5fdGxzKHNzbF9jb250ZXh0KToKICAgICAgICBcIlwiXCIKICAgICAgICBSYWlzZXMgYSBQcm94eVNjaGVtZVVuc3VwcG9ydGVkIGlmIHRoZSBwcm92aWRlZCBzc2xfY29udGV4dCBjYW4ndCBiZSB1c2VkCiAgICAgICAgZm9yIFRMUyBpbiBUTFMuCgogICAgICAgIFRoZSBvbmx5IHJlcXVpcmVtZW50IGlzIHRoYXQgdGhlIHNzbF9jb250ZXh0IHByb3ZpZGVzIHRoZSAnd3JhcF9iaW8nCiAgICAgICAgbWV0aG9kcy4KICAgICAgICBcIlwiXCIKCiAgICAgICAgaWYgbm90IGhhc2F0dHIoc3NsX2NvbnRleHQsIFwid3JhcF9iaW9cIik6CiAgICAgICAgICAgIGlmIHNpeC5QWTI6CiAgICAgICAgICAgICAgICByYWlzZSBQcm94eVNjaGVtZVVuc3VwcG9ydGVkKAogICAgICAgICAgICAgICAgICAgIFwiVExTIGluIFRMUyByZXF1aXJlcyBTU0xDb250ZXh0LndyYXBfYmlvKCkgd2hpY2ggaXNuJ3QgXCIKICAgICAgICAgICAgICAgICAgICBcInN1cHBvcnRlZCBvbiBQeXRob24gMlwiCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByYWlzZSBQcm94eVNjaGVtZVVuc3VwcG9ydGVkKAogICAgICAgICAgICAgICAgICAgIFwiVExTIGluIFRMUyByZXF1aXJlcyBTU0xDb250ZXh0LndyYXBfYmlvKCkgd2hpY2ggaXNuJ3QgXCIKICAgICAgICAgICAgICAgICAgICBcImF2YWlsYWJsZSBvbiBub24tbmF0aXZlIFNTTENvbnRleHRcIgogICAgICAgICAgICAgICAgKQoKICAgIGRlZiBfX2luaXRfXygKICAgICAgICBzZWxmLCBzb2NrZXQsIHNzbF9jb250ZXh0LCBzZXJ2ZXJfaG9zdG5hbWU9Tm9uZSwgc3VwcHJlc3NfcmFnZ2VkX2VvZnM9VHJ1ZQogICAgKToKICAgICAgICBcIlwiXCIKICAgICAgICBDcmVhdGUgYW4gU1NMVHJhbnNwb3J0IGFyb3VuZCBzb2NrZXQgdXNpbmcgdGhlIHByb3ZpZGVkIHNzbF9jb250ZXh0LgogICAgICAgIFwiXCJcIgogICAgICAgIHNlbGYuaW5jb21pbmcgPSBzc2wuTWVtb3J5QklPKCkKICAgICAgICBzZWxmLm91dGdvaW5nID0gc3NsLk1lbW9yeUJJTygpCgogICAgICAgIHNlbGYuc3VwcHJlc3NfcmFnZ2VkX2VvZnMgPSBzdXBwcmVzc19yYWdnZWRfZW9mcwogICAgICAgIHNlbGYuc29ja2V0ID0gc29ja2V0CgogICAgICAgIHNlbGYuc3Nsb2JqID0gc3NsX2NvbnRleHQud3JhcF9iaW8oCiAgICAgICAgICAgIHNlbGYuaW5jb21pbmcsIHNlbGYub3V0Z29pbmcsIHNlcnZlcl9ob3N0bmFtZT1zZXJ2ZXJfaG9zdG5hbWUKICAgICAgICApCgogICAgICAgICMgUGVyZm9ybSBpbml0aWFsIGhhbmRzaGFrZS4KICAgICAgICBzZWxmLl9zc2xfaW9fbG9vcChzZWxmLnNzbG9iai5kb19oYW5kc2hha2UpCgogICAgZGVmIF9fZW50ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX2V4aXRfXyhzZWxmLCAqXyk6CiAgICAgICAgc2VsZi5jbG9zZSgpCgogICAgZGVmIGZpbGVubyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5zb2NrZXQuZmlsZW5vKCkKCiAgICBkZWYgcmVhZChzZWxmLCBsZW49MTAyNCwgYnVmZmVyPU5vbmUpOgogICAgICAgIHJldHVybiBzZWxmLl93cmFwX3NzbF9yZWFkKGxlbiwgYnVmZmVyKQoKICAgIGRlZiByZWN2KHNlbGYsIGxlbj0xMDI0LCBmbGFncz0wKToKICAgICAgICBpZiBmbGFncyAhPSAwOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFwibm9uLXplcm8gZmxhZ3Mgbm90IGFsbG93ZWQgaW4gY2FsbHMgdG8gcmVjdlwiKQogICAgICAgIHJldHVybiBzZWxmLl93cmFwX3NzbF9yZWFkKGxlbikKCiAgICBkZWYgcmVjdl9pbnRvKHNlbGYsIGJ1ZmZlciwgbmJ5dGVzPU5vbmUsIGZsYWdzPTApOgogICAgICAgIGlmIGZsYWdzICE9IDA6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXCJub24temVybyBmbGFncyBub3QgYWxsb3dlZCBpbiBjYWxscyB0byByZWN2X2ludG9cIikKICAgICAgICBpZiBidWZmZXIgYW5kIChuYnl0ZXMgaXMgTm9uZSk6CiAgICAgICAgICAgIG5ieXRlcyA9IGxlbihidWZmZXIpCiAgICAgICAgZWxpZiBuYnl0ZXMgaXMgTm9uZToKICAgICAgICAgICAgbmJ5dGVzID0gMTAyNAogICAgICAgIHJldHVybiBzZWxmLnJlYWQobmJ5dGVzLCBidWZmZXIpCgogICAgZGVmIHNlbmRhbGwoc2VsZiwgZGF0YSwgZmxhZ3M9MCk6CiAgICAgICAgaWYgZmxhZ3MgIT0gMDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcIm5vbi16ZXJvIGZsYWdzIG5vdCBhbGxvd2VkIGluIGNhbGxzIHRvIHNlbmRhbGxcIikKICAgICAgICBjb3VudCA9IDAKICAgICAgICB3aXRoIG1lbW9yeXZpZXcoZGF0YSkgYXMgdmlldywgdmlldy5jYXN0KFwiQlwiKSBhcyBieXRlX3ZpZXc6CiAgICAgICAgICAgIGFtb3VudCA9IGxlbihieXRlX3ZpZXcpCiAgICAgICAgICAgIHdoaWxlIGNvdW50IDwgYW1vdW50OgogICAgICAgICAgICAgICAgdiA9IHNlbGYuc2VuZChieXRlX3ZpZXdbY291bnQ6XSkKICAgICAgICAgICAgICAgIGNvdW50ICs9IHYKCiAgICBkZWYgc2VuZChzZWxmLCBkYXRhLCBmbGFncz0wKToKICAgICAgICBpZiBmbGFncyAhPSAwOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFwibm9uLXplcm8gZmxhZ3Mgbm90IGFsbG93ZWQgaW4gY2FsbHMgdG8gc2VuZFwiKQogICAgICAgIHJlc3BvbnNlID0gc2VsZi5fc3NsX2lvX2xvb3Aoc2VsZi5zc2xvYmoud3JpdGUsIGRhdGEpCiAgICAgICAgcmV0dXJuIHJlc3BvbnNlCgogICAgZGVmIG1ha2VmaWxlKAogICAgICAgIHNlbGYsIG1vZGU9XCJyXCIsIGJ1ZmZlcmluZz1Ob25lLCBlbmNvZGluZz1Ob25lLCBlcnJvcnM9Tm9uZSwgbmV3bGluZT1Ob25lCiAgICApOgogICAgICAgIFwiXCJcIgogICAgICAgIFB5dGhvbidzIGh0dHBjbGllbnQgdXNlcyBtYWtlZmlsZSBhbmQgYnVmZmVyZWQgaW8gd2hlbiByZWFkaW5nIEhUVFAKICAgICAgICBtZXNzYWdlcyBhbmQgd2UgbmVlZCB0byBzdXBwb3J0IGl0LgoKICAgICAgICBUaGlzIGlzIHVuZm9ydHVuYXRlbHkgYSBjb3B5IGFuZCBwYXN0ZSBvZiBzb2NrZXQucHkgbWFrZWZpbGUgd2l0aCBzbWFsbAogICAgICAgIGNoYW5nZXMgdG8gcG9pbnQgdG8gdGhlIHNvY2tldCBkaXJlY3RseS4KICAgICAgICBcIlwiXCIKICAgICAgICBpZiBub3Qgc2V0KG1vZGUpIDw9IHtcInJcIiwgXCJ3XCIsIFwiYlwifToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcImludmFsaWQgbW9kZSAlciAob25seSByLCB3LCBiIGFsbG93ZWQpXCIgJSAobW9kZSwpKQoKICAgICAgICB3cml0aW5nID0gXCJ3XCIgaW4gbW9kZQogICAgICAgIHJlYWRpbmcgPSBcInJcIiBpbiBtb2RlIG9yIG5vdCB3cml0aW5nCiAgICAgICAgYXNzZXJ0IHJlYWRpbmcgb3Igd3JpdGluZwogICAgICAgIGJpbmFyeSA9IFwiYlwiIGluIG1vZGUKICAgICAgICByYXdtb2RlID0gXCJcIgogICAgICAgIGlmIHJlYWRpbmc6CiAgICAgICAgICAgIHJhd21vZGUgKz0gXCJyXCIKICAgICAgICBpZiB3cml0aW5nOgogICAgICAgICAgICByYXdtb2RlICs9IFwid1wiCiAgICAgICAgcmF3ID0gc29ja2V0LlNvY2tldElPKHNlbGYsIHJhd21vZGUpCiAgICAgICAgc2VsZi5zb2NrZXQuX2lvX3JlZnMgKz0gMQogICAgICAgIGlmIGJ1ZmZlcmluZyBpcyBOb25lOgogICAgICAgICAgICBidWZmZXJpbmcgPSAtMQogICAgICAgIGlmIGJ1ZmZlcmluZyA8IDA6CiAgICAgICAgICAgIGJ1ZmZlcmluZyA9IGlvLkRFRkFVTFRfQlVGRkVSX1NJWkUKICAgICAgICBpZiBidWZmZXJpbmcgPT0gMDoKICAgICAgICAgICAgaWYgbm90IGJpbmFyeToKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXCJ1bmJ1ZmZlcmVkIHN0cmVhbXMgbXVzdCBiZSBiaW5hcnlcIikKICAgICAgICAgICAgcmV0dXJuIHJhdwogICAgICAgIGlmIHJlYWRpbmcgYW5kIHdyaXRpbmc6CiAgICAgICAgICAgIGJ1ZmZlciA9IGlvLkJ1ZmZlcmVkUldQYWlyKHJhdywgcmF3LCBidWZmZXJpbmcpCiAgICAgICAgZWxpZiByZWFkaW5nOgogICAgICAgICAgICBidWZmZXIgPSBpby5CdWZmZXJlZFJlYWRlcihyYXcsIGJ1ZmZlcmluZykKICAgICAgICBlbHNlOgogICAgICAgICAgICBhc3NlcnQgd3JpdGluZwogICAgICAgICAgICBidWZmZXIgPSBpby5CdWZmZXJlZFdyaXRlcihyYXcsIGJ1ZmZlcmluZykKICAgICAgICBpZiBiaW5hcnk6CiAgICAgICAgICAgIHJldHVybiBidWZmZXIKICAgICAgICB0ZXh0ID0gaW8uVGV4dElPV3JhcHBlcihidWZmZXIsIGVuY29kaW5nLCBlcnJvcnMsIG5ld2xpbmUpCiAgICAgICAgdGV4dC5tb2RlID0gbW9kZQogICAgICAgIHJldHVybiB0ZXh0CgogICAgZGVmIHVud3JhcChzZWxmKToKICAgICAgICBzZWxmLl9zc2xfaW9fbG9vcChzZWxmLnNzbG9iai51bndyYXApCgogICAgZGVmIGNsb3NlKHNlbGYpOgogICAgICAgIHNlbGYuc29ja2V0LmNsb3NlKCkKCiAgICBkZWYgZ2V0cGVlcmNlcnQoc2VsZiwgYmluYXJ5X2Zvcm09RmFsc2UpOgogICAgICAgIHJldHVybiBzZWxmLnNzbG9iai5nZXRwZWVyY2VydChiaW5hcnlfZm9ybSkKCiAgICBkZWYgdmVyc2lvbihzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5zc2xvYmoudmVyc2lvbigpCgogICAgZGVmIGNpcGhlcihzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5zc2xvYmouY2lwaGVyKCkKCiAgICBkZWYgc2VsZWN0ZWRfYWxwbl9wcm90b2NvbChzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5zc2xvYmouc2VsZWN0ZWRfYWxwbl9wcm90b2NvbCgpCgogICAgZGVmIHNlbGVjdGVkX25wbl9wcm90b2NvbChzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5zc2xvYmouc2VsZWN0ZWRfbnBuX3Byb3RvY29sKCkKCiAgICBkZWYgc2hhcmVkX2NpcGhlcnMoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuc3Nsb2JqLnNoYXJlZF9jaXBoZXJzKCkKCiAgICBkZWYgY29tcHJlc3Npb24oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuc3Nsb2JqLmNvbXByZXNzaW9uKCkKCiAgICBkZWYgc2V0dGltZW91dChzZWxmLCB2YWx1ZSk6CiAgICAgICAgc2VsZi5zb2NrZXQuc2V0dGltZW91dCh2YWx1ZSkKCiAgICBkZWYgZ2V0dGltZW91dChzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5zb2NrZXQuZ2V0dGltZW91dCgpCgogICAgZGVmIF9kZWNyZWZfc29ja2V0aW9zKHNlbGYpOgogICAgICAgIHNlbGYuc29ja2V0Ll9kZWNyZWZfc29ja2V0aW9zKCkKCiAgICBkZWYgX3dyYXBfc3NsX3JlYWQoc2VsZiwgbGVuLCBidWZmZXI9Tm9uZSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXR1cm4gc2VsZi5fc3NsX2lvX2xvb3Aoc2VsZi5zc2xvYmoucmVhZCwgbGVuLCBidWZmZXIpCiAgICAgICAgZXhjZXB0IHNzbC5TU0xFcnJvciBhcyBlOgogICAgICAgICAgICBpZiBlLmVycm5vID09IHNzbC5TU0xfRVJST1JfRU9GIGFuZCBzZWxmLnN1cHByZXNzX3JhZ2dlZF9lb2ZzOgogICAgICAgICAgICAgICAgcmV0dXJuIDAgICMgZW9mLCByZXR1cm4gMC4KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJhaXNlCgogICAgZGVmIF9zc2xfaW9fbG9vcChzZWxmLCBmdW5jLCAqYXJncyk6CiAgICAgICAgXCJcIlwiUGVyZm9ybXMgYW4gSS9PIGxvb3AgYmV0d2VlbiBpbmNvbWluZy9vdXRnb2luZyBhbmQgdGhlIHNvY2tldC5cIlwiXCIKICAgICAgICBzaG91bGRfbG9vcCA9IFRydWUKICAgICAgICByZXQgPSBOb25lCgogICAgICAgIHdoaWxlIHNob3VsZF9sb29wOgogICAgICAgICAgICBlcnJubyA9IE5vbmUKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcmV0ID0gZnVuYygqYXJncykKICAgICAgICAgICAgZXhjZXB0IHNzbC5TU0xFcnJvciBhcyBlOgogICAgICAgICAgICAgICAgaWYgZS5lcnJubyBub3QgaW4gKHNzbC5TU0xfRVJST1JfV0FOVF9SRUFELCBzc2wuU1NMX0VSUk9SX1dBTlRfV1JJVEUpOgogICAgICAgICAgICAgICAgICAgICMgV0FOVF9SRUFELCBhbmQgV0FOVF9XUklURSBhcmUgZXhwZWN0ZWQsIG90aGVycyBhcmUgbm90LgogICAgICAgICAgICAgICAgICAgIHJhaXNlIGUKICAgICAgICAgICAgICAgIGVycm5vID0gZS5lcnJubwoKICAgICAgICAgICAgYnVmID0gc2VsZi5vdXRnb2luZy5yZWFkKCkKICAgICAgICAgICAgc2VsZi5zb2NrZXQuc2VuZGFsbChidWYpCgogICAgICAgICAgICBpZiBlcnJubyBpcyBOb25lOgogICAgICAgICAgICAgICAgc2hvdWxkX2xvb3AgPSBGYWxzZQogICAgICAgICAgICBlbGlmIGVycm5vID09IHNzbC5TU0xfRVJST1JfV0FOVF9SRUFEOgogICAgICAgICAgICAgICAgYnVmID0gc2VsZi5zb2NrZXQucmVjdihTU0xfQkxPQ0tTSVpFKQogICAgICAgICAgICAgICAgaWYgYnVmOgogICAgICAgICAgICAgICAgICAgIHNlbGYuaW5jb21pbmcud3JpdGUoYnVmKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBzZWxmLmluY29taW5nLndyaXRlX2VvZigpCiAgICAgICAgcmV0dXJuIHJldAoKIiIiCm1vZHVsZV9kaWN0WyJ1cmxsaWIzIitvcy5zZXArImNvbnRyaWIiK29zLnNlcCsicHlvcGVuc3NsLnB5Il09IiIiClwiXCJcIgpUTFMgd2l0aCBTTklfLXN1cHBvcnQgZm9yIFB5dGhvbiAyLiBGb2xsb3cgdGhlc2UgaW5zdHJ1Y3Rpb25zIGlmIHlvdSB3b3VsZApsaWtlIHRvIHZlcmlmeSBUTFMgY2VydGlmaWNhdGVzIGluIFB5dGhvbiAyLiBOb3RlLCB0aGUgZGVmYXVsdCBsaWJyYXJpZXMgZG8KKm5vdCogZG8gY2VydGlmaWNhdGUgY2hlY2tpbmc7IHlvdSBuZWVkIHRvIGRvIGFkZGl0aW9uYWwgd29yayB0byB2YWxpZGF0ZQpjZXJ0aWZpY2F0ZXMgeW91cnNlbGYuCgpUaGlzIG5lZWRzIHRoZSBmb2xsb3dpbmcgcGFja2FnZXMgaW5zdGFsbGVkOgoKKiBgcHlPcGVuU1NMYF8gKHRlc3RlZCB3aXRoIDE2LjAuMCkKKiBgY3J5cHRvZ3JhcGh5YF8gKG1pbmltdW0gMS4zLjQsIGZyb20gcHlvcGVuc3NsKQoqIGBpZG5hYF8gKG1pbmltdW0gMi4wLCBmcm9tIGNyeXB0b2dyYXBoeSkKCkhvd2V2ZXIsIHB5b3BlbnNzbCBkZXBlbmRzIG9uIGNyeXB0b2dyYXBoeSwgd2hpY2ggZGVwZW5kcyBvbiBpZG5hLCBzbyB3aGlsZSB3ZQp1c2UgYWxsIHRocmVlIGRpcmVjdGx5IGhlcmUgd2UgZW5kIHVwIGhhdmluZyByZWxhdGl2ZWx5IGZldyBwYWNrYWdlcyByZXF1aXJlZC4KCllvdSBjYW4gaW5zdGFsbCB0aGVtIHdpdGggdGhlIGZvbGxvd2luZyBjb21tYW5kOgoKLi4gY29kZS1ibG9jazo6IGJhc2gKCiAgICAkIHB5dGhvbiAtbSBwaXAgaW5zdGFsbCBweW9wZW5zc2wgY3J5cHRvZ3JhcGh5IGlkbmEKClRvIGFjdGl2YXRlIGNlcnRpZmljYXRlIGNoZWNraW5nLCBjYWxsCjpmdW5jOmB+dXJsbGliMy5jb250cmliLnB5b3BlbnNzbC5pbmplY3RfaW50b191cmxsaWIzYCBmcm9tIHlvdXIgUHl0aG9uIGNvZGUKYmVmb3JlIHlvdSBiZWdpbiBtYWtpbmcgSFRUUCByZXF1ZXN0cy4gVGhpcyBjYW4gYmUgZG9uZSBpbiBhIGBgc2l0ZWN1c3RvbWl6ZWBgCm1vZHVsZSwgb3IgYXQgYW55IG90aGVyIHRpbWUgYmVmb3JlIHlvdXIgYXBwbGljYXRpb24gYmVnaW5zIHVzaW5nIGBgdXJsbGliM2BgLApsaWtlIHRoaXM6CgouLiBjb2RlLWJsb2NrOjogcHl0aG9uCgogICAgdHJ5OgogICAgICAgIGltcG9ydCB1cmxsaWIzLmNvbnRyaWIucHlvcGVuc3NsCiAgICAgICAgdXJsbGliMy5jb250cmliLnB5b3BlbnNzbC5pbmplY3RfaW50b191cmxsaWIzKCkKICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICBwYXNzCgpOb3cgeW91IGNhbiB1c2UgOm1vZDpgdXJsbGliM2AgYXMgeW91IG5vcm1hbGx5IHdvdWxkLCBhbmQgaXQgd2lsbCBzdXBwb3J0IFNOSQp3aGVuIHRoZSByZXF1aXJlZCBtb2R1bGVzIGFyZSBpbnN0YWxsZWQuCgpBY3RpdmF0aW5nIHRoaXMgbW9kdWxlIGFsc28gaGFzIHRoZSBwb3NpdGl2ZSBzaWRlIGVmZmVjdCBvZiBkaXNhYmxpbmcgU1NML1RMUwpjb21wcmVzc2lvbiBpbiBQeXRob24gMiAoc2VlIGBDUklNRSBhdHRhY2tgXykuCgouLiBfc25pOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TZXJ2ZXJfTmFtZV9JbmRpY2F0aW9uCi4uIF9jcmltZSBhdHRhY2s6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NSSU1FXyhzZWN1cml0eV9leHBsb2l0KQouLiBfcHlvcGVuc3NsOiBodHRwczovL3d3dy5weW9wZW5zc2wub3JnCi4uIF9jcnlwdG9ncmFwaHk6IGh0dHBzOi8vY3J5cHRvZ3JhcGh5LmlvCi4uIF9pZG5hOiBodHRwczovL2dpdGh1Yi5jb20va2pkL2lkbmEKXCJcIlwiCmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYWJzb2x1dGVfaW1wb3J0CiMgPCBpbmNsdWRlICdPcGVuU1NMLnB5JyA+CgojIDwgaW5jbHVkZSAnY3J5cHRvZ3JhcGh5LnB5JyA+CgojIDwgaW5jbHVkZSAnaWRuYS5weScgPgoKCmltcG9ydCBPcGVuU1NMLlNTTApmcm9tIGNyeXB0b2dyYXBoeSBpbXBvcnQgeDUwOQpmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbCBpbXBvcnQgYmFja2VuZCBhcyBvcGVuc3NsX2JhY2tlbmQKZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wueDUwOSBpbXBvcnQgX0NlcnRpZmljYXRlCgp0cnk6CiAgICBmcm9tIGNyeXB0b2dyYXBoeS54NTA5IGltcG9ydCBVbnN1cHBvcnRlZEV4dGVuc2lvbgpleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAjIFVuc3VwcG9ydGVkRXh0ZW5zaW9uIGlzIGdvbmUgaW4gY3J5cHRvZ3JhcGh5ID49IDIuMS4wCiAgICBjbGFzcyBVbnN1cHBvcnRlZEV4dGVuc2lvbihFeGNlcHRpb24pOgogICAgICAgIHBhc3MKCgpmcm9tIGlvIGltcG9ydCBCeXRlc0lPCmZyb20gc29ja2V0IGltcG9ydCBlcnJvciBhcyBTb2NrZXRFcnJvcgpmcm9tIHNvY2tldCBpbXBvcnQgdGltZW91dAoKdHJ5OiAgIyBQbGF0Zm9ybS1zcGVjaWZpYzogUHl0aG9uIDIKICAgIGZyb20gc29ja2V0IGltcG9ydCBfZmlsZW9iamVjdApleGNlcHQgSW1wb3J0RXJyb3I6ICAjIFBsYXRmb3JtLXNwZWNpZmljOiBQeXRob24gMwogICAgX2ZpbGVvYmplY3QgPSBOb25lCiAgICBmcm9tIC4ucGFja2FnZXMuYmFja3BvcnRzLm1ha2VmaWxlIGltcG9ydCBiYWNrcG9ydF9tYWtlZmlsZQoKaW1wb3J0IGxvZ2dpbmcKaW1wb3J0IHNzbAppbXBvcnQgc3lzCgpmcm9tIC4uIGltcG9ydCB1dGlsCmZyb20gLi5wYWNrYWdlcyBpbXBvcnQgc2l4CmZyb20gLi51dGlsLnNzbF8gaW1wb3J0IFBST1RPQ09MX1RMU19DTElFTlQKCl9fYWxsX18gPSBbXCJpbmplY3RfaW50b191cmxsaWIzXCIsIFwiZXh0cmFjdF9mcm9tX3VybGxpYjNcIl0KCiMgU05JIGFsd2F5cyB3b3Jrcy4KSEFTX1NOSSA9IFRydWUKCiMgTWFwIGZyb20gdXJsbGliMyB0byBQeU9wZW5TU0wgY29tcGF0aWJsZSBwYXJhbWV0ZXItdmFsdWVzLgpfb3BlbnNzbF92ZXJzaW9ucyA9IHsKICAgIHV0aWwuUFJPVE9DT0xfVExTOiBPcGVuU1NMLlNTTC5TU0x2MjNfTUVUSE9ELAogICAgUFJPVE9DT0xfVExTX0NMSUVOVDogT3BlblNTTC5TU0wuU1NMdjIzX01FVEhPRCwKICAgIHNzbC5QUk9UT0NPTF9UTFN2MTogT3BlblNTTC5TU0wuVExTdjFfTUVUSE9ELAp9CgppZiBoYXNhdHRyKHNzbCwgXCJQUk9UT0NPTF9TU0x2M1wiKSBhbmQgaGFzYXR0cihPcGVuU1NMLlNTTCwgXCJTU0x2M19NRVRIT0RcIik6CiAgICBfb3BlbnNzbF92ZXJzaW9uc1tzc2wuUFJPVE9DT0xfU1NMdjNdID0gT3BlblNTTC5TU0wuU1NMdjNfTUVUSE9ECgppZiBoYXNhdHRyKHNzbCwgXCJQUk9UT0NPTF9UTFN2MV8xXCIpIGFuZCBoYXNhdHRyKE9wZW5TU0wuU1NMLCBcIlRMU3YxXzFfTUVUSE9EXCIpOgogICAgX29wZW5zc2xfdmVyc2lvbnNbc3NsLlBST1RPQ09MX1RMU3YxXzFdID0gT3BlblNTTC5TU0wuVExTdjFfMV9NRVRIT0QKCmlmIGhhc2F0dHIoc3NsLCBcIlBST1RPQ09MX1RMU3YxXzJcIikgYW5kIGhhc2F0dHIoT3BlblNTTC5TU0wsIFwiVExTdjFfMl9NRVRIT0RcIik6CiAgICBfb3BlbnNzbF92ZXJzaW9uc1tzc2wuUFJPVE9DT0xfVExTdjFfMl0gPSBPcGVuU1NMLlNTTC5UTFN2MV8yX01FVEhPRAoKCl9zdGRsaWJfdG9fb3BlbnNzbF92ZXJpZnkgPSB7CiAgICBzc2wuQ0VSVF9OT05FOiBPcGVuU1NMLlNTTC5WRVJJRllfTk9ORSwKICAgIHNzbC5DRVJUX09QVElPTkFMOiBPcGVuU1NMLlNTTC5WRVJJRllfUEVFUiwKICAgIHNzbC5DRVJUX1JFUVVJUkVEOiBPcGVuU1NMLlNTTC5WRVJJRllfUEVFUgogICAgKyBPcGVuU1NMLlNTTC5WRVJJRllfRkFJTF9JRl9OT19QRUVSX0NFUlQsCn0KX29wZW5zc2xfdG9fc3RkbGliX3ZlcmlmeSA9IGRpY3QoKHYsIGspIGZvciBrLCB2IGluIF9zdGRsaWJfdG9fb3BlbnNzbF92ZXJpZnkuaXRlbXMoKSkKCiMgT3BlblNTTCB3aWxsIG9ubHkgd3JpdGUgMTZLIGF0IGEgdGltZQpTU0xfV1JJVEVfQkxPQ0tTSVpFID0gMTYzODQKCm9yaWdfdXRpbF9IQVNfU05JID0gdXRpbC5IQVNfU05JCm9yaWdfdXRpbF9TU0xDb250ZXh0ID0gdXRpbC5zc2xfLlNTTENvbnRleHQKCgpsb2cgPSBsb2dnaW5nLmdldExvZ2dlcihfX25hbWVfXykKCgpkZWYgaW5qZWN0X2ludG9fdXJsbGliMygpOgogICAgXCJNb25rZXktcGF0Y2ggdXJsbGliMyB3aXRoIFB5T3BlblNTTC1iYWNrZWQgU1NMLXN1cHBvcnQuXCIKCiAgICBfdmFsaWRhdGVfZGVwZW5kZW5jaWVzX21ldCgpCgogICAgdXRpbC5TU0xDb250ZXh0ID0gUHlPcGVuU1NMQ29udGV4dAogICAgdXRpbC5zc2xfLlNTTENvbnRleHQgPSBQeU9wZW5TU0xDb250ZXh0CiAgICB1dGlsLkhBU19TTkkgPSBIQVNfU05JCiAgICB1dGlsLnNzbF8uSEFTX1NOSSA9IEhBU19TTkkKICAgIHV0aWwuSVNfUFlPUEVOU1NMID0gVHJ1ZQogICAgdXRpbC5zc2xfLklTX1BZT1BFTlNTTCA9IFRydWUKCgpkZWYgZXh0cmFjdF9mcm9tX3VybGxpYjMoKToKICAgIFwiVW5kbyBtb25rZXktcGF0Y2hpbmcgYnkgOmZ1bmM6YGluamVjdF9pbnRvX3VybGxpYjNgLlwiCgogICAgdXRpbC5TU0xDb250ZXh0ID0gb3JpZ191dGlsX1NTTENvbnRleHQKICAgIHV0aWwuc3NsXy5TU0xDb250ZXh0ID0gb3JpZ191dGlsX1NTTENvbnRleHQKICAgIHV0aWwuSEFTX1NOSSA9IG9yaWdfdXRpbF9IQVNfU05JCiAgICB1dGlsLnNzbF8uSEFTX1NOSSA9IG9yaWdfdXRpbF9IQVNfU05JCiAgICB1dGlsLklTX1BZT1BFTlNTTCA9IEZhbHNlCiAgICB1dGlsLnNzbF8uSVNfUFlPUEVOU1NMID0gRmFsc2UKCgpkZWYgX3ZhbGlkYXRlX2RlcGVuZGVuY2llc19tZXQoKToKICAgIFwiXCJcIgogICAgVmVyaWZpZXMgdGhhdCBQeU9wZW5TU0wncyBwYWNrYWdlLWxldmVsIGRlcGVuZGVuY2llcyBoYXZlIGJlZW4gbWV0LgogICAgVGhyb3dzIGBJbXBvcnRFcnJvcmAgaWYgdGhleSBhcmUgbm90IG1ldC4KICAgIFwiXCJcIgogICAgIyBNZXRob2QgYWRkZWQgaW4gYGNyeXB0b2dyYXBoeT09MS4xYDsgbm90IGF2YWlsYWJsZSBpbiBvbGRlciB2ZXJzaW9ucwogICAgZnJvbSBjcnlwdG9ncmFwaHkueDUwOS5leHRlbnNpb25zIGltcG9ydCBFeHRlbnNpb25zCgogICAgaWYgZ2V0YXR0cihFeHRlbnNpb25zLCBcImdldF9leHRlbnNpb25fZm9yX2NsYXNzXCIsIE5vbmUpIGlzIE5vbmU6CiAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IoCiAgICAgICAgICAgIFwiJ2NyeXB0b2dyYXBoeScgbW9kdWxlIG1pc3NpbmcgcmVxdWlyZWQgZnVuY3Rpb25hbGl0eS4gIFwiCiAgICAgICAgICAgIFwiVHJ5IHVwZ3JhZGluZyB0byB2MS4zLjQgb3IgbmV3ZXIuXCIKICAgICAgICApCgogICAgIyBweU9wZW5TU0wgMC4xNCBhbmQgYWJvdmUgdXNlIGNyeXB0b2dyYXBoeSBmb3IgT3BlblNTTCBiaW5kaW5ncy4gVGhlIF94NTA5CiAgICAjIGF0dHJpYnV0ZSBpcyBvbmx5IHByZXNlbnQgb24gdGhvc2UgdmVyc2lvbnMuCiAgICBmcm9tIE9wZW5TU0wuY3J5cHRvIGltcG9ydCBYNTA5CgogICAgeDUwOSA9IFg1MDkoKQogICAgaWYgZ2V0YXR0cih4NTA5LCBcIl94NTA5XCIsIE5vbmUpIGlzIE5vbmU6CiAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IoCiAgICAgICAgICAgIFwiJ3B5T3BlblNTTCcgbW9kdWxlIG1pc3NpbmcgcmVxdWlyZWQgZnVuY3Rpb25hbGl0eS4gXCIKICAgICAgICAgICAgXCJUcnkgdXBncmFkaW5nIHRvIHYwLjE0IG9yIG5ld2VyLlwiCiAgICAgICAgKQoKCmRlZiBfZG5zbmFtZV90b19zdGRsaWIobmFtZSk6CiAgICBcIlwiXCIKICAgIENvbnZlcnRzIGEgZE5TTmFtZSBTdWJqZWN0QWx0ZXJuYXRpdmVOYW1lIGZpZWxkIHRvIHRoZSBmb3JtIHVzZWQgYnkgdGhlCiAgICBzdGFuZGFyZCBsaWJyYXJ5IG9uIHRoZSBnaXZlbiBQeXRob24gdmVyc2lvbi4KCiAgICBDcnlwdG9ncmFwaHkgcHJvZHVjZXMgYSBkTlNOYW1lIGFzIGEgdW5pY29kZSBzdHJpbmcgdGhhdCB3YXMgaWRuYS1kZWNvZGVkCiAgICBmcm9tIEFTQ0lJIGJ5dGVzLiBXZSBuZWVkIHRvIGlkbmEtZW5jb2RlIHRoYXQgc3RyaW5nIHRvIGdldCBpdCBiYWNrLCBhbmQKICAgIHRoZW4gb24gUHl0aG9uIDMgd2UgYWxzbyBuZWVkIHRvIGNvbnZlcnQgdG8gdW5pY29kZSB2aWEgVVRGLTggKHRoZSBzdGRsaWIKICAgIHVzZXMgUHlVbmljb2RlX0Zyb21TdHJpbmdBbmRTaXplIG9uIGl0LCB3aGljaCBkZWNvZGVzIHZpYSBVVEYtOCkuCgogICAgSWYgdGhlIG5hbWUgY2Fubm90IGJlIGlkbmEtZW5jb2RlZCB0aGVuIHdlIHJldHVybiBOb25lIHNpZ25hbGxpbmcgdGhhdAogICAgdGhlIG5hbWUgZ2l2ZW4gc2hvdWxkIGJlIHNraXBwZWQuCiAgICBcIlwiXCIKCiAgICBkZWYgaWRuYV9lbmNvZGUobmFtZSk6CiAgICAgICAgXCJcIlwiCiAgICAgICAgQm9ycm93ZWQgd2hvbGVzYWxlIGZyb20gdGhlIFB5dGhvbiBDcnlwdG9ncmFwaHkgUHJvamVjdC4gSXQgdHVybnMgb3V0CiAgICAgICAgdGhhdCB3ZSBjYW4ndCBqdXN0IHNhZmVseSBjYWxsIGBpZG5hLmVuY29kZWA6IGl0IGNhbiBleHBsb2RlIGZvcgogICAgICAgIHdpbGRjYXJkIG5hbWVzLiBUaGlzIGF2b2lkcyB0aGF0IHByb2JsZW0uCiAgICAgICAgXCJcIlwiCiAgICAgICAgaW1wb3J0IGlkbmEKCiAgICAgICAgdHJ5OgogICAgICAgICAgICBmb3IgcHJlZml4IGluIFt1XCIqLlwiLCB1XCIuXCJdOgogICAgICAgICAgICAgICAgaWYgbmFtZS5zdGFydHN3aXRoKHByZWZpeCk6CiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG5hbWVbbGVuKHByZWZpeCkgOl0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJlZml4LmVuY29kZShcImFzY2lpXCIpICsgaWRuYS5lbmNvZGUobmFtZSkKICAgICAgICAgICAgcmV0dXJuIGlkbmEuZW5jb2RlKG5hbWUpCiAgICAgICAgZXhjZXB0IGlkbmEuY29yZS5JRE5BRXJyb3I6CiAgICAgICAgICAgIHJldHVybiBOb25lCgogICAgIyBEb24ndCBzZW5kIElQdjYgYWRkcmVzc2VzIHRocm91Z2ggdGhlIElETkEgZW5jb2Rlci4KICAgIGlmIFwiOlwiIGluIG5hbWU6CiAgICAgICAgcmV0dXJuIG5hbWUKCiAgICBuYW1lID0gaWRuYV9lbmNvZGUobmFtZSkKICAgIGlmIG5hbWUgaXMgTm9uZToKICAgICAgICByZXR1cm4gTm9uZQogICAgZWxpZiBzeXMudmVyc2lvbl9pbmZvID49ICgzLCAwKToKICAgICAgICBuYW1lID0gbmFtZS5kZWNvZGUoXCJ1dGYtOFwiKQogICAgcmV0dXJuIG5hbWUKCgpkZWYgZ2V0X3N1YmpfYWx0X25hbWUocGVlcl9jZXJ0KToKICAgIFwiXCJcIgogICAgR2l2ZW4gYW4gUHlPcGVuU1NMIGNlcnRpZmljYXRlLCBwcm92aWRlcyBhbGwgdGhlIHN1YmplY3QgYWx0ZXJuYXRpdmUgbmFtZXMuCiAgICBcIlwiXCIKICAgICMgUGFzcyB0aGUgY2VydCB0byBjcnlwdG9ncmFwaHksIHdoaWNoIGhhcyBtdWNoIGJldHRlciBBUElzIGZvciB0aGlzLgogICAgaWYgaGFzYXR0cihwZWVyX2NlcnQsIFwidG9fY3J5cHRvZ3JhcGh5XCIpOgogICAgICAgIGNlcnQgPSBwZWVyX2NlcnQudG9fY3J5cHRvZ3JhcGh5KCkKICAgIGVsc2U6CiAgICAgICAgIyBUaGlzIGlzIHRlY2huaWNhbGx5IHVzaW5nIHByaXZhdGUgQVBJcywgYnV0IHNob3VsZCB3b3JrIGFjcm9zcyBhbGwKICAgICAgICAjIHJlbGV2YW50IHZlcnNpb25zIGJlZm9yZSBQeU9wZW5TU0wgZ290IGEgcHJvcGVyIEFQSSBmb3IgdGhpcy4KICAgICAgICBjZXJ0ID0gX0NlcnRpZmljYXRlKG9wZW5zc2xfYmFja2VuZCwgcGVlcl9jZXJ0Ll94NTA5KQoKICAgICMgV2Ugd2FudCB0byBmaW5kIHRoZSBTQU4gZXh0ZW5zaW9uLiBBc2sgQ3J5cHRvZ3JhcGh5IHRvIGxvY2F0ZSBpdCAoaXQncwogICAgIyBmYXN0ZXIgdGhhbiBsb29waW5nIGluIFB5dGhvbikKICAgIHRyeToKICAgICAgICBleHQgPSBjZXJ0LmV4dGVuc2lvbnMuZ2V0X2V4dGVuc2lvbl9mb3JfY2xhc3MoeDUwOS5TdWJqZWN0QWx0ZXJuYXRpdmVOYW1lKS52YWx1ZQogICAgZXhjZXB0IHg1MDkuRXh0ZW5zaW9uTm90Rm91bmQ6CiAgICAgICAgIyBObyBzdWNoIGV4dGVuc2lvbiwgcmV0dXJuIHRoZSBlbXB0eSBsaXN0LgogICAgICAgIHJldHVybiBbXQogICAgZXhjZXB0ICgKICAgICAgICB4NTA5LkR1cGxpY2F0ZUV4dGVuc2lvbiwKICAgICAgICBVbnN1cHBvcnRlZEV4dGVuc2lvbiwKICAgICAgICB4NTA5LlVuc3VwcG9ydGVkR2VuZXJhbE5hbWVUeXBlLAogICAgICAgIFVuaWNvZGVFcnJvciwKICAgICkgYXMgZToKICAgICAgICAjIEEgcHJvYmxlbSBoYXMgYmVlbiBmb3VuZCB3aXRoIHRoZSBxdWFsaXR5IG9mIHRoZSBjZXJ0aWZpY2F0ZS4gQXNzdW1lCiAgICAgICAgIyBubyBTQU4gZmllbGQgaXMgcHJlc2VudC4KICAgICAgICBsb2cud2FybmluZygKICAgICAgICAgICAgXCJBIHByb2JsZW0gd2FzIGVuY291bnRlcmVkIHdpdGggdGhlIGNlcnRpZmljYXRlIHRoYXQgcHJldmVudGVkIFwiCiAgICAgICAgICAgIFwidXJsbGliMyBmcm9tIGZpbmRpbmcgdGhlIFN1YmplY3RBbHRlcm5hdGl2ZU5hbWUgZmllbGQuIFRoaXMgY2FuIFwiCiAgICAgICAgICAgIFwiYWZmZWN0IGNlcnRpZmljYXRlIHZhbGlkYXRpb24uIFRoZSBlcnJvciB3YXMgJXNcIiwKICAgICAgICAgICAgZSwKICAgICAgICApCiAgICAgICAgcmV0dXJuIFtdCgogICAgIyBXZSB3YW50IHRvIHJldHVybiBkTlNOYW1lIGFuZCBpUEFkZHJlc3MgZmllbGRzLiBXZSBuZWVkIHRvIGNhc3QgdGhlIElQcwogICAgIyBiYWNrIHRvIHN0cmluZ3MgYmVjYXVzZSB0aGUgbWF0Y2hfaG9zdG5hbWUgZnVuY3Rpb24gd2FudHMgdGhlbSBhcwogICAgIyBzdHJpbmdzLgogICAgIyBTYWRseSB0aGUgRE5TIG5hbWVzIG5lZWQgdG8gYmUgaWRuYSBlbmNvZGVkIGFuZCB0aGVuLCBvbiBQeXRob24gMywgVVRGLTgKICAgICMgZGVjb2RlZC4gVGhpcyBpcyBwcmV0dHkgZnJ1c3RyYXRpbmcsIGJ1dCB0aGF0J3Mgd2hhdCB0aGUgc3RhbmRhcmQgbGlicmFyeQogICAgIyBkb2VzIHdpdGggY2VydGlmaWNhdGVzLCBhbmQgc28gd2UgbmVlZCB0byBhdHRlbXB0IHRvIGRvIHRoZSBzYW1lLgogICAgIyBXZSBhbHNvIHdhbnQgdG8gc2tpcCBvdmVyIG5hbWVzIHdoaWNoIGNhbm5vdCBiZSBpZG5hIGVuY29kZWQuCiAgICBuYW1lcyA9IFsKICAgICAgICAoXCJETlNcIiwgbmFtZSkKICAgICAgICBmb3IgbmFtZSBpbiBtYXAoX2Ruc25hbWVfdG9fc3RkbGliLCBleHQuZ2V0X3ZhbHVlc19mb3JfdHlwZSh4NTA5LkROU05hbWUpKQogICAgICAgIGlmIG5hbWUgaXMgbm90IE5vbmUKICAgIF0KICAgIG5hbWVzLmV4dGVuZCgKICAgICAgICAoXCJJUCBBZGRyZXNzXCIsIHN0cihuYW1lKSkgZm9yIG5hbWUgaW4gZXh0LmdldF92YWx1ZXNfZm9yX3R5cGUoeDUwOS5JUEFkZHJlc3MpCiAgICApCgogICAgcmV0dXJuIG5hbWVzCgoKY2xhc3MgV3JhcHBlZFNvY2tldChvYmplY3QpOgogICAgXCJcIlwiQVBJLWNvbXBhdGliaWxpdHkgd3JhcHBlciBmb3IgUHl0aG9uIE9wZW5TU0wncyBDb25uZWN0aW9uLWNsYXNzLgoKICAgIE5vdGU6IF9tYWtlZmlsZV9yZWZzLCBfZHJvcCgpIGFuZCBfcmV1c2UoKSBhcmUgbmVlZGVkIGZvciB0aGUgZ2FyYmFnZQogICAgY29sbGVjdG9yIG9mIHB5cHkuCiAgICBcIlwiXCIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgY29ubmVjdGlvbiwgc29ja2V0LCBzdXBwcmVzc19yYWdnZWRfZW9mcz1UcnVlKToKICAgICAgICBzZWxmLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uCiAgICAgICAgc2VsZi5zb2NrZXQgPSBzb2NrZXQKICAgICAgICBzZWxmLnN1cHByZXNzX3JhZ2dlZF9lb2ZzID0gc3VwcHJlc3NfcmFnZ2VkX2VvZnMKICAgICAgICBzZWxmLl9tYWtlZmlsZV9yZWZzID0gMAogICAgICAgIHNlbGYuX2Nsb3NlZCA9IEZhbHNlCgogICAgZGVmIGZpbGVubyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5zb2NrZXQuZmlsZW5vKCkKCiAgICAjIENvcHktcGFzdGVkIGZyb20gUHl0aG9uIDMuNSBzb3VyY2UgY29kZQogICAgZGVmIF9kZWNyZWZfc29ja2V0aW9zKHNlbGYpOgogICAgICAgIGlmIHNlbGYuX21ha2VmaWxlX3JlZnMgPiAwOgogICAgICAgICAgICBzZWxmLl9tYWtlZmlsZV9yZWZzIC09IDEKICAgICAgICBpZiBzZWxmLl9jbG9zZWQ6CiAgICAgICAgICAgIHNlbGYuY2xvc2UoKQoKICAgIGRlZiByZWN2KHNlbGYsICphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBkYXRhID0gc2VsZi5jb25uZWN0aW9uLnJlY3YoKmFyZ3MsICoqa3dhcmdzKQogICAgICAgIGV4Y2VwdCBPcGVuU1NMLlNTTC5TeXNDYWxsRXJyb3IgYXMgZToKICAgICAgICAgICAgaWYgc2VsZi5zdXBwcmVzc19yYWdnZWRfZW9mcyBhbmQgZS5hcmdzID09ICgtMSwgXCJVbmV4cGVjdGVkIEVPRlwiKToKICAgICAgICAgICAgICAgIHJldHVybiBiXCJcIgogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmFpc2UgU29ja2V0RXJyb3Ioc3RyKGUpKQogICAgICAgIGV4Y2VwdCBPcGVuU1NMLlNTTC5aZXJvUmV0dXJuRXJyb3I6CiAgICAgICAgICAgIGlmIHNlbGYuY29ubmVjdGlvbi5nZXRfc2h1dGRvd24oKSA9PSBPcGVuU1NMLlNTTC5SRUNFSVZFRF9TSFVURE9XTjoKICAgICAgICAgICAgICAgIHJldHVybiBiXCJcIgogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmFpc2UKICAgICAgICBleGNlcHQgT3BlblNTTC5TU0wuV2FudFJlYWRFcnJvcjoKICAgICAgICAgICAgaWYgbm90IHV0aWwud2FpdF9mb3JfcmVhZChzZWxmLnNvY2tldCwgc2VsZi5zb2NrZXQuZ2V0dGltZW91dCgpKToKICAgICAgICAgICAgICAgIHJhaXNlIHRpbWVvdXQoXCJUaGUgcmVhZCBvcGVyYXRpb24gdGltZWQgb3V0XCIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5yZWN2KCphcmdzLCAqKmt3YXJncykKCiAgICAgICAgIyBUTFMgMS4zIHBvc3QtaGFuZHNoYWtlIGF1dGhlbnRpY2F0aW9uCiAgICAgICAgZXhjZXB0IE9wZW5TU0wuU1NMLkVycm9yIGFzIGU6CiAgICAgICAgICAgIHJhaXNlIHNzbC5TU0xFcnJvcihcInJlYWQgZXJyb3I6ICVyXCIgJSBlKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBkYXRhCgogICAgZGVmIHJlY3ZfaW50byhzZWxmLCAqYXJncywgKiprd2FyZ3MpOgogICAgICAgIHRyeToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuY29ubmVjdGlvbi5yZWN2X2ludG8oKmFyZ3MsICoqa3dhcmdzKQogICAgICAgIGV4Y2VwdCBPcGVuU1NMLlNTTC5TeXNDYWxsRXJyb3IgYXMgZToKICAgICAgICAgICAgaWYgc2VsZi5zdXBwcmVzc19yYWdnZWRfZW9mcyBhbmQgZS5hcmdzID09ICgtMSwgXCJVbmV4cGVjdGVkIEVPRlwiKToKICAgICAgICAgICAgICAgIHJldHVybiAwCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByYWlzZSBTb2NrZXRFcnJvcihzdHIoZSkpCiAgICAgICAgZXhjZXB0IE9wZW5TU0wuU1NMLlplcm9SZXR1cm5FcnJvcjoKICAgICAgICAgICAgaWYgc2VsZi5jb25uZWN0aW9uLmdldF9zaHV0ZG93bigpID09IE9wZW5TU0wuU1NMLlJFQ0VJVkVEX1NIVVRET1dOOgogICAgICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgZXhjZXB0IE9wZW5TU0wuU1NMLldhbnRSZWFkRXJyb3I6CiAgICAgICAgICAgIGlmIG5vdCB1dGlsLndhaXRfZm9yX3JlYWQoc2VsZi5zb2NrZXQsIHNlbGYuc29ja2V0LmdldHRpbWVvdXQoKSk6CiAgICAgICAgICAgICAgICByYWlzZSB0aW1lb3V0KFwiVGhlIHJlYWQgb3BlcmF0aW9uIHRpbWVkIG91dFwiKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYucmVjdl9pbnRvKCphcmdzLCAqKmt3YXJncykKCiAgICAgICAgIyBUTFMgMS4zIHBvc3QtaGFuZHNoYWtlIGF1dGhlbnRpY2F0aW9uCiAgICAgICAgZXhjZXB0IE9wZW5TU0wuU1NMLkVycm9yIGFzIGU6CiAgICAgICAgICAgIHJhaXNlIHNzbC5TU0xFcnJvcihcInJlYWQgZXJyb3I6ICVyXCIgJSBlKQoKICAgIGRlZiBzZXR0aW1lb3V0KHNlbGYsIHRpbWVvdXQpOgogICAgICAgIHJldHVybiBzZWxmLnNvY2tldC5zZXR0aW1lb3V0KHRpbWVvdXQpCgogICAgZGVmIF9zZW5kX3VudGlsX2RvbmUoc2VsZiwgZGF0YSk6CiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuY29ubmVjdGlvbi5zZW5kKGRhdGEpCiAgICAgICAgICAgIGV4Y2VwdCBPcGVuU1NMLlNTTC5XYW50V3JpdGVFcnJvcjoKICAgICAgICAgICAgICAgIGlmIG5vdCB1dGlsLndhaXRfZm9yX3dyaXRlKHNlbGYuc29ja2V0LCBzZWxmLnNvY2tldC5nZXR0aW1lb3V0KCkpOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIHRpbWVvdXQoKQogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgZXhjZXB0IE9wZW5TU0wuU1NMLlN5c0NhbGxFcnJvciBhcyBlOgogICAgICAgICAgICAgICAgcmFpc2UgU29ja2V0RXJyb3Ioc3RyKGUpKQoKICAgIGRlZiBzZW5kYWxsKHNlbGYsIGRhdGEpOgogICAgICAgIHRvdGFsX3NlbnQgPSAwCiAgICAgICAgd2hpbGUgdG90YWxfc2VudCA8IGxlbihkYXRhKToKICAgICAgICAgICAgc2VudCA9IHNlbGYuX3NlbmRfdW50aWxfZG9uZSgKICAgICAgICAgICAgICAgIGRhdGFbdG90YWxfc2VudCA6IHRvdGFsX3NlbnQgKyBTU0xfV1JJVEVfQkxPQ0tTSVpFXQogICAgICAgICAgICApCiAgICAgICAgICAgIHRvdGFsX3NlbnQgKz0gc2VudAoKICAgIGRlZiBzaHV0ZG93bihzZWxmKToKICAgICAgICAjIEZJWE1FIHJldGhyb3cgY29tcGF0aWJsZSBleGNlcHRpb25zIHNob3VsZCB3ZSBldmVyIHVzZSB0aGlzCiAgICAgICAgc2VsZi5jb25uZWN0aW9uLnNodXRkb3duKCkKCiAgICBkZWYgY2xvc2Uoc2VsZik6CiAgICAgICAgaWYgc2VsZi5fbWFrZWZpbGVfcmVmcyA8IDE6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHNlbGYuX2Nsb3NlZCA9IFRydWUKICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmNvbm5lY3Rpb24uY2xvc2UoKQogICAgICAgICAgICBleGNlcHQgT3BlblNTTC5TU0wuRXJyb3I6CiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLl9tYWtlZmlsZV9yZWZzIC09IDEKCiAgICBkZWYgZ2V0cGVlcmNlcnQoc2VsZiwgYmluYXJ5X2Zvcm09RmFsc2UpOgogICAgICAgIHg1MDkgPSBzZWxmLmNvbm5lY3Rpb24uZ2V0X3BlZXJfY2VydGlmaWNhdGUoKQoKICAgICAgICBpZiBub3QgeDUwOToKICAgICAgICAgICAgcmV0dXJuIHg1MDkKCiAgICAgICAgaWYgYmluYXJ5X2Zvcm06CiAgICAgICAgICAgIHJldHVybiBPcGVuU1NMLmNyeXB0by5kdW1wX2NlcnRpZmljYXRlKE9wZW5TU0wuY3J5cHRvLkZJTEVUWVBFX0FTTjEsIHg1MDkpCgogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIFwic3ViamVjdFwiOiAoKChcImNvbW1vbk5hbWVcIiwgeDUwOS5nZXRfc3ViamVjdCgpLkNOKSwpLCksCiAgICAgICAgICAgIFwic3ViamVjdEFsdE5hbWVcIjogZ2V0X3N1YmpfYWx0X25hbWUoeDUwOSksCiAgICAgICAgfQoKICAgIGRlZiB2ZXJzaW9uKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmNvbm5lY3Rpb24uZ2V0X3Byb3RvY29sX3ZlcnNpb25fbmFtZSgpCgogICAgZGVmIF9yZXVzZShzZWxmKToKICAgICAgICBzZWxmLl9tYWtlZmlsZV9yZWZzICs9IDEKCiAgICBkZWYgX2Ryb3Aoc2VsZik6CiAgICAgICAgaWYgc2VsZi5fbWFrZWZpbGVfcmVmcyA8IDE6CiAgICAgICAgICAgIHNlbGYuY2xvc2UoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuX21ha2VmaWxlX3JlZnMgLT0gMQoKCmlmIF9maWxlb2JqZWN0OiAgIyBQbGF0Zm9ybS1zcGVjaWZpYzogUHl0aG9uIDIKCiAgICBkZWYgbWFrZWZpbGUoc2VsZiwgbW9kZSwgYnVmc2l6ZT0tMSk6CiAgICAgICAgc2VsZi5fbWFrZWZpbGVfcmVmcyArPSAxCiAgICAgICAgcmV0dXJuIF9maWxlb2JqZWN0KHNlbGYsIG1vZGUsIGJ1ZnNpemUsIGNsb3NlPVRydWUpCgplbHNlOiAgIyBQbGF0Zm9ybS1zcGVjaWZpYzogUHl0aG9uIDMKICAgIG1ha2VmaWxlID0gYmFja3BvcnRfbWFrZWZpbGUKCldyYXBwZWRTb2NrZXQubWFrZWZpbGUgPSBtYWtlZmlsZQoKCmNsYXNzIFB5T3BlblNTTENvbnRleHQob2JqZWN0KToKICAgIFwiXCJcIgogICAgSSBhbSBhIHdyYXBwZXIgY2xhc3MgZm9yIHRoZSBQeU9wZW5TU0wgYGBDb250ZXh0YGAgb2JqZWN0LiBJIGFtIHJlc3BvbnNpYmxlCiAgICBmb3IgdHJhbnNsYXRpbmcgdGhlIGludGVyZmFjZSBvZiB0aGUgc3RhbmRhcmQgbGlicmFyeSBgYFNTTENvbnRleHRgYCBvYmplY3QKICAgIHRvIGNhbGxzIGludG8gUHlPcGVuU1NMLgogICAgXCJcIlwiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHByb3RvY29sKToKICAgICAgICBzZWxmLnByb3RvY29sID0gX29wZW5zc2xfdmVyc2lvbnNbcHJvdG9jb2xdCiAgICAgICAgc2VsZi5fY3R4ID0gT3BlblNTTC5TU0wuQ29udGV4dChzZWxmLnByb3RvY29sKQogICAgICAgIHNlbGYuX29wdGlvbnMgPSAwCiAgICAgICAgc2VsZi5jaGVja19ob3N0bmFtZSA9IEZhbHNlCgogICAgQHByb3BlcnR5CiAgICBkZWYgb3B0aW9ucyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fb3B0aW9ucwoKICAgIEBvcHRpb25zLnNldHRlcgogICAgZGVmIG9wdGlvbnMoc2VsZiwgdmFsdWUpOgogICAgICAgIHNlbGYuX29wdGlvbnMgPSB2YWx1ZQogICAgICAgIHNlbGYuX2N0eC5zZXRfb3B0aW9ucyh2YWx1ZSkKCiAgICBAcHJvcGVydHkKICAgIGRlZiB2ZXJpZnlfbW9kZShzZWxmKToKICAgICAgICByZXR1cm4gX29wZW5zc2xfdG9fc3RkbGliX3ZlcmlmeVtzZWxmLl9jdHguZ2V0X3ZlcmlmeV9tb2RlKCldCgogICAgQHZlcmlmeV9tb2RlLnNldHRlcgogICAgZGVmIHZlcmlmeV9tb2RlKHNlbGYsIHZhbHVlKToKICAgICAgICBzZWxmLl9jdHguc2V0X3ZlcmlmeShfc3RkbGliX3RvX29wZW5zc2xfdmVyaWZ5W3ZhbHVlXSwgX3ZlcmlmeV9jYWxsYmFjaykKCiAgICBkZWYgc2V0X2RlZmF1bHRfdmVyaWZ5X3BhdGhzKHNlbGYpOgogICAgICAgIHNlbGYuX2N0eC5zZXRfZGVmYXVsdF92ZXJpZnlfcGF0aHMoKQoKICAgIGRlZiBzZXRfY2lwaGVycyhzZWxmLCBjaXBoZXJzKToKICAgICAgICBpZiBpc2luc3RhbmNlKGNpcGhlcnMsIHNpeC50ZXh0X3R5cGUpOgogICAgICAgICAgICBjaXBoZXJzID0gY2lwaGVycy5lbmNvZGUoXCJ1dGYtOFwiKQogICAgICAgIHNlbGYuX2N0eC5zZXRfY2lwaGVyX2xpc3QoY2lwaGVycykKCiAgICBkZWYgbG9hZF92ZXJpZnlfbG9jYXRpb25zKHNlbGYsIGNhZmlsZT1Ob25lLCBjYXBhdGg9Tm9uZSwgY2FkYXRhPU5vbmUpOgogICAgICAgIGlmIGNhZmlsZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgY2FmaWxlID0gY2FmaWxlLmVuY29kZShcInV0Zi04XCIpCiAgICAgICAgaWYgY2FwYXRoIGlzIG5vdCBOb25lOgogICAgICAgICAgICBjYXBhdGggPSBjYXBhdGguZW5jb2RlKFwidXRmLThcIikKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuX2N0eC5sb2FkX3ZlcmlmeV9sb2NhdGlvbnMoY2FmaWxlLCBjYXBhdGgpCiAgICAgICAgICAgIGlmIGNhZGF0YSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHNlbGYuX2N0eC5sb2FkX3ZlcmlmeV9sb2NhdGlvbnMoQnl0ZXNJTyhjYWRhdGEpKQogICAgICAgIGV4Y2VwdCBPcGVuU1NMLlNTTC5FcnJvciBhcyBlOgogICAgICAgICAgICByYWlzZSBzc2wuU1NMRXJyb3IoXCJ1bmFibGUgdG8gbG9hZCB0cnVzdGVkIGNlcnRpZmljYXRlczogJXJcIiAlIGUpCgogICAgZGVmIGxvYWRfY2VydF9jaGFpbihzZWxmLCBjZXJ0ZmlsZSwga2V5ZmlsZT1Ob25lLCBwYXNzd29yZD1Ob25lKToKICAgICAgICBzZWxmLl9jdHgudXNlX2NlcnRpZmljYXRlX2NoYWluX2ZpbGUoY2VydGZpbGUpCiAgICAgICAgaWYgcGFzc3dvcmQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHBhc3N3b3JkLCBzaXguYmluYXJ5X3R5cGUpOgogICAgICAgICAgICAgICAgcGFzc3dvcmQgPSBwYXNzd29yZC5lbmNvZGUoXCJ1dGYtOFwiKQogICAgICAgICAgICBzZWxmLl9jdHguc2V0X3Bhc3N3ZF9jYihsYW1iZGEgKl86IHBhc3N3b3JkKQogICAgICAgIHNlbGYuX2N0eC51c2VfcHJpdmF0ZWtleV9maWxlKGtleWZpbGUgb3IgY2VydGZpbGUpCgogICAgZGVmIHNldF9hbHBuX3Byb3RvY29scyhzZWxmLCBwcm90b2NvbHMpOgogICAgICAgIHByb3RvY29scyA9IFtzaXguZW5zdXJlX2JpbmFyeShwKSBmb3IgcCBpbiBwcm90b2NvbHNdCiAgICAgICAgcmV0dXJuIHNlbGYuX2N0eC5zZXRfYWxwbl9wcm90b3MocHJvdG9jb2xzKQoKICAgIGRlZiB3cmFwX3NvY2tldCgKICAgICAgICBzZWxmLAogICAgICAgIHNvY2ssCiAgICAgICAgc2VydmVyX3NpZGU9RmFsc2UsCiAgICAgICAgZG9faGFuZHNoYWtlX29uX2Nvbm5lY3Q9VHJ1ZSwKICAgICAgICBzdXBwcmVzc19yYWdnZWRfZW9mcz1UcnVlLAogICAgICAgIHNlcnZlcl9ob3N0bmFtZT1Ob25lLAogICAgKToKICAgICAgICBjbnggPSBPcGVuU1NMLlNTTC5Db25uZWN0aW9uKHNlbGYuX2N0eCwgc29jaykKCiAgICAgICAgaWYgaXNpbnN0YW5jZShzZXJ2ZXJfaG9zdG5hbWUsIHNpeC50ZXh0X3R5cGUpOiAgIyBQbGF0Zm9ybS1zcGVjaWZpYzogUHl0aG9uIDMKICAgICAgICAgICAgc2VydmVyX2hvc3RuYW1lID0gc2VydmVyX2hvc3RuYW1lLmVuY29kZShcInV0Zi04XCIpCgogICAgICAgIGlmIHNlcnZlcl9ob3N0bmFtZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgY254LnNldF90bHNleHRfaG9zdF9uYW1lKHNlcnZlcl9ob3N0bmFtZSkKCiAgICAgICAgY254LnNldF9jb25uZWN0X3N0YXRlKCkKCiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgY254LmRvX2hhbmRzaGFrZSgpCiAgICAgICAgICAgIGV4Y2VwdCBPcGVuU1NMLlNTTC5XYW50UmVhZEVycm9yOgogICAgICAgICAgICAgICAgaWYgbm90IHV0aWwud2FpdF9mb3JfcmVhZChzb2NrLCBzb2NrLmdldHRpbWVvdXQoKSk6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgdGltZW91dChcInNlbGVjdCB0aW1lZCBvdXRcIikKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGV4Y2VwdCBPcGVuU1NMLlNTTC5FcnJvciBhcyBlOgogICAgICAgICAgICAgICAgcmFpc2Ugc3NsLlNTTEVycm9yKFwiYmFkIGhhbmRzaGFrZTogJXJcIiAlIGUpCiAgICAgICAgICAgIGJyZWFrCgogICAgICAgIHJldHVybiBXcmFwcGVkU29ja2V0KGNueCwgc29jaykKCgpkZWYgX3ZlcmlmeV9jYWxsYmFjayhjbngsIHg1MDksIGVycl9ubywgZXJyX2RlcHRoLCByZXR1cm5fY29kZSk6CiAgICByZXR1cm4gZXJyX25vID09IDAKCiIiIgptb2R1bGVfZGljdFsidXJsbGliMyIrb3Muc2VwKyJjb250cmliIitvcy5zZXArIm50bG1wb29sLnB5Il09IiIiClwiXCJcIgpOVExNIGF1dGhlbnRpY2F0aW5nIHBvb2wsIGNvbnRyaWJ1dGVkIGJ5IGVyaWtjZWRlcnN0cmFuCgpJc3N1ZSAjMTAsIHNlZTogaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL3VybGxpYjMvaXNzdWVzL2RldGFpbD9pZD0xMApcIlwiXCIKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhYnNvbHV0ZV9pbXBvcnQKIyA8IGluY2x1ZGUgJ250bG0ucHknID4KCgppbXBvcnQgd2FybmluZ3MKZnJvbSBsb2dnaW5nIGltcG9ydCBnZXRMb2dnZXIKCmZyb20gbnRsbSBpbXBvcnQgbnRsbQoKZnJvbSAuLiBpbXBvcnQgSFRUUFNDb25uZWN0aW9uUG9vbApmcm9tIC4ucGFja2FnZXMuc2l4Lm1vdmVzLmh0dHBfY2xpZW50IGltcG9ydCBIVFRQU0Nvbm5lY3Rpb24KCndhcm5pbmdzLndhcm4oCiAgICBcIlRoZSAndXJsbGliMy5jb250cmliLm50bG1wb29sJyBtb2R1bGUgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIFwiCiAgICBcImluIHVybGxpYjMgdjIuMCByZWxlYXNlLCB1cmxsaWIzIGlzIG5vdCBhYmxlIHRvIHN1cHBvcnQgaXQgcHJvcGVybHkgZHVlIFwiCiAgICBcInRvIHJlYXNvbnMgbGlzdGVkIGluIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vdXJsbGliMy91cmxsaWIzL2lzc3Vlcy8yMjgyLiBcIgogICAgXCJJZiB5b3UgYXJlIGEgdXNlciBvZiB0aGlzIG1vZHVsZSBwbGVhc2UgY29tbWVudCBpbiB0aGUgbWVudGlvbmVkIGlzc3VlLlwiLAogICAgRGVwcmVjYXRpb25XYXJuaW5nLAopCgpsb2cgPSBnZXRMb2dnZXIoX19uYW1lX18pCgoKY2xhc3MgTlRMTUNvbm5lY3Rpb25Qb29sKEhUVFBTQ29ubmVjdGlvblBvb2wpOgogICAgXCJcIlwiCiAgICBJbXBsZW1lbnRzIGFuIE5UTE0gYXV0aGVudGljYXRpb24gdmVyc2lvbiBvZiBhbiB1cmxsaWIzIGNvbm5lY3Rpb24gcG9vbAogICAgXCJcIlwiCgogICAgc2NoZW1lID0gXCJodHRwc1wiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHVzZXIsIHB3LCBhdXRodXJsLCAqYXJncywgKiprd2FyZ3MpOgogICAgICAgIFwiXCJcIgogICAgICAgIGF1dGh1cmwgaXMgYSByYW5kb20gVVJMIG9uIHRoZSBzZXJ2ZXIgdGhhdCBpcyBwcm90ZWN0ZWQgYnkgTlRMTS4KICAgICAgICB1c2VyIGlzIHRoZSBXaW5kb3dzIHVzZXIsIHByb2JhYmx5IGluIHRoZSBET01BSU5cXFxcdXNlcm5hbWUgZm9ybWF0LgogICAgICAgIHB3IGlzIHRoZSBwYXNzd29yZCBmb3IgdGhlIHVzZXIuCiAgICAgICAgXCJcIlwiCiAgICAgICAgc3VwZXIoTlRMTUNvbm5lY3Rpb25Qb29sLCBzZWxmKS5fX2luaXRfXygqYXJncywgKiprd2FyZ3MpCiAgICAgICAgc2VsZi5hdXRodXJsID0gYXV0aHVybAogICAgICAgIHNlbGYucmF3dXNlciA9IHVzZXIKICAgICAgICB1c2VyX3BhcnRzID0gdXNlci5zcGxpdChcIlxcXFxcIiwgMSkKICAgICAgICBzZWxmLmRvbWFpbiA9IHVzZXJfcGFydHNbMF0udXBwZXIoKQogICAgICAgIHNlbGYudXNlciA9IHVzZXJfcGFydHNbMV0KICAgICAgICBzZWxmLnB3ID0gcHcKCiAgICBkZWYgX25ld19jb25uKHNlbGYpOgogICAgICAgICMgUGVyZm9ybXMgdGhlIE5UTE0gaGFuZHNoYWtlIHRoYXQgc2VjdXJlcyB0aGUgY29ubmVjdGlvbi4gVGhlIHNvY2tldAogICAgICAgICMgbXVzdCBiZSBrZXB0IG9wZW4gd2hpbGUgcmVxdWVzdHMgYXJlIHBlcmZvcm1lZC4KICAgICAgICBzZWxmLm51bV9jb25uZWN0aW9ucyArPSAxCiAgICAgICAgbG9nLmRlYnVnKAogICAgICAgICAgICBcIlN0YXJ0aW5nIE5UTE0gSFRUUFMgY29ubmVjdGlvbiBuby4gJWQ6IGh0dHBzOi8vJXMlc1wiLAogICAgICAgICAgICBzZWxmLm51bV9jb25uZWN0aW9ucywKICAgICAgICAgICAgc2VsZi5ob3N0LAogICAgICAgICAgICBzZWxmLmF1dGh1cmwsCiAgICAgICAgKQoKICAgICAgICBoZWFkZXJzID0ge1wiQ29ubmVjdGlvblwiOiBcIktlZXAtQWxpdmVcIn0KICAgICAgICByZXFfaGVhZGVyID0gXCJBdXRob3JpemF0aW9uXCIKICAgICAgICByZXNwX2hlYWRlciA9IFwid3d3LWF1dGhlbnRpY2F0ZVwiCgogICAgICAgIGNvbm4gPSBIVFRQU0Nvbm5lY3Rpb24oaG9zdD1zZWxmLmhvc3QsIHBvcnQ9c2VsZi5wb3J0KQoKICAgICAgICAjIFNlbmQgbmVnb3RpYXRpb24gbWVzc2FnZQogICAgICAgIGhlYWRlcnNbcmVxX2hlYWRlcl0gPSBcIk5UTE0gJXNcIiAlIG50bG0uY3JlYXRlX05UTE1fTkVHT1RJQVRFX01FU1NBR0UoCiAgICAgICAgICAgIHNlbGYucmF3dXNlcgogICAgICAgICkKICAgICAgICBsb2cuZGVidWcoXCJSZXF1ZXN0IGhlYWRlcnM6ICVzXCIsIGhlYWRlcnMpCiAgICAgICAgY29ubi5yZXF1ZXN0KFwiR0VUXCIsIHNlbGYuYXV0aHVybCwgTm9uZSwgaGVhZGVycykKICAgICAgICByZXMgPSBjb25uLmdldHJlc3BvbnNlKCkKICAgICAgICByZXNoZHIgPSBkaWN0KHJlcy5nZXRoZWFkZXJzKCkpCiAgICAgICAgbG9nLmRlYnVnKFwiUmVzcG9uc2Ugc3RhdHVzOiAlcyAlc1wiLCByZXMuc3RhdHVzLCByZXMucmVhc29uKQogICAgICAgIGxvZy5kZWJ1ZyhcIlJlc3BvbnNlIGhlYWRlcnM6ICVzXCIsIHJlc2hkcikKICAgICAgICBsb2cuZGVidWcoXCJSZXNwb25zZSBkYXRhOiAlcyBbLi4uXVwiLCByZXMucmVhZCgxMDApKQoKICAgICAgICAjIFJlbW92ZSB0aGUgcmVmZXJlbmNlIHRvIHRoZSBzb2NrZXQsIHNvIHRoYXQgaXQgY2FuIG5vdCBiZSBjbG9zZWQgYnkKICAgICAgICAjIHRoZSByZXNwb25zZSBvYmplY3QgKHdlIHdhbnQgdG8ga2VlcCB0aGUgc29ja2V0IG9wZW4pCiAgICAgICAgcmVzLmZwID0gTm9uZQoKICAgICAgICAjIFNlcnZlciBzaG91bGQgcmVzcG9uZCB3aXRoIGEgY2hhbGxlbmdlIG1lc3NhZ2UKICAgICAgICBhdXRoX2hlYWRlcl92YWx1ZXMgPSByZXNoZHJbcmVzcF9oZWFkZXJdLnNwbGl0KFwiLCBcIikKICAgICAgICBhdXRoX2hlYWRlcl92YWx1ZSA9IE5vbmUKICAgICAgICBmb3IgcyBpbiBhdXRoX2hlYWRlcl92YWx1ZXM6CiAgICAgICAgICAgIGlmIHNbOjVdID09IFwiTlRMTSBcIjoKICAgICAgICAgICAgICAgIGF1dGhfaGVhZGVyX3ZhbHVlID0gc1s1Ol0KICAgICAgICBpZiBhdXRoX2hlYWRlcl92YWx1ZSBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oCiAgICAgICAgICAgICAgICBcIlVuZXhwZWN0ZWQgJXMgcmVzcG9uc2UgaGVhZGVyOiAlc1wiICUgKHJlc3BfaGVhZGVyLCByZXNoZHJbcmVzcF9oZWFkZXJdKQogICAgICAgICAgICApCgogICAgICAgICMgU2VuZCBhdXRoZW50aWNhdGlvbiBtZXNzYWdlCiAgICAgICAgU2VydmVyQ2hhbGxlbmdlLCBOZWdvdGlhdGVGbGFncyA9IG50bG0ucGFyc2VfTlRMTV9DSEFMTEVOR0VfTUVTU0FHRSgKICAgICAgICAgICAgYXV0aF9oZWFkZXJfdmFsdWUKICAgICAgICApCiAgICAgICAgYXV0aF9tc2cgPSBudGxtLmNyZWF0ZV9OVExNX0FVVEhFTlRJQ0FURV9NRVNTQUdFKAogICAgICAgICAgICBTZXJ2ZXJDaGFsbGVuZ2UsIHNlbGYudXNlciwgc2VsZi5kb21haW4sIHNlbGYucHcsIE5lZ290aWF0ZUZsYWdzCiAgICAgICAgKQogICAgICAgIGhlYWRlcnNbcmVxX2hlYWRlcl0gPSBcIk5UTE0gJXNcIiAlIGF1dGhfbXNnCiAgICAgICAgbG9nLmRlYnVnKFwiUmVxdWVzdCBoZWFkZXJzOiAlc1wiLCBoZWFkZXJzKQogICAgICAgIGNvbm4ucmVxdWVzdChcIkdFVFwiLCBzZWxmLmF1dGh1cmwsIE5vbmUsIGhlYWRlcnMpCiAgICAgICAgcmVzID0gY29ubi5nZXRyZXNwb25zZSgpCiAgICAgICAgbG9nLmRlYnVnKFwiUmVzcG9uc2Ugc3RhdHVzOiAlcyAlc1wiLCByZXMuc3RhdHVzLCByZXMucmVhc29uKQogICAgICAgIGxvZy5kZWJ1ZyhcIlJlc3BvbnNlIGhlYWRlcnM6ICVzXCIsIGRpY3QocmVzLmdldGhlYWRlcnMoKSkpCiAgICAgICAgbG9nLmRlYnVnKFwiUmVzcG9uc2UgZGF0YTogJXMgWy4uLl1cIiwgcmVzLnJlYWQoKVs6MTAwXSkKICAgICAgICBpZiByZXMuc3RhdHVzICE9IDIwMDoKICAgICAgICAgICAgaWYgcmVzLnN0YXR1cyA9PSA0MDE6CiAgICAgICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oXCJTZXJ2ZXIgcmVqZWN0ZWQgcmVxdWVzdDogd3JvbmcgdXNlcm5hbWUgb3IgcGFzc3dvcmRcIikKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKFwiV3Jvbmcgc2VydmVyIHJlc3BvbnNlOiAlcyAlc1wiICUgKHJlcy5zdGF0dXMsIHJlcy5yZWFzb24pKQoKICAgICAgICByZXMuZnAgPSBOb25lCiAgICAgICAgbG9nLmRlYnVnKFwiQ29ubmVjdGlvbiBlc3RhYmxpc2hlZFwiKQogICAgICAgIHJldHVybiBjb25uCgogICAgZGVmIHVybG9wZW4oCiAgICAgICAgc2VsZiwKICAgICAgICBtZXRob2QsCiAgICAgICAgdXJsLAogICAgICAgIGJvZHk9Tm9uZSwKICAgICAgICBoZWFkZXJzPU5vbmUsCiAgICAgICAgcmV0cmllcz0zLAogICAgICAgIHJlZGlyZWN0PVRydWUsCiAgICAgICAgYXNzZXJ0X3NhbWVfaG9zdD1UcnVlLAogICAgKToKICAgICAgICBpZiBoZWFkZXJzIGlzIE5vbmU6CiAgICAgICAgICAgIGhlYWRlcnMgPSB7fQogICAgICAgIGhlYWRlcnNbXCJDb25uZWN0aW9uXCJdID0gXCJLZWVwLUFsaXZlXCIKICAgICAgICByZXR1cm4gc3VwZXIoTlRMTUNvbm5lY3Rpb25Qb29sLCBzZWxmKS51cmxvcGVuKAogICAgICAgICAgICBtZXRob2QsIHVybCwgYm9keSwgaGVhZGVycywgcmV0cmllcywgcmVkaXJlY3QsIGFzc2VydF9zYW1lX2hvc3QKICAgICAgICApCgoiIiIKbW9kdWxlX2RpY3RbInVybGxpYjMiK29zLnNlcCsiY29udHJpYiIrb3Muc2VwKyJzZWN1cmV0cmFuc3BvcnQucHkiXT0iIiIKXCJcIlwiClNlY3VyZVRyYW5wb3J0IHN1cHBvcnQgZm9yIHVybGxpYjMgdmlhIGN0eXBlcy4KClRoaXMgbWFrZXMgcGxhdGZvcm0tbmF0aXZlIFRMUyBhdmFpbGFibGUgdG8gdXJsbGliMyB1c2VycyBvbiBtYWNPUyB3aXRob3V0IHRoZQp1c2Ugb2YgYSBjb21waWxlci4gVGhpcyBpcyBhbiBpbXBvcnRhbnQgZmVhdHVyZSBiZWNhdXNlIHRoZSBQeXRob24gUGFja2FnZQpJbmRleCBpcyBtb3ZpbmcgdG8gYmVjb21lIGEgVExTdjEuMi1vci1oaWdoZXIgc2VydmVyLCBhbmQgdGhlIGRlZmF1bHQgT3BlblNTTAp0aGF0IHNoaXBzIHdpdGggbWFjT1MgaXMgbm90IGNhcGFibGUgb2YgZG9pbmcgVExTdjEuMi4gVGhlIG9ubHkgd2F5IHRvIHJlc29sdmUKdGhpcyBpcyB0byBnaXZlIG1hY09TIHVzZXJzIGFuIGFsdGVybmF0aXZlIHNvbHV0aW9uIHRvIHRoZSBwcm9ibGVtLCBhbmQgdGhhdApzb2x1dGlvbiBpcyB0byB1c2UgU2VjdXJlVHJhbnNwb3J0LgoKV2UgdXNlIGN0eXBlcyBoZXJlIGJlY2F1c2UgdGhpcyBzb2x1dGlvbiBtdXN0IG5vdCByZXF1aXJlIGEgY29tcGlsZXIuIFRoYXQncwpiZWNhdXNlIHBpcCBpcyBub3QgYWxsb3dlZCB0byByZXF1aXJlIGEgY29tcGlsZXIgZWl0aGVyLgoKVGhpcyBpcyBub3QgaW50ZW5kZWQgdG8gYmUgYSBzZXJpb3VzbHkgbG9uZy10ZXJtIHNvbHV0aW9uIHRvIHRoaXMgcHJvYmxlbS4KVGhlIGhvcGUgaXMgdGhhdCBQRVAgNTQzIHdpbGwgZXZlbnR1YWxseSBzb2x2ZSB0aGlzIGlzc3VlIGZvciB1cywgYXQgd2hpY2gKcG9pbnQgd2UgY2FuIHJldGlyZSB0aGlzIGNvbnRyaWIgbW9kdWxlLiBCdXQgaW4gdGhlIHNob3J0IHRlcm0sIHdlIG5lZWQgdG8Kc29sdmUgdGhlIGltcGVuZGluZyB0aXJlIGZpcmUgdGhhdCBpcyBQeXRob24gb24gTWFjIHdpdGhvdXQgdGhpcyBraW5kIG9mCmNvbnRyaWIgbW9kdWxlLiBTby4uLmhlcmUgd2UgYXJlLgoKVG8gdXNlIHRoaXMgbW9kdWxlLCBzaW1wbHkgaW1wb3J0IGFuZCBpbmplY3QgaXQ6OgoKICAgIGltcG9ydCB1cmxsaWIzLmNvbnRyaWIuc2VjdXJldHJhbnNwb3J0CiAgICB1cmxsaWIzLmNvbnRyaWIuc2VjdXJldHJhbnNwb3J0LmluamVjdF9pbnRvX3VybGxpYjMoKQoKSGFwcHkgVExTaW5nIQoKVGhpcyBjb2RlIGlzIGEgYmFzdGFyZGlzZWQgdmVyc2lvbiBvZiB0aGUgY29kZSBmb3VuZCBpbiBXaWxsIEJvbmQncyBvc2NyeXB0bwpsaWJyYXJ5LiBBbiBlbm9ybW91cyBkZWJ0IGlzIG93ZWQgdG8gaGltIGZvciBibGF6aW5nIHRoaXMgdHJhaWwgZm9yIHVzLiBGb3IKdGhhdCByZWFzb24sIHRoaXMgY29kZSBzaG91bGQgYmUgY29uc2lkZXJlZCB0byBiZSBjb3ZlcmVkIGJvdGggYnkgdXJsbGliMydzCmxpY2Vuc2UgYW5kIGJ5IG9zY3J5cHRvJ3M6CgouLiBjb2RlLWJsb2NrOjoKCiAgICBDb3B5cmlnaHQgKGMpIDIwMTUtMjAxNiBXaWxsIEJvbmQgPHdpbGxAd2JvbmQubmV0PgoKICAgIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhCiAgICBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksCiAgICB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uCiAgICB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwKICAgIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZQogICAgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKCiAgICBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbgogICAgYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCgogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUgogICAgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCiAgICBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUKICAgIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIKICAgIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HCiAgICBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSCiAgICBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuClwiXCJcIgpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFic29sdXRlX2ltcG9ydAojIDwgaW5jbHVkZSAnc2l4LnB5JyA+CgoKaW1wb3J0IGNvbnRleHRsaWIKaW1wb3J0IGN0eXBlcwppbXBvcnQgZXJybm8KaW1wb3J0IG9zLnBhdGgKaW1wb3J0IHNodXRpbAppbXBvcnQgc29ja2V0CmltcG9ydCBzc2wKaW1wb3J0IHN0cnVjdAppbXBvcnQgdGhyZWFkaW5nCmltcG9ydCB3ZWFrcmVmCgppbXBvcnQgc2l4Cgpmcm9tIC4uIGltcG9ydCB1dGlsCmZyb20gLi51dGlsLnNzbF8gaW1wb3J0IFBST1RPQ09MX1RMU19DTElFTlQKZnJvbSAuX3NlY3VyZXRyYW5zcG9ydC5iaW5kaW5ncyBpbXBvcnQgQ29yZUZvdW5kYXRpb24sIFNlY3VyaXR5LCBTZWN1cml0eUNvbnN0CmZyb20gLl9zZWN1cmV0cmFuc3BvcnQubG93X2xldmVsIGltcG9ydCAoCiAgICBfYXNzZXJ0X25vX2Vycm9yLAogICAgX2J1aWxkX3Rsc191bmtub3duX2NhX2FsZXJ0LAogICAgX2NlcnRfYXJyYXlfZnJvbV9wZW0sCiAgICBfY3JlYXRlX2Nmc3RyaW5nX2FycmF5LAogICAgX2xvYWRfY2xpZW50X2NlcnRfY2hhaW4sCiAgICBfdGVtcG9yYXJ5X2tleWNoYWluLAopCgp0cnk6ICAjIFBsYXRmb3JtLXNwZWNpZmljOiBQeXRob24gMgogICAgZnJvbSBzb2NrZXQgaW1wb3J0IF9maWxlb2JqZWN0CmV4Y2VwdCBJbXBvcnRFcnJvcjogICMgUGxhdGZvcm0tc3BlY2lmaWM6IFB5dGhvbiAzCiAgICBfZmlsZW9iamVjdCA9IE5vbmUKICAgIGZyb20gLi5wYWNrYWdlcy5iYWNrcG9ydHMubWFrZWZpbGUgaW1wb3J0IGJhY2twb3J0X21ha2VmaWxlCgpfX2FsbF9fID0gW1wiaW5qZWN0X2ludG9fdXJsbGliM1wiLCBcImV4dHJhY3RfZnJvbV91cmxsaWIzXCJdCgojIFNOSSBhbHdheXMgd29ya3MKSEFTX1NOSSA9IFRydWUKCm9yaWdfdXRpbF9IQVNfU05JID0gdXRpbC5IQVNfU05JCm9yaWdfdXRpbF9TU0xDb250ZXh0ID0gdXRpbC5zc2xfLlNTTENvbnRleHQKCiMgVGhpcyBkaWN0aW9uYXJ5IGlzIHVzZWQgYnkgdGhlIHJlYWQgY2FsbGJhY2sgdG8gb2J0YWluIGEgaGFuZGxlIHRvIHRoZQojIGNhbGxpbmcgd3JhcHBlZCBzb2NrZXQuIFRoaXMgaXMgYSBwcmV0dHkgc2lsbHkgYXBwcm9hY2gsIGJ1dCBmb3Igbm93IGl0J2xsCiMgZG8uIEkgZmVlbCBsaWtlIEkgc2hvdWxkIGJlIGFibGUgdG8gc211Z2dsZSBhIGhhbmRsZSB0byB0aGUgd3JhcHBlZCBzb2NrZXQKIyBkaXJlY3RseSBpbiB0aGUgU1NMQ29ubmVjdGlvblJlZiwgYnV0IGZvciBub3cgdGhpcyBhcHByb2FjaCB3aWxsIHdvcmsgSQojIGd1ZXNzLgojCiMgV2UgbmVlZCB0byBsb2NrIGFyb3VuZCB0aGlzIHN0cnVjdHVyZSBmb3IgaW5zZXJ0cywgYnV0IHdlIGRvbid0IGRvIGl0IGZvcgojIHJlYWRzL3dyaXRlcyBpbiB0aGUgY2FsbGJhY2tzLiBUaGUgcmVhc29uaW5nIGhlcmUgZ29lcyBhcyBmb2xsb3dzOgojCiMgICAgMS4gSXQgaXMgbm90IHBvc3NpYmxlIHRvIGNhbGwgaW50byB0aGUgY2FsbGJhY2tzIGJlZm9yZSB0aGUgZGljdGlvbmFyeSBpcwojICAgICAgIHBvcHVsYXRlZCwgc28gb25jZSBpbiB0aGUgY2FsbGJhY2sgdGhlIGlkIG11c3QgYmUgaW4gdGhlIGRpY3Rpb25hcnkuCiMgICAgMi4gVGhlIGNhbGxiYWNrcyBkb24ndCBtdXRhdGUgdGhlIGRpY3Rpb25hcnksIHRoZXkgb25seSByZWFkIGZyb20gaXQsIGFuZAojICAgICAgIHNvIGNhbm5vdCBjb25mbGljdCB3aXRoIGFueSBvZiB0aGUgaW5zZXJ0aW9ucy4KIwojIFRoaXMgaXMgZ29vZDogaWYgd2UgaGFkIHRvIGxvY2sgaW4gdGhlIGNhbGxiYWNrcyB3ZSdkIGRyYXN0aWNhbGx5IHNsb3cgZG93bgojIHRoZSBwZXJmb3JtYW5jZSBvZiB0aGlzIGNvZGUuCl9jb25uZWN0aW9uX3JlZnMgPSB3ZWFrcmVmLldlYWtWYWx1ZURpY3Rpb25hcnkoKQpfY29ubmVjdGlvbl9yZWZfbG9jayA9IHRocmVhZGluZy5Mb2NrKCkKCiMgTGltaXQgd3JpdGVzIHRvIDE2a0IuIFRoaXMgaXMgT3BlblNTTCdzIGxpbWl0LCBidXQgd2UnbGwgY2FyZ28tY3VsdCBpdCBvdmVyCiMgZm9yIG5vIGJldHRlciByZWFzb24gdGhhbiB3ZSBuZWVkICphKiBsaW1pdCwgYW5kIHRoaXMgb25lIGlzIHJpZ2h0IHRoZXJlLgpTU0xfV1JJVEVfQkxPQ0tTSVpFID0gMTYzODQKCiMgVGhpcyBpcyBvdXIgZXF1aXZhbGVudCBvZiB1dGlsLnNzbF8uREVGQVVMVF9DSVBIRVJTLCBidXQgZXhwYW5kZWQgb3V0IHRvCiMgaW5kaXZpZHVhbCBjaXBoZXIgc3VpdGVzLiBXZSBuZWVkIHRvIGRvIHRoaXMgYmVjYXVzZSB0aGlzIGlzIGhvdwojIFNlY3VyZVRyYW5zcG9ydCB3YW50cyB0aGVtLgpDSVBIRVJfU1VJVEVTID0gWwogICAgU2VjdXJpdHlDb25zdC5UTFNfRUNESEVfRUNEU0FfV0lUSF9BRVNfMjU2X0dDTV9TSEEzODQsCiAgICBTZWN1cml0eUNvbnN0LlRMU19FQ0RIRV9FQ0RTQV9XSVRIX0FFU18xMjhfR0NNX1NIQTI1NiwKICAgIFNlY3VyaXR5Q29uc3QuVExTX0VDREhFX1JTQV9XSVRIX0FFU18yNTZfR0NNX1NIQTM4NCwKICAgIFNlY3VyaXR5Q29uc3QuVExTX0VDREhFX1JTQV9XSVRIX0FFU18xMjhfR0NNX1NIQTI1NiwKICAgIFNlY3VyaXR5Q29uc3QuVExTX0VDREhFX0VDRFNBX1dJVEhfQ0hBQ0hBMjBfUE9MWTEzMDVfU0hBMjU2LAogICAgU2VjdXJpdHlDb25zdC5UTFNfRUNESEVfUlNBX1dJVEhfQ0hBQ0hBMjBfUE9MWTEzMDVfU0hBMjU2LAogICAgU2VjdXJpdHlDb25zdC5UTFNfREhFX1JTQV9XSVRIX0FFU18yNTZfR0NNX1NIQTM4NCwKICAgIFNlY3VyaXR5Q29uc3QuVExTX0RIRV9SU0FfV0lUSF9BRVNfMTI4X0dDTV9TSEEyNTYsCiAgICBTZWN1cml0eUNvbnN0LlRMU19FQ0RIRV9FQ0RTQV9XSVRIX0FFU18yNTZfQ0JDX1NIQTM4NCwKICAgIFNlY3VyaXR5Q29uc3QuVExTX0VDREhFX0VDRFNBX1dJVEhfQUVTXzI1Nl9DQkNfU0hBLAogICAgU2VjdXJpdHlDb25zdC5UTFNfRUNESEVfRUNEU0FfV0lUSF9BRVNfMTI4X0NCQ19TSEEyNTYsCiAgICBTZWN1cml0eUNvbnN0LlRMU19FQ0RIRV9FQ0RTQV9XSVRIX0FFU18xMjhfQ0JDX1NIQSwKICAgIFNlY3VyaXR5Q29uc3QuVExTX0VDREhFX1JTQV9XSVRIX0FFU18yNTZfQ0JDX1NIQTM4NCwKICAgIFNlY3VyaXR5Q29uc3QuVExTX0VDREhFX1JTQV9XSVRIX0FFU18yNTZfQ0JDX1NIQSwKICAgIFNlY3VyaXR5Q29uc3QuVExTX0VDREhFX1JTQV9XSVRIX0FFU18xMjhfQ0JDX1NIQTI1NiwKICAgIFNlY3VyaXR5Q29uc3QuVExTX0VDREhFX1JTQV9XSVRIX0FFU18xMjhfQ0JDX1NIQSwKICAgIFNlY3VyaXR5Q29uc3QuVExTX0RIRV9SU0FfV0lUSF9BRVNfMjU2X0NCQ19TSEEyNTYsCiAgICBTZWN1cml0eUNvbnN0LlRMU19ESEVfUlNBX1dJVEhfQUVTXzI1Nl9DQkNfU0hBLAogICAgU2VjdXJpdHlDb25zdC5UTFNfREhFX1JTQV9XSVRIX0FFU18xMjhfQ0JDX1NIQTI1NiwKICAgIFNlY3VyaXR5Q29uc3QuVExTX0RIRV9SU0FfV0lUSF9BRVNfMTI4X0NCQ19TSEEsCiAgICBTZWN1cml0eUNvbnN0LlRMU19BRVNfMjU2X0dDTV9TSEEzODQsCiAgICBTZWN1cml0eUNvbnN0LlRMU19BRVNfMTI4X0dDTV9TSEEyNTYsCiAgICBTZWN1cml0eUNvbnN0LlRMU19SU0FfV0lUSF9BRVNfMjU2X0dDTV9TSEEzODQsCiAgICBTZWN1cml0eUNvbnN0LlRMU19SU0FfV0lUSF9BRVNfMTI4X0dDTV9TSEEyNTYsCiAgICBTZWN1cml0eUNvbnN0LlRMU19BRVNfMTI4X0NDTV84X1NIQTI1NiwKICAgIFNlY3VyaXR5Q29uc3QuVExTX0FFU18xMjhfQ0NNX1NIQTI1NiwKICAgIFNlY3VyaXR5Q29uc3QuVExTX1JTQV9XSVRIX0FFU18yNTZfQ0JDX1NIQTI1NiwKICAgIFNlY3VyaXR5Q29uc3QuVExTX1JTQV9XSVRIX0FFU18xMjhfQ0JDX1NIQTI1NiwKICAgIFNlY3VyaXR5Q29uc3QuVExTX1JTQV9XSVRIX0FFU18yNTZfQ0JDX1NIQSwKICAgIFNlY3VyaXR5Q29uc3QuVExTX1JTQV9XSVRIX0FFU18xMjhfQ0JDX1NIQSwKXQoKIyBCYXNpY2FsbHkgdGhpcyBpcyBzaW1wbGU6IGZvciBQUk9UT0NPTF9TU0x2MjMgd2UgdHVybiBpdCBpbnRvIGEgbG93IG9mCiMgVExTdjEgYW5kIGEgaGlnaCBvZiBUTFN2MS4yLiBGb3IgZXZlcnl0aGluZyBlbHNlLCB3ZSBwaW4gdG8gdGhhdCB2ZXJzaW9uLgojIFRMU3YxIHRvIDEuMiBhcmUgc3VwcG9ydGVkIG9uIG1hY09TIDEwLjgrCl9wcm90b2NvbF90b19taW5fbWF4ID0gewogICAgdXRpbC5QUk9UT0NPTF9UTFM6IChTZWN1cml0eUNvbnN0LmtUTFNQcm90b2NvbDEsIFNlY3VyaXR5Q29uc3Qua1RMU1Byb3RvY29sMTIpLAogICAgUFJPVE9DT0xfVExTX0NMSUVOVDogKFNlY3VyaXR5Q29uc3Qua1RMU1Byb3RvY29sMSwgU2VjdXJpdHlDb25zdC5rVExTUHJvdG9jb2wxMiksCn0KCmlmIGhhc2F0dHIoc3NsLCBcIlBST1RPQ09MX1NTTHYyXCIpOgogICAgX3Byb3RvY29sX3RvX21pbl9tYXhbc3NsLlBST1RPQ09MX1NTTHYyXSA9ICgKICAgICAgICBTZWN1cml0eUNvbnN0LmtTU0xQcm90b2NvbDIsCiAgICAgICAgU2VjdXJpdHlDb25zdC5rU1NMUHJvdG9jb2wyLAogICAgKQppZiBoYXNhdHRyKHNzbCwgXCJQUk9UT0NPTF9TU0x2M1wiKToKICAgIF9wcm90b2NvbF90b19taW5fbWF4W3NzbC5QUk9UT0NPTF9TU0x2M10gPSAoCiAgICAgICAgU2VjdXJpdHlDb25zdC5rU1NMUHJvdG9jb2wzLAogICAgICAgIFNlY3VyaXR5Q29uc3Qua1NTTFByb3RvY29sMywKICAgICkKaWYgaGFzYXR0cihzc2wsIFwiUFJPVE9DT0xfVExTdjFcIik6CiAgICBfcHJvdG9jb2xfdG9fbWluX21heFtzc2wuUFJPVE9DT0xfVExTdjFdID0gKAogICAgICAgIFNlY3VyaXR5Q29uc3Qua1RMU1Byb3RvY29sMSwKICAgICAgICBTZWN1cml0eUNvbnN0LmtUTFNQcm90b2NvbDEsCiAgICApCmlmIGhhc2F0dHIoc3NsLCBcIlBST1RPQ09MX1RMU3YxXzFcIik6CiAgICBfcHJvdG9jb2xfdG9fbWluX21heFtzc2wuUFJPVE9DT0xfVExTdjFfMV0gPSAoCiAgICAgICAgU2VjdXJpdHlDb25zdC5rVExTUHJvdG9jb2wxMSwKICAgICAgICBTZWN1cml0eUNvbnN0LmtUTFNQcm90b2NvbDExLAogICAgKQppZiBoYXNhdHRyKHNzbCwgXCJQUk9UT0NPTF9UTFN2MV8yXCIpOgogICAgX3Byb3RvY29sX3RvX21pbl9tYXhbc3NsLlBST1RPQ09MX1RMU3YxXzJdID0gKAogICAgICAgIFNlY3VyaXR5Q29uc3Qua1RMU1Byb3RvY29sMTIsCiAgICAgICAgU2VjdXJpdHlDb25zdC5rVExTUHJvdG9jb2wxMiwKICAgICkKCgpkZWYgaW5qZWN0X2ludG9fdXJsbGliMygpOgogICAgXCJcIlwiCiAgICBNb25rZXktcGF0Y2ggdXJsbGliMyB3aXRoIFNlY3VyZVRyYW5zcG9ydC1iYWNrZWQgU1NMLXN1cHBvcnQuCiAgICBcIlwiXCIKICAgIHV0aWwuU1NMQ29udGV4dCA9IFNlY3VyZVRyYW5zcG9ydENvbnRleHQKICAgIHV0aWwuc3NsXy5TU0xDb250ZXh0ID0gU2VjdXJlVHJhbnNwb3J0Q29udGV4dAogICAgdXRpbC5IQVNfU05JID0gSEFTX1NOSQogICAgdXRpbC5zc2xfLkhBU19TTkkgPSBIQVNfU05JCiAgICB1dGlsLklTX1NFQ1VSRVRSQU5TUE9SVCA9IFRydWUKICAgIHV0aWwuc3NsXy5JU19TRUNVUkVUUkFOU1BPUlQgPSBUcnVlCgoKZGVmIGV4dHJhY3RfZnJvbV91cmxsaWIzKCk6CiAgICBcIlwiXCIKICAgIFVuZG8gbW9ua2V5LXBhdGNoaW5nIGJ5IDpmdW5jOmBpbmplY3RfaW50b191cmxsaWIzYC4KICAgIFwiXCJcIgogICAgdXRpbC5TU0xDb250ZXh0ID0gb3JpZ191dGlsX1NTTENvbnRleHQKICAgIHV0aWwuc3NsXy5TU0xDb250ZXh0ID0gb3JpZ191dGlsX1NTTENvbnRleHQKICAgIHV0aWwuSEFTX1NOSSA9IG9yaWdfdXRpbF9IQVNfU05JCiAgICB1dGlsLnNzbF8uSEFTX1NOSSA9IG9yaWdfdXRpbF9IQVNfU05JCiAgICB1dGlsLklTX1NFQ1VSRVRSQU5TUE9SVCA9IEZhbHNlCiAgICB1dGlsLnNzbF8uSVNfU0VDVVJFVFJBTlNQT1JUID0gRmFsc2UKCgpkZWYgX3JlYWRfY2FsbGJhY2soY29ubmVjdGlvbl9pZCwgZGF0YV9idWZmZXIsIGRhdGFfbGVuZ3RoX3BvaW50ZXIpOgogICAgXCJcIlwiCiAgICBTZWN1cmVUcmFuc3BvcnQgcmVhZCBjYWxsYmFjay4gVGhpcyBpcyBjYWxsZWQgYnkgU1QgdG8gcmVxdWVzdCB0aGF0IGRhdGEKICAgIGJlIHJldHVybmVkIGZyb20gdGhlIHNvY2tldC4KICAgIFwiXCJcIgogICAgd3JhcHBlZF9zb2NrZXQgPSBOb25lCiAgICB0cnk6CiAgICAgICAgd3JhcHBlZF9zb2NrZXQgPSBfY29ubmVjdGlvbl9yZWZzLmdldChjb25uZWN0aW9uX2lkKQogICAgICAgIGlmIHdyYXBwZWRfc29ja2V0IGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiBTZWN1cml0eUNvbnN0LmVyclNTTEludGVybmFsCiAgICAgICAgYmFzZV9zb2NrZXQgPSB3cmFwcGVkX3NvY2tldC5zb2NrZXQKCiAgICAgICAgcmVxdWVzdGVkX2xlbmd0aCA9IGRhdGFfbGVuZ3RoX3BvaW50ZXJbMF0KCiAgICAgICAgdGltZW91dCA9IHdyYXBwZWRfc29ja2V0LmdldHRpbWVvdXQoKQogICAgICAgIGVycm9yID0gTm9uZQogICAgICAgIHJlYWRfY291bnQgPSAwCgogICAgICAgIHRyeToKICAgICAgICAgICAgd2hpbGUgcmVhZF9jb3VudCA8IHJlcXVlc3RlZF9sZW5ndGg6CiAgICAgICAgICAgICAgICBpZiB0aW1lb3V0IGlzIE5vbmUgb3IgdGltZW91dCA+PSAwOgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB1dGlsLndhaXRfZm9yX3JlYWQoYmFzZV9zb2NrZXQsIHRpbWVvdXQpOgogICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBzb2NrZXQuZXJyb3IoZXJybm8uRUFHQUlOLCBcInRpbWVkIG91dFwiKQoKICAgICAgICAgICAgICAgIHJlbWFpbmluZyA9IHJlcXVlc3RlZF9sZW5ndGggLSByZWFkX2NvdW50CiAgICAgICAgICAgICAgICBidWZmZXIgPSAoY3R5cGVzLmNfY2hhciAqIHJlbWFpbmluZykuZnJvbV9hZGRyZXNzKAogICAgICAgICAgICAgICAgICAgIGRhdGFfYnVmZmVyICsgcmVhZF9jb3VudAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgY2h1bmtfc2l6ZSA9IGJhc2Vfc29ja2V0LnJlY3ZfaW50byhidWZmZXIsIHJlbWFpbmluZykKICAgICAgICAgICAgICAgIHJlYWRfY291bnQgKz0gY2h1bmtfc2l6ZQogICAgICAgICAgICAgICAgaWYgbm90IGNodW5rX3NpemU6CiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHJlYWRfY291bnQ6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTZWN1cml0eUNvbnN0LmVyclNTTENsb3NlZEdyYWNlZnVsCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICBleGNlcHQgKHNvY2tldC5lcnJvcikgYXMgZToKICAgICAgICAgICAgZXJyb3IgPSBlLmVycm5vCgogICAgICAgICAgICBpZiBlcnJvciBpcyBub3QgTm9uZSBhbmQgZXJyb3IgIT0gZXJybm8uRUFHQUlOOgogICAgICAgICAgICAgICAgZGF0YV9sZW5ndGhfcG9pbnRlclswXSA9IHJlYWRfY291bnQKICAgICAgICAgICAgICAgIGlmIGVycm9yID09IGVycm5vLkVDT05OUkVTRVQgb3IgZXJyb3IgPT0gZXJybm8uRVBJUEU6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNlY3VyaXR5Q29uc3QuZXJyU1NMQ2xvc2VkQWJvcnQKICAgICAgICAgICAgICAgIHJhaXNlCgogICAgICAgIGRhdGFfbGVuZ3RoX3BvaW50ZXJbMF0gPSByZWFkX2NvdW50CgogICAgICAgIGlmIHJlYWRfY291bnQgIT0gcmVxdWVzdGVkX2xlbmd0aDoKICAgICAgICAgICAgcmV0dXJuIFNlY3VyaXR5Q29uc3QuZXJyU1NMV291bGRCbG9jawoKICAgICAgICByZXR1cm4gMAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGlmIHdyYXBwZWRfc29ja2V0IGlzIG5vdCBOb25lOgogICAgICAgICAgICB3cmFwcGVkX3NvY2tldC5fZXhjZXB0aW9uID0gZQogICAgICAgIHJldHVybiBTZWN1cml0eUNvbnN0LmVyclNTTEludGVybmFsCgoKZGVmIF93cml0ZV9jYWxsYmFjayhjb25uZWN0aW9uX2lkLCBkYXRhX2J1ZmZlciwgZGF0YV9sZW5ndGhfcG9pbnRlcik6CiAgICBcIlwiXCIKICAgIFNlY3VyZVRyYW5zcG9ydCB3cml0ZSBjYWxsYmFjay4gVGhpcyBpcyBjYWxsZWQgYnkgU1QgdG8gcmVxdWVzdCB0aGF0IGRhdGEKICAgIGFjdHVhbGx5IGJlIHNlbnQgb24gdGhlIG5ldHdvcmsuCiAgICBcIlwiXCIKICAgIHdyYXBwZWRfc29ja2V0ID0gTm9uZQogICAgdHJ5OgogICAgICAgIHdyYXBwZWRfc29ja2V0ID0gX2Nvbm5lY3Rpb25fcmVmcy5nZXQoY29ubmVjdGlvbl9pZCkKICAgICAgICBpZiB3cmFwcGVkX3NvY2tldCBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gU2VjdXJpdHlDb25zdC5lcnJTU0xJbnRlcm5hbAogICAgICAgIGJhc2Vfc29ja2V0ID0gd3JhcHBlZF9zb2NrZXQuc29ja2V0CgogICAgICAgIGJ5dGVzX3RvX3dyaXRlID0gZGF0YV9sZW5ndGhfcG9pbnRlclswXQogICAgICAgIGRhdGEgPSBjdHlwZXMuc3RyaW5nX2F0KGRhdGFfYnVmZmVyLCBieXRlc190b193cml0ZSkKCiAgICAgICAgdGltZW91dCA9IHdyYXBwZWRfc29ja2V0LmdldHRpbWVvdXQoKQogICAgICAgIGVycm9yID0gTm9uZQogICAgICAgIHNlbnQgPSAwCgogICAgICAgIHRyeToKICAgICAgICAgICAgd2hpbGUgc2VudCA8IGJ5dGVzX3RvX3dyaXRlOgogICAgICAgICAgICAgICAgaWYgdGltZW91dCBpcyBOb25lIG9yIHRpbWVvdXQgPj0gMDoKICAgICAgICAgICAgICAgICAgICBpZiBub3QgdXRpbC53YWl0X2Zvcl93cml0ZShiYXNlX3NvY2tldCwgdGltZW91dCk6CiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIHNvY2tldC5lcnJvcihlcnJuby5FQUdBSU4sIFwidGltZWQgb3V0XCIpCiAgICAgICAgICAgICAgICBjaHVua19zZW50ID0gYmFzZV9zb2NrZXQuc2VuZChkYXRhKQogICAgICAgICAgICAgICAgc2VudCArPSBjaHVua19zZW50CgogICAgICAgICAgICAgICAgIyBUaGlzIGhhcyBzb21lIG5lZWRsZXNzIGNvcHlpbmcgaGVyZSwgYnV0IEknbSBub3Qgc3VyZSB0aGVyZSdzCiAgICAgICAgICAgICAgICAjIG11Y2ggdmFsdWUgaW4gb3B0aW1pc2luZyB0aGlzIGRhdGEgcGF0aC4KICAgICAgICAgICAgICAgIGRhdGEgPSBkYXRhW2NodW5rX3NlbnQ6XQogICAgICAgIGV4Y2VwdCAoc29ja2V0LmVycm9yKSBhcyBlOgogICAgICAgICAgICBlcnJvciA9IGUuZXJybm8KCiAgICAgICAgICAgIGlmIGVycm9yIGlzIG5vdCBOb25lIGFuZCBlcnJvciAhPSBlcnJuby5FQUdBSU46CiAgICAgICAgICAgICAgICBkYXRhX2xlbmd0aF9wb2ludGVyWzBdID0gc2VudAogICAgICAgICAgICAgICAgaWYgZXJyb3IgPT0gZXJybm8uRUNPTk5SRVNFVCBvciBlcnJvciA9PSBlcnJuby5FUElQRToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gU2VjdXJpdHlDb25zdC5lcnJTU0xDbG9zZWRBYm9ydAogICAgICAgICAgICAgICAgcmFpc2UKCiAgICAgICAgZGF0YV9sZW5ndGhfcG9pbnRlclswXSA9IHNlbnQKCiAgICAgICAgaWYgc2VudCAhPSBieXRlc190b193cml0ZToKICAgICAgICAgICAgcmV0dXJuIFNlY3VyaXR5Q29uc3QuZXJyU1NMV291bGRCbG9jawoKICAgICAgICByZXR1cm4gMAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGlmIHdyYXBwZWRfc29ja2V0IGlzIG5vdCBOb25lOgogICAgICAgICAgICB3cmFwcGVkX3NvY2tldC5fZXhjZXB0aW9uID0gZQogICAgICAgIHJldHVybiBTZWN1cml0eUNvbnN0LmVyclNTTEludGVybmFsCgoKIyBXZSBuZWVkIHRvIGtlZXAgdGhlc2UgdHdvIG9iamVjdHMgcmVmZXJlbmNlcyBhbGl2ZTogaWYgdGhleSBnZXQgR0MnZCB3aGlsZQojIGluIHVzZSB0aGVuIFNlY3VyZVRyYW5zcG9ydCBjb3VsZCBhdHRlbXB0IHRvIGNhbGwgYSBmdW5jdGlvbiB0aGF0IGlzIGluIGZyZWVkCiMgbWVtb3J5LiBUaGF0IHdvdWxkIGJlLi4udWguLi5iYWQuIFllYWgsIHRoYXQncyB0aGUgd29yZC4gQmFkLgpfcmVhZF9jYWxsYmFja19wb2ludGVyID0gU2VjdXJpdHkuU1NMUmVhZEZ1bmMoX3JlYWRfY2FsbGJhY2spCl93cml0ZV9jYWxsYmFja19wb2ludGVyID0gU2VjdXJpdHkuU1NMV3JpdGVGdW5jKF93cml0ZV9jYWxsYmFjaykKCgpjbGFzcyBXcmFwcGVkU29ja2V0KG9iamVjdCk6CiAgICBcIlwiXCIKICAgIEFQSS1jb21wYXRpYmlsaXR5IHdyYXBwZXIgZm9yIFB5dGhvbidzIE9wZW5TU0wgd3JhcHBlZCBzb2NrZXQgb2JqZWN0LgoKICAgIE5vdGU6IF9tYWtlZmlsZV9yZWZzLCBfZHJvcCgpLCBhbmQgX3JldXNlKCkgYXJlIG5lZWRlZCBmb3IgdGhlIGdhcmJhZ2UKICAgIGNvbGxlY3RvciBvZiBQeVB5LgogICAgXCJcIlwiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHNvY2tldCk6CiAgICAgICAgc2VsZi5zb2NrZXQgPSBzb2NrZXQKICAgICAgICBzZWxmLmNvbnRleHQgPSBOb25lCiAgICAgICAgc2VsZi5fbWFrZWZpbGVfcmVmcyA9IDAKICAgICAgICBzZWxmLl9jbG9zZWQgPSBGYWxzZQogICAgICAgIHNlbGYuX2V4Y2VwdGlvbiA9IE5vbmUKICAgICAgICBzZWxmLl9rZXljaGFpbiA9IE5vbmUKICAgICAgICBzZWxmLl9rZXljaGFpbl9kaXIgPSBOb25lCiAgICAgICAgc2VsZi5fY2xpZW50X2NlcnRfY2hhaW4gPSBOb25lCgogICAgICAgICMgV2Ugc2F2ZSBvZmYgdGhlIHByZXZpb3VzbHktY29uZmlndXJlZCB0aW1lb3V0IGFuZCB0aGVuIHNldCBpdCB0bwogICAgICAgICMgemVyby4gVGhpcyBpcyBkb25lIGJlY2F1c2Ugd2UgdXNlIHNlbGVjdCBhbmQgZnJpZW5kcyB0byBoYW5kbGUgdGhlCiAgICAgICAgIyB0aW1lb3V0cywgYnV0IGlmIHdlIGxlYXZlIHRoZSB0aW1lb3V0IHNldCBvbiB0aGUgbG93ZXIgc29ja2V0IHRoZW4KICAgICAgICAjIFB5dGhvbiB3aWxsIFwia2luZGx5XCIgY2FsbCBzZWxlY3Qgb24gdGhhdCBzb2NrZXQgYWdhaW4gZm9yIHVzLiBBdm9pZAogICAgICAgICMgdGhhdCBieSBmb3JjaW5nIHRoZSB0aW1lb3V0IHRvIHplcm8uCiAgICAgICAgc2VsZi5fdGltZW91dCA9IHNlbGYuc29ja2V0LmdldHRpbWVvdXQoKQogICAgICAgIHNlbGYuc29ja2V0LnNldHRpbWVvdXQoMCkKCiAgICBAY29udGV4dGxpYi5jb250ZXh0bWFuYWdlcgogICAgZGVmIF9yYWlzZV9vbl9lcnJvcihzZWxmKToKICAgICAgICBcIlwiXCIKICAgICAgICBBIGNvbnRleHQgbWFuYWdlciB0aGF0IGNhbiBiZSB1c2VkIHRvIHdyYXAgY2FsbHMgdGhhdCBkbyBJL08gZnJvbQogICAgICAgIFNlY3VyZVRyYW5zcG9ydC4gSWYgYW55IG9mIHRoZSBJL08gY2FsbGJhY2tzIGhpdCBhbiBleGNlcHRpb24sIHRoaXMKICAgICAgICBjb250ZXh0IG1hbmFnZXIgd2lsbCBjb3JyZWN0bHkgcHJvcGFnYXRlIHRoZSBleGNlcHRpb24gYWZ0ZXIgdGhlIGZhY3QuCiAgICAgICAgVGhpcyBhdm9pZHMgc2lsZW50bHkgc3dhbGxvd2luZyB0aG9zZSBleGNlcHRpb25zLgoKICAgICAgICBJdCBhbHNvIGNvcnJlY3RseSBmb3JjZXMgdGhlIHNvY2tldCBjbG9zZWQuCiAgICAgICAgXCJcIlwiCiAgICAgICAgc2VsZi5fZXhjZXB0aW9uID0gTm9uZQoKICAgICAgICAjIFdlIGV4cGxpY2l0bHkgZG9uJ3QgY2F0Y2ggYXJvdW5kIHRoaXMgeWllbGQgYmVjYXVzZSBpbiB0aGUgdW5saWtlbHkKICAgICAgICAjIGV2ZW50IHRoYXQgYW4gZXhjZXB0aW9uIHdhcyBoaXQgaW4gdGhlIGJsb2NrIHdlIGRvbid0IHdhbnQgdG8gc3dhbGxvdwogICAgICAgICMgaXQuCiAgICAgICAgeWllbGQKICAgICAgICBpZiBzZWxmLl9leGNlcHRpb24gaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGV4Y2VwdGlvbiwgc2VsZi5fZXhjZXB0aW9uID0gc2VsZi5fZXhjZXB0aW9uLCBOb25lCiAgICAgICAgICAgIHNlbGYuY2xvc2UoKQogICAgICAgICAgICByYWlzZSBleGNlcHRpb24KCiAgICBkZWYgX3NldF9jaXBoZXJzKHNlbGYpOgogICAgICAgIFwiXCJcIgogICAgICAgIFNldHMgdXAgdGhlIGFsbG93ZWQgY2lwaGVycy4gQnkgZGVmYXVsdCB0aGlzIG1hdGNoZXMgdGhlIHNldCBpbgogICAgICAgIHV0aWwuc3NsXy5ERUZBVUxUX0NJUEhFUlMsIGF0IGxlYXN0IGFzIHN1cHBvcnRlZCBieSBtYWNPUy4gVGhpcyBpcyBkb25lCiAgICAgICAgY3VzdG9tIGFuZCBkb2Vzbid0IGFsbG93IGNoYW5naW5nIGF0IHRoaXMgdGltZSwgbW9zdGx5IGJlY2F1c2UgcGFyc2luZwogICAgICAgIE9wZW5TU0wgY2lwaGVyIHN0cmluZ3MgaXMgZ29pbmcgdG8gYmUgYSBmcmVha2luZyBuaWdodG1hcmUuCiAgICAgICAgXCJcIlwiCiAgICAgICAgY2lwaGVycyA9IChTZWN1cml0eS5TU0xDaXBoZXJTdWl0ZSAqIGxlbihDSVBIRVJfU1VJVEVTKSkoKkNJUEhFUl9TVUlURVMpCiAgICAgICAgcmVzdWx0ID0gU2VjdXJpdHkuU1NMU2V0RW5hYmxlZENpcGhlcnMoCiAgICAgICAgICAgIHNlbGYuY29udGV4dCwgY2lwaGVycywgbGVuKENJUEhFUl9TVUlURVMpCiAgICAgICAgKQogICAgICAgIF9hc3NlcnRfbm9fZXJyb3IocmVzdWx0KQoKICAgIGRlZiBfc2V0X2FscG5fcHJvdG9jb2xzKHNlbGYsIHByb3RvY29scyk6CiAgICAgICAgXCJcIlwiCiAgICAgICAgU2V0cyB1cCB0aGUgQUxQTiBwcm90b2NvbHMgb24gdGhlIGNvbnRleHQuCiAgICAgICAgXCJcIlwiCiAgICAgICAgaWYgbm90IHByb3RvY29sczoKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgcHJvdG9jb2xzX2FyciA9IF9jcmVhdGVfY2ZzdHJpbmdfYXJyYXkocHJvdG9jb2xzKQogICAgICAgIHRyeToKICAgICAgICAgICAgcmVzdWx0ID0gU2VjdXJpdHkuU1NMU2V0QUxQTlByb3RvY29scyhzZWxmLmNvbnRleHQsIHByb3RvY29sc19hcnIpCiAgICAgICAgICAgIF9hc3NlcnRfbm9fZXJyb3IocmVzdWx0KQogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgIENvcmVGb3VuZGF0aW9uLkNGUmVsZWFzZShwcm90b2NvbHNfYXJyKQoKICAgIGRlZiBfY3VzdG9tX3ZhbGlkYXRlKHNlbGYsIHZlcmlmeSwgdHJ1c3RfYnVuZGxlKToKICAgICAgICBcIlwiXCIKICAgICAgICBDYWxsZWQgd2hlbiB3ZSBoYXZlIHNldCBjdXN0b20gdmFsaWRhdGlvbi4gV2UgZG8gdGhpcyBpbiB0d28gY2FzZXM6CiAgICAgICAgZmlyc3QsIHdoZW4gY2VydCB2YWxpZGF0aW9uIGlzIGVudGlyZWx5IGRpc2FibGVkOyBhbmQgc2Vjb25kLCB3aGVuCiAgICAgICAgdXNpbmcgYSBjdXN0b20gdHJ1c3QgREIuCiAgICAgICAgUmFpc2VzIGFuIFNTTEVycm9yIGlmIHRoZSBjb25uZWN0aW9uIGlzIG5vdCB0cnVzdGVkLgogICAgICAgIFwiXCJcIgogICAgICAgICMgSWYgd2UgZGlzYWJsZWQgY2VydCB2YWxpZGF0aW9uLCBqdXN0IHNheTogY29vbC4KICAgICAgICBpZiBub3QgdmVyaWZ5OgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgc3VjY2Vzc2VzID0gKAogICAgICAgICAgICBTZWN1cml0eUNvbnN0LmtTZWNUcnVzdFJlc3VsdFVuc3BlY2lmaWVkLAogICAgICAgICAgICBTZWN1cml0eUNvbnN0LmtTZWNUcnVzdFJlc3VsdFByb2NlZWQsCiAgICAgICAgKQogICAgICAgIHRyeToKICAgICAgICAgICAgdHJ1c3RfcmVzdWx0ID0gc2VsZi5fZXZhbHVhdGVfdHJ1c3QodHJ1c3RfYnVuZGxlKQogICAgICAgICAgICBpZiB0cnVzdF9yZXN1bHQgaW4gc3VjY2Vzc2VzOgogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIHJlYXNvbiA9IFwiZXJyb3IgY29kZTogJWRcIiAlICh0cnVzdF9yZXN1bHQsKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgIyBEbyBub3QgdHJ1c3Qgb24gZXJyb3IKICAgICAgICAgICAgcmVhc29uID0gXCJleGNlcHRpb246ICVyXCIgJSAoZSwpCgogICAgICAgICMgU2VjdXJlVHJhbnNwb3J0IGRvZXMgbm90IHNlbmQgYW4gYWxlcnQgbm9yIHNodXRzIGRvd24gdGhlIGNvbm5lY3Rpb24uCiAgICAgICAgcmVjID0gX2J1aWxkX3Rsc191bmtub3duX2NhX2FsZXJ0KHNlbGYudmVyc2lvbigpKQogICAgICAgIHNlbGYuc29ja2V0LnNlbmRhbGwocmVjKQogICAgICAgICMgY2xvc2UgdGhlIGNvbm5lY3Rpb24gaW1tZWRpYXRlbHkKICAgICAgICAjIGxfb25vZmYgPSAxLCBhY3RpdmF0ZSBsaW5nZXIKICAgICAgICAjIGxfbGluZ2VyID0gMCwgbGluZ2VyIGZvciAwIHNlb25jZHMKICAgICAgICBvcHRzID0gc3RydWN0LnBhY2soXCJpaVwiLCAxLCAwKQogICAgICAgIHNlbGYuc29ja2V0LnNldHNvY2tvcHQoc29ja2V0LlNPTF9TT0NLRVQsIHNvY2tldC5TT19MSU5HRVIsIG9wdHMpCiAgICAgICAgc2VsZi5jbG9zZSgpCiAgICAgICAgcmFpc2Ugc3NsLlNTTEVycm9yKFwiY2VydGlmaWNhdGUgdmVyaWZ5IGZhaWxlZCwgJXNcIiAlIHJlYXNvbikKCiAgICBkZWYgX2V2YWx1YXRlX3RydXN0KHNlbGYsIHRydXN0X2J1bmRsZSk6CiAgICAgICAgIyBXZSB3YW50IGRhdGEgaW4gbWVtb3J5LCBzbyBsb2FkIGl0IHVwLgogICAgICAgIGlmIG9zLnBhdGguaXNmaWxlKHRydXN0X2J1bmRsZSk6CiAgICAgICAgICAgIHdpdGggb3Blbih0cnVzdF9idW5kbGUsIFwicmJcIikgYXMgZjoKICAgICAgICAgICAgICAgIHRydXN0X2J1bmRsZSA9IGYucmVhZCgpCgogICAgICAgIGNlcnRfYXJyYXkgPSBOb25lCiAgICAgICAgdHJ1c3QgPSBTZWN1cml0eS5TZWNUcnVzdFJlZigpCgogICAgICAgIHRyeToKICAgICAgICAgICAgIyBHZXQgYSBDRkFycmF5IHRoYXQgY29udGFpbnMgdGhlIGNlcnRzIHdlIHdhbnQuCiAgICAgICAgICAgIGNlcnRfYXJyYXkgPSBfY2VydF9hcnJheV9mcm9tX3BlbSh0cnVzdF9idW5kbGUpCgogICAgICAgICAgICAjIE9rLCBub3cgdGhlIGhhcmQgcGFydC4gV2Ugd2FudCB0byBnZXQgdGhlIFNlY1RydXN0UmVmIHRoYXQgU1QgaGFzCiAgICAgICAgICAgICMgY3JlYXRlZCBmb3IgdGhpcyBjb25uZWN0aW9uLCBzaG92ZSBvdXIgQ0FzIGludG8gaXQsIHRlbGwgU1QgdG8KICAgICAgICAgICAgIyBpZ25vcmUgZXZlcnl0aGluZyBlbHNlIGl0IGtub3dzLCBhbmQgdGhlbiBhc2sgaWYgaXQgY2FuIGJ1aWxkIGEKICAgICAgICAgICAgIyBjaGFpbi4gVGhpcyBpcyBhIGJ1dXV1bmNoIG9mIGNvZGUuCiAgICAgICAgICAgIHJlc3VsdCA9IFNlY3VyaXR5LlNTTENvcHlQZWVyVHJ1c3Qoc2VsZi5jb250ZXh0LCBjdHlwZXMuYnlyZWYodHJ1c3QpKQogICAgICAgICAgICBfYXNzZXJ0X25vX2Vycm9yKHJlc3VsdCkKICAgICAgICAgICAgaWYgbm90IHRydXN0OgogICAgICAgICAgICAgICAgcmFpc2Ugc3NsLlNTTEVycm9yKFwiRmFpbGVkIHRvIGNvcHkgdHJ1c3QgcmVmZXJlbmNlXCIpCgogICAgICAgICAgICByZXN1bHQgPSBTZWN1cml0eS5TZWNUcnVzdFNldEFuY2hvckNlcnRpZmljYXRlcyh0cnVzdCwgY2VydF9hcnJheSkKICAgICAgICAgICAgX2Fzc2VydF9ub19lcnJvcihyZXN1bHQpCgogICAgICAgICAgICByZXN1bHQgPSBTZWN1cml0eS5TZWNUcnVzdFNldEFuY2hvckNlcnRpZmljYXRlc09ubHkodHJ1c3QsIFRydWUpCiAgICAgICAgICAgIF9hc3NlcnRfbm9fZXJyb3IocmVzdWx0KQoKICAgICAgICAgICAgdHJ1c3RfcmVzdWx0ID0gU2VjdXJpdHkuU2VjVHJ1c3RSZXN1bHRUeXBlKCkKICAgICAgICAgICAgcmVzdWx0ID0gU2VjdXJpdHkuU2VjVHJ1c3RFdmFsdWF0ZSh0cnVzdCwgY3R5cGVzLmJ5cmVmKHRydXN0X3Jlc3VsdCkpCiAgICAgICAgICAgIF9hc3NlcnRfbm9fZXJyb3IocmVzdWx0KQogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgIGlmIHRydXN0OgogICAgICAgICAgICAgICAgQ29yZUZvdW5kYXRpb24uQ0ZSZWxlYXNlKHRydXN0KQoKICAgICAgICAgICAgaWYgY2VydF9hcnJheSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIENvcmVGb3VuZGF0aW9uLkNGUmVsZWFzZShjZXJ0X2FycmF5KQoKICAgICAgICByZXR1cm4gdHJ1c3RfcmVzdWx0LnZhbHVlCgogICAgZGVmIGhhbmRzaGFrZSgKICAgICAgICBzZWxmLAogICAgICAgIHNlcnZlcl9ob3N0bmFtZSwKICAgICAgICB2ZXJpZnksCiAgICAgICAgdHJ1c3RfYnVuZGxlLAogICAgICAgIG1pbl92ZXJzaW9uLAogICAgICAgIG1heF92ZXJzaW9uLAogICAgICAgIGNsaWVudF9jZXJ0LAogICAgICAgIGNsaWVudF9rZXksCiAgICAgICAgY2xpZW50X2tleV9wYXNzcGhyYXNlLAogICAgICAgIGFscG5fcHJvdG9jb2xzLAogICAgKToKICAgICAgICBcIlwiXCIKICAgICAgICBBY3R1YWxseSBwZXJmb3JtcyB0aGUgVExTIGhhbmRzaGFrZS4gVGhpcyBpcyBydW4gYXV0b21hdGljYWxseSBieQogICAgICAgIHdyYXBwZWQgc29ja2V0LCBhbmQgc2hvdWxkbid0IGJlIG5lZWRlZCBpbiB1c2VyIGNvZGUuCiAgICAgICAgXCJcIlwiCiAgICAgICAgIyBGaXJzdCwgd2UgZG8gdGhlIGluaXRpYWwgYml0cyBvZiBjb25uZWN0aW9uIHNldHVwLiBXZSBuZWVkIHRvIGNyZWF0ZQogICAgICAgICMgYSBjb250ZXh0LCBzZXQgaXRzIEkvTyBmdW5jcywgYW5kIHNldCB0aGUgY29ubmVjdGlvbiByZWZlcmVuY2UuCiAgICAgICAgc2VsZi5jb250ZXh0ID0gU2VjdXJpdHkuU1NMQ3JlYXRlQ29udGV4dCgKICAgICAgICAgICAgTm9uZSwgU2VjdXJpdHlDb25zdC5rU1NMQ2xpZW50U2lkZSwgU2VjdXJpdHlDb25zdC5rU1NMU3RyZWFtVHlwZQogICAgICAgICkKICAgICAgICByZXN1bHQgPSBTZWN1cml0eS5TU0xTZXRJT0Z1bmNzKAogICAgICAgICAgICBzZWxmLmNvbnRleHQsIF9yZWFkX2NhbGxiYWNrX3BvaW50ZXIsIF93cml0ZV9jYWxsYmFja19wb2ludGVyCiAgICAgICAgKQogICAgICAgIF9hc3NlcnRfbm9fZXJyb3IocmVzdWx0KQoKICAgICAgICAjIEhlcmUgd2UgbmVlZCB0byBjb21wdXRlIHRoZSBoYW5kbGUgdG8gdXNlLiBXZSBkbyB0aGlzIGJ5IHRha2luZyB0aGUKICAgICAgICAjIGlkIG9mIHNlbGYgbW9kdWxvIDIqKjMxIC0gMS4gSWYgdGhpcyBpcyBhbHJlYWR5IGluIHRoZSBkaWN0aW9uYXJ5LCB3ZQogICAgICAgICMganVzdCBrZWVwIGluY3JlbWVudGluZyBieSBvbmUgdW50aWwgd2UgZmluZCBhIGZyZWUgc3BhY2UuCiAgICAgICAgd2l0aCBfY29ubmVjdGlvbl9yZWZfbG9jazoKICAgICAgICAgICAgaGFuZGxlID0gaWQoc2VsZikgJSAyMTQ3NDgzNjQ3CiAgICAgICAgICAgIHdoaWxlIGhhbmRsZSBpbiBfY29ubmVjdGlvbl9yZWZzOgogICAgICAgICAgICAgICAgaGFuZGxlID0gKGhhbmRsZSArIDEpICUgMjE0NzQ4MzY0NwogICAgICAgICAgICBfY29ubmVjdGlvbl9yZWZzW2hhbmRsZV0gPSBzZWxmCgogICAgICAgIHJlc3VsdCA9IFNlY3VyaXR5LlNTTFNldENvbm5lY3Rpb24oc2VsZi5jb250ZXh0LCBoYW5kbGUpCiAgICAgICAgX2Fzc2VydF9ub19lcnJvcihyZXN1bHQpCgogICAgICAgICMgSWYgd2UgaGF2ZSBhIHNlcnZlciBob3N0bmFtZSwgd2Ugc2hvdWxkIHNldCB0aGF0IHRvby4KICAgICAgICBpZiBzZXJ2ZXJfaG9zdG5hbWU6CiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHNlcnZlcl9ob3N0bmFtZSwgYnl0ZXMpOgogICAgICAgICAgICAgICAgc2VydmVyX2hvc3RuYW1lID0gc2VydmVyX2hvc3RuYW1lLmVuY29kZShcInV0Zi04XCIpCgogICAgICAgICAgICByZXN1bHQgPSBTZWN1cml0eS5TU0xTZXRQZWVyRG9tYWluTmFtZSgKICAgICAgICAgICAgICAgIHNlbGYuY29udGV4dCwgc2VydmVyX2hvc3RuYW1lLCBsZW4oc2VydmVyX2hvc3RuYW1lKQogICAgICAgICAgICApCiAgICAgICAgICAgIF9hc3NlcnRfbm9fZXJyb3IocmVzdWx0KQoKICAgICAgICAjIFNldHVwIHRoZSBjaXBoZXJzLgogICAgICAgIHNlbGYuX3NldF9jaXBoZXJzKCkKCiAgICAgICAgIyBTZXR1cCB0aGUgQUxQTiBwcm90b2NvbHMuCiAgICAgICAgc2VsZi5fc2V0X2FscG5fcHJvdG9jb2xzKGFscG5fcHJvdG9jb2xzKQoKICAgICAgICAjIFNldCB0aGUgbWluaW11bSBhbmQgbWF4aW11bSBUTFMgdmVyc2lvbnMuCiAgICAgICAgcmVzdWx0ID0gU2VjdXJpdHkuU1NMU2V0UHJvdG9jb2xWZXJzaW9uTWluKHNlbGYuY29udGV4dCwgbWluX3ZlcnNpb24pCiAgICAgICAgX2Fzc2VydF9ub19lcnJvcihyZXN1bHQpCgogICAgICAgIHJlc3VsdCA9IFNlY3VyaXR5LlNTTFNldFByb3RvY29sVmVyc2lvbk1heChzZWxmLmNvbnRleHQsIG1heF92ZXJzaW9uKQogICAgICAgIF9hc3NlcnRfbm9fZXJyb3IocmVzdWx0KQoKICAgICAgICAjIElmIHRoZXJlJ3MgYSB0cnVzdCBEQiwgd2UgbmVlZCB0byB1c2UgaXQuIFdlIGRvIHRoYXQgYnkgdGVsbGluZwogICAgICAgICMgU2VjdXJlVHJhbnNwb3J0IHRvIGJyZWFrIG9uIHNlcnZlciBhdXRoLiBXZSBhbHNvIGRvIHRoYXQgaWYgd2UgZG9uJ3QKICAgICAgICAjIHdhbnQgdG8gdmFsaWRhdGUgdGhlIGNlcnRzIGF0IGFsbDogd2UganVzdCB3b24ndCBhY3R1YWxseSBkbyBhbnkKICAgICAgICAjIGF1dGhpbmcgaW4gdGhhdCBjYXNlLgogICAgICAgIGlmIG5vdCB2ZXJpZnkgb3IgdHJ1c3RfYnVuZGxlIGlzIG5vdCBOb25lOgogICAgICAgICAgICByZXN1bHQgPSBTZWN1cml0eS5TU0xTZXRTZXNzaW9uT3B0aW9uKAogICAgICAgICAgICAgICAgc2VsZi5jb250ZXh0LCBTZWN1cml0eUNvbnN0LmtTU0xTZXNzaW9uT3B0aW9uQnJlYWtPblNlcnZlckF1dGgsIFRydWUKICAgICAgICAgICAgKQogICAgICAgICAgICBfYXNzZXJ0X25vX2Vycm9yKHJlc3VsdCkKCiAgICAgICAgIyBJZiB0aGVyZSdzIGEgY2xpZW50IGNlcnQsIHdlIG5lZWQgdG8gdXNlIGl0LgogICAgICAgIGlmIGNsaWVudF9jZXJ0OgogICAgICAgICAgICBzZWxmLl9rZXljaGFpbiwgc2VsZi5fa2V5Y2hhaW5fZGlyID0gX3RlbXBvcmFyeV9rZXljaGFpbigpCiAgICAgICAgICAgIHNlbGYuX2NsaWVudF9jZXJ0X2NoYWluID0gX2xvYWRfY2xpZW50X2NlcnRfY2hhaW4oCiAgICAgICAgICAgICAgICBzZWxmLl9rZXljaGFpbiwgY2xpZW50X2NlcnQsIGNsaWVudF9rZXkKICAgICAgICAgICAgKQogICAgICAgICAgICByZXN1bHQgPSBTZWN1cml0eS5TU0xTZXRDZXJ0aWZpY2F0ZShzZWxmLmNvbnRleHQsIHNlbGYuX2NsaWVudF9jZXJ0X2NoYWluKQogICAgICAgICAgICBfYXNzZXJ0X25vX2Vycm9yKHJlc3VsdCkKCiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgd2l0aCBzZWxmLl9yYWlzZV9vbl9lcnJvcigpOgogICAgICAgICAgICAgICAgcmVzdWx0ID0gU2VjdXJpdHkuU1NMSGFuZHNoYWtlKHNlbGYuY29udGV4dCkKCiAgICAgICAgICAgICAgICBpZiByZXN1bHQgPT0gU2VjdXJpdHlDb25zdC5lcnJTU0xXb3VsZEJsb2NrOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIHNvY2tldC50aW1lb3V0KFwiaGFuZHNoYWtlIHRpbWVkIG91dFwiKQogICAgICAgICAgICAgICAgZWxpZiByZXN1bHQgPT0gU2VjdXJpdHlDb25zdC5lcnJTU0xTZXJ2ZXJBdXRoQ29tcGxldGVkOgogICAgICAgICAgICAgICAgICAgIHNlbGYuX2N1c3RvbV92YWxpZGF0ZSh2ZXJpZnksIHRydXN0X2J1bmRsZSkKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBfYXNzZXJ0X25vX2Vycm9yKHJlc3VsdCkKICAgICAgICAgICAgICAgICAgICBicmVhawoKICAgIGRlZiBmaWxlbm8oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuc29ja2V0LmZpbGVubygpCgogICAgIyBDb3B5LXBhc3RlZCBmcm9tIFB5dGhvbiAzLjUgc291cmNlIGNvZGUKICAgIGRlZiBfZGVjcmVmX3NvY2tldGlvcyhzZWxmKToKICAgICAgICBpZiBzZWxmLl9tYWtlZmlsZV9yZWZzID4gMDoKICAgICAgICAgICAgc2VsZi5fbWFrZWZpbGVfcmVmcyAtPSAxCiAgICAgICAgaWYgc2VsZi5fY2xvc2VkOgogICAgICAgICAgICBzZWxmLmNsb3NlKCkKCiAgICBkZWYgcmVjdihzZWxmLCBidWZzaXopOgogICAgICAgIGJ1ZmZlciA9IGN0eXBlcy5jcmVhdGVfc3RyaW5nX2J1ZmZlcihidWZzaXopCiAgICAgICAgYnl0ZXNfcmVhZCA9IHNlbGYucmVjdl9pbnRvKGJ1ZmZlciwgYnVmc2l6KQogICAgICAgIGRhdGEgPSBidWZmZXJbOmJ5dGVzX3JlYWRdCiAgICAgICAgcmV0dXJuIGRhdGEKCiAgICBkZWYgcmVjdl9pbnRvKHNlbGYsIGJ1ZmZlciwgbmJ5dGVzPU5vbmUpOgogICAgICAgICMgUmVhZCBzaG9ydCBvbiBFT0YuCiAgICAgICAgaWYgc2VsZi5fY2xvc2VkOgogICAgICAgICAgICByZXR1cm4gMAoKICAgICAgICBpZiBuYnl0ZXMgaXMgTm9uZToKICAgICAgICAgICAgbmJ5dGVzID0gbGVuKGJ1ZmZlcikKCiAgICAgICAgYnVmZmVyID0gKGN0eXBlcy5jX2NoYXIgKiBuYnl0ZXMpLmZyb21fYnVmZmVyKGJ1ZmZlcikKICAgICAgICBwcm9jZXNzZWRfYnl0ZXMgPSBjdHlwZXMuY19zaXplX3QoMCkKCiAgICAgICAgd2l0aCBzZWxmLl9yYWlzZV9vbl9lcnJvcigpOgogICAgICAgICAgICByZXN1bHQgPSBTZWN1cml0eS5TU0xSZWFkKAogICAgICAgICAgICAgICAgc2VsZi5jb250ZXh0LCBidWZmZXIsIG5ieXRlcywgY3R5cGVzLmJ5cmVmKHByb2Nlc3NlZF9ieXRlcykKICAgICAgICAgICAgKQoKICAgICAgICAjIFRoZXJlIGFyZSBzb21lIHJlc3VsdCBjb2RlcyB0aGF0IHdlIHdhbnQgdG8gdHJlYXQgYXMgXCJub3QgYWx3YXlzCiAgICAgICAgIyBlcnJvcnNcIi4gU3BlY2lmaWNhbGx5LCB0aG9zZSBhcmUgZXJyU1NMV291bGRCbG9jaywKICAgICAgICAjIGVyclNTTENsb3NlZEdyYWNlZnVsLCBhbmQgZXJyU1NMQ2xvc2VkTm9Ob3RpZnkuCiAgICAgICAgaWYgcmVzdWx0ID09IFNlY3VyaXR5Q29uc3QuZXJyU1NMV291bGRCbG9jazoKICAgICAgICAgICAgIyBJZiB3ZSBkaWRuJ3QgcHJvY2VzcyBhbnkgYnl0ZXMsIHRoZW4gdGhpcyB3YXMganVzdCBhIHRpbWUgb3V0LgogICAgICAgICAgICAjIEhvd2V2ZXIsIHdlIGNhbiBnZXQgZXJyU1NMV291bGRCbG9jayBpbiBzaXR1YXRpb25zIHdoZW4gd2UgKmRpZCoKICAgICAgICAgICAgIyByZWFkIHNvbWUgZGF0YSwgYW5kIGluIHRob3NlIGNhc2VzIHdlIHNob3VsZCBqdXN0IHJlYWQgXCJzaG9ydFwiCiAgICAgICAgICAgICMgYW5kIHJldHVybi4KICAgICAgICAgICAgaWYgcHJvY2Vzc2VkX2J5dGVzLnZhbHVlID09IDA6CiAgICAgICAgICAgICAgICAjIFRpbWVkIG91dCwgbm8gZGF0YSByZWFkLgogICAgICAgICAgICAgICAgcmFpc2Ugc29ja2V0LnRpbWVvdXQoXCJyZWN2IHRpbWVkIG91dFwiKQogICAgICAgIGVsaWYgcmVzdWx0IGluICgKICAgICAgICAgICAgU2VjdXJpdHlDb25zdC5lcnJTU0xDbG9zZWRHcmFjZWZ1bCwKICAgICAgICAgICAgU2VjdXJpdHlDb25zdC5lcnJTU0xDbG9zZWROb05vdGlmeSwKICAgICAgICApOgogICAgICAgICAgICAjIFRoZSByZW1vdGUgcGVlciBoYXMgY2xvc2VkIHRoaXMgY29ubmVjdGlvbi4gV2Ugc2hvdWxkIGRvIHNvIGFzCiAgICAgICAgICAgICMgd2VsbC4gTm90ZSB0aGF0IHdlIGRvbid0IGFjdHVhbGx5IHJldHVybiBoZXJlIGJlY2F1c2UgaW4KICAgICAgICAgICAgIyBwcmluY2lwbGUgdGhpcyBjb3VsZCBhY3R1YWxseSBiZSBmaXJlZCBhbG9uZyB3aXRoIHJldHVybiBkYXRhLgogICAgICAgICAgICAjIEl0J3MgdW5saWtlbHkgdGhvdWdoLgogICAgICAgICAgICBzZWxmLmNsb3NlKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBfYXNzZXJ0X25vX2Vycm9yKHJlc3VsdCkKCiAgICAgICAgIyBPaywgd2UgcmVhZCBhbmQgcHJvYmFibHkgc3VjY2VlZGVkLiBXZSBzaG91bGQgcmV0dXJuIHdoYXRldmVyIGRhdGEKICAgICAgICAjIHdhcyBhY3R1YWxseSByZWFkLgogICAgICAgIHJldHVybiBwcm9jZXNzZWRfYnl0ZXMudmFsdWUKCiAgICBkZWYgc2V0dGltZW91dChzZWxmLCB0aW1lb3V0KToKICAgICAgICBzZWxmLl90aW1lb3V0ID0gdGltZW91dAoKICAgIGRlZiBnZXR0aW1lb3V0KHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLl90aW1lb3V0CgogICAgZGVmIHNlbmQoc2VsZiwgZGF0YSk6CiAgICAgICAgcHJvY2Vzc2VkX2J5dGVzID0gY3R5cGVzLmNfc2l6ZV90KDApCgogICAgICAgIHdpdGggc2VsZi5fcmFpc2Vfb25fZXJyb3IoKToKICAgICAgICAgICAgcmVzdWx0ID0gU2VjdXJpdHkuU1NMV3JpdGUoCiAgICAgICAgICAgICAgICBzZWxmLmNvbnRleHQsIGRhdGEsIGxlbihkYXRhKSwgY3R5cGVzLmJ5cmVmKHByb2Nlc3NlZF9ieXRlcykKICAgICAgICAgICAgKQoKICAgICAgICBpZiByZXN1bHQgPT0gU2VjdXJpdHlDb25zdC5lcnJTU0xXb3VsZEJsb2NrIGFuZCBwcm9jZXNzZWRfYnl0ZXMudmFsdWUgPT0gMDoKICAgICAgICAgICAgIyBUaW1lZCBvdXQKICAgICAgICAgICAgcmFpc2Ugc29ja2V0LnRpbWVvdXQoXCJzZW5kIHRpbWVkIG91dFwiKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIF9hc3NlcnRfbm9fZXJyb3IocmVzdWx0KQoKICAgICAgICAjIFdlIHNlbnQsIGFuZCBwcm9iYWJseSBzdWNjZWVkZWQuIFRlbGwgdGhlbSBob3cgbXVjaCB3ZSBzZW50LgogICAgICAgIHJldHVybiBwcm9jZXNzZWRfYnl0ZXMudmFsdWUKCiAgICBkZWYgc2VuZGFsbChzZWxmLCBkYXRhKToKICAgICAgICB0b3RhbF9zZW50ID0gMAogICAgICAgIHdoaWxlIHRvdGFsX3NlbnQgPCBsZW4oZGF0YSk6CiAgICAgICAgICAgIHNlbnQgPSBzZWxmLnNlbmQoZGF0YVt0b3RhbF9zZW50IDogdG90YWxfc2VudCArIFNTTF9XUklURV9CTE9DS1NJWkVdKQogICAgICAgICAgICB0b3RhbF9zZW50ICs9IHNlbnQKCiAgICBkZWYgc2h1dGRvd24oc2VsZik6CiAgICAgICAgd2l0aCBzZWxmLl9yYWlzZV9vbl9lcnJvcigpOgogICAgICAgICAgICBTZWN1cml0eS5TU0xDbG9zZShzZWxmLmNvbnRleHQpCgogICAgZGVmIGNsb3NlKHNlbGYpOgogICAgICAgICMgVE9ETzogc2hvdWxkIEkgZG8gY2xlYW4gc2h1dGRvd24gaGVyZT8gRG8gSSBoYXZlIHRvPwogICAgICAgIGlmIHNlbGYuX21ha2VmaWxlX3JlZnMgPCAxOgogICAgICAgICAgICBzZWxmLl9jbG9zZWQgPSBUcnVlCiAgICAgICAgICAgIGlmIHNlbGYuY29udGV4dDoKICAgICAgICAgICAgICAgIENvcmVGb3VuZGF0aW9uLkNGUmVsZWFzZShzZWxmLmNvbnRleHQpCiAgICAgICAgICAgICAgICBzZWxmLmNvbnRleHQgPSBOb25lCiAgICAgICAgICAgIGlmIHNlbGYuX2NsaWVudF9jZXJ0X2NoYWluOgogICAgICAgICAgICAgICAgQ29yZUZvdW5kYXRpb24uQ0ZSZWxlYXNlKHNlbGYuX2NsaWVudF9jZXJ0X2NoYWluKQogICAgICAgICAgICAgICAgc2VsZi5fY2xpZW50X2NlcnRfY2hhaW4gPSBOb25lCiAgICAgICAgICAgIGlmIHNlbGYuX2tleWNoYWluOgogICAgICAgICAgICAgICAgU2VjdXJpdHkuU2VjS2V5Y2hhaW5EZWxldGUoc2VsZi5fa2V5Y2hhaW4pCiAgICAgICAgICAgICAgICBDb3JlRm91bmRhdGlvbi5DRlJlbGVhc2Uoc2VsZi5fa2V5Y2hhaW4pCiAgICAgICAgICAgICAgICBzaHV0aWwucm10cmVlKHNlbGYuX2tleWNoYWluX2RpcikKICAgICAgICAgICAgICAgIHNlbGYuX2tleWNoYWluID0gc2VsZi5fa2V5Y2hhaW5fZGlyID0gTm9uZQogICAgICAgICAgICByZXR1cm4gc2VsZi5zb2NrZXQuY2xvc2UoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuX21ha2VmaWxlX3JlZnMgLT0gMQoKICAgIGRlZiBnZXRwZWVyY2VydChzZWxmLCBiaW5hcnlfZm9ybT1GYWxzZSk6CiAgICAgICAgIyBVcmdoLCBhbm5veWluZy4KICAgICAgICAjCiAgICAgICAgIyBIZXJlJ3MgaG93IHdlIGRvIHRoaXM6CiAgICAgICAgIwogICAgICAgICMgMS4gQ2FsbCBTU0xDb3B5UGVlclRydXN0IHRvIGdldCBob2xkIG9mIHRoZSB0cnVzdCBvYmplY3QgZm9yIHRoaXMKICAgICAgICAjICAgIGNvbm5lY3Rpb24uCiAgICAgICAgIyAyLiBDYWxsIFNlY1RydXN0R2V0Q2VydGlmaWNhdGVBdEluZGV4IGZvciBpbmRleCAwIHRvIGdldCB0aGUgbGVhZi4KICAgICAgICAjIDMuIFRvIGdldCB0aGUgQ04sIGNhbGwgU2VjQ2VydGlmaWNhdGVDb3B5Q29tbW9uTmFtZSBhbmQgcHJvY2VzcyB0aGF0CiAgICAgICAgIyAgICBzdHJpbmcgc28gdGhhdCBpdCdzIG9mIHRoZSBhcHByb3ByaWF0ZSB0eXBlLgogICAgICAgICMgNC4gVG8gZ2V0IHRoZSBTQU4sIHdlIG5lZWQgdG8gZG8gc29tZXRoaW5nIGEgYml0IG1vcmUgY29tcGxleDoKICAgICAgICAjICAgIGEuIENhbGwgU2VjQ2VydGlmaWNhdGVDb3B5VmFsdWVzIHRvIGdldCB0aGUgZGF0YSwgcmVxdWVzdGluZwogICAgICAgICMgICAgICAga1NlY09JRFN1YmplY3RBbHROYW1lLgogICAgICAgICMgICAgYi4gTWVzcyBhYm91dCB3aXRoIHRoaXMgZGljdGlvbmFyeSB0byB0cnkgdG8gZ2V0IHRoZSBTQU5zIG91dC4KICAgICAgICAjCiAgICAgICAgIyBUaGlzIGlzIGdyb3NzLiBSZWFsbHkgZ3Jvc3MuIEl0J3MgZ29pbmcgdG8gYmUgYSBmZXcgaHVuZHJlZCBMb0MgZXh0cmEKICAgICAgICAjIGp1c3QgdG8gcmVwZWF0IHNvbWV0aGluZyB0aGF0IFNlY3VyZVRyYW5zcG9ydCBjYW4gKmFscmVhZHkgZG8qLiBTbyBteQogICAgICAgICMgb3BlcmF0aW5nIGFzc3VtcHRpb24gYXQgdGhpcyB0aW1lIGlzIHRoYXQgd2hhdCB3ZSB3YW50IHRvIGRvIGlzCiAgICAgICAgIyBpbnN0ZWFkIHRvIGp1c3QgZmxhZyB0byB1cmxsaWIzIHRoYXQgaXQgc2hvdWxkbid0IGRvIGl0cyBvd24gaG9zdG5hbWUKICAgICAgICAjIHZhbGlkYXRpb24gd2hlbiB1c2luZyBTZWN1cmVUcmFuc3BvcnQuCiAgICAgICAgaWYgbm90IGJpbmFyeV9mb3JtOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFwiU2VjdXJlVHJhbnNwb3J0IG9ubHkgc3VwcG9ydHMgZHVtcGluZyBiaW5hcnkgY2VydHNcIikKICAgICAgICB0cnVzdCA9IFNlY3VyaXR5LlNlY1RydXN0UmVmKCkKICAgICAgICBjZXJ0ZGF0YSA9IE5vbmUKICAgICAgICBkZXJfYnl0ZXMgPSBOb25lCgogICAgICAgIHRyeToKICAgICAgICAgICAgIyBHcmFiIHRoZSB0cnVzdCBzdG9yZS4KICAgICAgICAgICAgcmVzdWx0ID0gU2VjdXJpdHkuU1NMQ29weVBlZXJUcnVzdChzZWxmLmNvbnRleHQsIGN0eXBlcy5ieXJlZih0cnVzdCkpCiAgICAgICAgICAgIF9hc3NlcnRfbm9fZXJyb3IocmVzdWx0KQogICAgICAgICAgICBpZiBub3QgdHJ1c3Q6CiAgICAgICAgICAgICAgICAjIFByb2JhYmx5IHdlIGhhdmVuJ3QgZG9uZSB0aGUgaGFuZHNoYWtlIHlldC4gTm8gYmlnZ2llLgogICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICAgICAgICAgIGNlcnRfY291bnQgPSBTZWN1cml0eS5TZWNUcnVzdEdldENlcnRpZmljYXRlQ291bnQodHJ1c3QpCiAgICAgICAgICAgIGlmIG5vdCBjZXJ0X2NvdW50OgogICAgICAgICAgICAgICAgIyBBbHNvIGEgY2FzZSB0aGF0IG1pZ2h0IGhhcHBlbiBpZiB3ZSBoYXZlbid0IGhhbmRzaGFrZWQuCiAgICAgICAgICAgICAgICAjIEhhbmRzaG9vaz8gSGFuZHNoYWtlbj8KICAgICAgICAgICAgICAgIHJldHVybiBOb25lCgogICAgICAgICAgICBsZWFmID0gU2VjdXJpdHkuU2VjVHJ1c3RHZXRDZXJ0aWZpY2F0ZUF0SW5kZXgodHJ1c3QsIDApCiAgICAgICAgICAgIGFzc2VydCBsZWFmCgogICAgICAgICAgICAjIE9rLCBub3cgd2Ugd2FudCB0aGUgREVSIGJ5dGVzLgogICAgICAgICAgICBjZXJ0ZGF0YSA9IFNlY3VyaXR5LlNlY0NlcnRpZmljYXRlQ29weURhdGEobGVhZikKICAgICAgICAgICAgYXNzZXJ0IGNlcnRkYXRhCgogICAgICAgICAgICBkYXRhX2xlbmd0aCA9IENvcmVGb3VuZGF0aW9uLkNGRGF0YUdldExlbmd0aChjZXJ0ZGF0YSkKICAgICAgICAgICAgZGF0YV9idWZmZXIgPSBDb3JlRm91bmRhdGlvbi5DRkRhdGFHZXRCeXRlUHRyKGNlcnRkYXRhKQogICAgICAgICAgICBkZXJfYnl0ZXMgPSBjdHlwZXMuc3RyaW5nX2F0KGRhdGFfYnVmZmVyLCBkYXRhX2xlbmd0aCkKICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICBpZiBjZXJ0ZGF0YToKICAgICAgICAgICAgICAgIENvcmVGb3VuZGF0aW9uLkNGUmVsZWFzZShjZXJ0ZGF0YSkKICAgICAgICAgICAgaWYgdHJ1c3Q6CiAgICAgICAgICAgICAgICBDb3JlRm91bmRhdGlvbi5DRlJlbGVhc2UodHJ1c3QpCgogICAgICAgIHJldHVybiBkZXJfYnl0ZXMKCiAgICBkZWYgdmVyc2lvbihzZWxmKToKICAgICAgICBwcm90b2NvbCA9IFNlY3VyaXR5LlNTTFByb3RvY29sKCkKICAgICAgICByZXN1bHQgPSBTZWN1cml0eS5TU0xHZXROZWdvdGlhdGVkUHJvdG9jb2xWZXJzaW9uKAogICAgICAgICAgICBzZWxmLmNvbnRleHQsIGN0eXBlcy5ieXJlZihwcm90b2NvbCkKICAgICAgICApCiAgICAgICAgX2Fzc2VydF9ub19lcnJvcihyZXN1bHQpCiAgICAgICAgaWYgcHJvdG9jb2wudmFsdWUgPT0gU2VjdXJpdHlDb25zdC5rVExTUHJvdG9jb2wxMzoKICAgICAgICAgICAgcmFpc2Ugc3NsLlNTTEVycm9yKFwiU2VjdXJlVHJhbnNwb3J0IGRvZXMgbm90IHN1cHBvcnQgVExTIDEuM1wiKQogICAgICAgIGVsaWYgcHJvdG9jb2wudmFsdWUgPT0gU2VjdXJpdHlDb25zdC5rVExTUHJvdG9jb2wxMjoKICAgICAgICAgICAgcmV0dXJuIFwiVExTdjEuMlwiCiAgICAgICAgZWxpZiBwcm90b2NvbC52YWx1ZSA9PSBTZWN1cml0eUNvbnN0LmtUTFNQcm90b2NvbDExOgogICAgICAgICAgICByZXR1cm4gXCJUTFN2MS4xXCIKICAgICAgICBlbGlmIHByb3RvY29sLnZhbHVlID09IFNlY3VyaXR5Q29uc3Qua1RMU1Byb3RvY29sMToKICAgICAgICAgICAgcmV0dXJuIFwiVExTdjFcIgogICAgICAgIGVsaWYgcHJvdG9jb2wudmFsdWUgPT0gU2VjdXJpdHlDb25zdC5rU1NMUHJvdG9jb2wzOgogICAgICAgICAgICByZXR1cm4gXCJTU0x2M1wiCiAgICAgICAgZWxpZiBwcm90b2NvbC52YWx1ZSA9PSBTZWN1cml0eUNvbnN0LmtTU0xQcm90b2NvbDI6CiAgICAgICAgICAgIHJldHVybiBcIlNTTHYyXCIKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBzc2wuU1NMRXJyb3IoXCJVbmtub3duIFRMUyB2ZXJzaW9uOiAlclwiICUgcHJvdG9jb2wpCgogICAgZGVmIF9yZXVzZShzZWxmKToKICAgICAgICBzZWxmLl9tYWtlZmlsZV9yZWZzICs9IDEKCiAgICBkZWYgX2Ryb3Aoc2VsZik6CiAgICAgICAgaWYgc2VsZi5fbWFrZWZpbGVfcmVmcyA8IDE6CiAgICAgICAgICAgIHNlbGYuY2xvc2UoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuX21ha2VmaWxlX3JlZnMgLT0gMQoKCmlmIF9maWxlb2JqZWN0OiAgIyBQbGF0Zm9ybS1zcGVjaWZpYzogUHl0aG9uIDIKCiAgICBkZWYgbWFrZWZpbGUoc2VsZiwgbW9kZSwgYnVmc2l6ZT0tMSk6CiAgICAgICAgc2VsZi5fbWFrZWZpbGVfcmVmcyArPSAxCiAgICAgICAgcmV0dXJuIF9maWxlb2JqZWN0KHNlbGYsIG1vZGUsIGJ1ZnNpemUsIGNsb3NlPVRydWUpCgplbHNlOiAgIyBQbGF0Zm9ybS1zcGVjaWZpYzogUHl0aG9uIDMKCiAgICBkZWYgbWFrZWZpbGUoc2VsZiwgbW9kZT1cInJcIiwgYnVmZmVyaW5nPU5vbmUsICphcmdzLCAqKmt3YXJncyk6CiAgICAgICAgIyBXZSBkaXNhYmxlIGJ1ZmZlcmluZyB3aXRoIFNlY3VyZVRyYW5zcG9ydCBiZWNhdXNlIGl0IGNvbmZsaWN0cyB3aXRoCiAgICAgICAgIyB0aGUgYnVmZmVyaW5nIHRoYXQgU1QgZG9lcyBpbnRlcm5hbGx5IChzZWUgaXNzdWUgIzExNTMgZm9yIG1vcmUpLgogICAgICAgIGJ1ZmZlcmluZyA9IDAKICAgICAgICByZXR1cm4gYmFja3BvcnRfbWFrZWZpbGUoc2VsZiwgbW9kZSwgYnVmZmVyaW5nLCAqYXJncywgKiprd2FyZ3MpCgoKV3JhcHBlZFNvY2tldC5tYWtlZmlsZSA9IG1ha2VmaWxlCgoKY2xhc3MgU2VjdXJlVHJhbnNwb3J0Q29udGV4dChvYmplY3QpOgogICAgXCJcIlwiCiAgICBJIGFtIGEgd3JhcHBlciBjbGFzcyBmb3IgdGhlIFNlY3VyZVRyYW5zcG9ydCBsaWJyYXJ5LCB0byB0cmFuc2xhdGUgdGhlCiAgICBpbnRlcmZhY2Ugb2YgdGhlIHN0YW5kYXJkIGxpYnJhcnkgYGBTU0xDb250ZXh0YGAgb2JqZWN0IHRvIGNhbGxzIGludG8KICAgIFNlY3VyZVRyYW5zcG9ydC4KICAgIFwiXCJcIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBwcm90b2NvbCk6CiAgICAgICAgc2VsZi5fbWluX3ZlcnNpb24sIHNlbGYuX21heF92ZXJzaW9uID0gX3Byb3RvY29sX3RvX21pbl9tYXhbcHJvdG9jb2xdCiAgICAgICAgc2VsZi5fb3B0aW9ucyA9IDAKICAgICAgICBzZWxmLl92ZXJpZnkgPSBGYWxzZQogICAgICAgIHNlbGYuX3RydXN0X2J1bmRsZSA9IE5vbmUKICAgICAgICBzZWxmLl9jbGllbnRfY2VydCA9IE5vbmUKICAgICAgICBzZWxmLl9jbGllbnRfa2V5ID0gTm9uZQogICAgICAgIHNlbGYuX2NsaWVudF9rZXlfcGFzc3BocmFzZSA9IE5vbmUKICAgICAgICBzZWxmLl9hbHBuX3Byb3RvY29scyA9IE5vbmUKCiAgICBAcHJvcGVydHkKICAgIGRlZiBjaGVja19ob3N0bmFtZShzZWxmKToKICAgICAgICBcIlwiXCIKICAgICAgICBTZWN1cmVUcmFuc3BvcnQgY2Fubm90IGhhdmUgaXRzIGhvc3RuYW1lIGNoZWNraW5nIGRpc2FibGVkLiBGb3IgbW9yZSwKICAgICAgICBzZWUgdGhlIGNvbW1lbnQgb24gZ2V0cGVlcmNlcnQoKSBpbiB0aGlzIGZpbGUuCiAgICAgICAgXCJcIlwiCiAgICAgICAgcmV0dXJuIFRydWUKCiAgICBAY2hlY2tfaG9zdG5hbWUuc2V0dGVyCiAgICBkZWYgY2hlY2tfaG9zdG5hbWUoc2VsZiwgdmFsdWUpOgogICAgICAgIFwiXCJcIgogICAgICAgIFNlY3VyZVRyYW5zcG9ydCBjYW5ub3QgaGF2ZSBpdHMgaG9zdG5hbWUgY2hlY2tpbmcgZGlzYWJsZWQuIEZvciBtb3JlLAogICAgICAgIHNlZSB0aGUgY29tbWVudCBvbiBnZXRwZWVyY2VydCgpIGluIHRoaXMgZmlsZS4KICAgICAgICBcIlwiXCIKICAgICAgICBwYXNzCgogICAgQHByb3BlcnR5CiAgICBkZWYgb3B0aW9ucyhzZWxmKToKICAgICAgICAjIFRPRE86IFdlbGwsIGNyYXAuCiAgICAgICAgIwogICAgICAgICMgU28gdGhpcyBpcyB0aGUgYml0IG9mIHRoZSBjb2RlIHRoYXQgaXMgdGhlIG1vc3QgbGlrZWx5IHRvIGNhdXNlIHVzCiAgICAgICAgIyB0cm91YmxlLiBFc3NlbnRpYWxseSB3ZSBuZWVkIHRvIGVudW1lcmF0ZSBhbGwgb2YgdGhlIFNTTCBvcHRpb25zIHRoYXQKICAgICAgICAjIHVzZXJzIG1pZ2h0IHdhbnQgdG8gdXNlIGFuZCB0cnkgdG8gc2VlIGlmIHdlIGNhbiBzZW5zaWJseSB0cmFuc2xhdGUKICAgICAgICAjIHRoZW0sIG9yIHdoZXRoZXIgd2Ugc2hvdWxkIGp1c3QgaWdub3JlIHRoZW0uCiAgICAgICAgcmV0dXJuIHNlbGYuX29wdGlvbnMKCiAgICBAb3B0aW9ucy5zZXR0ZXIKICAgIGRlZiBvcHRpb25zKHNlbGYsIHZhbHVlKToKICAgICAgICAjIFRPRE86IFVwZGF0ZSBpbiBsaW5lIHdpdGggYWJvdmUuCiAgICAgICAgc2VsZi5fb3B0aW9ucyA9IHZhbHVlCgogICAgQHByb3BlcnR5CiAgICBkZWYgdmVyaWZ5X21vZGUoc2VsZik6CiAgICAgICAgcmV0dXJuIHNzbC5DRVJUX1JFUVVJUkVEIGlmIHNlbGYuX3ZlcmlmeSBlbHNlIHNzbC5DRVJUX05PTkUKCiAgICBAdmVyaWZ5X21vZGUuc2V0dGVyCiAgICBkZWYgdmVyaWZ5X21vZGUoc2VsZiwgdmFsdWUpOgogICAgICAgIHNlbGYuX3ZlcmlmeSA9IFRydWUgaWYgdmFsdWUgPT0gc3NsLkNFUlRfUkVRVUlSRUQgZWxzZSBGYWxzZQoKICAgIGRlZiBzZXRfZGVmYXVsdF92ZXJpZnlfcGF0aHMoc2VsZik6CiAgICAgICAgIyBTbywgdGhpcyBoYXMgdG8gZG8gc29tZXRoaW5nIGEgYml0IHdlaXJkLiBTcGVjaWZpY2FsbHksIHdoYXQgaXQgZG9lcwogICAgICAgICMgaXMgbm90aGluZy4KICAgICAgICAjCiAgICAgICAgIyBUaGlzIG1lYW5zIHRoYXQsIGlmIHdlIGhhZCBwcmV2aW91c2x5IGhhZCBsb2FkX3ZlcmlmeV9sb2NhdGlvbnMKICAgICAgICAjIGNhbGxlZCwgdGhpcyBkb2VzIG5vdCB1bmRvIHRoYXQuIFdlIG5lZWQgdG8gZG8gdGhhdCBiZWNhdXNlIGl0IHR1cm5zCiAgICAgICAgIyBvdXQgdGhhdCB0aGUgcmVzdCBvZiB0aGUgdXJsbGliMyBjb2RlIHdpbGwgYXR0ZW1wdCB0byBsb2FkIHRoZQogICAgICAgICMgZGVmYXVsdCB2ZXJpZnkgcGF0aHMgaWYgaXQgaGFzbid0IGJlZW4gdG9sZCBhYm91dCBhbnkgcGF0aHMsIGV2ZW4gaWYKICAgICAgICAjIHRoZSBjb250ZXh0IGl0c2VsZiB3YXMgc29tZXRpbWUgZWFybGllci4gV2UgcmVzb2x2ZSB0aGF0IGJ5IGp1c3QKICAgICAgICAjIGlnbm9yaW5nIGl0LgogICAgICAgIHBhc3MKCiAgICBkZWYgbG9hZF9kZWZhdWx0X2NlcnRzKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLnNldF9kZWZhdWx0X3ZlcmlmeV9wYXRocygpCgogICAgZGVmIHNldF9jaXBoZXJzKHNlbGYsIGNpcGhlcnMpOgogICAgICAgICMgRm9yIG5vdywgd2UganVzdCByZXF1aXJlIHRoZSBkZWZhdWx0IGNpcGhlciBzdHJpbmcuCiAgICAgICAgaWYgY2lwaGVycyAhPSB1dGlsLnNzbF8uREVGQVVMVF9DSVBIRVJTOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFwiU2VjdXJlVHJhbnNwb3J0IGRvZXNuJ3Qgc3VwcG9ydCBjdXN0b20gY2lwaGVyIHN0cmluZ3NcIikKCiAgICBkZWYgbG9hZF92ZXJpZnlfbG9jYXRpb25zKHNlbGYsIGNhZmlsZT1Ob25lLCBjYXBhdGg9Tm9uZSwgY2FkYXRhPU5vbmUpOgogICAgICAgICMgT0ssIHdlIG9ubHkgcmVhbGx5IHN1cHBvcnQgY2FkYXRhIGFuZCBjYWZpbGUuCiAgICAgICAgaWYgY2FwYXRoIGlzIG5vdCBOb25lOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFwiU2VjdXJlVHJhbnNwb3J0IGRvZXMgbm90IHN1cHBvcnQgY2VydCBkaXJlY3Rvcmllc1wiKQoKICAgICAgICAjIFJhaXNlIGlmIGNhZmlsZSBkb2VzIG5vdCBleGlzdC4KICAgICAgICBpZiBjYWZpbGUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHdpdGggb3BlbihjYWZpbGUpOgogICAgICAgICAgICAgICAgcGFzcwoKICAgICAgICBzZWxmLl90cnVzdF9idW5kbGUgPSBjYWZpbGUgb3IgY2FkYXRhCgogICAgZGVmIGxvYWRfY2VydF9jaGFpbihzZWxmLCBjZXJ0ZmlsZSwga2V5ZmlsZT1Ob25lLCBwYXNzd29yZD1Ob25lKToKICAgICAgICBzZWxmLl9jbGllbnRfY2VydCA9IGNlcnRmaWxlCiAgICAgICAgc2VsZi5fY2xpZW50X2tleSA9IGtleWZpbGUKICAgICAgICBzZWxmLl9jbGllbnRfY2VydF9wYXNzcGhyYXNlID0gcGFzc3dvcmQKCiAgICBkZWYgc2V0X2FscG5fcHJvdG9jb2xzKHNlbGYsIHByb3RvY29scyk6CiAgICAgICAgXCJcIlwiCiAgICAgICAgU2V0cyB0aGUgQUxQTiBwcm90b2NvbHMgdGhhdCB3aWxsIGxhdGVyIGJlIHNldCBvbiB0aGUgY29udGV4dC4KCiAgICAgICAgUmFpc2VzIGEgTm90SW1wbGVtZW50ZWRFcnJvciBpZiBBTFBOIGlzIG5vdCBzdXBwb3J0ZWQuCiAgICAgICAgXCJcIlwiCiAgICAgICAgaWYgbm90IGhhc2F0dHIoU2VjdXJpdHksIFwiU1NMU2V0QUxQTlByb3RvY29sc1wiKToKICAgICAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcigKICAgICAgICAgICAgICAgIFwiU2VjdXJlVHJhbnNwb3J0IHN1cHBvcnRzIEFMUE4gb25seSBpbiBtYWNPUyAxMC4xMitcIgogICAgICAgICAgICApCiAgICAgICAgc2VsZi5fYWxwbl9wcm90b2NvbHMgPSBbc2l4LmVuc3VyZV9iaW5hcnkocCkgZm9yIHAgaW4gcHJvdG9jb2xzXQoKICAgIGRlZiB3cmFwX3NvY2tldCgKICAgICAgICBzZWxmLAogICAgICAgIHNvY2ssCiAgICAgICAgc2VydmVyX3NpZGU9RmFsc2UsCiAgICAgICAgZG9faGFuZHNoYWtlX29uX2Nvbm5lY3Q9VHJ1ZSwKICAgICAgICBzdXBwcmVzc19yYWdnZWRfZW9mcz1UcnVlLAogICAgICAgIHNlcnZlcl9ob3N0bmFtZT1Ob25lLAogICAgKToKICAgICAgICAjIFNvLCB3aGF0IGRvIHdlIGRvIGhlcmU/IEZpcnN0bHksIHdlIGFzc2VydCBzb21lIHByb3BlcnRpZXMuIFRoaXMgaXMgYQogICAgICAgICMgc3RyaXBwZWQgZG93biBzaGltLCBzbyB0aGVyZSBpcyBzb21lIGZ1bmN0aW9uYWxpdHkgd2UgZG9uJ3Qgc3VwcG9ydC4KICAgICAgICAjIFNlZSBQRVAgNTQzIGZvciB0aGUgcmVhbCBkZWFsLgogICAgICAgIGFzc2VydCBub3Qgc2VydmVyX3NpZGUKICAgICAgICBhc3NlcnQgZG9faGFuZHNoYWtlX29uX2Nvbm5lY3QKICAgICAgICBhc3NlcnQgc3VwcHJlc3NfcmFnZ2VkX2VvZnMKCiAgICAgICAgIyBPaywgd2UncmUgZ29vZCB0byBnby4gTm93IHdlIHdhbnQgdG8gY3JlYXRlIHRoZSB3cmFwcGVkIHNvY2tldCBvYmplY3QKICAgICAgICAjIGFuZCBzdG9yZSBpdCBpbiB0aGUgYXBwcm9wcmlhdGUgcGxhY2UuCiAgICAgICAgd3JhcHBlZF9zb2NrZXQgPSBXcmFwcGVkU29ja2V0KHNvY2spCgogICAgICAgICMgTm93IHdlIGNhbiBoYW5kc2hha2UKICAgICAgICB3cmFwcGVkX3NvY2tldC5oYW5kc2hha2UoCiAgICAgICAgICAgIHNlcnZlcl9ob3N0bmFtZSwKICAgICAgICAgICAgc2VsZi5fdmVyaWZ5LAogICAgICAgICAgICBzZWxmLl90cnVzdF9idW5kbGUsCiAgICAgICAgICAgIHNlbGYuX21pbl92ZXJzaW9uLAogICAgICAgICAgICBzZWxmLl9tYXhfdmVyc2lvbiwKICAgICAgICAgICAgc2VsZi5fY2xpZW50X2NlcnQsCiAgICAgICAgICAgIHNlbGYuX2NsaWVudF9rZXksCiAgICAgICAgICAgIHNlbGYuX2NsaWVudF9rZXlfcGFzc3BocmFzZSwKICAgICAgICAgICAgc2VsZi5fYWxwbl9wcm90b2NvbHMsCiAgICAgICAgKQogICAgICAgIHJldHVybiB3cmFwcGVkX3NvY2tldAoKIiIiCm1vZHVsZV9kaWN0WyJ1cmxsaWIzIitvcy5zZXArImNvbnRyaWIiK29zLnNlcCsic29ja3MucHkiXT0iIiIKIyAtKi0gY29kaW5nOiB1dGYtOCAtKi0KXCJcIlwiClRoaXMgbW9kdWxlIGNvbnRhaW5zIHByb3Zpc2lvbmFsIHN1cHBvcnQgZm9yIFNPQ0tTIHByb3hpZXMgZnJvbSB3aXRoaW4KdXJsbGliMy4gVGhpcyBtb2R1bGUgc3VwcG9ydHMgU09DS1M0LCBTT0NLUzRBIChhbiBleHRlbnNpb24gb2YgU09DS1M0KSwgYW5kClNPQ0tTNS4gVG8gZW5hYmxlIGl0cyBmdW5jdGlvbmFsaXR5LCBlaXRoZXIgaW5zdGFsbCBQeVNvY2tzIG9yIGluc3RhbGwgdGhpcwptb2R1bGUgd2l0aCB0aGUgYGBzb2Nrc2BgIGV4dHJhLgoKVGhlIFNPQ0tTIGltcGxlbWVudGF0aW9uIHN1cHBvcnRzIHRoZSBmdWxsIHJhbmdlIG9mIHVybGxpYjMgZmVhdHVyZXMuIEl0IGFsc28Kc3VwcG9ydHMgdGhlIGZvbGxvd2luZyBTT0NLUyBmZWF0dXJlczoKCi0gU09DS1M0QSAoYGBwcm94eV91cmw9J3NvY2tzNGE6Ly8uLi5gYCkKLSBTT0NLUzQgKGBgcHJveHlfdXJsPSdzb2NrczQ6Ly8uLi5gYCkKLSBTT0NLUzUgd2l0aCByZW1vdGUgRE5TIChgYHByb3h5X3VybD0nc29ja3M1aDovLy4uLmBgKQotIFNPQ0tTNSB3aXRoIGxvY2FsIEROUyAoYGBwcm94eV91cmw9J3NvY2tzNTovLy4uLmBgKQotIFVzZXJuYW1lcyBhbmQgcGFzc3dvcmRzIGZvciB0aGUgU09DS1MgcHJveHkKCi4uIG5vdGU6OgogICBJdCBpcyByZWNvbW1lbmRlZCB0byB1c2UgYGBzb2NrczVoOi8vYGAgb3IgYGBzb2NrczRhOi8vYGAgc2NoZW1lcyBpbgogICB5b3VyIGBgcHJveHlfdXJsYGAgdG8gZW5zdXJlIHRoYXQgRE5TIHJlc29sdXRpb24gaXMgZG9uZSBmcm9tIHRoZSByZW1vdGUKICAgc2VydmVyIGluc3RlYWQgb2YgY2xpZW50LXNpZGUgd2hlbiBjb25uZWN0aW5nIHRvIGEgZG9tYWluIG5hbWUuCgpTT0NLUzQgc3VwcG9ydHMgSVB2NCBhbmQgZG9tYWluIG5hbWVzIHdpdGggdGhlIFNPQ0tTNEEgZXh0ZW5zaW9uLiBTT0NLUzUKc3VwcG9ydHMgSVB2NCwgSVB2NiwgYW5kIGRvbWFpbiBuYW1lcy4KCldoZW4gY29ubmVjdGluZyB0byBhIFNPQ0tTNCBwcm94eSB0aGUgYGB1c2VybmFtZWBgIHBvcnRpb24gb2YgdGhlIGBgcHJveHlfdXJsYGAKd2lsbCBiZSBzZW50IGFzIHRoZSBgYHVzZXJpZGBgIHNlY3Rpb24gb2YgdGhlIFNPQ0tTIHJlcXVlc3Q6CgouLiBjb2RlLWJsb2NrOjogcHl0aG9uCgogICAgcHJveHlfdXJsPVwic29ja3M0YTovLzx1c2VyaWQ+QHByb3h5LWhvc3RcIgoKV2hlbiBjb25uZWN0aW5nIHRvIGEgU09DS1M1IHByb3h5IHRoZSBgYHVzZXJuYW1lYGAgYW5kIGBgcGFzc3dvcmRgYCBwb3J0aW9uCm9mIHRoZSBgYHByb3h5X3VybGBgIHdpbGwgYmUgc2VudCBhcyB0aGUgdXNlcm5hbWUvcGFzc3dvcmQgdG8gYXV0aGVudGljYXRlCndpdGggdGhlIHByb3h5OgoKLi4gY29kZS1ibG9jazo6IHB5dGhvbgoKICAgIHByb3h5X3VybD1cInNvY2tzNWg6Ly88dXNlcm5hbWU+OjxwYXNzd29yZD5AcHJveHktaG9zdFwiCgpcIlwiXCIKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhYnNvbHV0ZV9pbXBvcnQKIyA8IGluY2x1ZGUgJ3NvY2tzLnB5JyA+CgoKdHJ5OgogICAgaW1wb3J0IHNvY2tzCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIGltcG9ydCB3YXJuaW5ncwoKICAgIGZyb20gLi5leGNlcHRpb25zIGltcG9ydCBEZXBlbmRlbmN5V2FybmluZwoKICAgIHdhcm5pbmdzLndhcm4oCiAgICAgICAgKAogICAgICAgICAgICBcIlNPQ0tTIHN1cHBvcnQgaW4gdXJsbGliMyByZXF1aXJlcyB0aGUgaW5zdGFsbGF0aW9uIG9mIG9wdGlvbmFsIFwiCiAgICAgICAgICAgIFwiZGVwZW5kZW5jaWVzOiBzcGVjaWZpY2FsbHksIFB5U29ja3MuICBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlIFwiCiAgICAgICAgICAgIFwiaHR0cHM6Ly91cmxsaWIzLnJlYWR0aGVkb2NzLmlvL2VuLzEuMjYueC9jb250cmliLmh0bWwjc29ja3MtcHJveGllc1wiCiAgICAgICAgKSwKICAgICAgICBEZXBlbmRlbmN5V2FybmluZywKICAgICkKICAgIHJhaXNlCgpmcm9tIHNvY2tldCBpbXBvcnQgZXJyb3IgYXMgU29ja2V0RXJyb3IKZnJvbSBzb2NrZXQgaW1wb3J0IHRpbWVvdXQgYXMgU29ja2V0VGltZW91dAoKZnJvbSAuLmNvbm5lY3Rpb24gaW1wb3J0IEhUVFBDb25uZWN0aW9uLCBIVFRQU0Nvbm5lY3Rpb24KZnJvbSAuLmNvbm5lY3Rpb25wb29sIGltcG9ydCBIVFRQQ29ubmVjdGlvblBvb2wsIEhUVFBTQ29ubmVjdGlvblBvb2wKZnJvbSAuLmV4Y2VwdGlvbnMgaW1wb3J0IENvbm5lY3RUaW1lb3V0RXJyb3IsIE5ld0Nvbm5lY3Rpb25FcnJvcgpmcm9tIC4ucG9vbG1hbmFnZXIgaW1wb3J0IFBvb2xNYW5hZ2VyCmZyb20gLi51dGlsLnVybCBpbXBvcnQgcGFyc2VfdXJsCgp0cnk6CiAgICBpbXBvcnQgc3NsCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIHNzbCA9IE5vbmUKCgpjbGFzcyBTT0NLU0Nvbm5lY3Rpb24oSFRUUENvbm5lY3Rpb24pOgogICAgXCJcIlwiCiAgICBBIHBsYWluLXRleHQgSFRUUCBjb25uZWN0aW9uIHRoYXQgY29ubmVjdHMgdmlhIGEgU09DS1MgcHJveHkuCiAgICBcIlwiXCIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICBzZWxmLl9zb2Nrc19vcHRpb25zID0ga3dhcmdzLnBvcChcIl9zb2Nrc19vcHRpb25zXCIpCiAgICAgICAgc3VwZXIoU09DS1NDb25uZWN0aW9uLCBzZWxmKS5fX2luaXRfXygqYXJncywgKiprd2FyZ3MpCgogICAgZGVmIF9uZXdfY29ubihzZWxmKToKICAgICAgICBcIlwiXCIKICAgICAgICBFc3RhYmxpc2ggYSBuZXcgY29ubmVjdGlvbiB2aWEgdGhlIFNPQ0tTIHByb3h5LgogICAgICAgIFwiXCJcIgogICAgICAgIGV4dHJhX2t3ID0ge30KICAgICAgICBpZiBzZWxmLnNvdXJjZV9hZGRyZXNzOgogICAgICAgICAgICBleHRyYV9rd1tcInNvdXJjZV9hZGRyZXNzXCJdID0gc2VsZi5zb3VyY2VfYWRkcmVzcwoKICAgICAgICBpZiBzZWxmLnNvY2tldF9vcHRpb25zOgogICAgICAgICAgICBleHRyYV9rd1tcInNvY2tldF9vcHRpb25zXCJdID0gc2VsZi5zb2NrZXRfb3B0aW9ucwoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGNvbm4gPSBzb2Nrcy5jcmVhdGVfY29ubmVjdGlvbigKICAgICAgICAgICAgICAgIChzZWxmLmhvc3QsIHNlbGYucG9ydCksCiAgICAgICAgICAgICAgICBwcm94eV90eXBlPXNlbGYuX3NvY2tzX29wdGlvbnNbXCJzb2Nrc192ZXJzaW9uXCJdLAogICAgICAgICAgICAgICAgcHJveHlfYWRkcj1zZWxmLl9zb2Nrc19vcHRpb25zW1wicHJveHlfaG9zdFwiXSwKICAgICAgICAgICAgICAgIHByb3h5X3BvcnQ9c2VsZi5fc29ja3Nfb3B0aW9uc1tcInByb3h5X3BvcnRcIl0sCiAgICAgICAgICAgICAgICBwcm94eV91c2VybmFtZT1zZWxmLl9zb2Nrc19vcHRpb25zW1widXNlcm5hbWVcIl0sCiAgICAgICAgICAgICAgICBwcm94eV9wYXNzd29yZD1zZWxmLl9zb2Nrc19vcHRpb25zW1wicGFzc3dvcmRcIl0sCiAgICAgICAgICAgICAgICBwcm94eV9yZG5zPXNlbGYuX3NvY2tzX29wdGlvbnNbXCJyZG5zXCJdLAogICAgICAgICAgICAgICAgdGltZW91dD1zZWxmLnRpbWVvdXQsCiAgICAgICAgICAgICAgICAqKmV4dHJhX2t3CiAgICAgICAgICAgICkKCiAgICAgICAgZXhjZXB0IFNvY2tldFRpbWVvdXQ6CiAgICAgICAgICAgIHJhaXNlIENvbm5lY3RUaW1lb3V0RXJyb3IoCiAgICAgICAgICAgICAgICBzZWxmLAogICAgICAgICAgICAgICAgXCJDb25uZWN0aW9uIHRvICVzIHRpbWVkIG91dC4gKGNvbm5lY3QgdGltZW91dD0lcylcIgogICAgICAgICAgICAgICAgJSAoc2VsZi5ob3N0LCBzZWxmLnRpbWVvdXQpLAogICAgICAgICAgICApCgogICAgICAgIGV4Y2VwdCBzb2Nrcy5Qcm94eUVycm9yIGFzIGU6CiAgICAgICAgICAgICMgVGhpcyBpcyBmcmFnaWxlIGFzIGhlbGwsIGJ1dCBpdCBzZWVtcyB0byBiZSB0aGUgb25seSB3YXkgdG8gcmFpc2UKICAgICAgICAgICAgIyB1c2VmdWwgZXJyb3JzIGhlcmUuCiAgICAgICAgICAgIGlmIGUuc29ja2V0X2VycjoKICAgICAgICAgICAgICAgIGVycm9yID0gZS5zb2NrZXRfZXJyCiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKGVycm9yLCBTb2NrZXRUaW1lb3V0KToKICAgICAgICAgICAgICAgICAgICByYWlzZSBDb25uZWN0VGltZW91dEVycm9yKAogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLAogICAgICAgICAgICAgICAgICAgICAgICBcIkNvbm5lY3Rpb24gdG8gJXMgdGltZWQgb3V0LiAoY29ubmVjdCB0aW1lb3V0PSVzKVwiCiAgICAgICAgICAgICAgICAgICAgICAgICUgKHNlbGYuaG9zdCwgc2VsZi50aW1lb3V0KSwKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIE5ld0Nvbm5lY3Rpb25FcnJvcigKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZiwgXCJGYWlsZWQgdG8gZXN0YWJsaXNoIGEgbmV3IGNvbm5lY3Rpb246ICVzXCIgJSBlcnJvcgogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJhaXNlIE5ld0Nvbm5lY3Rpb25FcnJvcigKICAgICAgICAgICAgICAgICAgICBzZWxmLCBcIkZhaWxlZCB0byBlc3RhYmxpc2ggYSBuZXcgY29ubmVjdGlvbjogJXNcIiAlIGUKICAgICAgICAgICAgICAgICkKCiAgICAgICAgZXhjZXB0IFNvY2tldEVycm9yIGFzIGU6ICAjIERlZmVuc2l2ZTogUHlTb2NrcyBzaG91bGQgY2F0Y2ggYWxsIHRoZXNlLgogICAgICAgICAgICByYWlzZSBOZXdDb25uZWN0aW9uRXJyb3IoCiAgICAgICAgICAgICAgICBzZWxmLCBcIkZhaWxlZCB0byBlc3RhYmxpc2ggYSBuZXcgY29ubmVjdGlvbjogJXNcIiAlIGUKICAgICAgICAgICAgKQoKICAgICAgICByZXR1cm4gY29ubgoKCiMgV2UgZG9uJ3QgbmVlZCB0byBkdXBsaWNhdGUgdGhlIFZlcmlmaWVkL1VudmVyaWZpZWQgZGlzdGluY3Rpb24gZnJvbQojIHVybGxpYjMvY29ubmVjdGlvbi5weSBoZXJlIGJlY2F1c2UgdGhlIEhUVFBTQ29ubmVjdGlvbiB3aWxsIGFscmVhZHkgaGF2ZSBiZWVuCiMgY29ycmVjdGx5IHNldCB0byBlaXRoZXIgdGhlIFZlcmlmaWVkIG9yIFVudmVyaWZpZWQgZm9ybSBieSB0aGF0IG1vZHVsZS4gVGhpcwojIG1lYW5zIHRoZSBTT0NLU0hUVFBTQ29ubmVjdGlvbiB3aWxsIGF1dG9tYXRpY2FsbHkgYmUgdGhlIGNvcnJlY3QgdHlwZS4KY2xhc3MgU09DS1NIVFRQU0Nvbm5lY3Rpb24oU09DS1NDb25uZWN0aW9uLCBIVFRQU0Nvbm5lY3Rpb24pOgogICAgcGFzcwoKCmNsYXNzIFNPQ0tTSFRUUENvbm5lY3Rpb25Qb29sKEhUVFBDb25uZWN0aW9uUG9vbCk6CiAgICBDb25uZWN0aW9uQ2xzID0gU09DS1NDb25uZWN0aW9uCgoKY2xhc3MgU09DS1NIVFRQU0Nvbm5lY3Rpb25Qb29sKEhUVFBTQ29ubmVjdGlvblBvb2wpOgogICAgQ29ubmVjdGlvbkNscyA9IFNPQ0tTSFRUUFNDb25uZWN0aW9uCgoKY2xhc3MgU09DS1NQcm94eU1hbmFnZXIoUG9vbE1hbmFnZXIpOgogICAgXCJcIlwiCiAgICBBIHZlcnNpb24gb2YgdGhlIHVybGxpYjMgUHJveHlNYW5hZ2VyIHRoYXQgcm91dGVzIGNvbm5lY3Rpb25zIHZpYSB0aGUKICAgIGRlZmluZWQgU09DS1MgcHJveHkuCiAgICBcIlwiXCIKCiAgICBwb29sX2NsYXNzZXNfYnlfc2NoZW1lID0gewogICAgICAgIFwiaHR0cFwiOiBTT0NLU0hUVFBDb25uZWN0aW9uUG9vbCwKICAgICAgICBcImh0dHBzXCI6IFNPQ0tTSFRUUFNDb25uZWN0aW9uUG9vbCwKICAgIH0KCiAgICBkZWYgX19pbml0X18oCiAgICAgICAgc2VsZiwKICAgICAgICBwcm94eV91cmwsCiAgICAgICAgdXNlcm5hbWU9Tm9uZSwKICAgICAgICBwYXNzd29yZD1Ob25lLAogICAgICAgIG51bV9wb29scz0xMCwKICAgICAgICBoZWFkZXJzPU5vbmUsCiAgICAgICAgKipjb25uZWN0aW9uX3Bvb2xfa3cKICAgICk6CiAgICAgICAgcGFyc2VkID0gcGFyc2VfdXJsKHByb3h5X3VybCkKCiAgICAgICAgaWYgdXNlcm5hbWUgaXMgTm9uZSBhbmQgcGFzc3dvcmQgaXMgTm9uZSBhbmQgcGFyc2VkLmF1dGggaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNwbGl0ID0gcGFyc2VkLmF1dGguc3BsaXQoXCI6XCIpCiAgICAgICAgICAgIGlmIGxlbihzcGxpdCkgPT0gMjoKICAgICAgICAgICAgICAgIHVzZXJuYW1lLCBwYXNzd29yZCA9IHNwbGl0CiAgICAgICAgaWYgcGFyc2VkLnNjaGVtZSA9PSBcInNvY2tzNVwiOgogICAgICAgICAgICBzb2Nrc192ZXJzaW9uID0gc29ja3MuUFJPWFlfVFlQRV9TT0NLUzUKICAgICAgICAgICAgcmRucyA9IEZhbHNlCiAgICAgICAgZWxpZiBwYXJzZWQuc2NoZW1lID09IFwic29ja3M1aFwiOgogICAgICAgICAgICBzb2Nrc192ZXJzaW9uID0gc29ja3MuUFJPWFlfVFlQRV9TT0NLUzUKICAgICAgICAgICAgcmRucyA9IFRydWUKICAgICAgICBlbGlmIHBhcnNlZC5zY2hlbWUgPT0gXCJzb2NrczRcIjoKICAgICAgICAgICAgc29ja3NfdmVyc2lvbiA9IHNvY2tzLlBST1hZX1RZUEVfU09DS1M0CiAgICAgICAgICAgIHJkbnMgPSBGYWxzZQogICAgICAgIGVsaWYgcGFyc2VkLnNjaGVtZSA9PSBcInNvY2tzNGFcIjoKICAgICAgICAgICAgc29ja3NfdmVyc2lvbiA9IHNvY2tzLlBST1hZX1RZUEVfU09DS1M0CiAgICAgICAgICAgIHJkbnMgPSBUcnVlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcIlVuYWJsZSB0byBkZXRlcm1pbmUgU09DS1MgdmVyc2lvbiBmcm9tICVzXCIgJSBwcm94eV91cmwpCgogICAgICAgIHNlbGYucHJveHlfdXJsID0gcHJveHlfdXJsCgogICAgICAgIHNvY2tzX29wdGlvbnMgPSB7CiAgICAgICAgICAgIFwic29ja3NfdmVyc2lvblwiOiBzb2Nrc192ZXJzaW9uLAogICAgICAgICAgICBcInByb3h5X2hvc3RcIjogcGFyc2VkLmhvc3QsCiAgICAgICAgICAgIFwicHJveHlfcG9ydFwiOiBwYXJzZWQucG9ydCwKICAgICAgICAgICAgXCJ1c2VybmFtZVwiOiB1c2VybmFtZSwKICAgICAgICAgICAgXCJwYXNzd29yZFwiOiBwYXNzd29yZCwKICAgICAgICAgICAgXCJyZG5zXCI6IHJkbnMsCiAgICAgICAgfQogICAgICAgIGNvbm5lY3Rpb25fcG9vbF9rd1tcIl9zb2Nrc19vcHRpb25zXCJdID0gc29ja3Nfb3B0aW9ucwoKICAgICAgICBzdXBlcihTT0NLU1Byb3h5TWFuYWdlciwgc2VsZikuX19pbml0X18oCiAgICAgICAgICAgIG51bV9wb29scywgaGVhZGVycywgKipjb25uZWN0aW9uX3Bvb2xfa3cKICAgICAgICApCgogICAgICAgIHNlbGYucG9vbF9jbGFzc2VzX2J5X3NjaGVtZSA9IFNPQ0tTUHJveHlNYW5hZ2VyLnBvb2xfY2xhc3Nlc19ieV9zY2hlbWUKCiIiIgptb2R1bGVfZGljdFsidXJsbGliMyIrb3Muc2VwKyJjb250cmliIitvcy5zZXArIl9faW5pdF9fLnB5Il09IiIiCgoiIiIKbW9kdWxlX2RpY3RbInVybGxpYjMiK29zLnNlcCsiY29udHJpYiIrb3Muc2VwKyJhcHBlbmdpbmUucHkiXT0iIiIKXCJcIlwiClRoaXMgbW9kdWxlIHByb3ZpZGVzIGEgcG9vbCBtYW5hZ2VyIHRoYXQgdXNlcyBHb29nbGUgQXBwIEVuZ2luZSdzCmBVUkxGZXRjaCBTZXJ2aWNlIDxodHRwczovL2Nsb3VkLmdvb2dsZS5jb20vYXBwZW5naW5lL2RvY3MvcHl0aG9uL3VybGZldGNoPmBfLgoKRXhhbXBsZSB1c2FnZTo6CgogICAgZnJvbSB1cmxsaWIzIGltcG9ydCBQb29sTWFuYWdlcgogICAgZnJvbSB1cmxsaWIzLmNvbnRyaWIuYXBwZW5naW5lIGltcG9ydCBBcHBFbmdpbmVNYW5hZ2VyLCBpc19hcHBlbmdpbmVfc2FuZGJveAoKICAgIGlmIGlzX2FwcGVuZ2luZV9zYW5kYm94KCk6CiAgICAgICAgIyBBcHBFbmdpbmVNYW5hZ2VyIHVzZXMgQXBwRW5naW5lJ3MgVVJMRmV0Y2ggQVBJIGJlaGluZCB0aGUgc2NlbmVzCiAgICAgICAgaHR0cCA9IEFwcEVuZ2luZU1hbmFnZXIoKQogICAgZWxzZToKICAgICAgICAjIFBvb2xNYW5hZ2VyIHVzZXMgYSBzb2NrZXQtbGV2ZWwgQVBJIGJlaGluZCB0aGUgc2NlbmVzCiAgICAgICAgaHR0cCA9IFBvb2xNYW5hZ2VyKCkKCiAgICByID0gaHR0cC5yZXF1ZXN0KCdHRVQnLCAnaHR0cHM6Ly9nb29nbGUuY29tLycpCgpUaGVyZSBhcmUgYGxpbWl0YXRpb25zIDxodHRwczovL2Nsb3VkLmdvb2dsZS5jb20vYXBwZW5naW5lL2RvY3MvcHl0aG9uL1xcCnVybGZldGNoLyNQeXRob25fUXVvdGFzX2FuZF9saW1pdHM+YF8gdG8gdGhlIFVSTEZldGNoIHNlcnZpY2UgYW5kIGl0IG1heSBub3QgYmUKdGhlIGJlc3QgY2hvaWNlIGZvciB5b3VyIGFwcGxpY2F0aW9uLiBUaGVyZSBhcmUgdGhyZWUgb3B0aW9ucyBmb3IgdXNpbmcKdXJsbGliMyBvbiBHb29nbGUgQXBwIEVuZ2luZToKCjEuIFlvdSBjYW4gdXNlIDpjbGFzczpgQXBwRW5naW5lTWFuYWdlcmAgd2l0aCBVUkxGZXRjaC4gVVJMRmV0Y2ggaXMKICAgY29zdC1lZmZlY3RpdmUgaW4gbWFueSBjaXJjdW1zdGFuY2VzIGFzIGxvbmcgYXMgeW91ciB1c2FnZSBpcyB3aXRoaW4gdGhlCiAgIGxpbWl0YXRpb25zLgoyLiBZb3UgY2FuIHVzZSBhIG5vcm1hbCA6Y2xhc3M6YH51cmxsaWIzLlBvb2xNYW5hZ2VyYCBieSBlbmFibGluZyBzb2NrZXRzLgogICBTb2NrZXRzIGFsc28gaGF2ZSBgbGltaXRhdGlvbnMgYW5kIHJlc3RyaWN0aW9ucwogICA8aHR0cHM6Ly9jbG91ZC5nb29nbGUuY29tL2FwcGVuZ2luZS9kb2NzL3B5dGhvbi9zb2NrZXRzL1xcCiAgICNsaW1pdGF0aW9ucy1hbmQtcmVzdHJpY3Rpb25zPmBfIGFuZCBoYXZlIGEgbG93ZXIgZnJlZSBxdW90YSB0aGFuIFVSTEZldGNoLgogICBUbyB1c2Ugc29ja2V0cywgYmUgc3VyZSB0byBzcGVjaWZ5IHRoZSBmb2xsb3dpbmcgaW4geW91ciBgYGFwcC55YW1sYGA6OgoKICAgICAgICBlbnZfdmFyaWFibGVzOgogICAgICAgICAgICBHQUVfVVNFX1NPQ0tFVFNfSFRUUExJQiA6ICd0cnVlJwoKMy4gSWYgeW91IGFyZSB1c2luZyBgQXBwIEVuZ2luZSBGbGV4aWJsZQo8aHR0cHM6Ly9jbG91ZC5nb29nbGUuY29tL2FwcGVuZ2luZS9kb2NzL2ZsZXhpYmxlLz5gXywgeW91IGNhbiB1c2UgdGhlIHN0YW5kYXJkCjpjbGFzczpgUG9vbE1hbmFnZXJgIHdpdGhvdXQgYW55IGNvbmZpZ3VyYXRpb24gb3Igc3BlY2lhbCBlbnZpcm9ubWVudCB2YXJpYWJsZXMuClwiXCJcIgoKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhYnNvbHV0ZV9pbXBvcnQKIyA8IGluY2x1ZGUgJ2dvb2dsZS5weScgPgoKCmltcG9ydCBpbwppbXBvcnQgbG9nZ2luZwppbXBvcnQgd2FybmluZ3MKCmZyb20gLi5leGNlcHRpb25zIGltcG9ydCAoCiAgICBIVFRQRXJyb3IsCiAgICBIVFRQV2FybmluZywKICAgIE1heFJldHJ5RXJyb3IsCiAgICBQcm90b2NvbEVycm9yLAogICAgU1NMRXJyb3IsCiAgICBUaW1lb3V0RXJyb3IsCikKZnJvbSAuLnBhY2thZ2VzLnNpeC5tb3Zlcy51cmxsaWIucGFyc2UgaW1wb3J0IHVybGpvaW4KZnJvbSAuLnJlcXVlc3QgaW1wb3J0IFJlcXVlc3RNZXRob2RzCmZyb20gLi5yZXNwb25zZSBpbXBvcnQgSFRUUFJlc3BvbnNlCmZyb20gLi51dGlsLnJldHJ5IGltcG9ydCBSZXRyeQpmcm9tIC4udXRpbC50aW1lb3V0IGltcG9ydCBUaW1lb3V0CmZyb20gLiBpbXBvcnQgX2FwcGVuZ2luZV9lbnZpcm9uCgp0cnk6CiAgICBmcm9tIGdvb2dsZS5hcHBlbmdpbmUuYXBpIGltcG9ydCB1cmxmZXRjaApleGNlcHQgSW1wb3J0RXJyb3I6CiAgICB1cmxmZXRjaCA9IE5vbmUKCgpsb2cgPSBsb2dnaW5nLmdldExvZ2dlcihfX25hbWVfXykKCgpjbGFzcyBBcHBFbmdpbmVQbGF0Zm9ybVdhcm5pbmcoSFRUUFdhcm5pbmcpOgogICAgcGFzcwoKCmNsYXNzIEFwcEVuZ2luZVBsYXRmb3JtRXJyb3IoSFRUUEVycm9yKToKICAgIHBhc3MKCgpjbGFzcyBBcHBFbmdpbmVNYW5hZ2VyKFJlcXVlc3RNZXRob2RzKToKICAgIFwiXCJcIgogICAgQ29ubmVjdGlvbiBtYW5hZ2VyIGZvciBHb29nbGUgQXBwIEVuZ2luZSBzYW5kYm94IGFwcGxpY2F0aW9ucy4KCiAgICBUaGlzIG1hbmFnZXIgdXNlcyB0aGUgVVJMRmV0Y2ggc2VydmljZSBkaXJlY3RseSBpbnN0ZWFkIG9mIHVzaW5nIHRoZQogICAgZW11bGF0ZWQgaHR0cGxpYiwgYW5kIGlzIHN1YmplY3QgdG8gVVJMRmV0Y2ggbGltaXRhdGlvbnMgYXMgZGVzY3JpYmVkIGluCiAgICB0aGUgQXBwIEVuZ2luZSBkb2N1bWVudGF0aW9uIGBoZXJlCiAgICA8aHR0cHM6Ly9jbG91ZC5nb29nbGUuY29tL2FwcGVuZ2luZS9kb2NzL3B5dGhvbi91cmxmZXRjaD5gXy4KCiAgICBOb3RhYmx5IGl0IHdpbGwgcmFpc2UgYW4gOmNsYXNzOmBBcHBFbmdpbmVQbGF0Zm9ybUVycm9yYCBpZjoKICAgICAgICAqIFVSTEZldGNoIGlzIG5vdCBhdmFpbGFibGUuCiAgICAgICAgKiBJZiB5b3UgYXR0ZW1wdCB0byB1c2UgdGhpcyBvbiBBcHAgRW5naW5lIEZsZXhpYmxlLCBhcyBmdWxsIHNvY2tldAogICAgICAgICAgc3VwcG9ydCBpcyBhdmFpbGFibGUuCiAgICAgICAgKiBJZiBhIHJlcXVlc3Qgc2l6ZSBpcyBtb3JlIHRoYW4gMTAgbWVnYWJ5dGVzLgogICAgICAgICogSWYgYSByZXNwb25zZSBzaXplIGlzIG1vcmUgdGhhbiAzMiBtZWdhYnl0ZXMuCiAgICAgICAgKiBJZiB5b3UgdXNlIGFuIHVuc3VwcG9ydGVkIHJlcXVlc3QgbWV0aG9kIHN1Y2ggYXMgT1BUSU9OUy4KCiAgICBCZXlvbmQgdGhvc2UgY2FzZXMsIGl0IHdpbGwgcmFpc2Ugbm9ybWFsIHVybGxpYjMgZXJyb3JzLgogICAgXCJcIlwiCgogICAgZGVmIF9faW5pdF9fKAogICAgICAgIHNlbGYsCiAgICAgICAgaGVhZGVycz1Ob25lLAogICAgICAgIHJldHJpZXM9Tm9uZSwKICAgICAgICB2YWxpZGF0ZV9jZXJ0aWZpY2F0ZT1UcnVlLAogICAgICAgIHVybGZldGNoX3JldHJpZXM9VHJ1ZSwKICAgICk6CiAgICAgICAgaWYgbm90IHVybGZldGNoOgogICAgICAgICAgICByYWlzZSBBcHBFbmdpbmVQbGF0Zm9ybUVycm9yKAogICAgICAgICAgICAgICAgXCJVUkxGZXRjaCBpcyBub3QgYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQuXCIKICAgICAgICAgICAgKQoKICAgICAgICB3YXJuaW5ncy53YXJuKAogICAgICAgICAgICBcInVybGxpYjMgaXMgdXNpbmcgVVJMRmV0Y2ggb24gR29vZ2xlIEFwcCBFbmdpbmUgc2FuZGJveCBpbnN0ZWFkIFwiCiAgICAgICAgICAgIFwib2Ygc29ja2V0cy4gVG8gdXNlIHNvY2tldHMgZGlyZWN0bHkgaW5zdGVhZCBvZiBVUkxGZXRjaCBzZWUgXCIKICAgICAgICAgICAgXCJodHRwczovL3VybGxpYjMucmVhZHRoZWRvY3MuaW8vZW4vMS4yNi54L3JlZmVyZW5jZS91cmxsaWIzLmNvbnRyaWIuaHRtbC5cIiwKICAgICAgICAgICAgQXBwRW5naW5lUGxhdGZvcm1XYXJuaW5nLAogICAgICAgICkKCiAgICAgICAgUmVxdWVzdE1ldGhvZHMuX19pbml0X18oc2VsZiwgaGVhZGVycykKICAgICAgICBzZWxmLnZhbGlkYXRlX2NlcnRpZmljYXRlID0gdmFsaWRhdGVfY2VydGlmaWNhdGUKICAgICAgICBzZWxmLnVybGZldGNoX3JldHJpZXMgPSB1cmxmZXRjaF9yZXRyaWVzCgogICAgICAgIHNlbGYucmV0cmllcyA9IHJldHJpZXMgb3IgUmV0cnkuREVGQVVMVAoKICAgIGRlZiBfX2VudGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19leGl0X18oc2VsZiwgZXhjX3R5cGUsIGV4Y192YWwsIGV4Y190Yik6CiAgICAgICAgIyBSZXR1cm4gRmFsc2UgdG8gcmUtcmFpc2UgYW55IHBvdGVudGlhbCBleGNlcHRpb25zCiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIHVybG9wZW4oCiAgICAgICAgc2VsZiwKICAgICAgICBtZXRob2QsCiAgICAgICAgdXJsLAogICAgICAgIGJvZHk9Tm9uZSwKICAgICAgICBoZWFkZXJzPU5vbmUsCiAgICAgICAgcmV0cmllcz1Ob25lLAogICAgICAgIHJlZGlyZWN0PVRydWUsCiAgICAgICAgdGltZW91dD1UaW1lb3V0LkRFRkFVTFRfVElNRU9VVCwKICAgICAgICAqKnJlc3BvbnNlX2t3CiAgICApOgoKICAgICAgICByZXRyaWVzID0gc2VsZi5fZ2V0X3JldHJpZXMocmV0cmllcywgcmVkaXJlY3QpCgogICAgICAgIHRyeToKICAgICAgICAgICAgZm9sbG93X3JlZGlyZWN0cyA9IHJlZGlyZWN0IGFuZCByZXRyaWVzLnJlZGlyZWN0ICE9IDAgYW5kIHJldHJpZXMudG90YWwKICAgICAgICAgICAgcmVzcG9uc2UgPSB1cmxmZXRjaC5mZXRjaCgKICAgICAgICAgICAgICAgIHVybCwKICAgICAgICAgICAgICAgIHBheWxvYWQ9Ym9keSwKICAgICAgICAgICAgICAgIG1ldGhvZD1tZXRob2QsCiAgICAgICAgICAgICAgICBoZWFkZXJzPWhlYWRlcnMgb3Ige30sCiAgICAgICAgICAgICAgICBhbGxvd190cnVuY2F0ZWQ9RmFsc2UsCiAgICAgICAgICAgICAgICBmb2xsb3dfcmVkaXJlY3RzPXNlbGYudXJsZmV0Y2hfcmV0cmllcyBhbmQgZm9sbG93X3JlZGlyZWN0cywKICAgICAgICAgICAgICAgIGRlYWRsaW5lPXNlbGYuX2dldF9hYnNvbHV0ZV90aW1lb3V0KHRpbWVvdXQpLAogICAgICAgICAgICAgICAgdmFsaWRhdGVfY2VydGlmaWNhdGU9c2VsZi52YWxpZGF0ZV9jZXJ0aWZpY2F0ZSwKICAgICAgICAgICAgKQogICAgICAgIGV4Y2VwdCB1cmxmZXRjaC5EZWFkbGluZUV4Y2VlZGVkRXJyb3IgYXMgZToKICAgICAgICAgICAgcmFpc2UgVGltZW91dEVycm9yKHNlbGYsIGUpCgogICAgICAgIGV4Y2VwdCB1cmxmZXRjaC5JbnZhbGlkVVJMRXJyb3IgYXMgZToKICAgICAgICAgICAgaWYgXCJ0b28gbGFyZ2VcIiBpbiBzdHIoZSk6CiAgICAgICAgICAgICAgICByYWlzZSBBcHBFbmdpbmVQbGF0Zm9ybUVycm9yKAogICAgICAgICAgICAgICAgICAgIFwiVVJMRmV0Y2ggcmVxdWVzdCB0b28gbGFyZ2UsIFVSTEZldGNoIG9ubHkgXCIKICAgICAgICAgICAgICAgICAgICBcInN1cHBvcnRzIHJlcXVlc3RzIHVwIHRvIDEwbWIgaW4gc2l6ZS5cIiwKICAgICAgICAgICAgICAgICAgICBlLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICByYWlzZSBQcm90b2NvbEVycm9yKGUpCgogICAgICAgIGV4Y2VwdCB1cmxmZXRjaC5Eb3dubG9hZEVycm9yIGFzIGU6CiAgICAgICAgICAgIGlmIFwiVG9vIG1hbnkgcmVkaXJlY3RzXCIgaW4gc3RyKGUpOgogICAgICAgICAgICAgICAgcmFpc2UgTWF4UmV0cnlFcnJvcihzZWxmLCB1cmwsIHJlYXNvbj1lKQogICAgICAgICAgICByYWlzZSBQcm90b2NvbEVycm9yKGUpCgogICAgICAgIGV4Y2VwdCB1cmxmZXRjaC5SZXNwb25zZVRvb0xhcmdlRXJyb3IgYXMgZToKICAgICAgICAgICAgcmFpc2UgQXBwRW5naW5lUGxhdGZvcm1FcnJvcigKICAgICAgICAgICAgICAgIFwiVVJMRmV0Y2ggcmVzcG9uc2UgdG9vIGxhcmdlLCBVUkxGZXRjaCBvbmx5IHN1cHBvcnRzXCIKICAgICAgICAgICAgICAgIFwicmVzcG9uc2VzIHVwIHRvIDMybWIgaW4gc2l6ZS5cIiwKICAgICAgICAgICAgICAgIGUsCiAgICAgICAgICAgICkKCiAgICAgICAgZXhjZXB0IHVybGZldGNoLlNTTENlcnRpZmljYXRlRXJyb3IgYXMgZToKICAgICAgICAgICAgcmFpc2UgU1NMRXJyb3IoZSkKCiAgICAgICAgZXhjZXB0IHVybGZldGNoLkludmFsaWRNZXRob2RFcnJvciBhcyBlOgogICAgICAgICAgICByYWlzZSBBcHBFbmdpbmVQbGF0Zm9ybUVycm9yKAogICAgICAgICAgICAgICAgXCJVUkxGZXRjaCBkb2VzIG5vdCBzdXBwb3J0IG1ldGhvZDogJXNcIiAlIG1ldGhvZCwgZQogICAgICAgICAgICApCgogICAgICAgIGh0dHBfcmVzcG9uc2UgPSBzZWxmLl91cmxmZXRjaF9yZXNwb25zZV90b19odHRwX3Jlc3BvbnNlKAogICAgICAgICAgICByZXNwb25zZSwgcmV0cmllcz1yZXRyaWVzLCAqKnJlc3BvbnNlX2t3CiAgICAgICAgKQoKICAgICAgICAjIEhhbmRsZSByZWRpcmVjdD8KICAgICAgICByZWRpcmVjdF9sb2NhdGlvbiA9IHJlZGlyZWN0IGFuZCBodHRwX3Jlc3BvbnNlLmdldF9yZWRpcmVjdF9sb2NhdGlvbigpCiAgICAgICAgaWYgcmVkaXJlY3RfbG9jYXRpb246CiAgICAgICAgICAgICMgQ2hlY2sgZm9yIHJlZGlyZWN0IHJlc3BvbnNlCiAgICAgICAgICAgIGlmIHNlbGYudXJsZmV0Y2hfcmV0cmllcyBhbmQgcmV0cmllcy5yYWlzZV9vbl9yZWRpcmVjdDoKICAgICAgICAgICAgICAgIHJhaXNlIE1heFJldHJ5RXJyb3Ioc2VsZiwgdXJsLCBcInRvbyBtYW55IHJlZGlyZWN0c1wiKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgaHR0cF9yZXNwb25zZS5zdGF0dXMgPT0gMzAzOgogICAgICAgICAgICAgICAgICAgIG1ldGhvZCA9IFwiR0VUXCIKCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgcmV0cmllcyA9IHJldHJpZXMuaW5jcmVtZW50KAogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2QsIHVybCwgcmVzcG9uc2U9aHR0cF9yZXNwb25zZSwgX3Bvb2w9c2VsZgogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGV4Y2VwdCBNYXhSZXRyeUVycm9yOgogICAgICAgICAgICAgICAgICAgIGlmIHJldHJpZXMucmFpc2Vfb25fcmVkaXJlY3Q6CiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIE1heFJldHJ5RXJyb3Ioc2VsZiwgdXJsLCBcInRvbyBtYW55IHJlZGlyZWN0c1wiKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBodHRwX3Jlc3BvbnNlCgogICAgICAgICAgICAgICAgcmV0cmllcy5zbGVlcF9mb3JfcmV0cnkoaHR0cF9yZXNwb25zZSkKICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyhcIlJlZGlyZWN0aW5nICVzIC0+ICVzXCIsIHVybCwgcmVkaXJlY3RfbG9jYXRpb24pCiAgICAgICAgICAgICAgICByZWRpcmVjdF91cmwgPSB1cmxqb2luKHVybCwgcmVkaXJlY3RfbG9jYXRpb24pCiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi51cmxvcGVuKAogICAgICAgICAgICAgICAgICAgIG1ldGhvZCwKICAgICAgICAgICAgICAgICAgICByZWRpcmVjdF91cmwsCiAgICAgICAgICAgICAgICAgICAgYm9keSwKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLAogICAgICAgICAgICAgICAgICAgIHJldHJpZXM9cmV0cmllcywKICAgICAgICAgICAgICAgICAgICByZWRpcmVjdD1yZWRpcmVjdCwKICAgICAgICAgICAgICAgICAgICB0aW1lb3V0PXRpbWVvdXQsCiAgICAgICAgICAgICAgICAgICAgKipyZXNwb25zZV9rdwogICAgICAgICAgICAgICAgKQoKICAgICAgICAjIENoZWNrIGlmIHdlIHNob3VsZCByZXRyeSB0aGUgSFRUUCByZXNwb25zZS4KICAgICAgICBoYXNfcmV0cnlfYWZ0ZXIgPSBib29sKGh0dHBfcmVzcG9uc2UuZ2V0aGVhZGVyKFwiUmV0cnktQWZ0ZXJcIikpCiAgICAgICAgaWYgcmV0cmllcy5pc19yZXRyeShtZXRob2QsIGh0dHBfcmVzcG9uc2Uuc3RhdHVzLCBoYXNfcmV0cnlfYWZ0ZXIpOgogICAgICAgICAgICByZXRyaWVzID0gcmV0cmllcy5pbmNyZW1lbnQobWV0aG9kLCB1cmwsIHJlc3BvbnNlPWh0dHBfcmVzcG9uc2UsIF9wb29sPXNlbGYpCiAgICAgICAgICAgIGxvZy5kZWJ1ZyhcIlJldHJ5OiAlc1wiLCB1cmwpCiAgICAgICAgICAgIHJldHJpZXMuc2xlZXAoaHR0cF9yZXNwb25zZSkKICAgICAgICAgICAgcmV0dXJuIHNlbGYudXJsb3BlbigKICAgICAgICAgICAgICAgIG1ldGhvZCwKICAgICAgICAgICAgICAgIHVybCwKICAgICAgICAgICAgICAgIGJvZHk9Ym9keSwKICAgICAgICAgICAgICAgIGhlYWRlcnM9aGVhZGVycywKICAgICAgICAgICAgICAgIHJldHJpZXM9cmV0cmllcywKICAgICAgICAgICAgICAgIHJlZGlyZWN0PXJlZGlyZWN0LAogICAgICAgICAgICAgICAgdGltZW91dD10aW1lb3V0LAogICAgICAgICAgICAgICAgKipyZXNwb25zZV9rdwogICAgICAgICAgICApCgogICAgICAgIHJldHVybiBodHRwX3Jlc3BvbnNlCgogICAgZGVmIF91cmxmZXRjaF9yZXNwb25zZV90b19odHRwX3Jlc3BvbnNlKHNlbGYsIHVybGZldGNoX3Jlc3AsICoqcmVzcG9uc2Vfa3cpOgoKICAgICAgICBpZiBpc19wcm9kX2FwcGVuZ2luZSgpOgogICAgICAgICAgICAjIFByb2R1Y3Rpb24gR0FFIGhhbmRsZXMgZGVmbGF0ZSBlbmNvZGluZyBhdXRvbWF0aWNhbGx5LCBidXQgZG9lcwogICAgICAgICAgICAjIG5vdCByZW1vdmUgdGhlIGVuY29kaW5nIGhlYWRlci4KICAgICAgICAgICAgY29udGVudF9lbmNvZGluZyA9IHVybGZldGNoX3Jlc3AuaGVhZGVycy5nZXQoXCJjb250ZW50LWVuY29kaW5nXCIpCgogICAgICAgICAgICBpZiBjb250ZW50X2VuY29kaW5nID09IFwiZGVmbGF0ZVwiOgogICAgICAgICAgICAgICAgZGVsIHVybGZldGNoX3Jlc3AuaGVhZGVyc1tcImNvbnRlbnQtZW5jb2RpbmdcIl0KCiAgICAgICAgdHJhbnNmZXJfZW5jb2RpbmcgPSB1cmxmZXRjaF9yZXNwLmhlYWRlcnMuZ2V0KFwidHJhbnNmZXItZW5jb2RpbmdcIikKICAgICAgICAjIFdlIGhhdmUgYSBmdWxsIHJlc3BvbnNlJ3MgY29udGVudCwKICAgICAgICAjIHNvIGxldCdzIG1ha2Ugc3VyZSB3ZSBkb24ndCByZXBvcnQgb3Vyc2VsdmVzIGFzIGNodW5rZWQgZGF0YS4KICAgICAgICBpZiB0cmFuc2Zlcl9lbmNvZGluZyA9PSBcImNodW5rZWRcIjoKICAgICAgICAgICAgZW5jb2RpbmdzID0gdHJhbnNmZXJfZW5jb2Rpbmcuc3BsaXQoXCIsXCIpCiAgICAgICAgICAgIGVuY29kaW5ncy5yZW1vdmUoXCJjaHVua2VkXCIpCiAgICAgICAgICAgIHVybGZldGNoX3Jlc3AuaGVhZGVyc1tcInRyYW5zZmVyLWVuY29kaW5nXCJdID0gXCIsXCIuam9pbihlbmNvZGluZ3MpCgogICAgICAgIG9yaWdpbmFsX3Jlc3BvbnNlID0gSFRUUFJlc3BvbnNlKAogICAgICAgICAgICAjIEluIG9yZGVyIGZvciBkZWNvZGluZyB0byB3b3JrLCB3ZSBtdXN0IHByZXNlbnQgdGhlIGNvbnRlbnQgYXMKICAgICAgICAgICAgIyBhIGZpbGUtbGlrZSBvYmplY3QuCiAgICAgICAgICAgIGJvZHk9aW8uQnl0ZXNJTyh1cmxmZXRjaF9yZXNwLmNvbnRlbnQpLAogICAgICAgICAgICBtc2c9dXJsZmV0Y2hfcmVzcC5oZWFkZXJfbXNnLAogICAgICAgICAgICBoZWFkZXJzPXVybGZldGNoX3Jlc3AuaGVhZGVycywKICAgICAgICAgICAgc3RhdHVzPXVybGZldGNoX3Jlc3Auc3RhdHVzX2NvZGUsCiAgICAgICAgICAgICoqcmVzcG9uc2Vfa3cKICAgICAgICApCgogICAgICAgIHJldHVybiBIVFRQUmVzcG9uc2UoCiAgICAgICAgICAgIGJvZHk9aW8uQnl0ZXNJTyh1cmxmZXRjaF9yZXNwLmNvbnRlbnQpLAogICAgICAgICAgICBoZWFkZXJzPXVybGZldGNoX3Jlc3AuaGVhZGVycywKICAgICAgICAgICAgc3RhdHVzPXVybGZldGNoX3Jlc3Auc3RhdHVzX2NvZGUsCiAgICAgICAgICAgIG9yaWdpbmFsX3Jlc3BvbnNlPW9yaWdpbmFsX3Jlc3BvbnNlLAogICAgICAgICAgICAqKnJlc3BvbnNlX2t3CiAgICAgICAgKQoKICAgIGRlZiBfZ2V0X2Fic29sdXRlX3RpbWVvdXQoc2VsZiwgdGltZW91dCk6CiAgICAgICAgaWYgdGltZW91dCBpcyBUaW1lb3V0LkRFRkFVTFRfVElNRU9VVDoKICAgICAgICAgICAgcmV0dXJuIE5vbmUgICMgRGVmZXIgdG8gVVJMRmV0Y2gncyBkZWZhdWx0LgogICAgICAgIGlmIGlzaW5zdGFuY2UodGltZW91dCwgVGltZW91dCk6CiAgICAgICAgICAgIGlmIHRpbWVvdXQuX3JlYWQgaXMgbm90IE5vbmUgb3IgdGltZW91dC5fY29ubmVjdCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oCiAgICAgICAgICAgICAgICAgICAgXCJVUkxGZXRjaCBkb2VzIG5vdCBzdXBwb3J0IGdyYW51bGFyIHRpbWVvdXQgc2V0dGluZ3MsIFwiCiAgICAgICAgICAgICAgICAgICAgXCJyZXZlcnRpbmcgdG8gdG90YWwgb3IgZGVmYXVsdCBVUkxGZXRjaCB0aW1lb3V0LlwiLAogICAgICAgICAgICAgICAgICAgIEFwcEVuZ2luZVBsYXRmb3JtV2FybmluZywKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgcmV0dXJuIHRpbWVvdXQudG90YWwKICAgICAgICByZXR1cm4gdGltZW91dAoKICAgIGRlZiBfZ2V0X3JldHJpZXMoc2VsZiwgcmV0cmllcywgcmVkaXJlY3QpOgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHJldHJpZXMsIFJldHJ5KToKICAgICAgICAgICAgcmV0cmllcyA9IFJldHJ5LmZyb21faW50KHJldHJpZXMsIHJlZGlyZWN0PXJlZGlyZWN0LCBkZWZhdWx0PXNlbGYucmV0cmllcykKCiAgICAgICAgaWYgcmV0cmllcy5jb25uZWN0IG9yIHJldHJpZXMucmVhZCBvciByZXRyaWVzLnJlZGlyZWN0OgogICAgICAgICAgICB3YXJuaW5ncy53YXJuKAogICAgICAgICAgICAgICAgXCJVUkxGZXRjaCBvbmx5IHN1cHBvcnRzIHRvdGFsIHJldHJpZXMgYW5kIGRvZXMgbm90IFwiCiAgICAgICAgICAgICAgICBcInJlY29nbml6ZSBjb25uZWN0LCByZWFkLCBvciByZWRpcmVjdCByZXRyeSBwYXJhbWV0ZXJzLlwiLAogICAgICAgICAgICAgICAgQXBwRW5naW5lUGxhdGZvcm1XYXJuaW5nLAogICAgICAgICAgICApCgogICAgICAgIHJldHVybiByZXRyaWVzCgoKIyBBbGlhcyBtZXRob2RzIGZyb20gX2FwcGVuZ2luZV9lbnZpcm9uIHRvIG1haW50YWluIHB1YmxpYyBBUEkgaW50ZXJmYWNlLgoKaXNfYXBwZW5naW5lID0gX2FwcGVuZ2luZV9lbnZpcm9uLmlzX2FwcGVuZ2luZQppc19hcHBlbmdpbmVfc2FuZGJveCA9IF9hcHBlbmdpbmVfZW52aXJvbi5pc19hcHBlbmdpbmVfc2FuZGJveAppc19sb2NhbF9hcHBlbmdpbmUgPSBfYXBwZW5naW5lX2Vudmlyb24uaXNfbG9jYWxfYXBwZW5naW5lCmlzX3Byb2RfYXBwZW5naW5lID0gX2FwcGVuZ2luZV9lbnZpcm9uLmlzX3Byb2RfYXBwZW5naW5lCmlzX3Byb2RfYXBwZW5naW5lX212bXMgPSBfYXBwZW5naW5lX2Vudmlyb24uaXNfcHJvZF9hcHBlbmdpbmVfbXZtcwoKIiIiCm1vZHVsZV9kaWN0WyJ1cmxsaWIzIitvcy5zZXArImNvbnRyaWIiK29zLnNlcCsiX2FwcGVuZ2luZV9lbnZpcm9uLnB5Il09IiIiClwiXCJcIgpUaGlzIG1vZHVsZSBwcm92aWRlcyBtZWFucyB0byBkZXRlY3QgdGhlIEFwcCBFbmdpbmUgZW52aXJvbm1lbnQuClwiXCJcIgoKaW1wb3J0IG9zCgoKZGVmIGlzX2FwcGVuZ2luZSgpOgogICAgcmV0dXJuIGlzX2xvY2FsX2FwcGVuZ2luZSgpIG9yIGlzX3Byb2RfYXBwZW5naW5lKCkKCgpkZWYgaXNfYXBwZW5naW5lX3NhbmRib3goKToKICAgIFwiXCJcIlJlcG9ydHMgaWYgdGhlIGFwcCBpcyBydW5uaW5nIGluIHRoZSBmaXJzdCBnZW5lcmF0aW9uIHNhbmRib3guCgogICAgVGhlIHNlY29uZCBnZW5lcmF0aW9uIHJ1bnRpbWVzIGFyZSB0ZWNobmljYWxseSBzdGlsbCBpbiBhIHNhbmRib3gsIGJ1dCBpdAogICAgaXMgbXVjaCBsZXNzIHJlc3RyaWN0aXZlLCBzbyBnZW5lcmFsbHkgeW91IHNob3VsZG4ndCBuZWVkIHRvIGNoZWNrIGZvciBpdC4KICAgIHNlZSBodHRwczovL2Nsb3VkLmdvb2dsZS5jb20vYXBwZW5naW5lL2RvY3Mvc3RhbmRhcmQvcnVudGltZXMKICAgIFwiXCJcIgogICAgcmV0dXJuIGlzX2FwcGVuZ2luZSgpIGFuZCBvcy5lbnZpcm9uW1wiQVBQRU5HSU5FX1JVTlRJTUVcIl0gPT0gXCJweXRob24yN1wiCgoKZGVmIGlzX2xvY2FsX2FwcGVuZ2luZSgpOgogICAgcmV0dXJuIFwiQVBQRU5HSU5FX1JVTlRJTUVcIiBpbiBvcy5lbnZpcm9uIGFuZCBvcy5lbnZpcm9uLmdldCgKICAgICAgICBcIlNFUlZFUl9TT0ZUV0FSRVwiLCBcIlwiCiAgICApLnN0YXJ0c3dpdGgoXCJEZXZlbG9wbWVudC9cIikKCgpkZWYgaXNfcHJvZF9hcHBlbmdpbmUoKToKICAgIHJldHVybiBcIkFQUEVOR0lORV9SVU5USU1FXCIgaW4gb3MuZW52aXJvbiBhbmQgb3MuZW52aXJvbi5nZXQoCiAgICAgICAgXCJTRVJWRVJfU09GVFdBUkVcIiwgXCJcIgogICAgKS5zdGFydHN3aXRoKFwiR29vZ2xlIEFwcCBFbmdpbmUvXCIpCgoKZGVmIGlzX3Byb2RfYXBwZW5naW5lX212bXMoKToKICAgIFwiXCJcIkRlcHJlY2F0ZWQuXCJcIlwiCiAgICByZXR1cm4gRmFsc2UKCiIiIgptb2R1bGVfZGljdFsidXJsbGliMyIrb3Muc2VwKyJjb250cmliIitvcy5zZXArIl9zZWN1cmV0cmFuc3BvcnQiK29zLnNlcCsiYmluZGluZ3MucHkiXT0iIiIKXCJcIlwiClRoaXMgbW9kdWxlIHVzZXMgY3R5cGVzIHRvIGJpbmQgYSB3aG9sZSBidW5jaCBvZiBmdW5jdGlvbnMgYW5kIGNvbnN0YW50cyBmcm9tClNlY3VyZVRyYW5zcG9ydC4gVGhlIGdvYWwgaGVyZSBpcyB0byBwcm92aWRlIHRoZSBsb3ctbGV2ZWwgQVBJIHRvClNlY3VyZVRyYW5zcG9ydC4gVGhlc2UgYXJlIGVzc2VudGlhbGx5IHRoZSBDLWxldmVsIGZ1bmN0aW9ucyBhbmQgY29uc3RhbnRzLCBhbmQKdGhleSdyZSBwcmV0dHkgZ3Jvc3MgdG8gd29yayB3aXRoLgoKVGhpcyBjb2RlIGlzIGEgYmFzdGFyZGlzZWQgdmVyc2lvbiBvZiB0aGUgY29kZSBmb3VuZCBpbiBXaWxsIEJvbmQncyBvc2NyeXB0bwpsaWJyYXJ5LiBBbiBlbm9ybW91cyBkZWJ0IGlzIG93ZWQgdG8gaGltIGZvciBibGF6aW5nIHRoaXMgdHJhaWwgZm9yIHVzLiBGb3IKdGhhdCByZWFzb24sIHRoaXMgY29kZSBzaG91bGQgYmUgY29uc2lkZXJlZCB0byBiZSBjb3ZlcmVkIGJvdGggYnkgdXJsbGliMydzCmxpY2Vuc2UgYW5kIGJ5IG9zY3J5cHRvJ3M6CgogICAgQ29weXJpZ2h0IChjKSAyMDE1LTIwMTYgV2lsbCBCb25kIDx3aWxsQHdib25kLm5ldD4KCiAgICBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQogICAgY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLAogICAgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbgogICAgdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsCiAgICBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUKICAgIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6CgogICAgVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4KICAgIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgoKICAgIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKICAgIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLAogICAgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFCiAgICBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSCiAgICBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORwogICAgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUgogICAgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgpcIlwiXCIKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhYnNvbHV0ZV9pbXBvcnQKCmltcG9ydCBwbGF0Zm9ybQpmcm9tIGN0eXBlcyBpbXBvcnQgKAogICAgQ0RMTCwKICAgIENGVU5DVFlQRSwKICAgIFBPSU5URVIsCiAgICBjX2Jvb2wsCiAgICBjX2J5dGUsCiAgICBjX2NoYXJfcCwKICAgIGNfaW50MzIsCiAgICBjX2xvbmcsCiAgICBjX3NpemVfdCwKICAgIGNfdWludDMyLAogICAgY191bG9uZywKICAgIGNfdm9pZF9wLAopCmZyb20gY3R5cGVzLnV0aWwgaW1wb3J0IGZpbmRfbGlicmFyeQoKZnJvbSAuLi5wYWNrYWdlcy5zaXggaW1wb3J0IHJhaXNlX2Zyb20KCmlmIHBsYXRmb3JtLnN5c3RlbSgpICE9IFwiRGFyd2luXCI6CiAgICByYWlzZSBJbXBvcnRFcnJvcihcIk9ubHkgbWFjT1MgaXMgc3VwcG9ydGVkXCIpCgp2ZXJzaW9uID0gcGxhdGZvcm0ubWFjX3ZlcigpWzBdCnZlcnNpb25faW5mbyA9IHR1cGxlKG1hcChpbnQsIHZlcnNpb24uc3BsaXQoXCIuXCIpKSkKaWYgdmVyc2lvbl9pbmZvIDwgKDEwLCA4KToKICAgIHJhaXNlIE9TRXJyb3IoCiAgICAgICAgXCJPbmx5IE9TIFggMTAuOCBhbmQgbmV3ZXIgYXJlIHN1cHBvcnRlZCwgbm90ICVzLiVzXCIKICAgICAgICAlICh2ZXJzaW9uX2luZm9bMF0sIHZlcnNpb25faW5mb1sxXSkKICAgICkKCgpkZWYgbG9hZF9jZGxsKG5hbWUsIG1hY29zMTBfMTZfcGF0aCk6CiAgICBcIlwiXCJMb2FkcyBhIENETEwgYnkgbmFtZSwgZmFsbGluZyBiYWNrIHRvIGtub3duIHBhdGggb24gMTAuMTYrXCJcIlwiCiAgICB0cnk6CiAgICAgICAgIyBCaWcgU3VyIGlzIHRlY2huaWNhbGx5IDExIGJ1dCB3ZSB1c2UgMTAuMTYgZHVlIHRvIHRoZSBCaWcgU3VyCiAgICAgICAgIyBiZXRhIGJlaW5nIGxhYmVsZWQgYXMgMTAuMTYuCiAgICAgICAgaWYgdmVyc2lvbl9pbmZvID49ICgxMCwgMTYpOgogICAgICAgICAgICBwYXRoID0gbWFjb3MxMF8xNl9wYXRoCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcGF0aCA9IGZpbmRfbGlicmFyeShuYW1lKQogICAgICAgIGlmIG5vdCBwYXRoOgogICAgICAgICAgICByYWlzZSBPU0Vycm9yICAjIENhdWdodCBhbmQgcmVyYWlzZWQgYXMgJ0ltcG9ydEVycm9yJwogICAgICAgIHJldHVybiBDRExMKHBhdGgsIHVzZV9lcnJubz1UcnVlKQogICAgZXhjZXB0IE9TRXJyb3I6CiAgICAgICAgcmFpc2VfZnJvbShJbXBvcnRFcnJvcihcIlRoZSBsaWJyYXJ5ICVzIGZhaWxlZCB0byBsb2FkXCIgJSBuYW1lKSwgTm9uZSkKCgpTZWN1cml0eSA9IGxvYWRfY2RsbCgKICAgIFwiU2VjdXJpdHlcIiwgXCIvU3lzdGVtL0xpYnJhcnkvRnJhbWV3b3Jrcy9TZWN1cml0eS5mcmFtZXdvcmsvU2VjdXJpdHlcIgopCkNvcmVGb3VuZGF0aW9uID0gbG9hZF9jZGxsKAogICAgXCJDb3JlRm91bmRhdGlvblwiLAogICAgXCIvU3lzdGVtL0xpYnJhcnkvRnJhbWV3b3Jrcy9Db3JlRm91bmRhdGlvbi5mcmFtZXdvcmsvQ29yZUZvdW5kYXRpb25cIiwKKQoKCkJvb2xlYW4gPSBjX2Jvb2wKQ0ZJbmRleCA9IGNfbG9uZwpDRlN0cmluZ0VuY29kaW5nID0gY191aW50MzIKQ0ZEYXRhID0gY192b2lkX3AKQ0ZTdHJpbmcgPSBjX3ZvaWRfcApDRkFycmF5ID0gY192b2lkX3AKQ0ZNdXRhYmxlQXJyYXkgPSBjX3ZvaWRfcApDRkRpY3Rpb25hcnkgPSBjX3ZvaWRfcApDRkVycm9yID0gY192b2lkX3AKQ0ZUeXBlID0gY192b2lkX3AKQ0ZUeXBlSUQgPSBjX3Vsb25nCgpDRlR5cGVSZWYgPSBQT0lOVEVSKENGVHlwZSkKQ0ZBbGxvY2F0b3JSZWYgPSBjX3ZvaWRfcAoKT1NTdGF0dXMgPSBjX2ludDMyCgpDRkRhdGFSZWYgPSBQT0lOVEVSKENGRGF0YSkKQ0ZTdHJpbmdSZWYgPSBQT0lOVEVSKENGU3RyaW5nKQpDRkFycmF5UmVmID0gUE9JTlRFUihDRkFycmF5KQpDRk11dGFibGVBcnJheVJlZiA9IFBPSU5URVIoQ0ZNdXRhYmxlQXJyYXkpCkNGRGljdGlvbmFyeVJlZiA9IFBPSU5URVIoQ0ZEaWN0aW9uYXJ5KQpDRkFycmF5Q2FsbEJhY2tzID0gY192b2lkX3AKQ0ZEaWN0aW9uYXJ5S2V5Q2FsbEJhY2tzID0gY192b2lkX3AKQ0ZEaWN0aW9uYXJ5VmFsdWVDYWxsQmFja3MgPSBjX3ZvaWRfcAoKU2VjQ2VydGlmaWNhdGVSZWYgPSBQT0lOVEVSKGNfdm9pZF9wKQpTZWNFeHRlcm5hbEZvcm1hdCA9IGNfdWludDMyClNlY0V4dGVybmFsSXRlbVR5cGUgPSBjX3VpbnQzMgpTZWNJZGVudGl0eVJlZiA9IFBPSU5URVIoY192b2lkX3ApClNlY0l0ZW1JbXBvcnRFeHBvcnRGbGFncyA9IGNfdWludDMyClNlY0l0ZW1JbXBvcnRFeHBvcnRLZXlQYXJhbWV0ZXJzID0gY192b2lkX3AKU2VjS2V5Y2hhaW5SZWYgPSBQT0lOVEVSKGNfdm9pZF9wKQpTU0xQcm90b2NvbCA9IGNfdWludDMyClNTTENpcGhlclN1aXRlID0gY191aW50MzIKU1NMQ29udGV4dFJlZiA9IFBPSU5URVIoY192b2lkX3ApClNlY1RydXN0UmVmID0gUE9JTlRFUihjX3ZvaWRfcCkKU1NMQ29ubmVjdGlvblJlZiA9IGNfdWludDMyClNlY1RydXN0UmVzdWx0VHlwZSA9IGNfdWludDMyClNlY1RydXN0T3B0aW9uRmxhZ3MgPSBjX3VpbnQzMgpTU0xQcm90b2NvbFNpZGUgPSBjX3VpbnQzMgpTU0xDb25uZWN0aW9uVHlwZSA9IGNfdWludDMyClNTTFNlc3Npb25PcHRpb24gPSBjX3VpbnQzMgoKCnRyeToKICAgIFNlY3VyaXR5LlNlY0l0ZW1JbXBvcnQuYXJndHlwZXMgPSBbCiAgICAgICAgQ0ZEYXRhUmVmLAogICAgICAgIENGU3RyaW5nUmVmLAogICAgICAgIFBPSU5URVIoU2VjRXh0ZXJuYWxGb3JtYXQpLAogICAgICAgIFBPSU5URVIoU2VjRXh0ZXJuYWxJdGVtVHlwZSksCiAgICAgICAgU2VjSXRlbUltcG9ydEV4cG9ydEZsYWdzLAogICAgICAgIFBPSU5URVIoU2VjSXRlbUltcG9ydEV4cG9ydEtleVBhcmFtZXRlcnMpLAogICAgICAgIFNlY0tleWNoYWluUmVmLAogICAgICAgIFBPSU5URVIoQ0ZBcnJheVJlZiksCiAgICBdCiAgICBTZWN1cml0eS5TZWNJdGVtSW1wb3J0LnJlc3R5cGUgPSBPU1N0YXR1cwoKICAgIFNlY3VyaXR5LlNlY0NlcnRpZmljYXRlR2V0VHlwZUlELmFyZ3R5cGVzID0gW10KICAgIFNlY3VyaXR5LlNlY0NlcnRpZmljYXRlR2V0VHlwZUlELnJlc3R5cGUgPSBDRlR5cGVJRAoKICAgIFNlY3VyaXR5LlNlY0lkZW50aXR5R2V0VHlwZUlELmFyZ3R5cGVzID0gW10KICAgIFNlY3VyaXR5LlNlY0lkZW50aXR5R2V0VHlwZUlELnJlc3R5cGUgPSBDRlR5cGVJRAoKICAgIFNlY3VyaXR5LlNlY0tleUdldFR5cGVJRC5hcmd0eXBlcyA9IFtdCiAgICBTZWN1cml0eS5TZWNLZXlHZXRUeXBlSUQucmVzdHlwZSA9IENGVHlwZUlECgogICAgU2VjdXJpdHkuU2VjQ2VydGlmaWNhdGVDcmVhdGVXaXRoRGF0YS5hcmd0eXBlcyA9IFtDRkFsbG9jYXRvclJlZiwgQ0ZEYXRhUmVmXQogICAgU2VjdXJpdHkuU2VjQ2VydGlmaWNhdGVDcmVhdGVXaXRoRGF0YS5yZXN0eXBlID0gU2VjQ2VydGlmaWNhdGVSZWYKCiAgICBTZWN1cml0eS5TZWNDZXJ0aWZpY2F0ZUNvcHlEYXRhLmFyZ3R5cGVzID0gW1NlY0NlcnRpZmljYXRlUmVmXQogICAgU2VjdXJpdHkuU2VjQ2VydGlmaWNhdGVDb3B5RGF0YS5yZXN0eXBlID0gQ0ZEYXRhUmVmCgogICAgU2VjdXJpdHkuU2VjQ29weUVycm9yTWVzc2FnZVN0cmluZy5hcmd0eXBlcyA9IFtPU1N0YXR1cywgY192b2lkX3BdCiAgICBTZWN1cml0eS5TZWNDb3B5RXJyb3JNZXNzYWdlU3RyaW5nLnJlc3R5cGUgPSBDRlN0cmluZ1JlZgoKICAgIFNlY3VyaXR5LlNlY0lkZW50aXR5Q3JlYXRlV2l0aENlcnRpZmljYXRlLmFyZ3R5cGVzID0gWwogICAgICAgIENGVHlwZVJlZiwKICAgICAgICBTZWNDZXJ0aWZpY2F0ZVJlZiwKICAgICAgICBQT0lOVEVSKFNlY0lkZW50aXR5UmVmKSwKICAgIF0KICAgIFNlY3VyaXR5LlNlY0lkZW50aXR5Q3JlYXRlV2l0aENlcnRpZmljYXRlLnJlc3R5cGUgPSBPU1N0YXR1cwoKICAgIFNlY3VyaXR5LlNlY0tleWNoYWluQ3JlYXRlLmFyZ3R5cGVzID0gWwogICAgICAgIGNfY2hhcl9wLAogICAgICAgIGNfdWludDMyLAogICAgICAgIGNfdm9pZF9wLAogICAgICAgIEJvb2xlYW4sCiAgICAgICAgY192b2lkX3AsCiAgICAgICAgUE9JTlRFUihTZWNLZXljaGFpblJlZiksCiAgICBdCiAgICBTZWN1cml0eS5TZWNLZXljaGFpbkNyZWF0ZS5yZXN0eXBlID0gT1NTdGF0dXMKCiAgICBTZWN1cml0eS5TZWNLZXljaGFpbkRlbGV0ZS5hcmd0eXBlcyA9IFtTZWNLZXljaGFpblJlZl0KICAgIFNlY3VyaXR5LlNlY0tleWNoYWluRGVsZXRlLnJlc3R5cGUgPSBPU1N0YXR1cwoKICAgIFNlY3VyaXR5LlNlY1BLQ1MxMkltcG9ydC5hcmd0eXBlcyA9IFsKICAgICAgICBDRkRhdGFSZWYsCiAgICAgICAgQ0ZEaWN0aW9uYXJ5UmVmLAogICAgICAgIFBPSU5URVIoQ0ZBcnJheVJlZiksCiAgICBdCiAgICBTZWN1cml0eS5TZWNQS0NTMTJJbXBvcnQucmVzdHlwZSA9IE9TU3RhdHVzCgogICAgU1NMUmVhZEZ1bmMgPSBDRlVOQ1RZUEUoT1NTdGF0dXMsIFNTTENvbm5lY3Rpb25SZWYsIGNfdm9pZF9wLCBQT0lOVEVSKGNfc2l6ZV90KSkKICAgIFNTTFdyaXRlRnVuYyA9IENGVU5DVFlQRSgKICAgICAgICBPU1N0YXR1cywgU1NMQ29ubmVjdGlvblJlZiwgUE9JTlRFUihjX2J5dGUpLCBQT0lOVEVSKGNfc2l6ZV90KQogICAgKQoKICAgIFNlY3VyaXR5LlNTTFNldElPRnVuY3MuYXJndHlwZXMgPSBbU1NMQ29udGV4dFJlZiwgU1NMUmVhZEZ1bmMsIFNTTFdyaXRlRnVuY10KICAgIFNlY3VyaXR5LlNTTFNldElPRnVuY3MucmVzdHlwZSA9IE9TU3RhdHVzCgogICAgU2VjdXJpdHkuU1NMU2V0UGVlcklELmFyZ3R5cGVzID0gW1NTTENvbnRleHRSZWYsIGNfY2hhcl9wLCBjX3NpemVfdF0KICAgIFNlY3VyaXR5LlNTTFNldFBlZXJJRC5yZXN0eXBlID0gT1NTdGF0dXMKCiAgICBTZWN1cml0eS5TU0xTZXRDZXJ0aWZpY2F0ZS5hcmd0eXBlcyA9IFtTU0xDb250ZXh0UmVmLCBDRkFycmF5UmVmXQogICAgU2VjdXJpdHkuU1NMU2V0Q2VydGlmaWNhdGUucmVzdHlwZSA9IE9TU3RhdHVzCgogICAgU2VjdXJpdHkuU1NMU2V0Q2VydGlmaWNhdGVBdXRob3JpdGllcy5hcmd0eXBlcyA9IFtTU0xDb250ZXh0UmVmLCBDRlR5cGVSZWYsIEJvb2xlYW5dCiAgICBTZWN1cml0eS5TU0xTZXRDZXJ0aWZpY2F0ZUF1dGhvcml0aWVzLnJlc3R5cGUgPSBPU1N0YXR1cwoKICAgIFNlY3VyaXR5LlNTTFNldENvbm5lY3Rpb24uYXJndHlwZXMgPSBbU1NMQ29udGV4dFJlZiwgU1NMQ29ubmVjdGlvblJlZl0KICAgIFNlY3VyaXR5LlNTTFNldENvbm5lY3Rpb24ucmVzdHlwZSA9IE9TU3RhdHVzCgogICAgU2VjdXJpdHkuU1NMU2V0UGVlckRvbWFpbk5hbWUuYXJndHlwZXMgPSBbU1NMQ29udGV4dFJlZiwgY19jaGFyX3AsIGNfc2l6ZV90XQogICAgU2VjdXJpdHkuU1NMU2V0UGVlckRvbWFpbk5hbWUucmVzdHlwZSA9IE9TU3RhdHVzCgogICAgU2VjdXJpdHkuU1NMSGFuZHNoYWtlLmFyZ3R5cGVzID0gW1NTTENvbnRleHRSZWZdCiAgICBTZWN1cml0eS5TU0xIYW5kc2hha2UucmVzdHlwZSA9IE9TU3RhdHVzCgogICAgU2VjdXJpdHkuU1NMUmVhZC5hcmd0eXBlcyA9IFtTU0xDb250ZXh0UmVmLCBjX2NoYXJfcCwgY19zaXplX3QsIFBPSU5URVIoY19zaXplX3QpXQogICAgU2VjdXJpdHkuU1NMUmVhZC5yZXN0eXBlID0gT1NTdGF0dXMKCiAgICBTZWN1cml0eS5TU0xXcml0ZS5hcmd0eXBlcyA9IFtTU0xDb250ZXh0UmVmLCBjX2NoYXJfcCwgY19zaXplX3QsIFBPSU5URVIoY19zaXplX3QpXQogICAgU2VjdXJpdHkuU1NMV3JpdGUucmVzdHlwZSA9IE9TU3RhdHVzCgogICAgU2VjdXJpdHkuU1NMQ2xvc2UuYXJndHlwZXMgPSBbU1NMQ29udGV4dFJlZl0KICAgIFNlY3VyaXR5LlNTTENsb3NlLnJlc3R5cGUgPSBPU1N0YXR1cwoKICAgIFNlY3VyaXR5LlNTTEdldE51bWJlclN1cHBvcnRlZENpcGhlcnMuYXJndHlwZXMgPSBbU1NMQ29udGV4dFJlZiwgUE9JTlRFUihjX3NpemVfdCldCiAgICBTZWN1cml0eS5TU0xHZXROdW1iZXJTdXBwb3J0ZWRDaXBoZXJzLnJlc3R5cGUgPSBPU1N0YXR1cwoKICAgIFNlY3VyaXR5LlNTTEdldFN1cHBvcnRlZENpcGhlcnMuYXJndHlwZXMgPSBbCiAgICAgICAgU1NMQ29udGV4dFJlZiwKICAgICAgICBQT0lOVEVSKFNTTENpcGhlclN1aXRlKSwKICAgICAgICBQT0lOVEVSKGNfc2l6ZV90KSwKICAgIF0KICAgIFNlY3VyaXR5LlNTTEdldFN1cHBvcnRlZENpcGhlcnMucmVzdHlwZSA9IE9TU3RhdHVzCgogICAgU2VjdXJpdHkuU1NMU2V0RW5hYmxlZENpcGhlcnMuYXJndHlwZXMgPSBbCiAgICAgICAgU1NMQ29udGV4dFJlZiwKICAgICAgICBQT0lOVEVSKFNTTENpcGhlclN1aXRlKSwKICAgICAgICBjX3NpemVfdCwKICAgIF0KICAgIFNlY3VyaXR5LlNTTFNldEVuYWJsZWRDaXBoZXJzLnJlc3R5cGUgPSBPU1N0YXR1cwoKICAgIFNlY3VyaXR5LlNTTEdldE51bWJlckVuYWJsZWRDaXBoZXJzLmFyZ3R5cGUgPSBbU1NMQ29udGV4dFJlZiwgUE9JTlRFUihjX3NpemVfdCldCiAgICBTZWN1cml0eS5TU0xHZXROdW1iZXJFbmFibGVkQ2lwaGVycy5yZXN0eXBlID0gT1NTdGF0dXMKCiAgICBTZWN1cml0eS5TU0xHZXRFbmFibGVkQ2lwaGVycy5hcmd0eXBlcyA9IFsKICAgICAgICBTU0xDb250ZXh0UmVmLAogICAgICAgIFBPSU5URVIoU1NMQ2lwaGVyU3VpdGUpLAogICAgICAgIFBPSU5URVIoY19zaXplX3QpLAogICAgXQogICAgU2VjdXJpdHkuU1NMR2V0RW5hYmxlZENpcGhlcnMucmVzdHlwZSA9IE9TU3RhdHVzCgogICAgU2VjdXJpdHkuU1NMR2V0TmVnb3RpYXRlZENpcGhlci5hcmd0eXBlcyA9IFtTU0xDb250ZXh0UmVmLCBQT0lOVEVSKFNTTENpcGhlclN1aXRlKV0KICAgIFNlY3VyaXR5LlNTTEdldE5lZ290aWF0ZWRDaXBoZXIucmVzdHlwZSA9IE9TU3RhdHVzCgogICAgU2VjdXJpdHkuU1NMR2V0TmVnb3RpYXRlZFByb3RvY29sVmVyc2lvbi5hcmd0eXBlcyA9IFsKICAgICAgICBTU0xDb250ZXh0UmVmLAogICAgICAgIFBPSU5URVIoU1NMUHJvdG9jb2wpLAogICAgXQogICAgU2VjdXJpdHkuU1NMR2V0TmVnb3RpYXRlZFByb3RvY29sVmVyc2lvbi5yZXN0eXBlID0gT1NTdGF0dXMKCiAgICBTZWN1cml0eS5TU0xDb3B5UGVlclRydXN0LmFyZ3R5cGVzID0gW1NTTENvbnRleHRSZWYsIFBPSU5URVIoU2VjVHJ1c3RSZWYpXQogICAgU2VjdXJpdHkuU1NMQ29weVBlZXJUcnVzdC5yZXN0eXBlID0gT1NTdGF0dXMKCiAgICBTZWN1cml0eS5TZWNUcnVzdFNldEFuY2hvckNlcnRpZmljYXRlcy5hcmd0eXBlcyA9IFtTZWNUcnVzdFJlZiwgQ0ZBcnJheVJlZl0KICAgIFNlY3VyaXR5LlNlY1RydXN0U2V0QW5jaG9yQ2VydGlmaWNhdGVzLnJlc3R5cGUgPSBPU1N0YXR1cwoKICAgIFNlY3VyaXR5LlNlY1RydXN0U2V0QW5jaG9yQ2VydGlmaWNhdGVzT25seS5hcmdzdHlwZXMgPSBbU2VjVHJ1c3RSZWYsIEJvb2xlYW5dCiAgICBTZWN1cml0eS5TZWNUcnVzdFNldEFuY2hvckNlcnRpZmljYXRlc09ubHkucmVzdHlwZSA9IE9TU3RhdHVzCgogICAgU2VjdXJpdHkuU2VjVHJ1c3RFdmFsdWF0ZS5hcmd0eXBlcyA9IFtTZWNUcnVzdFJlZiwgUE9JTlRFUihTZWNUcnVzdFJlc3VsdFR5cGUpXQogICAgU2VjdXJpdHkuU2VjVHJ1c3RFdmFsdWF0ZS5yZXN0eXBlID0gT1NTdGF0dXMKCiAgICBTZWN1cml0eS5TZWNUcnVzdEdldENlcnRpZmljYXRlQ291bnQuYXJndHlwZXMgPSBbU2VjVHJ1c3RSZWZdCiAgICBTZWN1cml0eS5TZWNUcnVzdEdldENlcnRpZmljYXRlQ291bnQucmVzdHlwZSA9IENGSW5kZXgKCiAgICBTZWN1cml0eS5TZWNUcnVzdEdldENlcnRpZmljYXRlQXRJbmRleC5hcmd0eXBlcyA9IFtTZWNUcnVzdFJlZiwgQ0ZJbmRleF0KICAgIFNlY3VyaXR5LlNlY1RydXN0R2V0Q2VydGlmaWNhdGVBdEluZGV4LnJlc3R5cGUgPSBTZWNDZXJ0aWZpY2F0ZVJlZgoKICAgIFNlY3VyaXR5LlNTTENyZWF0ZUNvbnRleHQuYXJndHlwZXMgPSBbCiAgICAgICAgQ0ZBbGxvY2F0b3JSZWYsCiAgICAgICAgU1NMUHJvdG9jb2xTaWRlLAogICAgICAgIFNTTENvbm5lY3Rpb25UeXBlLAogICAgXQogICAgU2VjdXJpdHkuU1NMQ3JlYXRlQ29udGV4dC5yZXN0eXBlID0gU1NMQ29udGV4dFJlZgoKICAgIFNlY3VyaXR5LlNTTFNldFNlc3Npb25PcHRpb24uYXJndHlwZXMgPSBbU1NMQ29udGV4dFJlZiwgU1NMU2Vzc2lvbk9wdGlvbiwgQm9vbGVhbl0KICAgIFNlY3VyaXR5LlNTTFNldFNlc3Npb25PcHRpb24ucmVzdHlwZSA9IE9TU3RhdHVzCgogICAgU2VjdXJpdHkuU1NMU2V0UHJvdG9jb2xWZXJzaW9uTWluLmFyZ3R5cGVzID0gW1NTTENvbnRleHRSZWYsIFNTTFByb3RvY29sXQogICAgU2VjdXJpdHkuU1NMU2V0UHJvdG9jb2xWZXJzaW9uTWluLnJlc3R5cGUgPSBPU1N0YXR1cwoKICAgIFNlY3VyaXR5LlNTTFNldFByb3RvY29sVmVyc2lvbk1heC5hcmd0eXBlcyA9IFtTU0xDb250ZXh0UmVmLCBTU0xQcm90b2NvbF0KICAgIFNlY3VyaXR5LlNTTFNldFByb3RvY29sVmVyc2lvbk1heC5yZXN0eXBlID0gT1NTdGF0dXMKCiAgICB0cnk6CiAgICAgICAgU2VjdXJpdHkuU1NMU2V0QUxQTlByb3RvY29scy5hcmd0eXBlcyA9IFtTU0xDb250ZXh0UmVmLCBDRkFycmF5UmVmXQogICAgICAgIFNlY3VyaXR5LlNTTFNldEFMUE5Qcm90b2NvbHMucmVzdHlwZSA9IE9TU3RhdHVzCiAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgIyBTdXBwb3J0ZWQgb25seSBpbiAxMC4xMisKICAgICAgICBwYXNzCgogICAgU2VjdXJpdHkuU2VjQ29weUVycm9yTWVzc2FnZVN0cmluZy5hcmd0eXBlcyA9IFtPU1N0YXR1cywgY192b2lkX3BdCiAgICBTZWN1cml0eS5TZWNDb3B5RXJyb3JNZXNzYWdlU3RyaW5nLnJlc3R5cGUgPSBDRlN0cmluZ1JlZgoKICAgIFNlY3VyaXR5LlNTTFJlYWRGdW5jID0gU1NMUmVhZEZ1bmMKICAgIFNlY3VyaXR5LlNTTFdyaXRlRnVuYyA9IFNTTFdyaXRlRnVuYwogICAgU2VjdXJpdHkuU1NMQ29udGV4dFJlZiA9IFNTTENvbnRleHRSZWYKICAgIFNlY3VyaXR5LlNTTFByb3RvY29sID0gU1NMUHJvdG9jb2wKICAgIFNlY3VyaXR5LlNTTENpcGhlclN1aXRlID0gU1NMQ2lwaGVyU3VpdGUKICAgIFNlY3VyaXR5LlNlY0lkZW50aXR5UmVmID0gU2VjSWRlbnRpdHlSZWYKICAgIFNlY3VyaXR5LlNlY0tleWNoYWluUmVmID0gU2VjS2V5Y2hhaW5SZWYKICAgIFNlY3VyaXR5LlNlY1RydXN0UmVmID0gU2VjVHJ1c3RSZWYKICAgIFNlY3VyaXR5LlNlY1RydXN0UmVzdWx0VHlwZSA9IFNlY1RydXN0UmVzdWx0VHlwZQogICAgU2VjdXJpdHkuU2VjRXh0ZXJuYWxGb3JtYXQgPSBTZWNFeHRlcm5hbEZvcm1hdAogICAgU2VjdXJpdHkuT1NTdGF0dXMgPSBPU1N0YXR1cwoKICAgIFNlY3VyaXR5LmtTZWNJbXBvcnRFeHBvcnRQYXNzcGhyYXNlID0gQ0ZTdHJpbmdSZWYuaW5fZGxsKAogICAgICAgIFNlY3VyaXR5LCBcImtTZWNJbXBvcnRFeHBvcnRQYXNzcGhyYXNlXCIKICAgICkKICAgIFNlY3VyaXR5LmtTZWNJbXBvcnRJdGVtSWRlbnRpdHkgPSBDRlN0cmluZ1JlZi5pbl9kbGwoCiAgICAgICAgU2VjdXJpdHksIFwia1NlY0ltcG9ydEl0ZW1JZGVudGl0eVwiCiAgICApCgogICAgIyBDb3JlRm91bmRhdGlvbiB0aW1lIQogICAgQ29yZUZvdW5kYXRpb24uQ0ZSZXRhaW4uYXJndHlwZXMgPSBbQ0ZUeXBlUmVmXQogICAgQ29yZUZvdW5kYXRpb24uQ0ZSZXRhaW4ucmVzdHlwZSA9IENGVHlwZVJlZgoKICAgIENvcmVGb3VuZGF0aW9uLkNGUmVsZWFzZS5hcmd0eXBlcyA9IFtDRlR5cGVSZWZdCiAgICBDb3JlRm91bmRhdGlvbi5DRlJlbGVhc2UucmVzdHlwZSA9IE5vbmUKCiAgICBDb3JlRm91bmRhdGlvbi5DRkdldFR5cGVJRC5hcmd0eXBlcyA9IFtDRlR5cGVSZWZdCiAgICBDb3JlRm91bmRhdGlvbi5DRkdldFR5cGVJRC5yZXN0eXBlID0gQ0ZUeXBlSUQKCiAgICBDb3JlRm91bmRhdGlvbi5DRlN0cmluZ0NyZWF0ZVdpdGhDU3RyaW5nLmFyZ3R5cGVzID0gWwogICAgICAgIENGQWxsb2NhdG9yUmVmLAogICAgICAgIGNfY2hhcl9wLAogICAgICAgIENGU3RyaW5nRW5jb2RpbmcsCiAgICBdCiAgICBDb3JlRm91bmRhdGlvbi5DRlN0cmluZ0NyZWF0ZVdpdGhDU3RyaW5nLnJlc3R5cGUgPSBDRlN0cmluZ1JlZgoKICAgIENvcmVGb3VuZGF0aW9uLkNGU3RyaW5nR2V0Q1N0cmluZ1B0ci5hcmd0eXBlcyA9IFtDRlN0cmluZ1JlZiwgQ0ZTdHJpbmdFbmNvZGluZ10KICAgIENvcmVGb3VuZGF0aW9uLkNGU3RyaW5nR2V0Q1N0cmluZ1B0ci5yZXN0eXBlID0gY19jaGFyX3AKCiAgICBDb3JlRm91bmRhdGlvbi5DRlN0cmluZ0dldENTdHJpbmcuYXJndHlwZXMgPSBbCiAgICAgICAgQ0ZTdHJpbmdSZWYsCiAgICAgICAgY19jaGFyX3AsCiAgICAgICAgQ0ZJbmRleCwKICAgICAgICBDRlN0cmluZ0VuY29kaW5nLAogICAgXQogICAgQ29yZUZvdW5kYXRpb24uQ0ZTdHJpbmdHZXRDU3RyaW5nLnJlc3R5cGUgPSBjX2Jvb2wKCiAgICBDb3JlRm91bmRhdGlvbi5DRkRhdGFDcmVhdGUuYXJndHlwZXMgPSBbQ0ZBbGxvY2F0b3JSZWYsIGNfY2hhcl9wLCBDRkluZGV4XQogICAgQ29yZUZvdW5kYXRpb24uQ0ZEYXRhQ3JlYXRlLnJlc3R5cGUgPSBDRkRhdGFSZWYKCiAgICBDb3JlRm91bmRhdGlvbi5DRkRhdGFHZXRMZW5ndGguYXJndHlwZXMgPSBbQ0ZEYXRhUmVmXQogICAgQ29yZUZvdW5kYXRpb24uQ0ZEYXRhR2V0TGVuZ3RoLnJlc3R5cGUgPSBDRkluZGV4CgogICAgQ29yZUZvdW5kYXRpb24uQ0ZEYXRhR2V0Qnl0ZVB0ci5hcmd0eXBlcyA9IFtDRkRhdGFSZWZdCiAgICBDb3JlRm91bmRhdGlvbi5DRkRhdGFHZXRCeXRlUHRyLnJlc3R5cGUgPSBjX3ZvaWRfcAoKICAgIENvcmVGb3VuZGF0aW9uLkNGRGljdGlvbmFyeUNyZWF0ZS5hcmd0eXBlcyA9IFsKICAgICAgICBDRkFsbG9jYXRvclJlZiwKICAgICAgICBQT0lOVEVSKENGVHlwZVJlZiksCiAgICAgICAgUE9JTlRFUihDRlR5cGVSZWYpLAogICAgICAgIENGSW5kZXgsCiAgICAgICAgQ0ZEaWN0aW9uYXJ5S2V5Q2FsbEJhY2tzLAogICAgICAgIENGRGljdGlvbmFyeVZhbHVlQ2FsbEJhY2tzLAogICAgXQogICAgQ29yZUZvdW5kYXRpb24uQ0ZEaWN0aW9uYXJ5Q3JlYXRlLnJlc3R5cGUgPSBDRkRpY3Rpb25hcnlSZWYKCiAgICBDb3JlRm91bmRhdGlvbi5DRkRpY3Rpb25hcnlHZXRWYWx1ZS5hcmd0eXBlcyA9IFtDRkRpY3Rpb25hcnlSZWYsIENGVHlwZVJlZl0KICAgIENvcmVGb3VuZGF0aW9uLkNGRGljdGlvbmFyeUdldFZhbHVlLnJlc3R5cGUgPSBDRlR5cGVSZWYKCiAgICBDb3JlRm91bmRhdGlvbi5DRkFycmF5Q3JlYXRlLmFyZ3R5cGVzID0gWwogICAgICAgIENGQWxsb2NhdG9yUmVmLAogICAgICAgIFBPSU5URVIoQ0ZUeXBlUmVmKSwKICAgICAgICBDRkluZGV4LAogICAgICAgIENGQXJyYXlDYWxsQmFja3MsCiAgICBdCiAgICBDb3JlRm91bmRhdGlvbi5DRkFycmF5Q3JlYXRlLnJlc3R5cGUgPSBDRkFycmF5UmVmCgogICAgQ29yZUZvdW5kYXRpb24uQ0ZBcnJheUNyZWF0ZU11dGFibGUuYXJndHlwZXMgPSBbCiAgICAgICAgQ0ZBbGxvY2F0b3JSZWYsCiAgICAgICAgQ0ZJbmRleCwKICAgICAgICBDRkFycmF5Q2FsbEJhY2tzLAogICAgXQogICAgQ29yZUZvdW5kYXRpb24uQ0ZBcnJheUNyZWF0ZU11dGFibGUucmVzdHlwZSA9IENGTXV0YWJsZUFycmF5UmVmCgogICAgQ29yZUZvdW5kYXRpb24uQ0ZBcnJheUFwcGVuZFZhbHVlLmFyZ3R5cGVzID0gW0NGTXV0YWJsZUFycmF5UmVmLCBjX3ZvaWRfcF0KICAgIENvcmVGb3VuZGF0aW9uLkNGQXJyYXlBcHBlbmRWYWx1ZS5yZXN0eXBlID0gTm9uZQoKICAgIENvcmVGb3VuZGF0aW9uLkNGQXJyYXlHZXRDb3VudC5hcmd0eXBlcyA9IFtDRkFycmF5UmVmXQogICAgQ29yZUZvdW5kYXRpb24uQ0ZBcnJheUdldENvdW50LnJlc3R5cGUgPSBDRkluZGV4CgogICAgQ29yZUZvdW5kYXRpb24uQ0ZBcnJheUdldFZhbHVlQXRJbmRleC5hcmd0eXBlcyA9IFtDRkFycmF5UmVmLCBDRkluZGV4XQogICAgQ29yZUZvdW5kYXRpb24uQ0ZBcnJheUdldFZhbHVlQXRJbmRleC5yZXN0eXBlID0gY192b2lkX3AKCiAgICBDb3JlRm91bmRhdGlvbi5rQ0ZBbGxvY2F0b3JEZWZhdWx0ID0gQ0ZBbGxvY2F0b3JSZWYuaW5fZGxsKAogICAgICAgIENvcmVGb3VuZGF0aW9uLCBcImtDRkFsbG9jYXRvckRlZmF1bHRcIgogICAgKQogICAgQ29yZUZvdW5kYXRpb24ua0NGVHlwZUFycmF5Q2FsbEJhY2tzID0gY192b2lkX3AuaW5fZGxsKAogICAgICAgIENvcmVGb3VuZGF0aW9uLCBcImtDRlR5cGVBcnJheUNhbGxCYWNrc1wiCiAgICApCiAgICBDb3JlRm91bmRhdGlvbi5rQ0ZUeXBlRGljdGlvbmFyeUtleUNhbGxCYWNrcyA9IGNfdm9pZF9wLmluX2RsbCgKICAgICAgICBDb3JlRm91bmRhdGlvbiwgXCJrQ0ZUeXBlRGljdGlvbmFyeUtleUNhbGxCYWNrc1wiCiAgICApCiAgICBDb3JlRm91bmRhdGlvbi5rQ0ZUeXBlRGljdGlvbmFyeVZhbHVlQ2FsbEJhY2tzID0gY192b2lkX3AuaW5fZGxsKAogICAgICAgIENvcmVGb3VuZGF0aW9uLCBcImtDRlR5cGVEaWN0aW9uYXJ5VmFsdWVDYWxsQmFja3NcIgogICAgKQoKICAgIENvcmVGb3VuZGF0aW9uLkNGVHlwZVJlZiA9IENGVHlwZVJlZgogICAgQ29yZUZvdW5kYXRpb24uQ0ZBcnJheVJlZiA9IENGQXJyYXlSZWYKICAgIENvcmVGb3VuZGF0aW9uLkNGU3RyaW5nUmVmID0gQ0ZTdHJpbmdSZWYKICAgIENvcmVGb3VuZGF0aW9uLkNGRGljdGlvbmFyeVJlZiA9IENGRGljdGlvbmFyeVJlZgoKZXhjZXB0IChBdHRyaWJ1dGVFcnJvcik6CiAgICByYWlzZSBJbXBvcnRFcnJvcihcIkVycm9yIGluaXRpYWxpemluZyBjdHlwZXNcIikKCgpjbGFzcyBDRkNvbnN0KG9iamVjdCk6CiAgICBcIlwiXCIKICAgIEEgY2xhc3Mgb2JqZWN0IHRoYXQgYWN0cyBhcyBlc3NlbnRpYWxseSBhIG5hbWVzcGFjZSBmb3IgQ29yZUZvdW5kYXRpb24KICAgIGNvbnN0YW50cy4KICAgIFwiXCJcIgoKICAgIGtDRlN0cmluZ0VuY29kaW5nVVRGOCA9IENGU3RyaW5nRW5jb2RpbmcoMHgwODAwMDEwMCkKCgpjbGFzcyBTZWN1cml0eUNvbnN0KG9iamVjdCk6CiAgICBcIlwiXCIKICAgIEEgY2xhc3Mgb2JqZWN0IHRoYXQgYWN0cyBhcyBlc3NlbnRpYWxseSBhIG5hbWVzcGFjZSBmb3IgU2VjdXJpdHkgY29uc3RhbnRzLgogICAgXCJcIlwiCgogICAga1NTTFNlc3Npb25PcHRpb25CcmVha09uU2VydmVyQXV0aCA9IDAKCiAgICBrU1NMUHJvdG9jb2wyID0gMQogICAga1NTTFByb3RvY29sMyA9IDIKICAgIGtUTFNQcm90b2NvbDEgPSA0CiAgICBrVExTUHJvdG9jb2wxMSA9IDcKICAgIGtUTFNQcm90b2NvbDEyID0gOAogICAgIyBTZWN1cmVUcmFuc3BvcnQgZG9lcyBub3Qgc3VwcG9ydCBUTFMgMS4zIGV2ZW4gaWYgdGhlcmUncyBhIGNvbnN0YW50IGZvciBpdAogICAga1RMU1Byb3RvY29sMTMgPSAxMAogICAga1RMU1Byb3RvY29sTWF4U3VwcG9ydGVkID0gOTk5CgogICAga1NTTENsaWVudFNpZGUgPSAxCiAgICBrU1NMU3RyZWFtVHlwZSA9IDAKCiAgICBrU2VjRm9ybWF0UEVNU2VxdWVuY2UgPSAxMAoKICAgIGtTZWNUcnVzdFJlc3VsdEludmFsaWQgPSAwCiAgICBrU2VjVHJ1c3RSZXN1bHRQcm9jZWVkID0gMQogICAgIyBUaGlzIGdhcCBpcyBwcmVzZW50IG9uIHB1cnBvc2U6IHRoaXMgd2FzIGtTZWNUcnVzdFJlc3VsdENvbmZpcm0sIHdoaWNoCiAgICAjIGlzIGRlcHJlY2F0ZWQuCiAgICBrU2VjVHJ1c3RSZXN1bHREZW55ID0gMwogICAga1NlY1RydXN0UmVzdWx0VW5zcGVjaWZpZWQgPSA0CiAgICBrU2VjVHJ1c3RSZXN1bHRSZWNvdmVyYWJsZVRydXN0RmFpbHVyZSA9IDUKICAgIGtTZWNUcnVzdFJlc3VsdEZhdGFsVHJ1c3RGYWlsdXJlID0gNgogICAga1NlY1RydXN0UmVzdWx0T3RoZXJFcnJvciA9IDcKCiAgICBlcnJTU0xQcm90b2NvbCA9IC05ODAwCiAgICBlcnJTU0xXb3VsZEJsb2NrID0gLTk4MDMKICAgIGVyclNTTENsb3NlZEdyYWNlZnVsID0gLTk4MDUKICAgIGVyclNTTENsb3NlZE5vTm90aWZ5ID0gLTk4MTYKICAgIGVyclNTTENsb3NlZEFib3J0ID0gLTk4MDYKCiAgICBlcnJTU0xYQ2VydENoYWluSW52YWxpZCA9IC05ODA3CiAgICBlcnJTU0xDcnlwdG8gPSAtOTgwOQogICAgZXJyU1NMSW50ZXJuYWwgPSAtOTgxMAogICAgZXJyU1NMQ2VydEV4cGlyZWQgPSAtOTgxNAogICAgZXJyU1NMQ2VydE5vdFlldFZhbGlkID0gLTk4MTUKICAgIGVyclNTTFVua25vd25Sb290Q2VydCA9IC05ODEyCiAgICBlcnJTU0xOb1Jvb3RDZXJ0ID0gLTk4MTMKICAgIGVyclNTTEhvc3ROYW1lTWlzbWF0Y2ggPSAtOTg0MwogICAgZXJyU1NMUGVlckhhbmRzaGFrZUZhaWwgPSAtOTgyNAogICAgZXJyU1NMUGVlclVzZXJDYW5jZWxsZWQgPSAtOTgzOQogICAgZXJyU1NMV2Vha1BlZXJFcGhlbWVyYWxESEtleSA9IC05ODUwCiAgICBlcnJTU0xTZXJ2ZXJBdXRoQ29tcGxldGVkID0gLTk4NDEKICAgIGVyclNTTFJlY29yZE92ZXJmbG93ID0gLTk4NDcKCiAgICBlcnJTZWNWZXJpZnlGYWlsZWQgPSAtNjc4MDgKICAgIGVyclNlY05vVHJ1c3RTZXR0aW5ncyA9IC0yNTI2MwogICAgZXJyU2VjSXRlbU5vdEZvdW5kID0gLTI1MzAwCiAgICBlcnJTZWNJbnZhbGlkVHJ1c3RTZXR0aW5ncyA9IC0yNTI2MgoKICAgICMgQ2lwaGVyIHN1aXRlcy4gV2Ugb25seSBwaWNrIHRoZSBvbmVzIG91ciBkZWZhdWx0IGNpcGhlciBzdHJpbmcgYWxsb3dzLgogICAgIyBTb3VyY2U6IGh0dHBzOi8vZGV2ZWxvcGVyLmFwcGxlLmNvbS9kb2N1bWVudGF0aW9uL3NlY3VyaXR5LzE1NTA5ODEtc3NsX2NpcGhlcl9zdWl0ZV92YWx1ZXMKICAgIFRMU19FQ0RIRV9FQ0RTQV9XSVRIX0FFU18yNTZfR0NNX1NIQTM4NCA9IDB4QzAyQwogICAgVExTX0VDREhFX1JTQV9XSVRIX0FFU18yNTZfR0NNX1NIQTM4NCA9IDB4QzAzMAogICAgVExTX0VDREhFX0VDRFNBX1dJVEhfQUVTXzEyOF9HQ01fU0hBMjU2ID0gMHhDMDJCCiAgICBUTFNfRUNESEVfUlNBX1dJVEhfQUVTXzEyOF9HQ01fU0hBMjU2ID0gMHhDMDJGCiAgICBUTFNfRUNESEVfRUNEU0FfV0lUSF9DSEFDSEEyMF9QT0xZMTMwNV9TSEEyNTYgPSAweENDQTkKICAgIFRMU19FQ0RIRV9SU0FfV0lUSF9DSEFDSEEyMF9QT0xZMTMwNV9TSEEyNTYgPSAweENDQTgKICAgIFRMU19ESEVfUlNBX1dJVEhfQUVTXzI1Nl9HQ01fU0hBMzg0ID0gMHgwMDlGCiAgICBUTFNfREhFX1JTQV9XSVRIX0FFU18xMjhfR0NNX1NIQTI1NiA9IDB4MDA5RQogICAgVExTX0VDREhFX0VDRFNBX1dJVEhfQUVTXzI1Nl9DQkNfU0hBMzg0ID0gMHhDMDI0CiAgICBUTFNfRUNESEVfUlNBX1dJVEhfQUVTXzI1Nl9DQkNfU0hBMzg0ID0gMHhDMDI4CiAgICBUTFNfRUNESEVfRUNEU0FfV0lUSF9BRVNfMjU2X0NCQ19TSEEgPSAweEMwMEEKICAgIFRMU19FQ0RIRV9SU0FfV0lUSF9BRVNfMjU2X0NCQ19TSEEgPSAweEMwMTQKICAgIFRMU19ESEVfUlNBX1dJVEhfQUVTXzI1Nl9DQkNfU0hBMjU2ID0gMHgwMDZCCiAgICBUTFNfREhFX1JTQV9XSVRIX0FFU18yNTZfQ0JDX1NIQSA9IDB4MDAzOQogICAgVExTX0VDREhFX0VDRFNBX1dJVEhfQUVTXzEyOF9DQkNfU0hBMjU2ID0gMHhDMDIzCiAgICBUTFNfRUNESEVfUlNBX1dJVEhfQUVTXzEyOF9DQkNfU0hBMjU2ID0gMHhDMDI3CiAgICBUTFNfRUNESEVfRUNEU0FfV0lUSF9BRVNfMTI4X0NCQ19TSEEgPSAweEMwMDkKICAgIFRMU19FQ0RIRV9SU0FfV0lUSF9BRVNfMTI4X0NCQ19TSEEgPSAweEMwMTMKICAgIFRMU19ESEVfUlNBX1dJVEhfQUVTXzEyOF9DQkNfU0hBMjU2ID0gMHgwMDY3CiAgICBUTFNfREhFX1JTQV9XSVRIX0FFU18xMjhfQ0JDX1NIQSA9IDB4MDAzMwogICAgVExTX1JTQV9XSVRIX0FFU18yNTZfR0NNX1NIQTM4NCA9IDB4MDA5RAogICAgVExTX1JTQV9XSVRIX0FFU18xMjhfR0NNX1NIQTI1NiA9IDB4MDA5QwogICAgVExTX1JTQV9XSVRIX0FFU18yNTZfQ0JDX1NIQTI1NiA9IDB4MDAzRAogICAgVExTX1JTQV9XSVRIX0FFU18xMjhfQ0JDX1NIQTI1NiA9IDB4MDAzQwogICAgVExTX1JTQV9XSVRIX0FFU18yNTZfQ0JDX1NIQSA9IDB4MDAzNQogICAgVExTX1JTQV9XSVRIX0FFU18xMjhfQ0JDX1NIQSA9IDB4MDAyRgogICAgVExTX0FFU18xMjhfR0NNX1NIQTI1NiA9IDB4MTMwMQogICAgVExTX0FFU18yNTZfR0NNX1NIQTM4NCA9IDB4MTMwMgogICAgVExTX0FFU18xMjhfQ0NNXzhfU0hBMjU2ID0gMHgxMzA1CiAgICBUTFNfQUVTXzEyOF9DQ01fU0hBMjU2ID0gMHgxMzA0CgoiIiIKbW9kdWxlX2RpY3RbInVybGxpYjMiK29zLnNlcCsiY29udHJpYiIrb3Muc2VwKyJfc2VjdXJldHJhbnNwb3J0Iitvcy5zZXArIl9faW5pdF9fLnB5Il09IiIiCgoiIiIKbW9kdWxlX2RpY3RbInVybGxpYjMiK29zLnNlcCsiY29udHJpYiIrb3Muc2VwKyJfc2VjdXJldHJhbnNwb3J0Iitvcy5zZXArImxvd19sZXZlbC5weSJdPSIiIgpcIlwiXCIKTG93LWxldmVsIGhlbHBlcnMgZm9yIHRoZSBTZWN1cmVUcmFuc3BvcnQgYmluZGluZ3MuCgpUaGVzZSBhcmUgUHl0aG9uIGZ1bmN0aW9ucyB0aGF0IGFyZSBub3QgZGlyZWN0bHkgcmVsYXRlZCB0byB0aGUgaGlnaC1sZXZlbCBBUElzCmJ1dCBhcmUgbmVjZXNzYXJ5IHRvIGdldCB0aGVtIHRvIHdvcmsuIFRoZXkgaW5jbHVkZSBhIHdob2xlIGJ1bmNoIG9mIGxvdy1sZXZlbApDb3JlRm91bmRhdGlvbiBtZXNzaW5nIGFib3V0IGFuZCBtZW1vcnkgbWFuYWdlbWVudC4gVGhlIGNvbmNlcm5zIGluIHRoaXMgbW9kdWxlCmFyZSBhbG1vc3QgZW50aXJlbHkgYWJvdXQgdHJ5aW5nIHRvIGF2b2lkIG1lbW9yeSBsZWFrcyBhbmQgcHJvdmlkaW5nCmFwcHJvcHJpYXRlIGFuZCB1c2VmdWwgYXNzaXN0YW5jZSB0byB0aGUgaGlnaGVyLWxldmVsIGNvZGUuClwiXCJcIgppbXBvcnQgYmFzZTY0CmltcG9ydCBjdHlwZXMKaW1wb3J0IGl0ZXJ0b29scwppbXBvcnQgb3MKaW1wb3J0IHJlCmltcG9ydCBzc2wKaW1wb3J0IHN0cnVjdAppbXBvcnQgdGVtcGZpbGUKCmZyb20gLmJpbmRpbmdzIGltcG9ydCBDRkNvbnN0LCBDb3JlRm91bmRhdGlvbiwgU2VjdXJpdHkKCiMgVGhpcyByZWd1bGFyIGV4cHJlc3Npb24gaXMgdXNlZCB0byBncmFiIFBFTSBkYXRhIG91dCBvZiBhIFBFTSBidW5kbGUuCl9QRU1fQ0VSVFNfUkUgPSByZS5jb21waWxlKAogICAgYlwiLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tXFxuKC4qPylcXG4tLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tXCIsIHJlLkRPVEFMTAopCgoKZGVmIF9jZl9kYXRhX2Zyb21fYnl0ZXMoYnl0ZXN0cmluZyk6CiAgICBcIlwiXCIKICAgIEdpdmVuIGEgYnl0ZXN0cmluZywgY3JlYXRlIGEgQ0ZEYXRhIG9iamVjdCBmcm9tIGl0LiBUaGlzIENGRGF0YSBvYmplY3QgbXVzdAogICAgYmUgQ0ZSZWxlYXNlZCBieSB0aGUgY2FsbGVyLgogICAgXCJcIlwiCiAgICByZXR1cm4gQ29yZUZvdW5kYXRpb24uQ0ZEYXRhQ3JlYXRlKAogICAgICAgIENvcmVGb3VuZGF0aW9uLmtDRkFsbG9jYXRvckRlZmF1bHQsIGJ5dGVzdHJpbmcsIGxlbihieXRlc3RyaW5nKQogICAgKQoKCmRlZiBfY2ZfZGljdGlvbmFyeV9mcm9tX3R1cGxlcyh0dXBsZXMpOgogICAgXCJcIlwiCiAgICBHaXZlbiBhIGxpc3Qgb2YgUHl0aG9uIHR1cGxlcywgY3JlYXRlIGFuIGFzc29jaWF0ZWQgQ0ZEaWN0aW9uYXJ5LgogICAgXCJcIlwiCiAgICBkaWN0aW9uYXJ5X3NpemUgPSBsZW4odHVwbGVzKQoKICAgICMgV2UgbmVlZCB0byBnZXQgdGhlIGRpY3Rpb25hcnkga2V5cyBhbmQgdmFsdWVzIG91dCBpbiB0aGUgc2FtZSBvcmRlci4KICAgIGtleXMgPSAodFswXSBmb3IgdCBpbiB0dXBsZXMpCiAgICB2YWx1ZXMgPSAodFsxXSBmb3IgdCBpbiB0dXBsZXMpCiAgICBjZl9rZXlzID0gKENvcmVGb3VuZGF0aW9uLkNGVHlwZVJlZiAqIGRpY3Rpb25hcnlfc2l6ZSkoKmtleXMpCiAgICBjZl92YWx1ZXMgPSAoQ29yZUZvdW5kYXRpb24uQ0ZUeXBlUmVmICogZGljdGlvbmFyeV9zaXplKSgqdmFsdWVzKQoKICAgIHJldHVybiBDb3JlRm91bmRhdGlvbi5DRkRpY3Rpb25hcnlDcmVhdGUoCiAgICAgICAgQ29yZUZvdW5kYXRpb24ua0NGQWxsb2NhdG9yRGVmYXVsdCwKICAgICAgICBjZl9rZXlzLAogICAgICAgIGNmX3ZhbHVlcywKICAgICAgICBkaWN0aW9uYXJ5X3NpemUsCiAgICAgICAgQ29yZUZvdW5kYXRpb24ua0NGVHlwZURpY3Rpb25hcnlLZXlDYWxsQmFja3MsCiAgICAgICAgQ29yZUZvdW5kYXRpb24ua0NGVHlwZURpY3Rpb25hcnlWYWx1ZUNhbGxCYWNrcywKICAgICkKCgpkZWYgX2Nmc3RyKHB5X2JzdHIpOgogICAgXCJcIlwiCiAgICBHaXZlbiBhIFB5dGhvbiBiaW5hcnkgZGF0YSwgY3JlYXRlIGEgQ0ZTdHJpbmcuCiAgICBUaGUgc3RyaW5nIG11c3QgYmUgQ0ZSZWxlYXNlZCBieSB0aGUgY2FsbGVyLgogICAgXCJcIlwiCiAgICBjX3N0ciA9IGN0eXBlcy5jX2NoYXJfcChweV9ic3RyKQogICAgY2Zfc3RyID0gQ29yZUZvdW5kYXRpb24uQ0ZTdHJpbmdDcmVhdGVXaXRoQ1N0cmluZygKICAgICAgICBDb3JlRm91bmRhdGlvbi5rQ0ZBbGxvY2F0b3JEZWZhdWx0LAogICAgICAgIGNfc3RyLAogICAgICAgIENGQ29uc3Qua0NGU3RyaW5nRW5jb2RpbmdVVEY4LAogICAgKQogICAgcmV0dXJuIGNmX3N0cgoKCmRlZiBfY3JlYXRlX2Nmc3RyaW5nX2FycmF5KGxzdCk6CiAgICBcIlwiXCIKICAgIEdpdmVuIGEgbGlzdCBvZiBQeXRob24gYmluYXJ5IGRhdGEsIGNyZWF0ZSBhbiBhc3NvY2lhdGVkIENGTXV0YWJsZUFycmF5LgogICAgVGhlIGFycmF5IG11c3QgYmUgQ0ZSZWxlYXNlZCBieSB0aGUgY2FsbGVyLgoKICAgIFJhaXNlcyBhbiBzc2wuU1NMRXJyb3Igb24gZmFpbHVyZS4KICAgIFwiXCJcIgogICAgY2ZfYXJyID0gTm9uZQogICAgdHJ5OgogICAgICAgIGNmX2FyciA9IENvcmVGb3VuZGF0aW9uLkNGQXJyYXlDcmVhdGVNdXRhYmxlKAogICAgICAgICAgICBDb3JlRm91bmRhdGlvbi5rQ0ZBbGxvY2F0b3JEZWZhdWx0LAogICAgICAgICAgICAwLAogICAgICAgICAgICBjdHlwZXMuYnlyZWYoQ29yZUZvdW5kYXRpb24ua0NGVHlwZUFycmF5Q2FsbEJhY2tzKSwKICAgICAgICApCiAgICAgICAgaWYgbm90IGNmX2FycjoKICAgICAgICAgICAgcmFpc2UgTWVtb3J5RXJyb3IoXCJVbmFibGUgdG8gYWxsb2NhdGUgbWVtb3J5IVwiKQogICAgICAgIGZvciBpdGVtIGluIGxzdDoKICAgICAgICAgICAgY2Zfc3RyID0gX2Nmc3RyKGl0ZW0pCiAgICAgICAgICAgIGlmIG5vdCBjZl9zdHI6CiAgICAgICAgICAgICAgICByYWlzZSBNZW1vcnlFcnJvcihcIlVuYWJsZSB0byBhbGxvY2F0ZSBtZW1vcnkhXCIpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIENvcmVGb3VuZGF0aW9uLkNGQXJyYXlBcHBlbmRWYWx1ZShjZl9hcnIsIGNmX3N0cikKICAgICAgICAgICAgZmluYWxseToKICAgICAgICAgICAgICAgIENvcmVGb3VuZGF0aW9uLkNGUmVsZWFzZShjZl9zdHIpCiAgICBleGNlcHQgQmFzZUV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGlmIGNmX2FycjoKICAgICAgICAgICAgQ29yZUZvdW5kYXRpb24uQ0ZSZWxlYXNlKGNmX2FycikKICAgICAgICByYWlzZSBzc2wuU1NMRXJyb3IoXCJVbmFibGUgdG8gYWxsb2NhdGUgYXJyYXk6ICVzXCIgJSAoZSwpKQogICAgcmV0dXJuIGNmX2FycgoKCmRlZiBfY2Zfc3RyaW5nX3RvX3VuaWNvZGUodmFsdWUpOgogICAgXCJcIlwiCiAgICBDcmVhdGVzIGEgVW5pY29kZSBzdHJpbmcgZnJvbSBhIENGU3RyaW5nIG9iamVjdC4gVXNlZCBlbnRpcmVseSBmb3IgZXJyb3IKICAgIHJlcG9ydGluZy4KCiAgICBZZXMsIGl0IGFubm95cyBtZSBxdWl0ZSBhIGxvdCB0aGF0IHRoaXMgZnVuY3Rpb24gaXMgdGhpcyBjb21wbGV4LgogICAgXCJcIlwiCiAgICB2YWx1ZV9hc192b2lkX3AgPSBjdHlwZXMuY2FzdCh2YWx1ZSwgY3R5cGVzLlBPSU5URVIoY3R5cGVzLmNfdm9pZF9wKSkKCiAgICBzdHJpbmcgPSBDb3JlRm91bmRhdGlvbi5DRlN0cmluZ0dldENTdHJpbmdQdHIoCiAgICAgICAgdmFsdWVfYXNfdm9pZF9wLCBDRkNvbnN0LmtDRlN0cmluZ0VuY29kaW5nVVRGOAogICAgKQogICAgaWYgc3RyaW5nIGlzIE5vbmU6CiAgICAgICAgYnVmZmVyID0gY3R5cGVzLmNyZWF0ZV9zdHJpbmdfYnVmZmVyKDEwMjQpCiAgICAgICAgcmVzdWx0ID0gQ29yZUZvdW5kYXRpb24uQ0ZTdHJpbmdHZXRDU3RyaW5nKAogICAgICAgICAgICB2YWx1ZV9hc192b2lkX3AsIGJ1ZmZlciwgMTAyNCwgQ0ZDb25zdC5rQ0ZTdHJpbmdFbmNvZGluZ1VURjgKICAgICAgICApCiAgICAgICAgaWYgbm90IHJlc3VsdDoKICAgICAgICAgICAgcmFpc2UgT1NFcnJvcihcIkVycm9yIGNvcHlpbmcgQyBzdHJpbmcgZnJvbSBDRlN0cmluZ1JlZlwiKQogICAgICAgIHN0cmluZyA9IGJ1ZmZlci52YWx1ZQogICAgaWYgc3RyaW5nIGlzIG5vdCBOb25lOgogICAgICAgIHN0cmluZyA9IHN0cmluZy5kZWNvZGUoXCJ1dGYtOFwiKQogICAgcmV0dXJuIHN0cmluZwoKCmRlZiBfYXNzZXJ0X25vX2Vycm9yKGVycm9yLCBleGNlcHRpb25fY2xhc3M9Tm9uZSk6CiAgICBcIlwiXCIKICAgIENoZWNrcyB0aGUgcmV0dXJuIGNvZGUgYW5kIHRocm93cyBhbiBleGNlcHRpb24gaWYgdGhlcmUgaXMgYW4gZXJyb3IgdG8KICAgIHJlcG9ydAogICAgXCJcIlwiCiAgICBpZiBlcnJvciA9PSAwOgogICAgICAgIHJldHVybgoKICAgIGNmX2Vycm9yX3N0cmluZyA9IFNlY3VyaXR5LlNlY0NvcHlFcnJvck1lc3NhZ2VTdHJpbmcoZXJyb3IsIE5vbmUpCiAgICBvdXRwdXQgPSBfY2Zfc3RyaW5nX3RvX3VuaWNvZGUoY2ZfZXJyb3Jfc3RyaW5nKQogICAgQ29yZUZvdW5kYXRpb24uQ0ZSZWxlYXNlKGNmX2Vycm9yX3N0cmluZykKCiAgICBpZiBvdXRwdXQgaXMgTm9uZSBvciBvdXRwdXQgPT0gdVwiXCI6CiAgICAgICAgb3V0cHV0ID0gdVwiT1NTdGF0dXMgJXNcIiAlIGVycm9yCgogICAgaWYgZXhjZXB0aW9uX2NsYXNzIGlzIE5vbmU6CiAgICAgICAgZXhjZXB0aW9uX2NsYXNzID0gc3NsLlNTTEVycm9yCgogICAgcmFpc2UgZXhjZXB0aW9uX2NsYXNzKG91dHB1dCkKCgpkZWYgX2NlcnRfYXJyYXlfZnJvbV9wZW0ocGVtX2J1bmRsZSk6CiAgICBcIlwiXCIKICAgIEdpdmVuIGEgYnVuZGxlIG9mIGNlcnRzIGluIFBFTSBmb3JtYXQsIHR1cm5zIHRoZW0gaW50byBhIENGQXJyYXkgb2YgY2VydHMKICAgIHRoYXQgY2FuIGJlIHVzZWQgdG8gdmFsaWRhdGUgYSBjZXJ0IGNoYWluLgogICAgXCJcIlwiCiAgICAjIE5vcm1hbGl6ZSB0aGUgUEVNIGJ1bmRsZSdzIGxpbmUgZW5kaW5ncy4KICAgIHBlbV9idW5kbGUgPSBwZW1fYnVuZGxlLnJlcGxhY2UoYlwiXFxyXFxuXCIsIGJcIlxcblwiKQoKICAgIGRlcl9jZXJ0cyA9IFsKICAgICAgICBiYXNlNjQuYjY0ZGVjb2RlKG1hdGNoLmdyb3VwKDEpKSBmb3IgbWF0Y2ggaW4gX1BFTV9DRVJUU19SRS5maW5kaXRlcihwZW1fYnVuZGxlKQogICAgXQogICAgaWYgbm90IGRlcl9jZXJ0czoKICAgICAgICByYWlzZSBzc2wuU1NMRXJyb3IoXCJObyByb290IGNlcnRpZmljYXRlcyBzcGVjaWZpZWRcIikKCiAgICBjZXJ0X2FycmF5ID0gQ29yZUZvdW5kYXRpb24uQ0ZBcnJheUNyZWF0ZU11dGFibGUoCiAgICAgICAgQ29yZUZvdW5kYXRpb24ua0NGQWxsb2NhdG9yRGVmYXVsdCwKICAgICAgICAwLAogICAgICAgIGN0eXBlcy5ieXJlZihDb3JlRm91bmRhdGlvbi5rQ0ZUeXBlQXJyYXlDYWxsQmFja3MpLAogICAgKQogICAgaWYgbm90IGNlcnRfYXJyYXk6CiAgICAgICAgcmFpc2Ugc3NsLlNTTEVycm9yKFwiVW5hYmxlIHRvIGFsbG9jYXRlIG1lbW9yeSFcIikKCiAgICB0cnk6CiAgICAgICAgZm9yIGRlcl9ieXRlcyBpbiBkZXJfY2VydHM6CiAgICAgICAgICAgIGNlcnRkYXRhID0gX2NmX2RhdGFfZnJvbV9ieXRlcyhkZXJfYnl0ZXMpCiAgICAgICAgICAgIGlmIG5vdCBjZXJ0ZGF0YToKICAgICAgICAgICAgICAgIHJhaXNlIHNzbC5TU0xFcnJvcihcIlVuYWJsZSB0byBhbGxvY2F0ZSBtZW1vcnkhXCIpCiAgICAgICAgICAgIGNlcnQgPSBTZWN1cml0eS5TZWNDZXJ0aWZpY2F0ZUNyZWF0ZVdpdGhEYXRhKAogICAgICAgICAgICAgICAgQ29yZUZvdW5kYXRpb24ua0NGQWxsb2NhdG9yRGVmYXVsdCwgY2VydGRhdGEKICAgICAgICAgICAgKQogICAgICAgICAgICBDb3JlRm91bmRhdGlvbi5DRlJlbGVhc2UoY2VydGRhdGEpCiAgICAgICAgICAgIGlmIG5vdCBjZXJ0OgogICAgICAgICAgICAgICAgcmFpc2Ugc3NsLlNTTEVycm9yKFwiVW5hYmxlIHRvIGJ1aWxkIGNlcnQgb2JqZWN0IVwiKQoKICAgICAgICAgICAgQ29yZUZvdW5kYXRpb24uQ0ZBcnJheUFwcGVuZFZhbHVlKGNlcnRfYXJyYXksIGNlcnQpCiAgICAgICAgICAgIENvcmVGb3VuZGF0aW9uLkNGUmVsZWFzZShjZXJ0KQogICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAjIFdlIG5lZWQgdG8gZnJlZSB0aGUgYXJyYXkgYmVmb3JlIHRoZSBleGNlcHRpb24gYnViYmxlcyBmdXJ0aGVyLgogICAgICAgICMgV2Ugb25seSB3YW50IHRvIGRvIHRoYXQgaWYgYW4gZXJyb3Igb2NjdXJzOiBvdGhlcndpc2UsIHRoZSBjYWxsZXIKICAgICAgICAjIHNob3VsZCBmcmVlLgogICAgICAgIENvcmVGb3VuZGF0aW9uLkNGUmVsZWFzZShjZXJ0X2FycmF5KQogICAgICAgIHJhaXNlCgogICAgcmV0dXJuIGNlcnRfYXJyYXkKCgpkZWYgX2lzX2NlcnQoaXRlbSk6CiAgICBcIlwiXCIKICAgIFJldHVybnMgVHJ1ZSBpZiBhIGdpdmVuIENGVHlwZVJlZiBpcyBhIGNlcnRpZmljYXRlLgogICAgXCJcIlwiCiAgICBleHBlY3RlZCA9IFNlY3VyaXR5LlNlY0NlcnRpZmljYXRlR2V0VHlwZUlEKCkKICAgIHJldHVybiBDb3JlRm91bmRhdGlvbi5DRkdldFR5cGVJRChpdGVtKSA9PSBleHBlY3RlZAoKCmRlZiBfaXNfaWRlbnRpdHkoaXRlbSk6CiAgICBcIlwiXCIKICAgIFJldHVybnMgVHJ1ZSBpZiBhIGdpdmVuIENGVHlwZVJlZiBpcyBhbiBpZGVudGl0eS4KICAgIFwiXCJcIgogICAgZXhwZWN0ZWQgPSBTZWN1cml0eS5TZWNJZGVudGl0eUdldFR5cGVJRCgpCiAgICByZXR1cm4gQ29yZUZvdW5kYXRpb24uQ0ZHZXRUeXBlSUQoaXRlbSkgPT0gZXhwZWN0ZWQKCgpkZWYgX3RlbXBvcmFyeV9rZXljaGFpbigpOgogICAgXCJcIlwiCiAgICBUaGlzIGZ1bmN0aW9uIGNyZWF0ZXMgYSB0ZW1wb3JhcnkgTWFjIGtleWNoYWluIHRoYXQgd2UgY2FuIHVzZSB0byB3b3JrIHdpdGgKICAgIGNyZWRlbnRpYWxzLiBUaGlzIGtleWNoYWluIHVzZXMgYSBvbmUtdGltZSBwYXNzd29yZCBhbmQgYSB0ZW1wb3JhcnkgZmlsZSB0bwogICAgc3RvcmUgdGhlIGRhdGEuIFdlIGV4cGVjdCB0byBoYXZlIG9uZSBrZXljaGFpbiBwZXIgc29ja2V0LiBUaGUgcmV0dXJuZWQKICAgIFNlY0tleWNoYWluUmVmIG11c3QgYmUgZnJlZWQgYnkgdGhlIGNhbGxlciwgaW5jbHVkaW5nIGNhbGxpbmcKICAgIFNlY0tleWNoYWluRGVsZXRlLgoKICAgIFJldHVybnMgYSB0dXBsZSBvZiB0aGUgU2VjS2V5Y2hhaW5SZWYgYW5kIHRoZSBwYXRoIHRvIHRoZSB0ZW1wb3JhcnkKICAgIGRpcmVjdG9yeSB0aGF0IGNvbnRhaW5zIGl0LgogICAgXCJcIlwiCiAgICAjIFVuZm9ydHVuYXRlbHksIFNlY0tleWNoYWluQ3JlYXRlIHJlcXVpcmVzIGEgcGF0aCB0byBhIGtleWNoYWluLiBUaGlzCiAgICAjIG1lYW5zIHdlIGNhbm5vdCB1c2UgbWtzdGVtcCB0byB1c2UgYSBnZW5lcmljIHRlbXBvcmFyeSBmaWxlLiBJbnN0ZWFkLAogICAgIyB3ZSdyZSBnb2luZyB0byBjcmVhdGUgYSB0ZW1wb3JhcnkgZGlyZWN0b3J5IGFuZCBhIGZpbGVuYW1lIHRvIHVzZSB0aGVyZS4KICAgICMgVGhpcyBmaWxlbmFtZSB3aWxsIGJlIDggcmFuZG9tIGJ5dGVzIGV4cGFuZGVkIGludG8gYmFzZTY0LiBXZSBhbHNvIG5lZWQKICAgICMgc29tZSByYW5kb20gYnl0ZXMgdG8gcGFzc3dvcmQtcHJvdGVjdCB0aGUga2V5Y2hhaW4gd2UncmUgY3JlYXRpbmcsIHNvIHdlCiAgICAjIGFzayBmb3IgNDAgcmFuZG9tIGJ5dGVzLgogICAgcmFuZG9tX2J5dGVzID0gb3MudXJhbmRvbSg0MCkKICAgIGZpbGVuYW1lID0gYmFzZTY0LmIxNmVuY29kZShyYW5kb21fYnl0ZXNbOjhdKS5kZWNvZGUoXCJ1dGYtOFwiKQogICAgcGFzc3dvcmQgPSBiYXNlNjQuYjE2ZW5jb2RlKHJhbmRvbV9ieXRlc1s4Ol0pICAjIE11c3QgYmUgdmFsaWQgVVRGLTgKICAgIHRlbXBkaXJlY3RvcnkgPSB0ZW1wZmlsZS5ta2R0ZW1wKCkKCiAgICBrZXljaGFpbl9wYXRoID0gb3MucGF0aC5qb2luKHRlbXBkaXJlY3RvcnksIGZpbGVuYW1lKS5lbmNvZGUoXCJ1dGYtOFwiKQoKICAgICMgV2Ugbm93IHdhbnQgdG8gY3JlYXRlIHRoZSBrZXljaGFpbiBpdHNlbGYuCiAgICBrZXljaGFpbiA9IFNlY3VyaXR5LlNlY0tleWNoYWluUmVmKCkKICAgIHN0YXR1cyA9IFNlY3VyaXR5LlNlY0tleWNoYWluQ3JlYXRlKAogICAgICAgIGtleWNoYWluX3BhdGgsIGxlbihwYXNzd29yZCksIHBhc3N3b3JkLCBGYWxzZSwgTm9uZSwgY3R5cGVzLmJ5cmVmKGtleWNoYWluKQogICAgKQogICAgX2Fzc2VydF9ub19lcnJvcihzdGF0dXMpCgogICAgIyBIYXZpbmcgY3JlYXRlZCB0aGUga2V5Y2hhaW4sIHdlIHdhbnQgdG8gcGFzcyBpdCBvZmYgdG8gdGhlIGNhbGxlci4KICAgIHJldHVybiBrZXljaGFpbiwgdGVtcGRpcmVjdG9yeQoKCmRlZiBfbG9hZF9pdGVtc19mcm9tX2ZpbGUoa2V5Y2hhaW4sIHBhdGgpOgogICAgXCJcIlwiCiAgICBHaXZlbiBhIHNpbmdsZSBmaWxlLCBsb2FkcyBhbGwgdGhlIHRydXN0IG9iamVjdHMgZnJvbSBpdCBpbnRvIGFycmF5cyBhbmQKICAgIHRoZSBrZXljaGFpbi4KICAgIFJldHVybnMgYSB0dXBsZSBvZiBsaXN0czogdGhlIGZpcnN0IGxpc3QgaXMgYSBsaXN0IG9mIGlkZW50aXRpZXMsIHRoZQogICAgc2Vjb25kIGEgbGlzdCBvZiBjZXJ0cy4KICAgIFwiXCJcIgogICAgY2VydGlmaWNhdGVzID0gW10KICAgIGlkZW50aXRpZXMgPSBbXQogICAgcmVzdWx0X2FycmF5ID0gTm9uZQoKICAgIHdpdGggb3BlbihwYXRoLCBcInJiXCIpIGFzIGY6CiAgICAgICAgcmF3X2ZpbGVkYXRhID0gZi5yZWFkKCkKCiAgICB0cnk6CiAgICAgICAgZmlsZWRhdGEgPSBDb3JlRm91bmRhdGlvbi5DRkRhdGFDcmVhdGUoCiAgICAgICAgICAgIENvcmVGb3VuZGF0aW9uLmtDRkFsbG9jYXRvckRlZmF1bHQsIHJhd19maWxlZGF0YSwgbGVuKHJhd19maWxlZGF0YSkKICAgICAgICApCiAgICAgICAgcmVzdWx0X2FycmF5ID0gQ29yZUZvdW5kYXRpb24uQ0ZBcnJheVJlZigpCiAgICAgICAgcmVzdWx0ID0gU2VjdXJpdHkuU2VjSXRlbUltcG9ydCgKICAgICAgICAgICAgZmlsZWRhdGEsICAjIGNlcnQgZGF0YQogICAgICAgICAgICBOb25lLCAgIyBGaWxlbmFtZSwgbGVhdmluZyBpdCBvdXQgZm9yIG5vdwogICAgICAgICAgICBOb25lLCAgIyBXaGF0IHRoZSB0eXBlIG9mIHRoZSBmaWxlIGlzLCB3ZSBkb24ndCBjYXJlCiAgICAgICAgICAgIE5vbmUsICAjIHdoYXQncyBpbiB0aGUgZmlsZSwgd2UgZG9uJ3QgY2FyZQogICAgICAgICAgICAwLCAgIyBpbXBvcnQgZmxhZ3MKICAgICAgICAgICAgTm9uZSwgICMga2V5IHBhcmFtcywgY2FuIGluY2x1ZGUgcGFzc3BocmFzZSBpbiB0aGUgZnV0dXJlCiAgICAgICAgICAgIGtleWNoYWluLCAgIyBUaGUga2V5Y2hhaW4gdG8gaW5zZXJ0IGludG8KICAgICAgICAgICAgY3R5cGVzLmJ5cmVmKHJlc3VsdF9hcnJheSksICAjIFJlc3VsdHMKICAgICAgICApCiAgICAgICAgX2Fzc2VydF9ub19lcnJvcihyZXN1bHQpCgogICAgICAgICMgQSBDRkFycmF5IGlzIG5vdCB2ZXJ5IHVzZWZ1bCB0byB1cyBhcyBhbiBpbnRlcm1lZGlhcnkKICAgICAgICAjIHJlcHJlc2VudGF0aW9uLCBzbyB3ZSBhcmUgZ29pbmcgdG8gZXh0cmFjdCB0aGUgb2JqZWN0cyB3ZSB3YW50CiAgICAgICAgIyBhbmQgdGhlbiBmcmVlIHRoZSBhcnJheS4gV2UgZG9uJ3QgbmVlZCB0byBrZWVwIGhvbGQgb2Yga2V5czogdGhlCiAgICAgICAgIyBrZXljaGFpbiBhbHJlYWR5IGhhcyB0aGVtIQogICAgICAgIHJlc3VsdF9jb3VudCA9IENvcmVGb3VuZGF0aW9uLkNGQXJyYXlHZXRDb3VudChyZXN1bHRfYXJyYXkpCiAgICAgICAgZm9yIGluZGV4IGluIHJhbmdlKHJlc3VsdF9jb3VudCk6CiAgICAgICAgICAgIGl0ZW0gPSBDb3JlRm91bmRhdGlvbi5DRkFycmF5R2V0VmFsdWVBdEluZGV4KHJlc3VsdF9hcnJheSwgaW5kZXgpCiAgICAgICAgICAgIGl0ZW0gPSBjdHlwZXMuY2FzdChpdGVtLCBDb3JlRm91bmRhdGlvbi5DRlR5cGVSZWYpCgogICAgICAgICAgICBpZiBfaXNfY2VydChpdGVtKToKICAgICAgICAgICAgICAgIENvcmVGb3VuZGF0aW9uLkNGUmV0YWluKGl0ZW0pCiAgICAgICAgICAgICAgICBjZXJ0aWZpY2F0ZXMuYXBwZW5kKGl0ZW0pCiAgICAgICAgICAgIGVsaWYgX2lzX2lkZW50aXR5KGl0ZW0pOgogICAgICAgICAgICAgICAgQ29yZUZvdW5kYXRpb24uQ0ZSZXRhaW4oaXRlbSkKICAgICAgICAgICAgICAgIGlkZW50aXRpZXMuYXBwZW5kKGl0ZW0pCiAgICBmaW5hbGx5OgogICAgICAgIGlmIHJlc3VsdF9hcnJheToKICAgICAgICAgICAgQ29yZUZvdW5kYXRpb24uQ0ZSZWxlYXNlKHJlc3VsdF9hcnJheSkKCiAgICAgICAgQ29yZUZvdW5kYXRpb24uQ0ZSZWxlYXNlKGZpbGVkYXRhKQoKICAgIHJldHVybiAoaWRlbnRpdGllcywgY2VydGlmaWNhdGVzKQoKCmRlZiBfbG9hZF9jbGllbnRfY2VydF9jaGFpbihrZXljaGFpbiwgKnBhdGhzKToKICAgIFwiXCJcIgogICAgTG9hZCBjZXJ0aWZpY2F0ZXMgYW5kIG1heWJlIGtleXMgZnJvbSBhIG51bWJlciBvZiBmaWxlcy4gSGFzIHRoZSBlbmQgZ29hbAogICAgb2YgcmV0dXJuaW5nIGEgQ0ZBcnJheSBjb250YWluaW5nIG9uZSBTZWNJZGVudGl0eVJlZiwgYW5kIHRoZW4gemVybyBvciBtb3JlCiAgICBTZWNDZXJ0aWZpY2F0ZVJlZiBvYmplY3RzLCBzdWl0YWJsZSBmb3IgdXNlIGFzIGEgY2xpZW50IGNlcnRpZmljYXRlIHRydXN0CiAgICBjaGFpbi4KICAgIFwiXCJcIgogICAgIyBPaywgdGhlIHN0cmF0ZWd5LgogICAgIwogICAgIyBUaGlzIHJlbGllcyBvbiBrbm93aW5nIHRoYXQgbWFjT1Mgd2lsbCBub3QgZ2l2ZSB5b3UgYSBTZWNJZGVudGl0eVJlZgogICAgIyB1bmxlc3MgeW91IGhhdmUgaW1wb3J0ZWQgYSBrZXkgaW50byBhIGtleWNoYWluLiBUaGlzIGlzIGEgc29tZXdoYXQKICAgICMgYXJ0aWZpY2lhbCBsaW1pdGF0aW9uIG9mIG1hY09TIChmb3IgZXhhbXBsZSwgaXQgZG9lc24ndCBuZWNlc3NhcmlseQogICAgIyBhZmZlY3QgaU9TKSwgYnV0IHRoZXJlIGlzIG5vdGhpbmcgaW5zaWRlIFNlY3VyaXR5LmZyYW1ld29yayB0aGF0IGxldHMgeW91CiAgICAjIGdldCBhIFNlY0lkZW50aXR5UmVmIHdpdGhvdXQgaGF2aW5nIGEga2V5IGluIGEga2V5Y2hhaW4uCiAgICAjCiAgICAjIFNvIHRoZSBwb2xpY3kgaGVyZSBpcyB3ZSB0YWtlIGFsbCB0aGUgZmlsZXMgYW5kIGl0ZXJhdGUgdGhlbSBpbiBvcmRlci4KICAgICMgRWFjaCBvbmUgd2lsbCB1c2UgU2VjSXRlbUltcG9ydCB0byBoYXZlIG9uZSBvciBtb3JlIG9iamVjdHMgbG9hZGVkIGZyb20KICAgICMgaXQuIFdlIHdpbGwgYWxzbyBwb2ludCBhdCBhIGtleWNoYWluIHRoYXQgbWFjT1MgY2FuIHVzZSB0byB3b3JrIHdpdGggdGhlCiAgICAjIHByaXZhdGUga2V5LgogICAgIwogICAgIyBPbmNlIHdlIGhhdmUgYWxsIHRoZSBvYmplY3RzLCB3ZSdsbCBjaGVjayB3aGF0IHdlIGFjdHVhbGx5IGhhdmUuIElmIHdlCiAgICAjIGFscmVhZHkgaGF2ZSBhIFNlY0lkZW50aXR5UmVmIGluIGhhbmQsIGZhYjogd2UnbGwgdXNlIHRoYXQuIE90aGVyd2lzZSwKICAgICMgd2UnbGwgdGFrZSB0aGUgZmlyc3QgY2VydGlmaWNhdGUgKHdoaWNoIHdlIGFzc3VtZSB0byBiZSBvdXIgbGVhZikgYW5kCiAgICAjIGFzayB0aGUga2V5Y2hhaW4gdG8gZ2l2ZSB1cyBhIFNlY0lkZW50aXR5UmVmIHdpdGggdGhhdCBjZXJ0J3MgYXNzb2NpYXRlZAogICAgIyBrZXkuCiAgICAjCiAgICAjIFdlJ2xsIHRoZW4gcmV0dXJuIGEgQ0ZBcnJheSBjb250YWluaW5nIHRoZSB0cnVzdCBjaGFpbjogb25lCiAgICAjIFNlY0lkZW50aXR5UmVmIGFuZCB0aGVuIHplcm8tb3ItbW9yZSBTZWNDZXJ0aWZpY2F0ZVJlZiBvYmplY3RzLiBUaGUKICAgICMgcmVzcG9uc2liaWxpdHkgZm9yIGZyZWVpbmcgdGhpcyBDRkFycmF5IHdpbGwgYmUgd2l0aCB0aGUgY2FsbGVyLiBUaGlzCiAgICAjIENGQXJyYXkgbXVzdCByZW1haW4gYWxpdmUgZm9yIHRoZSBlbnRpcmUgY29ubmVjdGlvbiwgc28gaW4gcHJhY3RpY2UgaXQKICAgICMgd2lsbCBiZSBzdG9yZWQgd2l0aCBhIHNpbmdsZSBTU0xTb2NrZXQsIGFsb25nIHdpdGggdGhlIHJlZmVyZW5jZSB0byB0aGUKICAgICMga2V5Y2hhaW4uCiAgICBjZXJ0aWZpY2F0ZXMgPSBbXQogICAgaWRlbnRpdGllcyA9IFtdCgogICAgIyBGaWx0ZXIgb3V0IGJhZCBwYXRocy4KICAgIHBhdGhzID0gKHBhdGggZm9yIHBhdGggaW4gcGF0aHMgaWYgcGF0aCkKCiAgICB0cnk6CiAgICAgICAgZm9yIGZpbGVfcGF0aCBpbiBwYXRoczoKICAgICAgICAgICAgbmV3X2lkZW50aXRpZXMsIG5ld19jZXJ0cyA9IF9sb2FkX2l0ZW1zX2Zyb21fZmlsZShrZXljaGFpbiwgZmlsZV9wYXRoKQogICAgICAgICAgICBpZGVudGl0aWVzLmV4dGVuZChuZXdfaWRlbnRpdGllcykKICAgICAgICAgICAgY2VydGlmaWNhdGVzLmV4dGVuZChuZXdfY2VydHMpCgogICAgICAgICMgT2ssIHdlIGhhdmUgZXZlcnl0aGluZy4gVGhlIHF1ZXN0aW9uIGlzOiBkbyB3ZSBoYXZlIGFuIGlkZW50aXR5PyBJZgogICAgICAgICMgbm90LCB3ZSB3YW50IHRvIGdyYWIgb25lIGZyb20gdGhlIGZpcnN0IGNlcnQgd2UgaGF2ZS4KICAgICAgICBpZiBub3QgaWRlbnRpdGllczoKICAgICAgICAgICAgbmV3X2lkZW50aXR5ID0gU2VjdXJpdHkuU2VjSWRlbnRpdHlSZWYoKQogICAgICAgICAgICBzdGF0dXMgPSBTZWN1cml0eS5TZWNJZGVudGl0eUNyZWF0ZVdpdGhDZXJ0aWZpY2F0ZSgKICAgICAgICAgICAgICAgIGtleWNoYWluLCBjZXJ0aWZpY2F0ZXNbMF0sIGN0eXBlcy5ieXJlZihuZXdfaWRlbnRpdHkpCiAgICAgICAgICAgICkKICAgICAgICAgICAgX2Fzc2VydF9ub19lcnJvcihzdGF0dXMpCiAgICAgICAgICAgIGlkZW50aXRpZXMuYXBwZW5kKG5ld19pZGVudGl0eSkKCiAgICAgICAgICAgICMgV2Ugbm93IHdhbnQgdG8gcmVsZWFzZSB0aGUgb3JpZ2luYWwgY2VydGlmaWNhdGUsIGFzIHdlIG5vIGxvbmdlcgogICAgICAgICAgICAjIG5lZWQgaXQuCiAgICAgICAgICAgIENvcmVGb3VuZGF0aW9uLkNGUmVsZWFzZShjZXJ0aWZpY2F0ZXMucG9wKDApKQoKICAgICAgICAjIFdlIG5vdyBuZWVkIHRvIGJ1aWxkIGEgbmV3IENGQXJyYXkgdGhhdCBob2xkcyB0aGUgdHJ1c3QgY2hhaW4uCiAgICAgICAgdHJ1c3RfY2hhaW4gPSBDb3JlRm91bmRhdGlvbi5DRkFycmF5Q3JlYXRlTXV0YWJsZSgKICAgICAgICAgICAgQ29yZUZvdW5kYXRpb24ua0NGQWxsb2NhdG9yRGVmYXVsdCwKICAgICAgICAgICAgMCwKICAgICAgICAgICAgY3R5cGVzLmJ5cmVmKENvcmVGb3VuZGF0aW9uLmtDRlR5cGVBcnJheUNhbGxCYWNrcyksCiAgICAgICAgKQogICAgICAgIGZvciBpdGVtIGluIGl0ZXJ0b29scy5jaGFpbihpZGVudGl0aWVzLCBjZXJ0aWZpY2F0ZXMpOgogICAgICAgICAgICAjIEFycmF5QXBwZW5kVmFsdWUgZG9lcyBhIENGUmV0YWluIG9uIHRoZSBpdGVtLiBUaGF0J3MgZmluZSwKICAgICAgICAgICAgIyBiZWNhdXNlIHRoZSBmaW5hbGx5IGJsb2NrIHdpbGwgcmVsZWFzZSBvdXIgb3RoZXIgcmVmcyB0byB0aGVtLgogICAgICAgICAgICBDb3JlRm91bmRhdGlvbi5DRkFycmF5QXBwZW5kVmFsdWUodHJ1c3RfY2hhaW4sIGl0ZW0pCgogICAgICAgIHJldHVybiB0cnVzdF9jaGFpbgogICAgZmluYWxseToKICAgICAgICBmb3Igb2JqIGluIGl0ZXJ0b29scy5jaGFpbihpZGVudGl0aWVzLCBjZXJ0aWZpY2F0ZXMpOgogICAgICAgICAgICBDb3JlRm91bmRhdGlvbi5DRlJlbGVhc2Uob2JqKQoKClRMU19QUk9UT0NPTF9WRVJTSU9OUyA9IHsKICAgIFwiU1NMdjJcIjogKDAsIDIpLAogICAgXCJTU0x2M1wiOiAoMywgMCksCiAgICBcIlRMU3YxXCI6ICgzLCAxKSwKICAgIFwiVExTdjEuMVwiOiAoMywgMiksCiAgICBcIlRMU3YxLjJcIjogKDMsIDMpLAp9CgoKZGVmIF9idWlsZF90bHNfdW5rbm93bl9jYV9hbGVydCh2ZXJzaW9uKToKICAgIFwiXCJcIgogICAgQnVpbGRzIGEgVExTIGFsZXJ0IHJlY29yZCBmb3IgYW4gdW5rbm93biBDQS4KICAgIFwiXCJcIgogICAgdmVyX21haiwgdmVyX21pbiA9IFRMU19QUk9UT0NPTF9WRVJTSU9OU1t2ZXJzaW9uXQogICAgc2V2ZXJpdHlfZmF0YWwgPSAweDAyCiAgICBkZXNjcmlwdGlvbl91bmtub3duX2NhID0gMHgzMAogICAgbXNnID0gc3RydWN0LnBhY2soXCI+QkJcIiwgc2V2ZXJpdHlfZmF0YWwsIGRlc2NyaXB0aW9uX3Vua25vd25fY2EpCiAgICBtc2dfbGVuID0gbGVuKG1zZykKICAgIHJlY29yZF90eXBlX2FsZXJ0ID0gMHgxNQogICAgcmVjb3JkID0gc3RydWN0LnBhY2soXCI+QkJCSFwiLCByZWNvcmRfdHlwZV9hbGVydCwgdmVyX21haiwgdmVyX21pbiwgbXNnX2xlbikgKyBtc2cKICAgIHJldHVybiByZWNvcmQKCiIiIgoKaW1wb3J0IG9zCmltcG9ydCB0eXBlcwppbXBvcnQgemlwZmlsZQppbXBvcnQgc3lzCmltcG9ydCBpbwppbXBvcnQganNvbgoKY2xhc3MgWmlwSW1wb3J0ZXIob2JqZWN0KToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB6aXBfZmlsZSk6CiAgICAgICAgc2VsZi56ZmlsZSA9IHppcF9maWxlCiAgICAgICAgc2VsZi5fcGF0aHMgPSBbeC5maWxlbmFtZSBmb3IgeCBpbiBzZWxmLnpmaWxlLmZpbGVsaXN0XQogICAgICAgIAogICAgZGVmIF9tb2RfdG9fcGF0aHMoc2VsZiwgZnVsbG5hbWUpOgogICAgICAgICMgZ2V0IHRoZSBweXRob24gbW9kdWxlIG5hbWUKICAgICAgICBweV9maWxlbmFtZSA9IGZ1bGxuYW1lLnJlcGxhY2UoIi4iLCBvcy5zZXApICsgIi5weSIKICAgICAgICAjIGdldCB0aGUgZmlsZW5hbWUgaWYgaXQgaXMgYSBwYWNrYWdlL3N1YnBhY2thZ2UKICAgICAgICBweV9wYWNrYWdlID0gZnVsbG5hbWUucmVwbGFjZSgiLiIsIG9zLnNlcCkgKyBvcy5zZXAgKyAiX19pbml0X18ucHkiCiAgICAgICAgaWYgcHlfZmlsZW5hbWUgaW4gc2VsZi5fcGF0aHM6CiAgICAgICAgICAgIHJldHVybiBweV9maWxlbmFtZQogICAgICAgIGVsaWYgcHlfcGFja2FnZSBpbiBzZWxmLl9wYXRoczoKICAgICAgICAgICAgcmV0dXJuIHB5X3BhY2thZ2UKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiBmaW5kX21vZHVsZShzZWxmLCBmdWxsbmFtZSwgcGF0aCk6CiAgICAgICAgaWYgc2VsZi5fbW9kX3RvX3BhdGhzKGZ1bGxuYW1lKSBpcyBub3QgTm9uZToKICAgICAgICAgICAgcmV0dXJuIHNlbGYKICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiBsb2FkX21vZHVsZShzZWxmLCBmdWxsbmFtZSk6CiAgICAgICAgZmlsZW5hbWUgPSBzZWxmLl9tb2RfdG9fcGF0aHMoZnVsbG5hbWUpCiAgICAgICAgaWYgbm90IGZpbGVuYW1lIGluIHNlbGYuX3BhdGhzOgogICAgICAgICAgICByYWlzZSBJbXBvcnRFcnJvcihmdWxsbmFtZSkKICAgICAgICBuZXdfbW9kdWxlID0gdHlwZXMuTW9kdWxlVHlwZShmdWxsbmFtZSkKICAgICAgICBzeXMubW9kdWxlc1tmdWxsbmFtZV09bmV3X21vZHVsZQogICAgICAgIGlmIGZpbGVuYW1lLmVuZHN3aXRoKCJfX2luaXRfXy5weSIpOgogICAgICAgICAgICBuZXdfbW9kdWxlLl9fcGF0aF9fID0gW10gCiAgICAgICAgICAgIG5ld19tb2R1bGUuX19wYWNrYWdlX18gPSBmdWxsbmFtZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG5ld19tb2R1bGUuX19wYWNrYWdlX18gPSBmdWxsbmFtZS5ycGFydGl0aW9uKCcuJylbMF0KICAgICAgICBleGVjKHNlbGYuemZpbGUub3BlbihmaWxlbmFtZSwgJ3InKS5yZWFkKCksbmV3X21vZHVsZS5fX2RpY3RfXykKICAgICAgICBuZXdfbW9kdWxlLl9fZmlsZV9fID0gZmlsZW5hbWUKICAgICAgICBuZXdfbW9kdWxlLl9fbG9hZGVyX18gPSBzZWxmCiAgICAgICAgbmV3X21vZHVsZS5fX3NwZWNfXz1qc29uLl9fc3BlY19fICMgVG8gc2F0aXNmeSBpbXBvcnRsaWIuX2NvbW1vbi5nZXRfcGFja2FnZQogICAgICAgIHJldHVybiBuZXdfbW9kdWxlCgptb2R1bGVfemlwPXppcGZpbGUuWmlwRmlsZShpby5CeXRlc0lPKCksInciKQpmb3Iga2V5IGluIG1vZHVsZV9kaWN0OgogICAgbW9kdWxlX3ppcC53cml0ZXN0cihrZXksbW9kdWxlX2RpY3Rba2V5XSkKCm1vZHVsZV9pbXBvcnRlcj1aaXBJbXBvcnRlcihtb2R1bGVfemlwKQpzeXMubWV0YV9wYXRoLmluc2VydCgwLG1vZHVsZV9pbXBvcnRlcikKCiNmcm9tIHVybGxpYjMgaW1wb3J0ICoKaW1wb3J0IHVybGxpYjMKZ2xvYmFscygpLnVwZGF0ZSh1cmxsaWIzLl9fZGljdF9fKQogICAgCmlmIG1vZHVsZV9pbXBvcnRlciBpbiBzeXMubWV0YV9wYXRoOgogICAgc3lzLm1ldGFfcGF0aC5yZW1vdmUobW9kdWxlX2ltcG9ydGVyKQoKI2ZvciBrZXkgaW4gc3lzLm1vZHVsZXMuY29weSgpOgojICAgIGlmIGtleT09InVybGxpYjMiIG9yIGtleS5zdGFydHN3aXRoKCJ1cmxsaWIzLiIpOgojICAgICAgICBkZWwgc3lzLm1vZHVsZXNba2V5XQo=').decode("utf-8"),urllib3_module.__dict__)
sys.modules["urllib3"]=urllib3_module


import types
import sys
import base64
certifi_module=types.ModuleType("certifi")
#setattr(certifi_module,"__file__",__file__)
exec(base64.b64decode(b'aW1wb3J0IG9zCm1vZHVsZV9kaWN0PXt9Cm1vZHVsZV9kaWN0WyJjZXJ0aWZpIitvcy5zZXArImNvcmUucHkiXT0iIiIKXCJcIlwiCmNlcnRpZmkucHkKfn5+fn5+fn5+fgoKVGhpcyBtb2R1bGUgcmV0dXJucyB0aGUgaW5zdGFsbGF0aW9uIGxvY2F0aW9uIG9mIGNhY2VydC5wZW0gb3IgaXRzIGNvbnRlbnRzLgpcIlwiXCIKaW1wb3J0IG9zCmltcG9ydCB0eXBlcwpmcm9tIHR5cGluZyBpbXBvcnQgVW5pb24KCnRyeToKICAgIGZyb20gaW1wb3J0bGliLnJlc291cmNlcyBpbXBvcnQgcGF0aCBhcyBnZXRfcGF0aCwgcmVhZF90ZXh0CgogICAgX0NBQ0VSVF9DVFggPSBOb25lCiAgICBfQ0FDRVJUX1BBVEggPSBOb25lCgogICAgZGVmIHdoZXJlKCkgLT4gc3RyOgogICAgICAgICMgVGhpcyBpcyBzbGlnaHRseSB0ZXJyaWJsZSwgYnV0IHdlIHdhbnQgdG8gZGVsYXkgZXh0cmFjdGluZyB0aGUgZmlsZQogICAgICAgICMgaW4gY2FzZXMgd2hlcmUgd2UncmUgaW5zaWRlIG9mIGEgemlwaW1wb3J0IHNpdHVhdGlvbiB1bnRpbCBzb21lb25lCiAgICAgICAgIyBhY3R1YWxseSBjYWxscyB3aGVyZSgpLCBidXQgd2UgZG9uJ3Qgd2FudCB0byByZS1leHRyYWN0IHRoZSBmaWxlCiAgICAgICAgIyBvbiBldmVyeSBjYWxsIG9mIHdoZXJlKCksIHNvIHdlJ2xsIGRvIGl0IG9uY2UgdGhlbiBzdG9yZSBpdCBpbiBhCiAgICAgICAgIyBnbG9iYWwgdmFyaWFibGUuCiAgICAgICAgZ2xvYmFsIF9DQUNFUlRfQ1RYCiAgICAgICAgZ2xvYmFsIF9DQUNFUlRfUEFUSAogICAgICAgIGlmIF9DQUNFUlRfUEFUSCBpcyBOb25lOgogICAgICAgICAgICAjIFRoaXMgaXMgc2xpZ2h0bHkgamFua3ksIHRoZSBpbXBvcnRsaWIucmVzb3VyY2VzIEFQSSB3YW50cyB5b3UgdG8KICAgICAgICAgICAgIyBtYW5hZ2UgdGhlIGNsZWFudXAgb2YgdGhpcyBmaWxlLCBzbyBpdCBkb2Vzbid0IGFjdHVhbGx5IHJldHVybiBhCiAgICAgICAgICAgICMgcGF0aCwgaXQgcmV0dXJucyBhIGNvbnRleHQgbWFuYWdlciB0aGF0IHdpbGwgZ2l2ZSB5b3UgdGhlIHBhdGgKICAgICAgICAgICAgIyB3aGVuIHlvdSBlbnRlciBpdCBhbmQgd2lsbCBkbyBhbnkgY2xlYW51cCB3aGVuIHlvdSBsZWF2ZSBpdC4gSW4KICAgICAgICAgICAgIyB0aGUgY29tbW9uIGNhc2Ugb2Ygbm90IG5lZWRpbmcgYSB0ZW1wb3JhcnkgZmlsZSwgaXQgd2lsbCBqdXN0CiAgICAgICAgICAgICMgcmV0dXJuIHRoZSBmaWxlIHN5c3RlbSBsb2NhdGlvbiBhbmQgdGhlIF9fZXhpdF9fKCkgaXMgYSBuby1vcC4KICAgICAgICAgICAgIwogICAgICAgICAgICAjIFdlIGFsc28gaGF2ZSB0byBob2xkIG9udG8gdGhlIGFjdHVhbCBjb250ZXh0IG1hbmFnZXIsIGJlY2F1c2UKICAgICAgICAgICAgIyBpdCB3aWxsIGRvIHRoZSBjbGVhbnVwIHdoZW5ldmVyIGl0IGdldHMgZ2FyYmFnZSBjb2xsZWN0ZWQsIHNvCiAgICAgICAgICAgICMgd2Ugd2lsbCBhbHNvIHN0b3JlIHRoYXQgYXQgdGhlIGdsb2JhbCBsZXZlbCBhcyB3ZWxsLgogICAgICAgICAgICBfQ0FDRVJUX0NUWCA9IGdldF9wYXRoKFwiY2VydGlmaVwiLCBcImNhY2VydC5wZW1cIikKICAgICAgICAgICAgX0NBQ0VSVF9QQVRIID0gc3RyKF9DQUNFUlRfQ1RYLl9fZW50ZXJfXygpKQoKICAgICAgICByZXR1cm4gX0NBQ0VSVF9QQVRICgoKZXhjZXB0IEltcG9ydEVycm9yOgogICAgUGFja2FnZSA9IFVuaW9uW3R5cGVzLk1vZHVsZVR5cGUsIHN0cl0KICAgIFJlc291cmNlID0gVW5pb25bc3RyLCBcIm9zLlBhdGhMaWtlXCJdCgogICAgIyBUaGlzIGZhbGxiYWNrIHdpbGwgd29yayBmb3IgUHl0aG9uIHZlcnNpb25zIHByaW9yIHRvIDMuNyB0aGF0IGxhY2sgdGhlCiAgICAjIGltcG9ydGxpYi5yZXNvdXJjZXMgbW9kdWxlIGJ1dCByZWxpZXMgb24gdGhlIGV4aXN0aW5nIGB3aGVyZWAgZnVuY3Rpb24KICAgICMgc28gd29uJ3QgYWRkcmVzcyBpc3N1ZXMgd2l0aCBlbnZpcm9ubWVudHMgbGlrZSBQeU94aWRpemVyIHRoYXQgZG9uJ3Qgc2V0CiAgICAjIF9fZmlsZV9fIG9uIG1vZHVsZXMuCiAgICBkZWYgcmVhZF90ZXh0KAogICAgICAgIHBhY2thZ2U6IFBhY2thZ2UsCiAgICAgICAgcmVzb3VyY2U6IFJlc291cmNlLAogICAgICAgIGVuY29kaW5nOiBzdHIgPSAndXRmLTgnLAogICAgICAgIGVycm9yczogc3RyID0gJ3N0cmljdCcKICAgICkgLT4gc3RyOgogICAgICAgIHdpdGggb3Blbih3aGVyZSgpLCBlbmNvZGluZz1lbmNvZGluZykgYXMgZGF0YToKICAgICAgICAgICAgcmV0dXJuIGRhdGEucmVhZCgpCgogICAgIyBJZiB3ZSBkb24ndCBoYXZlIGltcG9ydGxpYi5yZXNvdXJjZXMsIHRoZW4gd2Ugd2lsbCBqdXN0IGRvIHRoZSBvbGQgbG9naWMKICAgICMgb2YgYXNzdW1pbmcgd2UncmUgb24gdGhlIGZpbGVzeXN0ZW0gYW5kIG11bmdlIHRoZSBwYXRoIGRpcmVjdGx5LgogICAgZGVmIHdoZXJlKCkgLT4gc3RyOgogICAgICAgIGYgPSBvcy5wYXRoLmRpcm5hbWUoX19maWxlX18pCgogICAgICAgIHJldHVybiBvcy5wYXRoLmpvaW4oZiwgXCJjYWNlcnQucGVtXCIpCgoKZGVmIGNvbnRlbnRzKCkgLT4gc3RyOgogICAgcmV0dXJuIHJlYWRfdGV4dChcImNlcnRpZmlcIiwgXCJjYWNlcnQucGVtXCIsIGVuY29kaW5nPVwiYXNjaWlcIikKCiIiIgptb2R1bGVfZGljdFsiY2VydGlmaSIrb3Muc2VwKyJfX2luaXRfXy5weSJdPSIiIgpmcm9tIC5jb3JlIGltcG9ydCBjb250ZW50cywgd2hlcmUKCl9fYWxsX18gPSBbXCJjb250ZW50c1wiLCBcIndoZXJlXCJdCl9fdmVyc2lvbl9fID0gXCIyMDIyLjA2LjE1XCIKCiIiIgptb2R1bGVfZGljdFsiY2VydGlmaSIrb3Muc2VwKyJfX21haW5fXy5weSJdPSIiIgppbXBvcnQgYXJncGFyc2UKCmZyb20gY2VydGlmaSBpbXBvcnQgY29udGVudHMsIHdoZXJlCgpwYXJzZXIgPSBhcmdwYXJzZS5Bcmd1bWVudFBhcnNlcigpCnBhcnNlci5hZGRfYXJndW1lbnQoXCItY1wiLCBcIi0tY29udGVudHNcIiwgYWN0aW9uPVwic3RvcmVfdHJ1ZVwiKQphcmdzID0gcGFyc2VyLnBhcnNlX2FyZ3MoKQoKaWYgYXJncy5jb250ZW50czoKICAgIHByaW50KGNvbnRlbnRzKCkpCmVsc2U6CiAgICBwcmludCh3aGVyZSgpKQoKIiIiCgppbXBvcnQgb3MKaW1wb3J0IHR5cGVzCmltcG9ydCB6aXBmaWxlCmltcG9ydCBzeXMKaW1wb3J0IGlvCmltcG9ydCBqc29uCgpjbGFzcyBaaXBJbXBvcnRlcihvYmplY3QpOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHppcF9maWxlKToKICAgICAgICBzZWxmLnpmaWxlID0gemlwX2ZpbGUKICAgICAgICBzZWxmLl9wYXRocyA9IFt4LmZpbGVuYW1lIGZvciB4IGluIHNlbGYuemZpbGUuZmlsZWxpc3RdCiAgICAgICAgCiAgICBkZWYgX21vZF90b19wYXRocyhzZWxmLCBmdWxsbmFtZSk6CiAgICAgICAgIyBnZXQgdGhlIHB5dGhvbiBtb2R1bGUgbmFtZQogICAgICAgIHB5X2ZpbGVuYW1lID0gZnVsbG5hbWUucmVwbGFjZSgiLiIsIG9zLnNlcCkgKyAiLnB5IgogICAgICAgICMgZ2V0IHRoZSBmaWxlbmFtZSBpZiBpdCBpcyBhIHBhY2thZ2Uvc3VicGFja2FnZQogICAgICAgIHB5X3BhY2thZ2UgPSBmdWxsbmFtZS5yZXBsYWNlKCIuIiwgb3Muc2VwKSArIG9zLnNlcCArICJfX2luaXRfXy5weSIKICAgICAgICBpZiBweV9maWxlbmFtZSBpbiBzZWxmLl9wYXRoczoKICAgICAgICAgICAgcmV0dXJuIHB5X2ZpbGVuYW1lCiAgICAgICAgZWxpZiBweV9wYWNrYWdlIGluIHNlbGYuX3BhdGhzOgogICAgICAgICAgICByZXR1cm4gcHlfcGFja2FnZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBOb25lCgogICAgZGVmIGZpbmRfbW9kdWxlKHNlbGYsIGZ1bGxuYW1lLCBwYXRoKToKICAgICAgICBpZiBzZWxmLl9tb2RfdG9fcGF0aHMoZnVsbG5hbWUpIGlzIG5vdCBOb25lOgogICAgICAgICAgICByZXR1cm4gc2VsZgogICAgICAgIHJldHVybiBOb25lCgogICAgZGVmIGxvYWRfbW9kdWxlKHNlbGYsIGZ1bGxuYW1lKToKICAgICAgICBmaWxlbmFtZSA9IHNlbGYuX21vZF90b19wYXRocyhmdWxsbmFtZSkKICAgICAgICBpZiBub3QgZmlsZW5hbWUgaW4gc2VsZi5fcGF0aHM6CiAgICAgICAgICAgIHJhaXNlIEltcG9ydEVycm9yKGZ1bGxuYW1lKQogICAgICAgIG5ld19tb2R1bGUgPSB0eXBlcy5Nb2R1bGVUeXBlKGZ1bGxuYW1lKQogICAgICAgIHN5cy5tb2R1bGVzW2Z1bGxuYW1lXT1uZXdfbW9kdWxlCiAgICAgICAgaWYgZmlsZW5hbWUuZW5kc3dpdGgoIl9faW5pdF9fLnB5Iik6CiAgICAgICAgICAgIG5ld19tb2R1bGUuX19wYXRoX18gPSBbXSAKICAgICAgICAgICAgbmV3X21vZHVsZS5fX3BhY2thZ2VfXyA9IGZ1bGxuYW1lCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbmV3X21vZHVsZS5fX3BhY2thZ2VfXyA9IGZ1bGxuYW1lLnJwYXJ0aXRpb24oJy4nKVswXQogICAgICAgIGV4ZWMoc2VsZi56ZmlsZS5vcGVuKGZpbGVuYW1lLCAncicpLnJlYWQoKSxuZXdfbW9kdWxlLl9fZGljdF9fKQogICAgICAgIG5ld19tb2R1bGUuX19maWxlX18gPSBmaWxlbmFtZQogICAgICAgIG5ld19tb2R1bGUuX19sb2FkZXJfXyA9IHNlbGYKICAgICAgICBuZXdfbW9kdWxlLl9fc3BlY19fPWpzb24uX19zcGVjX18gIyBUbyBzYXRpc2Z5IGltcG9ydGxpYi5fY29tbW9uLmdldF9wYWNrYWdlCiAgICAgICAgcmV0dXJuIG5ld19tb2R1bGUKCm1vZHVsZV96aXA9emlwZmlsZS5aaXBGaWxlKGlvLkJ5dGVzSU8oKSwidyIpCmZvciBrZXkgaW4gbW9kdWxlX2RpY3Q6CiAgICBtb2R1bGVfemlwLndyaXRlc3RyKGtleSxtb2R1bGVfZGljdFtrZXldKQoKbW9kdWxlX2ltcG9ydGVyPVppcEltcG9ydGVyKG1vZHVsZV96aXApCnN5cy5tZXRhX3BhdGguaW5zZXJ0KDAsbW9kdWxlX2ltcG9ydGVyKQoKI2Zyb20gY2VydGlmaSBpbXBvcnQgKgppbXBvcnQgY2VydGlmaQpnbG9iYWxzKCkudXBkYXRlKGNlcnRpZmkuX19kaWN0X18pCiAgICAKaWYgbW9kdWxlX2ltcG9ydGVyIGluIHN5cy5tZXRhX3BhdGg6CiAgICBzeXMubWV0YV9wYXRoLnJlbW92ZShtb2R1bGVfaW1wb3J0ZXIpCgojZm9yIGtleSBpbiBzeXMubW9kdWxlcy5jb3B5KCk6CiMgICAgaWYga2V5PT0iY2VydGlmaSIgb3Iga2V5LnN0YXJ0c3dpdGgoImNlcnRpZmkuIik6CiMgICAgICAgIGRlbCBzeXMubW9kdWxlc1trZXldCg==').decode("utf-8"),certifi_module.__dict__)
sys.modules["certifi"]=certifi_module


import types
import sys
import base64
requests_module=types.ModuleType("requests")
#setattr(requests_module,"__file__",__file__)
exec(base64.b64decode(b'aW1wb3J0IG9zCm1vZHVsZV9kaWN0PXt9Cm1vZHVsZV9kaWN0WyJyZXF1ZXN0cyIrb3Muc2VwKyJhdXRoLnB5Il09IiIiClwiXCJcIgpyZXF1ZXN0cy5hdXRoCn5+fn5+fn5+fn5+fn4KClRoaXMgbW9kdWxlIGNvbnRhaW5zIHRoZSBhdXRoZW50aWNhdGlvbiBoYW5kbGVycyBmb3IgUmVxdWVzdHMuClwiXCJcIgoKaW1wb3J0IGhhc2hsaWIKaW1wb3J0IG9zCmltcG9ydCByZQppbXBvcnQgdGhyZWFkaW5nCmltcG9ydCB0aW1lCmltcG9ydCB3YXJuaW5ncwpmcm9tIGJhc2U2NCBpbXBvcnQgYjY0ZW5jb2RlCgpmcm9tIC5faW50ZXJuYWxfdXRpbHMgaW1wb3J0IHRvX25hdGl2ZV9zdHJpbmcKZnJvbSAuY29tcGF0IGltcG9ydCBiYXNlc3RyaW5nLCBzdHIsIHVybHBhcnNlCmZyb20gLmNvb2tpZXMgaW1wb3J0IGV4dHJhY3RfY29va2llc190b19qYXIKZnJvbSAudXRpbHMgaW1wb3J0IHBhcnNlX2RpY3RfaGVhZGVyCgpDT05URU5UX1RZUEVfRk9STV9VUkxFTkNPREVEID0gXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIgpDT05URU5UX1RZUEVfTVVMVElfUEFSVCA9IFwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiCgoKZGVmIF9iYXNpY19hdXRoX3N0cih1c2VybmFtZSwgcGFzc3dvcmQpOgogICAgXCJcIlwiUmV0dXJucyBhIEJhc2ljIEF1dGggc3RyaW5nLlwiXCJcIgoKICAgICMgXCJJIHdhbnQgdXMgdG8gcHV0IGEgYmlnLW9sJyBjb21tZW50IG9uIHRvcCBvZiBpdCB0aGF0CiAgICAjIHNheXMgdGhhdCB0aGlzIGJlaGF2aW91ciBpcyBkdW1iIGJ1dCB3ZSBuZWVkIHRvIHByZXNlcnZlCiAgICAjIGl0IGJlY2F1c2UgcGVvcGxlIGFyZSByZWx5aW5nIG9uIGl0LlwiCiAgICAjICAgIC0gTHVrYXNhCiAgICAjCiAgICAjIFRoZXNlIGFyZSBoZXJlIHNvbGVseSB0byBtYWludGFpbiBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eQogICAgIyBmb3IgdGhpbmdzIGxpa2UgaW50cy4gVGhpcyB3aWxsIGJlIHJlbW92ZWQgaW4gMy4wLjAuCiAgICBpZiBub3QgaXNpbnN0YW5jZSh1c2VybmFtZSwgYmFzZXN0cmluZyk6CiAgICAgICAgd2FybmluZ3Mud2FybigKICAgICAgICAgICAgXCJOb24tc3RyaW5nIHVzZXJuYW1lcyB3aWxsIG5vIGxvbmdlciBiZSBzdXBwb3J0ZWQgaW4gUmVxdWVzdHMgXCIKICAgICAgICAgICAgXCIzLjAuMC4gUGxlYXNlIGNvbnZlcnQgdGhlIG9iamVjdCB5b3UndmUgcGFzc2VkIGluICh7IXJ9KSB0byBcIgogICAgICAgICAgICBcImEgc3RyaW5nIG9yIGJ5dGVzIG9iamVjdCBpbiB0aGUgbmVhciBmdXR1cmUgdG8gYXZvaWQgXCIKICAgICAgICAgICAgXCJwcm9ibGVtcy5cIi5mb3JtYXQodXNlcm5hbWUpLAogICAgICAgICAgICBjYXRlZ29yeT1EZXByZWNhdGlvbldhcm5pbmcsCiAgICAgICAgKQogICAgICAgIHVzZXJuYW1lID0gc3RyKHVzZXJuYW1lKQoKICAgIGlmIG5vdCBpc2luc3RhbmNlKHBhc3N3b3JkLCBiYXNlc3RyaW5nKToKICAgICAgICB3YXJuaW5ncy53YXJuKAogICAgICAgICAgICBcIk5vbi1zdHJpbmcgcGFzc3dvcmRzIHdpbGwgbm8gbG9uZ2VyIGJlIHN1cHBvcnRlZCBpbiBSZXF1ZXN0cyBcIgogICAgICAgICAgICBcIjMuMC4wLiBQbGVhc2UgY29udmVydCB0aGUgb2JqZWN0IHlvdSd2ZSBwYXNzZWQgaW4gKHshcn0pIHRvIFwiCiAgICAgICAgICAgIFwiYSBzdHJpbmcgb3IgYnl0ZXMgb2JqZWN0IGluIHRoZSBuZWFyIGZ1dHVyZSB0byBhdm9pZCBcIgogICAgICAgICAgICBcInByb2JsZW1zLlwiLmZvcm1hdCh0eXBlKHBhc3N3b3JkKSksCiAgICAgICAgICAgIGNhdGVnb3J5PURlcHJlY2F0aW9uV2FybmluZywKICAgICAgICApCiAgICAgICAgcGFzc3dvcmQgPSBzdHIocGFzc3dvcmQpCiAgICAjIC0tIEVuZCBSZW1vdmFsIC0tCgogICAgaWYgaXNpbnN0YW5jZSh1c2VybmFtZSwgc3RyKToKICAgICAgICB1c2VybmFtZSA9IHVzZXJuYW1lLmVuY29kZShcImxhdGluMVwiKQoKICAgIGlmIGlzaW5zdGFuY2UocGFzc3dvcmQsIHN0cik6CiAgICAgICAgcGFzc3dvcmQgPSBwYXNzd29yZC5lbmNvZGUoXCJsYXRpbjFcIikKCiAgICBhdXRoc3RyID0gXCJCYXNpYyBcIiArIHRvX25hdGl2ZV9zdHJpbmcoCiAgICAgICAgYjY0ZW5jb2RlKGJcIjpcIi5qb2luKCh1c2VybmFtZSwgcGFzc3dvcmQpKSkuc3RyaXAoKQogICAgKQoKICAgIHJldHVybiBhdXRoc3RyCgoKY2xhc3MgQXV0aEJhc2U6CiAgICBcIlwiXCJCYXNlIGNsYXNzIHRoYXQgYWxsIGF1dGggaW1wbGVtZW50YXRpb25zIGRlcml2ZSBmcm9tXCJcIlwiCgogICAgZGVmIF9fY2FsbF9fKHNlbGYsIHIpOgogICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IoXCJBdXRoIGhvb2tzIG11c3QgYmUgY2FsbGFibGUuXCIpCgoKY2xhc3MgSFRUUEJhc2ljQXV0aChBdXRoQmFzZSk6CiAgICBcIlwiXCJBdHRhY2hlcyBIVFRQIEJhc2ljIEF1dGhlbnRpY2F0aW9uIHRvIHRoZSBnaXZlbiBSZXF1ZXN0IG9iamVjdC5cIlwiXCIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgdXNlcm5hbWUsIHBhc3N3b3JkKToKICAgICAgICBzZWxmLnVzZXJuYW1lID0gdXNlcm5hbWUKICAgICAgICBzZWxmLnBhc3N3b3JkID0gcGFzc3dvcmQKCiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKToKICAgICAgICByZXR1cm4gYWxsKAogICAgICAgICAgICBbCiAgICAgICAgICAgICAgICBzZWxmLnVzZXJuYW1lID09IGdldGF0dHIob3RoZXIsIFwidXNlcm5hbWVcIiwgTm9uZSksCiAgICAgICAgICAgICAgICBzZWxmLnBhc3N3b3JkID09IGdldGF0dHIob3RoZXIsIFwicGFzc3dvcmRcIiwgTm9uZSksCiAgICAgICAgICAgIF0KICAgICAgICApCgogICAgZGVmIF9fbmVfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgcmV0dXJuIG5vdCBzZWxmID09IG90aGVyCgogICAgZGVmIF9fY2FsbF9fKHNlbGYsIHIpOgogICAgICAgIHIuaGVhZGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSBfYmFzaWNfYXV0aF9zdHIoc2VsZi51c2VybmFtZSwgc2VsZi5wYXNzd29yZCkKICAgICAgICByZXR1cm4gcgoKCmNsYXNzIEhUVFBQcm94eUF1dGgoSFRUUEJhc2ljQXV0aCk6CiAgICBcIlwiXCJBdHRhY2hlcyBIVFRQIFByb3h5IEF1dGhlbnRpY2F0aW9uIHRvIGEgZ2l2ZW4gUmVxdWVzdCBvYmplY3QuXCJcIlwiCgogICAgZGVmIF9fY2FsbF9fKHNlbGYsIHIpOgogICAgICAgIHIuaGVhZGVyc1tcIlByb3h5LUF1dGhvcml6YXRpb25cIl0gPSBfYmFzaWNfYXV0aF9zdHIoc2VsZi51c2VybmFtZSwgc2VsZi5wYXNzd29yZCkKICAgICAgICByZXR1cm4gcgoKCmNsYXNzIEhUVFBEaWdlc3RBdXRoKEF1dGhCYXNlKToKICAgIFwiXCJcIkF0dGFjaGVzIEhUVFAgRGlnZXN0IEF1dGhlbnRpY2F0aW9uIHRvIHRoZSBnaXZlbiBSZXF1ZXN0IG9iamVjdC5cIlwiXCIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgdXNlcm5hbWUsIHBhc3N3b3JkKToKICAgICAgICBzZWxmLnVzZXJuYW1lID0gdXNlcm5hbWUKICAgICAgICBzZWxmLnBhc3N3b3JkID0gcGFzc3dvcmQKICAgICAgICAjIEtlZXAgc3RhdGUgaW4gcGVyLXRocmVhZCBsb2NhbCBzdG9yYWdlCiAgICAgICAgc2VsZi5fdGhyZWFkX2xvY2FsID0gdGhyZWFkaW5nLmxvY2FsKCkKCiAgICBkZWYgaW5pdF9wZXJfdGhyZWFkX3N0YXRlKHNlbGYpOgogICAgICAgICMgRW5zdXJlIHN0YXRlIGlzIGluaXRpYWxpemVkIGp1c3Qgb25jZSBwZXItdGhyZWFkCiAgICAgICAgaWYgbm90IGhhc2F0dHIoc2VsZi5fdGhyZWFkX2xvY2FsLCBcImluaXRcIik6CiAgICAgICAgICAgIHNlbGYuX3RocmVhZF9sb2NhbC5pbml0ID0gVHJ1ZQogICAgICAgICAgICBzZWxmLl90aHJlYWRfbG9jYWwubGFzdF9ub25jZSA9IFwiXCIKICAgICAgICAgICAgc2VsZi5fdGhyZWFkX2xvY2FsLm5vbmNlX2NvdW50ID0gMAogICAgICAgICAgICBzZWxmLl90aHJlYWRfbG9jYWwuY2hhbCA9IHt9CiAgICAgICAgICAgIHNlbGYuX3RocmVhZF9sb2NhbC5wb3MgPSBOb25lCiAgICAgICAgICAgIHNlbGYuX3RocmVhZF9sb2NhbC5udW1fNDAxX2NhbGxzID0gTm9uZQoKICAgIGRlZiBidWlsZF9kaWdlc3RfaGVhZGVyKHNlbGYsIG1ldGhvZCwgdXJsKToKICAgICAgICBcIlwiXCIKICAgICAgICA6cnR5cGU6IHN0cgogICAgICAgIFwiXCJcIgoKICAgICAgICByZWFsbSA9IHNlbGYuX3RocmVhZF9sb2NhbC5jaGFsW1wicmVhbG1cIl0KICAgICAgICBub25jZSA9IHNlbGYuX3RocmVhZF9sb2NhbC5jaGFsW1wibm9uY2VcIl0KICAgICAgICBxb3AgPSBzZWxmLl90aHJlYWRfbG9jYWwuY2hhbC5nZXQoXCJxb3BcIikKICAgICAgICBhbGdvcml0aG0gPSBzZWxmLl90aHJlYWRfbG9jYWwuY2hhbC5nZXQoXCJhbGdvcml0aG1cIikKICAgICAgICBvcGFxdWUgPSBzZWxmLl90aHJlYWRfbG9jYWwuY2hhbC5nZXQoXCJvcGFxdWVcIikKICAgICAgICBoYXNoX3V0ZjggPSBOb25lCgogICAgICAgIGlmIGFsZ29yaXRobSBpcyBOb25lOgogICAgICAgICAgICBfYWxnb3JpdGhtID0gXCJNRDVcIgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIF9hbGdvcml0aG0gPSBhbGdvcml0aG0udXBwZXIoKQogICAgICAgICMgbGFtYmRhcyBhc3N1bWUgZGlnZXN0IG1vZHVsZXMgYXJlIGltcG9ydGVkIGF0IHRoZSB0b3AgbGV2ZWwKICAgICAgICBpZiBfYWxnb3JpdGhtID09IFwiTUQ1XCIgb3IgX2FsZ29yaXRobSA9PSBcIk1ENS1TRVNTXCI6CgogICAgICAgICAgICBkZWYgbWQ1X3V0ZjgoeCk6CiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKHgsIHN0cik6CiAgICAgICAgICAgICAgICAgICAgeCA9IHguZW5jb2RlKFwidXRmLThcIikKICAgICAgICAgICAgICAgIHJldHVybiBoYXNobGliLm1kNSh4KS5oZXhkaWdlc3QoKQoKICAgICAgICAgICAgaGFzaF91dGY4ID0gbWQ1X3V0ZjgKICAgICAgICBlbGlmIF9hbGdvcml0aG0gPT0gXCJTSEFcIjoKCiAgICAgICAgICAgIGRlZiBzaGFfdXRmOCh4KToKICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoeCwgc3RyKToKICAgICAgICAgICAgICAgICAgICB4ID0geC5lbmNvZGUoXCJ1dGYtOFwiKQogICAgICAgICAgICAgICAgcmV0dXJuIGhhc2hsaWIuc2hhMSh4KS5oZXhkaWdlc3QoKQoKICAgICAgICAgICAgaGFzaF91dGY4ID0gc2hhX3V0ZjgKICAgICAgICBlbGlmIF9hbGdvcml0aG0gPT0gXCJTSEEtMjU2XCI6CgogICAgICAgICAgICBkZWYgc2hhMjU2X3V0ZjgoeCk6CiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKHgsIHN0cik6CiAgICAgICAgICAgICAgICAgICAgeCA9IHguZW5jb2RlKFwidXRmLThcIikKICAgICAgICAgICAgICAgIHJldHVybiBoYXNobGliLnNoYTI1Nih4KS5oZXhkaWdlc3QoKQoKICAgICAgICAgICAgaGFzaF91dGY4ID0gc2hhMjU2X3V0ZjgKICAgICAgICBlbGlmIF9hbGdvcml0aG0gPT0gXCJTSEEtNTEyXCI6CgogICAgICAgICAgICBkZWYgc2hhNTEyX3V0ZjgoeCk6CiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKHgsIHN0cik6CiAgICAgICAgICAgICAgICAgICAgeCA9IHguZW5jb2RlKFwidXRmLThcIikKICAgICAgICAgICAgICAgIHJldHVybiBoYXNobGliLnNoYTUxMih4KS5oZXhkaWdlc3QoKQoKICAgICAgICAgICAgaGFzaF91dGY4ID0gc2hhNTEyX3V0ZjgKCiAgICAgICAgS0QgPSBsYW1iZGEgcywgZDogaGFzaF91dGY4KGZcIntzfTp7ZH1cIikgICMgbm9xYTpFNzMxCgogICAgICAgIGlmIGhhc2hfdXRmOCBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgICAgICAjIFhYWCBub3QgaW1wbGVtZW50ZWQgeWV0CiAgICAgICAgZW50ZGlnID0gTm9uZQogICAgICAgIHBfcGFyc2VkID0gdXJscGFyc2UodXJsKQogICAgICAgICM6IHBhdGggaXMgcmVxdWVzdC11cmkgZGVmaW5lZCBpbiBSRkMgMjYxNiB3aGljaCBzaG91bGQgbm90IGJlIGVtcHR5CiAgICAgICAgcGF0aCA9IHBfcGFyc2VkLnBhdGggb3IgXCIvXCIKICAgICAgICBpZiBwX3BhcnNlZC5xdWVyeToKICAgICAgICAgICAgcGF0aCArPSBmXCI/e3BfcGFyc2VkLnF1ZXJ5fVwiCgogICAgICAgIEExID0gZlwie3NlbGYudXNlcm5hbWV9OntyZWFsbX06e3NlbGYucGFzc3dvcmR9XCIKICAgICAgICBBMiA9IGZcInttZXRob2R9OntwYXRofVwiCgogICAgICAgIEhBMSA9IGhhc2hfdXRmOChBMSkKICAgICAgICBIQTIgPSBoYXNoX3V0ZjgoQTIpCgogICAgICAgIGlmIG5vbmNlID09IHNlbGYuX3RocmVhZF9sb2NhbC5sYXN0X25vbmNlOgogICAgICAgICAgICBzZWxmLl90aHJlYWRfbG9jYWwubm9uY2VfY291bnQgKz0gMQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuX3RocmVhZF9sb2NhbC5ub25jZV9jb3VudCA9IDEKICAgICAgICBuY3ZhbHVlID0gZlwie3NlbGYuX3RocmVhZF9sb2NhbC5ub25jZV9jb3VudDowOHh9XCIKICAgICAgICBzID0gc3RyKHNlbGYuX3RocmVhZF9sb2NhbC5ub25jZV9jb3VudCkuZW5jb2RlKFwidXRmLThcIikKICAgICAgICBzICs9IG5vbmNlLmVuY29kZShcInV0Zi04XCIpCiAgICAgICAgcyArPSB0aW1lLmN0aW1lKCkuZW5jb2RlKFwidXRmLThcIikKICAgICAgICBzICs9IG9zLnVyYW5kb20oOCkKCiAgICAgICAgY25vbmNlID0gaGFzaGxpYi5zaGExKHMpLmhleGRpZ2VzdCgpWzoxNl0KICAgICAgICBpZiBfYWxnb3JpdGhtID09IFwiTUQ1LVNFU1NcIjoKICAgICAgICAgICAgSEExID0gaGFzaF91dGY4KGZcIntIQTF9Ontub25jZX06e2Nub25jZX1cIikKCiAgICAgICAgaWYgbm90IHFvcDoKICAgICAgICAgICAgcmVzcGRpZyA9IEtEKEhBMSwgZlwie25vbmNlfTp7SEEyfVwiKQogICAgICAgIGVsaWYgcW9wID09IFwiYXV0aFwiIG9yIFwiYXV0aFwiIGluIHFvcC5zcGxpdChcIixcIik6CiAgICAgICAgICAgIG5vbmNlYml0ID0gZlwie25vbmNlfTp7bmN2YWx1ZX06e2Nub25jZX06YXV0aDp7SEEyfVwiCiAgICAgICAgICAgIHJlc3BkaWcgPSBLRChIQTEsIG5vbmNlYml0KQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgWFhYIGhhbmRsZSBhdXRoLWludC4KICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICAgICAgc2VsZi5fdGhyZWFkX2xvY2FsLmxhc3Rfbm9uY2UgPSBub25jZQoKICAgICAgICAjIFhYWCBzaG91bGQgdGhlIHBhcnRpYWwgZGlnZXN0cyBiZSBlbmNvZGVkIHRvbz8KICAgICAgICBiYXNlID0gKAogICAgICAgICAgICBmJ3VzZXJuYW1lPVwie3NlbGYudXNlcm5hbWV9XCIsIHJlYWxtPVwie3JlYWxtfVwiLCBub25jZT1cIntub25jZX1cIiwgJwogICAgICAgICAgICBmJ3VyaT1cIntwYXRofVwiLCByZXNwb25zZT1cIntyZXNwZGlnfVwiJwogICAgICAgICkKICAgICAgICBpZiBvcGFxdWU6CiAgICAgICAgICAgIGJhc2UgKz0gZicsIG9wYXF1ZT1cIntvcGFxdWV9XCInCiAgICAgICAgaWYgYWxnb3JpdGhtOgogICAgICAgICAgICBiYXNlICs9IGYnLCBhbGdvcml0aG09XCJ7YWxnb3JpdGhtfVwiJwogICAgICAgIGlmIGVudGRpZzoKICAgICAgICAgICAgYmFzZSArPSBmJywgZGlnZXN0PVwie2VudGRpZ31cIicKICAgICAgICBpZiBxb3A6CiAgICAgICAgICAgIGJhc2UgKz0gZicsIHFvcD1cImF1dGhcIiwgbmM9e25jdmFsdWV9LCBjbm9uY2U9XCJ7Y25vbmNlfVwiJwoKICAgICAgICByZXR1cm4gZlwiRGlnZXN0IHtiYXNlfVwiCgogICAgZGVmIGhhbmRsZV9yZWRpcmVjdChzZWxmLCByLCAqKmt3YXJncyk6CiAgICAgICAgXCJcIlwiUmVzZXQgbnVtXzQwMV9jYWxscyBjb3VudGVyIG9uIHJlZGlyZWN0cy5cIlwiXCIKICAgICAgICBpZiByLmlzX3JlZGlyZWN0OgogICAgICAgICAgICBzZWxmLl90aHJlYWRfbG9jYWwubnVtXzQwMV9jYWxscyA9IDEKCiAgICBkZWYgaGFuZGxlXzQwMShzZWxmLCByLCAqKmt3YXJncyk6CiAgICAgICAgXCJcIlwiCiAgICAgICAgVGFrZXMgdGhlIGdpdmVuIHJlc3BvbnNlIGFuZCB0cmllcyBkaWdlc3QtYXV0aCwgaWYgbmVlZGVkLgoKICAgICAgICA6cnR5cGU6IHJlcXVlc3RzLlJlc3BvbnNlCiAgICAgICAgXCJcIlwiCgogICAgICAgICMgSWYgcmVzcG9uc2UgaXMgbm90IDR4eCwgZG8gbm90IGF1dGgKICAgICAgICAjIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcHNmL3JlcXVlc3RzL2lzc3Vlcy8zNzcyCiAgICAgICAgaWYgbm90IDQwMCA8PSByLnN0YXR1c19jb2RlIDwgNTAwOgogICAgICAgICAgICBzZWxmLl90aHJlYWRfbG9jYWwubnVtXzQwMV9jYWxscyA9IDEKICAgICAgICAgICAgcmV0dXJuIHIKCiAgICAgICAgaWYgc2VsZi5fdGhyZWFkX2xvY2FsLnBvcyBpcyBub3QgTm9uZToKICAgICAgICAgICAgIyBSZXdpbmQgdGhlIGZpbGUgcG9zaXRpb24gaW5kaWNhdG9yIG9mIHRoZSBib2R5IHRvIHdoZXJlCiAgICAgICAgICAgICMgaXQgd2FzIHRvIHJlc2VuZCB0aGUgcmVxdWVzdC4KICAgICAgICAgICAgci5yZXF1ZXN0LmJvZHkuc2VlayhzZWxmLl90aHJlYWRfbG9jYWwucG9zKQogICAgICAgIHNfYXV0aCA9IHIuaGVhZGVycy5nZXQoXCJ3d3ctYXV0aGVudGljYXRlXCIsIFwiXCIpCgogICAgICAgIGlmIFwiZGlnZXN0XCIgaW4gc19hdXRoLmxvd2VyKCkgYW5kIHNlbGYuX3RocmVhZF9sb2NhbC5udW1fNDAxX2NhbGxzIDwgMjoKCiAgICAgICAgICAgIHNlbGYuX3RocmVhZF9sb2NhbC5udW1fNDAxX2NhbGxzICs9IDEKICAgICAgICAgICAgcGF0ID0gcmUuY29tcGlsZShyXCJkaWdlc3QgXCIsIGZsYWdzPXJlLklHTk9SRUNBU0UpCiAgICAgICAgICAgIHNlbGYuX3RocmVhZF9sb2NhbC5jaGFsID0gcGFyc2VfZGljdF9oZWFkZXIocGF0LnN1YihcIlwiLCBzX2F1dGgsIGNvdW50PTEpKQoKICAgICAgICAgICAgIyBDb25zdW1lIGNvbnRlbnQgYW5kIHJlbGVhc2UgdGhlIG9yaWdpbmFsIGNvbm5lY3Rpb24KICAgICAgICAgICAgIyB0byBhbGxvdyBvdXIgbmV3IHJlcXVlc3QgdG8gcmV1c2UgdGhlIHNhbWUgb25lLgogICAgICAgICAgICByLmNvbnRlbnQKICAgICAgICAgICAgci5jbG9zZSgpCiAgICAgICAgICAgIHByZXAgPSByLnJlcXVlc3QuY29weSgpCiAgICAgICAgICAgIGV4dHJhY3RfY29va2llc190b19qYXIocHJlcC5fY29va2llcywgci5yZXF1ZXN0LCByLnJhdykKICAgICAgICAgICAgcHJlcC5wcmVwYXJlX2Nvb2tpZXMocHJlcC5fY29va2llcykKCiAgICAgICAgICAgIHByZXAuaGVhZGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSBzZWxmLmJ1aWxkX2RpZ2VzdF9oZWFkZXIoCiAgICAgICAgICAgICAgICBwcmVwLm1ldGhvZCwgcHJlcC51cmwKICAgICAgICAgICAgKQogICAgICAgICAgICBfciA9IHIuY29ubmVjdGlvbi5zZW5kKHByZXAsICoqa3dhcmdzKQogICAgICAgICAgICBfci5oaXN0b3J5LmFwcGVuZChyKQogICAgICAgICAgICBfci5yZXF1ZXN0ID0gcHJlcAoKICAgICAgICAgICAgcmV0dXJuIF9yCgogICAgICAgIHNlbGYuX3RocmVhZF9sb2NhbC5udW1fNDAxX2NhbGxzID0gMQogICAgICAgIHJldHVybiByCgogICAgZGVmIF9fY2FsbF9fKHNlbGYsIHIpOgogICAgICAgICMgSW5pdGlhbGl6ZSBwZXItdGhyZWFkIHN0YXRlLCBpZiBuZWVkZWQKICAgICAgICBzZWxmLmluaXRfcGVyX3RocmVhZF9zdGF0ZSgpCiAgICAgICAgIyBJZiB3ZSBoYXZlIGEgc2F2ZWQgbm9uY2UsIHNraXAgdGhlIDQwMQogICAgICAgIGlmIHNlbGYuX3RocmVhZF9sb2NhbC5sYXN0X25vbmNlOgogICAgICAgICAgICByLmhlYWRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gc2VsZi5idWlsZF9kaWdlc3RfaGVhZGVyKHIubWV0aG9kLCByLnVybCkKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuX3RocmVhZF9sb2NhbC5wb3MgPSByLmJvZHkudGVsbCgpCiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOgogICAgICAgICAgICAjIEluIHRoZSBjYXNlIG9mIEhUVFBEaWdlc3RBdXRoIGJlaW5nIHJldXNlZCBhbmQgdGhlIGJvZHkgb2YKICAgICAgICAgICAgIyB0aGUgcHJldmlvdXMgcmVxdWVzdCB3YXMgYSBmaWxlLWxpa2Ugb2JqZWN0LCBwb3MgaGFzIHRoZQogICAgICAgICAgICAjIGZpbGUgcG9zaXRpb24gb2YgdGhlIHByZXZpb3VzIGJvZHkuIEVuc3VyZSBpdCdzIHNldCB0bwogICAgICAgICAgICAjIE5vbmUuCiAgICAgICAgICAgIHNlbGYuX3RocmVhZF9sb2NhbC5wb3MgPSBOb25lCiAgICAgICAgci5yZWdpc3Rlcl9ob29rKFwicmVzcG9uc2VcIiwgc2VsZi5oYW5kbGVfNDAxKQogICAgICAgIHIucmVnaXN0ZXJfaG9vayhcInJlc3BvbnNlXCIsIHNlbGYuaGFuZGxlX3JlZGlyZWN0KQogICAgICAgIHNlbGYuX3RocmVhZF9sb2NhbC5udW1fNDAxX2NhbGxzID0gMQoKICAgICAgICByZXR1cm4gcgoKICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOgogICAgICAgIHJldHVybiBhbGwoCiAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgIHNlbGYudXNlcm5hbWUgPT0gZ2V0YXR0cihvdGhlciwgXCJ1c2VybmFtZVwiLCBOb25lKSwKICAgICAgICAgICAgICAgIHNlbGYucGFzc3dvcmQgPT0gZ2V0YXR0cihvdGhlciwgXCJwYXNzd29yZFwiLCBOb25lKSwKICAgICAgICAgICAgXQogICAgICAgICkKCiAgICBkZWYgX19uZV9fKHNlbGYsIG90aGVyKToKICAgICAgICByZXR1cm4gbm90IHNlbGYgPT0gb3RoZXIKCiIiIgptb2R1bGVfZGljdFsicmVxdWVzdHMiK29zLnNlcCsic2Vzc2lvbnMucHkiXT0iIiIKXCJcIlwiCnJlcXVlc3RzLnNlc3Npb25zCn5+fn5+fn5+fn5+fn5+fn5+CgpUaGlzIG1vZHVsZSBwcm92aWRlcyBhIFNlc3Npb24gb2JqZWN0IHRvIG1hbmFnZSBhbmQgcGVyc2lzdCBzZXR0aW5ncyBhY3Jvc3MKcmVxdWVzdHMgKGNvb2tpZXMsIGF1dGgsIHByb3hpZXMpLgpcIlwiXCIKaW1wb3J0IG9zCmltcG9ydCBzeXMKaW1wb3J0IHRpbWUKZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgT3JkZXJlZERpY3QKZnJvbSBkYXRldGltZSBpbXBvcnQgdGltZWRlbHRhCgpmcm9tIC5faW50ZXJuYWxfdXRpbHMgaW1wb3J0IHRvX25hdGl2ZV9zdHJpbmcKZnJvbSAuYWRhcHRlcnMgaW1wb3J0IEhUVFBBZGFwdGVyCmZyb20gLmF1dGggaW1wb3J0IF9iYXNpY19hdXRoX3N0cgpmcm9tIC5jb21wYXQgaW1wb3J0IE1hcHBpbmcsIGNvb2tpZWxpYiwgdXJsam9pbiwgdXJscGFyc2UKZnJvbSAuY29va2llcyBpbXBvcnQgKAogICAgUmVxdWVzdHNDb29raWVKYXIsCiAgICBjb29raWVqYXJfZnJvbV9kaWN0LAogICAgZXh0cmFjdF9jb29raWVzX3RvX2phciwKICAgIG1lcmdlX2Nvb2tpZXMsCikKZnJvbSAuZXhjZXB0aW9ucyBpbXBvcnQgKAogICAgQ2h1bmtlZEVuY29kaW5nRXJyb3IsCiAgICBDb250ZW50RGVjb2RpbmdFcnJvciwKICAgIEludmFsaWRTY2hlbWEsCiAgICBUb29NYW55UmVkaXJlY3RzLAopCmZyb20gLmhvb2tzIGltcG9ydCBkZWZhdWx0X2hvb2tzLCBkaXNwYXRjaF9ob29rCgojIGZvcm1lcmx5IGRlZmluZWQgaGVyZSwgcmVleHBvc2VkIGhlcmUgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkKZnJvbSAubW9kZWxzIGltcG9ydCAoICAjIG5vcWE6IEY0MDEKICAgIERFRkFVTFRfUkVESVJFQ1RfTElNSVQsCiAgICBSRURJUkVDVF9TVEFUSSwKICAgIFByZXBhcmVkUmVxdWVzdCwKICAgIFJlcXVlc3QsCikKZnJvbSAuc3RhdHVzX2NvZGVzIGltcG9ydCBjb2Rlcwpmcm9tIC5zdHJ1Y3R1cmVzIGltcG9ydCBDYXNlSW5zZW5zaXRpdmVEaWN0CmZyb20gLnV0aWxzIGltcG9ydCAoICAjIG5vcWE6IEY0MDEKICAgIERFRkFVTFRfUE9SVFMsCiAgICBkZWZhdWx0X2hlYWRlcnMsCiAgICBnZXRfYXV0aF9mcm9tX3VybCwKICAgIGdldF9lbnZpcm9uX3Byb3hpZXMsCiAgICBnZXRfbmV0cmNfYXV0aCwKICAgIHJlcXVvdGVfdXJpLAogICAgcmVzb2x2ZV9wcm94aWVzLAogICAgcmV3aW5kX2JvZHksCiAgICBzaG91bGRfYnlwYXNzX3Byb3hpZXMsCiAgICB0b19rZXlfdmFsX2xpc3QsCikKCiMgUHJlZmVycmVkIGNsb2NrLCBiYXNlZCBvbiB3aGljaCBvbmUgaXMgbW9yZSBhY2N1cmF0ZSBvbiBhIGdpdmVuIHN5c3RlbS4KaWYgc3lzLnBsYXRmb3JtID09IFwid2luMzJcIjoKICAgIHByZWZlcnJlZF9jbG9jayA9IHRpbWUucGVyZl9jb3VudGVyCmVsc2U6CiAgICBwcmVmZXJyZWRfY2xvY2sgPSB0aW1lLnRpbWUKCgpkZWYgbWVyZ2Vfc2V0dGluZyhyZXF1ZXN0X3NldHRpbmcsIHNlc3Npb25fc2V0dGluZywgZGljdF9jbGFzcz1PcmRlcmVkRGljdCk6CiAgICBcIlwiXCJEZXRlcm1pbmVzIGFwcHJvcHJpYXRlIHNldHRpbmcgZm9yIGEgZ2l2ZW4gcmVxdWVzdCwgdGFraW5nIGludG8gYWNjb3VudAogICAgdGhlIGV4cGxpY2l0IHNldHRpbmcgb24gdGhhdCByZXF1ZXN0LCBhbmQgdGhlIHNldHRpbmcgaW4gdGhlIHNlc3Npb24uIElmIGEKICAgIHNldHRpbmcgaXMgYSBkaWN0aW9uYXJ5LCB0aGV5IHdpbGwgYmUgbWVyZ2VkIHRvZ2V0aGVyIHVzaW5nIGBkaWN0X2NsYXNzYAogICAgXCJcIlwiCgogICAgaWYgc2Vzc2lvbl9zZXR0aW5nIGlzIE5vbmU6CiAgICAgICAgcmV0dXJuIHJlcXVlc3Rfc2V0dGluZwoKICAgIGlmIHJlcXVlc3Rfc2V0dGluZyBpcyBOb25lOgogICAgICAgIHJldHVybiBzZXNzaW9uX3NldHRpbmcKCiAgICAjIEJ5cGFzcyBpZiBub3QgYSBkaWN0aW9uYXJ5IChlLmcuIHZlcmlmeSkKICAgIGlmIG5vdCAoCiAgICAgICAgaXNpbnN0YW5jZShzZXNzaW9uX3NldHRpbmcsIE1hcHBpbmcpIGFuZCBpc2luc3RhbmNlKHJlcXVlc3Rfc2V0dGluZywgTWFwcGluZykKICAgICk6CiAgICAgICAgcmV0dXJuIHJlcXVlc3Rfc2V0dGluZwoKICAgIG1lcmdlZF9zZXR0aW5nID0gZGljdF9jbGFzcyh0b19rZXlfdmFsX2xpc3Qoc2Vzc2lvbl9zZXR0aW5nKSkKICAgIG1lcmdlZF9zZXR0aW5nLnVwZGF0ZSh0b19rZXlfdmFsX2xpc3QocmVxdWVzdF9zZXR0aW5nKSkKCiAgICAjIFJlbW92ZSBrZXlzIHRoYXQgYXJlIHNldCB0byBOb25lLiBFeHRyYWN0IGtleXMgZmlyc3QgdG8gYXZvaWQgYWx0ZXJpbmcKICAgICMgdGhlIGRpY3Rpb25hcnkgZHVyaW5nIGl0ZXJhdGlvbi4KICAgIG5vbmVfa2V5cyA9IFtrIGZvciAoaywgdikgaW4gbWVyZ2VkX3NldHRpbmcuaXRlbXMoKSBpZiB2IGlzIE5vbmVdCiAgICBmb3Iga2V5IGluIG5vbmVfa2V5czoKICAgICAgICBkZWwgbWVyZ2VkX3NldHRpbmdba2V5XQoKICAgIHJldHVybiBtZXJnZWRfc2V0dGluZwoKCmRlZiBtZXJnZV9ob29rcyhyZXF1ZXN0X2hvb2tzLCBzZXNzaW9uX2hvb2tzLCBkaWN0X2NsYXNzPU9yZGVyZWREaWN0KToKICAgIFwiXCJcIlByb3Blcmx5IG1lcmdlcyBib3RoIHJlcXVlc3RzIGFuZCBzZXNzaW9uIGhvb2tzLgoKICAgIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugd2hlbiByZXF1ZXN0X2hvb2tzID09IHsncmVzcG9uc2UnOiBbXX0sIHRoZQogICAgbWVyZ2UgYnJlYWtzIFNlc3Npb24gaG9va3MgZW50aXJlbHkuCiAgICBcIlwiXCIKICAgIGlmIHNlc3Npb25faG9va3MgaXMgTm9uZSBvciBzZXNzaW9uX2hvb2tzLmdldChcInJlc3BvbnNlXCIpID09IFtdOgogICAgICAgIHJldHVybiByZXF1ZXN0X2hvb2tzCgogICAgaWYgcmVxdWVzdF9ob29rcyBpcyBOb25lIG9yIHJlcXVlc3RfaG9va3MuZ2V0KFwicmVzcG9uc2VcIikgPT0gW106CiAgICAgICAgcmV0dXJuIHNlc3Npb25faG9va3MKCiAgICByZXR1cm4gbWVyZ2Vfc2V0dGluZyhyZXF1ZXN0X2hvb2tzLCBzZXNzaW9uX2hvb2tzLCBkaWN0X2NsYXNzKQoKCmNsYXNzIFNlc3Npb25SZWRpcmVjdE1peGluOgogICAgZGVmIGdldF9yZWRpcmVjdF90YXJnZXQoc2VsZiwgcmVzcCk6CiAgICAgICAgXCJcIlwiUmVjZWl2ZXMgYSBSZXNwb25zZS4gUmV0dXJucyBhIHJlZGlyZWN0IFVSSSBvciBgYE5vbmVgYFwiXCJcIgogICAgICAgICMgRHVlIHRvIHRoZSBuYXR1cmUgb2YgaG93IHJlcXVlc3RzIHByb2Nlc3NlcyByZWRpcmVjdHMgdGhpcyBtZXRob2Qgd2lsbAogICAgICAgICMgYmUgY2FsbGVkIGF0IGxlYXN0IG9uY2UgdXBvbiB0aGUgb3JpZ2luYWwgcmVzcG9uc2UgYW5kIGF0IGxlYXN0IHR3aWNlCiAgICAgICAgIyBvbiBlYWNoIHN1YnNlcXVlbnQgcmVkaXJlY3QgcmVzcG9uc2UgKGlmIGFueSkuCiAgICAgICAgIyBJZiBhIGN1c3RvbSBtaXhpbiBpcyB1c2VkIHRvIGhhbmRsZSB0aGlzIGxvZ2ljLCBpdCBtYXkgYmUgYWR2YW50YWdlb3VzCiAgICAgICAgIyB0byBjYWNoZSB0aGUgcmVkaXJlY3QgbG9jYXRpb24gb250byB0aGUgcmVzcG9uc2Ugb2JqZWN0IGFzIGEgcHJpdmF0ZQogICAgICAgICMgYXR0cmlidXRlLgogICAgICAgIGlmIHJlc3AuaXNfcmVkaXJlY3Q6CiAgICAgICAgICAgIGxvY2F0aW9uID0gcmVzcC5oZWFkZXJzW1wibG9jYXRpb25cIl0KICAgICAgICAgICAgIyBDdXJyZW50bHkgdGhlIHVuZGVybHlpbmcgaHR0cCBtb2R1bGUgb24gcHkzIGRlY29kZSBoZWFkZXJzCiAgICAgICAgICAgICMgaW4gbGF0aW4xLCBidXQgZW1waXJpY2FsIGV2aWRlbmNlIHN1Z2dlc3RzIHRoYXQgbGF0aW4xIGlzIHZlcnkKICAgICAgICAgICAgIyByYXJlbHkgdXNlZCB3aXRoIG5vbi1BU0NJSSBjaGFyYWN0ZXJzIGluIEhUVFAgaGVhZGVycy4KICAgICAgICAgICAgIyBJdCBpcyBtb3JlIGxpa2VseSB0byBnZXQgVVRGOCBoZWFkZXIgcmF0aGVyIHRoYW4gbGF0aW4xLgogICAgICAgICAgICAjIFRoaXMgY2F1c2VzIGluY29ycmVjdCBoYW5kbGluZyBvZiBVVEY4IGVuY29kZWQgbG9jYXRpb24gaGVhZGVycy4KICAgICAgICAgICAgIyBUbyBzb2x2ZSB0aGlzLCB3ZSByZS1lbmNvZGUgdGhlIGxvY2F0aW9uIGluIGxhdGluMS4KICAgICAgICAgICAgbG9jYXRpb24gPSBsb2NhdGlvbi5lbmNvZGUoXCJsYXRpbjFcIikKICAgICAgICAgICAgcmV0dXJuIHRvX25hdGl2ZV9zdHJpbmcobG9jYXRpb24sIFwidXRmOFwiKQogICAgICAgIHJldHVybiBOb25lCgogICAgZGVmIHNob3VsZF9zdHJpcF9hdXRoKHNlbGYsIG9sZF91cmwsIG5ld191cmwpOgogICAgICAgIFwiXCJcIkRlY2lkZSB3aGV0aGVyIEF1dGhvcml6YXRpb24gaGVhZGVyIHNob3VsZCBiZSByZW1vdmVkIHdoZW4gcmVkaXJlY3RpbmdcIlwiXCIKICAgICAgICBvbGRfcGFyc2VkID0gdXJscGFyc2Uob2xkX3VybCkKICAgICAgICBuZXdfcGFyc2VkID0gdXJscGFyc2UobmV3X3VybCkKICAgICAgICBpZiBvbGRfcGFyc2VkLmhvc3RuYW1lICE9IG5ld19wYXJzZWQuaG9zdG5hbWU6CiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgIyBTcGVjaWFsIGNhc2U6IGFsbG93IGh0dHAgLT4gaHR0cHMgcmVkaXJlY3Qgd2hlbiB1c2luZyB0aGUgc3RhbmRhcmQKICAgICAgICAjIHBvcnRzLiBUaGlzIGlzbid0IHNwZWNpZmllZCBieSBSRkMgNzIzNSwgYnV0IGlzIGtlcHQgdG8gYXZvaWQKICAgICAgICAjIGJyZWFraW5nIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGggb2xkZXIgdmVyc2lvbnMgb2YgcmVxdWVzdHMKICAgICAgICAjIHRoYXQgYWxsb3dlZCBhbnkgcmVkaXJlY3RzIG9uIHRoZSBzYW1lIGhvc3QuCiAgICAgICAgaWYgKAogICAgICAgICAgICBvbGRfcGFyc2VkLnNjaGVtZSA9PSBcImh0dHBcIgogICAgICAgICAgICBhbmQgb2xkX3BhcnNlZC5wb3J0IGluICg4MCwgTm9uZSkKICAgICAgICAgICAgYW5kIG5ld19wYXJzZWQuc2NoZW1lID09IFwiaHR0cHNcIgogICAgICAgICAgICBhbmQgbmV3X3BhcnNlZC5wb3J0IGluICg0NDMsIE5vbmUpCiAgICAgICAgKToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgICAgICMgSGFuZGxlIGRlZmF1bHQgcG9ydCB1c2FnZSBjb3JyZXNwb25kaW5nIHRvIHNjaGVtZS4KICAgICAgICBjaGFuZ2VkX3BvcnQgPSBvbGRfcGFyc2VkLnBvcnQgIT0gbmV3X3BhcnNlZC5wb3J0CiAgICAgICAgY2hhbmdlZF9zY2hlbWUgPSBvbGRfcGFyc2VkLnNjaGVtZSAhPSBuZXdfcGFyc2VkLnNjaGVtZQogICAgICAgIGRlZmF1bHRfcG9ydCA9IChERUZBVUxUX1BPUlRTLmdldChvbGRfcGFyc2VkLnNjaGVtZSwgTm9uZSksIE5vbmUpCiAgICAgICAgaWYgKAogICAgICAgICAgICBub3QgY2hhbmdlZF9zY2hlbWUKICAgICAgICAgICAgYW5kIG9sZF9wYXJzZWQucG9ydCBpbiBkZWZhdWx0X3BvcnQKICAgICAgICAgICAgYW5kIG5ld19wYXJzZWQucG9ydCBpbiBkZWZhdWx0X3BvcnQKICAgICAgICApOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgIyBTdGFuZGFyZCBjYXNlOiByb290IFVSSSBtdXN0IG1hdGNoCiAgICAgICAgcmV0dXJuIGNoYW5nZWRfcG9ydCBvciBjaGFuZ2VkX3NjaGVtZQoKICAgIGRlZiByZXNvbHZlX3JlZGlyZWN0cygKICAgICAgICBzZWxmLAogICAgICAgIHJlc3AsCiAgICAgICAgcmVxLAogICAgICAgIHN0cmVhbT1GYWxzZSwKICAgICAgICB0aW1lb3V0PU5vbmUsCiAgICAgICAgdmVyaWZ5PVRydWUsCiAgICAgICAgY2VydD1Ob25lLAogICAgICAgIHByb3hpZXM9Tm9uZSwKICAgICAgICB5aWVsZF9yZXF1ZXN0cz1GYWxzZSwKICAgICAgICAqKmFkYXB0ZXJfa3dhcmdzLAogICAgKToKICAgICAgICBcIlwiXCJSZWNlaXZlcyBhIFJlc3BvbnNlLiBSZXR1cm5zIGEgZ2VuZXJhdG9yIG9mIFJlc3BvbnNlcyBvciBSZXF1ZXN0cy5cIlwiXCIKCiAgICAgICAgaGlzdCA9IFtdICAjIGtlZXAgdHJhY2sgb2YgaGlzdG9yeQoKICAgICAgICB1cmwgPSBzZWxmLmdldF9yZWRpcmVjdF90YXJnZXQocmVzcCkKICAgICAgICBwcmV2aW91c19mcmFnbWVudCA9IHVybHBhcnNlKHJlcS51cmwpLmZyYWdtZW50CiAgICAgICAgd2hpbGUgdXJsOgogICAgICAgICAgICBwcmVwYXJlZF9yZXF1ZXN0ID0gcmVxLmNvcHkoKQoKICAgICAgICAgICAgIyBVcGRhdGUgaGlzdG9yeSBhbmQga2VlcCB0cmFjayBvZiByZWRpcmVjdHMuCiAgICAgICAgICAgICMgcmVzcC5oaXN0b3J5IG11c3QgaWdub3JlIHRoZSBvcmlnaW5hbCByZXF1ZXN0IGluIHRoaXMgbG9vcAogICAgICAgICAgICBoaXN0LmFwcGVuZChyZXNwKQogICAgICAgICAgICByZXNwLmhpc3RvcnkgPSBoaXN0WzE6XQoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcmVzcC5jb250ZW50ICAjIENvbnN1bWUgc29ja2V0IHNvIGl0IGNhbiBiZSByZWxlYXNlZAogICAgICAgICAgICBleGNlcHQgKENodW5rZWRFbmNvZGluZ0Vycm9yLCBDb250ZW50RGVjb2RpbmdFcnJvciwgUnVudGltZUVycm9yKToKICAgICAgICAgICAgICAgIHJlc3AucmF3LnJlYWQoZGVjb2RlX2NvbnRlbnQ9RmFsc2UpCgogICAgICAgICAgICBpZiBsZW4ocmVzcC5oaXN0b3J5KSA+PSBzZWxmLm1heF9yZWRpcmVjdHM6CiAgICAgICAgICAgICAgICByYWlzZSBUb29NYW55UmVkaXJlY3RzKAogICAgICAgICAgICAgICAgICAgIGZcIkV4Y2VlZGVkIHtzZWxmLm1heF9yZWRpcmVjdHN9IHJlZGlyZWN0cy5cIiwgcmVzcG9uc2U9cmVzcAogICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgIyBSZWxlYXNlIHRoZSBjb25uZWN0aW9uIGJhY2sgaW50byB0aGUgcG9vbC4KICAgICAgICAgICAgcmVzcC5jbG9zZSgpCgogICAgICAgICAgICAjIEhhbmRsZSByZWRpcmVjdGlvbiB3aXRob3V0IHNjaGVtZSAoc2VlOiBSRkMgMTgwOCBTZWN0aW9uIDQpCiAgICAgICAgICAgIGlmIHVybC5zdGFydHN3aXRoKFwiLy9cIik6CiAgICAgICAgICAgICAgICBwYXJzZWRfcnVybCA9IHVybHBhcnNlKHJlc3AudXJsKQogICAgICAgICAgICAgICAgdXJsID0gXCI6XCIuam9pbihbdG9fbmF0aXZlX3N0cmluZyhwYXJzZWRfcnVybC5zY2hlbWUpLCB1cmxdKQoKICAgICAgICAgICAgIyBOb3JtYWxpemUgdXJsIGNhc2UgYW5kIGF0dGFjaCBwcmV2aW91cyBmcmFnbWVudCBpZiBuZWVkZWQgKFJGQyA3MjMxIDcuMS4yKQogICAgICAgICAgICBwYXJzZWQgPSB1cmxwYXJzZSh1cmwpCiAgICAgICAgICAgIGlmIHBhcnNlZC5mcmFnbWVudCA9PSBcIlwiIGFuZCBwcmV2aW91c19mcmFnbWVudDoKICAgICAgICAgICAgICAgIHBhcnNlZCA9IHBhcnNlZC5fcmVwbGFjZShmcmFnbWVudD1wcmV2aW91c19mcmFnbWVudCkKICAgICAgICAgICAgZWxpZiBwYXJzZWQuZnJhZ21lbnQ6CiAgICAgICAgICAgICAgICBwcmV2aW91c19mcmFnbWVudCA9IHBhcnNlZC5mcmFnbWVudAogICAgICAgICAgICB1cmwgPSBwYXJzZWQuZ2V0dXJsKCkKCiAgICAgICAgICAgICMgRmFjaWxpdGF0ZSByZWxhdGl2ZSAnbG9jYXRpb24nIGhlYWRlcnMsIGFzIGFsbG93ZWQgYnkgUkZDIDcyMzEuCiAgICAgICAgICAgICMgKGUuZy4gJy9wYXRoL3RvL3Jlc291cmNlJyBpbnN0ZWFkIG9mICdodHRwOi8vZG9tYWluLnRsZC9wYXRoL3RvL3Jlc291cmNlJykKICAgICAgICAgICAgIyBDb21wbGlhbnQgd2l0aCBSRkMzOTg2LCB3ZSBwZXJjZW50IGVuY29kZSB0aGUgdXJsLgogICAgICAgICAgICBpZiBub3QgcGFyc2VkLm5ldGxvYzoKICAgICAgICAgICAgICAgIHVybCA9IHVybGpvaW4ocmVzcC51cmwsIHJlcXVvdGVfdXJpKHVybCkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB1cmwgPSByZXF1b3RlX3VyaSh1cmwpCgogICAgICAgICAgICBwcmVwYXJlZF9yZXF1ZXN0LnVybCA9IHRvX25hdGl2ZV9zdHJpbmcodXJsKQoKICAgICAgICAgICAgc2VsZi5yZWJ1aWxkX21ldGhvZChwcmVwYXJlZF9yZXF1ZXN0LCByZXNwKQoKICAgICAgICAgICAgIyBodHRwczovL2dpdGh1Yi5jb20vcHNmL3JlcXVlc3RzL2lzc3Vlcy8xMDg0CiAgICAgICAgICAgIGlmIHJlc3Auc3RhdHVzX2NvZGUgbm90IGluICgKICAgICAgICAgICAgICAgIGNvZGVzLnRlbXBvcmFyeV9yZWRpcmVjdCwKICAgICAgICAgICAgICAgIGNvZGVzLnBlcm1hbmVudF9yZWRpcmVjdCwKICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgICMgaHR0cHM6Ly9naXRodWIuY29tL3BzZi9yZXF1ZXN0cy9pc3N1ZXMvMzQ5MAogICAgICAgICAgICAgICAgcHVyZ2VkX2hlYWRlcnMgPSAoXCJDb250ZW50LUxlbmd0aFwiLCBcIkNvbnRlbnQtVHlwZVwiLCBcIlRyYW5zZmVyLUVuY29kaW5nXCIpCiAgICAgICAgICAgICAgICBmb3IgaGVhZGVyIGluIHB1cmdlZF9oZWFkZXJzOgogICAgICAgICAgICAgICAgICAgIHByZXBhcmVkX3JlcXVlc3QuaGVhZGVycy5wb3AoaGVhZGVyLCBOb25lKQogICAgICAgICAgICAgICAgcHJlcGFyZWRfcmVxdWVzdC5ib2R5ID0gTm9uZQoKICAgICAgICAgICAgaGVhZGVycyA9IHByZXBhcmVkX3JlcXVlc3QuaGVhZGVycwogICAgICAgICAgICBoZWFkZXJzLnBvcChcIkNvb2tpZVwiLCBOb25lKQoKICAgICAgICAgICAgIyBFeHRyYWN0IGFueSBjb29raWVzIHNlbnQgb24gdGhlIHJlc3BvbnNlIHRvIHRoZSBjb29raWVqYXIKICAgICAgICAgICAgIyBpbiB0aGUgbmV3IHJlcXVlc3QuIEJlY2F1c2Ugd2UndmUgbXV0YXRlZCBvdXIgY29waWVkIHByZXBhcmVkCiAgICAgICAgICAgICMgcmVxdWVzdCwgdXNlIHRoZSBvbGQgb25lIHRoYXQgd2UgaGF2ZW4ndCB5ZXQgdG91Y2hlZC4KICAgICAgICAgICAgZXh0cmFjdF9jb29raWVzX3RvX2phcihwcmVwYXJlZF9yZXF1ZXN0Ll9jb29raWVzLCByZXEsIHJlc3AucmF3KQogICAgICAgICAgICBtZXJnZV9jb29raWVzKHByZXBhcmVkX3JlcXVlc3QuX2Nvb2tpZXMsIHNlbGYuY29va2llcykKICAgICAgICAgICAgcHJlcGFyZWRfcmVxdWVzdC5wcmVwYXJlX2Nvb2tpZXMocHJlcGFyZWRfcmVxdWVzdC5fY29va2llcykKCiAgICAgICAgICAgICMgUmVidWlsZCBhdXRoIGFuZCBwcm94eSBpbmZvcm1hdGlvbi4KICAgICAgICAgICAgcHJveGllcyA9IHNlbGYucmVidWlsZF9wcm94aWVzKHByZXBhcmVkX3JlcXVlc3QsIHByb3hpZXMpCiAgICAgICAgICAgIHNlbGYucmVidWlsZF9hdXRoKHByZXBhcmVkX3JlcXVlc3QsIHJlc3ApCgogICAgICAgICAgICAjIEEgZmFpbGVkIHRlbGwoKSBzZXRzIGBfYm9keV9wb3NpdGlvbmAgdG8gYG9iamVjdCgpYC4gVGhpcyBub24tTm9uZQogICAgICAgICAgICAjIHZhbHVlIGVuc3VyZXMgYHJld2luZGFibGVgIHdpbGwgYmUgVHJ1ZSwgYWxsb3dpbmcgdXMgdG8gcmFpc2UgYW4KICAgICAgICAgICAgIyBVbnJld2luZGFibGVCb2R5RXJyb3IsIGluc3RlYWQgb2YgaGFuZ2luZyB0aGUgY29ubmVjdGlvbi4KICAgICAgICAgICAgcmV3aW5kYWJsZSA9IHByZXBhcmVkX3JlcXVlc3QuX2JvZHlfcG9zaXRpb24gaXMgbm90IE5vbmUgYW5kICgKICAgICAgICAgICAgICAgIFwiQ29udGVudC1MZW5ndGhcIiBpbiBoZWFkZXJzIG9yIFwiVHJhbnNmZXItRW5jb2RpbmdcIiBpbiBoZWFkZXJzCiAgICAgICAgICAgICkKCiAgICAgICAgICAgICMgQXR0ZW1wdCB0byByZXdpbmQgY29uc3VtZWQgZmlsZS1saWtlIG9iamVjdC4KICAgICAgICAgICAgaWYgcmV3aW5kYWJsZToKICAgICAgICAgICAgICAgIHJld2luZF9ib2R5KHByZXBhcmVkX3JlcXVlc3QpCgogICAgICAgICAgICAjIE92ZXJyaWRlIHRoZSBvcmlnaW5hbCByZXF1ZXN0LgogICAgICAgICAgICByZXEgPSBwcmVwYXJlZF9yZXF1ZXN0CgogICAgICAgICAgICBpZiB5aWVsZF9yZXF1ZXN0czoKICAgICAgICAgICAgICAgIHlpZWxkIHJlcQogICAgICAgICAgICBlbHNlOgoKICAgICAgICAgICAgICAgIHJlc3AgPSBzZWxmLnNlbmQoCiAgICAgICAgICAgICAgICAgICAgcmVxLAogICAgICAgICAgICAgICAgICAgIHN0cmVhbT1zdHJlYW0sCiAgICAgICAgICAgICAgICAgICAgdGltZW91dD10aW1lb3V0LAogICAgICAgICAgICAgICAgICAgIHZlcmlmeT12ZXJpZnksCiAgICAgICAgICAgICAgICAgICAgY2VydD1jZXJ0LAogICAgICAgICAgICAgICAgICAgIHByb3hpZXM9cHJveGllcywKICAgICAgICAgICAgICAgICAgICBhbGxvd19yZWRpcmVjdHM9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgKiphZGFwdGVyX2t3YXJncywKICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICAgICBleHRyYWN0X2Nvb2tpZXNfdG9famFyKHNlbGYuY29va2llcywgcHJlcGFyZWRfcmVxdWVzdCwgcmVzcC5yYXcpCgogICAgICAgICAgICAgICAgIyBleHRyYWN0IHJlZGlyZWN0IHVybCwgaWYgYW55LCBmb3IgdGhlIG5leHQgbG9vcAogICAgICAgICAgICAgICAgdXJsID0gc2VsZi5nZXRfcmVkaXJlY3RfdGFyZ2V0KHJlc3ApCiAgICAgICAgICAgICAgICB5aWVsZCByZXNwCgogICAgZGVmIHJlYnVpbGRfYXV0aChzZWxmLCBwcmVwYXJlZF9yZXF1ZXN0LCByZXNwb25zZSk6CiAgICAgICAgXCJcIlwiV2hlbiBiZWluZyByZWRpcmVjdGVkIHdlIG1heSB3YW50IHRvIHN0cmlwIGF1dGhlbnRpY2F0aW9uIGZyb20gdGhlCiAgICAgICAgcmVxdWVzdCB0byBhdm9pZCBsZWFraW5nIGNyZWRlbnRpYWxzLiBUaGlzIG1ldGhvZCBpbnRlbGxpZ2VudGx5IHJlbW92ZXMKICAgICAgICBhbmQgcmVhcHBsaWVzIGF1dGhlbnRpY2F0aW9uIHdoZXJlIHBvc3NpYmxlIHRvIGF2b2lkIGNyZWRlbnRpYWwgbG9zcy4KICAgICAgICBcIlwiXCIKICAgICAgICBoZWFkZXJzID0gcHJlcGFyZWRfcmVxdWVzdC5oZWFkZXJzCiAgICAgICAgdXJsID0gcHJlcGFyZWRfcmVxdWVzdC51cmwKCiAgICAgICAgaWYgXCJBdXRob3JpemF0aW9uXCIgaW4gaGVhZGVycyBhbmQgc2VsZi5zaG91bGRfc3RyaXBfYXV0aCgKICAgICAgICAgICAgcmVzcG9uc2UucmVxdWVzdC51cmwsIHVybAogICAgICAgICk6CiAgICAgICAgICAgICMgSWYgd2UgZ2V0IHJlZGlyZWN0ZWQgdG8gYSBuZXcgaG9zdCwgd2Ugc2hvdWxkIHN0cmlwIG91dCBhbnkKICAgICAgICAgICAgIyBhdXRoZW50aWNhdGlvbiBoZWFkZXJzLgogICAgICAgICAgICBkZWwgaGVhZGVyc1tcIkF1dGhvcml6YXRpb25cIl0KCiAgICAgICAgIyAubmV0cmMgbWlnaHQgaGF2ZSBtb3JlIGF1dGggZm9yIHVzIG9uIG91ciBuZXcgaG9zdC4KICAgICAgICBuZXdfYXV0aCA9IGdldF9uZXRyY19hdXRoKHVybCkgaWYgc2VsZi50cnVzdF9lbnYgZWxzZSBOb25lCiAgICAgICAgaWYgbmV3X2F1dGggaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHByZXBhcmVkX3JlcXVlc3QucHJlcGFyZV9hdXRoKG5ld19hdXRoKQoKICAgIGRlZiByZWJ1aWxkX3Byb3hpZXMoc2VsZiwgcHJlcGFyZWRfcmVxdWVzdCwgcHJveGllcyk6CiAgICAgICAgXCJcIlwiVGhpcyBtZXRob2QgcmUtZXZhbHVhdGVzIHRoZSBwcm94eSBjb25maWd1cmF0aW9uIGJ5IGNvbnNpZGVyaW5nIHRoZQogICAgICAgIGVudmlyb25tZW50IHZhcmlhYmxlcy4gSWYgd2UgYXJlIHJlZGlyZWN0ZWQgdG8gYSBVUkwgY292ZXJlZCBieQogICAgICAgIE5PX1BST1hZLCB3ZSBzdHJpcCB0aGUgcHJveHkgY29uZmlndXJhdGlvbi4gT3RoZXJ3aXNlLCB3ZSBzZXQgbWlzc2luZwogICAgICAgIHByb3h5IGtleXMgZm9yIHRoaXMgVVJMIChpbiBjYXNlIHRoZXkgd2VyZSBzdHJpcHBlZCBieSBhIHByZXZpb3VzCiAgICAgICAgcmVkaXJlY3QpLgoKICAgICAgICBUaGlzIG1ldGhvZCBhbHNvIHJlcGxhY2VzIHRoZSBQcm94eS1BdXRob3JpemF0aW9uIGhlYWRlciB3aGVyZQogICAgICAgIG5lY2Vzc2FyeS4KCiAgICAgICAgOnJ0eXBlOiBkaWN0CiAgICAgICAgXCJcIlwiCiAgICAgICAgaGVhZGVycyA9IHByZXBhcmVkX3JlcXVlc3QuaGVhZGVycwogICAgICAgIHNjaGVtZSA9IHVybHBhcnNlKHByZXBhcmVkX3JlcXVlc3QudXJsKS5zY2hlbWUKICAgICAgICBuZXdfcHJveGllcyA9IHJlc29sdmVfcHJveGllcyhwcmVwYXJlZF9yZXF1ZXN0LCBwcm94aWVzLCBzZWxmLnRydXN0X2VudikKCiAgICAgICAgaWYgXCJQcm94eS1BdXRob3JpemF0aW9uXCIgaW4gaGVhZGVyczoKICAgICAgICAgICAgZGVsIGhlYWRlcnNbXCJQcm94eS1BdXRob3JpemF0aW9uXCJdCgogICAgICAgIHRyeToKICAgICAgICAgICAgdXNlcm5hbWUsIHBhc3N3b3JkID0gZ2V0X2F1dGhfZnJvbV91cmwobmV3X3Byb3hpZXNbc2NoZW1lXSkKICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgIHVzZXJuYW1lLCBwYXNzd29yZCA9IE5vbmUsIE5vbmUKCiAgICAgICAgaWYgdXNlcm5hbWUgYW5kIHBhc3N3b3JkOgogICAgICAgICAgICBoZWFkZXJzW1wiUHJveHktQXV0aG9yaXphdGlvblwiXSA9IF9iYXNpY19hdXRoX3N0cih1c2VybmFtZSwgcGFzc3dvcmQpCgogICAgICAgIHJldHVybiBuZXdfcHJveGllcwoKICAgIGRlZiByZWJ1aWxkX21ldGhvZChzZWxmLCBwcmVwYXJlZF9yZXF1ZXN0LCByZXNwb25zZSk6CiAgICAgICAgXCJcIlwiV2hlbiBiZWluZyByZWRpcmVjdGVkIHdlIG1heSB3YW50IHRvIGNoYW5nZSB0aGUgbWV0aG9kIG9mIHRoZSByZXF1ZXN0CiAgICAgICAgYmFzZWQgb24gY2VydGFpbiBzcGVjcyBvciBicm93c2VyIGJlaGF2aW9yLgogICAgICAgIFwiXCJcIgogICAgICAgIG1ldGhvZCA9IHByZXBhcmVkX3JlcXVlc3QubWV0aG9kCgogICAgICAgICMgaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzcyMzEjc2VjdGlvbi02LjQuNAogICAgICAgIGlmIHJlc3BvbnNlLnN0YXR1c19jb2RlID09IGNvZGVzLnNlZV9vdGhlciBhbmQgbWV0aG9kICE9IFwiSEVBRFwiOgogICAgICAgICAgICBtZXRob2QgPSBcIkdFVFwiCgogICAgICAgICMgRG8gd2hhdCB0aGUgYnJvd3NlcnMgZG8sIGRlc3BpdGUgc3RhbmRhcmRzLi4uCiAgICAgICAgIyBGaXJzdCwgdHVybiAzMDJzIGludG8gR0VUcy4KICAgICAgICBpZiByZXNwb25zZS5zdGF0dXNfY29kZSA9PSBjb2Rlcy5mb3VuZCBhbmQgbWV0aG9kICE9IFwiSEVBRFwiOgogICAgICAgICAgICBtZXRob2QgPSBcIkdFVFwiCgogICAgICAgICMgU2Vjb25kLCBpZiBhIFBPU1QgaXMgcmVzcG9uZGVkIHRvIHdpdGggYSAzMDEsIHR1cm4gaXQgaW50byBhIEdFVC4KICAgICAgICAjIFRoaXMgYml6YXJyZSBiZWhhdmlvdXIgaXMgZXhwbGFpbmVkIGluIElzc3VlIDE3MDQuCiAgICAgICAgaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gY29kZXMubW92ZWQgYW5kIG1ldGhvZCA9PSBcIlBPU1RcIjoKICAgICAgICAgICAgbWV0aG9kID0gXCJHRVRcIgoKICAgICAgICBwcmVwYXJlZF9yZXF1ZXN0Lm1ldGhvZCA9IG1ldGhvZAoKCmNsYXNzIFNlc3Npb24oU2Vzc2lvblJlZGlyZWN0TWl4aW4pOgogICAgXCJcIlwiQSBSZXF1ZXN0cyBzZXNzaW9uLgoKICAgIFByb3ZpZGVzIGNvb2tpZSBwZXJzaXN0ZW5jZSwgY29ubmVjdGlvbi1wb29saW5nLCBhbmQgY29uZmlndXJhdGlvbi4KCiAgICBCYXNpYyBVc2FnZTo6CgogICAgICA+Pj4gaW1wb3J0IHJlcXVlc3RzCiAgICAgID4+PiBzID0gcmVxdWVzdHMuU2Vzc2lvbigpCiAgICAgID4+PiBzLmdldCgnaHR0cHM6Ly9odHRwYmluLm9yZy9nZXQnKQogICAgICA8UmVzcG9uc2UgWzIwMF0+CgogICAgT3IgYXMgYSBjb250ZXh0IG1hbmFnZXI6OgoKICAgICAgPj4+IHdpdGggcmVxdWVzdHMuU2Vzc2lvbigpIGFzIHM6CiAgICAgIC4uLiAgICAgcy5nZXQoJ2h0dHBzOi8vaHR0cGJpbi5vcmcvZ2V0JykKICAgICAgPFJlc3BvbnNlIFsyMDBdPgogICAgXCJcIlwiCgogICAgX19hdHRyc19fID0gWwogICAgICAgIFwiaGVhZGVyc1wiLAogICAgICAgIFwiY29va2llc1wiLAogICAgICAgIFwiYXV0aFwiLAogICAgICAgIFwicHJveGllc1wiLAogICAgICAgIFwiaG9va3NcIiwKICAgICAgICBcInBhcmFtc1wiLAogICAgICAgIFwidmVyaWZ5XCIsCiAgICAgICAgXCJjZXJ0XCIsCiAgICAgICAgXCJhZGFwdGVyc1wiLAogICAgICAgIFwic3RyZWFtXCIsCiAgICAgICAgXCJ0cnVzdF9lbnZcIiwKICAgICAgICBcIm1heF9yZWRpcmVjdHNcIiwKICAgIF0KCiAgICBkZWYgX19pbml0X18oc2VsZik6CgogICAgICAgICM6IEEgY2FzZS1pbnNlbnNpdGl2ZSBkaWN0aW9uYXJ5IG9mIGhlYWRlcnMgdG8gYmUgc2VudCBvbiBlYWNoCiAgICAgICAgIzogOmNsYXNzOmBSZXF1ZXN0IDxSZXF1ZXN0PmAgc2VudCBmcm9tIHRoaXMKICAgICAgICAjOiA6Y2xhc3M6YFNlc3Npb24gPFNlc3Npb24+YC4KICAgICAgICBzZWxmLmhlYWRlcnMgPSBkZWZhdWx0X2hlYWRlcnMoKQoKICAgICAgICAjOiBEZWZhdWx0IEF1dGhlbnRpY2F0aW9uIHR1cGxlIG9yIG9iamVjdCB0byBhdHRhY2ggdG8KICAgICAgICAjOiA6Y2xhc3M6YFJlcXVlc3QgPFJlcXVlc3Q+YC4KICAgICAgICBzZWxmLmF1dGggPSBOb25lCgogICAgICAgICM6IERpY3Rpb25hcnkgbWFwcGluZyBwcm90b2NvbCBvciBwcm90b2NvbCBhbmQgaG9zdCB0byB0aGUgVVJMIG9mIHRoZSBwcm94eQogICAgICAgICM6IChlLmcuIHsnaHR0cCc6ICdmb28uYmFyOjMxMjgnLCAnaHR0cDovL2hvc3QubmFtZSc6ICdmb28uYmFyOjQwMTInfSkgdG8KICAgICAgICAjOiBiZSB1c2VkIG9uIGVhY2ggOmNsYXNzOmBSZXF1ZXN0IDxSZXF1ZXN0PmAuCiAgICAgICAgc2VsZi5wcm94aWVzID0ge30KCiAgICAgICAgIzogRXZlbnQtaGFuZGxpbmcgaG9va3MuCiAgICAgICAgc2VsZi5ob29rcyA9IGRlZmF1bHRfaG9va3MoKQoKICAgICAgICAjOiBEaWN0aW9uYXJ5IG9mIHF1ZXJ5c3RyaW5nIGRhdGEgdG8gYXR0YWNoIHRvIGVhY2gKICAgICAgICAjOiA6Y2xhc3M6YFJlcXVlc3QgPFJlcXVlc3Q+YC4gVGhlIGRpY3Rpb25hcnkgdmFsdWVzIG1heSBiZSBsaXN0cyBmb3IKICAgICAgICAjOiByZXByZXNlbnRpbmcgbXVsdGl2YWx1ZWQgcXVlcnkgcGFyYW1ldGVycy4KICAgICAgICBzZWxmLnBhcmFtcyA9IHt9CgogICAgICAgICM6IFN0cmVhbSByZXNwb25zZSBjb250ZW50IGRlZmF1bHQuCiAgICAgICAgc2VsZi5zdHJlYW0gPSBGYWxzZQoKICAgICAgICAjOiBTU0wgVmVyaWZpY2F0aW9uIGRlZmF1bHQuCiAgICAgICAgIzogRGVmYXVsdHMgdG8gYFRydWVgLCByZXF1aXJpbmcgcmVxdWVzdHMgdG8gdmVyaWZ5IHRoZSBUTFMgY2VydGlmaWNhdGUgYXQgdGhlCiAgICAgICAgIzogcmVtb3RlIGVuZC4KICAgICAgICAjOiBJZiB2ZXJpZnkgaXMgc2V0IHRvIGBGYWxzZWAsIHJlcXVlc3RzIHdpbGwgYWNjZXB0IGFueSBUTFMgY2VydGlmaWNhdGUKICAgICAgICAjOiBwcmVzZW50ZWQgYnkgdGhlIHNlcnZlciwgYW5kIHdpbGwgaWdub3JlIGhvc3RuYW1lIG1pc21hdGNoZXMgYW5kL29yCiAgICAgICAgIzogZXhwaXJlZCBjZXJ0aWZpY2F0ZXMsIHdoaWNoIHdpbGwgbWFrZSB5b3VyIGFwcGxpY2F0aW9uIHZ1bG5lcmFibGUgdG8KICAgICAgICAjOiBtYW4taW4tdGhlLW1pZGRsZSAoTWl0TSkgYXR0YWNrcy4KICAgICAgICAjOiBPbmx5IHNldCB0aGlzIHRvIGBGYWxzZWAgZm9yIHRlc3RpbmcuCiAgICAgICAgc2VsZi52ZXJpZnkgPSBUcnVlCgogICAgICAgICM6IFNTTCBjbGllbnQgY2VydGlmaWNhdGUgZGVmYXVsdCwgaWYgU3RyaW5nLCBwYXRoIHRvIHNzbCBjbGllbnQKICAgICAgICAjOiBjZXJ0IGZpbGUgKC5wZW0pLiBJZiBUdXBsZSwgKCdjZXJ0JywgJ2tleScpIHBhaXIuCiAgICAgICAgc2VsZi5jZXJ0ID0gTm9uZQoKICAgICAgICAjOiBNYXhpbXVtIG51bWJlciBvZiByZWRpcmVjdHMgYWxsb3dlZC4gSWYgdGhlIHJlcXVlc3QgZXhjZWVkcyB0aGlzCiAgICAgICAgIzogbGltaXQsIGEgOmNsYXNzOmBUb29NYW55UmVkaXJlY3RzYCBleGNlcHRpb24gaXMgcmFpc2VkLgogICAgICAgICM6IFRoaXMgZGVmYXVsdHMgdG8gcmVxdWVzdHMubW9kZWxzLkRFRkFVTFRfUkVESVJFQ1RfTElNSVQsIHdoaWNoIGlzCiAgICAgICAgIzogMzAuCiAgICAgICAgc2VsZi5tYXhfcmVkaXJlY3RzID0gREVGQVVMVF9SRURJUkVDVF9MSU1JVAoKICAgICAgICAjOiBUcnVzdCBlbnZpcm9ubWVudCBzZXR0aW5ncyBmb3IgcHJveHkgY29uZmlndXJhdGlvbiwgZGVmYXVsdAogICAgICAgICM6IGF1dGhlbnRpY2F0aW9uIGFuZCBzaW1pbGFyLgogICAgICAgIHNlbGYudHJ1c3RfZW52ID0gVHJ1ZQoKICAgICAgICAjOiBBIENvb2tpZUphciBjb250YWluaW5nIGFsbCBjdXJyZW50bHkgb3V0c3RhbmRpbmcgY29va2llcyBzZXQgb24gdGhpcwogICAgICAgICM6IHNlc3Npb24uIEJ5IGRlZmF1bHQgaXQgaXMgYQogICAgICAgICM6IDpjbGFzczpgUmVxdWVzdHNDb29raWVKYXIgPHJlcXVlc3RzLmNvb2tpZXMuUmVxdWVzdHNDb29raWVKYXI+YCwgYnV0CiAgICAgICAgIzogbWF5IGJlIGFueSBvdGhlciBgYGNvb2tpZWxpYi5Db29raWVKYXJgYCBjb21wYXRpYmxlIG9iamVjdC4KICAgICAgICBzZWxmLmNvb2tpZXMgPSBjb29raWVqYXJfZnJvbV9kaWN0KHt9KQoKICAgICAgICAjIERlZmF1bHQgY29ubmVjdGlvbiBhZGFwdGVycy4KICAgICAgICBzZWxmLmFkYXB0ZXJzID0gT3JkZXJlZERpY3QoKQogICAgICAgIHNlbGYubW91bnQoXCJodHRwczovL1wiLCBIVFRQQWRhcHRlcigpKQogICAgICAgIHNlbGYubW91bnQoXCJodHRwOi8vXCIsIEhUVFBBZGFwdGVyKCkpCgogICAgZGVmIF9fZW50ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX2V4aXRfXyhzZWxmLCAqYXJncyk6CiAgICAgICAgc2VsZi5jbG9zZSgpCgogICAgZGVmIHByZXBhcmVfcmVxdWVzdChzZWxmLCByZXF1ZXN0KToKICAgICAgICBcIlwiXCJDb25zdHJ1Y3RzIGEgOmNsYXNzOmBQcmVwYXJlZFJlcXVlc3QgPFByZXBhcmVkUmVxdWVzdD5gIGZvcgogICAgICAgIHRyYW5zbWlzc2lvbiBhbmQgcmV0dXJucyBpdC4gVGhlIDpjbGFzczpgUHJlcGFyZWRSZXF1ZXN0YCBoYXMgc2V0dGluZ3MKICAgICAgICBtZXJnZWQgZnJvbSB0aGUgOmNsYXNzOmBSZXF1ZXN0IDxSZXF1ZXN0PmAgaW5zdGFuY2UgYW5kIHRob3NlIG9mIHRoZQogICAgICAgIDpjbGFzczpgU2Vzc2lvbmAuCgogICAgICAgIDpwYXJhbSByZXF1ZXN0OiA6Y2xhc3M6YFJlcXVlc3RgIGluc3RhbmNlIHRvIHByZXBhcmUgd2l0aCB0aGlzCiAgICAgICAgICAgIHNlc3Npb24ncyBzZXR0aW5ncy4KICAgICAgICA6cnR5cGU6IHJlcXVlc3RzLlByZXBhcmVkUmVxdWVzdAogICAgICAgIFwiXCJcIgogICAgICAgIGNvb2tpZXMgPSByZXF1ZXN0LmNvb2tpZXMgb3Ige30KCiAgICAgICAgIyBCb290c3RyYXAgQ29va2llSmFyLgogICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGNvb2tpZXMsIGNvb2tpZWxpYi5Db29raWVKYXIpOgogICAgICAgICAgICBjb29raWVzID0gY29va2llamFyX2Zyb21fZGljdChjb29raWVzKQoKICAgICAgICAjIE1lcmdlIHdpdGggc2Vzc2lvbiBjb29raWVzCiAgICAgICAgbWVyZ2VkX2Nvb2tpZXMgPSBtZXJnZV9jb29raWVzKAogICAgICAgICAgICBtZXJnZV9jb29raWVzKFJlcXVlc3RzQ29va2llSmFyKCksIHNlbGYuY29va2llcyksIGNvb2tpZXMKICAgICAgICApCgogICAgICAgICMgU2V0IGVudmlyb25tZW50J3MgYmFzaWMgYXV0aGVudGljYXRpb24gaWYgbm90IGV4cGxpY2l0bHkgc2V0LgogICAgICAgIGF1dGggPSByZXF1ZXN0LmF1dGgKICAgICAgICBpZiBzZWxmLnRydXN0X2VudiBhbmQgbm90IGF1dGggYW5kIG5vdCBzZWxmLmF1dGg6CiAgICAgICAgICAgIGF1dGggPSBnZXRfbmV0cmNfYXV0aChyZXF1ZXN0LnVybCkKCiAgICAgICAgcCA9IFByZXBhcmVkUmVxdWVzdCgpCiAgICAgICAgcC5wcmVwYXJlKAogICAgICAgICAgICBtZXRob2Q9cmVxdWVzdC5tZXRob2QudXBwZXIoKSwKICAgICAgICAgICAgdXJsPXJlcXVlc3QudXJsLAogICAgICAgICAgICBmaWxlcz1yZXF1ZXN0LmZpbGVzLAogICAgICAgICAgICBkYXRhPXJlcXVlc3QuZGF0YSwKICAgICAgICAgICAganNvbj1yZXF1ZXN0Lmpzb24sCiAgICAgICAgICAgIGhlYWRlcnM9bWVyZ2Vfc2V0dGluZygKICAgICAgICAgICAgICAgIHJlcXVlc3QuaGVhZGVycywgc2VsZi5oZWFkZXJzLCBkaWN0X2NsYXNzPUNhc2VJbnNlbnNpdGl2ZURpY3QKICAgICAgICAgICAgKSwKICAgICAgICAgICAgcGFyYW1zPW1lcmdlX3NldHRpbmcocmVxdWVzdC5wYXJhbXMsIHNlbGYucGFyYW1zKSwKICAgICAgICAgICAgYXV0aD1tZXJnZV9zZXR0aW5nKGF1dGgsIHNlbGYuYXV0aCksCiAgICAgICAgICAgIGNvb2tpZXM9bWVyZ2VkX2Nvb2tpZXMsCiAgICAgICAgICAgIGhvb2tzPW1lcmdlX2hvb2tzKHJlcXVlc3QuaG9va3MsIHNlbGYuaG9va3MpLAogICAgICAgICkKICAgICAgICByZXR1cm4gcAoKICAgIGRlZiByZXF1ZXN0KAogICAgICAgIHNlbGYsCiAgICAgICAgbWV0aG9kLAogICAgICAgIHVybCwKICAgICAgICBwYXJhbXM9Tm9uZSwKICAgICAgICBkYXRhPU5vbmUsCiAgICAgICAgaGVhZGVycz1Ob25lLAogICAgICAgIGNvb2tpZXM9Tm9uZSwKICAgICAgICBmaWxlcz1Ob25lLAogICAgICAgIGF1dGg9Tm9uZSwKICAgICAgICB0aW1lb3V0PU5vbmUsCiAgICAgICAgYWxsb3dfcmVkaXJlY3RzPVRydWUsCiAgICAgICAgcHJveGllcz1Ob25lLAogICAgICAgIGhvb2tzPU5vbmUsCiAgICAgICAgc3RyZWFtPU5vbmUsCiAgICAgICAgdmVyaWZ5PU5vbmUsCiAgICAgICAgY2VydD1Ob25lLAogICAgICAgIGpzb249Tm9uZSwKICAgICk6CiAgICAgICAgXCJcIlwiQ29uc3RydWN0cyBhIDpjbGFzczpgUmVxdWVzdCA8UmVxdWVzdD5gLCBwcmVwYXJlcyBpdCBhbmQgc2VuZHMgaXQuCiAgICAgICAgUmV0dXJucyA6Y2xhc3M6YFJlc3BvbnNlIDxSZXNwb25zZT5gIG9iamVjdC4KCiAgICAgICAgOnBhcmFtIG1ldGhvZDogbWV0aG9kIGZvciB0aGUgbmV3IDpjbGFzczpgUmVxdWVzdGAgb2JqZWN0LgogICAgICAgIDpwYXJhbSB1cmw6IFVSTCBmb3IgdGhlIG5ldyA6Y2xhc3M6YFJlcXVlc3RgIG9iamVjdC4KICAgICAgICA6cGFyYW0gcGFyYW1zOiAob3B0aW9uYWwpIERpY3Rpb25hcnkgb3IgYnl0ZXMgdG8gYmUgc2VudCBpbiB0aGUgcXVlcnkKICAgICAgICAgICAgc3RyaW5nIGZvciB0aGUgOmNsYXNzOmBSZXF1ZXN0YC4KICAgICAgICA6cGFyYW0gZGF0YTogKG9wdGlvbmFsKSBEaWN0aW9uYXJ5LCBsaXN0IG9mIHR1cGxlcywgYnl0ZXMsIG9yIGZpbGUtbGlrZQogICAgICAgICAgICBvYmplY3QgdG8gc2VuZCBpbiB0aGUgYm9keSBvZiB0aGUgOmNsYXNzOmBSZXF1ZXN0YC4KICAgICAgICA6cGFyYW0ganNvbjogKG9wdGlvbmFsKSBqc29uIHRvIHNlbmQgaW4gdGhlIGJvZHkgb2YgdGhlCiAgICAgICAgICAgIDpjbGFzczpgUmVxdWVzdGAuCiAgICAgICAgOnBhcmFtIGhlYWRlcnM6IChvcHRpb25hbCkgRGljdGlvbmFyeSBvZiBIVFRQIEhlYWRlcnMgdG8gc2VuZCB3aXRoIHRoZQogICAgICAgICAgICA6Y2xhc3M6YFJlcXVlc3RgLgogICAgICAgIDpwYXJhbSBjb29raWVzOiAob3B0aW9uYWwpIERpY3Qgb3IgQ29va2llSmFyIG9iamVjdCB0byBzZW5kIHdpdGggdGhlCiAgICAgICAgICAgIDpjbGFzczpgUmVxdWVzdGAuCiAgICAgICAgOnBhcmFtIGZpbGVzOiAob3B0aW9uYWwpIERpY3Rpb25hcnkgb2YgYGAnZmlsZW5hbWUnOiBmaWxlLWxpa2Utb2JqZWN0c2BgCiAgICAgICAgICAgIGZvciBtdWx0aXBhcnQgZW5jb2RpbmcgdXBsb2FkLgogICAgICAgIDpwYXJhbSBhdXRoOiAob3B0aW9uYWwpIEF1dGggdHVwbGUgb3IgY2FsbGFibGUgdG8gZW5hYmxlCiAgICAgICAgICAgIEJhc2ljL0RpZ2VzdC9DdXN0b20gSFRUUCBBdXRoLgogICAgICAgIDpwYXJhbSB0aW1lb3V0OiAob3B0aW9uYWwpIEhvdyBsb25nIHRvIHdhaXQgZm9yIHRoZSBzZXJ2ZXIgdG8gc2VuZAogICAgICAgICAgICBkYXRhIGJlZm9yZSBnaXZpbmcgdXAsIGFzIGEgZmxvYXQsIG9yIGEgOnJlZjpgKGNvbm5lY3QgdGltZW91dCwKICAgICAgICAgICAgcmVhZCB0aW1lb3V0KSA8dGltZW91dHM+YCB0dXBsZS4KICAgICAgICA6dHlwZSB0aW1lb3V0OiBmbG9hdCBvciB0dXBsZQogICAgICAgIDpwYXJhbSBhbGxvd19yZWRpcmVjdHM6IChvcHRpb25hbCkgU2V0IHRvIFRydWUgYnkgZGVmYXVsdC4KICAgICAgICA6dHlwZSBhbGxvd19yZWRpcmVjdHM6IGJvb2wKICAgICAgICA6cGFyYW0gcHJveGllczogKG9wdGlvbmFsKSBEaWN0aW9uYXJ5IG1hcHBpbmcgcHJvdG9jb2wgb3IgcHJvdG9jb2wgYW5kCiAgICAgICAgICAgIGhvc3RuYW1lIHRvIHRoZSBVUkwgb2YgdGhlIHByb3h5LgogICAgICAgIDpwYXJhbSBzdHJlYW06IChvcHRpb25hbCkgd2hldGhlciB0byBpbW1lZGlhdGVseSBkb3dubG9hZCB0aGUgcmVzcG9uc2UKICAgICAgICAgICAgY29udGVudC4gRGVmYXVsdHMgdG8gYGBGYWxzZWBgLgogICAgICAgIDpwYXJhbSB2ZXJpZnk6IChvcHRpb25hbCkgRWl0aGVyIGEgYm9vbGVhbiwgaW4gd2hpY2ggY2FzZSBpdCBjb250cm9scyB3aGV0aGVyIHdlIHZlcmlmeQogICAgICAgICAgICB0aGUgc2VydmVyJ3MgVExTIGNlcnRpZmljYXRlLCBvciBhIHN0cmluZywgaW4gd2hpY2ggY2FzZSBpdCBtdXN0IGJlIGEgcGF0aAogICAgICAgICAgICB0byBhIENBIGJ1bmRsZSB0byB1c2UuIERlZmF1bHRzIHRvIGBgVHJ1ZWBgLiBXaGVuIHNldCB0bwogICAgICAgICAgICBgYEZhbHNlYGAsIHJlcXVlc3RzIHdpbGwgYWNjZXB0IGFueSBUTFMgY2VydGlmaWNhdGUgcHJlc2VudGVkIGJ5CiAgICAgICAgICAgIHRoZSBzZXJ2ZXIsIGFuZCB3aWxsIGlnbm9yZSBob3N0bmFtZSBtaXNtYXRjaGVzIGFuZC9vciBleHBpcmVkCiAgICAgICAgICAgIGNlcnRpZmljYXRlcywgd2hpY2ggd2lsbCBtYWtlIHlvdXIgYXBwbGljYXRpb24gdnVsbmVyYWJsZSB0bwogICAgICAgICAgICBtYW4taW4tdGhlLW1pZGRsZSAoTWl0TSkgYXR0YWNrcy4gU2V0dGluZyB2ZXJpZnkgdG8gYGBGYWxzZWBgCiAgICAgICAgICAgIG1heSBiZSB1c2VmdWwgZHVyaW5nIGxvY2FsIGRldmVsb3BtZW50IG9yIHRlc3RpbmcuCiAgICAgICAgOnBhcmFtIGNlcnQ6IChvcHRpb25hbCkgaWYgU3RyaW5nLCBwYXRoIHRvIHNzbCBjbGllbnQgY2VydCBmaWxlICgucGVtKS4KICAgICAgICAgICAgSWYgVHVwbGUsICgnY2VydCcsICdrZXknKSBwYWlyLgogICAgICAgIDpydHlwZTogcmVxdWVzdHMuUmVzcG9uc2UKICAgICAgICBcIlwiXCIKICAgICAgICAjIENyZWF0ZSB0aGUgUmVxdWVzdC4KICAgICAgICByZXEgPSBSZXF1ZXN0KAogICAgICAgICAgICBtZXRob2Q9bWV0aG9kLnVwcGVyKCksCiAgICAgICAgICAgIHVybD11cmwsCiAgICAgICAgICAgIGhlYWRlcnM9aGVhZGVycywKICAgICAgICAgICAgZmlsZXM9ZmlsZXMsCiAgICAgICAgICAgIGRhdGE9ZGF0YSBvciB7fSwKICAgICAgICAgICAganNvbj1qc29uLAogICAgICAgICAgICBwYXJhbXM9cGFyYW1zIG9yIHt9LAogICAgICAgICAgICBhdXRoPWF1dGgsCiAgICAgICAgICAgIGNvb2tpZXM9Y29va2llcywKICAgICAgICAgICAgaG9va3M9aG9va3MsCiAgICAgICAgKQogICAgICAgIHByZXAgPSBzZWxmLnByZXBhcmVfcmVxdWVzdChyZXEpCgogICAgICAgIHByb3hpZXMgPSBwcm94aWVzIG9yIHt9CgogICAgICAgIHNldHRpbmdzID0gc2VsZi5tZXJnZV9lbnZpcm9ubWVudF9zZXR0aW5ncygKICAgICAgICAgICAgcHJlcC51cmwsIHByb3hpZXMsIHN0cmVhbSwgdmVyaWZ5LCBjZXJ0CiAgICAgICAgKQoKICAgICAgICAjIFNlbmQgdGhlIHJlcXVlc3QuCiAgICAgICAgc2VuZF9rd2FyZ3MgPSB7CiAgICAgICAgICAgIFwidGltZW91dFwiOiB0aW1lb3V0LAogICAgICAgICAgICBcImFsbG93X3JlZGlyZWN0c1wiOiBhbGxvd19yZWRpcmVjdHMsCiAgICAgICAgfQogICAgICAgIHNlbmRfa3dhcmdzLnVwZGF0ZShzZXR0aW5ncykKICAgICAgICByZXNwID0gc2VsZi5zZW5kKHByZXAsICoqc2VuZF9rd2FyZ3MpCgogICAgICAgIHJldHVybiByZXNwCgogICAgZGVmIGdldChzZWxmLCB1cmwsICoqa3dhcmdzKToKICAgICAgICByXCJcIlwiU2VuZHMgYSBHRVQgcmVxdWVzdC4gUmV0dXJucyA6Y2xhc3M6YFJlc3BvbnNlYCBvYmplY3QuCgogICAgICAgIDpwYXJhbSB1cmw6IFVSTCBmb3IgdGhlIG5ldyA6Y2xhc3M6YFJlcXVlc3RgIG9iamVjdC4KICAgICAgICA6cGFyYW0gXFwqXFwqa3dhcmdzOiBPcHRpb25hbCBhcmd1bWVudHMgdGhhdCBgYHJlcXVlc3RgYCB0YWtlcy4KICAgICAgICA6cnR5cGU6IHJlcXVlc3RzLlJlc3BvbnNlCiAgICAgICAgXCJcIlwiCgogICAgICAgIGt3YXJncy5zZXRkZWZhdWx0KFwiYWxsb3dfcmVkaXJlY3RzXCIsIFRydWUpCiAgICAgICAgcmV0dXJuIHNlbGYucmVxdWVzdChcIkdFVFwiLCB1cmwsICoqa3dhcmdzKQoKICAgIGRlZiBvcHRpb25zKHNlbGYsIHVybCwgKiprd2FyZ3MpOgogICAgICAgIHJcIlwiXCJTZW5kcyBhIE9QVElPTlMgcmVxdWVzdC4gUmV0dXJucyA6Y2xhc3M6YFJlc3BvbnNlYCBvYmplY3QuCgogICAgICAgIDpwYXJhbSB1cmw6IFVSTCBmb3IgdGhlIG5ldyA6Y2xhc3M6YFJlcXVlc3RgIG9iamVjdC4KICAgICAgICA6cGFyYW0gXFwqXFwqa3dhcmdzOiBPcHRpb25hbCBhcmd1bWVudHMgdGhhdCBgYHJlcXVlc3RgYCB0YWtlcy4KICAgICAgICA6cnR5cGU6IHJlcXVlc3RzLlJlc3BvbnNlCiAgICAgICAgXCJcIlwiCgogICAgICAgIGt3YXJncy5zZXRkZWZhdWx0KFwiYWxsb3dfcmVkaXJlY3RzXCIsIFRydWUpCiAgICAgICAgcmV0dXJuIHNlbGYucmVxdWVzdChcIk9QVElPTlNcIiwgdXJsLCAqKmt3YXJncykKCiAgICBkZWYgaGVhZChzZWxmLCB1cmwsICoqa3dhcmdzKToKICAgICAgICByXCJcIlwiU2VuZHMgYSBIRUFEIHJlcXVlc3QuIFJldHVybnMgOmNsYXNzOmBSZXNwb25zZWAgb2JqZWN0LgoKICAgICAgICA6cGFyYW0gdXJsOiBVUkwgZm9yIHRoZSBuZXcgOmNsYXNzOmBSZXF1ZXN0YCBvYmplY3QuCiAgICAgICAgOnBhcmFtIFxcKlxcKmt3YXJnczogT3B0aW9uYWwgYXJndW1lbnRzIHRoYXQgYGByZXF1ZXN0YGAgdGFrZXMuCiAgICAgICAgOnJ0eXBlOiByZXF1ZXN0cy5SZXNwb25zZQogICAgICAgIFwiXCJcIgoKICAgICAgICBrd2FyZ3Muc2V0ZGVmYXVsdChcImFsbG93X3JlZGlyZWN0c1wiLCBGYWxzZSkKICAgICAgICByZXR1cm4gc2VsZi5yZXF1ZXN0KFwiSEVBRFwiLCB1cmwsICoqa3dhcmdzKQoKICAgIGRlZiBwb3N0KHNlbGYsIHVybCwgZGF0YT1Ob25lLCBqc29uPU5vbmUsICoqa3dhcmdzKToKICAgICAgICByXCJcIlwiU2VuZHMgYSBQT1NUIHJlcXVlc3QuIFJldHVybnMgOmNsYXNzOmBSZXNwb25zZWAgb2JqZWN0LgoKICAgICAgICA6cGFyYW0gdXJsOiBVUkwgZm9yIHRoZSBuZXcgOmNsYXNzOmBSZXF1ZXN0YCBvYmplY3QuCiAgICAgICAgOnBhcmFtIGRhdGE6IChvcHRpb25hbCkgRGljdGlvbmFyeSwgbGlzdCBvZiB0dXBsZXMsIGJ5dGVzLCBvciBmaWxlLWxpa2UKICAgICAgICAgICAgb2JqZWN0IHRvIHNlbmQgaW4gdGhlIGJvZHkgb2YgdGhlIDpjbGFzczpgUmVxdWVzdGAuCiAgICAgICAgOnBhcmFtIGpzb246IChvcHRpb25hbCkganNvbiB0byBzZW5kIGluIHRoZSBib2R5IG9mIHRoZSA6Y2xhc3M6YFJlcXVlc3RgLgogICAgICAgIDpwYXJhbSBcXCpcXCprd2FyZ3M6IE9wdGlvbmFsIGFyZ3VtZW50cyB0aGF0IGBgcmVxdWVzdGBgIHRha2VzLgogICAgICAgIDpydHlwZTogcmVxdWVzdHMuUmVzcG9uc2UKICAgICAgICBcIlwiXCIKCiAgICAgICAgcmV0dXJuIHNlbGYucmVxdWVzdChcIlBPU1RcIiwgdXJsLCBkYXRhPWRhdGEsIGpzb249anNvbiwgKiprd2FyZ3MpCgogICAgZGVmIHB1dChzZWxmLCB1cmwsIGRhdGE9Tm9uZSwgKiprd2FyZ3MpOgogICAgICAgIHJcIlwiXCJTZW5kcyBhIFBVVCByZXF1ZXN0LiBSZXR1cm5zIDpjbGFzczpgUmVzcG9uc2VgIG9iamVjdC4KCiAgICAgICAgOnBhcmFtIHVybDogVVJMIGZvciB0aGUgbmV3IDpjbGFzczpgUmVxdWVzdGAgb2JqZWN0LgogICAgICAgIDpwYXJhbSBkYXRhOiAob3B0aW9uYWwpIERpY3Rpb25hcnksIGxpc3Qgb2YgdHVwbGVzLCBieXRlcywgb3IgZmlsZS1saWtlCiAgICAgICAgICAgIG9iamVjdCB0byBzZW5kIGluIHRoZSBib2R5IG9mIHRoZSA6Y2xhc3M6YFJlcXVlc3RgLgogICAgICAgIDpwYXJhbSBcXCpcXCprd2FyZ3M6IE9wdGlvbmFsIGFyZ3VtZW50cyB0aGF0IGBgcmVxdWVzdGBgIHRha2VzLgogICAgICAgIDpydHlwZTogcmVxdWVzdHMuUmVzcG9uc2UKICAgICAgICBcIlwiXCIKCiAgICAgICAgcmV0dXJuIHNlbGYucmVxdWVzdChcIlBVVFwiLCB1cmwsIGRhdGE9ZGF0YSwgKiprd2FyZ3MpCgogICAgZGVmIHBhdGNoKHNlbGYsIHVybCwgZGF0YT1Ob25lLCAqKmt3YXJncyk6CiAgICAgICAgclwiXCJcIlNlbmRzIGEgUEFUQ0ggcmVxdWVzdC4gUmV0dXJucyA6Y2xhc3M6YFJlc3BvbnNlYCBvYmplY3QuCgogICAgICAgIDpwYXJhbSB1cmw6IFVSTCBmb3IgdGhlIG5ldyA6Y2xhc3M6YFJlcXVlc3RgIG9iamVjdC4KICAgICAgICA6cGFyYW0gZGF0YTogKG9wdGlvbmFsKSBEaWN0aW9uYXJ5LCBsaXN0IG9mIHR1cGxlcywgYnl0ZXMsIG9yIGZpbGUtbGlrZQogICAgICAgICAgICBvYmplY3QgdG8gc2VuZCBpbiB0aGUgYm9keSBvZiB0aGUgOmNsYXNzOmBSZXF1ZXN0YC4KICAgICAgICA6cGFyYW0gXFwqXFwqa3dhcmdzOiBPcHRpb25hbCBhcmd1bWVudHMgdGhhdCBgYHJlcXVlc3RgYCB0YWtlcy4KICAgICAgICA6cnR5cGU6IHJlcXVlc3RzLlJlc3BvbnNlCiAgICAgICAgXCJcIlwiCgogICAgICAgIHJldHVybiBzZWxmLnJlcXVlc3QoXCJQQVRDSFwiLCB1cmwsIGRhdGE9ZGF0YSwgKiprd2FyZ3MpCgogICAgZGVmIGRlbGV0ZShzZWxmLCB1cmwsICoqa3dhcmdzKToKICAgICAgICByXCJcIlwiU2VuZHMgYSBERUxFVEUgcmVxdWVzdC4gUmV0dXJucyA6Y2xhc3M6YFJlc3BvbnNlYCBvYmplY3QuCgogICAgICAgIDpwYXJhbSB1cmw6IFVSTCBmb3IgdGhlIG5ldyA6Y2xhc3M6YFJlcXVlc3RgIG9iamVjdC4KICAgICAgICA6cGFyYW0gXFwqXFwqa3dhcmdzOiBPcHRpb25hbCBhcmd1bWVudHMgdGhhdCBgYHJlcXVlc3RgYCB0YWtlcy4KICAgICAgICA6cnR5cGU6IHJlcXVlc3RzLlJlc3BvbnNlCiAgICAgICAgXCJcIlwiCgogICAgICAgIHJldHVybiBzZWxmLnJlcXVlc3QoXCJERUxFVEVcIiwgdXJsLCAqKmt3YXJncykKCiAgICBkZWYgc2VuZChzZWxmLCByZXF1ZXN0LCAqKmt3YXJncyk6CiAgICAgICAgXCJcIlwiU2VuZCBhIGdpdmVuIFByZXBhcmVkUmVxdWVzdC4KCiAgICAgICAgOnJ0eXBlOiByZXF1ZXN0cy5SZXNwb25zZQogICAgICAgIFwiXCJcIgogICAgICAgICMgU2V0IGRlZmF1bHRzIHRoYXQgdGhlIGhvb2tzIGNhbiB1dGlsaXplIHRvIGVuc3VyZSB0aGV5IGFsd2F5cyBoYXZlCiAgICAgICAgIyB0aGUgY29ycmVjdCBwYXJhbWV0ZXJzIHRvIHJlcHJvZHVjZSB0aGUgcHJldmlvdXMgcmVxdWVzdC4KICAgICAgICBrd2FyZ3Muc2V0ZGVmYXVsdChcInN0cmVhbVwiLCBzZWxmLnN0cmVhbSkKICAgICAgICBrd2FyZ3Muc2V0ZGVmYXVsdChcInZlcmlmeVwiLCBzZWxmLnZlcmlmeSkKICAgICAgICBrd2FyZ3Muc2V0ZGVmYXVsdChcImNlcnRcIiwgc2VsZi5jZXJ0KQogICAgICAgIGlmIFwicHJveGllc1wiIG5vdCBpbiBrd2FyZ3M6CiAgICAgICAgICAgIGt3YXJnc1tcInByb3hpZXNcIl0gPSByZXNvbHZlX3Byb3hpZXMocmVxdWVzdCwgc2VsZi5wcm94aWVzLCBzZWxmLnRydXN0X2VudikKCiAgICAgICAgIyBJdCdzIHBvc3NpYmxlIHRoYXQgdXNlcnMgbWlnaHQgYWNjaWRlbnRhbGx5IHNlbmQgYSBSZXF1ZXN0IG9iamVjdC4KICAgICAgICAjIEd1YXJkIGFnYWluc3QgdGhhdCBzcGVjaWZpYyBmYWlsdXJlIGNhc2UuCiAgICAgICAgaWYgaXNpbnN0YW5jZShyZXF1ZXN0LCBSZXF1ZXN0KToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcIllvdSBjYW4gb25seSBzZW5kIFByZXBhcmVkUmVxdWVzdHMuXCIpCgogICAgICAgICMgU2V0IHVwIHZhcmlhYmxlcyBuZWVkZWQgZm9yIHJlc29sdmVfcmVkaXJlY3RzIGFuZCBkaXNwYXRjaGluZyBvZiBob29rcwogICAgICAgIGFsbG93X3JlZGlyZWN0cyA9IGt3YXJncy5wb3AoXCJhbGxvd19yZWRpcmVjdHNcIiwgVHJ1ZSkKICAgICAgICBzdHJlYW0gPSBrd2FyZ3MuZ2V0KFwic3RyZWFtXCIpCiAgICAgICAgaG9va3MgPSByZXF1ZXN0Lmhvb2tzCgogICAgICAgICMgR2V0IHRoZSBhcHByb3ByaWF0ZSBhZGFwdGVyIHRvIHVzZQogICAgICAgIGFkYXB0ZXIgPSBzZWxmLmdldF9hZGFwdGVyKHVybD1yZXF1ZXN0LnVybCkKCiAgICAgICAgIyBTdGFydCB0aW1lIChhcHByb3hpbWF0ZWx5KSBvZiB0aGUgcmVxdWVzdAogICAgICAgIHN0YXJ0ID0gcHJlZmVycmVkX2Nsb2NrKCkKCiAgICAgICAgIyBTZW5kIHRoZSByZXF1ZXN0CiAgICAgICAgciA9IGFkYXB0ZXIuc2VuZChyZXF1ZXN0LCAqKmt3YXJncykKCiAgICAgICAgIyBUb3RhbCBlbGFwc2VkIHRpbWUgb2YgdGhlIHJlcXVlc3QgKGFwcHJveGltYXRlbHkpCiAgICAgICAgZWxhcHNlZCA9IHByZWZlcnJlZF9jbG9jaygpIC0gc3RhcnQKICAgICAgICByLmVsYXBzZWQgPSB0aW1lZGVsdGEoc2Vjb25kcz1lbGFwc2VkKQoKICAgICAgICAjIFJlc3BvbnNlIG1hbmlwdWxhdGlvbiBob29rcwogICAgICAgIHIgPSBkaXNwYXRjaF9ob29rKFwicmVzcG9uc2VcIiwgaG9va3MsIHIsICoqa3dhcmdzKQoKICAgICAgICAjIFBlcnNpc3QgY29va2llcwogICAgICAgIGlmIHIuaGlzdG9yeToKCiAgICAgICAgICAgICMgSWYgdGhlIGhvb2tzIGNyZWF0ZSBoaXN0b3J5IHRoZW4gd2Ugd2FudCB0aG9zZSBjb29raWVzIHRvbwogICAgICAgICAgICBmb3IgcmVzcCBpbiByLmhpc3Rvcnk6CiAgICAgICAgICAgICAgICBleHRyYWN0X2Nvb2tpZXNfdG9famFyKHNlbGYuY29va2llcywgcmVzcC5yZXF1ZXN0LCByZXNwLnJhdykKCiAgICAgICAgZXh0cmFjdF9jb29raWVzX3RvX2phcihzZWxmLmNvb2tpZXMsIHJlcXVlc3QsIHIucmF3KQoKICAgICAgICAjIFJlc29sdmUgcmVkaXJlY3RzIGlmIGFsbG93ZWQuCiAgICAgICAgaWYgYWxsb3dfcmVkaXJlY3RzOgogICAgICAgICAgICAjIFJlZGlyZWN0IHJlc29sdmluZyBnZW5lcmF0b3IuCiAgICAgICAgICAgIGdlbiA9IHNlbGYucmVzb2x2ZV9yZWRpcmVjdHMociwgcmVxdWVzdCwgKiprd2FyZ3MpCiAgICAgICAgICAgIGhpc3RvcnkgPSBbcmVzcCBmb3IgcmVzcCBpbiBnZW5dCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaGlzdG9yeSA9IFtdCgogICAgICAgICMgU2h1ZmZsZSB0aGluZ3MgYXJvdW5kIGlmIHRoZXJlJ3MgaGlzdG9yeS4KICAgICAgICBpZiBoaXN0b3J5OgogICAgICAgICAgICAjIEluc2VydCB0aGUgZmlyc3QgKG9yaWdpbmFsKSByZXF1ZXN0IGF0IHRoZSBzdGFydAogICAgICAgICAgICBoaXN0b3J5Lmluc2VydCgwLCByKQogICAgICAgICAgICAjIEdldCB0aGUgbGFzdCByZXF1ZXN0IG1hZGUKICAgICAgICAgICAgciA9IGhpc3RvcnkucG9wKCkKICAgICAgICAgICAgci5oaXN0b3J5ID0gaGlzdG9yeQoKICAgICAgICAjIElmIHJlZGlyZWN0cyBhcmVuJ3QgYmVpbmcgZm9sbG93ZWQsIHN0b3JlIHRoZSByZXNwb25zZSBvbiB0aGUgUmVxdWVzdCBmb3IgUmVzcG9uc2UubmV4dCgpLgogICAgICAgIGlmIG5vdCBhbGxvd19yZWRpcmVjdHM6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHIuX25leHQgPSBuZXh0KAogICAgICAgICAgICAgICAgICAgIHNlbGYucmVzb2x2ZV9yZWRpcmVjdHMociwgcmVxdWVzdCwgeWllbGRfcmVxdWVzdHM9VHJ1ZSwgKiprd2FyZ3MpCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIGV4Y2VwdCBTdG9wSXRlcmF0aW9uOgogICAgICAgICAgICAgICAgcGFzcwoKICAgICAgICBpZiBub3Qgc3RyZWFtOgogICAgICAgICAgICByLmNvbnRlbnQKCiAgICAgICAgcmV0dXJuIHIKCiAgICBkZWYgbWVyZ2VfZW52aXJvbm1lbnRfc2V0dGluZ3Moc2VsZiwgdXJsLCBwcm94aWVzLCBzdHJlYW0sIHZlcmlmeSwgY2VydCk6CiAgICAgICAgXCJcIlwiCiAgICAgICAgQ2hlY2sgdGhlIGVudmlyb25tZW50IGFuZCBtZXJnZSBpdCB3aXRoIHNvbWUgc2V0dGluZ3MuCgogICAgICAgIDpydHlwZTogZGljdAogICAgICAgIFwiXCJcIgogICAgICAgICMgR2F0aGVyIGNsdWVzIGZyb20gdGhlIHN1cnJvdW5kaW5nIGVudmlyb25tZW50LgogICAgICAgIGlmIHNlbGYudHJ1c3RfZW52OgogICAgICAgICAgICAjIFNldCBlbnZpcm9ubWVudCdzIHByb3hpZXMuCiAgICAgICAgICAgIG5vX3Byb3h5ID0gcHJveGllcy5nZXQoXCJub19wcm94eVwiKSBpZiBwcm94aWVzIGlzIG5vdCBOb25lIGVsc2UgTm9uZQogICAgICAgICAgICBlbnZfcHJveGllcyA9IGdldF9lbnZpcm9uX3Byb3hpZXModXJsLCBub19wcm94eT1ub19wcm94eSkKICAgICAgICAgICAgZm9yIChrLCB2KSBpbiBlbnZfcHJveGllcy5pdGVtcygpOgogICAgICAgICAgICAgICAgcHJveGllcy5zZXRkZWZhdWx0KGssIHYpCgogICAgICAgICAgICAjIExvb2sgZm9yIHJlcXVlc3RzIGVudmlyb25tZW50IGNvbmZpZ3VyYXRpb24KICAgICAgICAgICAgIyBhbmQgYmUgY29tcGF0aWJsZSB3aXRoIGNVUkwuCiAgICAgICAgICAgIGlmIHZlcmlmeSBpcyBUcnVlIG9yIHZlcmlmeSBpcyBOb25lOgogICAgICAgICAgICAgICAgdmVyaWZ5ID0gKAogICAgICAgICAgICAgICAgICAgIG9zLmVudmlyb24uZ2V0KFwiUkVRVUVTVFNfQ0FfQlVORExFXCIpCiAgICAgICAgICAgICAgICAgICAgb3Igb3MuZW52aXJvbi5nZXQoXCJDVVJMX0NBX0JVTkRMRVwiKQogICAgICAgICAgICAgICAgICAgIG9yIHZlcmlmeQogICAgICAgICAgICAgICAgKQoKICAgICAgICAjIE1lcmdlIGFsbCB0aGUga3dhcmdzLgogICAgICAgIHByb3hpZXMgPSBtZXJnZV9zZXR0aW5nKHByb3hpZXMsIHNlbGYucHJveGllcykKICAgICAgICBzdHJlYW0gPSBtZXJnZV9zZXR0aW5nKHN0cmVhbSwgc2VsZi5zdHJlYW0pCiAgICAgICAgdmVyaWZ5ID0gbWVyZ2Vfc2V0dGluZyh2ZXJpZnksIHNlbGYudmVyaWZ5KQogICAgICAgIGNlcnQgPSBtZXJnZV9zZXR0aW5nKGNlcnQsIHNlbGYuY2VydCkKCiAgICAgICAgcmV0dXJuIHtcInByb3hpZXNcIjogcHJveGllcywgXCJzdHJlYW1cIjogc3RyZWFtLCBcInZlcmlmeVwiOiB2ZXJpZnksIFwiY2VydFwiOiBjZXJ0fQoKICAgIGRlZiBnZXRfYWRhcHRlcihzZWxmLCB1cmwpOgogICAgICAgIFwiXCJcIgogICAgICAgIFJldHVybnMgdGhlIGFwcHJvcHJpYXRlIGNvbm5lY3Rpb24gYWRhcHRlciBmb3IgdGhlIGdpdmVuIFVSTC4KCiAgICAgICAgOnJ0eXBlOiByZXF1ZXN0cy5hZGFwdGVycy5CYXNlQWRhcHRlcgogICAgICAgIFwiXCJcIgogICAgICAgIGZvciAocHJlZml4LCBhZGFwdGVyKSBpbiBzZWxmLmFkYXB0ZXJzLml0ZW1zKCk6CgogICAgICAgICAgICBpZiB1cmwubG93ZXIoKS5zdGFydHN3aXRoKHByZWZpeC5sb3dlcigpKToKICAgICAgICAgICAgICAgIHJldHVybiBhZGFwdGVyCgogICAgICAgICMgTm90aGluZyBtYXRjaGVzIDotLwogICAgICAgIHJhaXNlIEludmFsaWRTY2hlbWEoZlwiTm8gY29ubmVjdGlvbiBhZGFwdGVycyB3ZXJlIGZvdW5kIGZvciB7dXJsIXJ9XCIpCgogICAgZGVmIGNsb3NlKHNlbGYpOgogICAgICAgIFwiXCJcIkNsb3NlcyBhbGwgYWRhcHRlcnMgYW5kIGFzIHN1Y2ggdGhlIHNlc3Npb25cIlwiXCIKICAgICAgICBmb3IgdiBpbiBzZWxmLmFkYXB0ZXJzLnZhbHVlcygpOgogICAgICAgICAgICB2LmNsb3NlKCkKCiAgICBkZWYgbW91bnQoc2VsZiwgcHJlZml4LCBhZGFwdGVyKToKICAgICAgICBcIlwiXCJSZWdpc3RlcnMgYSBjb25uZWN0aW9uIGFkYXB0ZXIgdG8gYSBwcmVmaXguCgogICAgICAgIEFkYXB0ZXJzIGFyZSBzb3J0ZWQgaW4gZGVzY2VuZGluZyBvcmRlciBieSBwcmVmaXggbGVuZ3RoLgogICAgICAgIFwiXCJcIgogICAgICAgIHNlbGYuYWRhcHRlcnNbcHJlZml4XSA9IGFkYXB0ZXIKICAgICAgICBrZXlzX3RvX21vdmUgPSBbayBmb3IgayBpbiBzZWxmLmFkYXB0ZXJzIGlmIGxlbihrKSA8IGxlbihwcmVmaXgpXQoKICAgICAgICBmb3Iga2V5IGluIGtleXNfdG9fbW92ZToKICAgICAgICAgICAgc2VsZi5hZGFwdGVyc1trZXldID0gc2VsZi5hZGFwdGVycy5wb3Aoa2V5KQoKICAgIGRlZiBfX2dldHN0YXRlX18oc2VsZik6CiAgICAgICAgc3RhdGUgPSB7YXR0cjogZ2V0YXR0cihzZWxmLCBhdHRyLCBOb25lKSBmb3IgYXR0ciBpbiBzZWxmLl9fYXR0cnNfX30KICAgICAgICByZXR1cm4gc3RhdGUKCiAgICBkZWYgX19zZXRzdGF0ZV9fKHNlbGYsIHN0YXRlKToKICAgICAgICBmb3IgYXR0ciwgdmFsdWUgaW4gc3RhdGUuaXRlbXMoKToKICAgICAgICAgICAgc2V0YXR0cihzZWxmLCBhdHRyLCB2YWx1ZSkKCgpkZWYgc2Vzc2lvbigpOgogICAgXCJcIlwiCiAgICBSZXR1cm5zIGEgOmNsYXNzOmBTZXNzaW9uYCBmb3IgY29udGV4dC1tYW5hZ2VtZW50LgoKICAgIC4uIGRlcHJlY2F0ZWQ6OiAxLjAuMAoKICAgICAgICBUaGlzIG1ldGhvZCBoYXMgYmVlbiBkZXByZWNhdGVkIHNpbmNlIHZlcnNpb24gMS4wLjAgYW5kIGlzIG9ubHkga2VwdCBmb3IKICAgICAgICBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS4gTmV3IGNvZGUgc2hvdWxkIHVzZSA6Y2xhc3M6YH5yZXF1ZXN0cy5zZXNzaW9ucy5TZXNzaW9uYAogICAgICAgIHRvIGNyZWF0ZSBhIHNlc3Npb24uIFRoaXMgbWF5IGJlIHJlbW92ZWQgYXQgYSBmdXR1cmUgZGF0ZS4KCiAgICA6cnR5cGU6IFNlc3Npb24KICAgIFwiXCJcIgogICAgcmV0dXJuIFNlc3Npb24oKQoKIiIiCm1vZHVsZV9kaWN0WyJyZXF1ZXN0cyIrb3Muc2VwKyJob29rcy5weSJdPSIiIgpcIlwiXCIKcmVxdWVzdHMuaG9va3MKfn5+fn5+fn5+fn5+fn4KClRoaXMgbW9kdWxlIHByb3ZpZGVzIHRoZSBjYXBhYmlsaXRpZXMgZm9yIHRoZSBSZXF1ZXN0cyBob29rcyBzeXN0ZW0uCgpBdmFpbGFibGUgaG9va3M6CgpgYHJlc3BvbnNlYGA6CiAgICBUaGUgcmVzcG9uc2UgZ2VuZXJhdGVkIGZyb20gYSBSZXF1ZXN0LgpcIlwiXCIKSE9PS1MgPSBbXCJyZXNwb25zZVwiXQoKCmRlZiBkZWZhdWx0X2hvb2tzKCk6CiAgICByZXR1cm4ge2V2ZW50OiBbXSBmb3IgZXZlbnQgaW4gSE9PS1N9CgoKIyBUT0RPOiByZXNwb25zZSBpcyB0aGUgb25seSBvbmUKCgpkZWYgZGlzcGF0Y2hfaG9vayhrZXksIGhvb2tzLCBob29rX2RhdGEsICoqa3dhcmdzKToKICAgIFwiXCJcIkRpc3BhdGNoZXMgYSBob29rIGRpY3Rpb25hcnkgb24gYSBnaXZlbiBwaWVjZSBvZiBkYXRhLlwiXCJcIgogICAgaG9va3MgPSBob29rcyBvciB7fQogICAgaG9va3MgPSBob29rcy5nZXQoa2V5KQogICAgaWYgaG9va3M6CiAgICAgICAgaWYgaGFzYXR0cihob29rcywgXCJfX2NhbGxfX1wiKToKICAgICAgICAgICAgaG9va3MgPSBbaG9va3NdCiAgICAgICAgZm9yIGhvb2sgaW4gaG9va3M6CiAgICAgICAgICAgIF9ob29rX2RhdGEgPSBob29rKGhvb2tfZGF0YSwgKiprd2FyZ3MpCiAgICAgICAgICAgIGlmIF9ob29rX2RhdGEgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICBob29rX2RhdGEgPSBfaG9va19kYXRhCiAgICByZXR1cm4gaG9va19kYXRhCgoiIiIKbW9kdWxlX2RpY3RbInJlcXVlc3RzIitvcy5zZXArInBhY2thZ2VzLnB5Il09IiIiCiMgPCBpbmNsdWRlICdjaGFyZGV0LnB5JyA+CgojIDwgaW5jbHVkZSAnY2hhcnNldF9ub3JtYWxpemVyLnB5JyA+CgppbXBvcnQgc3lzCgp0cnk6CiAgICBpbXBvcnQgY2hhcmRldApleGNlcHQgSW1wb3J0RXJyb3I6CiAgICBpbXBvcnQgd2FybmluZ3MKCiAgICBpbXBvcnQgY2hhcnNldF9ub3JtYWxpemVyIGFzIGNoYXJkZXQKCiAgICB3YXJuaW5ncy5maWx0ZXJ3YXJuaW5ncyhcImlnbm9yZVwiLCBcIlRyeWluZyB0byBkZXRlY3RcIiwgbW9kdWxlPVwiY2hhcnNldF9ub3JtYWxpemVyXCIpCgojIFRoaXMgY29kZSBleGlzdHMgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHJlYXNvbnMuCiMgSSBkb24ndCBsaWtlIGl0IGVpdGhlci4gSnVzdCBsb29rIHRoZSBvdGhlciB3YXkuIDopCgpmb3IgcGFja2FnZSBpbiAoXCJ1cmxsaWIzXCIsIFwiaWRuYVwiKToKICAgIGxvY2FscygpW3BhY2thZ2VdID0gX19pbXBvcnRfXyhwYWNrYWdlKQogICAgIyBUaGlzIHRyYXZlcnNhbCBpcyBhcHBhcmVudGx5IG5lY2Vzc2FyeSBzdWNoIHRoYXQgdGhlIGlkZW50aXRpZXMgYXJlCiAgICAjIHByZXNlcnZlZCAocmVxdWVzdHMucGFja2FnZXMudXJsbGliMy4qIGlzIHVybGxpYjMuKikKICAgIGZvciBtb2QgaW4gbGlzdChzeXMubW9kdWxlcyk6CiAgICAgICAgaWYgbW9kID09IHBhY2thZ2Ugb3IgbW9kLnN0YXJ0c3dpdGgoZlwie3BhY2thZ2V9LlwiKToKICAgICAgICAgICAgc3lzLm1vZHVsZXNbZlwicmVxdWVzdHMucGFja2FnZXMue21vZH1cIl0gPSBzeXMubW9kdWxlc1ttb2RdCgp0YXJnZXQgPSBjaGFyZGV0Ll9fbmFtZV9fCmZvciBtb2QgaW4gbGlzdChzeXMubW9kdWxlcyk6CiAgICBpZiBtb2QgPT0gdGFyZ2V0IG9yIG1vZC5zdGFydHN3aXRoKGZcInt0YXJnZXR9LlwiKToKICAgICAgICB0YXJnZXQgPSB0YXJnZXQucmVwbGFjZSh0YXJnZXQsIFwiY2hhcmRldFwiKQogICAgICAgIHN5cy5tb2R1bGVzW2ZcInJlcXVlc3RzLnBhY2thZ2VzLnt0YXJnZXR9XCJdID0gc3lzLm1vZHVsZXNbbW9kXQojIEtpbmRhIGNvb2wsIHRob3VnaCwgcmlnaHQ/CgoiIiIKbW9kdWxlX2RpY3RbInJlcXVlc3RzIitvcy5zZXArImFkYXB0ZXJzLnB5Il09IiIiCiMgPCBpbmNsdWRlICd1cmxsaWIzLnB5JyA+CgpcIlwiXCIKcmVxdWVzdHMuYWRhcHRlcnMKfn5+fn5+fn5+fn5+fn5+fn4KClRoaXMgbW9kdWxlIGNvbnRhaW5zIHRoZSB0cmFuc3BvcnQgYWRhcHRlcnMgdGhhdCBSZXF1ZXN0cyB1c2VzIHRvIGRlZmluZQphbmQgbWFpbnRhaW4gY29ubmVjdGlvbnMuClwiXCJcIgoKaW1wb3J0IG9zLnBhdGgKaW1wb3J0IHNvY2tldCAgIyBub3FhOiBGNDAxCgpmcm9tIHVybGxpYjMuZXhjZXB0aW9ucyBpbXBvcnQgQ2xvc2VkUG9vbEVycm9yLCBDb25uZWN0VGltZW91dEVycm9yCmZyb20gdXJsbGliMy5leGNlcHRpb25zIGltcG9ydCBIVFRQRXJyb3IgYXMgX0hUVFBFcnJvcgpmcm9tIHVybGxpYjMuZXhjZXB0aW9ucyBpbXBvcnQgSW52YWxpZEhlYWRlciBhcyBfSW52YWxpZEhlYWRlcgpmcm9tIHVybGxpYjMuZXhjZXB0aW9ucyBpbXBvcnQgKAogICAgTG9jYXRpb25WYWx1ZUVycm9yLAogICAgTWF4UmV0cnlFcnJvciwKICAgIE5ld0Nvbm5lY3Rpb25FcnJvciwKICAgIFByb3RvY29sRXJyb3IsCikKZnJvbSB1cmxsaWIzLmV4Y2VwdGlvbnMgaW1wb3J0IFByb3h5RXJyb3IgYXMgX1Byb3h5RXJyb3IKZnJvbSB1cmxsaWIzLmV4Y2VwdGlvbnMgaW1wb3J0IFJlYWRUaW1lb3V0RXJyb3IsIFJlc3BvbnNlRXJyb3IKZnJvbSB1cmxsaWIzLmV4Y2VwdGlvbnMgaW1wb3J0IFNTTEVycm9yIGFzIF9TU0xFcnJvcgpmcm9tIHVybGxpYjMucG9vbG1hbmFnZXIgaW1wb3J0IFBvb2xNYW5hZ2VyLCBwcm94eV9mcm9tX3VybApmcm9tIHVybGxpYjMucmVzcG9uc2UgaW1wb3J0IEhUVFBSZXNwb25zZQpmcm9tIHVybGxpYjMudXRpbCBpbXBvcnQgVGltZW91dCBhcyBUaW1lb3V0U2F1Y2UKZnJvbSB1cmxsaWIzLnV0aWwgaW1wb3J0IHBhcnNlX3VybApmcm9tIHVybGxpYjMudXRpbC5yZXRyeSBpbXBvcnQgUmV0cnkKCmZyb20gLmF1dGggaW1wb3J0IF9iYXNpY19hdXRoX3N0cgpmcm9tIC5jb21wYXQgaW1wb3J0IGJhc2VzdHJpbmcsIHVybHBhcnNlCmZyb20gLmNvb2tpZXMgaW1wb3J0IGV4dHJhY3RfY29va2llc190b19qYXIKZnJvbSAuZXhjZXB0aW9ucyBpbXBvcnQgKAogICAgQ29ubmVjdGlvbkVycm9yLAogICAgQ29ubmVjdFRpbWVvdXQsCiAgICBJbnZhbGlkSGVhZGVyLAogICAgSW52YWxpZFByb3h5VVJMLAogICAgSW52YWxpZFNjaGVtYSwKICAgIEludmFsaWRVUkwsCiAgICBQcm94eUVycm9yLAogICAgUmVhZFRpbWVvdXQsCiAgICBSZXRyeUVycm9yLAogICAgU1NMRXJyb3IsCikKZnJvbSAubW9kZWxzIGltcG9ydCBSZXNwb25zZQpmcm9tIC5zdHJ1Y3R1cmVzIGltcG9ydCBDYXNlSW5zZW5zaXRpdmVEaWN0CmZyb20gLnV0aWxzIGltcG9ydCAoCiAgICBERUZBVUxUX0NBX0JVTkRMRV9QQVRILAogICAgZXh0cmFjdF96aXBwZWRfcGF0aHMsCiAgICBnZXRfYXV0aF9mcm9tX3VybCwKICAgIGdldF9lbmNvZGluZ19mcm9tX2hlYWRlcnMsCiAgICBwcmVwZW5kX3NjaGVtZV9pZl9uZWVkZWQsCiAgICBzZWxlY3RfcHJveHksCiAgICB1cmxkZWZyYWdhdXRoLAopCgp0cnk6CiAgICBmcm9tIHVybGxpYjMuY29udHJpYi5zb2NrcyBpbXBvcnQgU09DS1NQcm94eU1hbmFnZXIKZXhjZXB0IEltcG9ydEVycm9yOgoKICAgIGRlZiBTT0NLU1Byb3h5TWFuYWdlcigqYXJncywgKiprd2FyZ3MpOgogICAgICAgIHJhaXNlIEludmFsaWRTY2hlbWEoXCJNaXNzaW5nIGRlcGVuZGVuY2llcyBmb3IgU09DS1Mgc3VwcG9ydC5cIikKCgpERUZBVUxUX1BPT0xCTE9DSyA9IEZhbHNlCkRFRkFVTFRfUE9PTFNJWkUgPSAxMApERUZBVUxUX1JFVFJJRVMgPSAwCkRFRkFVTFRfUE9PTF9USU1FT1VUID0gTm9uZQoKCmNsYXNzIEJhc2VBZGFwdGVyOgogICAgXCJcIlwiVGhlIEJhc2UgVHJhbnNwb3J0IEFkYXB0ZXJcIlwiXCIKCiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygpCgogICAgZGVmIHNlbmQoCiAgICAgICAgc2VsZiwgcmVxdWVzdCwgc3RyZWFtPUZhbHNlLCB0aW1lb3V0PU5vbmUsIHZlcmlmeT1UcnVlLCBjZXJ0PU5vbmUsIHByb3hpZXM9Tm9uZQogICAgKToKICAgICAgICBcIlwiXCJTZW5kcyBQcmVwYXJlZFJlcXVlc3Qgb2JqZWN0LiBSZXR1cm5zIFJlc3BvbnNlIG9iamVjdC4KCiAgICAgICAgOnBhcmFtIHJlcXVlc3Q6IFRoZSA6Y2xhc3M6YFByZXBhcmVkUmVxdWVzdCA8UHJlcGFyZWRSZXF1ZXN0PmAgYmVpbmcgc2VudC4KICAgICAgICA6cGFyYW0gc3RyZWFtOiAob3B0aW9uYWwpIFdoZXRoZXIgdG8gc3RyZWFtIHRoZSByZXF1ZXN0IGNvbnRlbnQuCiAgICAgICAgOnBhcmFtIHRpbWVvdXQ6IChvcHRpb25hbCkgSG93IGxvbmcgdG8gd2FpdCBmb3IgdGhlIHNlcnZlciB0byBzZW5kCiAgICAgICAgICAgIGRhdGEgYmVmb3JlIGdpdmluZyB1cCwgYXMgYSBmbG9hdCwgb3IgYSA6cmVmOmAoY29ubmVjdCB0aW1lb3V0LAogICAgICAgICAgICByZWFkIHRpbWVvdXQpIDx0aW1lb3V0cz5gIHR1cGxlLgogICAgICAgIDp0eXBlIHRpbWVvdXQ6IGZsb2F0IG9yIHR1cGxlCiAgICAgICAgOnBhcmFtIHZlcmlmeTogKG9wdGlvbmFsKSBFaXRoZXIgYSBib29sZWFuLCBpbiB3aGljaCBjYXNlIGl0IGNvbnRyb2xzIHdoZXRoZXIgd2UgdmVyaWZ5CiAgICAgICAgICAgIHRoZSBzZXJ2ZXIncyBUTFMgY2VydGlmaWNhdGUsIG9yIGEgc3RyaW5nLCBpbiB3aGljaCBjYXNlIGl0IG11c3QgYmUgYSBwYXRoCiAgICAgICAgICAgIHRvIGEgQ0EgYnVuZGxlIHRvIHVzZQogICAgICAgIDpwYXJhbSBjZXJ0OiAob3B0aW9uYWwpIEFueSB1c2VyLXByb3ZpZGVkIFNTTCBjZXJ0aWZpY2F0ZSB0byBiZSB0cnVzdGVkLgogICAgICAgIDpwYXJhbSBwcm94aWVzOiAob3B0aW9uYWwpIFRoZSBwcm94aWVzIGRpY3Rpb25hcnkgdG8gYXBwbHkgdG8gdGhlIHJlcXVlc3QuCiAgICAgICAgXCJcIlwiCiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcgoKICAgIGRlZiBjbG9zZShzZWxmKToKICAgICAgICBcIlwiXCJDbGVhbnMgdXAgYWRhcHRlciBzcGVjaWZpYyBpdGVtcy5cIlwiXCIKICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yCgoKY2xhc3MgSFRUUEFkYXB0ZXIoQmFzZUFkYXB0ZXIpOgogICAgXCJcIlwiVGhlIGJ1aWx0LWluIEhUVFAgQWRhcHRlciBmb3IgdXJsbGliMy4KCiAgICBQcm92aWRlcyBhIGdlbmVyYWwtY2FzZSBpbnRlcmZhY2UgZm9yIFJlcXVlc3RzIHNlc3Npb25zIHRvIGNvbnRhY3QgSFRUUCBhbmQKICAgIEhUVFBTIHVybHMgYnkgaW1wbGVtZW50aW5nIHRoZSBUcmFuc3BvcnQgQWRhcHRlciBpbnRlcmZhY2UuIFRoaXMgY2xhc3Mgd2lsbAogICAgdXN1YWxseSBiZSBjcmVhdGVkIGJ5IHRoZSA6Y2xhc3M6YFNlc3Npb24gPFNlc3Npb24+YCBjbGFzcyB1bmRlciB0aGUKICAgIGNvdmVycy4KCiAgICA6cGFyYW0gcG9vbF9jb25uZWN0aW9uczogVGhlIG51bWJlciBvZiB1cmxsaWIzIGNvbm5lY3Rpb24gcG9vbHMgdG8gY2FjaGUuCiAgICA6cGFyYW0gcG9vbF9tYXhzaXplOiBUaGUgbWF4aW11bSBudW1iZXIgb2YgY29ubmVjdGlvbnMgdG8gc2F2ZSBpbiB0aGUgcG9vbC4KICAgIDpwYXJhbSBtYXhfcmV0cmllczogVGhlIG1heGltdW0gbnVtYmVyIG9mIHJldHJpZXMgZWFjaCBjb25uZWN0aW9uCiAgICAgICAgc2hvdWxkIGF0dGVtcHQuIE5vdGUsIHRoaXMgYXBwbGllcyBvbmx5IHRvIGZhaWxlZCBETlMgbG9va3Vwcywgc29ja2V0CiAgICAgICAgY29ubmVjdGlvbnMgYW5kIGNvbm5lY3Rpb24gdGltZW91dHMsIG5ldmVyIHRvIHJlcXVlc3RzIHdoZXJlIGRhdGEgaGFzCiAgICAgICAgbWFkZSBpdCB0byB0aGUgc2VydmVyLiBCeSBkZWZhdWx0LCBSZXF1ZXN0cyBkb2VzIG5vdCByZXRyeSBmYWlsZWQKICAgICAgICBjb25uZWN0aW9ucy4gSWYgeW91IG5lZWQgZ3JhbnVsYXIgY29udHJvbCBvdmVyIHRoZSBjb25kaXRpb25zIHVuZGVyCiAgICAgICAgd2hpY2ggd2UgcmV0cnkgYSByZXF1ZXN0LCBpbXBvcnQgdXJsbGliMydzIGBgUmV0cnlgYCBjbGFzcyBhbmQgcGFzcwogICAgICAgIHRoYXQgaW5zdGVhZC4KICAgIDpwYXJhbSBwb29sX2Jsb2NrOiBXaGV0aGVyIHRoZSBjb25uZWN0aW9uIHBvb2wgc2hvdWxkIGJsb2NrIGZvciBjb25uZWN0aW9ucy4KCiAgICBVc2FnZTo6CgogICAgICA+Pj4gaW1wb3J0IHJlcXVlc3RzCiAgICAgID4+PiBzID0gcmVxdWVzdHMuU2Vzc2lvbigpCiAgICAgID4+PiBhID0gcmVxdWVzdHMuYWRhcHRlcnMuSFRUUEFkYXB0ZXIobWF4X3JldHJpZXM9MykKICAgICAgPj4+IHMubW91bnQoJ2h0dHA6Ly8nLCBhKQogICAgXCJcIlwiCgogICAgX19hdHRyc19fID0gWwogICAgICAgIFwibWF4X3JldHJpZXNcIiwKICAgICAgICBcImNvbmZpZ1wiLAogICAgICAgIFwiX3Bvb2xfY29ubmVjdGlvbnNcIiwKICAgICAgICBcIl9wb29sX21heHNpemVcIiwKICAgICAgICBcIl9wb29sX2Jsb2NrXCIsCiAgICBdCgogICAgZGVmIF9faW5pdF9fKAogICAgICAgIHNlbGYsCiAgICAgICAgcG9vbF9jb25uZWN0aW9ucz1ERUZBVUxUX1BPT0xTSVpFLAogICAgICAgIHBvb2xfbWF4c2l6ZT1ERUZBVUxUX1BPT0xTSVpFLAogICAgICAgIG1heF9yZXRyaWVzPURFRkFVTFRfUkVUUklFUywKICAgICAgICBwb29sX2Jsb2NrPURFRkFVTFRfUE9PTEJMT0NLLAogICAgKToKICAgICAgICBpZiBtYXhfcmV0cmllcyA9PSBERUZBVUxUX1JFVFJJRVM6CiAgICAgICAgICAgIHNlbGYubWF4X3JldHJpZXMgPSBSZXRyeSgwLCByZWFkPUZhbHNlKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYubWF4X3JldHJpZXMgPSBSZXRyeS5mcm9tX2ludChtYXhfcmV0cmllcykKICAgICAgICBzZWxmLmNvbmZpZyA9IHt9CiAgICAgICAgc2VsZi5wcm94eV9tYW5hZ2VyID0ge30KCiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygpCgogICAgICAgIHNlbGYuX3Bvb2xfY29ubmVjdGlvbnMgPSBwb29sX2Nvbm5lY3Rpb25zCiAgICAgICAgc2VsZi5fcG9vbF9tYXhzaXplID0gcG9vbF9tYXhzaXplCiAgICAgICAgc2VsZi5fcG9vbF9ibG9jayA9IHBvb2xfYmxvY2sKCiAgICAgICAgc2VsZi5pbml0X3Bvb2xtYW5hZ2VyKHBvb2xfY29ubmVjdGlvbnMsIHBvb2xfbWF4c2l6ZSwgYmxvY2s9cG9vbF9ibG9jaykKCiAgICBkZWYgX19nZXRzdGF0ZV9fKHNlbGYpOgogICAgICAgIHJldHVybiB7YXR0cjogZ2V0YXR0cihzZWxmLCBhdHRyLCBOb25lKSBmb3IgYXR0ciBpbiBzZWxmLl9fYXR0cnNfX30KCiAgICBkZWYgX19zZXRzdGF0ZV9fKHNlbGYsIHN0YXRlKToKICAgICAgICAjIENhbid0IGhhbmRsZSBieSBhZGRpbmcgJ3Byb3h5X21hbmFnZXInIHRvIHNlbGYuX19hdHRyc19fIGJlY2F1c2UKICAgICAgICAjIHNlbGYucG9vbG1hbmFnZXIgdXNlcyBhIGxhbWJkYSBmdW5jdGlvbiwgd2hpY2ggaXNuJ3QgcGlja2xlYWJsZS4KICAgICAgICBzZWxmLnByb3h5X21hbmFnZXIgPSB7fQogICAgICAgIHNlbGYuY29uZmlnID0ge30KCiAgICAgICAgZm9yIGF0dHIsIHZhbHVlIGluIHN0YXRlLml0ZW1zKCk6CiAgICAgICAgICAgIHNldGF0dHIoc2VsZiwgYXR0ciwgdmFsdWUpCgogICAgICAgIHNlbGYuaW5pdF9wb29sbWFuYWdlcigKICAgICAgICAgICAgc2VsZi5fcG9vbF9jb25uZWN0aW9ucywgc2VsZi5fcG9vbF9tYXhzaXplLCBibG9jaz1zZWxmLl9wb29sX2Jsb2NrCiAgICAgICAgKQoKICAgIGRlZiBpbml0X3Bvb2xtYW5hZ2VyKAogICAgICAgIHNlbGYsIGNvbm5lY3Rpb25zLCBtYXhzaXplLCBibG9jaz1ERUZBVUxUX1BPT0xCTE9DSywgKipwb29sX2t3YXJncwogICAgKToKICAgICAgICBcIlwiXCJJbml0aWFsaXplcyBhIHVybGxpYjMgUG9vbE1hbmFnZXIuCgogICAgICAgIFRoaXMgbWV0aG9kIHNob3VsZCBub3QgYmUgY2FsbGVkIGZyb20gdXNlciBjb2RlLCBhbmQgaXMgb25seQogICAgICAgIGV4cG9zZWQgZm9yIHVzZSB3aGVuIHN1YmNsYXNzaW5nIHRoZQogICAgICAgIDpjbGFzczpgSFRUUEFkYXB0ZXIgPHJlcXVlc3RzLmFkYXB0ZXJzLkhUVFBBZGFwdGVyPmAuCgogICAgICAgIDpwYXJhbSBjb25uZWN0aW9uczogVGhlIG51bWJlciBvZiB1cmxsaWIzIGNvbm5lY3Rpb24gcG9vbHMgdG8gY2FjaGUuCiAgICAgICAgOnBhcmFtIG1heHNpemU6IFRoZSBtYXhpbXVtIG51bWJlciBvZiBjb25uZWN0aW9ucyB0byBzYXZlIGluIHRoZSBwb29sLgogICAgICAgIDpwYXJhbSBibG9jazogQmxvY2sgd2hlbiBubyBmcmVlIGNvbm5lY3Rpb25zIGFyZSBhdmFpbGFibGUuCiAgICAgICAgOnBhcmFtIHBvb2xfa3dhcmdzOiBFeHRyYSBrZXl3b3JkIGFyZ3VtZW50cyB1c2VkIHRvIGluaXRpYWxpemUgdGhlIFBvb2wgTWFuYWdlci4KICAgICAgICBcIlwiXCIKICAgICAgICAjIHNhdmUgdGhlc2UgdmFsdWVzIGZvciBwaWNrbGluZwogICAgICAgIHNlbGYuX3Bvb2xfY29ubmVjdGlvbnMgPSBjb25uZWN0aW9ucwogICAgICAgIHNlbGYuX3Bvb2xfbWF4c2l6ZSA9IG1heHNpemUKICAgICAgICBzZWxmLl9wb29sX2Jsb2NrID0gYmxvY2sKCiAgICAgICAgc2VsZi5wb29sbWFuYWdlciA9IFBvb2xNYW5hZ2VyKAogICAgICAgICAgICBudW1fcG9vbHM9Y29ubmVjdGlvbnMsCiAgICAgICAgICAgIG1heHNpemU9bWF4c2l6ZSwKICAgICAgICAgICAgYmxvY2s9YmxvY2ssCiAgICAgICAgICAgIHN0cmljdD1UcnVlLAogICAgICAgICAgICAqKnBvb2xfa3dhcmdzLAogICAgICAgICkKCiAgICBkZWYgcHJveHlfbWFuYWdlcl9mb3Ioc2VsZiwgcHJveHksICoqcHJveHlfa3dhcmdzKToKICAgICAgICBcIlwiXCJSZXR1cm4gdXJsbGliMyBQcm94eU1hbmFnZXIgZm9yIHRoZSBnaXZlbiBwcm94eS4KCiAgICAgICAgVGhpcyBtZXRob2Qgc2hvdWxkIG5vdCBiZSBjYWxsZWQgZnJvbSB1c2VyIGNvZGUsIGFuZCBpcyBvbmx5CiAgICAgICAgZXhwb3NlZCBmb3IgdXNlIHdoZW4gc3ViY2xhc3NpbmcgdGhlCiAgICAgICAgOmNsYXNzOmBIVFRQQWRhcHRlciA8cmVxdWVzdHMuYWRhcHRlcnMuSFRUUEFkYXB0ZXI+YC4KCiAgICAgICAgOnBhcmFtIHByb3h5OiBUaGUgcHJveHkgdG8gcmV0dXJuIGEgdXJsbGliMyBQcm94eU1hbmFnZXIgZm9yLgogICAgICAgIDpwYXJhbSBwcm94eV9rd2FyZ3M6IEV4dHJhIGtleXdvcmQgYXJndW1lbnRzIHVzZWQgdG8gY29uZmlndXJlIHRoZSBQcm94eSBNYW5hZ2VyLgogICAgICAgIDpyZXR1cm5zOiBQcm94eU1hbmFnZXIKICAgICAgICA6cnR5cGU6IHVybGxpYjMuUHJveHlNYW5hZ2VyCiAgICAgICAgXCJcIlwiCiAgICAgICAgaWYgcHJveHkgaW4gc2VsZi5wcm94eV9tYW5hZ2VyOgogICAgICAgICAgICBtYW5hZ2VyID0gc2VsZi5wcm94eV9tYW5hZ2VyW3Byb3h5XQogICAgICAgIGVsaWYgcHJveHkubG93ZXIoKS5zdGFydHN3aXRoKFwic29ja3NcIik6CiAgICAgICAgICAgIHVzZXJuYW1lLCBwYXNzd29yZCA9IGdldF9hdXRoX2Zyb21fdXJsKHByb3h5KQogICAgICAgICAgICBtYW5hZ2VyID0gc2VsZi5wcm94eV9tYW5hZ2VyW3Byb3h5XSA9IFNPQ0tTUHJveHlNYW5hZ2VyKAogICAgICAgICAgICAgICAgcHJveHksCiAgICAgICAgICAgICAgICB1c2VybmFtZT11c2VybmFtZSwKICAgICAgICAgICAgICAgIHBhc3N3b3JkPXBhc3N3b3JkLAogICAgICAgICAgICAgICAgbnVtX3Bvb2xzPXNlbGYuX3Bvb2xfY29ubmVjdGlvbnMsCiAgICAgICAgICAgICAgICBtYXhzaXplPXNlbGYuX3Bvb2xfbWF4c2l6ZSwKICAgICAgICAgICAgICAgIGJsb2NrPXNlbGYuX3Bvb2xfYmxvY2ssCiAgICAgICAgICAgICAgICAqKnByb3h5X2t3YXJncywKICAgICAgICAgICAgKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByb3h5X2hlYWRlcnMgPSBzZWxmLnByb3h5X2hlYWRlcnMocHJveHkpCiAgICAgICAgICAgIG1hbmFnZXIgPSBzZWxmLnByb3h5X21hbmFnZXJbcHJveHldID0gcHJveHlfZnJvbV91cmwoCiAgICAgICAgICAgICAgICBwcm94eSwKICAgICAgICAgICAgICAgIHByb3h5X2hlYWRlcnM9cHJveHlfaGVhZGVycywKICAgICAgICAgICAgICAgIG51bV9wb29scz1zZWxmLl9wb29sX2Nvbm5lY3Rpb25zLAogICAgICAgICAgICAgICAgbWF4c2l6ZT1zZWxmLl9wb29sX21heHNpemUsCiAgICAgICAgICAgICAgICBibG9jaz1zZWxmLl9wb29sX2Jsb2NrLAogICAgICAgICAgICAgICAgKipwcm94eV9rd2FyZ3MsCiAgICAgICAgICAgICkKCiAgICAgICAgcmV0dXJuIG1hbmFnZXIKCiAgICBkZWYgY2VydF92ZXJpZnkoc2VsZiwgY29ubiwgdXJsLCB2ZXJpZnksIGNlcnQpOgogICAgICAgIFwiXCJcIlZlcmlmeSBhIFNTTCBjZXJ0aWZpY2F0ZS4gVGhpcyBtZXRob2Qgc2hvdWxkIG5vdCBiZSBjYWxsZWQgZnJvbSB1c2VyCiAgICAgICAgY29kZSwgYW5kIGlzIG9ubHkgZXhwb3NlZCBmb3IgdXNlIHdoZW4gc3ViY2xhc3NpbmcgdGhlCiAgICAgICAgOmNsYXNzOmBIVFRQQWRhcHRlciA8cmVxdWVzdHMuYWRhcHRlcnMuSFRUUEFkYXB0ZXI+YC4KCiAgICAgICAgOnBhcmFtIGNvbm46IFRoZSB1cmxsaWIzIGNvbm5lY3Rpb24gb2JqZWN0IGFzc29jaWF0ZWQgd2l0aCB0aGUgY2VydC4KICAgICAgICA6cGFyYW0gdXJsOiBUaGUgcmVxdWVzdGVkIFVSTC4KICAgICAgICA6cGFyYW0gdmVyaWZ5OiBFaXRoZXIgYSBib29sZWFuLCBpbiB3aGljaCBjYXNlIGl0IGNvbnRyb2xzIHdoZXRoZXIgd2UgdmVyaWZ5CiAgICAgICAgICAgIHRoZSBzZXJ2ZXIncyBUTFMgY2VydGlmaWNhdGUsIG9yIGEgc3RyaW5nLCBpbiB3aGljaCBjYXNlIGl0IG11c3QgYmUgYSBwYXRoCiAgICAgICAgICAgIHRvIGEgQ0EgYnVuZGxlIHRvIHVzZQogICAgICAgIDpwYXJhbSBjZXJ0OiBUaGUgU1NMIGNlcnRpZmljYXRlIHRvIHZlcmlmeS4KICAgICAgICBcIlwiXCIKICAgICAgICBpZiB1cmwubG93ZXIoKS5zdGFydHN3aXRoKFwiaHR0cHNcIikgYW5kIHZlcmlmeToKCiAgICAgICAgICAgIGNlcnRfbG9jID0gTm9uZQoKICAgICAgICAgICAgIyBBbGxvdyBzZWxmLXNwZWNpZmllZCBjZXJ0IGxvY2F0aW9uLgogICAgICAgICAgICBpZiB2ZXJpZnkgaXMgbm90IFRydWU6CiAgICAgICAgICAgICAgICBjZXJ0X2xvYyA9IHZlcmlmeQoKICAgICAgICAgICAgaWYgbm90IGNlcnRfbG9jOgogICAgICAgICAgICAgICAgY2VydF9sb2MgPSBleHRyYWN0X3ppcHBlZF9wYXRocyhERUZBVUxUX0NBX0JVTkRMRV9QQVRIKQoKICAgICAgICAgICAgaWYgbm90IGNlcnRfbG9jIG9yIG5vdCBvcy5wYXRoLmV4aXN0cyhjZXJ0X2xvYyk6CiAgICAgICAgICAgICAgICByYWlzZSBPU0Vycm9yKAogICAgICAgICAgICAgICAgICAgIGZcIkNvdWxkIG5vdCBmaW5kIGEgc3VpdGFibGUgVExTIENBIGNlcnRpZmljYXRlIGJ1bmRsZSwgXCIKICAgICAgICAgICAgICAgICAgICBmXCJpbnZhbGlkIHBhdGg6IHtjZXJ0X2xvY31cIgogICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgY29ubi5jZXJ0X3JlcXMgPSBcIkNFUlRfUkVRVUlSRURcIgoKICAgICAgICAgICAgaWYgbm90IG9zLnBhdGguaXNkaXIoY2VydF9sb2MpOgogICAgICAgICAgICAgICAgY29ubi5jYV9jZXJ0cyA9IGNlcnRfbG9jCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBjb25uLmNhX2NlcnRfZGlyID0gY2VydF9sb2MKICAgICAgICBlbHNlOgogICAgICAgICAgICBjb25uLmNlcnRfcmVxcyA9IFwiQ0VSVF9OT05FXCIKICAgICAgICAgICAgY29ubi5jYV9jZXJ0cyA9IE5vbmUKICAgICAgICAgICAgY29ubi5jYV9jZXJ0X2RpciA9IE5vbmUKCiAgICAgICAgaWYgY2VydDoKICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoY2VydCwgYmFzZXN0cmluZyk6CiAgICAgICAgICAgICAgICBjb25uLmNlcnRfZmlsZSA9IGNlcnRbMF0KICAgICAgICAgICAgICAgIGNvbm4ua2V5X2ZpbGUgPSBjZXJ0WzFdCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBjb25uLmNlcnRfZmlsZSA9IGNlcnQKICAgICAgICAgICAgICAgIGNvbm4ua2V5X2ZpbGUgPSBOb25lCiAgICAgICAgICAgIGlmIGNvbm4uY2VydF9maWxlIGFuZCBub3Qgb3MucGF0aC5leGlzdHMoY29ubi5jZXJ0X2ZpbGUpOgogICAgICAgICAgICAgICAgcmFpc2UgT1NFcnJvcigKICAgICAgICAgICAgICAgICAgICBmXCJDb3VsZCBub3QgZmluZCB0aGUgVExTIGNlcnRpZmljYXRlIGZpbGUsIFwiCiAgICAgICAgICAgICAgICAgICAgZlwiaW52YWxpZCBwYXRoOiB7Y29ubi5jZXJ0X2ZpbGV9XCIKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgaWYgY29ubi5rZXlfZmlsZSBhbmQgbm90IG9zLnBhdGguZXhpc3RzKGNvbm4ua2V5X2ZpbGUpOgogICAgICAgICAgICAgICAgcmFpc2UgT1NFcnJvcigKICAgICAgICAgICAgICAgICAgICBmXCJDb3VsZCBub3QgZmluZCB0aGUgVExTIGtleSBmaWxlLCBpbnZhbGlkIHBhdGg6IHtjb25uLmtleV9maWxlfVwiCiAgICAgICAgICAgICAgICApCgogICAgZGVmIGJ1aWxkX3Jlc3BvbnNlKHNlbGYsIHJlcSwgcmVzcCk6CiAgICAgICAgXCJcIlwiQnVpbGRzIGEgOmNsYXNzOmBSZXNwb25zZSA8cmVxdWVzdHMuUmVzcG9uc2U+YCBvYmplY3QgZnJvbSBhIHVybGxpYjMKICAgICAgICByZXNwb25zZS4gVGhpcyBzaG91bGQgbm90IGJlIGNhbGxlZCBmcm9tIHVzZXIgY29kZSwgYW5kIGlzIG9ubHkgZXhwb3NlZAogICAgICAgIGZvciB1c2Ugd2hlbiBzdWJjbGFzc2luZyB0aGUKICAgICAgICA6Y2xhc3M6YEhUVFBBZGFwdGVyIDxyZXF1ZXN0cy5hZGFwdGVycy5IVFRQQWRhcHRlcj5gCgogICAgICAgIDpwYXJhbSByZXE6IFRoZSA6Y2xhc3M6YFByZXBhcmVkUmVxdWVzdCA8UHJlcGFyZWRSZXF1ZXN0PmAgdXNlZCB0byBnZW5lcmF0ZSB0aGUgcmVzcG9uc2UuCiAgICAgICAgOnBhcmFtIHJlc3A6IFRoZSB1cmxsaWIzIHJlc3BvbnNlIG9iamVjdC4KICAgICAgICA6cnR5cGU6IHJlcXVlc3RzLlJlc3BvbnNlCiAgICAgICAgXCJcIlwiCiAgICAgICAgcmVzcG9uc2UgPSBSZXNwb25zZSgpCgogICAgICAgICMgRmFsbGJhY2sgdG8gTm9uZSBpZiB0aGVyZSdzIG5vIHN0YXR1c19jb2RlLCBmb3Igd2hhdGV2ZXIgcmVhc29uLgogICAgICAgIHJlc3BvbnNlLnN0YXR1c19jb2RlID0gZ2V0YXR0cihyZXNwLCBcInN0YXR1c1wiLCBOb25lKQoKICAgICAgICAjIE1ha2UgaGVhZGVycyBjYXNlLWluc2Vuc2l0aXZlLgogICAgICAgIHJlc3BvbnNlLmhlYWRlcnMgPSBDYXNlSW5zZW5zaXRpdmVEaWN0KGdldGF0dHIocmVzcCwgXCJoZWFkZXJzXCIsIHt9KSkKCiAgICAgICAgIyBTZXQgZW5jb2RpbmcuCiAgICAgICAgcmVzcG9uc2UuZW5jb2RpbmcgPSBnZXRfZW5jb2RpbmdfZnJvbV9oZWFkZXJzKHJlc3BvbnNlLmhlYWRlcnMpCiAgICAgICAgcmVzcG9uc2UucmF3ID0gcmVzcAogICAgICAgIHJlc3BvbnNlLnJlYXNvbiA9IHJlc3BvbnNlLnJhdy5yZWFzb24KCiAgICAgICAgaWYgaXNpbnN0YW5jZShyZXEudXJsLCBieXRlcyk6CiAgICAgICAgICAgIHJlc3BvbnNlLnVybCA9IHJlcS51cmwuZGVjb2RlKFwidXRmLThcIikKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXNwb25zZS51cmwgPSByZXEudXJsCgogICAgICAgICMgQWRkIG5ldyBjb29raWVzIGZyb20gdGhlIHNlcnZlci4KICAgICAgICBleHRyYWN0X2Nvb2tpZXNfdG9famFyKHJlc3BvbnNlLmNvb2tpZXMsIHJlcSwgcmVzcCkKCiAgICAgICAgIyBHaXZlIHRoZSBSZXNwb25zZSBzb21lIGNvbnRleHQuCiAgICAgICAgcmVzcG9uc2UucmVxdWVzdCA9IHJlcQogICAgICAgIHJlc3BvbnNlLmNvbm5lY3Rpb24gPSBzZWxmCgogICAgICAgIHJldHVybiByZXNwb25zZQoKICAgIGRlZiBnZXRfY29ubmVjdGlvbihzZWxmLCB1cmwsIHByb3hpZXM9Tm9uZSk6CiAgICAgICAgXCJcIlwiUmV0dXJucyBhIHVybGxpYjMgY29ubmVjdGlvbiBmb3IgdGhlIGdpdmVuIFVSTC4gVGhpcyBzaG91bGQgbm90IGJlCiAgICAgICAgY2FsbGVkIGZyb20gdXNlciBjb2RlLCBhbmQgaXMgb25seSBleHBvc2VkIGZvciB1c2Ugd2hlbiBzdWJjbGFzc2luZyB0aGUKICAgICAgICA6Y2xhc3M6YEhUVFBBZGFwdGVyIDxyZXF1ZXN0cy5hZGFwdGVycy5IVFRQQWRhcHRlcj5gLgoKICAgICAgICA6cGFyYW0gdXJsOiBUaGUgVVJMIHRvIGNvbm5lY3QgdG8uCiAgICAgICAgOnBhcmFtIHByb3hpZXM6IChvcHRpb25hbCkgQSBSZXF1ZXN0cy1zdHlsZSBkaWN0aW9uYXJ5IG9mIHByb3hpZXMgdXNlZCBvbiB0aGlzIHJlcXVlc3QuCiAgICAgICAgOnJ0eXBlOiB1cmxsaWIzLkNvbm5lY3Rpb25Qb29sCiAgICAgICAgXCJcIlwiCiAgICAgICAgcHJveHkgPSBzZWxlY3RfcHJveHkodXJsLCBwcm94aWVzKQoKICAgICAgICBpZiBwcm94eToKICAgICAgICAgICAgcHJveHkgPSBwcmVwZW5kX3NjaGVtZV9pZl9uZWVkZWQocHJveHksIFwiaHR0cFwiKQogICAgICAgICAgICBwcm94eV91cmwgPSBwYXJzZV91cmwocHJveHkpCiAgICAgICAgICAgIGlmIG5vdCBwcm94eV91cmwuaG9zdDoKICAgICAgICAgICAgICAgIHJhaXNlIEludmFsaWRQcm94eVVSTCgKICAgICAgICAgICAgICAgICAgICBcIlBsZWFzZSBjaGVjayBwcm94eSBVUkwuIEl0IGlzIG1hbGZvcm1lZCBcIgogICAgICAgICAgICAgICAgICAgIFwiYW5kIGNvdWxkIGJlIG1pc3NpbmcgdGhlIGhvc3QuXCIKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgcHJveHlfbWFuYWdlciA9IHNlbGYucHJveHlfbWFuYWdlcl9mb3IocHJveHkpCiAgICAgICAgICAgIGNvbm4gPSBwcm94eV9tYW5hZ2VyLmNvbm5lY3Rpb25fZnJvbV91cmwodXJsKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgT25seSBzY2hlbWUgc2hvdWxkIGJlIGxvd2VyIGNhc2UKICAgICAgICAgICAgcGFyc2VkID0gdXJscGFyc2UodXJsKQogICAgICAgICAgICB1cmwgPSBwYXJzZWQuZ2V0dXJsKCkKICAgICAgICAgICAgY29ubiA9IHNlbGYucG9vbG1hbmFnZXIuY29ubmVjdGlvbl9mcm9tX3VybCh1cmwpCgogICAgICAgIHJldHVybiBjb25uCgogICAgZGVmIGNsb3NlKHNlbGYpOgogICAgICAgIFwiXCJcIkRpc3Bvc2VzIG9mIGFueSBpbnRlcm5hbCBzdGF0ZS4KCiAgICAgICAgQ3VycmVudGx5LCB0aGlzIGNsb3NlcyB0aGUgUG9vbE1hbmFnZXIgYW5kIGFueSBhY3RpdmUgUHJveHlNYW5hZ2VyLAogICAgICAgIHdoaWNoIGNsb3NlcyBhbnkgcG9vbGVkIGNvbm5lY3Rpb25zLgogICAgICAgIFwiXCJcIgogICAgICAgIHNlbGYucG9vbG1hbmFnZXIuY2xlYXIoKQogICAgICAgIGZvciBwcm94eSBpbiBzZWxmLnByb3h5X21hbmFnZXIudmFsdWVzKCk6CiAgICAgICAgICAgIHByb3h5LmNsZWFyKCkKCiAgICBkZWYgcmVxdWVzdF91cmwoc2VsZiwgcmVxdWVzdCwgcHJveGllcyk6CiAgICAgICAgXCJcIlwiT2J0YWluIHRoZSB1cmwgdG8gdXNlIHdoZW4gbWFraW5nIHRoZSBmaW5hbCByZXF1ZXN0LgoKICAgICAgICBJZiB0aGUgbWVzc2FnZSBpcyBiZWluZyBzZW50IHRocm91Z2ggYSBIVFRQIHByb3h5LCB0aGUgZnVsbCBVUkwgaGFzIHRvCiAgICAgICAgYmUgdXNlZC4gT3RoZXJ3aXNlLCB3ZSBzaG91bGQgb25seSB1c2UgdGhlIHBhdGggcG9ydGlvbiBvZiB0aGUgVVJMLgoKICAgICAgICBUaGlzIHNob3VsZCBub3QgYmUgY2FsbGVkIGZyb20gdXNlciBjb2RlLCBhbmQgaXMgb25seSBleHBvc2VkIGZvciB1c2UKICAgICAgICB3aGVuIHN1YmNsYXNzaW5nIHRoZQogICAgICAgIDpjbGFzczpgSFRUUEFkYXB0ZXIgPHJlcXVlc3RzLmFkYXB0ZXJzLkhUVFBBZGFwdGVyPmAuCgogICAgICAgIDpwYXJhbSByZXF1ZXN0OiBUaGUgOmNsYXNzOmBQcmVwYXJlZFJlcXVlc3QgPFByZXBhcmVkUmVxdWVzdD5gIGJlaW5nIHNlbnQuCiAgICAgICAgOnBhcmFtIHByb3hpZXM6IEEgZGljdGlvbmFyeSBvZiBzY2hlbWVzIG9yIHNjaGVtZXMgYW5kIGhvc3RzIHRvIHByb3h5IFVSTHMuCiAgICAgICAgOnJ0eXBlOiBzdHIKICAgICAgICBcIlwiXCIKICAgICAgICBwcm94eSA9IHNlbGVjdF9wcm94eShyZXF1ZXN0LnVybCwgcHJveGllcykKICAgICAgICBzY2hlbWUgPSB1cmxwYXJzZShyZXF1ZXN0LnVybCkuc2NoZW1lCgogICAgICAgIGlzX3Byb3hpZWRfaHR0cF9yZXF1ZXN0ID0gcHJveHkgYW5kIHNjaGVtZSAhPSBcImh0dHBzXCIKICAgICAgICB1c2luZ19zb2Nrc19wcm94eSA9IEZhbHNlCiAgICAgICAgaWYgcHJveHk6CiAgICAgICAgICAgIHByb3h5X3NjaGVtZSA9IHVybHBhcnNlKHByb3h5KS5zY2hlbWUubG93ZXIoKQogICAgICAgICAgICB1c2luZ19zb2Nrc19wcm94eSA9IHByb3h5X3NjaGVtZS5zdGFydHN3aXRoKFwic29ja3NcIikKCiAgICAgICAgdXJsID0gcmVxdWVzdC5wYXRoX3VybAogICAgICAgIGlmIGlzX3Byb3hpZWRfaHR0cF9yZXF1ZXN0IGFuZCBub3QgdXNpbmdfc29ja3NfcHJveHk6CiAgICAgICAgICAgIHVybCA9IHVybGRlZnJhZ2F1dGgocmVxdWVzdC51cmwpCgogICAgICAgIHJldHVybiB1cmwKCiAgICBkZWYgYWRkX2hlYWRlcnMoc2VsZiwgcmVxdWVzdCwgKiprd2FyZ3MpOgogICAgICAgIFwiXCJcIkFkZCBhbnkgaGVhZGVycyBuZWVkZWQgYnkgdGhlIGNvbm5lY3Rpb24uIEFzIG9mIHYyLjAgdGhpcyBkb2VzCiAgICAgICAgbm90aGluZyBieSBkZWZhdWx0LCBidXQgaXMgbGVmdCBmb3Igb3ZlcnJpZGluZyBieSB1c2VycyB0aGF0IHN1YmNsYXNzCiAgICAgICAgdGhlIDpjbGFzczpgSFRUUEFkYXB0ZXIgPHJlcXVlc3RzLmFkYXB0ZXJzLkhUVFBBZGFwdGVyPmAuCgogICAgICAgIFRoaXMgc2hvdWxkIG5vdCBiZSBjYWxsZWQgZnJvbSB1c2VyIGNvZGUsIGFuZCBpcyBvbmx5IGV4cG9zZWQgZm9yIHVzZQogICAgICAgIHdoZW4gc3ViY2xhc3NpbmcgdGhlCiAgICAgICAgOmNsYXNzOmBIVFRQQWRhcHRlciA8cmVxdWVzdHMuYWRhcHRlcnMuSFRUUEFkYXB0ZXI+YC4KCiAgICAgICAgOnBhcmFtIHJlcXVlc3Q6IFRoZSA6Y2xhc3M6YFByZXBhcmVkUmVxdWVzdCA8UHJlcGFyZWRSZXF1ZXN0PmAgdG8gYWRkIGhlYWRlcnMgdG8uCiAgICAgICAgOnBhcmFtIGt3YXJnczogVGhlIGtleXdvcmQgYXJndW1lbnRzIGZyb20gdGhlIGNhbGwgdG8gc2VuZCgpLgogICAgICAgIFwiXCJcIgogICAgICAgIHBhc3MKCiAgICBkZWYgcHJveHlfaGVhZGVycyhzZWxmLCBwcm94eSk6CiAgICAgICAgXCJcIlwiUmV0dXJucyBhIGRpY3Rpb25hcnkgb2YgdGhlIGhlYWRlcnMgdG8gYWRkIHRvIGFueSByZXF1ZXN0IHNlbnQKICAgICAgICB0aHJvdWdoIGEgcHJveHkuIFRoaXMgd29ya3Mgd2l0aCB1cmxsaWIzIG1hZ2ljIHRvIGVuc3VyZSB0aGF0IHRoZXkgYXJlCiAgICAgICAgY29ycmVjdGx5IHNlbnQgdG8gdGhlIHByb3h5LCByYXRoZXIgdGhhbiBpbiBhIHR1bm5lbGxlZCByZXF1ZXN0IGlmCiAgICAgICAgQ09OTkVDVCBpcyBiZWluZyB1c2VkLgoKICAgICAgICBUaGlzIHNob3VsZCBub3QgYmUgY2FsbGVkIGZyb20gdXNlciBjb2RlLCBhbmQgaXMgb25seSBleHBvc2VkIGZvciB1c2UKICAgICAgICB3aGVuIHN1YmNsYXNzaW5nIHRoZQogICAgICAgIDpjbGFzczpgSFRUUEFkYXB0ZXIgPHJlcXVlc3RzLmFkYXB0ZXJzLkhUVFBBZGFwdGVyPmAuCgogICAgICAgIDpwYXJhbSBwcm94eTogVGhlIHVybCBvZiB0aGUgcHJveHkgYmVpbmcgdXNlZCBmb3IgdGhpcyByZXF1ZXN0LgogICAgICAgIDpydHlwZTogZGljdAogICAgICAgIFwiXCJcIgogICAgICAgIGhlYWRlcnMgPSB7fQogICAgICAgIHVzZXJuYW1lLCBwYXNzd29yZCA9IGdldF9hdXRoX2Zyb21fdXJsKHByb3h5KQoKICAgICAgICBpZiB1c2VybmFtZToKICAgICAgICAgICAgaGVhZGVyc1tcIlByb3h5LUF1dGhvcml6YXRpb25cIl0gPSBfYmFzaWNfYXV0aF9zdHIodXNlcm5hbWUsIHBhc3N3b3JkKQoKICAgICAgICByZXR1cm4gaGVhZGVycwoKICAgIGRlZiBzZW5kKAogICAgICAgIHNlbGYsIHJlcXVlc3QsIHN0cmVhbT1GYWxzZSwgdGltZW91dD1Ob25lLCB2ZXJpZnk9VHJ1ZSwgY2VydD1Ob25lLCBwcm94aWVzPU5vbmUKICAgICk6CiAgICAgICAgXCJcIlwiU2VuZHMgUHJlcGFyZWRSZXF1ZXN0IG9iamVjdC4gUmV0dXJucyBSZXNwb25zZSBvYmplY3QuCgogICAgICAgIDpwYXJhbSByZXF1ZXN0OiBUaGUgOmNsYXNzOmBQcmVwYXJlZFJlcXVlc3QgPFByZXBhcmVkUmVxdWVzdD5gIGJlaW5nIHNlbnQuCiAgICAgICAgOnBhcmFtIHN0cmVhbTogKG9wdGlvbmFsKSBXaGV0aGVyIHRvIHN0cmVhbSB0aGUgcmVxdWVzdCBjb250ZW50LgogICAgICAgIDpwYXJhbSB0aW1lb3V0OiAob3B0aW9uYWwpIEhvdyBsb25nIHRvIHdhaXQgZm9yIHRoZSBzZXJ2ZXIgdG8gc2VuZAogICAgICAgICAgICBkYXRhIGJlZm9yZSBnaXZpbmcgdXAsIGFzIGEgZmxvYXQsIG9yIGEgOnJlZjpgKGNvbm5lY3QgdGltZW91dCwKICAgICAgICAgICAgcmVhZCB0aW1lb3V0KSA8dGltZW91dHM+YCB0dXBsZS4KICAgICAgICA6dHlwZSB0aW1lb3V0OiBmbG9hdCBvciB0dXBsZSBvciB1cmxsaWIzIFRpbWVvdXQgb2JqZWN0CiAgICAgICAgOnBhcmFtIHZlcmlmeTogKG9wdGlvbmFsKSBFaXRoZXIgYSBib29sZWFuLCBpbiB3aGljaCBjYXNlIGl0IGNvbnRyb2xzIHdoZXRoZXIKICAgICAgICAgICAgd2UgdmVyaWZ5IHRoZSBzZXJ2ZXIncyBUTFMgY2VydGlmaWNhdGUsIG9yIGEgc3RyaW5nLCBpbiB3aGljaCBjYXNlIGl0CiAgICAgICAgICAgIG11c3QgYmUgYSBwYXRoIHRvIGEgQ0EgYnVuZGxlIHRvIHVzZQogICAgICAgIDpwYXJhbSBjZXJ0OiAob3B0aW9uYWwpIEFueSB1c2VyLXByb3ZpZGVkIFNTTCBjZXJ0aWZpY2F0ZSB0byBiZSB0cnVzdGVkLgogICAgICAgIDpwYXJhbSBwcm94aWVzOiAob3B0aW9uYWwpIFRoZSBwcm94aWVzIGRpY3Rpb25hcnkgdG8gYXBwbHkgdG8gdGhlIHJlcXVlc3QuCiAgICAgICAgOnJ0eXBlOiByZXF1ZXN0cy5SZXNwb25zZQogICAgICAgIFwiXCJcIgoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGNvbm4gPSBzZWxmLmdldF9jb25uZWN0aW9uKHJlcXVlc3QudXJsLCBwcm94aWVzKQogICAgICAgIGV4Y2VwdCBMb2NhdGlvblZhbHVlRXJyb3IgYXMgZToKICAgICAgICAgICAgcmFpc2UgSW52YWxpZFVSTChlLCByZXF1ZXN0PXJlcXVlc3QpCgogICAgICAgIHNlbGYuY2VydF92ZXJpZnkoY29ubiwgcmVxdWVzdC51cmwsIHZlcmlmeSwgY2VydCkKICAgICAgICB1cmwgPSBzZWxmLnJlcXVlc3RfdXJsKHJlcXVlc3QsIHByb3hpZXMpCiAgICAgICAgc2VsZi5hZGRfaGVhZGVycygKICAgICAgICAgICAgcmVxdWVzdCwKICAgICAgICAgICAgc3RyZWFtPXN0cmVhbSwKICAgICAgICAgICAgdGltZW91dD10aW1lb3V0LAogICAgICAgICAgICB2ZXJpZnk9dmVyaWZ5LAogICAgICAgICAgICBjZXJ0PWNlcnQsCiAgICAgICAgICAgIHByb3hpZXM9cHJveGllcywKICAgICAgICApCgogICAgICAgIGNodW5rZWQgPSBub3QgKHJlcXVlc3QuYm9keSBpcyBOb25lIG9yIFwiQ29udGVudC1MZW5ndGhcIiBpbiByZXF1ZXN0LmhlYWRlcnMpCgogICAgICAgIGlmIGlzaW5zdGFuY2UodGltZW91dCwgdHVwbGUpOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBjb25uZWN0LCByZWFkID0gdGltZW91dAogICAgICAgICAgICAgICAgdGltZW91dCA9IFRpbWVvdXRTYXVjZShjb25uZWN0PWNvbm5lY3QsIHJlYWQ9cmVhZCkKICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKAogICAgICAgICAgICAgICAgICAgIGZcIkludmFsaWQgdGltZW91dCB7dGltZW91dH0uIFBhc3MgYSAoY29ubmVjdCwgcmVhZCkgdGltZW91dCB0dXBsZSwgXCIKICAgICAgICAgICAgICAgICAgICBmXCJvciBhIHNpbmdsZSBmbG9hdCB0byBzZXQgYm90aCB0aW1lb3V0cyB0byB0aGUgc2FtZSB2YWx1ZS5cIgogICAgICAgICAgICAgICAgKQogICAgICAgIGVsaWYgaXNpbnN0YW5jZSh0aW1lb3V0LCBUaW1lb3V0U2F1Y2UpOgogICAgICAgICAgICBwYXNzCiAgICAgICAgZWxzZToKICAgICAgICAgICAgdGltZW91dCA9IFRpbWVvdXRTYXVjZShjb25uZWN0PXRpbWVvdXQsIHJlYWQ9dGltZW91dCkKCiAgICAgICAgdHJ5OgogICAgICAgICAgICBpZiBub3QgY2h1bmtlZDoKICAgICAgICAgICAgICAgIHJlc3AgPSBjb25uLnVybG9wZW4oCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kPXJlcXVlc3QubWV0aG9kLAogICAgICAgICAgICAgICAgICAgIHVybD11cmwsCiAgICAgICAgICAgICAgICAgICAgYm9keT1yZXF1ZXN0LmJvZHksCiAgICAgICAgICAgICAgICAgICAgaGVhZGVycz1yZXF1ZXN0LmhlYWRlcnMsCiAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3Q9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0X3NhbWVfaG9zdD1GYWxzZSwKICAgICAgICAgICAgICAgICAgICBwcmVsb2FkX2NvbnRlbnQ9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgZGVjb2RlX2NvbnRlbnQ9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgcmV0cmllcz1zZWxmLm1heF9yZXRyaWVzLAogICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ9dGltZW91dCwKICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICMgU2VuZCB0aGUgcmVxdWVzdC4KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIGhhc2F0dHIoY29ubiwgXCJwcm94eV9wb29sXCIpOgogICAgICAgICAgICAgICAgICAgIGNvbm4gPSBjb25uLnByb3h5X3Bvb2wKCiAgICAgICAgICAgICAgICBsb3dfY29ubiA9IGNvbm4uX2dldF9jb25uKHRpbWVvdXQ9REVGQVVMVF9QT09MX1RJTUVPVVQpCgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHNraXBfaG9zdCA9IFwiSG9zdFwiIGluIHJlcXVlc3QuaGVhZGVycwogICAgICAgICAgICAgICAgICAgIGxvd19jb25uLnB1dHJlcXVlc3QoCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QubWV0aG9kLAogICAgICAgICAgICAgICAgICAgICAgICB1cmwsCiAgICAgICAgICAgICAgICAgICAgICAgIHNraXBfYWNjZXB0X2VuY29kaW5nPVRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHNraXBfaG9zdD1za2lwX2hvc3QsCiAgICAgICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgICAgICAgICBmb3IgaGVhZGVyLCB2YWx1ZSBpbiByZXF1ZXN0LmhlYWRlcnMuaXRlbXMoKToKICAgICAgICAgICAgICAgICAgICAgICAgbG93X2Nvbm4ucHV0aGVhZGVyKGhlYWRlciwgdmFsdWUpCgogICAgICAgICAgICAgICAgICAgIGxvd19jb25uLmVuZGhlYWRlcnMoKQoKICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiByZXF1ZXN0LmJvZHk6CiAgICAgICAgICAgICAgICAgICAgICAgIGxvd19jb25uLnNlbmQoaGV4KGxlbihpKSlbMjpdLmVuY29kZShcInV0Zi04XCIpKQogICAgICAgICAgICAgICAgICAgICAgICBsb3dfY29ubi5zZW5kKGJcIlxcclxcblwiKQogICAgICAgICAgICAgICAgICAgICAgICBsb3dfY29ubi5zZW5kKGkpCiAgICAgICAgICAgICAgICAgICAgICAgIGxvd19jb25uLnNlbmQoYlwiXFxyXFxuXCIpCiAgICAgICAgICAgICAgICAgICAgbG93X2Nvbm4uc2VuZChiXCIwXFxyXFxuXFxyXFxuXCIpCgogICAgICAgICAgICAgICAgICAgICMgUmVjZWl2ZSB0aGUgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyCiAgICAgICAgICAgICAgICAgICAgciA9IGxvd19jb25uLmdldHJlc3BvbnNlKCkKCiAgICAgICAgICAgICAgICAgICAgcmVzcCA9IEhUVFBSZXNwb25zZS5mcm9tX2h0dHBsaWIoCiAgICAgICAgICAgICAgICAgICAgICAgIHIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBvb2w9Y29ubiwKICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbj1sb3dfY29ubiwKICAgICAgICAgICAgICAgICAgICAgICAgcHJlbG9hZF9jb250ZW50PUZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICBkZWNvZGVfY29udGVudD1GYWxzZSwKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICAgICAgICAgICMgSWYgd2UgaGl0IGFueSBwcm9ibGVtcyBoZXJlLCBjbGVhbiB1cCB0aGUgY29ubmVjdGlvbi4KICAgICAgICAgICAgICAgICAgICAjIFRoZW4sIHJhaXNlIHNvIHRoYXQgd2UgY2FuIGhhbmRsZSB0aGUgYWN0dWFsIGV4Y2VwdGlvbi4KICAgICAgICAgICAgICAgICAgICBsb3dfY29ubi5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgcmFpc2UKCiAgICAgICAgZXhjZXB0IChQcm90b2NvbEVycm9yLCBPU0Vycm9yKSBhcyBlcnI6CiAgICAgICAgICAgIHJhaXNlIENvbm5lY3Rpb25FcnJvcihlcnIsIHJlcXVlc3Q9cmVxdWVzdCkKCiAgICAgICAgZXhjZXB0IE1heFJldHJ5RXJyb3IgYXMgZToKICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShlLnJlYXNvbiwgQ29ubmVjdFRpbWVvdXRFcnJvcik6CiAgICAgICAgICAgICAgICAjIFRPRE86IFJlbW92ZSB0aGlzIGluIDMuMC4wOiBzZWUgIzI4MTEKICAgICAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGUucmVhc29uLCBOZXdDb25uZWN0aW9uRXJyb3IpOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIENvbm5lY3RUaW1lb3V0KGUsIHJlcXVlc3Q9cmVxdWVzdCkKCiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoZS5yZWFzb24sIFJlc3BvbnNlRXJyb3IpOgogICAgICAgICAgICAgICAgcmFpc2UgUmV0cnlFcnJvcihlLCByZXF1ZXN0PXJlcXVlc3QpCgogICAgICAgICAgICBpZiBpc2luc3RhbmNlKGUucmVhc29uLCBfUHJveHlFcnJvcik6CiAgICAgICAgICAgICAgICByYWlzZSBQcm94eUVycm9yKGUsIHJlcXVlc3Q9cmVxdWVzdCkKCiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoZS5yZWFzb24sIF9TU0xFcnJvcik6CiAgICAgICAgICAgICAgICAjIFRoaXMgYnJhbmNoIGlzIGZvciB1cmxsaWIzIHYxLjIyIGFuZCBsYXRlci4KICAgICAgICAgICAgICAgIHJhaXNlIFNTTEVycm9yKGUsIHJlcXVlc3Q9cmVxdWVzdCkKCiAgICAgICAgICAgIHJhaXNlIENvbm5lY3Rpb25FcnJvcihlLCByZXF1ZXN0PXJlcXVlc3QpCgogICAgICAgIGV4Y2VwdCBDbG9zZWRQb29sRXJyb3IgYXMgZToKICAgICAgICAgICAgcmFpc2UgQ29ubmVjdGlvbkVycm9yKGUsIHJlcXVlc3Q9cmVxdWVzdCkKCiAgICAgICAgZXhjZXB0IF9Qcm94eUVycm9yIGFzIGU6CiAgICAgICAgICAgIHJhaXNlIFByb3h5RXJyb3IoZSkKCiAgICAgICAgZXhjZXB0IChfU1NMRXJyb3IsIF9IVFRQRXJyb3IpIGFzIGU6CiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoZSwgX1NTTEVycm9yKToKICAgICAgICAgICAgICAgICMgVGhpcyBicmFuY2ggaXMgZm9yIHVybGxpYjMgdmVyc2lvbnMgZWFybGllciB0aGFuIHYxLjIyCiAgICAgICAgICAgICAgICByYWlzZSBTU0xFcnJvcihlLCByZXF1ZXN0PXJlcXVlc3QpCiAgICAgICAgICAgIGVsaWYgaXNpbnN0YW5jZShlLCBSZWFkVGltZW91dEVycm9yKToKICAgICAgICAgICAgICAgIHJhaXNlIFJlYWRUaW1lb3V0KGUsIHJlcXVlc3Q9cmVxdWVzdCkKICAgICAgICAgICAgZWxpZiBpc2luc3RhbmNlKGUsIF9JbnZhbGlkSGVhZGVyKToKICAgICAgICAgICAgICAgIHJhaXNlIEludmFsaWRIZWFkZXIoZSwgcmVxdWVzdD1yZXF1ZXN0KQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmFpc2UKCiAgICAgICAgcmV0dXJuIHNlbGYuYnVpbGRfcmVzcG9uc2UocmVxdWVzdCwgcmVzcCkKCiIiIgptb2R1bGVfZGljdFsicmVxdWVzdHMiK29zLnNlcCsibW9kZWxzLnB5Il09IiIiCiMgPCBpbmNsdWRlICd1cmxsaWIzLnB5JyA+CgojIDwgaW5jbHVkZSAnaWRuYS5weScgPgoKXCJcIlwiCnJlcXVlc3RzLm1vZGVscwp+fn5+fn5+fn5+fn5+fn4KClRoaXMgbW9kdWxlIGNvbnRhaW5zIHRoZSBwcmltYXJ5IG9iamVjdHMgdGhhdCBwb3dlciBSZXF1ZXN0cy4KXCJcIlwiCgppbXBvcnQgZGF0ZXRpbWUKCiMgSW1wb3J0IGVuY29kaW5nIG5vdywgdG8gYXZvaWQgaW1wbGljaXQgaW1wb3J0IGxhdGVyLgojIEltcGxpY2l0IGltcG9ydCB3aXRoaW4gdGhyZWFkcyBtYXkgY2F1c2UgTG9va3VwRXJyb3Igd2hlbiBzdGFuZGFyZCBsaWJyYXJ5IGlzIGluIGEgWklQLAojIHN1Y2ggYXMgaW4gRW1iZWRkZWQgUHl0aG9uLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3BzZi9yZXF1ZXN0cy9pc3N1ZXMvMzU3OC4KaW1wb3J0IGVuY29kaW5ncy5pZG5hICAjIG5vcWE6IEY0MDEKZnJvbSBpbyBpbXBvcnQgVW5zdXBwb3J0ZWRPcGVyYXRpb24KCmZyb20gdXJsbGliMy5leGNlcHRpb25zIGltcG9ydCAoCiAgICBEZWNvZGVFcnJvciwKICAgIExvY2F0aW9uUGFyc2VFcnJvciwKICAgIFByb3RvY29sRXJyb3IsCiAgICBSZWFkVGltZW91dEVycm9yLAogICAgU1NMRXJyb3IsCikKZnJvbSB1cmxsaWIzLmZpZWxkcyBpbXBvcnQgUmVxdWVzdEZpZWxkCmZyb20gdXJsbGliMy5maWxlcG9zdCBpbXBvcnQgZW5jb2RlX211bHRpcGFydF9mb3JtZGF0YQpmcm9tIHVybGxpYjMudXRpbCBpbXBvcnQgcGFyc2VfdXJsCgpmcm9tIC5faW50ZXJuYWxfdXRpbHMgaW1wb3J0IHRvX25hdGl2ZV9zdHJpbmcsIHVuaWNvZGVfaXNfYXNjaWkKZnJvbSAuYXV0aCBpbXBvcnQgSFRUUEJhc2ljQXV0aApmcm9tIC5jb21wYXQgaW1wb3J0ICgKICAgIENhbGxhYmxlLAogICAgSlNPTkRlY29kZUVycm9yLAogICAgTWFwcGluZywKICAgIGJhc2VzdHJpbmcsCiAgICBidWlsdGluX3N0ciwKICAgIGNoYXJkZXQsCiAgICBjb29raWVsaWIsCikKZnJvbSAuY29tcGF0IGltcG9ydCBqc29uIGFzIGNvbXBsZXhqc29uCmZyb20gLmNvbXBhdCBpbXBvcnQgdXJsZW5jb2RlLCB1cmxzcGxpdCwgdXJsdW5wYXJzZQpmcm9tIC5jb29raWVzIGltcG9ydCBfY29weV9jb29raWVfamFyLCBjb29raWVqYXJfZnJvbV9kaWN0LCBnZXRfY29va2llX2hlYWRlcgpmcm9tIC5leGNlcHRpb25zIGltcG9ydCAoCiAgICBDaHVua2VkRW5jb2RpbmdFcnJvciwKICAgIENvbm5lY3Rpb25FcnJvciwKICAgIENvbnRlbnREZWNvZGluZ0Vycm9yLAogICAgSFRUUEVycm9yLAogICAgSW52YWxpZEpTT05FcnJvciwKICAgIEludmFsaWRVUkwsCikKZnJvbSAuZXhjZXB0aW9ucyBpbXBvcnQgSlNPTkRlY29kZUVycm9yIGFzIFJlcXVlc3RzSlNPTkRlY29kZUVycm9yCmZyb20gLmV4Y2VwdGlvbnMgaW1wb3J0IE1pc3NpbmdTY2hlbWEKZnJvbSAuZXhjZXB0aW9ucyBpbXBvcnQgU1NMRXJyb3IgYXMgUmVxdWVzdHNTU0xFcnJvcgpmcm9tIC5leGNlcHRpb25zIGltcG9ydCBTdHJlYW1Db25zdW1lZEVycm9yCmZyb20gLmhvb2tzIGltcG9ydCBkZWZhdWx0X2hvb2tzCmZyb20gLnN0YXR1c19jb2RlcyBpbXBvcnQgY29kZXMKZnJvbSAuc3RydWN0dXJlcyBpbXBvcnQgQ2FzZUluc2Vuc2l0aXZlRGljdApmcm9tIC51dGlscyBpbXBvcnQgKAogICAgY2hlY2tfaGVhZGVyX3ZhbGlkaXR5LAogICAgZ2V0X2F1dGhfZnJvbV91cmwsCiAgICBndWVzc19maWxlbmFtZSwKICAgIGd1ZXNzX2pzb25fdXRmLAogICAgaXRlcl9zbGljZXMsCiAgICBwYXJzZV9oZWFkZXJfbGlua3MsCiAgICByZXF1b3RlX3VyaSwKICAgIHN0cmVhbV9kZWNvZGVfcmVzcG9uc2VfdW5pY29kZSwKICAgIHN1cGVyX2xlbiwKICAgIHRvX2tleV92YWxfbGlzdCwKKQoKIzogVGhlIHNldCBvZiBIVFRQIHN0YXR1cyBjb2RlcyB0aGF0IGluZGljYXRlIGFuIGF1dG9tYXRpY2FsbHkKIzogcHJvY2Vzc2FibGUgcmVkaXJlY3QuClJFRElSRUNUX1NUQVRJID0gKAogICAgY29kZXMubW92ZWQsICAjIDMwMQogICAgY29kZXMuZm91bmQsICAjIDMwMgogICAgY29kZXMub3RoZXIsICAjIDMwMwogICAgY29kZXMudGVtcG9yYXJ5X3JlZGlyZWN0LCAgIyAzMDcKICAgIGNvZGVzLnBlcm1hbmVudF9yZWRpcmVjdCwgICMgMzA4CikKCkRFRkFVTFRfUkVESVJFQ1RfTElNSVQgPSAzMApDT05URU5UX0NIVU5LX1NJWkUgPSAxMCAqIDEwMjQKSVRFUl9DSFVOS19TSVpFID0gNTEyCgoKY2xhc3MgUmVxdWVzdEVuY29kaW5nTWl4aW46CiAgICBAcHJvcGVydHkKICAgIGRlZiBwYXRoX3VybChzZWxmKToKICAgICAgICBcIlwiXCJCdWlsZCB0aGUgcGF0aCBVUkwgdG8gdXNlLlwiXCJcIgoKICAgICAgICB1cmwgPSBbXQoKICAgICAgICBwID0gdXJsc3BsaXQoc2VsZi51cmwpCgogICAgICAgIHBhdGggPSBwLnBhdGgKICAgICAgICBpZiBub3QgcGF0aDoKICAgICAgICAgICAgcGF0aCA9IFwiL1wiCgogICAgICAgIHVybC5hcHBlbmQocGF0aCkKCiAgICAgICAgcXVlcnkgPSBwLnF1ZXJ5CiAgICAgICAgaWYgcXVlcnk6CiAgICAgICAgICAgIHVybC5hcHBlbmQoXCI/XCIpCiAgICAgICAgICAgIHVybC5hcHBlbmQocXVlcnkpCgogICAgICAgIHJldHVybiBcIlwiLmpvaW4odXJsKQoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBfZW5jb2RlX3BhcmFtcyhkYXRhKToKICAgICAgICBcIlwiXCJFbmNvZGUgcGFyYW1ldGVycyBpbiBhIHBpZWNlIG9mIGRhdGEuCgogICAgICAgIFdpbGwgc3VjY2Vzc2Z1bGx5IGVuY29kZSBwYXJhbWV0ZXJzIHdoZW4gcGFzc2VkIGFzIGEgZGljdCBvciBhIGxpc3Qgb2YKICAgICAgICAyLXR1cGxlcy4gT3JkZXIgaXMgcmV0YWluZWQgaWYgZGF0YSBpcyBhIGxpc3Qgb2YgMi10dXBsZXMgYnV0IGFyYml0cmFyeQogICAgICAgIGlmIHBhcmFtZXRlcnMgYXJlIHN1cHBsaWVkIGFzIGEgZGljdC4KICAgICAgICBcIlwiXCIKCiAgICAgICAgaWYgaXNpbnN0YW5jZShkYXRhLCAoc3RyLCBieXRlcykpOgogICAgICAgICAgICByZXR1cm4gZGF0YQogICAgICAgIGVsaWYgaGFzYXR0cihkYXRhLCBcInJlYWRcIik6CiAgICAgICAgICAgIHJldHVybiBkYXRhCiAgICAgICAgZWxpZiBoYXNhdHRyKGRhdGEsIFwiX19pdGVyX19cIik6CiAgICAgICAgICAgIHJlc3VsdCA9IFtdCiAgICAgICAgICAgIGZvciBrLCB2cyBpbiB0b19rZXlfdmFsX2xpc3QoZGF0YSk6CiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKHZzLCBiYXNlc3RyaW5nKSBvciBub3QgaGFzYXR0cih2cywgXCJfX2l0ZXJfX1wiKToKICAgICAgICAgICAgICAgICAgICB2cyA9IFt2c10KICAgICAgICAgICAgICAgIGZvciB2IGluIHZzOgogICAgICAgICAgICAgICAgICAgIGlmIHYgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgay5lbmNvZGUoXCJ1dGYtOFwiKSBpZiBpc2luc3RhbmNlKGssIHN0cikgZWxzZSBrLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuZW5jb2RlKFwidXRmLThcIikgaWYgaXNpbnN0YW5jZSh2LCBzdHIpIGVsc2UgdiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICByZXR1cm4gdXJsZW5jb2RlKHJlc3VsdCwgZG9zZXE9VHJ1ZSkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gZGF0YQoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBfZW5jb2RlX2ZpbGVzKGZpbGVzLCBkYXRhKToKICAgICAgICBcIlwiXCJCdWlsZCB0aGUgYm9keSBmb3IgYSBtdWx0aXBhcnQvZm9ybS1kYXRhIHJlcXVlc3QuCgogICAgICAgIFdpbGwgc3VjY2Vzc2Z1bGx5IGVuY29kZSBmaWxlcyB3aGVuIHBhc3NlZCBhcyBhIGRpY3Qgb3IgYSBsaXN0IG9mCiAgICAgICAgdHVwbGVzLiBPcmRlciBpcyByZXRhaW5lZCBpZiBkYXRhIGlzIGEgbGlzdCBvZiB0dXBsZXMgYnV0IGFyYml0cmFyeQogICAgICAgIGlmIHBhcmFtZXRlcnMgYXJlIHN1cHBsaWVkIGFzIGEgZGljdC4KICAgICAgICBUaGUgdHVwbGVzIG1heSBiZSAyLXR1cGxlcyAoZmlsZW5hbWUsIGZpbGVvYmopLCAzLXR1cGxlcyAoZmlsZW5hbWUsIGZpbGVvYmosIGNvbnRlbnR5cGUpCiAgICAgICAgb3IgNC10dXBsZXMgKGZpbGVuYW1lLCBmaWxlb2JqLCBjb250ZW50eXBlLCBjdXN0b21faGVhZGVycykuCiAgICAgICAgXCJcIlwiCiAgICAgICAgaWYgbm90IGZpbGVzOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFwiRmlsZXMgbXVzdCBiZSBwcm92aWRlZC5cIikKICAgICAgICBlbGlmIGlzaW5zdGFuY2UoZGF0YSwgYmFzZXN0cmluZyk6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXCJEYXRhIG11c3Qgbm90IGJlIGEgc3RyaW5nLlwiKQoKICAgICAgICBuZXdfZmllbGRzID0gW10KICAgICAgICBmaWVsZHMgPSB0b19rZXlfdmFsX2xpc3QoZGF0YSBvciB7fSkKICAgICAgICBmaWxlcyA9IHRvX2tleV92YWxfbGlzdChmaWxlcyBvciB7fSkKCiAgICAgICAgZm9yIGZpZWxkLCB2YWwgaW4gZmllbGRzOgogICAgICAgICAgICBpZiBpc2luc3RhbmNlKHZhbCwgYmFzZXN0cmluZykgb3Igbm90IGhhc2F0dHIodmFsLCBcIl9faXRlcl9fXCIpOgogICAgICAgICAgICAgICAgdmFsID0gW3ZhbF0KICAgICAgICAgICAgZm9yIHYgaW4gdmFsOgogICAgICAgICAgICAgICAgaWYgdiBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICAjIERvbid0IGNhbGwgc3RyKCkgb24gYnl0ZXN0cmluZ3M6IGluIFB5MyBpdCBhbGwgZ29lcyB3cm9uZy4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh2LCBieXRlcyk6CiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBzdHIodikKCiAgICAgICAgICAgICAgICAgICAgbmV3X2ZpZWxkcy5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgICAgICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLmRlY29kZShcInV0Zi04XCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKGZpZWxkLCBieXRlcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgZmllbGQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LmVuY29kZShcInV0Zi04XCIpIGlmIGlzaW5zdGFuY2Uodiwgc3RyKSBlbHNlIHYsCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApCgogICAgICAgIGZvciAoaywgdikgaW4gZmlsZXM6CiAgICAgICAgICAgICMgc3VwcG9ydCBmb3IgZXhwbGljaXQgZmlsZW5hbWUKICAgICAgICAgICAgZnQgPSBOb25lCiAgICAgICAgICAgIGZoID0gTm9uZQogICAgICAgICAgICBpZiBpc2luc3RhbmNlKHYsICh0dXBsZSwgbGlzdCkpOgogICAgICAgICAgICAgICAgaWYgbGVuKHYpID09IDI6CiAgICAgICAgICAgICAgICAgICAgZm4sIGZwID0gdgogICAgICAgICAgICAgICAgZWxpZiBsZW4odikgPT0gMzoKICAgICAgICAgICAgICAgICAgICBmbiwgZnAsIGZ0ID0gdgogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBmbiwgZnAsIGZ0LCBmaCA9IHYKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGZuID0gZ3Vlc3NfZmlsZW5hbWUodikgb3IgawogICAgICAgICAgICAgICAgZnAgPSB2CgogICAgICAgICAgICBpZiBpc2luc3RhbmNlKGZwLCAoc3RyLCBieXRlcywgYnl0ZWFycmF5KSk6CiAgICAgICAgICAgICAgICBmZGF0YSA9IGZwCiAgICAgICAgICAgIGVsaWYgaGFzYXR0cihmcCwgXCJyZWFkXCIpOgogICAgICAgICAgICAgICAgZmRhdGEgPSBmcC5yZWFkKCkKICAgICAgICAgICAgZWxpZiBmcCBpcyBOb25lOgogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGZkYXRhID0gZnAKCiAgICAgICAgICAgIHJmID0gUmVxdWVzdEZpZWxkKG5hbWU9aywgZGF0YT1mZGF0YSwgZmlsZW5hbWU9Zm4sIGhlYWRlcnM9ZmgpCiAgICAgICAgICAgIHJmLm1ha2VfbXVsdGlwYXJ0KGNvbnRlbnRfdHlwZT1mdCkKICAgICAgICAgICAgbmV3X2ZpZWxkcy5hcHBlbmQocmYpCgogICAgICAgIGJvZHksIGNvbnRlbnRfdHlwZSA9IGVuY29kZV9tdWx0aXBhcnRfZm9ybWRhdGEobmV3X2ZpZWxkcykKCiAgICAgICAgcmV0dXJuIGJvZHksIGNvbnRlbnRfdHlwZQoKCmNsYXNzIFJlcXVlc3RIb29rc01peGluOgogICAgZGVmIHJlZ2lzdGVyX2hvb2soc2VsZiwgZXZlbnQsIGhvb2spOgogICAgICAgIFwiXCJcIlByb3Blcmx5IHJlZ2lzdGVyIGEgaG9vay5cIlwiXCIKCiAgICAgICAgaWYgZXZlbnQgbm90IGluIHNlbGYuaG9va3M6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZidVbnN1cHBvcnRlZCBldmVudCBzcGVjaWZpZWQsIHdpdGggZXZlbnQgbmFtZSBcIntldmVudH1cIicpCgogICAgICAgIGlmIGlzaW5zdGFuY2UoaG9vaywgQ2FsbGFibGUpOgogICAgICAgICAgICBzZWxmLmhvb2tzW2V2ZW50XS5hcHBlbmQoaG9vaykKICAgICAgICBlbGlmIGhhc2F0dHIoaG9vaywgXCJfX2l0ZXJfX1wiKToKICAgICAgICAgICAgc2VsZi5ob29rc1tldmVudF0uZXh0ZW5kKGggZm9yIGggaW4gaG9vayBpZiBpc2luc3RhbmNlKGgsIENhbGxhYmxlKSkKCiAgICBkZWYgZGVyZWdpc3Rlcl9ob29rKHNlbGYsIGV2ZW50LCBob29rKToKICAgICAgICBcIlwiXCJEZXJlZ2lzdGVyIGEgcHJldmlvdXNseSByZWdpc3RlcmVkIGhvb2suCiAgICAgICAgUmV0dXJucyBUcnVlIGlmIHRoZSBob29rIGV4aXN0ZWQsIEZhbHNlIGlmIG5vdC4KICAgICAgICBcIlwiXCIKCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLmhvb2tzW2V2ZW50XS5yZW1vdmUoaG9vaykKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgoKY2xhc3MgUmVxdWVzdChSZXF1ZXN0SG9va3NNaXhpbik6CiAgICBcIlwiXCJBIHVzZXItY3JlYXRlZCA6Y2xhc3M6YFJlcXVlc3QgPFJlcXVlc3Q+YCBvYmplY3QuCgogICAgVXNlZCB0byBwcmVwYXJlIGEgOmNsYXNzOmBQcmVwYXJlZFJlcXVlc3QgPFByZXBhcmVkUmVxdWVzdD5gLCB3aGljaCBpcyBzZW50IHRvIHRoZSBzZXJ2ZXIuCgogICAgOnBhcmFtIG1ldGhvZDogSFRUUCBtZXRob2QgdG8gdXNlLgogICAgOnBhcmFtIHVybDogVVJMIHRvIHNlbmQuCiAgICA6cGFyYW0gaGVhZGVyczogZGljdGlvbmFyeSBvZiBoZWFkZXJzIHRvIHNlbmQuCiAgICA6cGFyYW0gZmlsZXM6IGRpY3Rpb25hcnkgb2Yge2ZpbGVuYW1lOiBmaWxlb2JqZWN0fSBmaWxlcyB0byBtdWx0aXBhcnQgdXBsb2FkLgogICAgOnBhcmFtIGRhdGE6IHRoZSBib2R5IHRvIGF0dGFjaCB0byB0aGUgcmVxdWVzdC4gSWYgYSBkaWN0aW9uYXJ5IG9yCiAgICAgICAgbGlzdCBvZiB0dXBsZXMgYGBbKGtleSwgdmFsdWUpXWBgIGlzIHByb3ZpZGVkLCBmb3JtLWVuY29kaW5nIHdpbGwKICAgICAgICB0YWtlIHBsYWNlLgogICAgOnBhcmFtIGpzb246IGpzb24gZm9yIHRoZSBib2R5IHRvIGF0dGFjaCB0byB0aGUgcmVxdWVzdCAoaWYgZmlsZXMgb3IgZGF0YSBpcyBub3Qgc3BlY2lmaWVkKS4KICAgIDpwYXJhbSBwYXJhbXM6IFVSTCBwYXJhbWV0ZXJzIHRvIGFwcGVuZCB0byB0aGUgVVJMLiBJZiBhIGRpY3Rpb25hcnkgb3IKICAgICAgICBsaXN0IG9mIHR1cGxlcyBgYFsoa2V5LCB2YWx1ZSldYGAgaXMgcHJvdmlkZWQsIGZvcm0tZW5jb2Rpbmcgd2lsbAogICAgICAgIHRha2UgcGxhY2UuCiAgICA6cGFyYW0gYXV0aDogQXV0aCBoYW5kbGVyIG9yICh1c2VyLCBwYXNzKSB0dXBsZS4KICAgIDpwYXJhbSBjb29raWVzOiBkaWN0aW9uYXJ5IG9yIENvb2tpZUphciBvZiBjb29raWVzIHRvIGF0dGFjaCB0byB0aGlzIHJlcXVlc3QuCiAgICA6cGFyYW0gaG9va3M6IGRpY3Rpb25hcnkgb2YgY2FsbGJhY2sgaG9va3MsIGZvciBpbnRlcm5hbCB1c2FnZS4KCiAgICBVc2FnZTo6CgogICAgICA+Pj4gaW1wb3J0IHJlcXVlc3RzCiAgICAgID4+PiByZXEgPSByZXF1ZXN0cy5SZXF1ZXN0KCdHRVQnLCAnaHR0cHM6Ly9odHRwYmluLm9yZy9nZXQnKQogICAgICA+Pj4gcmVxLnByZXBhcmUoKQogICAgICA8UHJlcGFyZWRSZXF1ZXN0IFtHRVRdPgogICAgXCJcIlwiCgogICAgZGVmIF9faW5pdF9fKAogICAgICAgIHNlbGYsCiAgICAgICAgbWV0aG9kPU5vbmUsCiAgICAgICAgdXJsPU5vbmUsCiAgICAgICAgaGVhZGVycz1Ob25lLAogICAgICAgIGZpbGVzPU5vbmUsCiAgICAgICAgZGF0YT1Ob25lLAogICAgICAgIHBhcmFtcz1Ob25lLAogICAgICAgIGF1dGg9Tm9uZSwKICAgICAgICBjb29raWVzPU5vbmUsCiAgICAgICAgaG9va3M9Tm9uZSwKICAgICAgICBqc29uPU5vbmUsCiAgICApOgoKICAgICAgICAjIERlZmF1bHQgZW1wdHkgZGljdHMgZm9yIGRpY3QgcGFyYW1zLgogICAgICAgIGRhdGEgPSBbXSBpZiBkYXRhIGlzIE5vbmUgZWxzZSBkYXRhCiAgICAgICAgZmlsZXMgPSBbXSBpZiBmaWxlcyBpcyBOb25lIGVsc2UgZmlsZXMKICAgICAgICBoZWFkZXJzID0ge30gaWYgaGVhZGVycyBpcyBOb25lIGVsc2UgaGVhZGVycwogICAgICAgIHBhcmFtcyA9IHt9IGlmIHBhcmFtcyBpcyBOb25lIGVsc2UgcGFyYW1zCiAgICAgICAgaG9va3MgPSB7fSBpZiBob29rcyBpcyBOb25lIGVsc2UgaG9va3MKCiAgICAgICAgc2VsZi5ob29rcyA9IGRlZmF1bHRfaG9va3MoKQogICAgICAgIGZvciAoaywgdikgaW4gbGlzdChob29rcy5pdGVtcygpKToKICAgICAgICAgICAgc2VsZi5yZWdpc3Rlcl9ob29rKGV2ZW50PWssIGhvb2s9dikKCiAgICAgICAgc2VsZi5tZXRob2QgPSBtZXRob2QKICAgICAgICBzZWxmLnVybCA9IHVybAogICAgICAgIHNlbGYuaGVhZGVycyA9IGhlYWRlcnMKICAgICAgICBzZWxmLmZpbGVzID0gZmlsZXMKICAgICAgICBzZWxmLmRhdGEgPSBkYXRhCiAgICAgICAgc2VsZi5qc29uID0ganNvbgogICAgICAgIHNlbGYucGFyYW1zID0gcGFyYW1zCiAgICAgICAgc2VsZi5hdXRoID0gYXV0aAogICAgICAgIHNlbGYuY29va2llcyA9IGNvb2tpZXMKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGZcIjxSZXF1ZXN0IFt7c2VsZi5tZXRob2R9XT5cIgoKICAgIGRlZiBwcmVwYXJlKHNlbGYpOgogICAgICAgIFwiXCJcIkNvbnN0cnVjdHMgYSA6Y2xhc3M6YFByZXBhcmVkUmVxdWVzdCA8UHJlcGFyZWRSZXF1ZXN0PmAgZm9yIHRyYW5zbWlzc2lvbiBhbmQgcmV0dXJucyBpdC5cIlwiXCIKICAgICAgICBwID0gUHJlcGFyZWRSZXF1ZXN0KCkKICAgICAgICBwLnByZXBhcmUoCiAgICAgICAgICAgIG1ldGhvZD1zZWxmLm1ldGhvZCwKICAgICAgICAgICAgdXJsPXNlbGYudXJsLAogICAgICAgICAgICBoZWFkZXJzPXNlbGYuaGVhZGVycywKICAgICAgICAgICAgZmlsZXM9c2VsZi5maWxlcywKICAgICAgICAgICAgZGF0YT1zZWxmLmRhdGEsCiAgICAgICAgICAgIGpzb249c2VsZi5qc29uLAogICAgICAgICAgICBwYXJhbXM9c2VsZi5wYXJhbXMsCiAgICAgICAgICAgIGF1dGg9c2VsZi5hdXRoLAogICAgICAgICAgICBjb29raWVzPXNlbGYuY29va2llcywKICAgICAgICAgICAgaG9va3M9c2VsZi5ob29rcywKICAgICAgICApCiAgICAgICAgcmV0dXJuIHAKCgpjbGFzcyBQcmVwYXJlZFJlcXVlc3QoUmVxdWVzdEVuY29kaW5nTWl4aW4sIFJlcXVlc3RIb29rc01peGluKToKICAgIFwiXCJcIlRoZSBmdWxseSBtdXRhYmxlIDpjbGFzczpgUHJlcGFyZWRSZXF1ZXN0IDxQcmVwYXJlZFJlcXVlc3Q+YCBvYmplY3QsCiAgICBjb250YWluaW5nIHRoZSBleGFjdCBieXRlcyB0aGF0IHdpbGwgYmUgc2VudCB0byB0aGUgc2VydmVyLgoKICAgIEluc3RhbmNlcyBhcmUgZ2VuZXJhdGVkIGZyb20gYSA6Y2xhc3M6YFJlcXVlc3QgPFJlcXVlc3Q+YCBvYmplY3QsIGFuZAogICAgc2hvdWxkIG5vdCBiZSBpbnN0YW50aWF0ZWQgbWFudWFsbHk7IGRvaW5nIHNvIG1heSBwcm9kdWNlIHVuZGVzaXJhYmxlCiAgICBlZmZlY3RzLgoKICAgIFVzYWdlOjoKCiAgICAgID4+PiBpbXBvcnQgcmVxdWVzdHMKICAgICAgPj4+IHJlcSA9IHJlcXVlc3RzLlJlcXVlc3QoJ0dFVCcsICdodHRwczovL2h0dHBiaW4ub3JnL2dldCcpCiAgICAgID4+PiByID0gcmVxLnByZXBhcmUoKQogICAgICA+Pj4gcgogICAgICA8UHJlcGFyZWRSZXF1ZXN0IFtHRVRdPgoKICAgICAgPj4+IHMgPSByZXF1ZXN0cy5TZXNzaW9uKCkKICAgICAgPj4+IHMuc2VuZChyKQogICAgICA8UmVzcG9uc2UgWzIwMF0+CiAgICBcIlwiXCIKCiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgIzogSFRUUCB2ZXJiIHRvIHNlbmQgdG8gdGhlIHNlcnZlci4KICAgICAgICBzZWxmLm1ldGhvZCA9IE5vbmUKICAgICAgICAjOiBIVFRQIFVSTCB0byBzZW5kIHRoZSByZXF1ZXN0IHRvLgogICAgICAgIHNlbGYudXJsID0gTm9uZQogICAgICAgICM6IGRpY3Rpb25hcnkgb2YgSFRUUCBoZWFkZXJzLgogICAgICAgIHNlbGYuaGVhZGVycyA9IE5vbmUKICAgICAgICAjIFRoZSBgQ29va2llSmFyYCB1c2VkIHRvIGNyZWF0ZSB0aGUgQ29va2llIGhlYWRlciB3aWxsIGJlIHN0b3JlZCBoZXJlCiAgICAgICAgIyBhZnRlciBwcmVwYXJlX2Nvb2tpZXMgaXMgY2FsbGVkCiAgICAgICAgc2VsZi5fY29va2llcyA9IE5vbmUKICAgICAgICAjOiByZXF1ZXN0IGJvZHkgdG8gc2VuZCB0byB0aGUgc2VydmVyLgogICAgICAgIHNlbGYuYm9keSA9IE5vbmUKICAgICAgICAjOiBkaWN0aW9uYXJ5IG9mIGNhbGxiYWNrIGhvb2tzLCBmb3IgaW50ZXJuYWwgdXNhZ2UuCiAgICAgICAgc2VsZi5ob29rcyA9IGRlZmF1bHRfaG9va3MoKQogICAgICAgICM6IGludGVnZXIgZGVub3Rpbmcgc3RhcnRpbmcgcG9zaXRpb24gb2YgYSByZWFkYWJsZSBmaWxlLWxpa2UgYm9keS4KICAgICAgICBzZWxmLl9ib2R5X3Bvc2l0aW9uID0gTm9uZQoKICAgIGRlZiBwcmVwYXJlKAogICAgICAgIHNlbGYsCiAgICAgICAgbWV0aG9kPU5vbmUsCiAgICAgICAgdXJsPU5vbmUsCiAgICAgICAgaGVhZGVycz1Ob25lLAogICAgICAgIGZpbGVzPU5vbmUsCiAgICAgICAgZGF0YT1Ob25lLAogICAgICAgIHBhcmFtcz1Ob25lLAogICAgICAgIGF1dGg9Tm9uZSwKICAgICAgICBjb29raWVzPU5vbmUsCiAgICAgICAgaG9va3M9Tm9uZSwKICAgICAgICBqc29uPU5vbmUsCiAgICApOgogICAgICAgIFwiXCJcIlByZXBhcmVzIHRoZSBlbnRpcmUgcmVxdWVzdCB3aXRoIHRoZSBnaXZlbiBwYXJhbWV0ZXJzLlwiXCJcIgoKICAgICAgICBzZWxmLnByZXBhcmVfbWV0aG9kKG1ldGhvZCkKICAgICAgICBzZWxmLnByZXBhcmVfdXJsKHVybCwgcGFyYW1zKQogICAgICAgIHNlbGYucHJlcGFyZV9oZWFkZXJzKGhlYWRlcnMpCiAgICAgICAgc2VsZi5wcmVwYXJlX2Nvb2tpZXMoY29va2llcykKICAgICAgICBzZWxmLnByZXBhcmVfYm9keShkYXRhLCBmaWxlcywganNvbikKICAgICAgICBzZWxmLnByZXBhcmVfYXV0aChhdXRoLCB1cmwpCgogICAgICAgICMgTm90ZSB0aGF0IHByZXBhcmVfYXV0aCBtdXN0IGJlIGxhc3QgdG8gZW5hYmxlIGF1dGhlbnRpY2F0aW9uIHNjaGVtZXMKICAgICAgICAjIHN1Y2ggYXMgT0F1dGggdG8gd29yayBvbiBhIGZ1bGx5IHByZXBhcmVkIHJlcXVlc3QuCgogICAgICAgICMgVGhpcyBNVVNUIGdvIGFmdGVyIHByZXBhcmVfYXV0aC4gQXV0aGVudGljYXRvcnMgY291bGQgYWRkIGEgaG9vawogICAgICAgIHNlbGYucHJlcGFyZV9ob29rcyhob29rcykKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGZcIjxQcmVwYXJlZFJlcXVlc3QgW3tzZWxmLm1ldGhvZH1dPlwiCgogICAgZGVmIGNvcHkoc2VsZik6CiAgICAgICAgcCA9IFByZXBhcmVkUmVxdWVzdCgpCiAgICAgICAgcC5tZXRob2QgPSBzZWxmLm1ldGhvZAogICAgICAgIHAudXJsID0gc2VsZi51cmwKICAgICAgICBwLmhlYWRlcnMgPSBzZWxmLmhlYWRlcnMuY29weSgpIGlmIHNlbGYuaGVhZGVycyBpcyBub3QgTm9uZSBlbHNlIE5vbmUKICAgICAgICBwLl9jb29raWVzID0gX2NvcHlfY29va2llX2phcihzZWxmLl9jb29raWVzKQogICAgICAgIHAuYm9keSA9IHNlbGYuYm9keQogICAgICAgIHAuaG9va3MgPSBzZWxmLmhvb2tzCiAgICAgICAgcC5fYm9keV9wb3NpdGlvbiA9IHNlbGYuX2JvZHlfcG9zaXRpb24KICAgICAgICByZXR1cm4gcAoKICAgIGRlZiBwcmVwYXJlX21ldGhvZChzZWxmLCBtZXRob2QpOgogICAgICAgIFwiXCJcIlByZXBhcmVzIHRoZSBnaXZlbiBIVFRQIG1ldGhvZC5cIlwiXCIKICAgICAgICBzZWxmLm1ldGhvZCA9IG1ldGhvZAogICAgICAgIGlmIHNlbGYubWV0aG9kIGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZWxmLm1ldGhvZCA9IHRvX25hdGl2ZV9zdHJpbmcoc2VsZi5tZXRob2QudXBwZXIoKSkKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgX2dldF9pZG5hX2VuY29kZWRfaG9zdChob3N0KToKICAgICAgICBpbXBvcnQgaWRuYQoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGhvc3QgPSBpZG5hLmVuY29kZShob3N0LCB1dHM0Nj1UcnVlKS5kZWNvZGUoXCJ1dGYtOFwiKQogICAgICAgIGV4Y2VwdCBpZG5hLklETkFFcnJvcjoKICAgICAgICAgICAgcmFpc2UgVW5pY29kZUVycm9yCiAgICAgICAgcmV0dXJuIGhvc3QKCiAgICBkZWYgcHJlcGFyZV91cmwoc2VsZiwgdXJsLCBwYXJhbXMpOgogICAgICAgIFwiXCJcIlByZXBhcmVzIHRoZSBnaXZlbiBIVFRQIFVSTC5cIlwiXCIKICAgICAgICAjOiBBY2NlcHQgb2JqZWN0cyB0aGF0IGhhdmUgc3RyaW5nIHJlcHJlc2VudGF0aW9ucy4KICAgICAgICAjOiBXZSdyZSB1bmFibGUgdG8gYmxpbmRseSBjYWxsIHVuaWNvZGUvc3RyIGZ1bmN0aW9ucwogICAgICAgICM6IGFzIHRoaXMgd2lsbCBpbmNsdWRlIHRoZSBieXRlc3RyaW5nIGluZGljYXRvciAoYicnKQogICAgICAgICM6IG9uIHB5dGhvbiAzLnguCiAgICAgICAgIzogaHR0cHM6Ly9naXRodWIuY29tL3BzZi9yZXF1ZXN0cy9wdWxsLzIyMzgKICAgICAgICBpZiBpc2luc3RhbmNlKHVybCwgYnl0ZXMpOgogICAgICAgICAgICB1cmwgPSB1cmwuZGVjb2RlKFwidXRmOFwiKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHVybCA9IHN0cih1cmwpCgogICAgICAgICMgUmVtb3ZlIGxlYWRpbmcgd2hpdGVzcGFjZXMgZnJvbSB1cmwKICAgICAgICB1cmwgPSB1cmwubHN0cmlwKCkKCiAgICAgICAgIyBEb24ndCBkbyBhbnkgVVJMIHByZXBhcmF0aW9uIGZvciBub24tSFRUUCBzY2hlbWVzIGxpa2UgYG1haWx0b2AsCiAgICAgICAgIyBgZGF0YWAgZXRjIHRvIHdvcmsgYXJvdW5kIGV4Y2VwdGlvbnMgZnJvbSBgdXJsX3BhcnNlYCwgd2hpY2gKICAgICAgICAjIGhhbmRsZXMgUkZDIDM5ODYgb25seS4KICAgICAgICBpZiBcIjpcIiBpbiB1cmwgYW5kIG5vdCB1cmwubG93ZXIoKS5zdGFydHN3aXRoKFwiaHR0cFwiKToKICAgICAgICAgICAgc2VsZi51cmwgPSB1cmwKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICMgU3VwcG9ydCBmb3IgdW5pY29kZSBkb21haW4gbmFtZXMgYW5kIHBhdGhzLgogICAgICAgIHRyeToKICAgICAgICAgICAgc2NoZW1lLCBhdXRoLCBob3N0LCBwb3J0LCBwYXRoLCBxdWVyeSwgZnJhZ21lbnQgPSBwYXJzZV91cmwodXJsKQogICAgICAgIGV4Y2VwdCBMb2NhdGlvblBhcnNlRXJyb3IgYXMgZToKICAgICAgICAgICAgcmFpc2UgSW52YWxpZFVSTCgqZS5hcmdzKQoKICAgICAgICBpZiBub3Qgc2NoZW1lOgogICAgICAgICAgICByYWlzZSBNaXNzaW5nU2NoZW1hKAogICAgICAgICAgICAgICAgZlwiSW52YWxpZCBVUkwge3VybCFyfTogTm8gc2NoZW1lIHN1cHBsaWVkLiBcIgogICAgICAgICAgICAgICAgZlwiUGVyaGFwcyB5b3UgbWVhbnQgaHR0cDovL3t1cmx9P1wiCiAgICAgICAgICAgICkKCiAgICAgICAgaWYgbm90IGhvc3Q6CiAgICAgICAgICAgIHJhaXNlIEludmFsaWRVUkwoZlwiSW52YWxpZCBVUkwge3VybCFyfTogTm8gaG9zdCBzdXBwbGllZFwiKQoKICAgICAgICAjIEluIGdlbmVyYWwsIHdlIHdhbnQgdG8gdHJ5IElETkEgZW5jb2RpbmcgdGhlIGhvc3RuYW1lIGlmIHRoZSBzdHJpbmcgY29udGFpbnMKICAgICAgICAjIG5vbi1BU0NJSSBjaGFyYWN0ZXJzLiBUaGlzIGFsbG93cyB1c2VycyB0byBhdXRvbWF0aWNhbGx5IGdldCB0aGUgY29ycmVjdCBJRE5BCiAgICAgICAgIyBiZWhhdmlvdXIuIEZvciBzdHJpbmdzIGNvbnRhaW5pbmcgb25seSBBU0NJSSBjaGFyYWN0ZXJzLCB3ZSBuZWVkIHRvIGFsc28gdmVyaWZ5CiAgICAgICAgIyBpdCBkb2Vzbid0IHN0YXJ0IHdpdGggYSB3aWxkY2FyZCAoKiksIGJlZm9yZSBhbGxvd2luZyB0aGUgdW5lbmNvZGVkIGhvc3RuYW1lLgogICAgICAgIGlmIG5vdCB1bmljb2RlX2lzX2FzY2lpKGhvc3QpOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBob3N0ID0gc2VsZi5fZ2V0X2lkbmFfZW5jb2RlZF9ob3N0KGhvc3QpCiAgICAgICAgICAgIGV4Y2VwdCBVbmljb2RlRXJyb3I6CiAgICAgICAgICAgICAgICByYWlzZSBJbnZhbGlkVVJMKFwiVVJMIGhhcyBhbiBpbnZhbGlkIGxhYmVsLlwiKQogICAgICAgIGVsaWYgaG9zdC5zdGFydHN3aXRoKChcIipcIiwgXCIuXCIpKToKICAgICAgICAgICAgcmFpc2UgSW52YWxpZFVSTChcIlVSTCBoYXMgYW4gaW52YWxpZCBsYWJlbC5cIikKCiAgICAgICAgIyBDYXJlZnVsbHkgcmVjb25zdHJ1Y3QgdGhlIG5ldHdvcmsgbG9jYXRpb24KICAgICAgICBuZXRsb2MgPSBhdXRoIG9yIFwiXCIKICAgICAgICBpZiBuZXRsb2M6CiAgICAgICAgICAgIG5ldGxvYyArPSBcIkBcIgogICAgICAgIG5ldGxvYyArPSBob3N0CiAgICAgICAgaWYgcG9ydDoKICAgICAgICAgICAgbmV0bG9jICs9IGZcIjp7cG9ydH1cIgoKICAgICAgICAjIEJhcmUgZG9tYWlucyBhcmVuJ3QgdmFsaWQgVVJMcy4KICAgICAgICBpZiBub3QgcGF0aDoKICAgICAgICAgICAgcGF0aCA9IFwiL1wiCgogICAgICAgIGlmIGlzaW5zdGFuY2UocGFyYW1zLCAoc3RyLCBieXRlcykpOgogICAgICAgICAgICBwYXJhbXMgPSB0b19uYXRpdmVfc3RyaW5nKHBhcmFtcykKCiAgICAgICAgZW5jX3BhcmFtcyA9IHNlbGYuX2VuY29kZV9wYXJhbXMocGFyYW1zKQogICAgICAgIGlmIGVuY19wYXJhbXM6CiAgICAgICAgICAgIGlmIHF1ZXJ5OgogICAgICAgICAgICAgICAgcXVlcnkgPSBmXCJ7cXVlcnl9JntlbmNfcGFyYW1zfVwiCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBxdWVyeSA9IGVuY19wYXJhbXMKCiAgICAgICAgdXJsID0gcmVxdW90ZV91cmkodXJsdW5wYXJzZShbc2NoZW1lLCBuZXRsb2MsIHBhdGgsIE5vbmUsIHF1ZXJ5LCBmcmFnbWVudF0pKQogICAgICAgIHNlbGYudXJsID0gdXJsCgogICAgZGVmIHByZXBhcmVfaGVhZGVycyhzZWxmLCBoZWFkZXJzKToKICAgICAgICBcIlwiXCJQcmVwYXJlcyB0aGUgZ2l2ZW4gSFRUUCBoZWFkZXJzLlwiXCJcIgoKICAgICAgICBzZWxmLmhlYWRlcnMgPSBDYXNlSW5zZW5zaXRpdmVEaWN0KCkKICAgICAgICBpZiBoZWFkZXJzOgogICAgICAgICAgICBmb3IgaGVhZGVyIGluIGhlYWRlcnMuaXRlbXMoKToKICAgICAgICAgICAgICAgICMgUmFpc2UgZXhjZXB0aW9uIG9uIGludmFsaWQgaGVhZGVyIHZhbHVlLgogICAgICAgICAgICAgICAgY2hlY2tfaGVhZGVyX3ZhbGlkaXR5KGhlYWRlcikKICAgICAgICAgICAgICAgIG5hbWUsIHZhbHVlID0gaGVhZGVyCiAgICAgICAgICAgICAgICBzZWxmLmhlYWRlcnNbdG9fbmF0aXZlX3N0cmluZyhuYW1lKV0gPSB2YWx1ZQoKICAgIGRlZiBwcmVwYXJlX2JvZHkoc2VsZiwgZGF0YSwgZmlsZXMsIGpzb249Tm9uZSk6CiAgICAgICAgXCJcIlwiUHJlcGFyZXMgdGhlIGdpdmVuIEhUVFAgYm9keSBkYXRhLlwiXCJcIgoKICAgICAgICAjIENoZWNrIGlmIGZpbGUsIGZvLCBnZW5lcmF0b3IsIGl0ZXJhdG9yLgogICAgICAgICMgSWYgbm90LCBydW4gdGhyb3VnaCBub3JtYWwgcHJvY2Vzcy4KCiAgICAgICAgIyBOb3R0aW4nIG9uIHlvdS4KICAgICAgICBib2R5ID0gTm9uZQogICAgICAgIGNvbnRlbnRfdHlwZSA9IE5vbmUKCiAgICAgICAgaWYgbm90IGRhdGEgYW5kIGpzb24gaXMgbm90IE5vbmU6CiAgICAgICAgICAgICMgdXJsbGliMyByZXF1aXJlcyBhIGJ5dGVzLWxpa2UgYm9keS4gUHl0aG9uIDIncyBqc29uLmR1bXBzCiAgICAgICAgICAgICMgcHJvdmlkZXMgdGhpcyBuYXRpdmVseSwgYnV0IFB5dGhvbiAzIGdpdmVzIGEgVW5pY29kZSBzdHJpbmcuCiAgICAgICAgICAgIGNvbnRlbnRfdHlwZSA9IFwiYXBwbGljYXRpb24vanNvblwiCgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBib2R5ID0gY29tcGxleGpzb24uZHVtcHMoanNvbiwgYWxsb3dfbmFuPUZhbHNlKQogICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvciBhcyB2ZToKICAgICAgICAgICAgICAgIHJhaXNlIEludmFsaWRKU09ORXJyb3IodmUsIHJlcXVlc3Q9c2VsZikKCiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGJvZHksIGJ5dGVzKToKICAgICAgICAgICAgICAgIGJvZHkgPSBib2R5LmVuY29kZShcInV0Zi04XCIpCgogICAgICAgIGlzX3N0cmVhbSA9IGFsbCgKICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgaGFzYXR0cihkYXRhLCBcIl9faXRlcl9fXCIpLAogICAgICAgICAgICAgICAgbm90IGlzaW5zdGFuY2UoZGF0YSwgKGJhc2VzdHJpbmcsIGxpc3QsIHR1cGxlLCBNYXBwaW5nKSksCiAgICAgICAgICAgIF0KICAgICAgICApCgogICAgICAgIGlmIGlzX3N0cmVhbToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgbGVuZ3RoID0gc3VwZXJfbGVuKGRhdGEpCiAgICAgICAgICAgIGV4Y2VwdCAoVHlwZUVycm9yLCBBdHRyaWJ1dGVFcnJvciwgVW5zdXBwb3J0ZWRPcGVyYXRpb24pOgogICAgICAgICAgICAgICAgbGVuZ3RoID0gTm9uZQoKICAgICAgICAgICAgYm9keSA9IGRhdGEKCiAgICAgICAgICAgIGlmIGdldGF0dHIoYm9keSwgXCJ0ZWxsXCIsIE5vbmUpIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgIyBSZWNvcmQgdGhlIGN1cnJlbnQgZmlsZSBwb3NpdGlvbiBiZWZvcmUgcmVhZGluZy4KICAgICAgICAgICAgICAgICMgVGhpcyB3aWxsIGFsbG93IHVzIHRvIHJld2luZCBhIGZpbGUgaW4gdGhlIGV2ZW50CiAgICAgICAgICAgICAgICAjIG9mIGEgcmVkaXJlY3QuCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5fYm9keV9wb3NpdGlvbiA9IGJvZHkudGVsbCgpCiAgICAgICAgICAgICAgICBleGNlcHQgT1NFcnJvcjoKICAgICAgICAgICAgICAgICAgICAjIFRoaXMgZGlmZmVyZW50aWF0ZXMgZnJvbSBOb25lLCBhbGxvd2luZyB1cyB0byBjYXRjaAogICAgICAgICAgICAgICAgICAgICMgYSBmYWlsZWQgYHRlbGwoKWAgbGF0ZXIgd2hlbiB0cnlpbmcgdG8gcmV3aW5kIHRoZSBib2R5CiAgICAgICAgICAgICAgICAgICAgc2VsZi5fYm9keV9wb3NpdGlvbiA9IG9iamVjdCgpCgogICAgICAgICAgICBpZiBmaWxlczoKICAgICAgICAgICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgXCJTdHJlYW1lZCBib2RpZXMgYW5kIGZpbGVzIGFyZSBtdXR1YWxseSBleGNsdXNpdmUuXCIKICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgIGlmIGxlbmd0aDoKICAgICAgICAgICAgICAgIHNlbGYuaGVhZGVyc1tcIkNvbnRlbnQtTGVuZ3RoXCJdID0gYnVpbHRpbl9zdHIobGVuZ3RoKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi5oZWFkZXJzW1wiVHJhbnNmZXItRW5jb2RpbmdcIl0gPSBcImNodW5rZWRcIgogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgTXVsdGktcGFydCBmaWxlIHVwbG9hZHMuCiAgICAgICAgICAgIGlmIGZpbGVzOgogICAgICAgICAgICAgICAgKGJvZHksIGNvbnRlbnRfdHlwZSkgPSBzZWxmLl9lbmNvZGVfZmlsZXMoZmlsZXMsIGRhdGEpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiBkYXRhOgogICAgICAgICAgICAgICAgICAgIGJvZHkgPSBzZWxmLl9lbmNvZGVfcGFyYW1zKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShkYXRhLCBiYXNlc3RyaW5nKSBvciBoYXNhdHRyKGRhdGEsIFwicmVhZFwiKToKICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudF90eXBlID0gTm9uZQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRfdHlwZSA9IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIKCiAgICAgICAgICAgIHNlbGYucHJlcGFyZV9jb250ZW50X2xlbmd0aChib2R5KQoKICAgICAgICAgICAgIyBBZGQgY29udGVudC10eXBlIGlmIGl0IHdhc24ndCBleHBsaWNpdGx5IHByb3ZpZGVkLgogICAgICAgICAgICBpZiBjb250ZW50X3R5cGUgYW5kIChcImNvbnRlbnQtdHlwZVwiIG5vdCBpbiBzZWxmLmhlYWRlcnMpOgogICAgICAgICAgICAgICAgc2VsZi5oZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdID0gY29udGVudF90eXBlCgogICAgICAgIHNlbGYuYm9keSA9IGJvZHkKCiAgICBkZWYgcHJlcGFyZV9jb250ZW50X2xlbmd0aChzZWxmLCBib2R5KToKICAgICAgICBcIlwiXCJQcmVwYXJlIENvbnRlbnQtTGVuZ3RoIGhlYWRlciBiYXNlZCBvbiByZXF1ZXN0IG1ldGhvZCBhbmQgYm9keVwiXCJcIgogICAgICAgIGlmIGJvZHkgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGxlbmd0aCA9IHN1cGVyX2xlbihib2R5KQogICAgICAgICAgICBpZiBsZW5ndGg6CiAgICAgICAgICAgICAgICAjIElmIGxlbmd0aCBleGlzdHMsIHNldCBpdC4gT3RoZXJ3aXNlLCB3ZSBmYWxsYmFjawogICAgICAgICAgICAgICAgIyB0byBUcmFuc2Zlci1FbmNvZGluZzogY2h1bmtlZC4KICAgICAgICAgICAgICAgIHNlbGYuaGVhZGVyc1tcIkNvbnRlbnQtTGVuZ3RoXCJdID0gYnVpbHRpbl9zdHIobGVuZ3RoKQogICAgICAgIGVsaWYgKAogICAgICAgICAgICBzZWxmLm1ldGhvZCBub3QgaW4gKFwiR0VUXCIsIFwiSEVBRFwiKQogICAgICAgICAgICBhbmQgc2VsZi5oZWFkZXJzLmdldChcIkNvbnRlbnQtTGVuZ3RoXCIpIGlzIE5vbmUKICAgICAgICApOgogICAgICAgICAgICAjIFNldCBDb250ZW50LUxlbmd0aCB0byAwIGZvciBtZXRob2RzIHRoYXQgY2FuIGhhdmUgYSBib2R5CiAgICAgICAgICAgICMgYnV0IGRvbid0IHByb3ZpZGUgb25lLiAoaS5lLiBub3QgR0VUIG9yIEhFQUQpCiAgICAgICAgICAgIHNlbGYuaGVhZGVyc1tcIkNvbnRlbnQtTGVuZ3RoXCJdID0gXCIwXCIKCiAgICBkZWYgcHJlcGFyZV9hdXRoKHNlbGYsIGF1dGgsIHVybD1cIlwiKToKICAgICAgICBcIlwiXCJQcmVwYXJlcyB0aGUgZ2l2ZW4gSFRUUCBhdXRoIGRhdGEuXCJcIlwiCgogICAgICAgICMgSWYgbm8gQXV0aCBpcyBleHBsaWNpdGx5IHByb3ZpZGVkLCBleHRyYWN0IGl0IGZyb20gdGhlIFVSTCBmaXJzdC4KICAgICAgICBpZiBhdXRoIGlzIE5vbmU6CiAgICAgICAgICAgIHVybF9hdXRoID0gZ2V0X2F1dGhfZnJvbV91cmwoc2VsZi51cmwpCiAgICAgICAgICAgIGF1dGggPSB1cmxfYXV0aCBpZiBhbnkodXJsX2F1dGgpIGVsc2UgTm9uZQoKICAgICAgICBpZiBhdXRoOgogICAgICAgICAgICBpZiBpc2luc3RhbmNlKGF1dGgsIHR1cGxlKSBhbmQgbGVuKGF1dGgpID09IDI6CiAgICAgICAgICAgICAgICAjIHNwZWNpYWwtY2FzZSBiYXNpYyBIVFRQIGF1dGgKICAgICAgICAgICAgICAgIGF1dGggPSBIVFRQQmFzaWNBdXRoKCphdXRoKQoKICAgICAgICAgICAgIyBBbGxvdyBhdXRoIHRvIG1ha2UgaXRzIGNoYW5nZXMuCiAgICAgICAgICAgIHIgPSBhdXRoKHNlbGYpCgogICAgICAgICAgICAjIFVwZGF0ZSBzZWxmIHRvIHJlZmxlY3QgdGhlIGF1dGggY2hhbmdlcy4KICAgICAgICAgICAgc2VsZi5fX2RpY3RfXy51cGRhdGUoci5fX2RpY3RfXykKCiAgICAgICAgICAgICMgUmVjb21wdXRlIENvbnRlbnQtTGVuZ3RoCiAgICAgICAgICAgIHNlbGYucHJlcGFyZV9jb250ZW50X2xlbmd0aChzZWxmLmJvZHkpCgogICAgZGVmIHByZXBhcmVfY29va2llcyhzZWxmLCBjb29raWVzKToKICAgICAgICBcIlwiXCJQcmVwYXJlcyB0aGUgZ2l2ZW4gSFRUUCBjb29raWUgZGF0YS4KCiAgICAgICAgVGhpcyBmdW5jdGlvbiBldmVudHVhbGx5IGdlbmVyYXRlcyBhIGBgQ29va2llYGAgaGVhZGVyIGZyb20gdGhlCiAgICAgICAgZ2l2ZW4gY29va2llcyB1c2luZyBjb29raWVsaWIuIER1ZSB0byBjb29raWVsaWIncyBkZXNpZ24sIHRoZSBoZWFkZXIKICAgICAgICB3aWxsIG5vdCBiZSByZWdlbmVyYXRlZCBpZiBpdCBhbHJlYWR5IGV4aXN0cywgbWVhbmluZyB0aGlzIGZ1bmN0aW9uCiAgICAgICAgY2FuIG9ubHkgYmUgY2FsbGVkIG9uY2UgZm9yIHRoZSBsaWZlIG9mIHRoZQogICAgICAgIDpjbGFzczpgUHJlcGFyZWRSZXF1ZXN0IDxQcmVwYXJlZFJlcXVlc3Q+YCBvYmplY3QuIEFueSBzdWJzZXF1ZW50IGNhbGxzCiAgICAgICAgdG8gYGBwcmVwYXJlX2Nvb2tpZXNgYCB3aWxsIGhhdmUgbm8gYWN0dWFsIGVmZmVjdCwgdW5sZXNzIHRoZSBcIkNvb2tpZVwiCiAgICAgICAgaGVhZGVyIGlzIHJlbW92ZWQgYmVmb3JlaGFuZC4KICAgICAgICBcIlwiXCIKICAgICAgICBpZiBpc2luc3RhbmNlKGNvb2tpZXMsIGNvb2tpZWxpYi5Db29raWVKYXIpOgogICAgICAgICAgICBzZWxmLl9jb29raWVzID0gY29va2llcwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuX2Nvb2tpZXMgPSBjb29raWVqYXJfZnJvbV9kaWN0KGNvb2tpZXMpCgogICAgICAgIGNvb2tpZV9oZWFkZXIgPSBnZXRfY29va2llX2hlYWRlcihzZWxmLl9jb29raWVzLCBzZWxmKQogICAgICAgIGlmIGNvb2tpZV9oZWFkZXIgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYuaGVhZGVyc1tcIkNvb2tpZVwiXSA9IGNvb2tpZV9oZWFkZXIKCiAgICBkZWYgcHJlcGFyZV9ob29rcyhzZWxmLCBob29rcyk6CiAgICAgICAgXCJcIlwiUHJlcGFyZXMgdGhlIGdpdmVuIGhvb2tzLlwiXCJcIgogICAgICAgICMgaG9va3MgY2FuIGJlIHBhc3NlZCBhcyBOb25lIHRvIHRoZSBwcmVwYXJlIG1ldGhvZCBhbmQgdG8gdGhpcwogICAgICAgICMgbWV0aG9kLiBUbyBwcmV2ZW50IGl0ZXJhdGluZyBvdmVyIE5vbmUsIHNpbXBseSB1c2UgYW4gZW1wdHkgbGlzdAogICAgICAgICMgaWYgaG9va3MgaXMgRmFsc2UteQogICAgICAgIGhvb2tzID0gaG9va3Mgb3IgW10KICAgICAgICBmb3IgZXZlbnQgaW4gaG9va3M6CiAgICAgICAgICAgIHNlbGYucmVnaXN0ZXJfaG9vayhldmVudCwgaG9va3NbZXZlbnRdKQoKCmNsYXNzIFJlc3BvbnNlOgogICAgXCJcIlwiVGhlIDpjbGFzczpgUmVzcG9uc2UgPFJlc3BvbnNlPmAgb2JqZWN0LCB3aGljaCBjb250YWlucyBhCiAgICBzZXJ2ZXIncyByZXNwb25zZSB0byBhbiBIVFRQIHJlcXVlc3QuCiAgICBcIlwiXCIKCiAgICBfX2F0dHJzX18gPSBbCiAgICAgICAgXCJfY29udGVudFwiLAogICAgICAgIFwic3RhdHVzX2NvZGVcIiwKICAgICAgICBcImhlYWRlcnNcIiwKICAgICAgICBcInVybFwiLAogICAgICAgIFwiaGlzdG9yeVwiLAogICAgICAgIFwiZW5jb2RpbmdcIiwKICAgICAgICBcInJlYXNvblwiLAogICAgICAgIFwiY29va2llc1wiLAogICAgICAgIFwiZWxhcHNlZFwiLAogICAgICAgIFwicmVxdWVzdFwiLAogICAgXQoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBzZWxmLl9jb250ZW50ID0gRmFsc2UKICAgICAgICBzZWxmLl9jb250ZW50X2NvbnN1bWVkID0gRmFsc2UKICAgICAgICBzZWxmLl9uZXh0ID0gTm9uZQoKICAgICAgICAjOiBJbnRlZ2VyIENvZGUgb2YgcmVzcG9uZGVkIEhUVFAgU3RhdHVzLCBlLmcuIDQwNCBvciAyMDAuCiAgICAgICAgc2VsZi5zdGF0dXNfY29kZSA9IE5vbmUKCiAgICAgICAgIzogQ2FzZS1pbnNlbnNpdGl2ZSBEaWN0aW9uYXJ5IG9mIFJlc3BvbnNlIEhlYWRlcnMuCiAgICAgICAgIzogRm9yIGV4YW1wbGUsIGBgaGVhZGVyc1snY29udGVudC1lbmNvZGluZyddYGAgd2lsbCByZXR1cm4gdGhlCiAgICAgICAgIzogdmFsdWUgb2YgYSBgYCdDb250ZW50LUVuY29kaW5nJ2BgIHJlc3BvbnNlIGhlYWRlci4KICAgICAgICBzZWxmLmhlYWRlcnMgPSBDYXNlSW5zZW5zaXRpdmVEaWN0KCkKCiAgICAgICAgIzogRmlsZS1saWtlIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiByZXNwb25zZSAoZm9yIGFkdmFuY2VkIHVzYWdlKS4KICAgICAgICAjOiBVc2Ugb2YgYGByYXdgYCByZXF1aXJlcyB0aGF0IGBgc3RyZWFtPVRydWVgYCBiZSBzZXQgb24gdGhlIHJlcXVlc3QuCiAgICAgICAgIzogVGhpcyByZXF1aXJlbWVudCBkb2VzIG5vdCBhcHBseSBmb3IgdXNlIGludGVybmFsbHkgdG8gUmVxdWVzdHMuCiAgICAgICAgc2VsZi5yYXcgPSBOb25lCgogICAgICAgICM6IEZpbmFsIFVSTCBsb2NhdGlvbiBvZiBSZXNwb25zZS4KICAgICAgICBzZWxmLnVybCA9IE5vbmUKCiAgICAgICAgIzogRW5jb2RpbmcgdG8gZGVjb2RlIHdpdGggd2hlbiBhY2Nlc3Npbmcgci50ZXh0LgogICAgICAgIHNlbGYuZW5jb2RpbmcgPSBOb25lCgogICAgICAgICM6IEEgbGlzdCBvZiA6Y2xhc3M6YFJlc3BvbnNlIDxSZXNwb25zZT5gIG9iamVjdHMgZnJvbQogICAgICAgICM6IHRoZSBoaXN0b3J5IG9mIHRoZSBSZXF1ZXN0LiBBbnkgcmVkaXJlY3QgcmVzcG9uc2VzIHdpbGwgZW5kCiAgICAgICAgIzogdXAgaGVyZS4gVGhlIGxpc3QgaXMgc29ydGVkIGZyb20gdGhlIG9sZGVzdCB0byB0aGUgbW9zdCByZWNlbnQgcmVxdWVzdC4KICAgICAgICBzZWxmLmhpc3RvcnkgPSBbXQoKICAgICAgICAjOiBUZXh0dWFsIHJlYXNvbiBvZiByZXNwb25kZWQgSFRUUCBTdGF0dXMsIGUuZy4gXCJOb3QgRm91bmRcIiBvciBcIk9LXCIuCiAgICAgICAgc2VsZi5yZWFzb24gPSBOb25lCgogICAgICAgICM6IEEgQ29va2llSmFyIG9mIENvb2tpZXMgdGhlIHNlcnZlciBzZW50IGJhY2suCiAgICAgICAgc2VsZi5jb29raWVzID0gY29va2llamFyX2Zyb21fZGljdCh7fSkKCiAgICAgICAgIzogVGhlIGFtb3VudCBvZiB0aW1lIGVsYXBzZWQgYmV0d2VlbiBzZW5kaW5nIHRoZSByZXF1ZXN0CiAgICAgICAgIzogYW5kIHRoZSBhcnJpdmFsIG9mIHRoZSByZXNwb25zZSAoYXMgYSB0aW1lZGVsdGEpLgogICAgICAgICM6IFRoaXMgcHJvcGVydHkgc3BlY2lmaWNhbGx5IG1lYXN1cmVzIHRoZSB0aW1lIHRha2VuIGJldHdlZW4gc2VuZGluZwogICAgICAgICM6IHRoZSBmaXJzdCBieXRlIG9mIHRoZSByZXF1ZXN0IGFuZCBmaW5pc2hpbmcgcGFyc2luZyB0aGUgaGVhZGVycy4gSXQKICAgICAgICAjOiBpcyB0aGVyZWZvcmUgdW5hZmZlY3RlZCBieSBjb25zdW1pbmcgdGhlIHJlc3BvbnNlIGNvbnRlbnQgb3IgdGhlCiAgICAgICAgIzogdmFsdWUgb2YgdGhlIGBgc3RyZWFtYGAga2V5d29yZCBhcmd1bWVudC4KICAgICAgICBzZWxmLmVsYXBzZWQgPSBkYXRldGltZS50aW1lZGVsdGEoMCkKCiAgICAgICAgIzogVGhlIDpjbGFzczpgUHJlcGFyZWRSZXF1ZXN0IDxQcmVwYXJlZFJlcXVlc3Q+YCBvYmplY3QgdG8gd2hpY2ggdGhpcwogICAgICAgICM6IGlzIGEgcmVzcG9uc2UuCiAgICAgICAgc2VsZi5yZXF1ZXN0ID0gTm9uZQoKICAgIGRlZiBfX2VudGVyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgX19leGl0X18oc2VsZiwgKmFyZ3MpOgogICAgICAgIHNlbGYuY2xvc2UoKQoKICAgIGRlZiBfX2dldHN0YXRlX18oc2VsZik6CiAgICAgICAgIyBDb25zdW1lIGV2ZXJ5dGhpbmc7IGFjY2Vzc2luZyB0aGUgY29udGVudCBhdHRyaWJ1dGUgbWFrZXMKICAgICAgICAjIHN1cmUgdGhlIGNvbnRlbnQgaGFzIGJlZW4gZnVsbHkgcmVhZC4KICAgICAgICBpZiBub3Qgc2VsZi5fY29udGVudF9jb25zdW1lZDoKICAgICAgICAgICAgc2VsZi5jb250ZW50CgogICAgICAgIHJldHVybiB7YXR0cjogZ2V0YXR0cihzZWxmLCBhdHRyLCBOb25lKSBmb3IgYXR0ciBpbiBzZWxmLl9fYXR0cnNfX30KCiAgICBkZWYgX19zZXRzdGF0ZV9fKHNlbGYsIHN0YXRlKToKICAgICAgICBmb3IgbmFtZSwgdmFsdWUgaW4gc3RhdGUuaXRlbXMoKToKICAgICAgICAgICAgc2V0YXR0cihzZWxmLCBuYW1lLCB2YWx1ZSkKCiAgICAgICAgIyBwaWNrbGVkIG9iamVjdHMgZG8gbm90IGhhdmUgLnJhdwogICAgICAgIHNldGF0dHIoc2VsZiwgXCJfY29udGVudF9jb25zdW1lZFwiLCBUcnVlKQogICAgICAgIHNldGF0dHIoc2VsZiwgXCJyYXdcIiwgTm9uZSkKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGZcIjxSZXNwb25zZSBbe3NlbGYuc3RhdHVzX2NvZGV9XT5cIgoKICAgIGRlZiBfX2Jvb2xfXyhzZWxmKToKICAgICAgICBcIlwiXCJSZXR1cm5zIFRydWUgaWYgOmF0dHI6YHN0YXR1c19jb2RlYCBpcyBsZXNzIHRoYW4gNDAwLgoKICAgICAgICBUaGlzIGF0dHJpYnV0ZSBjaGVja3MgaWYgdGhlIHN0YXR1cyBjb2RlIG9mIHRoZSByZXNwb25zZSBpcyBiZXR3ZWVuCiAgICAgICAgNDAwIGFuZCA2MDAgdG8gc2VlIGlmIHRoZXJlIHdhcyBhIGNsaWVudCBlcnJvciBvciBhIHNlcnZlciBlcnJvci4gSWYKICAgICAgICB0aGUgc3RhdHVzIGNvZGUsIGlzIGJldHdlZW4gMjAwIGFuZCA0MDAsIHRoaXMgd2lsbCByZXR1cm4gVHJ1ZS4gVGhpcwogICAgICAgIGlzICoqbm90KiogYSBjaGVjayB0byBzZWUgaWYgdGhlIHJlc3BvbnNlIGNvZGUgaXMgYGAyMDAgT0tgYC4KICAgICAgICBcIlwiXCIKICAgICAgICByZXR1cm4gc2VsZi5vawoKICAgIGRlZiBfX25vbnplcm9fXyhzZWxmKToKICAgICAgICBcIlwiXCJSZXR1cm5zIFRydWUgaWYgOmF0dHI6YHN0YXR1c19jb2RlYCBpcyBsZXNzIHRoYW4gNDAwLgoKICAgICAgICBUaGlzIGF0dHJpYnV0ZSBjaGVja3MgaWYgdGhlIHN0YXR1cyBjb2RlIG9mIHRoZSByZXNwb25zZSBpcyBiZXR3ZWVuCiAgICAgICAgNDAwIGFuZCA2MDAgdG8gc2VlIGlmIHRoZXJlIHdhcyBhIGNsaWVudCBlcnJvciBvciBhIHNlcnZlciBlcnJvci4gSWYKICAgICAgICB0aGUgc3RhdHVzIGNvZGUsIGlzIGJldHdlZW4gMjAwIGFuZCA0MDAsIHRoaXMgd2lsbCByZXR1cm4gVHJ1ZS4gVGhpcwogICAgICAgIGlzICoqbm90KiogYSBjaGVjayB0byBzZWUgaWYgdGhlIHJlc3BvbnNlIGNvZGUgaXMgYGAyMDAgT0tgYC4KICAgICAgICBcIlwiXCIKICAgICAgICByZXR1cm4gc2VsZi5vawoKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICBcIlwiXCJBbGxvd3MgeW91IHRvIHVzZSBhIHJlc3BvbnNlIGFzIGFuIGl0ZXJhdG9yLlwiXCJcIgogICAgICAgIHJldHVybiBzZWxmLml0ZXJfY29udGVudCgxMjgpCgogICAgQHByb3BlcnR5CiAgICBkZWYgb2soc2VsZik6CiAgICAgICAgXCJcIlwiUmV0dXJucyBUcnVlIGlmIDphdHRyOmBzdGF0dXNfY29kZWAgaXMgbGVzcyB0aGFuIDQwMCwgRmFsc2UgaWYgbm90LgoKICAgICAgICBUaGlzIGF0dHJpYnV0ZSBjaGVja3MgaWYgdGhlIHN0YXR1cyBjb2RlIG9mIHRoZSByZXNwb25zZSBpcyBiZXR3ZWVuCiAgICAgICAgNDAwIGFuZCA2MDAgdG8gc2VlIGlmIHRoZXJlIHdhcyBhIGNsaWVudCBlcnJvciBvciBhIHNlcnZlciBlcnJvci4gSWYKICAgICAgICB0aGUgc3RhdHVzIGNvZGUgaXMgYmV0d2VlbiAyMDAgYW5kIDQwMCwgdGhpcyB3aWxsIHJldHVybiBUcnVlLiBUaGlzCiAgICAgICAgaXMgKipub3QqKiBhIGNoZWNrIHRvIHNlZSBpZiB0aGUgcmVzcG9uc2UgY29kZSBpcyBgYDIwMCBPS2BgLgogICAgICAgIFwiXCJcIgogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5yYWlzZV9mb3Jfc3RhdHVzKCkKICAgICAgICBleGNlcHQgSFRUUEVycm9yOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGlzX3JlZGlyZWN0KHNlbGYpOgogICAgICAgIFwiXCJcIlRydWUgaWYgdGhpcyBSZXNwb25zZSBpcyBhIHdlbGwtZm9ybWVkIEhUVFAgcmVkaXJlY3QgdGhhdCBjb3VsZCBoYXZlCiAgICAgICAgYmVlbiBwcm9jZXNzZWQgYXV0b21hdGljYWxseSAoYnkgOm1ldGg6YFNlc3Npb24ucmVzb2x2ZV9yZWRpcmVjdHNgKS4KICAgICAgICBcIlwiXCIKICAgICAgICByZXR1cm4gXCJsb2NhdGlvblwiIGluIHNlbGYuaGVhZGVycyBhbmQgc2VsZi5zdGF0dXNfY29kZSBpbiBSRURJUkVDVF9TVEFUSQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGlzX3Blcm1hbmVudF9yZWRpcmVjdChzZWxmKToKICAgICAgICBcIlwiXCJUcnVlIGlmIHRoaXMgUmVzcG9uc2Ugb25lIG9mIHRoZSBwZXJtYW5lbnQgdmVyc2lvbnMgb2YgcmVkaXJlY3QuXCJcIlwiCiAgICAgICAgcmV0dXJuIFwibG9jYXRpb25cIiBpbiBzZWxmLmhlYWRlcnMgYW5kIHNlbGYuc3RhdHVzX2NvZGUgaW4gKAogICAgICAgICAgICBjb2Rlcy5tb3ZlZF9wZXJtYW5lbnRseSwKICAgICAgICAgICAgY29kZXMucGVybWFuZW50X3JlZGlyZWN0LAogICAgICAgICkKCiAgICBAcHJvcGVydHkKICAgIGRlZiBuZXh0KHNlbGYpOgogICAgICAgIFwiXCJcIlJldHVybnMgYSBQcmVwYXJlZFJlcXVlc3QgZm9yIHRoZSBuZXh0IHJlcXVlc3QgaW4gYSByZWRpcmVjdCBjaGFpbiwgaWYgdGhlcmUgaXMgb25lLlwiXCJcIgogICAgICAgIHJldHVybiBzZWxmLl9uZXh0CgogICAgQHByb3BlcnR5CiAgICBkZWYgYXBwYXJlbnRfZW5jb2Rpbmcoc2VsZik6CiAgICAgICAgXCJcIlwiVGhlIGFwcGFyZW50IGVuY29kaW5nLCBwcm92aWRlZCBieSB0aGUgY2hhcnNldF9ub3JtYWxpemVyIG9yIGNoYXJkZXQgbGlicmFyaWVzLlwiXCJcIgogICAgICAgIHJldHVybiBjaGFyZGV0LmRldGVjdChzZWxmLmNvbnRlbnQpW1wiZW5jb2RpbmdcIl0KCiAgICBkZWYgaXRlcl9jb250ZW50KHNlbGYsIGNodW5rX3NpemU9MSwgZGVjb2RlX3VuaWNvZGU9RmFsc2UpOgogICAgICAgIFwiXCJcIkl0ZXJhdGVzIG92ZXIgdGhlIHJlc3BvbnNlIGRhdGEuICBXaGVuIHN0cmVhbT1UcnVlIGlzIHNldCBvbiB0aGUKICAgICAgICByZXF1ZXN0LCB0aGlzIGF2b2lkcyByZWFkaW5nIHRoZSBjb250ZW50IGF0IG9uY2UgaW50byBtZW1vcnkgZm9yCiAgICAgICAgbGFyZ2UgcmVzcG9uc2VzLiAgVGhlIGNodW5rIHNpemUgaXMgdGhlIG51bWJlciBvZiBieXRlcyBpdCBzaG91bGQKICAgICAgICByZWFkIGludG8gbWVtb3J5LiAgVGhpcyBpcyBub3QgbmVjZXNzYXJpbHkgdGhlIGxlbmd0aCBvZiBlYWNoIGl0ZW0KICAgICAgICByZXR1cm5lZCBhcyBkZWNvZGluZyBjYW4gdGFrZSBwbGFjZS4KCiAgICAgICAgY2h1bmtfc2l6ZSBtdXN0IGJlIG9mIHR5cGUgaW50IG9yIE5vbmUuIEEgdmFsdWUgb2YgTm9uZSB3aWxsCiAgICAgICAgZnVuY3Rpb24gZGlmZmVyZW50bHkgZGVwZW5kaW5nIG9uIHRoZSB2YWx1ZSBvZiBgc3RyZWFtYC4KICAgICAgICBzdHJlYW09VHJ1ZSB3aWxsIHJlYWQgZGF0YSBhcyBpdCBhcnJpdmVzIGluIHdoYXRldmVyIHNpemUgdGhlCiAgICAgICAgY2h1bmtzIGFyZSByZWNlaXZlZC4gSWYgc3RyZWFtPUZhbHNlLCBkYXRhIGlzIHJldHVybmVkIGFzCiAgICAgICAgYSBzaW5nbGUgY2h1bmsuCgogICAgICAgIElmIGRlY29kZV91bmljb2RlIGlzIFRydWUsIGNvbnRlbnQgd2lsbCBiZSBkZWNvZGVkIHVzaW5nIHRoZSBiZXN0CiAgICAgICAgYXZhaWxhYmxlIGVuY29kaW5nIGJhc2VkIG9uIHRoZSByZXNwb25zZS4KICAgICAgICBcIlwiXCIKCiAgICAgICAgZGVmIGdlbmVyYXRlKCk6CiAgICAgICAgICAgICMgU3BlY2lhbCBjYXNlIGZvciB1cmxsaWIzLgogICAgICAgICAgICBpZiBoYXNhdHRyKHNlbGYucmF3LCBcInN0cmVhbVwiKToKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICB5aWVsZCBmcm9tIHNlbGYucmF3LnN0cmVhbShjaHVua19zaXplLCBkZWNvZGVfY29udGVudD1UcnVlKQogICAgICAgICAgICAgICAgZXhjZXB0IFByb3RvY29sRXJyb3IgYXMgZToKICAgICAgICAgICAgICAgICAgICByYWlzZSBDaHVua2VkRW5jb2RpbmdFcnJvcihlKQogICAgICAgICAgICAgICAgZXhjZXB0IERlY29kZUVycm9yIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgQ29udGVudERlY29kaW5nRXJyb3IoZSkKICAgICAgICAgICAgICAgIGV4Y2VwdCBSZWFkVGltZW91dEVycm9yIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgQ29ubmVjdGlvbkVycm9yKGUpCiAgICAgICAgICAgICAgICBleGNlcHQgU1NMRXJyb3IgYXMgZToKICAgICAgICAgICAgICAgICAgICByYWlzZSBSZXF1ZXN0c1NTTEVycm9yKGUpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAjIFN0YW5kYXJkIGZpbGUtbGlrZSBvYmplY3QuCiAgICAgICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgICAgIGNodW5rID0gc2VsZi5yYXcucmVhZChjaHVua19zaXplKQogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBjaHVuazoKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICB5aWVsZCBjaHVuawoKICAgICAgICAgICAgc2VsZi5fY29udGVudF9jb25zdW1lZCA9IFRydWUKCiAgICAgICAgaWYgc2VsZi5fY29udGVudF9jb25zdW1lZCBhbmQgaXNpbnN0YW5jZShzZWxmLl9jb250ZW50LCBib29sKToKICAgICAgICAgICAgcmFpc2UgU3RyZWFtQ29uc3VtZWRFcnJvcigpCiAgICAgICAgZWxpZiBjaHVua19zaXplIGlzIG5vdCBOb25lIGFuZCBub3QgaXNpbnN0YW5jZShjaHVua19zaXplLCBpbnQpOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoCiAgICAgICAgICAgICAgICBmXCJjaHVua19zaXplIG11c3QgYmUgYW4gaW50LCBpdCBpcyBpbnN0ZWFkIGEge3R5cGUoY2h1bmtfc2l6ZSl9LlwiCiAgICAgICAgICAgICkKICAgICAgICAjIHNpbXVsYXRlIHJlYWRpbmcgc21hbGwgY2h1bmtzIG9mIHRoZSBjb250ZW50CiAgICAgICAgcmV1c2VkX2NodW5rcyA9IGl0ZXJfc2xpY2VzKHNlbGYuX2NvbnRlbnQsIGNodW5rX3NpemUpCgogICAgICAgIHN0cmVhbV9jaHVua3MgPSBnZW5lcmF0ZSgpCgogICAgICAgIGNodW5rcyA9IHJldXNlZF9jaHVua3MgaWYgc2VsZi5fY29udGVudF9jb25zdW1lZCBlbHNlIHN0cmVhbV9jaHVua3MKCiAgICAgICAgaWYgZGVjb2RlX3VuaWNvZGU6CiAgICAgICAgICAgIGNodW5rcyA9IHN0cmVhbV9kZWNvZGVfcmVzcG9uc2VfdW5pY29kZShjaHVua3MsIHNlbGYpCgogICAgICAgIHJldHVybiBjaHVua3MKCiAgICBkZWYgaXRlcl9saW5lcygKICAgICAgICBzZWxmLCBjaHVua19zaXplPUlURVJfQ0hVTktfU0laRSwgZGVjb2RlX3VuaWNvZGU9RmFsc2UsIGRlbGltaXRlcj1Ob25lCiAgICApOgogICAgICAgIFwiXCJcIkl0ZXJhdGVzIG92ZXIgdGhlIHJlc3BvbnNlIGRhdGEsIG9uZSBsaW5lIGF0IGEgdGltZS4gIFdoZW4KICAgICAgICBzdHJlYW09VHJ1ZSBpcyBzZXQgb24gdGhlIHJlcXVlc3QsIHRoaXMgYXZvaWRzIHJlYWRpbmcgdGhlCiAgICAgICAgY29udGVudCBhdCBvbmNlIGludG8gbWVtb3J5IGZvciBsYXJnZSByZXNwb25zZXMuCgogICAgICAgIC4uIG5vdGU6OiBUaGlzIG1ldGhvZCBpcyBub3QgcmVlbnRyYW50IHNhZmUuCiAgICAgICAgXCJcIlwiCgogICAgICAgIHBlbmRpbmcgPSBOb25lCgogICAgICAgIGZvciBjaHVuayBpbiBzZWxmLml0ZXJfY29udGVudCgKICAgICAgICAgICAgY2h1bmtfc2l6ZT1jaHVua19zaXplLCBkZWNvZGVfdW5pY29kZT1kZWNvZGVfdW5pY29kZQogICAgICAgICk6CgogICAgICAgICAgICBpZiBwZW5kaW5nIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgY2h1bmsgPSBwZW5kaW5nICsgY2h1bmsKCiAgICAgICAgICAgIGlmIGRlbGltaXRlcjoKICAgICAgICAgICAgICAgIGxpbmVzID0gY2h1bmsuc3BsaXQoZGVsaW1pdGVyKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgbGluZXMgPSBjaHVuay5zcGxpdGxpbmVzKCkKCiAgICAgICAgICAgIGlmIGxpbmVzIGFuZCBsaW5lc1stMV0gYW5kIGNodW5rIGFuZCBsaW5lc1stMV1bLTFdID09IGNodW5rWy0xXToKICAgICAgICAgICAgICAgIHBlbmRpbmcgPSBsaW5lcy5wb3AoKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcGVuZGluZyA9IE5vbmUKCiAgICAgICAgICAgIHlpZWxkIGZyb20gbGluZXMKCiAgICAgICAgaWYgcGVuZGluZyBpcyBub3QgTm9uZToKICAgICAgICAgICAgeWllbGQgcGVuZGluZwoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGNvbnRlbnQoc2VsZik6CiAgICAgICAgXCJcIlwiQ29udGVudCBvZiB0aGUgcmVzcG9uc2UsIGluIGJ5dGVzLlwiXCJcIgoKICAgICAgICBpZiBzZWxmLl9jb250ZW50IGlzIEZhbHNlOgogICAgICAgICAgICAjIFJlYWQgdGhlIGNvbnRlbnRzLgogICAgICAgICAgICBpZiBzZWxmLl9jb250ZW50X2NvbnN1bWVkOgogICAgICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKFwiVGhlIGNvbnRlbnQgZm9yIHRoaXMgcmVzcG9uc2Ugd2FzIGFscmVhZHkgY29uc3VtZWRcIikKCiAgICAgICAgICAgIGlmIHNlbGYuc3RhdHVzX2NvZGUgPT0gMCBvciBzZWxmLnJhdyBpcyBOb25lOgogICAgICAgICAgICAgICAgc2VsZi5fY29udGVudCA9IE5vbmUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYuX2NvbnRlbnQgPSBiXCJcIi5qb2luKHNlbGYuaXRlcl9jb250ZW50KENPTlRFTlRfQ0hVTktfU0laRSkpIG9yIGJcIlwiCgogICAgICAgIHNlbGYuX2NvbnRlbnRfY29uc3VtZWQgPSBUcnVlCiAgICAgICAgIyBkb24ndCBuZWVkIHRvIHJlbGVhc2UgdGhlIGNvbm5lY3Rpb247IHRoYXQncyBiZWVuIGhhbmRsZWQgYnkgdXJsbGliMwogICAgICAgICMgc2luY2Ugd2UgZXhoYXVzdGVkIHRoZSBkYXRhLgogICAgICAgIHJldHVybiBzZWxmLl9jb250ZW50CgogICAgQHByb3BlcnR5CiAgICBkZWYgdGV4dChzZWxmKToKICAgICAgICBcIlwiXCJDb250ZW50IG9mIHRoZSByZXNwb25zZSwgaW4gdW5pY29kZS4KCiAgICAgICAgSWYgUmVzcG9uc2UuZW5jb2RpbmcgaXMgTm9uZSwgZW5jb2Rpbmcgd2lsbCBiZSBndWVzc2VkIHVzaW5nCiAgICAgICAgYGBjaGFyc2V0X25vcm1hbGl6ZXJgYCBvciBgYGNoYXJkZXRgYC4KCiAgICAgICAgVGhlIGVuY29kaW5nIG9mIHRoZSByZXNwb25zZSBjb250ZW50IGlzIGRldGVybWluZWQgYmFzZWQgc29sZWx5IG9uIEhUVFAKICAgICAgICBoZWFkZXJzLCBmb2xsb3dpbmcgUkZDIDI2MTYgdG8gdGhlIGxldHRlci4gSWYgeW91IGNhbiB0YWtlIGFkdmFudGFnZSBvZgogICAgICAgIG5vbi1IVFRQIGtub3dsZWRnZSB0byBtYWtlIGEgYmV0dGVyIGd1ZXNzIGF0IHRoZSBlbmNvZGluZywgeW91IHNob3VsZAogICAgICAgIHNldCBgYHIuZW5jb2RpbmdgYCBhcHByb3ByaWF0ZWx5IGJlZm9yZSBhY2Nlc3NpbmcgdGhpcyBwcm9wZXJ0eS4KICAgICAgICBcIlwiXCIKCiAgICAgICAgIyBUcnkgY2hhcnNldCBmcm9tIGNvbnRlbnQtdHlwZQogICAgICAgIGNvbnRlbnQgPSBOb25lCiAgICAgICAgZW5jb2RpbmcgPSBzZWxmLmVuY29kaW5nCgogICAgICAgIGlmIG5vdCBzZWxmLmNvbnRlbnQ6CiAgICAgICAgICAgIHJldHVybiBcIlwiCgogICAgICAgICMgRmFsbGJhY2sgdG8gYXV0by1kZXRlY3RlZCBlbmNvZGluZy4KICAgICAgICBpZiBzZWxmLmVuY29kaW5nIGlzIE5vbmU6CiAgICAgICAgICAgIGVuY29kaW5nID0gc2VsZi5hcHBhcmVudF9lbmNvZGluZwoKICAgICAgICAjIERlY29kZSB1bmljb2RlIGZyb20gZ2l2ZW4gZW5jb2RpbmcuCiAgICAgICAgdHJ5OgogICAgICAgICAgICBjb250ZW50ID0gc3RyKHNlbGYuY29udGVudCwgZW5jb2RpbmcsIGVycm9ycz1cInJlcGxhY2VcIikKICAgICAgICBleGNlcHQgKExvb2t1cEVycm9yLCBUeXBlRXJyb3IpOgogICAgICAgICAgICAjIEEgTG9va3VwRXJyb3IgaXMgcmFpc2VkIGlmIHRoZSBlbmNvZGluZyB3YXMgbm90IGZvdW5kIHdoaWNoIGNvdWxkCiAgICAgICAgICAgICMgaW5kaWNhdGUgYSBtaXNzcGVsbGluZyBvciBzaW1pbGFyIG1pc3Rha2UuCiAgICAgICAgICAgICMKICAgICAgICAgICAgIyBBIFR5cGVFcnJvciBjYW4gYmUgcmFpc2VkIGlmIGVuY29kaW5nIGlzIE5vbmUKICAgICAgICAgICAgIwogICAgICAgICAgICAjIFNvIHdlIHRyeSBibGluZGx5IGVuY29kaW5nLgogICAgICAgICAgICBjb250ZW50ID0gc3RyKHNlbGYuY29udGVudCwgZXJyb3JzPVwicmVwbGFjZVwiKQoKICAgICAgICByZXR1cm4gY29udGVudAoKICAgIGRlZiBqc29uKHNlbGYsICoqa3dhcmdzKToKICAgICAgICByXCJcIlwiUmV0dXJucyB0aGUganNvbi1lbmNvZGVkIGNvbnRlbnQgb2YgYSByZXNwb25zZSwgaWYgYW55LgoKICAgICAgICA6cGFyYW0gXFwqXFwqa3dhcmdzOiBPcHRpb25hbCBhcmd1bWVudHMgdGhhdCBgYGpzb24ubG9hZHNgYCB0YWtlcy4KICAgICAgICA6cmFpc2VzIHJlcXVlc3RzLmV4Y2VwdGlvbnMuSlNPTkRlY29kZUVycm9yOiBJZiB0aGUgcmVzcG9uc2UgYm9keSBkb2VzIG5vdAogICAgICAgICAgICBjb250YWluIHZhbGlkIGpzb24uCiAgICAgICAgXCJcIlwiCgogICAgICAgIGlmIG5vdCBzZWxmLmVuY29kaW5nIGFuZCBzZWxmLmNvbnRlbnQgYW5kIGxlbihzZWxmLmNvbnRlbnQpID4gMzoKICAgICAgICAgICAgIyBObyBlbmNvZGluZyBzZXQuIEpTT04gUkZDIDQ2Mjcgc2VjdGlvbiAzIHN0YXRlcyB3ZSBzaG91bGQgZXhwZWN0CiAgICAgICAgICAgICMgVVRGLTgsIC0xNiBvciAtMzIuIERldGVjdCB3aGljaCBvbmUgdG8gdXNlOyBJZiB0aGUgZGV0ZWN0aW9uIG9yCiAgICAgICAgICAgICMgZGVjb2RpbmcgZmFpbHMsIGZhbGwgYmFjayB0byBgc2VsZi50ZXh0YCAodXNpbmcgY2hhcnNldF9ub3JtYWxpemVyIHRvIG1ha2UKICAgICAgICAgICAgIyBhIGJlc3QgZ3Vlc3MpLgogICAgICAgICAgICBlbmNvZGluZyA9IGd1ZXNzX2pzb25fdXRmKHNlbGYuY29udGVudCkKICAgICAgICAgICAgaWYgZW5jb2RpbmcgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBsZXhqc29uLmxvYWRzKHNlbGYuY29udGVudC5kZWNvZGUoZW5jb2RpbmcpLCAqKmt3YXJncykKICAgICAgICAgICAgICAgIGV4Y2VwdCBVbmljb2RlRGVjb2RlRXJyb3I6CiAgICAgICAgICAgICAgICAgICAgIyBXcm9uZyBVVEYgY29kZWMgZGV0ZWN0ZWQ7IHVzdWFsbHkgYmVjYXVzZSBpdCdzIG5vdCBVVEYtOAogICAgICAgICAgICAgICAgICAgICMgYnV0IHNvbWUgb3RoZXIgOC1iaXQgY29kZWMuICBUaGlzIGlzIGFuIFJGQyB2aW9sYXRpb24sCiAgICAgICAgICAgICAgICAgICAgIyBhbmQgdGhlIHNlcnZlciBkaWRuJ3QgYm90aGVyIHRvIHRlbGwgdXMgd2hhdCBjb2RlYyAqd2FzKgogICAgICAgICAgICAgICAgICAgICMgdXNlZC4KICAgICAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgICAgICAgICBleGNlcHQgSlNPTkRlY29kZUVycm9yIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgUmVxdWVzdHNKU09ORGVjb2RlRXJyb3IoZS5tc2csIGUuZG9jLCBlLnBvcykKCiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXR1cm4gY29tcGxleGpzb24ubG9hZHMoc2VsZi50ZXh0LCAqKmt3YXJncykKICAgICAgICBleGNlcHQgSlNPTkRlY29kZUVycm9yIGFzIGU6CiAgICAgICAgICAgICMgQ2F0Y2ggSlNPTi1yZWxhdGVkIGVycm9ycyBhbmQgcmFpc2UgYXMgcmVxdWVzdHMuSlNPTkRlY29kZUVycm9yCiAgICAgICAgICAgICMgVGhpcyBhbGlhc2VzIGpzb24uSlNPTkRlY29kZUVycm9yIGFuZCBzaW1wbGVqc29uLkpTT05EZWNvZGVFcnJvcgogICAgICAgICAgICByYWlzZSBSZXF1ZXN0c0pTT05EZWNvZGVFcnJvcihlLm1zZywgZS5kb2MsIGUucG9zKQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGxpbmtzKHNlbGYpOgogICAgICAgIFwiXCJcIlJldHVybnMgdGhlIHBhcnNlZCBoZWFkZXIgbGlua3Mgb2YgdGhlIHJlc3BvbnNlLCBpZiBhbnkuXCJcIlwiCgogICAgICAgIGhlYWRlciA9IHNlbGYuaGVhZGVycy5nZXQoXCJsaW5rXCIpCgogICAgICAgIHJlc29sdmVkX2xpbmtzID0ge30KCiAgICAgICAgaWYgaGVhZGVyOgogICAgICAgICAgICBsaW5rcyA9IHBhcnNlX2hlYWRlcl9saW5rcyhoZWFkZXIpCgogICAgICAgICAgICBmb3IgbGluayBpbiBsaW5rczoKICAgICAgICAgICAgICAgIGtleSA9IGxpbmsuZ2V0KFwicmVsXCIpIG9yIGxpbmsuZ2V0KFwidXJsXCIpCiAgICAgICAgICAgICAgICByZXNvbHZlZF9saW5rc1trZXldID0gbGluawoKICAgICAgICByZXR1cm4gcmVzb2x2ZWRfbGlua3MKCiAgICBkZWYgcmFpc2VfZm9yX3N0YXR1cyhzZWxmKToKICAgICAgICBcIlwiXCJSYWlzZXMgOmNsYXNzOmBIVFRQRXJyb3JgLCBpZiBvbmUgb2NjdXJyZWQuXCJcIlwiCgogICAgICAgIGh0dHBfZXJyb3JfbXNnID0gXCJcIgogICAgICAgIGlmIGlzaW5zdGFuY2Uoc2VsZi5yZWFzb24sIGJ5dGVzKToKICAgICAgICAgICAgIyBXZSBhdHRlbXB0IHRvIGRlY29kZSB1dGYtOCBmaXJzdCBiZWNhdXNlIHNvbWUgc2VydmVycwogICAgICAgICAgICAjIGNob29zZSB0byBsb2NhbGl6ZSB0aGVpciByZWFzb24gc3RyaW5ncy4gSWYgdGhlIHN0cmluZwogICAgICAgICAgICAjIGlzbid0IHV0Zi04LCB3ZSBmYWxsIGJhY2sgdG8gaXNvLTg4NTktMSBmb3IgYWxsIG90aGVyCiAgICAgICAgICAgICMgZW5jb2RpbmdzLiAoU2VlIFBSICMzNTM4KQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICByZWFzb24gPSBzZWxmLnJlYXNvbi5kZWNvZGUoXCJ1dGYtOFwiKQogICAgICAgICAgICBleGNlcHQgVW5pY29kZURlY29kZUVycm9yOgogICAgICAgICAgICAgICAgcmVhc29uID0gc2VsZi5yZWFzb24uZGVjb2RlKFwiaXNvLTg4NTktMVwiKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJlYXNvbiA9IHNlbGYucmVhc29uCgogICAgICAgIGlmIDQwMCA8PSBzZWxmLnN0YXR1c19jb2RlIDwgNTAwOgogICAgICAgICAgICBodHRwX2Vycm9yX21zZyA9ICgKICAgICAgICAgICAgICAgIGZcIntzZWxmLnN0YXR1c19jb2RlfSBDbGllbnQgRXJyb3I6IHtyZWFzb259IGZvciB1cmw6IHtzZWxmLnVybH1cIgogICAgICAgICAgICApCgogICAgICAgIGVsaWYgNTAwIDw9IHNlbGYuc3RhdHVzX2NvZGUgPCA2MDA6CiAgICAgICAgICAgIGh0dHBfZXJyb3JfbXNnID0gKAogICAgICAgICAgICAgICAgZlwie3NlbGYuc3RhdHVzX2NvZGV9IFNlcnZlciBFcnJvcjoge3JlYXNvbn0gZm9yIHVybDoge3NlbGYudXJsfVwiCiAgICAgICAgICAgICkKCiAgICAgICAgaWYgaHR0cF9lcnJvcl9tc2c6CiAgICAgICAgICAgIHJhaXNlIEhUVFBFcnJvcihodHRwX2Vycm9yX21zZywgcmVzcG9uc2U9c2VsZikKCiAgICBkZWYgY2xvc2Uoc2VsZik6CiAgICAgICAgXCJcIlwiUmVsZWFzZXMgdGhlIGNvbm5lY3Rpb24gYmFjayB0byB0aGUgcG9vbC4gT25jZSB0aGlzIG1ldGhvZCBoYXMgYmVlbgogICAgICAgIGNhbGxlZCB0aGUgdW5kZXJseWluZyBgYHJhd2BgIG9iamVjdCBtdXN0IG5vdCBiZSBhY2Nlc3NlZCBhZ2Fpbi4KCiAgICAgICAgKk5vdGU6IFNob3VsZCBub3Qgbm9ybWFsbHkgbmVlZCB0byBiZSBjYWxsZWQgZXhwbGljaXRseS4qCiAgICAgICAgXCJcIlwiCiAgICAgICAgaWYgbm90IHNlbGYuX2NvbnRlbnRfY29uc3VtZWQ6CiAgICAgICAgICAgIHNlbGYucmF3LmNsb3NlKCkKCiAgICAgICAgcmVsZWFzZV9jb25uID0gZ2V0YXR0cihzZWxmLnJhdywgXCJyZWxlYXNlX2Nvbm5cIiwgTm9uZSkKICAgICAgICBpZiByZWxlYXNlX2Nvbm4gaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHJlbGVhc2VfY29ubigpCgoiIiIKbW9kdWxlX2RpY3RbInJlcXVlc3RzIitvcy5zZXArImFwaS5weSJdPSIiIgpcIlwiXCIKcmVxdWVzdHMuYXBpCn5+fn5+fn5+fn5+fgoKVGhpcyBtb2R1bGUgaW1wbGVtZW50cyB0aGUgUmVxdWVzdHMgQVBJLgoKOmNvcHlyaWdodDogKGMpIDIwMTIgYnkgS2VubmV0aCBSZWl0ei4KOmxpY2Vuc2U6IEFwYWNoZTIsIHNlZSBMSUNFTlNFIGZvciBtb3JlIGRldGFpbHMuClwiXCJcIgoKZnJvbSAuIGltcG9ydCBzZXNzaW9ucwoKCmRlZiByZXF1ZXN0KG1ldGhvZCwgdXJsLCAqKmt3YXJncyk6CiAgICBcIlwiXCJDb25zdHJ1Y3RzIGFuZCBzZW5kcyBhIDpjbGFzczpgUmVxdWVzdCA8UmVxdWVzdD5gLgoKICAgIDpwYXJhbSBtZXRob2Q6IG1ldGhvZCBmb3IgdGhlIG5ldyA6Y2xhc3M6YFJlcXVlc3RgIG9iamVjdDogYGBHRVRgYCwgYGBPUFRJT05TYGAsIGBgSEVBRGBgLCBgYFBPU1RgYCwgYGBQVVRgYCwgYGBQQVRDSGBgLCBvciBgYERFTEVURWBgLgogICAgOnBhcmFtIHVybDogVVJMIGZvciB0aGUgbmV3IDpjbGFzczpgUmVxdWVzdGAgb2JqZWN0LgogICAgOnBhcmFtIHBhcmFtczogKG9wdGlvbmFsKSBEaWN0aW9uYXJ5LCBsaXN0IG9mIHR1cGxlcyBvciBieXRlcyB0byBzZW5kCiAgICAgICAgaW4gdGhlIHF1ZXJ5IHN0cmluZyBmb3IgdGhlIDpjbGFzczpgUmVxdWVzdGAuCiAgICA6cGFyYW0gZGF0YTogKG9wdGlvbmFsKSBEaWN0aW9uYXJ5LCBsaXN0IG9mIHR1cGxlcywgYnl0ZXMsIG9yIGZpbGUtbGlrZQogICAgICAgIG9iamVjdCB0byBzZW5kIGluIHRoZSBib2R5IG9mIHRoZSA6Y2xhc3M6YFJlcXVlc3RgLgogICAgOnBhcmFtIGpzb246IChvcHRpb25hbCkgQSBKU09OIHNlcmlhbGl6YWJsZSBQeXRob24gb2JqZWN0IHRvIHNlbmQgaW4gdGhlIGJvZHkgb2YgdGhlIDpjbGFzczpgUmVxdWVzdGAuCiAgICA6cGFyYW0gaGVhZGVyczogKG9wdGlvbmFsKSBEaWN0aW9uYXJ5IG9mIEhUVFAgSGVhZGVycyB0byBzZW5kIHdpdGggdGhlIDpjbGFzczpgUmVxdWVzdGAuCiAgICA6cGFyYW0gY29va2llczogKG9wdGlvbmFsKSBEaWN0IG9yIENvb2tpZUphciBvYmplY3QgdG8gc2VuZCB3aXRoIHRoZSA6Y2xhc3M6YFJlcXVlc3RgLgogICAgOnBhcmFtIGZpbGVzOiAob3B0aW9uYWwpIERpY3Rpb25hcnkgb2YgYGAnbmFtZSc6IGZpbGUtbGlrZS1vYmplY3RzYGAgKG9yIGBgeyduYW1lJzogZmlsZS10dXBsZX1gYCkgZm9yIG11bHRpcGFydCBlbmNvZGluZyB1cGxvYWQuCiAgICAgICAgYGBmaWxlLXR1cGxlYGAgY2FuIGJlIGEgMi10dXBsZSBgYCgnZmlsZW5hbWUnLCBmaWxlb2JqKWBgLCAzLXR1cGxlIGBgKCdmaWxlbmFtZScsIGZpbGVvYmosICdjb250ZW50X3R5cGUnKWBgCiAgICAgICAgb3IgYSA0LXR1cGxlIGBgKCdmaWxlbmFtZScsIGZpbGVvYmosICdjb250ZW50X3R5cGUnLCBjdXN0b21faGVhZGVycylgYCwgd2hlcmUgYGAnY29udGVudC10eXBlJ2BgIGlzIGEgc3RyaW5nCiAgICAgICAgZGVmaW5pbmcgdGhlIGNvbnRlbnQgdHlwZSBvZiB0aGUgZ2l2ZW4gZmlsZSBhbmQgYGBjdXN0b21faGVhZGVyc2BgIGEgZGljdC1saWtlIG9iamVjdCBjb250YWluaW5nIGFkZGl0aW9uYWwgaGVhZGVycwogICAgICAgIHRvIGFkZCBmb3IgdGhlIGZpbGUuCiAgICA6cGFyYW0gYXV0aDogKG9wdGlvbmFsKSBBdXRoIHR1cGxlIHRvIGVuYWJsZSBCYXNpYy9EaWdlc3QvQ3VzdG9tIEhUVFAgQXV0aC4KICAgIDpwYXJhbSB0aW1lb3V0OiAob3B0aW9uYWwpIEhvdyBtYW55IHNlY29uZHMgdG8gd2FpdCBmb3IgdGhlIHNlcnZlciB0byBzZW5kIGRhdGEKICAgICAgICBiZWZvcmUgZ2l2aW5nIHVwLCBhcyBhIGZsb2F0LCBvciBhIDpyZWY6YChjb25uZWN0IHRpbWVvdXQsIHJlYWQKICAgICAgICB0aW1lb3V0KSA8dGltZW91dHM+YCB0dXBsZS4KICAgIDp0eXBlIHRpbWVvdXQ6IGZsb2F0IG9yIHR1cGxlCiAgICA6cGFyYW0gYWxsb3dfcmVkaXJlY3RzOiAob3B0aW9uYWwpIEJvb2xlYW4uIEVuYWJsZS9kaXNhYmxlIEdFVC9PUFRJT05TL1BPU1QvUFVUL1BBVENIL0RFTEVURS9IRUFEIHJlZGlyZWN0aW9uLiBEZWZhdWx0cyB0byBgYFRydWVgYC4KICAgIDp0eXBlIGFsbG93X3JlZGlyZWN0czogYm9vbAogICAgOnBhcmFtIHByb3hpZXM6IChvcHRpb25hbCkgRGljdGlvbmFyeSBtYXBwaW5nIHByb3RvY29sIHRvIHRoZSBVUkwgb2YgdGhlIHByb3h5LgogICAgOnBhcmFtIHZlcmlmeTogKG9wdGlvbmFsKSBFaXRoZXIgYSBib29sZWFuLCBpbiB3aGljaCBjYXNlIGl0IGNvbnRyb2xzIHdoZXRoZXIgd2UgdmVyaWZ5CiAgICAgICAgICAgIHRoZSBzZXJ2ZXIncyBUTFMgY2VydGlmaWNhdGUsIG9yIGEgc3RyaW5nLCBpbiB3aGljaCBjYXNlIGl0IG11c3QgYmUgYSBwYXRoCiAgICAgICAgICAgIHRvIGEgQ0EgYnVuZGxlIHRvIHVzZS4gRGVmYXVsdHMgdG8gYGBUcnVlYGAuCiAgICA6cGFyYW0gc3RyZWFtOiAob3B0aW9uYWwpIGlmIGBgRmFsc2VgYCwgdGhlIHJlc3BvbnNlIGNvbnRlbnQgd2lsbCBiZSBpbW1lZGlhdGVseSBkb3dubG9hZGVkLgogICAgOnBhcmFtIGNlcnQ6IChvcHRpb25hbCkgaWYgU3RyaW5nLCBwYXRoIHRvIHNzbCBjbGllbnQgY2VydCBmaWxlICgucGVtKS4gSWYgVHVwbGUsICgnY2VydCcsICdrZXknKSBwYWlyLgogICAgOnJldHVybjogOmNsYXNzOmBSZXNwb25zZSA8UmVzcG9uc2U+YCBvYmplY3QKICAgIDpydHlwZTogcmVxdWVzdHMuUmVzcG9uc2UKCiAgICBVc2FnZTo6CgogICAgICA+Pj4gaW1wb3J0IHJlcXVlc3RzCiAgICAgID4+PiByZXEgPSByZXF1ZXN0cy5yZXF1ZXN0KCdHRVQnLCAnaHR0cHM6Ly9odHRwYmluLm9yZy9nZXQnKQogICAgICA+Pj4gcmVxCiAgICAgIDxSZXNwb25zZSBbMjAwXT4KICAgIFwiXCJcIgoKICAgICMgQnkgdXNpbmcgdGhlICd3aXRoJyBzdGF0ZW1lbnQgd2UgYXJlIHN1cmUgdGhlIHNlc3Npb24gaXMgY2xvc2VkLCB0aHVzIHdlCiAgICAjIGF2b2lkIGxlYXZpbmcgc29ja2V0cyBvcGVuIHdoaWNoIGNhbiB0cmlnZ2VyIGEgUmVzb3VyY2VXYXJuaW5nIGluIHNvbWUKICAgICMgY2FzZXMsIGFuZCBsb29rIGxpa2UgYSBtZW1vcnkgbGVhayBpbiBvdGhlcnMuCiAgICB3aXRoIHNlc3Npb25zLlNlc3Npb24oKSBhcyBzZXNzaW9uOgogICAgICAgIHJldHVybiBzZXNzaW9uLnJlcXVlc3QobWV0aG9kPW1ldGhvZCwgdXJsPXVybCwgKiprd2FyZ3MpCgoKZGVmIGdldCh1cmwsIHBhcmFtcz1Ob25lLCAqKmt3YXJncyk6CiAgICByXCJcIlwiU2VuZHMgYSBHRVQgcmVxdWVzdC4KCiAgICA6cGFyYW0gdXJsOiBVUkwgZm9yIHRoZSBuZXcgOmNsYXNzOmBSZXF1ZXN0YCBvYmplY3QuCiAgICA6cGFyYW0gcGFyYW1zOiAob3B0aW9uYWwpIERpY3Rpb25hcnksIGxpc3Qgb2YgdHVwbGVzIG9yIGJ5dGVzIHRvIHNlbmQKICAgICAgICBpbiB0aGUgcXVlcnkgc3RyaW5nIGZvciB0aGUgOmNsYXNzOmBSZXF1ZXN0YC4KICAgIDpwYXJhbSBcXCpcXCprd2FyZ3M6IE9wdGlvbmFsIGFyZ3VtZW50cyB0aGF0IGBgcmVxdWVzdGBgIHRha2VzLgogICAgOnJldHVybjogOmNsYXNzOmBSZXNwb25zZSA8UmVzcG9uc2U+YCBvYmplY3QKICAgIDpydHlwZTogcmVxdWVzdHMuUmVzcG9uc2UKICAgIFwiXCJcIgoKICAgIHJldHVybiByZXF1ZXN0KFwiZ2V0XCIsIHVybCwgcGFyYW1zPXBhcmFtcywgKiprd2FyZ3MpCgoKZGVmIG9wdGlvbnModXJsLCAqKmt3YXJncyk6CiAgICByXCJcIlwiU2VuZHMgYW4gT1BUSU9OUyByZXF1ZXN0LgoKICAgIDpwYXJhbSB1cmw6IFVSTCBmb3IgdGhlIG5ldyA6Y2xhc3M6YFJlcXVlc3RgIG9iamVjdC4KICAgIDpwYXJhbSBcXCpcXCprd2FyZ3M6IE9wdGlvbmFsIGFyZ3VtZW50cyB0aGF0IGBgcmVxdWVzdGBgIHRha2VzLgogICAgOnJldHVybjogOmNsYXNzOmBSZXNwb25zZSA8UmVzcG9uc2U+YCBvYmplY3QKICAgIDpydHlwZTogcmVxdWVzdHMuUmVzcG9uc2UKICAgIFwiXCJcIgoKICAgIHJldHVybiByZXF1ZXN0KFwib3B0aW9uc1wiLCB1cmwsICoqa3dhcmdzKQoKCmRlZiBoZWFkKHVybCwgKiprd2FyZ3MpOgogICAgclwiXCJcIlNlbmRzIGEgSEVBRCByZXF1ZXN0LgoKICAgIDpwYXJhbSB1cmw6IFVSTCBmb3IgdGhlIG5ldyA6Y2xhc3M6YFJlcXVlc3RgIG9iamVjdC4KICAgIDpwYXJhbSBcXCpcXCprd2FyZ3M6IE9wdGlvbmFsIGFyZ3VtZW50cyB0aGF0IGBgcmVxdWVzdGBgIHRha2VzLiBJZgogICAgICAgIGBhbGxvd19yZWRpcmVjdHNgIGlzIG5vdCBwcm92aWRlZCwgaXQgd2lsbCBiZSBzZXQgdG8gYEZhbHNlYCAoYXMKICAgICAgICBvcHBvc2VkIHRvIHRoZSBkZWZhdWx0IDptZXRoOmByZXF1ZXN0YCBiZWhhdmlvcikuCiAgICA6cmV0dXJuOiA6Y2xhc3M6YFJlc3BvbnNlIDxSZXNwb25zZT5gIG9iamVjdAogICAgOnJ0eXBlOiByZXF1ZXN0cy5SZXNwb25zZQogICAgXCJcIlwiCgogICAga3dhcmdzLnNldGRlZmF1bHQoXCJhbGxvd19yZWRpcmVjdHNcIiwgRmFsc2UpCiAgICByZXR1cm4gcmVxdWVzdChcImhlYWRcIiwgdXJsLCAqKmt3YXJncykKCgpkZWYgcG9zdCh1cmwsIGRhdGE9Tm9uZSwganNvbj1Ob25lLCAqKmt3YXJncyk6CiAgICByXCJcIlwiU2VuZHMgYSBQT1NUIHJlcXVlc3QuCgogICAgOnBhcmFtIHVybDogVVJMIGZvciB0aGUgbmV3IDpjbGFzczpgUmVxdWVzdGAgb2JqZWN0LgogICAgOnBhcmFtIGRhdGE6IChvcHRpb25hbCkgRGljdGlvbmFyeSwgbGlzdCBvZiB0dXBsZXMsIGJ5dGVzLCBvciBmaWxlLWxpa2UKICAgICAgICBvYmplY3QgdG8gc2VuZCBpbiB0aGUgYm9keSBvZiB0aGUgOmNsYXNzOmBSZXF1ZXN0YC4KICAgIDpwYXJhbSBqc29uOiAob3B0aW9uYWwpIGpzb24gZGF0YSB0byBzZW5kIGluIHRoZSBib2R5IG9mIHRoZSA6Y2xhc3M6YFJlcXVlc3RgLgogICAgOnBhcmFtIFxcKlxcKmt3YXJnczogT3B0aW9uYWwgYXJndW1lbnRzIHRoYXQgYGByZXF1ZXN0YGAgdGFrZXMuCiAgICA6cmV0dXJuOiA6Y2xhc3M6YFJlc3BvbnNlIDxSZXNwb25zZT5gIG9iamVjdAogICAgOnJ0eXBlOiByZXF1ZXN0cy5SZXNwb25zZQogICAgXCJcIlwiCgogICAgcmV0dXJuIHJlcXVlc3QoXCJwb3N0XCIsIHVybCwgZGF0YT1kYXRhLCBqc29uPWpzb24sICoqa3dhcmdzKQoKCmRlZiBwdXQodXJsLCBkYXRhPU5vbmUsICoqa3dhcmdzKToKICAgIHJcIlwiXCJTZW5kcyBhIFBVVCByZXF1ZXN0LgoKICAgIDpwYXJhbSB1cmw6IFVSTCBmb3IgdGhlIG5ldyA6Y2xhc3M6YFJlcXVlc3RgIG9iamVjdC4KICAgIDpwYXJhbSBkYXRhOiAob3B0aW9uYWwpIERpY3Rpb25hcnksIGxpc3Qgb2YgdHVwbGVzLCBieXRlcywgb3IgZmlsZS1saWtlCiAgICAgICAgb2JqZWN0IHRvIHNlbmQgaW4gdGhlIGJvZHkgb2YgdGhlIDpjbGFzczpgUmVxdWVzdGAuCiAgICA6cGFyYW0ganNvbjogKG9wdGlvbmFsKSBqc29uIGRhdGEgdG8gc2VuZCBpbiB0aGUgYm9keSBvZiB0aGUgOmNsYXNzOmBSZXF1ZXN0YC4KICAgIDpwYXJhbSBcXCpcXCprd2FyZ3M6IE9wdGlvbmFsIGFyZ3VtZW50cyB0aGF0IGBgcmVxdWVzdGBgIHRha2VzLgogICAgOnJldHVybjogOmNsYXNzOmBSZXNwb25zZSA8UmVzcG9uc2U+YCBvYmplY3QKICAgIDpydHlwZTogcmVxdWVzdHMuUmVzcG9uc2UKICAgIFwiXCJcIgoKICAgIHJldHVybiByZXF1ZXN0KFwicHV0XCIsIHVybCwgZGF0YT1kYXRhLCAqKmt3YXJncykKCgpkZWYgcGF0Y2godXJsLCBkYXRhPU5vbmUsICoqa3dhcmdzKToKICAgIHJcIlwiXCJTZW5kcyBhIFBBVENIIHJlcXVlc3QuCgogICAgOnBhcmFtIHVybDogVVJMIGZvciB0aGUgbmV3IDpjbGFzczpgUmVxdWVzdGAgb2JqZWN0LgogICAgOnBhcmFtIGRhdGE6IChvcHRpb25hbCkgRGljdGlvbmFyeSwgbGlzdCBvZiB0dXBsZXMsIGJ5dGVzLCBvciBmaWxlLWxpa2UKICAgICAgICBvYmplY3QgdG8gc2VuZCBpbiB0aGUgYm9keSBvZiB0aGUgOmNsYXNzOmBSZXF1ZXN0YC4KICAgIDpwYXJhbSBqc29uOiAob3B0aW9uYWwpIGpzb24gZGF0YSB0byBzZW5kIGluIHRoZSBib2R5IG9mIHRoZSA6Y2xhc3M6YFJlcXVlc3RgLgogICAgOnBhcmFtIFxcKlxcKmt3YXJnczogT3B0aW9uYWwgYXJndW1lbnRzIHRoYXQgYGByZXF1ZXN0YGAgdGFrZXMuCiAgICA6cmV0dXJuOiA6Y2xhc3M6YFJlc3BvbnNlIDxSZXNwb25zZT5gIG9iamVjdAogICAgOnJ0eXBlOiByZXF1ZXN0cy5SZXNwb25zZQogICAgXCJcIlwiCgogICAgcmV0dXJuIHJlcXVlc3QoXCJwYXRjaFwiLCB1cmwsIGRhdGE9ZGF0YSwgKiprd2FyZ3MpCgoKZGVmIGRlbGV0ZSh1cmwsICoqa3dhcmdzKToKICAgIHJcIlwiXCJTZW5kcyBhIERFTEVURSByZXF1ZXN0LgoKICAgIDpwYXJhbSB1cmw6IFVSTCBmb3IgdGhlIG5ldyA6Y2xhc3M6YFJlcXVlc3RgIG9iamVjdC4KICAgIDpwYXJhbSBcXCpcXCprd2FyZ3M6IE9wdGlvbmFsIGFyZ3VtZW50cyB0aGF0IGBgcmVxdWVzdGBgIHRha2VzLgogICAgOnJldHVybjogOmNsYXNzOmBSZXNwb25zZSA8UmVzcG9uc2U+YCBvYmplY3QKICAgIDpydHlwZTogcmVxdWVzdHMuUmVzcG9uc2UKICAgIFwiXCJcIgoKICAgIHJldHVybiByZXF1ZXN0KFwiZGVsZXRlXCIsIHVybCwgKiprd2FyZ3MpCgoiIiIKbW9kdWxlX2RpY3RbInJlcXVlc3RzIitvcy5zZXArImNlcnRzLnB5Il09IiIiCiMhL3Vzci9iaW4vZW52IHB5dGhvbgoKIyA8IGluY2x1ZGUgJ2NlcnRpZmkucHknID4KClwiXCJcIgpyZXF1ZXN0cy5jZXJ0cwp+fn5+fn5+fn5+fn5+fgoKVGhpcyBtb2R1bGUgcmV0dXJucyB0aGUgcHJlZmVycmVkIGRlZmF1bHQgQ0EgY2VydGlmaWNhdGUgYnVuZGxlLiBUaGVyZSBpcwpvbmx5IG9uZSDigJQgdGhlIG9uZSBmcm9tIHRoZSBjZXJ0aWZpIHBhY2thZ2UuCgpJZiB5b3UgYXJlIHBhY2thZ2luZyBSZXF1ZXN0cywgZS5nLiwgZm9yIGEgTGludXggZGlzdHJpYnV0aW9uIG9yIGEgbWFuYWdlZAplbnZpcm9ubWVudCwgeW91IGNhbiBjaGFuZ2UgdGhlIGRlZmluaXRpb24gb2Ygd2hlcmUoKSB0byByZXR1cm4gYSBzZXBhcmF0ZWx5CnBhY2thZ2VkIENBIGJ1bmRsZS4KXCJcIlwiCmZyb20gY2VydGlmaSBpbXBvcnQgd2hlcmUKCmlmIF9fbmFtZV9fID09IFwiX19tYWluX19cIjoKICAgIHByaW50KHdoZXJlKCkpCgoiIiIKbW9kdWxlX2RpY3RbInJlcXVlc3RzIitvcy5zZXArIl9fdmVyc2lvbl9fLnB5Il09IiIiCiMgLi0uIC4tLiAuLS4gLiAuIC4tLiAuLS4gLi0uIC4tLgojIHwoICB8LSAgfC58IHwgfCB8LSAgYC0uICB8ICBgLS4KIyAnICcgYC0nIGAtYC5gLScgYC0nIGAtJyAgJyAgYC0nCgpfX3RpdGxlX18gPSBcInJlcXVlc3RzXCIKX19kZXNjcmlwdGlvbl9fID0gXCJQeXRob24gSFRUUCBmb3IgSHVtYW5zLlwiCl9fdXJsX18gPSBcImh0dHBzOi8vcmVxdWVzdHMucmVhZHRoZWRvY3MuaW9cIgpfX3ZlcnNpb25fXyA9IFwiMi4yOC4xXCIKX19idWlsZF9fID0gMHgwMjI4MDEKX19hdXRob3JfXyA9IFwiS2VubmV0aCBSZWl0elwiCl9fYXV0aG9yX2VtYWlsX18gPSBcIm1lQGtlbm5ldGhyZWl0ei5vcmdcIgpfX2xpY2Vuc2VfXyA9IFwiQXBhY2hlIDIuMFwiCl9fY29weXJpZ2h0X18gPSBcIkNvcHlyaWdodCAyMDIyIEtlbm5ldGggUmVpdHpcIgpfX2Nha2VfXyA9IFwiXFx1MjcyOCBcXFUwMDAxZjM3MCBcXHUyNzI4XCIKCiIiIgptb2R1bGVfZGljdFsicmVxdWVzdHMiK29zLnNlcCsic3RhdHVzX2NvZGVzLnB5Il09IiIiCnJcIlwiXCIKVGhlIGBgY29kZXNgYCBvYmplY3QgZGVmaW5lcyBhIG1hcHBpbmcgZnJvbSBjb21tb24gbmFtZXMgZm9yIEhUVFAgc3RhdHVzZXMKdG8gdGhlaXIgbnVtZXJpY2FsIGNvZGVzLCBhY2Nlc3NpYmxlIGVpdGhlciBhcyBhdHRyaWJ1dGVzIG9yIGFzIGRpY3Rpb25hcnkKaXRlbXMuCgpFeGFtcGxlOjoKCiAgICA+Pj4gaW1wb3J0IHJlcXVlc3RzCiAgICA+Pj4gcmVxdWVzdHMuY29kZXNbJ3RlbXBvcmFyeV9yZWRpcmVjdCddCiAgICAzMDcKICAgID4+PiByZXF1ZXN0cy5jb2Rlcy50ZWFwb3QKICAgIDQxOAogICAgPj4+IHJlcXVlc3RzLmNvZGVzWydcXG8vJ10KICAgIDIwMAoKU29tZSBjb2RlcyBoYXZlIG11bHRpcGxlIG5hbWVzLCBhbmQgYm90aCB1cHBlci0gYW5kIGxvd2VyLWNhc2UgdmVyc2lvbnMgb2YKdGhlIG5hbWVzIGFyZSBhbGxvd2VkLiBGb3IgZXhhbXBsZSwgYGBjb2Rlcy5va2BgLCBgYGNvZGVzLk9LYGAsIGFuZApgYGNvZGVzLm9rYXlgYCBhbGwgY29ycmVzcG9uZCB0byB0aGUgSFRUUCBzdGF0dXMgY29kZSAyMDAuClwiXCJcIgoKZnJvbSAuc3RydWN0dXJlcyBpbXBvcnQgTG9va3VwRGljdAoKX2NvZGVzID0gewogICAgIyBJbmZvcm1hdGlvbmFsLgogICAgMTAwOiAoXCJjb250aW51ZVwiLCksCiAgICAxMDE6IChcInN3aXRjaGluZ19wcm90b2NvbHNcIiwpLAogICAgMTAyOiAoXCJwcm9jZXNzaW5nXCIsKSwKICAgIDEwMzogKFwiY2hlY2twb2ludFwiLCksCiAgICAxMjI6IChcInVyaV90b29fbG9uZ1wiLCBcInJlcXVlc3RfdXJpX3Rvb19sb25nXCIpLAogICAgMjAwOiAoXCJva1wiLCBcIm9rYXlcIiwgXCJhbGxfb2tcIiwgXCJhbGxfb2theVwiLCBcImFsbF9nb29kXCIsIFwiXFxcXG8vXCIsIFwi4pyTXCIpLAogICAgMjAxOiAoXCJjcmVhdGVkXCIsKSwKICAgIDIwMjogKFwiYWNjZXB0ZWRcIiwpLAogICAgMjAzOiAoXCJub25fYXV0aG9yaXRhdGl2ZV9pbmZvXCIsIFwibm9uX2F1dGhvcml0YXRpdmVfaW5mb3JtYXRpb25cIiksCiAgICAyMDQ6IChcIm5vX2NvbnRlbnRcIiwpLAogICAgMjA1OiAoXCJyZXNldF9jb250ZW50XCIsIFwicmVzZXRcIiksCiAgICAyMDY6IChcInBhcnRpYWxfY29udGVudFwiLCBcInBhcnRpYWxcIiksCiAgICAyMDc6IChcIm11bHRpX3N0YXR1c1wiLCBcIm11bHRpcGxlX3N0YXR1c1wiLCBcIm11bHRpX3N0YXRpXCIsIFwibXVsdGlwbGVfc3RhdGlcIiksCiAgICAyMDg6IChcImFscmVhZHlfcmVwb3J0ZWRcIiwpLAogICAgMjI2OiAoXCJpbV91c2VkXCIsKSwKICAgICMgUmVkaXJlY3Rpb24uCiAgICAzMDA6IChcIm11bHRpcGxlX2Nob2ljZXNcIiwpLAogICAgMzAxOiAoXCJtb3ZlZF9wZXJtYW5lbnRseVwiLCBcIm1vdmVkXCIsIFwiXFxcXG8tXCIpLAogICAgMzAyOiAoXCJmb3VuZFwiLCksCiAgICAzMDM6IChcInNlZV9vdGhlclwiLCBcIm90aGVyXCIpLAogICAgMzA0OiAoXCJub3RfbW9kaWZpZWRcIiwpLAogICAgMzA1OiAoXCJ1c2VfcHJveHlcIiwpLAogICAgMzA2OiAoXCJzd2l0Y2hfcHJveHlcIiwpLAogICAgMzA3OiAoXCJ0ZW1wb3JhcnlfcmVkaXJlY3RcIiwgXCJ0ZW1wb3JhcnlfbW92ZWRcIiwgXCJ0ZW1wb3JhcnlcIiksCiAgICAzMDg6ICgKICAgICAgICBcInBlcm1hbmVudF9yZWRpcmVjdFwiLAogICAgICAgIFwicmVzdW1lX2luY29tcGxldGVcIiwKICAgICAgICBcInJlc3VtZVwiLAogICAgKSwgICMgXCJyZXN1bWVcIiBhbmQgXCJyZXN1bWVfaW5jb21wbGV0ZVwiIHRvIGJlIHJlbW92ZWQgaW4gMy4wCiAgICAjIENsaWVudCBFcnJvci4KICAgIDQwMDogKFwiYmFkX3JlcXVlc3RcIiwgXCJiYWRcIiksCiAgICA0MDE6IChcInVuYXV0aG9yaXplZFwiLCksCiAgICA0MDI6IChcInBheW1lbnRfcmVxdWlyZWRcIiwgXCJwYXltZW50XCIpLAogICAgNDAzOiAoXCJmb3JiaWRkZW5cIiwpLAogICAgNDA0OiAoXCJub3RfZm91bmRcIiwgXCItby1cIiksCiAgICA0MDU6IChcIm1ldGhvZF9ub3RfYWxsb3dlZFwiLCBcIm5vdF9hbGxvd2VkXCIpLAogICAgNDA2OiAoXCJub3RfYWNjZXB0YWJsZVwiLCksCiAgICA0MDc6IChcInByb3h5X2F1dGhlbnRpY2F0aW9uX3JlcXVpcmVkXCIsIFwicHJveHlfYXV0aFwiLCBcInByb3h5X2F1dGhlbnRpY2F0aW9uXCIpLAogICAgNDA4OiAoXCJyZXF1ZXN0X3RpbWVvdXRcIiwgXCJ0aW1lb3V0XCIpLAogICAgNDA5OiAoXCJjb25mbGljdFwiLCksCiAgICA0MTA6IChcImdvbmVcIiwpLAogICAgNDExOiAoXCJsZW5ndGhfcmVxdWlyZWRcIiwpLAogICAgNDEyOiAoXCJwcmVjb25kaXRpb25fZmFpbGVkXCIsIFwicHJlY29uZGl0aW9uXCIpLAogICAgNDEzOiAoXCJyZXF1ZXN0X2VudGl0eV90b29fbGFyZ2VcIiwpLAogICAgNDE0OiAoXCJyZXF1ZXN0X3VyaV90b29fbGFyZ2VcIiwpLAogICAgNDE1OiAoXCJ1bnN1cHBvcnRlZF9tZWRpYV90eXBlXCIsIFwidW5zdXBwb3J0ZWRfbWVkaWFcIiwgXCJtZWRpYV90eXBlXCIpLAogICAgNDE2OiAoCiAgICAgICAgXCJyZXF1ZXN0ZWRfcmFuZ2Vfbm90X3NhdGlzZmlhYmxlXCIsCiAgICAgICAgXCJyZXF1ZXN0ZWRfcmFuZ2VcIiwKICAgICAgICBcInJhbmdlX25vdF9zYXRpc2ZpYWJsZVwiLAogICAgKSwKICAgIDQxNzogKFwiZXhwZWN0YXRpb25fZmFpbGVkXCIsKSwKICAgIDQxODogKFwiaW1fYV90ZWFwb3RcIiwgXCJ0ZWFwb3RcIiwgXCJpX2FtX2FfdGVhcG90XCIpLAogICAgNDIxOiAoXCJtaXNkaXJlY3RlZF9yZXF1ZXN0XCIsKSwKICAgIDQyMjogKFwidW5wcm9jZXNzYWJsZV9lbnRpdHlcIiwgXCJ1bnByb2Nlc3NhYmxlXCIpLAogICAgNDIzOiAoXCJsb2NrZWRcIiwpLAogICAgNDI0OiAoXCJmYWlsZWRfZGVwZW5kZW5jeVwiLCBcImRlcGVuZGVuY3lcIiksCiAgICA0MjU6IChcInVub3JkZXJlZF9jb2xsZWN0aW9uXCIsIFwidW5vcmRlcmVkXCIpLAogICAgNDI2OiAoXCJ1cGdyYWRlX3JlcXVpcmVkXCIsIFwidXBncmFkZVwiKSwKICAgIDQyODogKFwicHJlY29uZGl0aW9uX3JlcXVpcmVkXCIsIFwicHJlY29uZGl0aW9uXCIpLAogICAgNDI5OiAoXCJ0b29fbWFueV9yZXF1ZXN0c1wiLCBcInRvb19tYW55XCIpLAogICAgNDMxOiAoXCJoZWFkZXJfZmllbGRzX3Rvb19sYXJnZVwiLCBcImZpZWxkc190b29fbGFyZ2VcIiksCiAgICA0NDQ6IChcIm5vX3Jlc3BvbnNlXCIsIFwibm9uZVwiKSwKICAgIDQ0OTogKFwicmV0cnlfd2l0aFwiLCBcInJldHJ5XCIpLAogICAgNDUwOiAoXCJibG9ja2VkX2J5X3dpbmRvd3NfcGFyZW50YWxfY29udHJvbHNcIiwgXCJwYXJlbnRhbF9jb250cm9sc1wiKSwKICAgIDQ1MTogKFwidW5hdmFpbGFibGVfZm9yX2xlZ2FsX3JlYXNvbnNcIiwgXCJsZWdhbF9yZWFzb25zXCIpLAogICAgNDk5OiAoXCJjbGllbnRfY2xvc2VkX3JlcXVlc3RcIiwpLAogICAgIyBTZXJ2ZXIgRXJyb3IuCiAgICA1MDA6IChcImludGVybmFsX3NlcnZlcl9lcnJvclwiLCBcInNlcnZlcl9lcnJvclwiLCBcIi9vXFxcXFwiLCBcIuKcl1wiKSwKICAgIDUwMTogKFwibm90X2ltcGxlbWVudGVkXCIsKSwKICAgIDUwMjogKFwiYmFkX2dhdGV3YXlcIiwpLAogICAgNTAzOiAoXCJzZXJ2aWNlX3VuYXZhaWxhYmxlXCIsIFwidW5hdmFpbGFibGVcIiksCiAgICA1MDQ6IChcImdhdGV3YXlfdGltZW91dFwiLCksCiAgICA1MDU6IChcImh0dHBfdmVyc2lvbl9ub3Rfc3VwcG9ydGVkXCIsIFwiaHR0cF92ZXJzaW9uXCIpLAogICAgNTA2OiAoXCJ2YXJpYW50X2Fsc29fbmVnb3RpYXRlc1wiLCksCiAgICA1MDc6IChcImluc3VmZmljaWVudF9zdG9yYWdlXCIsKSwKICAgIDUwOTogKFwiYmFuZHdpZHRoX2xpbWl0X2V4Y2VlZGVkXCIsIFwiYmFuZHdpZHRoXCIpLAogICAgNTEwOiAoXCJub3RfZXh0ZW5kZWRcIiwpLAogICAgNTExOiAoXCJuZXR3b3JrX2F1dGhlbnRpY2F0aW9uX3JlcXVpcmVkXCIsIFwibmV0d29ya19hdXRoXCIsIFwibmV0d29ya19hdXRoZW50aWNhdGlvblwiKSwKfQoKY29kZXMgPSBMb29rdXBEaWN0KG5hbWU9XCJzdGF0dXNfY29kZXNcIikKCgpkZWYgX2luaXQoKToKICAgIGZvciBjb2RlLCB0aXRsZXMgaW4gX2NvZGVzLml0ZW1zKCk6CiAgICAgICAgZm9yIHRpdGxlIGluIHRpdGxlczoKICAgICAgICAgICAgc2V0YXR0cihjb2RlcywgdGl0bGUsIGNvZGUpCiAgICAgICAgICAgIGlmIG5vdCB0aXRsZS5zdGFydHN3aXRoKChcIlxcXFxcIiwgXCIvXCIpKToKICAgICAgICAgICAgICAgIHNldGF0dHIoY29kZXMsIHRpdGxlLnVwcGVyKCksIGNvZGUpCgogICAgZGVmIGRvYyhjb2RlKToKICAgICAgICBuYW1lcyA9IFwiLCBcIi5qb2luKGZcImBge259YGBcIiBmb3IgbiBpbiBfY29kZXNbY29kZV0pCiAgICAgICAgcmV0dXJuIFwiKiAlZDogJXNcIiAlIChjb2RlLCBuYW1lcykKCiAgICBnbG9iYWwgX19kb2NfXwogICAgX19kb2NfXyA9ICgKICAgICAgICBfX2RvY19fICsgXCJcXG5cIiArIFwiXFxuXCIuam9pbihkb2MoY29kZSkgZm9yIGNvZGUgaW4gc29ydGVkKF9jb2RlcykpCiAgICAgICAgaWYgX19kb2NfXyBpcyBub3QgTm9uZQogICAgICAgIGVsc2UgTm9uZQogICAgKQoKCl9pbml0KCkKCiIiIgptb2R1bGVfZGljdFsicmVxdWVzdHMiK29zLnNlcCsiZXhjZXB0aW9ucy5weSJdPSIiIgojIDwgaW5jbHVkZSAndXJsbGliMy5weScgPgoKXCJcIlwiCnJlcXVlc3RzLmV4Y2VwdGlvbnMKfn5+fn5+fn5+fn5+fn5+fn5+fgoKVGhpcyBtb2R1bGUgY29udGFpbnMgdGhlIHNldCBvZiBSZXF1ZXN0cycgZXhjZXB0aW9ucy4KXCJcIlwiCmZyb20gdXJsbGliMy5leGNlcHRpb25zIGltcG9ydCBIVFRQRXJyb3IgYXMgQmFzZUhUVFBFcnJvcgoKZnJvbSAuY29tcGF0IGltcG9ydCBKU09ORGVjb2RlRXJyb3IgYXMgQ29tcGF0SlNPTkRlY29kZUVycm9yCgoKY2xhc3MgUmVxdWVzdEV4Y2VwdGlvbihJT0Vycm9yKToKICAgIFwiXCJcIlRoZXJlIHdhcyBhbiBhbWJpZ3VvdXMgZXhjZXB0aW9uIHRoYXQgb2NjdXJyZWQgd2hpbGUgaGFuZGxpbmcgeW91cgogICAgcmVxdWVzdC4KICAgIFwiXCJcIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqYXJncywgKiprd2FyZ3MpOgogICAgICAgIFwiXCJcIkluaXRpYWxpemUgUmVxdWVzdEV4Y2VwdGlvbiB3aXRoIGByZXF1ZXN0YCBhbmQgYHJlc3BvbnNlYCBvYmplY3RzLlwiXCJcIgogICAgICAgIHJlc3BvbnNlID0ga3dhcmdzLnBvcChcInJlc3BvbnNlXCIsIE5vbmUpCiAgICAgICAgc2VsZi5yZXNwb25zZSA9IHJlc3BvbnNlCiAgICAgICAgc2VsZi5yZXF1ZXN0ID0ga3dhcmdzLnBvcChcInJlcXVlc3RcIiwgTm9uZSkKICAgICAgICBpZiByZXNwb25zZSBpcyBub3QgTm9uZSBhbmQgbm90IHNlbGYucmVxdWVzdCBhbmQgaGFzYXR0cihyZXNwb25zZSwgXCJyZXF1ZXN0XCIpOgogICAgICAgICAgICBzZWxmLnJlcXVlc3QgPSBzZWxmLnJlc3BvbnNlLnJlcXVlc3QKICAgICAgICBzdXBlcigpLl9faW5pdF9fKCphcmdzLCAqKmt3YXJncykKCgpjbGFzcyBJbnZhbGlkSlNPTkVycm9yKFJlcXVlc3RFeGNlcHRpb24pOgogICAgXCJcIlwiQSBKU09OIGVycm9yIG9jY3VycmVkLlwiXCJcIgoKCmNsYXNzIEpTT05EZWNvZGVFcnJvcihJbnZhbGlkSlNPTkVycm9yLCBDb21wYXRKU09ORGVjb2RlRXJyb3IpOgogICAgXCJcIlwiQ291bGRuJ3QgZGVjb2RlIHRoZSB0ZXh0IGludG8ganNvblwiXCJcIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqYXJncywgKiprd2FyZ3MpOgogICAgICAgIFwiXCJcIgogICAgICAgIENvbnN0cnVjdCB0aGUgSlNPTkRlY29kZUVycm9yIGluc3RhbmNlIGZpcnN0IHdpdGggYWxsCiAgICAgICAgYXJncy4gVGhlbiB1c2UgaXQncyBhcmdzIHRvIGNvbnN0cnVjdCB0aGUgSU9FcnJvciBzbyB0aGF0CiAgICAgICAgdGhlIGpzb24gc3BlY2lmaWMgYXJncyBhcmVuJ3QgdXNlZCBhcyBJT0Vycm9yIHNwZWNpZmljIGFyZ3MKICAgICAgICBhbmQgdGhlIGVycm9yIG1lc3NhZ2UgZnJvbSBKU09ORGVjb2RlRXJyb3IgaXMgcHJlc2VydmVkLgogICAgICAgIFwiXCJcIgogICAgICAgIENvbXBhdEpTT05EZWNvZGVFcnJvci5fX2luaXRfXyhzZWxmLCAqYXJncykKICAgICAgICBJbnZhbGlkSlNPTkVycm9yLl9faW5pdF9fKHNlbGYsICpzZWxmLmFyZ3MsICoqa3dhcmdzKQoKCmNsYXNzIEhUVFBFcnJvcihSZXF1ZXN0RXhjZXB0aW9uKToKICAgIFwiXCJcIkFuIEhUVFAgZXJyb3Igb2NjdXJyZWQuXCJcIlwiCgoKY2xhc3MgQ29ubmVjdGlvbkVycm9yKFJlcXVlc3RFeGNlcHRpb24pOgogICAgXCJcIlwiQSBDb25uZWN0aW9uIGVycm9yIG9jY3VycmVkLlwiXCJcIgoKCmNsYXNzIFByb3h5RXJyb3IoQ29ubmVjdGlvbkVycm9yKToKICAgIFwiXCJcIkEgcHJveHkgZXJyb3Igb2NjdXJyZWQuXCJcIlwiCgoKY2xhc3MgU1NMRXJyb3IoQ29ubmVjdGlvbkVycm9yKToKICAgIFwiXCJcIkFuIFNTTCBlcnJvciBvY2N1cnJlZC5cIlwiXCIKCgpjbGFzcyBUaW1lb3V0KFJlcXVlc3RFeGNlcHRpb24pOgogICAgXCJcIlwiVGhlIHJlcXVlc3QgdGltZWQgb3V0LgoKICAgIENhdGNoaW5nIHRoaXMgZXJyb3Igd2lsbCBjYXRjaCBib3RoCiAgICA6ZXhjOmB+cmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0VGltZW91dGAgYW5kCiAgICA6ZXhjOmB+cmVxdWVzdHMuZXhjZXB0aW9ucy5SZWFkVGltZW91dGAgZXJyb3JzLgogICAgXCJcIlwiCgoKY2xhc3MgQ29ubmVjdFRpbWVvdXQoQ29ubmVjdGlvbkVycm9yLCBUaW1lb3V0KToKICAgIFwiXCJcIlRoZSByZXF1ZXN0IHRpbWVkIG91dCB3aGlsZSB0cnlpbmcgdG8gY29ubmVjdCB0byB0aGUgcmVtb3RlIHNlcnZlci4KCiAgICBSZXF1ZXN0cyB0aGF0IHByb2R1Y2VkIHRoaXMgZXJyb3IgYXJlIHNhZmUgdG8gcmV0cnkuCiAgICBcIlwiXCIKCgpjbGFzcyBSZWFkVGltZW91dChUaW1lb3V0KToKICAgIFwiXCJcIlRoZSBzZXJ2ZXIgZGlkIG5vdCBzZW5kIGFueSBkYXRhIGluIHRoZSBhbGxvdHRlZCBhbW91bnQgb2YgdGltZS5cIlwiXCIKCgpjbGFzcyBVUkxSZXF1aXJlZChSZXF1ZXN0RXhjZXB0aW9uKToKICAgIFwiXCJcIkEgdmFsaWQgVVJMIGlzIHJlcXVpcmVkIHRvIG1ha2UgYSByZXF1ZXN0LlwiXCJcIgoKCmNsYXNzIFRvb01hbnlSZWRpcmVjdHMoUmVxdWVzdEV4Y2VwdGlvbik6CiAgICBcIlwiXCJUb28gbWFueSByZWRpcmVjdHMuXCJcIlwiCgoKY2xhc3MgTWlzc2luZ1NjaGVtYShSZXF1ZXN0RXhjZXB0aW9uLCBWYWx1ZUVycm9yKToKICAgIFwiXCJcIlRoZSBVUkwgc2NoZW1lIChlLmcuIGh0dHAgb3IgaHR0cHMpIGlzIG1pc3NpbmcuXCJcIlwiCgoKY2xhc3MgSW52YWxpZFNjaGVtYShSZXF1ZXN0RXhjZXB0aW9uLCBWYWx1ZUVycm9yKToKICAgIFwiXCJcIlRoZSBVUkwgc2NoZW1lIHByb3ZpZGVkIGlzIGVpdGhlciBpbnZhbGlkIG9yIHVuc3VwcG9ydGVkLlwiXCJcIgoKCmNsYXNzIEludmFsaWRVUkwoUmVxdWVzdEV4Y2VwdGlvbiwgVmFsdWVFcnJvcik6CiAgICBcIlwiXCJUaGUgVVJMIHByb3ZpZGVkIHdhcyBzb21laG93IGludmFsaWQuXCJcIlwiCgoKY2xhc3MgSW52YWxpZEhlYWRlcihSZXF1ZXN0RXhjZXB0aW9uLCBWYWx1ZUVycm9yKToKICAgIFwiXCJcIlRoZSBoZWFkZXIgdmFsdWUgcHJvdmlkZWQgd2FzIHNvbWVob3cgaW52YWxpZC5cIlwiXCIKCgpjbGFzcyBJbnZhbGlkUHJveHlVUkwoSW52YWxpZFVSTCk6CiAgICBcIlwiXCJUaGUgcHJveHkgVVJMIHByb3ZpZGVkIGlzIGludmFsaWQuXCJcIlwiCgoKY2xhc3MgQ2h1bmtlZEVuY29kaW5nRXJyb3IoUmVxdWVzdEV4Y2VwdGlvbik6CiAgICBcIlwiXCJUaGUgc2VydmVyIGRlY2xhcmVkIGNodW5rZWQgZW5jb2RpbmcgYnV0IHNlbnQgYW4gaW52YWxpZCBjaHVuay5cIlwiXCIKCgpjbGFzcyBDb250ZW50RGVjb2RpbmdFcnJvcihSZXF1ZXN0RXhjZXB0aW9uLCBCYXNlSFRUUEVycm9yKToKICAgIFwiXCJcIkZhaWxlZCB0byBkZWNvZGUgcmVzcG9uc2UgY29udGVudC5cIlwiXCIKCgpjbGFzcyBTdHJlYW1Db25zdW1lZEVycm9yKFJlcXVlc3RFeGNlcHRpb24sIFR5cGVFcnJvcik6CiAgICBcIlwiXCJUaGUgY29udGVudCBmb3IgdGhpcyByZXNwb25zZSB3YXMgYWxyZWFkeSBjb25zdW1lZC5cIlwiXCIKCgpjbGFzcyBSZXRyeUVycm9yKFJlcXVlc3RFeGNlcHRpb24pOgogICAgXCJcIlwiQ3VzdG9tIHJldHJpZXMgbG9naWMgZmFpbGVkXCJcIlwiCgoKY2xhc3MgVW5yZXdpbmRhYmxlQm9keUVycm9yKFJlcXVlc3RFeGNlcHRpb24pOgogICAgXCJcIlwiUmVxdWVzdHMgZW5jb3VudGVyZWQgYW4gZXJyb3Igd2hlbiB0cnlpbmcgdG8gcmV3aW5kIGEgYm9keS5cIlwiXCIKCgojIFdhcm5pbmdzCgoKY2xhc3MgUmVxdWVzdHNXYXJuaW5nKFdhcm5pbmcpOgogICAgXCJcIlwiQmFzZSB3YXJuaW5nIGZvciBSZXF1ZXN0cy5cIlwiXCIKCgpjbGFzcyBGaWxlTW9kZVdhcm5pbmcoUmVxdWVzdHNXYXJuaW5nLCBEZXByZWNhdGlvbldhcm5pbmcpOgogICAgXCJcIlwiQSBmaWxlIHdhcyBvcGVuZWQgaW4gdGV4dCBtb2RlLCBidXQgUmVxdWVzdHMgZGV0ZXJtaW5lZCBpdHMgYmluYXJ5IGxlbmd0aC5cIlwiXCIKCgpjbGFzcyBSZXF1ZXN0c0RlcGVuZGVuY3lXYXJuaW5nKFJlcXVlc3RzV2FybmluZyk6CiAgICBcIlwiXCJBbiBpbXBvcnRlZCBkZXBlbmRlbmN5IGRvZXNuJ3QgbWF0Y2ggdGhlIGV4cGVjdGVkIHZlcnNpb24gcmFuZ2UuXCJcIlwiCgoiIiIKbW9kdWxlX2RpY3RbInJlcXVlc3RzIitvcy5zZXArIl9faW5pdF9fLnB5Il09IiIiCiMgICBfXwojICAvX18pICBfICBfICAgICBfICAgXyBfLyAgIF8KIyAvICggICAoLSAoLyAoLyAoLSBfKSAgLyAgXykKIyAgICAgICAgICAvCgojIDwgaW5jbHVkZSAndXJsbGliMy5weScgPgoKIyA8IGluY2x1ZGUgJ2NoYXJzZXRfbm9ybWFsaXplci5weScgPgoKIyA8IGluY2x1ZGUgJ2NoYXJkZXQucHknID4KCiMgPCBpbmNsdWRlICdjcnlwdG9ncmFwaHkucHknID4KClwiXCJcIgpSZXF1ZXN0cyBIVFRQIExpYnJhcnkKfn5+fn5+fn5+fn5+fn5+fn5+fn5+CgpSZXF1ZXN0cyBpcyBhbiBIVFRQIGxpYnJhcnksIHdyaXR0ZW4gaW4gUHl0aG9uLCBmb3IgaHVtYW4gYmVpbmdzLgpCYXNpYyBHRVQgdXNhZ2U6CgogICA+Pj4gaW1wb3J0IHJlcXVlc3RzCiAgID4+PiByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL3d3dy5weXRob24ub3JnJykKICAgPj4+IHIuc3RhdHVzX2NvZGUKICAgMjAwCiAgID4+PiBiJ1B5dGhvbiBpcyBhIHByb2dyYW1taW5nIGxhbmd1YWdlJyBpbiByLmNvbnRlbnQKICAgVHJ1ZQoKLi4uIG9yIFBPU1Q6CgogICA+Pj4gcGF5bG9hZCA9IGRpY3Qoa2V5MT0ndmFsdWUxJywga2V5Mj0ndmFsdWUyJykKICAgPj4+IHIgPSByZXF1ZXN0cy5wb3N0KCdodHRwczovL2h0dHBiaW4ub3JnL3Bvc3QnLCBkYXRhPXBheWxvYWQpCiAgID4+PiBwcmludChyLnRleHQpCiAgIHsKICAgICAuLi4KICAgICBcImZvcm1cIjogewogICAgICAgXCJrZXkxXCI6IFwidmFsdWUxXCIsCiAgICAgICBcImtleTJcIjogXCJ2YWx1ZTJcIgogICAgIH0sCiAgICAgLi4uCiAgIH0KClRoZSBvdGhlciBIVFRQIG1ldGhvZHMgYXJlIHN1cHBvcnRlZCAtIHNlZSBgcmVxdWVzdHMuYXBpYC4gRnVsbCBkb2N1bWVudGF0aW9uCmlzIGF0IDxodHRwczovL3JlcXVlc3RzLnJlYWR0aGVkb2NzLmlvPi4KCjpjb3B5cmlnaHQ6IChjKSAyMDE3IGJ5IEtlbm5ldGggUmVpdHouCjpsaWNlbnNlOiBBcGFjaGUgMi4wLCBzZWUgTElDRU5TRSBmb3IgbW9yZSBkZXRhaWxzLgpcIlwiXCIKCmltcG9ydCB3YXJuaW5ncwoKaW1wb3J0IHVybGxpYjMKCmZyb20gLmV4Y2VwdGlvbnMgaW1wb3J0IFJlcXVlc3RzRGVwZW5kZW5jeVdhcm5pbmcKCnRyeToKICAgIGZyb20gY2hhcnNldF9ub3JtYWxpemVyIGltcG9ydCBfX3ZlcnNpb25fXyBhcyBjaGFyc2V0X25vcm1hbGl6ZXJfdmVyc2lvbgpleGNlcHQgSW1wb3J0RXJyb3I6CiAgICBjaGFyc2V0X25vcm1hbGl6ZXJfdmVyc2lvbiA9IE5vbmUKCnRyeToKICAgIGZyb20gY2hhcmRldCBpbXBvcnQgX192ZXJzaW9uX18gYXMgY2hhcmRldF92ZXJzaW9uCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIGNoYXJkZXRfdmVyc2lvbiA9IE5vbmUKCgpkZWYgY2hlY2tfY29tcGF0aWJpbGl0eSh1cmxsaWIzX3ZlcnNpb24sIGNoYXJkZXRfdmVyc2lvbiwgY2hhcnNldF9ub3JtYWxpemVyX3ZlcnNpb24pOgogICAgdXJsbGliM192ZXJzaW9uID0gdXJsbGliM192ZXJzaW9uLnNwbGl0KFwiLlwiKQogICAgYXNzZXJ0IHVybGxpYjNfdmVyc2lvbiAhPSBbXCJkZXZcIl0gICMgVmVyaWZ5IHVybGxpYjMgaXNuJ3QgaW5zdGFsbGVkIGZyb20gZ2l0LgoKICAgICMgU29tZXRpbWVzLCB1cmxsaWIzIG9ubHkgcmVwb3J0cyBpdHMgdmVyc2lvbiBhcyAxNi4xLgogICAgaWYgbGVuKHVybGxpYjNfdmVyc2lvbikgPT0gMjoKICAgICAgICB1cmxsaWIzX3ZlcnNpb24uYXBwZW5kKFwiMFwiKQoKICAgICMgQ2hlY2sgdXJsbGliMyBmb3IgY29tcGF0aWJpbGl0eS4KICAgIG1ham9yLCBtaW5vciwgcGF0Y2ggPSB1cmxsaWIzX3ZlcnNpb24gICMgbm9xYTogRjgxMQogICAgbWFqb3IsIG1pbm9yLCBwYXRjaCA9IGludChtYWpvciksIGludChtaW5vciksIGludChwYXRjaCkKICAgICMgdXJsbGliMyA+PSAxLjIxLjEsIDw9IDEuMjYKICAgIGFzc2VydCBtYWpvciA9PSAxCiAgICBhc3NlcnQgbWlub3IgPj0gMjEKICAgIGFzc2VydCBtaW5vciA8PSAyNgoKICAgICMgQ2hlY2sgY2hhcnNldF9ub3JtYWxpemVyIGZvciBjb21wYXRpYmlsaXR5LgogICAgaWYgY2hhcmRldF92ZXJzaW9uOgogICAgICAgIG1ham9yLCBtaW5vciwgcGF0Y2ggPSBjaGFyZGV0X3ZlcnNpb24uc3BsaXQoXCIuXCIpWzozXQogICAgICAgIG1ham9yLCBtaW5vciwgcGF0Y2ggPSBpbnQobWFqb3IpLCBpbnQobWlub3IpLCBpbnQocGF0Y2gpCiAgICAgICAgIyBjaGFyZGV0X3ZlcnNpb24gPj0gMy4wLjIsIDwgNi4wLjAKICAgICAgICBhc3NlcnQgKDMsIDAsIDIpIDw9IChtYWpvciwgbWlub3IsIHBhdGNoKSA8ICg2LCAwLCAwKQogICAgZWxpZiBjaGFyc2V0X25vcm1hbGl6ZXJfdmVyc2lvbjoKICAgICAgICBtYWpvciwgbWlub3IsIHBhdGNoID0gY2hhcnNldF9ub3JtYWxpemVyX3ZlcnNpb24uc3BsaXQoXCIuXCIpWzozXQogICAgICAgIG1ham9yLCBtaW5vciwgcGF0Y2ggPSBpbnQobWFqb3IpLCBpbnQobWlub3IpLCBpbnQocGF0Y2gpCiAgICAgICAgIyBjaGFyc2V0X25vcm1hbGl6ZXIgPj0gMi4wLjAgPCAzLjAuMAogICAgICAgIGFzc2VydCAoMiwgMCwgMCkgPD0gKG1ham9yLCBtaW5vciwgcGF0Y2gpIDwgKDMsIDAsIDApCiAgICBlbHNlOgogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihcIllvdSBuZWVkIGVpdGhlciBjaGFyc2V0X25vcm1hbGl6ZXIgb3IgY2hhcmRldCBpbnN0YWxsZWRcIikKCgpkZWYgX2NoZWNrX2NyeXB0b2dyYXBoeShjcnlwdG9ncmFwaHlfdmVyc2lvbik6CiAgICAjIGNyeXB0b2dyYXBoeSA8IDEuMy40CiAgICB0cnk6CiAgICAgICAgY3J5cHRvZ3JhcGh5X3ZlcnNpb24gPSBsaXN0KG1hcChpbnQsIGNyeXB0b2dyYXBoeV92ZXJzaW9uLnNwbGl0KFwiLlwiKSkpCiAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICByZXR1cm4KCiAgICBpZiBjcnlwdG9ncmFwaHlfdmVyc2lvbiA8IFsxLCAzLCA0XToKICAgICAgICB3YXJuaW5nID0gXCJPbGQgdmVyc2lvbiBvZiBjcnlwdG9ncmFwaHkgKHt9KSBtYXkgY2F1c2Ugc2xvd2Rvd24uXCIuZm9ybWF0KAogICAgICAgICAgICBjcnlwdG9ncmFwaHlfdmVyc2lvbgogICAgICAgICkKICAgICAgICB3YXJuaW5ncy53YXJuKHdhcm5pbmcsIFJlcXVlc3RzRGVwZW5kZW5jeVdhcm5pbmcpCgoKIyBDaGVjayBpbXBvcnRlZCBkZXBlbmRlbmNpZXMgZm9yIGNvbXBhdGliaWxpdHkuCnRyeToKICAgIGNoZWNrX2NvbXBhdGliaWxpdHkoCiAgICAgICAgdXJsbGliMy5fX3ZlcnNpb25fXywgY2hhcmRldF92ZXJzaW9uLCBjaGFyc2V0X25vcm1hbGl6ZXJfdmVyc2lvbgogICAgKQpleGNlcHQgKEFzc2VydGlvbkVycm9yLCBWYWx1ZUVycm9yKToKICAgIHdhcm5pbmdzLndhcm4oCiAgICAgICAgXCJ1cmxsaWIzICh7fSkgb3IgY2hhcmRldCAoe30pL2NoYXJzZXRfbm9ybWFsaXplciAoe30pIGRvZXNuJ3QgbWF0Y2ggYSBzdXBwb3J0ZWQgXCIKICAgICAgICBcInZlcnNpb24hXCIuZm9ybWF0KAogICAgICAgICAgICB1cmxsaWIzLl9fdmVyc2lvbl9fLCBjaGFyZGV0X3ZlcnNpb24sIGNoYXJzZXRfbm9ybWFsaXplcl92ZXJzaW9uCiAgICAgICAgKSwKICAgICAgICBSZXF1ZXN0c0RlcGVuZGVuY3lXYXJuaW5nLAogICAgKQoKIyBBdHRlbXB0IHRvIGVuYWJsZSB1cmxsaWIzJ3MgZmFsbGJhY2sgZm9yIFNOSSBzdXBwb3J0CiMgaWYgdGhlIHN0YW5kYXJkIGxpYnJhcnkgZG9lc24ndCBzdXBwb3J0IFNOSSBvciB0aGUKIyAnc3NsJyBsaWJyYXJ5IGlzbid0IGF2YWlsYWJsZS4KdHJ5OgogICAgdHJ5OgogICAgICAgIGltcG9ydCBzc2wKICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICBzc2wgPSBOb25lCgogICAgaWYgbm90IGdldGF0dHIoc3NsLCBcIkhBU19TTklcIiwgRmFsc2UpOgogICAgICAgIGZyb20gdXJsbGliMy5jb250cmliIGltcG9ydCBweW9wZW5zc2wKCiAgICAgICAgcHlvcGVuc3NsLmluamVjdF9pbnRvX3VybGxpYjMoKQoKICAgICAgICAjIENoZWNrIGNyeXB0b2dyYXBoeSB2ZXJzaW9uCiAgICAgICAgZnJvbSBjcnlwdG9ncmFwaHkgaW1wb3J0IF9fdmVyc2lvbl9fIGFzIGNyeXB0b2dyYXBoeV92ZXJzaW9uCgogICAgICAgIF9jaGVja19jcnlwdG9ncmFwaHkoY3J5cHRvZ3JhcGh5X3ZlcnNpb24pCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIHBhc3MKCiMgdXJsbGliMydzIERlcGVuZGVuY3lXYXJuaW5ncyBzaG91bGQgYmUgc2lsZW5jZWQuCmZyb20gdXJsbGliMy5leGNlcHRpb25zIGltcG9ydCBEZXBlbmRlbmN5V2FybmluZwoKd2FybmluZ3Muc2ltcGxlZmlsdGVyKFwiaWdub3JlXCIsIERlcGVuZGVuY3lXYXJuaW5nKQoKIyBTZXQgZGVmYXVsdCBsb2dnaW5nIGhhbmRsZXIgdG8gYXZvaWQgXCJObyBoYW5kbGVyIGZvdW5kXCIgd2FybmluZ3MuCmltcG9ydCBsb2dnaW5nCmZyb20gbG9nZ2luZyBpbXBvcnQgTnVsbEhhbmRsZXIKCmZyb20gLiBpbXBvcnQgcGFja2FnZXMsIHV0aWxzCmZyb20gLl9fdmVyc2lvbl9fIGltcG9ydCAoCiAgICBfX2F1dGhvcl9fLAogICAgX19hdXRob3JfZW1haWxfXywKICAgIF9fYnVpbGRfXywKICAgIF9fY2FrZV9fLAogICAgX19jb3B5cmlnaHRfXywKICAgIF9fZGVzY3JpcHRpb25fXywKICAgIF9fbGljZW5zZV9fLAogICAgX190aXRsZV9fLAogICAgX191cmxfXywKICAgIF9fdmVyc2lvbl9fLAopCmZyb20gLmFwaSBpbXBvcnQgZGVsZXRlLCBnZXQsIGhlYWQsIG9wdGlvbnMsIHBhdGNoLCBwb3N0LCBwdXQsIHJlcXVlc3QKZnJvbSAuZXhjZXB0aW9ucyBpbXBvcnQgKAogICAgQ29ubmVjdGlvbkVycm9yLAogICAgQ29ubmVjdFRpbWVvdXQsCiAgICBGaWxlTW9kZVdhcm5pbmcsCiAgICBIVFRQRXJyb3IsCiAgICBKU09ORGVjb2RlRXJyb3IsCiAgICBSZWFkVGltZW91dCwKICAgIFJlcXVlc3RFeGNlcHRpb24sCiAgICBUaW1lb3V0LAogICAgVG9vTWFueVJlZGlyZWN0cywKICAgIFVSTFJlcXVpcmVkLAopCmZyb20gLm1vZGVscyBpbXBvcnQgUHJlcGFyZWRSZXF1ZXN0LCBSZXF1ZXN0LCBSZXNwb25zZQpmcm9tIC5zZXNzaW9ucyBpbXBvcnQgU2Vzc2lvbiwgc2Vzc2lvbgpmcm9tIC5zdGF0dXNfY29kZXMgaW1wb3J0IGNvZGVzCgpsb2dnaW5nLmdldExvZ2dlcihfX25hbWVfXykuYWRkSGFuZGxlcihOdWxsSGFuZGxlcigpKQoKIyBGaWxlTW9kZVdhcm5pbmdzIGdvIG9mZiBwZXIgdGhlIGRlZmF1bHQuCndhcm5pbmdzLnNpbXBsZWZpbHRlcihcImRlZmF1bHRcIiwgRmlsZU1vZGVXYXJuaW5nLCBhcHBlbmQ9VHJ1ZSkKCiIiIgptb2R1bGVfZGljdFsicmVxdWVzdHMiK29zLnNlcCsiX2ludGVybmFsX3V0aWxzLnB5Il09IiIiClwiXCJcIgpyZXF1ZXN0cy5faW50ZXJuYWxfdXRpbHMKfn5+fn5+fn5+fn5+fn4KClByb3ZpZGVzIHV0aWxpdHkgZnVuY3Rpb25zIHRoYXQgYXJlIGNvbnN1bWVkIGludGVybmFsbHkgYnkgUmVxdWVzdHMKd2hpY2ggZGVwZW5kIG9uIGV4dHJlbWVseSBmZXcgZXh0ZXJuYWwgaGVscGVycyAoc3VjaCBhcyBjb21wYXQpClwiXCJcIgppbXBvcnQgcmUKCmZyb20gLmNvbXBhdCBpbXBvcnQgYnVpbHRpbl9zdHIKCl9WQUxJRF9IRUFERVJfTkFNRV9SRV9CWVRFID0gcmUuY29tcGlsZShyYlwiXlteOlxcc11bXjpcXHJcXG5dKiRcIikKX1ZBTElEX0hFQURFUl9OQU1FX1JFX1NUUiA9IHJlLmNvbXBpbGUoclwiXlteOlxcc11bXjpcXHJcXG5dKiRcIikKX1ZBTElEX0hFQURFUl9WQUxVRV9SRV9CWVRFID0gcmUuY29tcGlsZShyYlwiXlxcU1teXFxyXFxuXSokfF4kXCIpCl9WQUxJRF9IRUFERVJfVkFMVUVfUkVfU1RSID0gcmUuY29tcGlsZShyXCJeXFxTW15cXHJcXG5dKiR8XiRcIikKCkhFQURFUl9WQUxJREFUT1JTID0gewogICAgYnl0ZXM6IChfVkFMSURfSEVBREVSX05BTUVfUkVfQllURSwgX1ZBTElEX0hFQURFUl9WQUxVRV9SRV9CWVRFKSwKICAgIHN0cjogKF9WQUxJRF9IRUFERVJfTkFNRV9SRV9TVFIsIF9WQUxJRF9IRUFERVJfVkFMVUVfUkVfU1RSKSwKfQoKCmRlZiB0b19uYXRpdmVfc3RyaW5nKHN0cmluZywgZW5jb2Rpbmc9XCJhc2NpaVwiKToKICAgIFwiXCJcIkdpdmVuIGEgc3RyaW5nIG9iamVjdCwgcmVnYXJkbGVzcyBvZiB0eXBlLCByZXR1cm5zIGEgcmVwcmVzZW50YXRpb24gb2YKICAgIHRoYXQgc3RyaW5nIGluIHRoZSBuYXRpdmUgc3RyaW5nIHR5cGUsIGVuY29kaW5nIGFuZCBkZWNvZGluZyB3aGVyZQogICAgbmVjZXNzYXJ5LiBUaGlzIGFzc3VtZXMgQVNDSUkgdW5sZXNzIHRvbGQgb3RoZXJ3aXNlLgogICAgXCJcIlwiCiAgICBpZiBpc2luc3RhbmNlKHN0cmluZywgYnVpbHRpbl9zdHIpOgogICAgICAgIG91dCA9IHN0cmluZwogICAgZWxzZToKICAgICAgICBvdXQgPSBzdHJpbmcuZGVjb2RlKGVuY29kaW5nKQoKICAgIHJldHVybiBvdXQKCgpkZWYgdW5pY29kZV9pc19hc2NpaSh1X3N0cmluZyk6CiAgICBcIlwiXCJEZXRlcm1pbmUgaWYgdW5pY29kZSBzdHJpbmcgb25seSBjb250YWlucyBBU0NJSSBjaGFyYWN0ZXJzLgoKICAgIDpwYXJhbSBzdHIgdV9zdHJpbmc6IHVuaWNvZGUgc3RyaW5nIHRvIGNoZWNrLiBNdXN0IGJlIHVuaWNvZGUKICAgICAgICBhbmQgbm90IFB5dGhvbiAyIGBzdHJgLgogICAgOnJ0eXBlOiBib29sCiAgICBcIlwiXCIKICAgIGFzc2VydCBpc2luc3RhbmNlKHVfc3RyaW5nLCBzdHIpCiAgICB0cnk6CiAgICAgICAgdV9zdHJpbmcuZW5jb2RlKFwiYXNjaWlcIikKICAgICAgICByZXR1cm4gVHJ1ZQogICAgZXhjZXB0IFVuaWNvZGVFbmNvZGVFcnJvcjoKICAgICAgICByZXR1cm4gRmFsc2UKCiIiIgptb2R1bGVfZGljdFsicmVxdWVzdHMiK29zLnNlcCsidXRpbHMucHkiXT0iIiIKIyA8IGluY2x1ZGUgJ3VybGxpYjMucHknID4KClwiXCJcIgpyZXF1ZXN0cy51dGlscwp+fn5+fn5+fn5+fn5+fgoKVGhpcyBtb2R1bGUgcHJvdmlkZXMgdXRpbGl0eSBmdW5jdGlvbnMgdGhhdCBhcmUgdXNlZCB3aXRoaW4gUmVxdWVzdHMKdGhhdCBhcmUgYWxzbyB1c2VmdWwgZm9yIGV4dGVybmFsIGNvbnN1bXB0aW9uLgpcIlwiXCIKCmltcG9ydCBjb2RlY3MKaW1wb3J0IGNvbnRleHRsaWIKaW1wb3J0IGlvCmltcG9ydCBvcwppbXBvcnQgcmUKaW1wb3J0IHNvY2tldAppbXBvcnQgc3RydWN0CmltcG9ydCBzeXMKaW1wb3J0IHRlbXBmaWxlCmltcG9ydCB3YXJuaW5ncwppbXBvcnQgemlwZmlsZQpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBPcmRlcmVkRGljdAoKZnJvbSB1cmxsaWIzLnV0aWwgaW1wb3J0IG1ha2VfaGVhZGVycywgcGFyc2VfdXJsCgpmcm9tIC4gaW1wb3J0IGNlcnRzCmZyb20gLl9fdmVyc2lvbl9fIGltcG9ydCBfX3ZlcnNpb25fXwoKIyB0b19uYXRpdmVfc3RyaW5nIGlzIHVudXNlZCBoZXJlLCBidXQgaW1wb3J0ZWQgaGVyZSBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkKZnJvbSAuX2ludGVybmFsX3V0aWxzIGltcG9ydCBIRUFERVJfVkFMSURBVE9SUywgdG9fbmF0aXZlX3N0cmluZyAgIyBub3FhOiBGNDAxCmZyb20gLmNvbXBhdCBpbXBvcnQgKAogICAgTWFwcGluZywKICAgIGJhc2VzdHJpbmcsCiAgICBieXRlcywKICAgIGdldHByb3hpZXMsCiAgICBnZXRwcm94aWVzX2Vudmlyb25tZW50LAogICAgaW50ZWdlcl90eXBlcywKKQpmcm9tIC5jb21wYXQgaW1wb3J0IHBhcnNlX2h0dHBfbGlzdCBhcyBfcGFyc2VfbGlzdF9oZWFkZXIKZnJvbSAuY29tcGF0IGltcG9ydCAoCiAgICBwcm94eV9ieXBhc3MsCiAgICBwcm94eV9ieXBhc3NfZW52aXJvbm1lbnQsCiAgICBxdW90ZSwKICAgIHN0ciwKICAgIHVucXVvdGUsCiAgICB1cmxwYXJzZSwKICAgIHVybHVucGFyc2UsCikKZnJvbSAuY29va2llcyBpbXBvcnQgY29va2llamFyX2Zyb21fZGljdApmcm9tIC5leGNlcHRpb25zIGltcG9ydCAoCiAgICBGaWxlTW9kZVdhcm5pbmcsCiAgICBJbnZhbGlkSGVhZGVyLAogICAgSW52YWxpZFVSTCwKICAgIFVucmV3aW5kYWJsZUJvZHlFcnJvciwKKQpmcm9tIC5zdHJ1Y3R1cmVzIGltcG9ydCBDYXNlSW5zZW5zaXRpdmVEaWN0CgpORVRSQ19GSUxFUyA9IChcIi5uZXRyY1wiLCBcIl9uZXRyY1wiKQoKREVGQVVMVF9DQV9CVU5ETEVfUEFUSCA9IGNlcnRzLndoZXJlKCkKCkRFRkFVTFRfUE9SVFMgPSB7XCJodHRwXCI6IDgwLCBcImh0dHBzXCI6IDQ0M30KCiMgRW5zdXJlIHRoYXQgJywgJyBpcyB1c2VkIHRvIHByZXNlcnZlIHByZXZpb3VzIGRlbGltaXRlciBiZWhhdmlvci4KREVGQVVMVF9BQ0NFUFRfRU5DT0RJTkcgPSBcIiwgXCIuam9pbigKICAgIHJlLnNwbGl0KHJcIixcXHMqXCIsIG1ha2VfaGVhZGVycyhhY2NlcHRfZW5jb2Rpbmc9VHJ1ZSlbXCJhY2NlcHQtZW5jb2RpbmdcIl0pCikKCgppZiBzeXMucGxhdGZvcm0gPT0gXCJ3aW4zMlwiOgogICAgIyBwcm92aWRlIGEgcHJveHlfYnlwYXNzIHZlcnNpb24gb24gV2luZG93cyB3aXRob3V0IEROUyBsb29rdXBzCgogICAgZGVmIHByb3h5X2J5cGFzc19yZWdpc3RyeShob3N0KToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGltcG9ydCB3aW5yZWcKICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGludGVybmV0U2V0dGluZ3MgPSB3aW5yZWcuT3BlbktleSgKICAgICAgICAgICAgICAgIHdpbnJlZy5IS0VZX0NVUlJFTlRfVVNFUiwKICAgICAgICAgICAgICAgIHJcIlNvZnR3YXJlXFxNaWNyb3NvZnRcXFdpbmRvd3NcXEN1cnJlbnRWZXJzaW9uXFxJbnRlcm5ldCBTZXR0aW5nc1wiLAogICAgICAgICAgICApCiAgICAgICAgICAgICMgUHJveHlFbmFibGUgY291bGQgYmUgUkVHX1NaIG9yIFJFR19EV09SRCwgbm9ybWFsaXppbmcgaXQKICAgICAgICAgICAgcHJveHlFbmFibGUgPSBpbnQod2lucmVnLlF1ZXJ5VmFsdWVFeChpbnRlcm5ldFNldHRpbmdzLCBcIlByb3h5RW5hYmxlXCIpWzBdKQogICAgICAgICAgICAjIFByb3h5T3ZlcnJpZGUgaXMgYWxtb3N0IGFsd2F5cyBhIHN0cmluZwogICAgICAgICAgICBwcm94eU92ZXJyaWRlID0gd2lucmVnLlF1ZXJ5VmFsdWVFeChpbnRlcm5ldFNldHRpbmdzLCBcIlByb3h5T3ZlcnJpZGVcIilbMF0KICAgICAgICBleGNlcHQgKE9TRXJyb3IsIFZhbHVlRXJyb3IpOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICBpZiBub3QgcHJveHlFbmFibGUgb3Igbm90IHByb3h5T3ZlcnJpZGU6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICAjIG1ha2UgYSBjaGVjayB2YWx1ZSBsaXN0IGZyb20gdGhlIHJlZ2lzdHJ5IGVudHJ5OiByZXBsYWNlIHRoZQogICAgICAgICMgJzxsb2NhbD4nIHN0cmluZyBieSB0aGUgbG9jYWxob3N0IGVudHJ5IGFuZCB0aGUgY29ycmVzcG9uZGluZwogICAgICAgICMgY2Fub25pY2FsIGVudHJ5LgogICAgICAgIHByb3h5T3ZlcnJpZGUgPSBwcm94eU92ZXJyaWRlLnNwbGl0KFwiO1wiKQogICAgICAgICMgbm93IGNoZWNrIGlmIHdlIG1hdGNoIG9uZSBvZiB0aGUgcmVnaXN0cnkgdmFsdWVzLgogICAgICAgIGZvciB0ZXN0IGluIHByb3h5T3ZlcnJpZGU6CiAgICAgICAgICAgIGlmIHRlc3QgPT0gXCI8bG9jYWw+XCI6CiAgICAgICAgICAgICAgICBpZiBcIi5cIiBub3QgaW4gaG9zdDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICB0ZXN0ID0gdGVzdC5yZXBsYWNlKFwiLlwiLCByXCJcXC5cIikgICMgbWFzayBkb3RzCiAgICAgICAgICAgIHRlc3QgPSB0ZXN0LnJlcGxhY2UoXCIqXCIsIHJcIi4qXCIpICAjIGNoYW5nZSBnbG9iIHNlcXVlbmNlCiAgICAgICAgICAgIHRlc3QgPSB0ZXN0LnJlcGxhY2UoXCI/XCIsIHJcIi5cIikgICMgY2hhbmdlIGdsb2IgY2hhcgogICAgICAgICAgICBpZiByZS5tYXRjaCh0ZXN0LCBob3N0LCByZS5JKToKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIHByb3h5X2J5cGFzcyhob3N0KTogICMgbm9xYQogICAgICAgIFwiXCJcIlJldHVybiBUcnVlLCBpZiB0aGUgaG9zdCBzaG91bGQgYmUgYnlwYXNzZWQuCgogICAgICAgIENoZWNrcyBwcm94eSBzZXR0aW5ncyBnYXRoZXJlZCBmcm9tIHRoZSBlbnZpcm9ubWVudCwgaWYgc3BlY2lmaWVkLAogICAgICAgIG9yIHRoZSByZWdpc3RyeS4KICAgICAgICBcIlwiXCIKICAgICAgICBpZiBnZXRwcm94aWVzX2Vudmlyb25tZW50KCk6CiAgICAgICAgICAgIHJldHVybiBwcm94eV9ieXBhc3NfZW52aXJvbm1lbnQoaG9zdCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gcHJveHlfYnlwYXNzX3JlZ2lzdHJ5KGhvc3QpCgoKZGVmIGRpY3RfdG9fc2VxdWVuY2UoZCk6CiAgICBcIlwiXCJSZXR1cm5zIGFuIGludGVybmFsIHNlcXVlbmNlIGRpY3Rpb25hcnkgdXBkYXRlLlwiXCJcIgoKICAgIGlmIGhhc2F0dHIoZCwgXCJpdGVtc1wiKToKICAgICAgICBkID0gZC5pdGVtcygpCgogICAgcmV0dXJuIGQKCgpkZWYgc3VwZXJfbGVuKG8pOgogICAgdG90YWxfbGVuZ3RoID0gTm9uZQogICAgY3VycmVudF9wb3NpdGlvbiA9IDAKCiAgICBpZiBoYXNhdHRyKG8sIFwiX19sZW5fX1wiKToKICAgICAgICB0b3RhbF9sZW5ndGggPSBsZW4obykKCiAgICBlbGlmIGhhc2F0dHIobywgXCJsZW5cIik6CiAgICAgICAgdG90YWxfbGVuZ3RoID0gby5sZW4KCiAgICBlbGlmIGhhc2F0dHIobywgXCJmaWxlbm9cIik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBmaWxlbm8gPSBvLmZpbGVubygpCiAgICAgICAgZXhjZXB0IChpby5VbnN1cHBvcnRlZE9wZXJhdGlvbiwgQXR0cmlidXRlRXJyb3IpOgogICAgICAgICAgICAjIEF0dHJpYnV0ZUVycm9yIGlzIGEgc3VycHJpc2luZyBleGNlcHRpb24sIHNlZWluZyBhcyBob3cgd2UndmUganVzdCBjaGVja2VkCiAgICAgICAgICAgICMgdGhhdCBgaGFzYXR0cihvLCAnZmlsZW5vJylgLiAgSXQgaGFwcGVucyBmb3Igb2JqZWN0cyBvYnRhaW5lZCB2aWEKICAgICAgICAgICAgIyBgVGFyZmlsZS5leHRyYWN0ZmlsZSgpYCwgcGVyIGlzc3VlIDUyMjkuCiAgICAgICAgICAgIHBhc3MKICAgICAgICBlbHNlOgogICAgICAgICAgICB0b3RhbF9sZW5ndGggPSBvcy5mc3RhdChmaWxlbm8pLnN0X3NpemUKCiAgICAgICAgICAgICMgSGF2aW5nIHVzZWQgZnN0YXQgdG8gZGV0ZXJtaW5lIHRoZSBmaWxlIGxlbmd0aCwgd2UgbmVlZCB0bwogICAgICAgICAgICAjIGNvbmZpcm0gdGhhdCB0aGlzIGZpbGUgd2FzIG9wZW5lZCB1cCBpbiBiaW5hcnkgbW9kZS4KICAgICAgICAgICAgaWYgXCJiXCIgbm90IGluIG8ubW9kZToKICAgICAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oCiAgICAgICAgICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgICAgICAgICBcIlJlcXVlc3RzIGhhcyBkZXRlcm1pbmVkIHRoZSBjb250ZW50LWxlbmd0aCBmb3IgdGhpcyBcIgogICAgICAgICAgICAgICAgICAgICAgICBcInJlcXVlc3QgdXNpbmcgdGhlIGJpbmFyeSBzaXplIG9mIHRoZSBmaWxlOiBob3dldmVyLCB0aGUgXCIKICAgICAgICAgICAgICAgICAgICAgICAgXCJmaWxlIGhhcyBiZWVuIG9wZW5lZCBpbiB0ZXh0IG1vZGUgKGkuZS4gd2l0aG91dCB0aGUgJ2InIFwiCiAgICAgICAgICAgICAgICAgICAgICAgIFwiZmxhZyBpbiB0aGUgbW9kZSkuIFRoaXMgbWF5IGxlYWQgdG8gYW4gaW5jb3JyZWN0IFwiCiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29udGVudC1sZW5ndGguIEluIFJlcXVlc3RzIDMuMCwgc3VwcG9ydCB3aWxsIGJlIHJlbW92ZWQgXCIKICAgICAgICAgICAgICAgICAgICAgICAgXCJmb3IgZmlsZXMgaW4gdGV4dCBtb2RlLlwiCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICBGaWxlTW9kZVdhcm5pbmcsCiAgICAgICAgICAgICAgICApCgogICAgaWYgaGFzYXR0cihvLCBcInRlbGxcIik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBjdXJyZW50X3Bvc2l0aW9uID0gby50ZWxsKCkKICAgICAgICBleGNlcHQgT1NFcnJvcjoKICAgICAgICAgICAgIyBUaGlzIGNhbiBoYXBwZW4gaW4gc29tZSB3ZWlyZCBzaXR1YXRpb25zLCBzdWNoIGFzIHdoZW4gdGhlIGZpbGUKICAgICAgICAgICAgIyBpcyBhY3R1YWxseSBhIHNwZWNpYWwgZmlsZSBkZXNjcmlwdG9yIGxpa2Ugc3RkaW4uIEluIHRoaXMKICAgICAgICAgICAgIyBpbnN0YW5jZSwgd2UgZG9uJ3Qga25vdyB3aGF0IHRoZSBsZW5ndGggaXMsIHNvIHNldCBpdCB0byB6ZXJvIGFuZAogICAgICAgICAgICAjIGxldCByZXF1ZXN0cyBjaHVuayBpdCBpbnN0ZWFkLgogICAgICAgICAgICBpZiB0b3RhbF9sZW5ndGggaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICBjdXJyZW50X3Bvc2l0aW9uID0gdG90YWxfbGVuZ3RoCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgaGFzYXR0cihvLCBcInNlZWtcIikgYW5kIHRvdGFsX2xlbmd0aCBpcyBOb25lOgogICAgICAgICAgICAgICAgIyBTdHJpbmdJTyBhbmQgQnl0ZXNJTyBoYXZlIHNlZWsgYnV0IG5vIHVzYWJsZSBmaWxlbm8KICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAjIHNlZWsgdG8gZW5kIG9mIGZpbGUKICAgICAgICAgICAgICAgICAgICBvLnNlZWsoMCwgMikKICAgICAgICAgICAgICAgICAgICB0b3RhbF9sZW5ndGggPSBvLnRlbGwoKQoKICAgICAgICAgICAgICAgICAgICAjIHNlZWsgYmFjayB0byBjdXJyZW50IHBvc2l0aW9uIHRvIHN1cHBvcnQKICAgICAgICAgICAgICAgICAgICAjIHBhcnRpYWxseSByZWFkIGZpbGUtbGlrZSBvYmplY3RzCiAgICAgICAgICAgICAgICAgICAgby5zZWVrKGN1cnJlbnRfcG9zaXRpb24gb3IgMCkKICAgICAgICAgICAgICAgIGV4Y2VwdCBPU0Vycm9yOgogICAgICAgICAgICAgICAgICAgIHRvdGFsX2xlbmd0aCA9IDAKCiAgICBpZiB0b3RhbF9sZW5ndGggaXMgTm9uZToKICAgICAgICB0b3RhbF9sZW5ndGggPSAwCgogICAgcmV0dXJuIG1heCgwLCB0b3RhbF9sZW5ndGggLSBjdXJyZW50X3Bvc2l0aW9uKQoKCmRlZiBnZXRfbmV0cmNfYXV0aCh1cmwsIHJhaXNlX2Vycm9ycz1GYWxzZSk6CiAgICBcIlwiXCJSZXR1cm5zIHRoZSBSZXF1ZXN0cyB0dXBsZSBhdXRoIGZvciBhIGdpdmVuIHVybCBmcm9tIG5ldHJjLlwiXCJcIgoKICAgIG5ldHJjX2ZpbGUgPSBvcy5lbnZpcm9uLmdldChcIk5FVFJDXCIpCiAgICBpZiBuZXRyY19maWxlIGlzIG5vdCBOb25lOgogICAgICAgIG5ldHJjX2xvY2F0aW9ucyA9IChuZXRyY19maWxlLCkKICAgIGVsc2U6CiAgICAgICAgbmV0cmNfbG9jYXRpb25zID0gKGZcIn4ve2Z9XCIgZm9yIGYgaW4gTkVUUkNfRklMRVMpCgogICAgdHJ5OgogICAgICAgIGZyb20gbmV0cmMgaW1wb3J0IE5ldHJjUGFyc2VFcnJvciwgbmV0cmMKCiAgICAgICAgbmV0cmNfcGF0aCA9IE5vbmUKCiAgICAgICAgZm9yIGYgaW4gbmV0cmNfbG9jYXRpb25zOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBsb2MgPSBvcy5wYXRoLmV4cGFuZHVzZXIoZikKICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgIyBvcy5wYXRoLmV4cGFuZHVzZXIgY2FuIGZhaWwgd2hlbiAkSE9NRSBpcyB1bmRlZmluZWQgYW5kCiAgICAgICAgICAgICAgICAjIGdldHB3dWlkIGZhaWxzLiBTZWUgaHR0cHM6Ly9idWdzLnB5dGhvbi5vcmcvaXNzdWUyMDE2NCAmCiAgICAgICAgICAgICAgICAjIGh0dHBzOi8vZ2l0aHViLmNvbS9wc2YvcmVxdWVzdHMvaXNzdWVzLzE4NDYKICAgICAgICAgICAgICAgIHJldHVybgoKICAgICAgICAgICAgaWYgb3MucGF0aC5leGlzdHMobG9jKToKICAgICAgICAgICAgICAgIG5ldHJjX3BhdGggPSBsb2MKICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICMgQWJvcnQgZWFybHkgaWYgdGhlcmUgaXNuJ3Qgb25lLgogICAgICAgIGlmIG5ldHJjX3BhdGggaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHJpID0gdXJscGFyc2UodXJsKQoKICAgICAgICAjIFN0cmlwIHBvcnQgbnVtYmVycyBmcm9tIG5ldGxvYy4gVGhpcyB3ZWlyZCBgaWYuLi5lbmNvZGVgYCBkYW5jZSBpcwogICAgICAgICMgdXNlZCBmb3IgUHl0aG9uIDMuMiwgd2hpY2ggZG9lc24ndCBzdXBwb3J0IHVuaWNvZGUgbGl0ZXJhbHMuCiAgICAgICAgc3BsaXRzdHIgPSBiXCI6XCIKICAgICAgICBpZiBpc2luc3RhbmNlKHVybCwgc3RyKToKICAgICAgICAgICAgc3BsaXRzdHIgPSBzcGxpdHN0ci5kZWNvZGUoXCJhc2NpaVwiKQogICAgICAgIGhvc3QgPSByaS5uZXRsb2Muc3BsaXQoc3BsaXRzdHIpWzBdCgogICAgICAgIHRyeToKICAgICAgICAgICAgX25ldHJjID0gbmV0cmMobmV0cmNfcGF0aCkuYXV0aGVudGljYXRvcnMoaG9zdCkKICAgICAgICAgICAgaWYgX25ldHJjOgogICAgICAgICAgICAgICAgIyBSZXR1cm4gd2l0aCBsb2dpbiAvIHBhc3N3b3JkCiAgICAgICAgICAgICAgICBsb2dpbl9pID0gMCBpZiBfbmV0cmNbMF0gZWxzZSAxCiAgICAgICAgICAgICAgICByZXR1cm4gKF9uZXRyY1tsb2dpbl9pXSwgX25ldHJjWzJdKQogICAgICAgIGV4Y2VwdCAoTmV0cmNQYXJzZUVycm9yLCBPU0Vycm9yKToKICAgICAgICAgICAgIyBJZiB0aGVyZSB3YXMgYSBwYXJzaW5nIGVycm9yIG9yIGEgcGVybWlzc2lvbnMgaXNzdWUgcmVhZGluZyB0aGUgZmlsZSwKICAgICAgICAgICAgIyB3ZSdsbCBqdXN0IHNraXAgbmV0cmMgYXV0aCB1bmxlc3MgZXhwbGljaXRseSBhc2tlZCB0byByYWlzZSBlcnJvcnMuCiAgICAgICAgICAgIGlmIHJhaXNlX2Vycm9yczoKICAgICAgICAgICAgICAgIHJhaXNlCgogICAgIyBBcHAgRW5naW5lIGhhY2tpbmVzcy4KICAgIGV4Y2VwdCAoSW1wb3J0RXJyb3IsIEF0dHJpYnV0ZUVycm9yKToKICAgICAgICBwYXNzCgoKZGVmIGd1ZXNzX2ZpbGVuYW1lKG9iaik6CiAgICBcIlwiXCJUcmllcyB0byBndWVzcyB0aGUgZmlsZW5hbWUgb2YgdGhlIGdpdmVuIG9iamVjdC5cIlwiXCIKICAgIG5hbWUgPSBnZXRhdHRyKG9iaiwgXCJuYW1lXCIsIE5vbmUpCiAgICBpZiBuYW1lIGFuZCBpc2luc3RhbmNlKG5hbWUsIGJhc2VzdHJpbmcpIGFuZCBuYW1lWzBdICE9IFwiPFwiIGFuZCBuYW1lWy0xXSAhPSBcIj5cIjoKICAgICAgICByZXR1cm4gb3MucGF0aC5iYXNlbmFtZShuYW1lKQoKCmRlZiBleHRyYWN0X3ppcHBlZF9wYXRocyhwYXRoKToKICAgIFwiXCJcIlJlcGxhY2Ugbm9uZXhpc3RlbnQgcGF0aHMgdGhhdCBsb29rIGxpa2UgdGhleSByZWZlciB0byBhIG1lbWJlciBvZiBhIHppcAogICAgYXJjaGl2ZSB3aXRoIHRoZSBsb2NhdGlvbiBvZiBhbiBleHRyYWN0ZWQgY29weSBvZiB0aGUgdGFyZ2V0LCBvciBlbHNlCiAgICBqdXN0IHJldHVybiB0aGUgcHJvdmlkZWQgcGF0aCB1bmNoYW5nZWQuCiAgICBcIlwiXCIKICAgIGlmIG9zLnBhdGguZXhpc3RzKHBhdGgpOgogICAgICAgICMgdGhpcyBpcyBhbHJlYWR5IGEgdmFsaWQgcGF0aCwgbm8gbmVlZCB0byBkbyBhbnl0aGluZyBmdXJ0aGVyCiAgICAgICAgcmV0dXJuIHBhdGgKCiAgICAjIGZpbmQgdGhlIGZpcnN0IHZhbGlkIHBhcnQgb2YgdGhlIHByb3ZpZGVkIHBhdGggYW5kIHRyZWF0IHRoYXQgYXMgYSB6aXAgYXJjaGl2ZQogICAgIyBhc3N1bWUgdGhlIHJlc3Qgb2YgdGhlIHBhdGggaXMgdGhlIG5hbWUgb2YgYSBtZW1iZXIgaW4gdGhlIGFyY2hpdmUKICAgIGFyY2hpdmUsIG1lbWJlciA9IG9zLnBhdGguc3BsaXQocGF0aCkKICAgIHdoaWxlIGFyY2hpdmUgYW5kIG5vdCBvcy5wYXRoLmV4aXN0cyhhcmNoaXZlKToKICAgICAgICBhcmNoaXZlLCBwcmVmaXggPSBvcy5wYXRoLnNwbGl0KGFyY2hpdmUpCiAgICAgICAgaWYgbm90IHByZWZpeDoKICAgICAgICAgICAgIyBJZiB3ZSBkb24ndCBjaGVjayBmb3IgYW4gZW1wdHkgcHJlZml4IGFmdGVyIHRoZSBzcGxpdCAoaW4gb3RoZXIgd29yZHMsIGFyY2hpdmUgcmVtYWlucyB1bmNoYW5nZWQgYWZ0ZXIgdGhlIHNwbGl0KSwKICAgICAgICAgICAgIyB3ZSBfY2FuXyBlbmQgdXAgaW4gYW4gaW5maW5pdGUgbG9vcCBvbiBhIHJhcmUgY29ybmVyIGNhc2UgYWZmZWN0aW5nIGEgc21hbGwgbnVtYmVyIG9mIHVzZXJzCiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgbWVtYmVyID0gXCIvXCIuam9pbihbcHJlZml4LCBtZW1iZXJdKQoKICAgIGlmIG5vdCB6aXBmaWxlLmlzX3ppcGZpbGUoYXJjaGl2ZSk6CiAgICAgICAgcmV0dXJuIHBhdGgKCiAgICB6aXBfZmlsZSA9IHppcGZpbGUuWmlwRmlsZShhcmNoaXZlKQogICAgaWYgbWVtYmVyIG5vdCBpbiB6aXBfZmlsZS5uYW1lbGlzdCgpOgogICAgICAgIHJldHVybiBwYXRoCgogICAgIyB3ZSBoYXZlIGEgdmFsaWQgemlwIGFyY2hpdmUgYW5kIGEgdmFsaWQgbWVtYmVyIG9mIHRoYXQgYXJjaGl2ZQogICAgdG1wID0gdGVtcGZpbGUuZ2V0dGVtcGRpcigpCiAgICBleHRyYWN0ZWRfcGF0aCA9IG9zLnBhdGguam9pbih0bXAsIG1lbWJlci5zcGxpdChcIi9cIilbLTFdKQogICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKGV4dHJhY3RlZF9wYXRoKToKICAgICAgICAjIHVzZSByZWFkICsgd3JpdGUgdG8gYXZvaWQgdGhlIGNyZWF0aW5nIG5lc3RlZCBmb2xkZXJzLCB3ZSBvbmx5IHdhbnQgdGhlIGZpbGUsIGF2b2lkcyBta2RpciByYWNpbmcgY29uZGl0aW9uCiAgICAgICAgd2l0aCBhdG9taWNfb3BlbihleHRyYWN0ZWRfcGF0aCkgYXMgZmlsZV9oYW5kbGVyOgogICAgICAgICAgICBmaWxlX2hhbmRsZXIud3JpdGUoemlwX2ZpbGUucmVhZChtZW1iZXIpKQogICAgcmV0dXJuIGV4dHJhY3RlZF9wYXRoCgoKQGNvbnRleHRsaWIuY29udGV4dG1hbmFnZXIKZGVmIGF0b21pY19vcGVuKGZpbGVuYW1lKToKICAgIFwiXCJcIldyaXRlIGEgZmlsZSB0byB0aGUgZGlzayBpbiBhbiBhdG9taWMgZmFzaGlvblwiXCJcIgogICAgdG1wX2Rlc2NyaXB0b3IsIHRtcF9uYW1lID0gdGVtcGZpbGUubWtzdGVtcChkaXI9b3MucGF0aC5kaXJuYW1lKGZpbGVuYW1lKSkKICAgIHRyeToKICAgICAgICB3aXRoIG9zLmZkb3Blbih0bXBfZGVzY3JpcHRvciwgXCJ3YlwiKSBhcyB0bXBfaGFuZGxlcjoKICAgICAgICAgICAgeWllbGQgdG1wX2hhbmRsZXIKICAgICAgICBvcy5yZXBsYWNlKHRtcF9uYW1lLCBmaWxlbmFtZSkKICAgIGV4Y2VwdCBCYXNlRXhjZXB0aW9uOgogICAgICAgIG9zLnJlbW92ZSh0bXBfbmFtZSkKICAgICAgICByYWlzZQoKCmRlZiBmcm9tX2tleV92YWxfbGlzdCh2YWx1ZSk6CiAgICBcIlwiXCJUYWtlIGFuIG9iamVjdCBhbmQgdGVzdCB0byBzZWUgaWYgaXQgY2FuIGJlIHJlcHJlc2VudGVkIGFzIGEKICAgIGRpY3Rpb25hcnkuIFVubGVzcyBpdCBjYW4gbm90IGJlIHJlcHJlc2VudGVkIGFzIHN1Y2gsIHJldHVybiBhbgogICAgT3JkZXJlZERpY3QsIGUuZy4sCgogICAgOjoKCiAgICAgICAgPj4+IGZyb21fa2V5X3ZhbF9saXN0KFsoJ2tleScsICd2YWwnKV0pCiAgICAgICAgT3JkZXJlZERpY3QoWygna2V5JywgJ3ZhbCcpXSkKICAgICAgICA+Pj4gZnJvbV9rZXlfdmFsX2xpc3QoJ3N0cmluZycpCiAgICAgICAgVHJhY2ViYWNrIChtb3N0IHJlY2VudCBjYWxsIGxhc3QpOgogICAgICAgIC4uLgogICAgICAgIFZhbHVlRXJyb3I6IGNhbm5vdCBlbmNvZGUgb2JqZWN0cyB0aGF0IGFyZSBub3QgMi10dXBsZXMKICAgICAgICA+Pj4gZnJvbV9rZXlfdmFsX2xpc3QoeydrZXknOiAndmFsJ30pCiAgICAgICAgT3JkZXJlZERpY3QoWygna2V5JywgJ3ZhbCcpXSkKCiAgICA6cnR5cGU6IE9yZGVyZWREaWN0CiAgICBcIlwiXCIKICAgIGlmIHZhbHVlIGlzIE5vbmU6CiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBpZiBpc2luc3RhbmNlKHZhbHVlLCAoc3RyLCBieXRlcywgYm9vbCwgaW50KSk6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcImNhbm5vdCBlbmNvZGUgb2JqZWN0cyB0aGF0IGFyZSBub3QgMi10dXBsZXNcIikKCiAgICByZXR1cm4gT3JkZXJlZERpY3QodmFsdWUpCgoKZGVmIHRvX2tleV92YWxfbGlzdCh2YWx1ZSk6CiAgICBcIlwiXCJUYWtlIGFuIG9iamVjdCBhbmQgdGVzdCB0byBzZWUgaWYgaXQgY2FuIGJlIHJlcHJlc2VudGVkIGFzIGEKICAgIGRpY3Rpb25hcnkuIElmIGl0IGNhbiBiZSwgcmV0dXJuIGEgbGlzdCBvZiB0dXBsZXMsIGUuZy4sCgogICAgOjoKCiAgICAgICAgPj4+IHRvX2tleV92YWxfbGlzdChbKCdrZXknLCAndmFsJyldKQogICAgICAgIFsoJ2tleScsICd2YWwnKV0KICAgICAgICA+Pj4gdG9fa2V5X3ZhbF9saXN0KHsna2V5JzogJ3ZhbCd9KQogICAgICAgIFsoJ2tleScsICd2YWwnKV0KICAgICAgICA+Pj4gdG9fa2V5X3ZhbF9saXN0KCdzdHJpbmcnKQogICAgICAgIFRyYWNlYmFjayAobW9zdCByZWNlbnQgY2FsbCBsYXN0KToKICAgICAgICAuLi4KICAgICAgICBWYWx1ZUVycm9yOiBjYW5ub3QgZW5jb2RlIG9iamVjdHMgdGhhdCBhcmUgbm90IDItdHVwbGVzCgogICAgOnJ0eXBlOiBsaXN0CiAgICBcIlwiXCIKICAgIGlmIHZhbHVlIGlzIE5vbmU6CiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBpZiBpc2luc3RhbmNlKHZhbHVlLCAoc3RyLCBieXRlcywgYm9vbCwgaW50KSk6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcImNhbm5vdCBlbmNvZGUgb2JqZWN0cyB0aGF0IGFyZSBub3QgMi10dXBsZXNcIikKCiAgICBpZiBpc2luc3RhbmNlKHZhbHVlLCBNYXBwaW5nKToKICAgICAgICB2YWx1ZSA9IHZhbHVlLml0ZW1zKCkKCiAgICByZXR1cm4gbGlzdCh2YWx1ZSkKCgojIEZyb20gbWl0c3VoaWtvL3dlcmt6ZXVnICh1c2VkIHdpdGggcGVybWlzc2lvbikuCmRlZiBwYXJzZV9saXN0X2hlYWRlcih2YWx1ZSk6CiAgICBcIlwiXCJQYXJzZSBsaXN0cyBhcyBkZXNjcmliZWQgYnkgUkZDIDIwNjggU2VjdGlvbiAyLgoKICAgIEluIHBhcnRpY3VsYXIsIHBhcnNlIGNvbW1hLXNlcGFyYXRlZCBsaXN0cyB3aGVyZSB0aGUgZWxlbWVudHMgb2YKICAgIHRoZSBsaXN0IG1heSBpbmNsdWRlIHF1b3RlZC1zdHJpbmdzLiAgQSBxdW90ZWQtc3RyaW5nIGNvdWxkCiAgICBjb250YWluIGEgY29tbWEuICBBIG5vbi1xdW90ZWQgc3RyaW5nIGNvdWxkIGhhdmUgcXVvdGVzIGluIHRoZQogICAgbWlkZGxlLiAgUXVvdGVzIGFyZSByZW1vdmVkIGF1dG9tYXRpY2FsbHkgYWZ0ZXIgcGFyc2luZy4KCiAgICBJdCBiYXNpY2FsbHkgd29ya3MgbGlrZSA6ZnVuYzpgcGFyc2Vfc2V0X2hlYWRlcmAganVzdCB0aGF0IGl0ZW1zCiAgICBtYXkgYXBwZWFyIG11bHRpcGxlIHRpbWVzIGFuZCBjYXNlIHNlbnNpdGl2aXR5IGlzIHByZXNlcnZlZC4KCiAgICBUaGUgcmV0dXJuIHZhbHVlIGlzIGEgc3RhbmRhcmQgOmNsYXNzOmBsaXN0YDoKCiAgICA+Pj4gcGFyc2VfbGlzdF9oZWFkZXIoJ3Rva2VuLCBcInF1b3RlZCB2YWx1ZVwiJykKICAgIFsndG9rZW4nLCAncXVvdGVkIHZhbHVlJ10KCiAgICBUbyBjcmVhdGUgYSBoZWFkZXIgZnJvbSB0aGUgOmNsYXNzOmBsaXN0YCBhZ2FpbiwgdXNlIHRoZQogICAgOmZ1bmM6YGR1bXBfaGVhZGVyYCBmdW5jdGlvbi4KCiAgICA6cGFyYW0gdmFsdWU6IGEgc3RyaW5nIHdpdGggYSBsaXN0IGhlYWRlci4KICAgIDpyZXR1cm46IDpjbGFzczpgbGlzdGAKICAgIDpydHlwZTogbGlzdAogICAgXCJcIlwiCiAgICByZXN1bHQgPSBbXQogICAgZm9yIGl0ZW0gaW4gX3BhcnNlX2xpc3RfaGVhZGVyKHZhbHVlKToKICAgICAgICBpZiBpdGVtWzoxXSA9PSBpdGVtWy0xOl0gPT0gJ1wiJzoKICAgICAgICAgICAgaXRlbSA9IHVucXVvdGVfaGVhZGVyX3ZhbHVlKGl0ZW1bMTotMV0pCiAgICAgICAgcmVzdWx0LmFwcGVuZChpdGVtKQogICAgcmV0dXJuIHJlc3VsdAoKCiMgRnJvbSBtaXRzdWhpa28vd2Vya3pldWcgKHVzZWQgd2l0aCBwZXJtaXNzaW9uKS4KZGVmIHBhcnNlX2RpY3RfaGVhZGVyKHZhbHVlKToKICAgIFwiXCJcIlBhcnNlIGxpc3RzIG9mIGtleSwgdmFsdWUgcGFpcnMgYXMgZGVzY3JpYmVkIGJ5IFJGQyAyMDY4IFNlY3Rpb24gMiBhbmQKICAgIGNvbnZlcnQgdGhlbSBpbnRvIGEgcHl0aG9uIGRpY3Q6CgogICAgPj4+IGQgPSBwYXJzZV9kaWN0X2hlYWRlcignZm9vPVwiaXMgYSBmaXNoXCIsIGJhcj1cImFzIHdlbGxcIicpCiAgICA+Pj4gdHlwZShkKSBpcyBkaWN0CiAgICBUcnVlCiAgICA+Pj4gc29ydGVkKGQuaXRlbXMoKSkKICAgIFsoJ2JhcicsICdhcyB3ZWxsJyksICgnZm9vJywgJ2lzIGEgZmlzaCcpXQoKICAgIElmIHRoZXJlIGlzIG5vIHZhbHVlIGZvciBhIGtleSBpdCB3aWxsIGJlIGBOb25lYDoKCiAgICA+Pj4gcGFyc2VfZGljdF9oZWFkZXIoJ2tleV93aXRob3V0X3ZhbHVlJykKICAgIHsna2V5X3dpdGhvdXRfdmFsdWUnOiBOb25lfQoKICAgIFRvIGNyZWF0ZSBhIGhlYWRlciBmcm9tIHRoZSA6Y2xhc3M6YGRpY3RgIGFnYWluLCB1c2UgdGhlCiAgICA6ZnVuYzpgZHVtcF9oZWFkZXJgIGZ1bmN0aW9uLgoKICAgIDpwYXJhbSB2YWx1ZTogYSBzdHJpbmcgd2l0aCBhIGRpY3QgaGVhZGVyLgogICAgOnJldHVybjogOmNsYXNzOmBkaWN0YAogICAgOnJ0eXBlOiBkaWN0CiAgICBcIlwiXCIKICAgIHJlc3VsdCA9IHt9CiAgICBmb3IgaXRlbSBpbiBfcGFyc2VfbGlzdF9oZWFkZXIodmFsdWUpOgogICAgICAgIGlmIFwiPVwiIG5vdCBpbiBpdGVtOgogICAgICAgICAgICByZXN1bHRbaXRlbV0gPSBOb25lCiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgbmFtZSwgdmFsdWUgPSBpdGVtLnNwbGl0KFwiPVwiLCAxKQogICAgICAgIGlmIHZhbHVlWzoxXSA9PSB2YWx1ZVstMTpdID09ICdcIic6CiAgICAgICAgICAgIHZhbHVlID0gdW5xdW90ZV9oZWFkZXJfdmFsdWUodmFsdWVbMTotMV0pCiAgICAgICAgcmVzdWx0W25hbWVdID0gdmFsdWUKICAgIHJldHVybiByZXN1bHQKCgojIEZyb20gbWl0c3VoaWtvL3dlcmt6ZXVnICh1c2VkIHdpdGggcGVybWlzc2lvbikuCmRlZiB1bnF1b3RlX2hlYWRlcl92YWx1ZSh2YWx1ZSwgaXNfZmlsZW5hbWU9RmFsc2UpOgogICAgclwiXCJcIlVucXVvdGVzIGEgaGVhZGVyIHZhbHVlLiAgKFJldmVyc2FsIG9mIDpmdW5jOmBxdW90ZV9oZWFkZXJfdmFsdWVgKS4KICAgIFRoaXMgZG9lcyBub3QgdXNlIHRoZSByZWFsIHVucXVvdGluZyBidXQgd2hhdCBicm93c2VycyBhcmUgYWN0dWFsbHkKICAgIHVzaW5nIGZvciBxdW90aW5nLgoKICAgIDpwYXJhbSB2YWx1ZTogdGhlIGhlYWRlciB2YWx1ZSB0byB1bnF1b3RlLgogICAgOnJ0eXBlOiBzdHIKICAgIFwiXCJcIgogICAgaWYgdmFsdWUgYW5kIHZhbHVlWzBdID09IHZhbHVlWy0xXSA9PSAnXCInOgogICAgICAgICMgdGhpcyBpcyBub3QgdGhlIHJlYWwgdW5xdW90aW5nLCBidXQgZml4aW5nIHRoaXMgc28gdGhhdCB0aGUKICAgICAgICAjIFJGQyBpcyBtZXQgd2lsbCByZXN1bHQgaW4gYnVncyB3aXRoIGludGVybmV0IGV4cGxvcmVyIGFuZAogICAgICAgICMgcHJvYmFibHkgc29tZSBvdGhlciBicm93c2VycyBhcyB3ZWxsLiAgSUUgZm9yIGV4YW1wbGUgaXMKICAgICAgICAjIHVwbG9hZGluZyBmaWxlcyB3aXRoIFwiQzpcXGZvb1xcYmFyLnR4dFwiIGFzIGZpbGVuYW1lCiAgICAgICAgdmFsdWUgPSB2YWx1ZVsxOi0xXQoKICAgICAgICAjIGlmIHRoaXMgaXMgYSBmaWxlbmFtZSBhbmQgdGhlIHN0YXJ0aW5nIGNoYXJhY3RlcnMgbG9vayBsaWtlCiAgICAgICAgIyBhIFVOQyBwYXRoLCB0aGVuIGp1c3QgcmV0dXJuIHRoZSB2YWx1ZSB3aXRob3V0IHF1b3Rlcy4gIFVzaW5nIHRoZQogICAgICAgICMgcmVwbGFjZSBzZXF1ZW5jZSBiZWxvdyBvbiBhIFVOQyBwYXRoIGhhcyB0aGUgZWZmZWN0IG9mIHR1cm5pbmcKICAgICAgICAjIHRoZSBsZWFkaW5nIGRvdWJsZSBzbGFzaCBpbnRvIGEgc2luZ2xlIHNsYXNoIGFuZCB0aGVuCiAgICAgICAgIyBfZml4X2llX2ZpbGVuYW1lKCkgZG9lc24ndCB3b3JrIGNvcnJlY3RseS4gIFNlZSAjNDU4LgogICAgICAgIGlmIG5vdCBpc19maWxlbmFtZSBvciB2YWx1ZVs6Ml0gIT0gXCJcXFxcXFxcXFwiOgogICAgICAgICAgICByZXR1cm4gdmFsdWUucmVwbGFjZShcIlxcXFxcXFxcXCIsIFwiXFxcXFwiKS5yZXBsYWNlKCdcXFxcXCInLCAnXCInKQogICAgcmV0dXJuIHZhbHVlCgoKZGVmIGRpY3RfZnJvbV9jb29raWVqYXIoY2opOgogICAgXCJcIlwiUmV0dXJucyBhIGtleS92YWx1ZSBkaWN0aW9uYXJ5IGZyb20gYSBDb29raWVKYXIuCgogICAgOnBhcmFtIGNqOiBDb29raWVKYXIgb2JqZWN0IHRvIGV4dHJhY3QgY29va2llcyBmcm9tLgogICAgOnJ0eXBlOiBkaWN0CiAgICBcIlwiXCIKCiAgICBjb29raWVfZGljdCA9IHt9CgogICAgZm9yIGNvb2tpZSBpbiBjajoKICAgICAgICBjb29raWVfZGljdFtjb29raWUubmFtZV0gPSBjb29raWUudmFsdWUKCiAgICByZXR1cm4gY29va2llX2RpY3QKCgpkZWYgYWRkX2RpY3RfdG9fY29va2llamFyKGNqLCBjb29raWVfZGljdCk6CiAgICBcIlwiXCJSZXR1cm5zIGEgQ29va2llSmFyIGZyb20gYSBrZXkvdmFsdWUgZGljdGlvbmFyeS4KCiAgICA6cGFyYW0gY2o6IENvb2tpZUphciB0byBpbnNlcnQgY29va2llcyBpbnRvLgogICAgOnBhcmFtIGNvb2tpZV9kaWN0OiBEaWN0IG9mIGtleS92YWx1ZXMgdG8gaW5zZXJ0IGludG8gQ29va2llSmFyLgogICAgOnJ0eXBlOiBDb29raWVKYXIKICAgIFwiXCJcIgoKICAgIHJldHVybiBjb29raWVqYXJfZnJvbV9kaWN0KGNvb2tpZV9kaWN0LCBjaikKCgpkZWYgZ2V0X2VuY29kaW5nc19mcm9tX2NvbnRlbnQoY29udGVudCk6CiAgICBcIlwiXCJSZXR1cm5zIGVuY29kaW5ncyBmcm9tIGdpdmVuIGNvbnRlbnQgc3RyaW5nLgoKICAgIDpwYXJhbSBjb250ZW50OiBieXRlc3RyaW5nIHRvIGV4dHJhY3QgZW5jb2RpbmdzIGZyb20uCiAgICBcIlwiXCIKICAgIHdhcm5pbmdzLndhcm4oCiAgICAgICAgKAogICAgICAgICAgICBcIkluIHJlcXVlc3RzIDMuMCwgZ2V0X2VuY29kaW5nc19mcm9tX2NvbnRlbnQgd2lsbCBiZSByZW1vdmVkLiBGb3IgXCIKICAgICAgICAgICAgXCJtb3JlIGluZm9ybWF0aW9uLCBwbGVhc2Ugc2VlIHRoZSBkaXNjdXNzaW9uIG9uIGlzc3VlICMyMjY2LiAoVGhpc1wiCiAgICAgICAgICAgIFwiIHdhcm5pbmcgc2hvdWxkIG9ubHkgYXBwZWFyIG9uY2UuKVwiCiAgICAgICAgKSwKICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsCiAgICApCgogICAgY2hhcnNldF9yZSA9IHJlLmNvbXBpbGUocic8bWV0YS4qP2NoYXJzZXQ9W1wiXFwnXSooLis/KVtcIlxcJz5dJywgZmxhZ3M9cmUuSSkKICAgIHByYWdtYV9yZSA9IHJlLmNvbXBpbGUocic8bWV0YS4qP2NvbnRlbnQ9W1wiXFwnXSo7P2NoYXJzZXQ9KC4rPylbXCJcXCc+XScsIGZsYWdzPXJlLkkpCiAgICB4bWxfcmUgPSByZS5jb21waWxlKHInXjxcXD94bWwuKj9lbmNvZGluZz1bXCJcXCddKiguKz8pW1wiXFwnPl0nKQoKICAgIHJldHVybiAoCiAgICAgICAgY2hhcnNldF9yZS5maW5kYWxsKGNvbnRlbnQpCiAgICAgICAgKyBwcmFnbWFfcmUuZmluZGFsbChjb250ZW50KQogICAgICAgICsgeG1sX3JlLmZpbmRhbGwoY29udGVudCkKICAgICkKCgpkZWYgX3BhcnNlX2NvbnRlbnRfdHlwZV9oZWFkZXIoaGVhZGVyKToKICAgIFwiXCJcIlJldHVybnMgY29udGVudCB0eXBlIGFuZCBwYXJhbWV0ZXJzIGZyb20gZ2l2ZW4gaGVhZGVyCgogICAgOnBhcmFtIGhlYWRlcjogc3RyaW5nCiAgICA6cmV0dXJuOiB0dXBsZSBjb250YWluaW5nIGNvbnRlbnQgdHlwZSBhbmQgZGljdGlvbmFyeSBvZgogICAgICAgICBwYXJhbWV0ZXJzCiAgICBcIlwiXCIKCiAgICB0b2tlbnMgPSBoZWFkZXIuc3BsaXQoXCI7XCIpCiAgICBjb250ZW50X3R5cGUsIHBhcmFtcyA9IHRva2Vuc1swXS5zdHJpcCgpLCB0b2tlbnNbMTpdCiAgICBwYXJhbXNfZGljdCA9IHt9CiAgICBpdGVtc190b19zdHJpcCA9IFwiXFxcIicgXCIKCiAgICBmb3IgcGFyYW0gaW4gcGFyYW1zOgogICAgICAgIHBhcmFtID0gcGFyYW0uc3RyaXAoKQogICAgICAgIGlmIHBhcmFtOgogICAgICAgICAgICBrZXksIHZhbHVlID0gcGFyYW0sIFRydWUKICAgICAgICAgICAgaW5kZXhfb2ZfZXF1YWxzID0gcGFyYW0uZmluZChcIj1cIikKICAgICAgICAgICAgaWYgaW5kZXhfb2ZfZXF1YWxzICE9IC0xOgogICAgICAgICAgICAgICAga2V5ID0gcGFyYW1bOmluZGV4X29mX2VxdWFsc10uc3RyaXAoaXRlbXNfdG9fc3RyaXApCiAgICAgICAgICAgICAgICB2YWx1ZSA9IHBhcmFtW2luZGV4X29mX2VxdWFscyArIDEgOl0uc3RyaXAoaXRlbXNfdG9fc3RyaXApCiAgICAgICAgICAgIHBhcmFtc19kaWN0W2tleS5sb3dlcigpXSA9IHZhbHVlCiAgICByZXR1cm4gY29udGVudF90eXBlLCBwYXJhbXNfZGljdAoKCmRlZiBnZXRfZW5jb2RpbmdfZnJvbV9oZWFkZXJzKGhlYWRlcnMpOgogICAgXCJcIlwiUmV0dXJucyBlbmNvZGluZ3MgZnJvbSBnaXZlbiBIVFRQIEhlYWRlciBEaWN0LgoKICAgIDpwYXJhbSBoZWFkZXJzOiBkaWN0aW9uYXJ5IHRvIGV4dHJhY3QgZW5jb2RpbmcgZnJvbS4KICAgIDpydHlwZTogc3RyCiAgICBcIlwiXCIKCiAgICBjb250ZW50X3R5cGUgPSBoZWFkZXJzLmdldChcImNvbnRlbnQtdHlwZVwiKQoKICAgIGlmIG5vdCBjb250ZW50X3R5cGU6CiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBjb250ZW50X3R5cGUsIHBhcmFtcyA9IF9wYXJzZV9jb250ZW50X3R5cGVfaGVhZGVyKGNvbnRlbnRfdHlwZSkKCiAgICBpZiBcImNoYXJzZXRcIiBpbiBwYXJhbXM6CiAgICAgICAgcmV0dXJuIHBhcmFtc1tcImNoYXJzZXRcIl0uc3RyaXAoXCInXFxcIlwiKQoKICAgIGlmIFwidGV4dFwiIGluIGNvbnRlbnRfdHlwZToKICAgICAgICByZXR1cm4gXCJJU08tODg1OS0xXCIKCiAgICBpZiBcImFwcGxpY2F0aW9uL2pzb25cIiBpbiBjb250ZW50X3R5cGU6CiAgICAgICAgIyBBc3N1bWUgVVRGLTggYmFzZWQgb24gUkZDIDQ2Mjc6IGh0dHBzOi8vd3d3LmlldGYub3JnL3JmYy9yZmM0NjI3LnR4dCBzaW5jZSB0aGUgY2hhcnNldCB3YXMgdW5zZXQKICAgICAgICByZXR1cm4gXCJ1dGYtOFwiCgoKZGVmIHN0cmVhbV9kZWNvZGVfcmVzcG9uc2VfdW5pY29kZShpdGVyYXRvciwgcik6CiAgICBcIlwiXCJTdHJlYW0gZGVjb2RlcyBhbiBpdGVyYXRvci5cIlwiXCIKCiAgICBpZiByLmVuY29kaW5nIGlzIE5vbmU6CiAgICAgICAgeWllbGQgZnJvbSBpdGVyYXRvcgogICAgICAgIHJldHVybgoKICAgIGRlY29kZXIgPSBjb2RlY3MuZ2V0aW5jcmVtZW50YWxkZWNvZGVyKHIuZW5jb2RpbmcpKGVycm9ycz1cInJlcGxhY2VcIikKICAgIGZvciBjaHVuayBpbiBpdGVyYXRvcjoKICAgICAgICBydiA9IGRlY29kZXIuZGVjb2RlKGNodW5rKQogICAgICAgIGlmIHJ2OgogICAgICAgICAgICB5aWVsZCBydgogICAgcnYgPSBkZWNvZGVyLmRlY29kZShiXCJcIiwgZmluYWw9VHJ1ZSkKICAgIGlmIHJ2OgogICAgICAgIHlpZWxkIHJ2CgoKZGVmIGl0ZXJfc2xpY2VzKHN0cmluZywgc2xpY2VfbGVuZ3RoKToKICAgIFwiXCJcIkl0ZXJhdGUgb3ZlciBzbGljZXMgb2YgYSBzdHJpbmcuXCJcIlwiCiAgICBwb3MgPSAwCiAgICBpZiBzbGljZV9sZW5ndGggaXMgTm9uZSBvciBzbGljZV9sZW5ndGggPD0gMDoKICAgICAgICBzbGljZV9sZW5ndGggPSBsZW4oc3RyaW5nKQogICAgd2hpbGUgcG9zIDwgbGVuKHN0cmluZyk6CiAgICAgICAgeWllbGQgc3RyaW5nW3BvcyA6IHBvcyArIHNsaWNlX2xlbmd0aF0KICAgICAgICBwb3MgKz0gc2xpY2VfbGVuZ3RoCgoKZGVmIGdldF91bmljb2RlX2Zyb21fcmVzcG9uc2Uocik6CiAgICBcIlwiXCJSZXR1cm5zIHRoZSByZXF1ZXN0ZWQgY29udGVudCBiYWNrIGluIHVuaWNvZGUuCgogICAgOnBhcmFtIHI6IFJlc3BvbnNlIG9iamVjdCB0byBnZXQgdW5pY29kZSBjb250ZW50IGZyb20uCgogICAgVHJpZWQ6CgogICAgMS4gY2hhcnNldCBmcm9tIGNvbnRlbnQtdHlwZQogICAgMi4gZmFsbCBiYWNrIGFuZCByZXBsYWNlIGFsbCB1bmljb2RlIGNoYXJhY3RlcnMKCiAgICA6cnR5cGU6IHN0cgogICAgXCJcIlwiCiAgICB3YXJuaW5ncy53YXJuKAogICAgICAgICgKICAgICAgICAgICAgXCJJbiByZXF1ZXN0cyAzLjAsIGdldF91bmljb2RlX2Zyb21fcmVzcG9uc2Ugd2lsbCBiZSByZW1vdmVkLiBGb3IgXCIKICAgICAgICAgICAgXCJtb3JlIGluZm9ybWF0aW9uLCBwbGVhc2Ugc2VlIHRoZSBkaXNjdXNzaW9uIG9uIGlzc3VlICMyMjY2LiAoVGhpc1wiCiAgICAgICAgICAgIFwiIHdhcm5pbmcgc2hvdWxkIG9ubHkgYXBwZWFyIG9uY2UuKVwiCiAgICAgICAgKSwKICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsCiAgICApCgogICAgdHJpZWRfZW5jb2RpbmdzID0gW10KCiAgICAjIFRyeSBjaGFyc2V0IGZyb20gY29udGVudC10eXBlCiAgICBlbmNvZGluZyA9IGdldF9lbmNvZGluZ19mcm9tX2hlYWRlcnMoci5oZWFkZXJzKQoKICAgIGlmIGVuY29kaW5nOgogICAgICAgIHRyeToKICAgICAgICAgICAgcmV0dXJuIHN0cihyLmNvbnRlbnQsIGVuY29kaW5nKQogICAgICAgIGV4Y2VwdCBVbmljb2RlRXJyb3I6CiAgICAgICAgICAgIHRyaWVkX2VuY29kaW5ncy5hcHBlbmQoZW5jb2RpbmcpCgogICAgIyBGYWxsIGJhY2s6CiAgICB0cnk6CiAgICAgICAgcmV0dXJuIHN0cihyLmNvbnRlbnQsIGVuY29kaW5nLCBlcnJvcnM9XCJyZXBsYWNlXCIpCiAgICBleGNlcHQgVHlwZUVycm9yOgogICAgICAgIHJldHVybiByLmNvbnRlbnQKCgojIFRoZSB1bnJlc2VydmVkIFVSSSBjaGFyYWN0ZXJzIChSRkMgMzk4NikKVU5SRVNFUlZFRF9TRVQgPSBmcm96ZW5zZXQoCiAgICBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIiArIFwiMDEyMzQ1Njc4OS0uX35cIgopCgoKZGVmIHVucXVvdGVfdW5yZXNlcnZlZCh1cmkpOgogICAgXCJcIlwiVW4tZXNjYXBlIGFueSBwZXJjZW50LWVzY2FwZSBzZXF1ZW5jZXMgaW4gYSBVUkkgdGhhdCBhcmUgdW5yZXNlcnZlZAogICAgY2hhcmFjdGVycy4gVGhpcyBsZWF2ZXMgYWxsIHJlc2VydmVkLCBpbGxlZ2FsIGFuZCBub24tQVNDSUkgYnl0ZXMgZW5jb2RlZC4KCiAgICA6cnR5cGU6IHN0cgogICAgXCJcIlwiCiAgICBwYXJ0cyA9IHVyaS5zcGxpdChcIiVcIikKICAgIGZvciBpIGluIHJhbmdlKDEsIGxlbihwYXJ0cykpOgogICAgICAgIGggPSBwYXJ0c1tpXVswOjJdCiAgICAgICAgaWYgbGVuKGgpID09IDIgYW5kIGguaXNhbG51bSgpOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBjID0gY2hyKGludChoLCAxNikpCiAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgICAgICAgICAgcmFpc2UgSW52YWxpZFVSTChmXCJJbnZhbGlkIHBlcmNlbnQtZXNjYXBlIHNlcXVlbmNlOiAne2h9J1wiKQoKICAgICAgICAgICAgaWYgYyBpbiBVTlJFU0VSVkVEX1NFVDoKICAgICAgICAgICAgICAgIHBhcnRzW2ldID0gYyArIHBhcnRzW2ldWzI6XQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcGFydHNbaV0gPSBmXCIle3BhcnRzW2ldfVwiCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcGFydHNbaV0gPSBmXCIle3BhcnRzW2ldfVwiCiAgICByZXR1cm4gXCJcIi5qb2luKHBhcnRzKQoKCmRlZiByZXF1b3RlX3VyaSh1cmkpOgogICAgXCJcIlwiUmUtcXVvdGUgdGhlIGdpdmVuIFVSSS4KCiAgICBUaGlzIGZ1bmN0aW9uIHBhc3NlcyB0aGUgZ2l2ZW4gVVJJIHRocm91Z2ggYW4gdW5xdW90ZS9xdW90ZSBjeWNsZSB0bwogICAgZW5zdXJlIHRoYXQgaXQgaXMgZnVsbHkgYW5kIGNvbnNpc3RlbnRseSBxdW90ZWQuCgogICAgOnJ0eXBlOiBzdHIKICAgIFwiXCJcIgogICAgc2FmZV93aXRoX3BlcmNlbnQgPSBcIiEjJCUmJygpKissLzo7PT9AW11+XCIKICAgIHNhZmVfd2l0aG91dF9wZXJjZW50ID0gXCIhIyQmJygpKissLzo7PT9AW11+XCIKICAgIHRyeToKICAgICAgICAjIFVucXVvdGUgb25seSB0aGUgdW5yZXNlcnZlZCBjaGFyYWN0ZXJzCiAgICAgICAgIyBUaGVuIHF1b3RlIG9ubHkgaWxsZWdhbCBjaGFyYWN0ZXJzIChkbyBub3QgcXVvdGUgcmVzZXJ2ZWQsCiAgICAgICAgIyB1bnJlc2VydmVkLCBvciAnJScpCiAgICAgICAgcmV0dXJuIHF1b3RlKHVucXVvdGVfdW5yZXNlcnZlZCh1cmkpLCBzYWZlPXNhZmVfd2l0aF9wZXJjZW50KQogICAgZXhjZXB0IEludmFsaWRVUkw6CiAgICAgICAgIyBXZSBjb3VsZG4ndCB1bnF1b3RlIHRoZSBnaXZlbiBVUkksIHNvIGxldCdzIHRyeSBxdW90aW5nIGl0LCBidXQKICAgICAgICAjIHRoZXJlIG1heSBiZSB1bnF1b3RlZCAnJSdzIGluIHRoZSBVUkkuIFdlIG5lZWQgdG8gbWFrZSBzdXJlIHRoZXkncmUKICAgICAgICAjIHByb3Blcmx5IHF1b3RlZCBzbyB0aGV5IGRvIG5vdCBjYXVzZSBpc3N1ZXMgZWxzZXdoZXJlLgogICAgICAgIHJldHVybiBxdW90ZSh1cmksIHNhZmU9c2FmZV93aXRob3V0X3BlcmNlbnQpCgoKZGVmIGFkZHJlc3NfaW5fbmV0d29yayhpcCwgbmV0KToKICAgIFwiXCJcIlRoaXMgZnVuY3Rpb24gYWxsb3dzIHlvdSB0byBjaGVjayBpZiBhbiBJUCBiZWxvbmdzIHRvIGEgbmV0d29yayBzdWJuZXQKCiAgICBFeGFtcGxlOiByZXR1cm5zIFRydWUgaWYgaXAgPSAxOTIuMTY4LjEuMSBhbmQgbmV0ID0gMTkyLjE2OC4xLjAvMjQKICAgICAgICAgICAgIHJldHVybnMgRmFsc2UgaWYgaXAgPSAxOTIuMTY4LjEuMSBhbmQgbmV0ID0gMTkyLjE2OC4xMDAuMC8yNAoKICAgIDpydHlwZTogYm9vbAogICAgXCJcIlwiCiAgICBpcGFkZHIgPSBzdHJ1Y3QudW5wYWNrKFwiPUxcIiwgc29ja2V0LmluZXRfYXRvbihpcCkpWzBdCiAgICBuZXRhZGRyLCBiaXRzID0gbmV0LnNwbGl0KFwiL1wiKQogICAgbmV0bWFzayA9IHN0cnVjdC51bnBhY2soXCI9TFwiLCBzb2NrZXQuaW5ldF9hdG9uKGRvdHRlZF9uZXRtYXNrKGludChiaXRzKSkpKVswXQogICAgbmV0d29yayA9IHN0cnVjdC51bnBhY2soXCI9TFwiLCBzb2NrZXQuaW5ldF9hdG9uKG5ldGFkZHIpKVswXSAmIG5ldG1hc2sKICAgIHJldHVybiAoaXBhZGRyICYgbmV0bWFzaykgPT0gKG5ldHdvcmsgJiBuZXRtYXNrKQoKCmRlZiBkb3R0ZWRfbmV0bWFzayhtYXNrKToKICAgIFwiXCJcIkNvbnZlcnRzIG1hc2sgZnJvbSAveHggZm9ybWF0IHRvIHh4eC54eHgueHh4Lnh4eAoKICAgIEV4YW1wbGU6IGlmIG1hc2sgaXMgMjQgZnVuY3Rpb24gcmV0dXJucyAyNTUuMjU1LjI1NS4wCgogICAgOnJ0eXBlOiBzdHIKICAgIFwiXCJcIgogICAgYml0cyA9IDB4RkZGRkZGRkYgXiAoMSA8PCAzMiAtIG1hc2spIC0gMQogICAgcmV0dXJuIHNvY2tldC5pbmV0X250b2Eoc3RydWN0LnBhY2soXCI+SVwiLCBiaXRzKSkKCgpkZWYgaXNfaXB2NF9hZGRyZXNzKHN0cmluZ19pcCk6CiAgICBcIlwiXCIKICAgIDpydHlwZTogYm9vbAogICAgXCJcIlwiCiAgICB0cnk6CiAgICAgICAgc29ja2V0LmluZXRfYXRvbihzdHJpbmdfaXApCiAgICBleGNlcHQgT1NFcnJvcjoKICAgICAgICByZXR1cm4gRmFsc2UKICAgIHJldHVybiBUcnVlCgoKZGVmIGlzX3ZhbGlkX2NpZHIoc3RyaW5nX25ldHdvcmspOgogICAgXCJcIlwiCiAgICBWZXJ5IHNpbXBsZSBjaGVjayBvZiB0aGUgY2lkciBmb3JtYXQgaW4gbm9fcHJveHkgdmFyaWFibGUuCgogICAgOnJ0eXBlOiBib29sCiAgICBcIlwiXCIKICAgIGlmIHN0cmluZ19uZXR3b3JrLmNvdW50KFwiL1wiKSA9PSAxOgogICAgICAgIHRyeToKICAgICAgICAgICAgbWFzayA9IGludChzdHJpbmdfbmV0d29yay5zcGxpdChcIi9cIilbMV0pCiAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICBpZiBtYXNrIDwgMSBvciBtYXNrID4gMzI6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNvY2tldC5pbmV0X2F0b24oc3RyaW5nX25ldHdvcmsuc3BsaXQoXCIvXCIpWzBdKQogICAgICAgIGV4Y2VwdCBPU0Vycm9yOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICByZXR1cm4gVHJ1ZQoKCkBjb250ZXh0bGliLmNvbnRleHRtYW5hZ2VyCmRlZiBzZXRfZW52aXJvbihlbnZfbmFtZSwgdmFsdWUpOgogICAgXCJcIlwiU2V0IHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZSAnZW52X25hbWUnIHRvICd2YWx1ZScKCiAgICBTYXZlIHByZXZpb3VzIHZhbHVlLCB5aWVsZCwgYW5kIHRoZW4gcmVzdG9yZSB0aGUgcHJldmlvdXMgdmFsdWUgc3RvcmVkIGluCiAgICB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGUgJ2Vudl9uYW1lJy4KCiAgICBJZiAndmFsdWUnIGlzIE5vbmUsIGRvIG5vdGhpbmdcIlwiXCIKICAgIHZhbHVlX2NoYW5nZWQgPSB2YWx1ZSBpcyBub3QgTm9uZQogICAgaWYgdmFsdWVfY2hhbmdlZDoKICAgICAgICBvbGRfdmFsdWUgPSBvcy5lbnZpcm9uLmdldChlbnZfbmFtZSkKICAgICAgICBvcy5lbnZpcm9uW2Vudl9uYW1lXSA9IHZhbHVlCiAgICB0cnk6CiAgICAgICAgeWllbGQKICAgIGZpbmFsbHk6CiAgICAgICAgaWYgdmFsdWVfY2hhbmdlZDoKICAgICAgICAgICAgaWYgb2xkX3ZhbHVlIGlzIE5vbmU6CiAgICAgICAgICAgICAgICBkZWwgb3MuZW52aXJvbltlbnZfbmFtZV0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIG9zLmVudmlyb25bZW52X25hbWVdID0gb2xkX3ZhbHVlCgoKZGVmIHNob3VsZF9ieXBhc3NfcHJveGllcyh1cmwsIG5vX3Byb3h5KToKICAgIFwiXCJcIgogICAgUmV0dXJucyB3aGV0aGVyIHdlIHNob3VsZCBieXBhc3MgcHJveGllcyBvciBub3QuCgogICAgOnJ0eXBlOiBib29sCiAgICBcIlwiXCIKICAgICMgUHJpb3JpdGl6ZSBsb3dlcmNhc2UgZW52aXJvbm1lbnQgdmFyaWFibGVzIG92ZXIgdXBwZXJjYXNlCiAgICAjIHRvIGtlZXAgYSBjb25zaXN0ZW50IGJlaGF2aW91ciB3aXRoIG90aGVyIGh0dHAgcHJvamVjdHMgKGN1cmwsIHdnZXQpLgogICAgZGVmIGdldF9wcm94eShrZXkpOgogICAgICAgIHJldHVybiBvcy5lbnZpcm9uLmdldChrZXkpIG9yIG9zLmVudmlyb24uZ2V0KGtleS51cHBlcigpKQoKICAgICMgRmlyc3QgY2hlY2sgd2hldGhlciBub19wcm94eSBpcyBkZWZpbmVkLiBJZiBpdCBpcywgY2hlY2sgdGhhdCB0aGUgVVJMCiAgICAjIHdlJ3JlIGdldHRpbmcgaXNuJ3QgaW4gdGhlIG5vX3Byb3h5IGxpc3QuCiAgICBub19wcm94eV9hcmcgPSBub19wcm94eQogICAgaWYgbm9fcHJveHkgaXMgTm9uZToKICAgICAgICBub19wcm94eSA9IGdldF9wcm94eShcIm5vX3Byb3h5XCIpCiAgICBwYXJzZWQgPSB1cmxwYXJzZSh1cmwpCgogICAgaWYgcGFyc2VkLmhvc3RuYW1lIGlzIE5vbmU6CiAgICAgICAgIyBVUkxzIGRvbid0IGFsd2F5cyBoYXZlIGhvc3RuYW1lcywgZS5nLiBmaWxlOi8vLyB1cmxzLgogICAgICAgIHJldHVybiBUcnVlCgogICAgaWYgbm9fcHJveHk6CiAgICAgICAgIyBXZSBuZWVkIHRvIGNoZWNrIHdoZXRoZXIgd2UgbWF0Y2ggaGVyZS4gV2UgbmVlZCB0byBzZWUgaWYgd2UgbWF0Y2gKICAgICAgICAjIHRoZSBlbmQgb2YgdGhlIGhvc3RuYW1lLCBib3RoIHdpdGggYW5kIHdpdGhvdXQgdGhlIHBvcnQuCiAgICAgICAgbm9fcHJveHkgPSAoaG9zdCBmb3IgaG9zdCBpbiBub19wcm94eS5yZXBsYWNlKFwiIFwiLCBcIlwiKS5zcGxpdChcIixcIikgaWYgaG9zdCkKCiAgICAgICAgaWYgaXNfaXB2NF9hZGRyZXNzKHBhcnNlZC5ob3N0bmFtZSk6CiAgICAgICAgICAgIGZvciBwcm94eV9pcCBpbiBub19wcm94eToKICAgICAgICAgICAgICAgIGlmIGlzX3ZhbGlkX2NpZHIocHJveHlfaXApOgogICAgICAgICAgICAgICAgICAgIGlmIGFkZHJlc3NfaW5fbmV0d29yayhwYXJzZWQuaG9zdG5hbWUsIHByb3h5X2lwKToKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgICAgIGVsaWYgcGFyc2VkLmhvc3RuYW1lID09IHByb3h5X2lwOgogICAgICAgICAgICAgICAgICAgICMgSWYgbm9fcHJveHkgaXAgd2FzIGRlZmluZWQgaW4gcGxhaW4gSVAgbm90YXRpb24gaW5zdGVhZCBvZiBjaWRyIG5vdGF0aW9uICYKICAgICAgICAgICAgICAgICAgICAjIG1hdGNoZXMgdGhlIElQIG9mIHRoZSBpbmRleAogICAgICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaG9zdF93aXRoX3BvcnQgPSBwYXJzZWQuaG9zdG5hbWUKICAgICAgICAgICAgaWYgcGFyc2VkLnBvcnQ6CiAgICAgICAgICAgICAgICBob3N0X3dpdGhfcG9ydCArPSBmXCI6e3BhcnNlZC5wb3J0fVwiCgogICAgICAgICAgICBmb3IgaG9zdCBpbiBub19wcm94eToKICAgICAgICAgICAgICAgIGlmIHBhcnNlZC5ob3N0bmFtZS5lbmRzd2l0aChob3N0KSBvciBob3N0X3dpdGhfcG9ydC5lbmRzd2l0aChob3N0KToKICAgICAgICAgICAgICAgICAgICAjIFRoZSBVUkwgZG9lcyBtYXRjaCBzb21ldGhpbmcgaW4gbm9fcHJveHksIHNvIHdlIGRvbid0IHdhbnQKICAgICAgICAgICAgICAgICAgICAjIHRvIGFwcGx5IHRoZSBwcm94aWVzIG9uIHRoaXMgVVJMLgogICAgICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCgogICAgd2l0aCBzZXRfZW52aXJvbihcIm5vX3Byb3h5XCIsIG5vX3Byb3h5X2FyZyk6CiAgICAgICAgIyBwYXJzZWQuaG9zdG5hbWUgY2FuIGJlIGBOb25lYCBpbiBjYXNlcyBzdWNoIGFzIGEgZmlsZSBVUkkuCiAgICAgICAgdHJ5OgogICAgICAgICAgICBieXBhc3MgPSBwcm94eV9ieXBhc3MocGFyc2VkLmhvc3RuYW1lKQogICAgICAgIGV4Y2VwdCAoVHlwZUVycm9yLCBzb2NrZXQuZ2FpZXJyb3IpOgogICAgICAgICAgICBieXBhc3MgPSBGYWxzZQoKICAgIGlmIGJ5cGFzczoKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIHJldHVybiBGYWxzZQoKCmRlZiBnZXRfZW52aXJvbl9wcm94aWVzKHVybCwgbm9fcHJveHk9Tm9uZSk6CiAgICBcIlwiXCIKICAgIFJldHVybiBhIGRpY3Qgb2YgZW52aXJvbm1lbnQgcHJveGllcy4KCiAgICA6cnR5cGU6IGRpY3QKICAgIFwiXCJcIgogICAgaWYgc2hvdWxkX2J5cGFzc19wcm94aWVzKHVybCwgbm9fcHJveHk9bm9fcHJveHkpOgogICAgICAgIHJldHVybiB7fQogICAgZWxzZToKICAgICAgICByZXR1cm4gZ2V0cHJveGllcygpCgoKZGVmIHNlbGVjdF9wcm94eSh1cmwsIHByb3hpZXMpOgogICAgXCJcIlwiU2VsZWN0IGEgcHJveHkgZm9yIHRoZSB1cmwsIGlmIGFwcGxpY2FibGUuCgogICAgOnBhcmFtIHVybDogVGhlIHVybCBiZWluZyBmb3IgdGhlIHJlcXVlc3QKICAgIDpwYXJhbSBwcm94aWVzOiBBIGRpY3Rpb25hcnkgb2Ygc2NoZW1lcyBvciBzY2hlbWVzIGFuZCBob3N0cyB0byBwcm94eSBVUkxzCiAgICBcIlwiXCIKICAgIHByb3hpZXMgPSBwcm94aWVzIG9yIHt9CiAgICB1cmxwYXJ0cyA9IHVybHBhcnNlKHVybCkKICAgIGlmIHVybHBhcnRzLmhvc3RuYW1lIGlzIE5vbmU6CiAgICAgICAgcmV0dXJuIHByb3hpZXMuZ2V0KHVybHBhcnRzLnNjaGVtZSwgcHJveGllcy5nZXQoXCJhbGxcIikpCgogICAgcHJveHlfa2V5cyA9IFsKICAgICAgICB1cmxwYXJ0cy5zY2hlbWUgKyBcIjovL1wiICsgdXJscGFydHMuaG9zdG5hbWUsCiAgICAgICAgdXJscGFydHMuc2NoZW1lLAogICAgICAgIFwiYWxsOi8vXCIgKyB1cmxwYXJ0cy5ob3N0bmFtZSwKICAgICAgICBcImFsbFwiLAogICAgXQogICAgcHJveHkgPSBOb25lCiAgICBmb3IgcHJveHlfa2V5IGluIHByb3h5X2tleXM6CiAgICAgICAgaWYgcHJveHlfa2V5IGluIHByb3hpZXM6CiAgICAgICAgICAgIHByb3h5ID0gcHJveGllc1twcm94eV9rZXldCiAgICAgICAgICAgIGJyZWFrCgogICAgcmV0dXJuIHByb3h5CgoKZGVmIHJlc29sdmVfcHJveGllcyhyZXF1ZXN0LCBwcm94aWVzLCB0cnVzdF9lbnY9VHJ1ZSk6CiAgICBcIlwiXCJUaGlzIG1ldGhvZCB0YWtlcyBwcm94eSBpbmZvcm1hdGlvbiBmcm9tIGEgcmVxdWVzdCBhbmQgY29uZmlndXJhdGlvbgogICAgaW5wdXQgdG8gcmVzb2x2ZSBhIG1hcHBpbmcgb2YgdGFyZ2V0IHByb3hpZXMuIFRoaXMgd2lsbCBjb25zaWRlciBzZXR0aW5ncwogICAgc3VjaCBhIE5PX1BST1hZIHRvIHN0cmlwIHByb3h5IGNvbmZpZ3VyYXRpb25zLgoKICAgIDpwYXJhbSByZXF1ZXN0OiBSZXF1ZXN0IG9yIFByZXBhcmVkUmVxdWVzdAogICAgOnBhcmFtIHByb3hpZXM6IEEgZGljdGlvbmFyeSBvZiBzY2hlbWVzIG9yIHNjaGVtZXMgYW5kIGhvc3RzIHRvIHByb3h5IFVSTHMKICAgIDpwYXJhbSB0cnVzdF9lbnY6IEJvb2xlYW4gZGVjbGFyaW5nIHdoZXRoZXIgdG8gdHJ1c3QgZW52aXJvbm1lbnQgY29uZmlncwoKICAgIDpydHlwZTogZGljdAogICAgXCJcIlwiCiAgICBwcm94aWVzID0gcHJveGllcyBpZiBwcm94aWVzIGlzIG5vdCBOb25lIGVsc2Uge30KICAgIHVybCA9IHJlcXVlc3QudXJsCiAgICBzY2hlbWUgPSB1cmxwYXJzZSh1cmwpLnNjaGVtZQogICAgbm9fcHJveHkgPSBwcm94aWVzLmdldChcIm5vX3Byb3h5XCIpCiAgICBuZXdfcHJveGllcyA9IHByb3hpZXMuY29weSgpCgogICAgaWYgdHJ1c3RfZW52IGFuZCBub3Qgc2hvdWxkX2J5cGFzc19wcm94aWVzKHVybCwgbm9fcHJveHk9bm9fcHJveHkpOgogICAgICAgIGVudmlyb25fcHJveGllcyA9IGdldF9lbnZpcm9uX3Byb3hpZXModXJsLCBub19wcm94eT1ub19wcm94eSkKCiAgICAgICAgcHJveHkgPSBlbnZpcm9uX3Byb3hpZXMuZ2V0KHNjaGVtZSwgZW52aXJvbl9wcm94aWVzLmdldChcImFsbFwiKSkKCiAgICAgICAgaWYgcHJveHk6CiAgICAgICAgICAgIG5ld19wcm94aWVzLnNldGRlZmF1bHQoc2NoZW1lLCBwcm94eSkKICAgIHJldHVybiBuZXdfcHJveGllcwoKCmRlZiBkZWZhdWx0X3VzZXJfYWdlbnQobmFtZT1cInB5dGhvbi1yZXF1ZXN0c1wiKToKICAgIFwiXCJcIgogICAgUmV0dXJuIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZGVmYXVsdCB1c2VyIGFnZW50LgoKICAgIDpydHlwZTogc3RyCiAgICBcIlwiXCIKICAgIHJldHVybiBmXCJ7bmFtZX0ve19fdmVyc2lvbl9ffVwiCgoKZGVmIGRlZmF1bHRfaGVhZGVycygpOgogICAgXCJcIlwiCiAgICA6cnR5cGU6IHJlcXVlc3RzLnN0cnVjdHVyZXMuQ2FzZUluc2Vuc2l0aXZlRGljdAogICAgXCJcIlwiCiAgICByZXR1cm4gQ2FzZUluc2Vuc2l0aXZlRGljdCgKICAgICAgICB7CiAgICAgICAgICAgIFwiVXNlci1BZ2VudFwiOiBkZWZhdWx0X3VzZXJfYWdlbnQoKSwKICAgICAgICAgICAgXCJBY2NlcHQtRW5jb2RpbmdcIjogREVGQVVMVF9BQ0NFUFRfRU5DT0RJTkcsCiAgICAgICAgICAgIFwiQWNjZXB0XCI6IFwiKi8qXCIsCiAgICAgICAgICAgIFwiQ29ubmVjdGlvblwiOiBcImtlZXAtYWxpdmVcIiwKICAgICAgICB9CiAgICApCgoKZGVmIHBhcnNlX2hlYWRlcl9saW5rcyh2YWx1ZSk6CiAgICBcIlwiXCJSZXR1cm4gYSBsaXN0IG9mIHBhcnNlZCBsaW5rIGhlYWRlcnMgcHJveGllcy4KCiAgICBpLmUuIExpbms6IDxodHRwOi8uLi4vZnJvbnQuanBlZz47IHJlbD1mcm9udDsgdHlwZT1cImltYWdlL2pwZWdcIiw8aHR0cDovLy4uLi9iYWNrLmpwZWc+OyByZWw9YmFjazt0eXBlPVwiaW1hZ2UvanBlZ1wiCgogICAgOnJ0eXBlOiBsaXN0CiAgICBcIlwiXCIKCiAgICBsaW5rcyA9IFtdCgogICAgcmVwbGFjZV9jaGFycyA9IFwiICdcXFwiXCIKCiAgICB2YWx1ZSA9IHZhbHVlLnN0cmlwKHJlcGxhY2VfY2hhcnMpCiAgICBpZiBub3QgdmFsdWU6CiAgICAgICAgcmV0dXJuIGxpbmtzCgogICAgZm9yIHZhbCBpbiByZS5zcGxpdChcIiwgKjxcIiwgdmFsdWUpOgogICAgICAgIHRyeToKICAgICAgICAgICAgdXJsLCBwYXJhbXMgPSB2YWwuc3BsaXQoXCI7XCIsIDEpCiAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgICAgIHVybCwgcGFyYW1zID0gdmFsLCBcIlwiCgogICAgICAgIGxpbmsgPSB7XCJ1cmxcIjogdXJsLnN0cmlwKFwiPD4gJ1xcXCJcIil9CgogICAgICAgIGZvciBwYXJhbSBpbiBwYXJhbXMuc3BsaXQoXCI7XCIpOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBrZXksIHZhbHVlID0gcGFyYW0uc3BsaXQoXCI9XCIpCiAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgIGxpbmtba2V5LnN0cmlwKHJlcGxhY2VfY2hhcnMpXSA9IHZhbHVlLnN0cmlwKHJlcGxhY2VfY2hhcnMpCgogICAgICAgIGxpbmtzLmFwcGVuZChsaW5rKQoKICAgIHJldHVybiBsaW5rcwoKCiMgTnVsbCBieXRlczsgbm8gbmVlZCB0byByZWNyZWF0ZSB0aGVzZSBvbiBlYWNoIGNhbGwgdG8gZ3Vlc3NfanNvbl91dGYKX251bGwgPSBcIlxceDAwXCIuZW5jb2RlKFwiYXNjaWlcIikgICMgZW5jb2RpbmcgdG8gQVNDSUkgZm9yIFB5dGhvbiAzCl9udWxsMiA9IF9udWxsICogMgpfbnVsbDMgPSBfbnVsbCAqIDMKCgpkZWYgZ3Vlc3NfanNvbl91dGYoZGF0YSk6CiAgICBcIlwiXCIKICAgIDpydHlwZTogc3RyCiAgICBcIlwiXCIKICAgICMgSlNPTiBhbHdheXMgc3RhcnRzIHdpdGggdHdvIEFTQ0lJIGNoYXJhY3RlcnMsIHNvIGRldGVjdGlvbiBpcyBhcwogICAgIyBlYXN5IGFzIGNvdW50aW5nIHRoZSBudWxscyBhbmQgZnJvbSB0aGVpciBsb2NhdGlvbiBhbmQgY291bnQKICAgICMgZGV0ZXJtaW5lIHRoZSBlbmNvZGluZy4gQWxzbyBkZXRlY3QgYSBCT00sIGlmIHByZXNlbnQuCiAgICBzYW1wbGUgPSBkYXRhWzo0XQogICAgaWYgc2FtcGxlIGluIChjb2RlY3MuQk9NX1VURjMyX0xFLCBjb2RlY3MuQk9NX1VURjMyX0JFKToKICAgICAgICByZXR1cm4gXCJ1dGYtMzJcIiAgIyBCT00gaW5jbHVkZWQKICAgIGlmIHNhbXBsZVs6M10gPT0gY29kZWNzLkJPTV9VVEY4OgogICAgICAgIHJldHVybiBcInV0Zi04LXNpZ1wiICAjIEJPTSBpbmNsdWRlZCwgTVMgc3R5bGUgKGRpc2NvdXJhZ2VkKQogICAgaWYgc2FtcGxlWzoyXSBpbiAoY29kZWNzLkJPTV9VVEYxNl9MRSwgY29kZWNzLkJPTV9VVEYxNl9CRSk6CiAgICAgICAgcmV0dXJuIFwidXRmLTE2XCIgICMgQk9NIGluY2x1ZGVkCiAgICBudWxsY291bnQgPSBzYW1wbGUuY291bnQoX251bGwpCiAgICBpZiBudWxsY291bnQgPT0gMDoKICAgICAgICByZXR1cm4gXCJ1dGYtOFwiCiAgICBpZiBudWxsY291bnQgPT0gMjoKICAgICAgICBpZiBzYW1wbGVbOjoyXSA9PSBfbnVsbDI6ICAjIDFzdCBhbmQgM3JkIGFyZSBudWxsCiAgICAgICAgICAgIHJldHVybiBcInV0Zi0xNi1iZVwiCiAgICAgICAgaWYgc2FtcGxlWzE6OjJdID09IF9udWxsMjogICMgMm5kIGFuZCA0dGggYXJlIG51bGwKICAgICAgICAgICAgcmV0dXJuIFwidXRmLTE2LWxlXCIKICAgICAgICAjIERpZCBub3QgZGV0ZWN0IDIgdmFsaWQgVVRGLTE2IGFzY2lpLXJhbmdlIGNoYXJhY3RlcnMKICAgIGlmIG51bGxjb3VudCA9PSAzOgogICAgICAgIGlmIHNhbXBsZVs6M10gPT0gX251bGwzOgogICAgICAgICAgICByZXR1cm4gXCJ1dGYtMzItYmVcIgogICAgICAgIGlmIHNhbXBsZVsxOl0gPT0gX251bGwzOgogICAgICAgICAgICByZXR1cm4gXCJ1dGYtMzItbGVcIgogICAgICAgICMgRGlkIG5vdCBkZXRlY3QgYSB2YWxpZCBVVEYtMzIgYXNjaWktcmFuZ2UgY2hhcmFjdGVyCiAgICByZXR1cm4gTm9uZQoKCmRlZiBwcmVwZW5kX3NjaGVtZV9pZl9uZWVkZWQodXJsLCBuZXdfc2NoZW1lKToKICAgIFwiXCJcIkdpdmVuIGEgVVJMIHRoYXQgbWF5IG9yIG1heSBub3QgaGF2ZSBhIHNjaGVtZSwgcHJlcGVuZCB0aGUgZ2l2ZW4gc2NoZW1lLgogICAgRG9lcyBub3QgcmVwbGFjZSBhIHByZXNlbnQgc2NoZW1lIHdpdGggdGhlIG9uZSBwcm92aWRlZCBhcyBhbiBhcmd1bWVudC4KCiAgICA6cnR5cGU6IHN0cgogICAgXCJcIlwiCiAgICBwYXJzZWQgPSBwYXJzZV91cmwodXJsKQogICAgc2NoZW1lLCBhdXRoLCBob3N0LCBwb3J0LCBwYXRoLCBxdWVyeSwgZnJhZ21lbnQgPSBwYXJzZWQKCiAgICAjIEEgZGVmZWN0IGluIHVybHBhcnNlIGRldGVybWluZXMgdGhhdCB0aGVyZSBpc24ndCBhIG5ldGxvYyBwcmVzZW50IGluIHNvbWUKICAgICMgdXJscy4gV2UgcHJldmlvdXNseSBhc3N1bWVkIHBhcnNpbmcgd2FzIG92ZXJseSBjYXV0aW91cywgYW5kIHN3YXBwZWQgdGhlCiAgICAjIG5ldGxvYyBhbmQgcGF0aC4gRHVlIHRvIGEgbGFjayBvZiB0ZXN0cyBvbiB0aGUgb3JpZ2luYWwgZGVmZWN0LCB0aGlzIGlzCiAgICAjIG1haW50YWluZWQgd2l0aCBwYXJzZV91cmwgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LgogICAgbmV0bG9jID0gcGFyc2VkLm5ldGxvYwogICAgaWYgbm90IG5ldGxvYzoKICAgICAgICBuZXRsb2MsIHBhdGggPSBwYXRoLCBuZXRsb2MKCiAgICBpZiBhdXRoOgogICAgICAgICMgcGFyc2VfdXJsIGRvZXNuJ3QgcHJvdmlkZSB0aGUgbmV0bG9jIHdpdGggYXV0aAogICAgICAgICMgc28gd2UnbGwgYWRkIGl0IG91cnNlbHZlcy4KICAgICAgICBuZXRsb2MgPSBcIkBcIi5qb2luKFthdXRoLCBuZXRsb2NdKQogICAgaWYgc2NoZW1lIGlzIE5vbmU6CiAgICAgICAgc2NoZW1lID0gbmV3X3NjaGVtZQogICAgaWYgcGF0aCBpcyBOb25lOgogICAgICAgIHBhdGggPSBcIlwiCgogICAgcmV0dXJuIHVybHVucGFyc2UoKHNjaGVtZSwgbmV0bG9jLCBwYXRoLCBcIlwiLCBxdWVyeSwgZnJhZ21lbnQpKQoKCmRlZiBnZXRfYXV0aF9mcm9tX3VybCh1cmwpOgogICAgXCJcIlwiR2l2ZW4gYSB1cmwgd2l0aCBhdXRoZW50aWNhdGlvbiBjb21wb25lbnRzLCBleHRyYWN0IHRoZW0gaW50byBhIHR1cGxlIG9mCiAgICB1c2VybmFtZSxwYXNzd29yZC4KCiAgICA6cnR5cGU6IChzdHIsc3RyKQogICAgXCJcIlwiCiAgICBwYXJzZWQgPSB1cmxwYXJzZSh1cmwpCgogICAgdHJ5OgogICAgICAgIGF1dGggPSAodW5xdW90ZShwYXJzZWQudXNlcm5hbWUpLCB1bnF1b3RlKHBhcnNlZC5wYXNzd29yZCkpCiAgICBleGNlcHQgKEF0dHJpYnV0ZUVycm9yLCBUeXBlRXJyb3IpOgogICAgICAgIGF1dGggPSAoXCJcIiwgXCJcIikKCiAgICByZXR1cm4gYXV0aAoKCmRlZiBjaGVja19oZWFkZXJfdmFsaWRpdHkoaGVhZGVyKToKICAgIFwiXCJcIlZlcmlmaWVzIHRoYXQgaGVhZGVyIHBhcnRzIGRvbid0IGNvbnRhaW4gbGVhZGluZyB3aGl0ZXNwYWNlCiAgICByZXNlcnZlZCBjaGFyYWN0ZXJzLCBvciByZXR1cm4gY2hhcmFjdGVycy4KCiAgICA6cGFyYW0gaGVhZGVyOiB0dXBsZSwgaW4gdGhlIGZvcm1hdCAobmFtZSwgdmFsdWUpLgogICAgXCJcIlwiCiAgICBuYW1lLCB2YWx1ZSA9IGhlYWRlcgoKICAgIGZvciBwYXJ0IGluIGhlYWRlcjoKICAgICAgICBpZiB0eXBlKHBhcnQpIG5vdCBpbiBIRUFERVJfVkFMSURBVE9SUzoKICAgICAgICAgICAgcmFpc2UgSW52YWxpZEhlYWRlcigKICAgICAgICAgICAgICAgIGZcIkhlYWRlciBwYXJ0ICh7cGFydCFyfSkgZnJvbSB7e3tuYW1lIXJ9OiB7dmFsdWUhcn19fSBtdXN0IGJlIFwiCiAgICAgICAgICAgICAgICBmXCJvZiB0eXBlIHN0ciBvciBieXRlcywgbm90IHt0eXBlKHBhcnQpfVwiCiAgICAgICAgICAgICkKCiAgICBfdmFsaWRhdGVfaGVhZGVyX3BhcnQobmFtZSwgXCJuYW1lXCIsIEhFQURFUl9WQUxJREFUT1JTW3R5cGUobmFtZSldWzBdKQogICAgX3ZhbGlkYXRlX2hlYWRlcl9wYXJ0KHZhbHVlLCBcInZhbHVlXCIsIEhFQURFUl9WQUxJREFUT1JTW3R5cGUodmFsdWUpXVsxXSkKCgpkZWYgX3ZhbGlkYXRlX2hlYWRlcl9wYXJ0KGhlYWRlcl9wYXJ0LCBoZWFkZXJfa2luZCwgdmFsaWRhdG9yKToKICAgIGlmIG5vdCB2YWxpZGF0b3IubWF0Y2goaGVhZGVyX3BhcnQpOgogICAgICAgIHJhaXNlIEludmFsaWRIZWFkZXIoCiAgICAgICAgICAgIGZcIkludmFsaWQgbGVhZGluZyB3aGl0ZXNwYWNlLCByZXNlcnZlZCBjaGFyYWN0ZXIocyksIG9yIHJldHVyblwiCiAgICAgICAgICAgIGZcImNoYXJhY3RlcihzKSBpbiBoZWFkZXIge2hlYWRlcl9raW5kfToge2hlYWRlcl9wYXJ0IXJ9XCIKICAgICAgICApCgoKZGVmIHVybGRlZnJhZ2F1dGgodXJsKToKICAgIFwiXCJcIgogICAgR2l2ZW4gYSB1cmwgcmVtb3ZlIHRoZSBmcmFnbWVudCBhbmQgdGhlIGF1dGhlbnRpY2F0aW9uIHBhcnQuCgogICAgOnJ0eXBlOiBzdHIKICAgIFwiXCJcIgogICAgc2NoZW1lLCBuZXRsb2MsIHBhdGgsIHBhcmFtcywgcXVlcnksIGZyYWdtZW50ID0gdXJscGFyc2UodXJsKQoKICAgICMgc2VlIGZ1bmM6YHByZXBlbmRfc2NoZW1lX2lmX25lZWRlZGAKICAgIGlmIG5vdCBuZXRsb2M6CiAgICAgICAgbmV0bG9jLCBwYXRoID0gcGF0aCwgbmV0bG9jCgogICAgbmV0bG9jID0gbmV0bG9jLnJzcGxpdChcIkBcIiwgMSlbLTFdCgogICAgcmV0dXJuIHVybHVucGFyc2UoKHNjaGVtZSwgbmV0bG9jLCBwYXRoLCBwYXJhbXMsIHF1ZXJ5LCBcIlwiKSkKCgpkZWYgcmV3aW5kX2JvZHkocHJlcGFyZWRfcmVxdWVzdCk6CiAgICBcIlwiXCJNb3ZlIGZpbGUgcG9pbnRlciBiYWNrIHRvIGl0cyByZWNvcmRlZCBzdGFydGluZyBwb3NpdGlvbgogICAgc28gaXQgY2FuIGJlIHJlYWQgYWdhaW4gb24gcmVkaXJlY3QuCiAgICBcIlwiXCIKICAgIGJvZHlfc2VlayA9IGdldGF0dHIocHJlcGFyZWRfcmVxdWVzdC5ib2R5LCBcInNlZWtcIiwgTm9uZSkKICAgIGlmIGJvZHlfc2VlayBpcyBub3QgTm9uZSBhbmQgaXNpbnN0YW5jZSgKICAgICAgICBwcmVwYXJlZF9yZXF1ZXN0Ll9ib2R5X3Bvc2l0aW9uLCBpbnRlZ2VyX3R5cGVzCiAgICApOgogICAgICAgIHRyeToKICAgICAgICAgICAgYm9keV9zZWVrKHByZXBhcmVkX3JlcXVlc3QuX2JvZHlfcG9zaXRpb24pCiAgICAgICAgZXhjZXB0IE9TRXJyb3I6CiAgICAgICAgICAgIHJhaXNlIFVucmV3aW5kYWJsZUJvZHlFcnJvcigKICAgICAgICAgICAgICAgIFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hlbiByZXdpbmRpbmcgcmVxdWVzdCBib2R5IGZvciByZWRpcmVjdC5cIgogICAgICAgICAgICApCiAgICBlbHNlOgogICAgICAgIHJhaXNlIFVucmV3aW5kYWJsZUJvZHlFcnJvcihcIlVuYWJsZSB0byByZXdpbmQgcmVxdWVzdCBib2R5IGZvciByZWRpcmVjdC5cIikKCiIiIgptb2R1bGVfZGljdFsicmVxdWVzdHMiK29zLnNlcCsic3RydWN0dXJlcy5weSJdPSIiIgpcIlwiXCIKcmVxdWVzdHMuc3RydWN0dXJlcwp+fn5+fn5+fn5+fn5+fn5+fn5+CgpEYXRhIHN0cnVjdHVyZXMgdGhhdCBwb3dlciBSZXF1ZXN0cy4KXCJcIlwiCgpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBPcmRlcmVkRGljdAoKZnJvbSAuY29tcGF0IGltcG9ydCBNYXBwaW5nLCBNdXRhYmxlTWFwcGluZwoKCmNsYXNzIENhc2VJbnNlbnNpdGl2ZURpY3QoTXV0YWJsZU1hcHBpbmcpOgogICAgXCJcIlwiQSBjYXNlLWluc2Vuc2l0aXZlIGBgZGljdGBgLWxpa2Ugb2JqZWN0LgoKICAgIEltcGxlbWVudHMgYWxsIG1ldGhvZHMgYW5kIG9wZXJhdGlvbnMgb2YKICAgIGBgTXV0YWJsZU1hcHBpbmdgYCBhcyB3ZWxsIGFzIGRpY3QncyBgYGNvcHlgYC4gQWxzbwogICAgcHJvdmlkZXMgYGBsb3dlcl9pdGVtc2BgLgoKICAgIEFsbCBrZXlzIGFyZSBleHBlY3RlZCB0byBiZSBzdHJpbmdzLiBUaGUgc3RydWN0dXJlIHJlbWVtYmVycyB0aGUKICAgIGNhc2Ugb2YgdGhlIGxhc3Qga2V5IHRvIGJlIHNldCwgYW5kIGBgaXRlcihpbnN0YW5jZSlgYCwKICAgIGBga2V5cygpYGAsIGBgaXRlbXMoKWBgLCBgYGl0ZXJrZXlzKClgYCwgYW5kIGBgaXRlcml0ZW1zKClgYAogICAgd2lsbCBjb250YWluIGNhc2Utc2Vuc2l0aXZlIGtleXMuIEhvd2V2ZXIsIHF1ZXJ5aW5nIGFuZCBjb250YWlucwogICAgdGVzdGluZyBpcyBjYXNlIGluc2Vuc2l0aXZlOjoKCiAgICAgICAgY2lkID0gQ2FzZUluc2Vuc2l0aXZlRGljdCgpCiAgICAgICAgY2lkWydBY2NlcHQnXSA9ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgIGNpZFsnYUNDRVBUJ10gPT0gJ2FwcGxpY2F0aW9uL2pzb24nICAjIFRydWUKICAgICAgICBsaXN0KGNpZCkgPT0gWydBY2NlcHQnXSAgIyBUcnVlCgogICAgRm9yIGV4YW1wbGUsIGBgaGVhZGVyc1snY29udGVudC1lbmNvZGluZyddYGAgd2lsbCByZXR1cm4gdGhlCiAgICB2YWx1ZSBvZiBhIGBgJ0NvbnRlbnQtRW5jb2RpbmcnYGAgcmVzcG9uc2UgaGVhZGVyLCByZWdhcmRsZXNzCiAgICBvZiBob3cgdGhlIGhlYWRlciBuYW1lIHdhcyBvcmlnaW5hbGx5IHN0b3JlZC4KCiAgICBJZiB0aGUgY29uc3RydWN0b3IsIGBgLnVwZGF0ZWBgLCBvciBlcXVhbGl0eSBjb21wYXJpc29uCiAgICBvcGVyYXRpb25zIGFyZSBnaXZlbiBrZXlzIHRoYXQgaGF2ZSBlcXVhbCBgYC5sb3dlcigpYGBzLCB0aGUKICAgIGJlaGF2aW9yIGlzIHVuZGVmaW5lZC4KICAgIFwiXCJcIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkYXRhPU5vbmUsICoqa3dhcmdzKToKICAgICAgICBzZWxmLl9zdG9yZSA9IE9yZGVyZWREaWN0KCkKICAgICAgICBpZiBkYXRhIGlzIE5vbmU6CiAgICAgICAgICAgIGRhdGEgPSB7fQogICAgICAgIHNlbGYudXBkYXRlKGRhdGEsICoqa3dhcmdzKQoKICAgIGRlZiBfX3NldGl0ZW1fXyhzZWxmLCBrZXksIHZhbHVlKToKICAgICAgICAjIFVzZSB0aGUgbG93ZXJjYXNlZCBrZXkgZm9yIGxvb2t1cHMsIGJ1dCBzdG9yZSB0aGUgYWN0dWFsCiAgICAgICAgIyBrZXkgYWxvbmdzaWRlIHRoZSB2YWx1ZS4KICAgICAgICBzZWxmLl9zdG9yZVtrZXkubG93ZXIoKV0gPSAoa2V5LCB2YWx1ZSkKCiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwga2V5KToKICAgICAgICByZXR1cm4gc2VsZi5fc3RvcmVba2V5Lmxvd2VyKCldWzFdCgogICAgZGVmIF9fZGVsaXRlbV9fKHNlbGYsIGtleSk6CiAgICAgICAgZGVsIHNlbGYuX3N0b3JlW2tleS5sb3dlcigpXQoKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICByZXR1cm4gKGNhc2Vka2V5IGZvciBjYXNlZGtleSwgbWFwcGVkdmFsdWUgaW4gc2VsZi5fc3RvcmUudmFsdWVzKCkpCgogICAgZGVmIF9fbGVuX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGxlbihzZWxmLl9zdG9yZSkKCiAgICBkZWYgbG93ZXJfaXRlbXMoc2VsZik6CiAgICAgICAgXCJcIlwiTGlrZSBpdGVyaXRlbXMoKSwgYnV0IHdpdGggYWxsIGxvd2VyY2FzZSBrZXlzLlwiXCJcIgogICAgICAgIHJldHVybiAoKGxvd2Vya2V5LCBrZXl2YWxbMV0pIGZvciAobG93ZXJrZXksIGtleXZhbCkgaW4gc2VsZi5fc3RvcmUuaXRlbXMoKSkKCiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBNYXBwaW5nKToKICAgICAgICAgICAgb3RoZXIgPSBDYXNlSW5zZW5zaXRpdmVEaWN0KG90aGVyKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAogICAgICAgICMgQ29tcGFyZSBpbnNlbnNpdGl2ZWx5CiAgICAgICAgcmV0dXJuIGRpY3Qoc2VsZi5sb3dlcl9pdGVtcygpKSA9PSBkaWN0KG90aGVyLmxvd2VyX2l0ZW1zKCkpCgogICAgIyBDb3B5IGlzIHJlcXVpcmVkCiAgICBkZWYgY29weShzZWxmKToKICAgICAgICByZXR1cm4gQ2FzZUluc2Vuc2l0aXZlRGljdChzZWxmLl9zdG9yZS52YWx1ZXMoKSkKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHN0cihkaWN0KHNlbGYuaXRlbXMoKSkpCgoKY2xhc3MgTG9va3VwRGljdChkaWN0KToKICAgIFwiXCJcIkRpY3Rpb25hcnkgbG9va3VwIG9iamVjdC5cIlwiXCIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgbmFtZT1Ob25lKToKICAgICAgICBzZWxmLm5hbWUgPSBuYW1lCiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygpCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBmXCI8bG9va3VwICd7c2VsZi5uYW1lfSc+XCIKCiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwga2V5KToKICAgICAgICAjIFdlIGFsbG93IGZhbGwtdGhyb3VnaCBoZXJlLCBzbyB2YWx1ZXMgZGVmYXVsdCB0byBOb25lCgogICAgICAgIHJldHVybiBzZWxmLl9fZGljdF9fLmdldChrZXksIE5vbmUpCgogICAgZGVmIGdldChzZWxmLCBrZXksIGRlZmF1bHQ9Tm9uZSk6CiAgICAgICAgcmV0dXJuIHNlbGYuX19kaWN0X18uZ2V0KGtleSwgZGVmYXVsdCkKCiIiIgptb2R1bGVfZGljdFsicmVxdWVzdHMiK29zLnNlcCsiY29va2llcy5weSJdPSIiIgojIDwgaW5jbHVkZSAnZHVtbXlfdGhyZWFkaW5nLnB5JyA+CgpcIlwiXCIKcmVxdWVzdHMuY29va2llcwp+fn5+fn5+fn5+fn5+fn5+CgpDb21wYXRpYmlsaXR5IGNvZGUgdG8gYmUgYWJsZSB0byB1c2UgYGNvb2tpZWxpYi5Db29raWVKYXJgIHdpdGggcmVxdWVzdHMuCgpyZXF1ZXN0cy51dGlscyBpbXBvcnRzIGZyb20gaGVyZSwgc28gYmUgY2FyZWZ1bCB3aXRoIGltcG9ydHMuClwiXCJcIgoKaW1wb3J0IGNhbGVuZGFyCmltcG9ydCBjb3B5CmltcG9ydCB0aW1lCgpmcm9tIC5faW50ZXJuYWxfdXRpbHMgaW1wb3J0IHRvX25hdGl2ZV9zdHJpbmcKZnJvbSAuY29tcGF0IGltcG9ydCBNb3JzZWwsIE11dGFibGVNYXBwaW5nLCBjb29raWVsaWIsIHVybHBhcnNlLCB1cmx1bnBhcnNlCgp0cnk6CiAgICBpbXBvcnQgdGhyZWFkaW5nCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIGltcG9ydCBkdW1teV90aHJlYWRpbmcgYXMgdGhyZWFkaW5nCgoKY2xhc3MgTW9ja1JlcXVlc3Q6CiAgICBcIlwiXCJXcmFwcyBhIGByZXF1ZXN0cy5SZXF1ZXN0YCB0byBtaW1pYyBhIGB1cmxsaWIyLlJlcXVlc3RgLgoKICAgIFRoZSBjb2RlIGluIGBjb29raWVsaWIuQ29va2llSmFyYCBleHBlY3RzIHRoaXMgaW50ZXJmYWNlIGluIG9yZGVyIHRvIGNvcnJlY3RseQogICAgbWFuYWdlIGNvb2tpZSBwb2xpY2llcywgaS5lLiwgZGV0ZXJtaW5lIHdoZXRoZXIgYSBjb29raWUgY2FuIGJlIHNldCwgZ2l2ZW4gdGhlCiAgICBkb21haW5zIG9mIHRoZSByZXF1ZXN0IGFuZCB0aGUgY29va2llLgoKICAgIFRoZSBvcmlnaW5hbCByZXF1ZXN0IG9iamVjdCBpcyByZWFkLW9ubHkuIFRoZSBjbGllbnQgaXMgcmVzcG9uc2libGUgZm9yIGNvbGxlY3RpbmcKICAgIHRoZSBuZXcgaGVhZGVycyB2aWEgYGdldF9uZXdfaGVhZGVycygpYCBhbmQgaW50ZXJwcmV0aW5nIHRoZW0gYXBwcm9wcmlhdGVseS4gWW91CiAgICBwcm9iYWJseSB3YW50IGBnZXRfY29va2llX2hlYWRlcmAsIGRlZmluZWQgYmVsb3cuCiAgICBcIlwiXCIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgcmVxdWVzdCk6CiAgICAgICAgc2VsZi5fciA9IHJlcXVlc3QKICAgICAgICBzZWxmLl9uZXdfaGVhZGVycyA9IHt9CiAgICAgICAgc2VsZi50eXBlID0gdXJscGFyc2Uoc2VsZi5fci51cmwpLnNjaGVtZQoKICAgIGRlZiBnZXRfdHlwZShzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi50eXBlCgogICAgZGVmIGdldF9ob3N0KHNlbGYpOgogICAgICAgIHJldHVybiB1cmxwYXJzZShzZWxmLl9yLnVybCkubmV0bG9jCgogICAgZGVmIGdldF9vcmlnaW5fcmVxX2hvc3Qoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuZ2V0X2hvc3QoKQoKICAgIGRlZiBnZXRfZnVsbF91cmwoc2VsZik6CiAgICAgICAgIyBPbmx5IHJldHVybiB0aGUgcmVzcG9uc2UncyBVUkwgaWYgdGhlIHVzZXIgaGFkbid0IHNldCB0aGUgSG9zdAogICAgICAgICMgaGVhZGVyCiAgICAgICAgaWYgbm90IHNlbGYuX3IuaGVhZGVycy5nZXQoXCJIb3N0XCIpOgogICAgICAgICAgICByZXR1cm4gc2VsZi5fci51cmwKICAgICAgICAjIElmIHRoZXkgZGlkIHNldCBpdCwgcmV0cmlldmUgaXQgYW5kIHJlY29uc3RydWN0IHRoZSBleHBlY3RlZCBkb21haW4KICAgICAgICBob3N0ID0gdG9fbmF0aXZlX3N0cmluZyhzZWxmLl9yLmhlYWRlcnNbXCJIb3N0XCJdLCBlbmNvZGluZz1cInV0Zi04XCIpCiAgICAgICAgcGFyc2VkID0gdXJscGFyc2Uoc2VsZi5fci51cmwpCiAgICAgICAgIyBSZWNvbnN0cnVjdCB0aGUgVVJMIGFzIHdlIGV4cGVjdCBpdAogICAgICAgIHJldHVybiB1cmx1bnBhcnNlKAogICAgICAgICAgICBbCiAgICAgICAgICAgICAgICBwYXJzZWQuc2NoZW1lLAogICAgICAgICAgICAgICAgaG9zdCwKICAgICAgICAgICAgICAgIHBhcnNlZC5wYXRoLAogICAgICAgICAgICAgICAgcGFyc2VkLnBhcmFtcywKICAgICAgICAgICAgICAgIHBhcnNlZC5xdWVyeSwKICAgICAgICAgICAgICAgIHBhcnNlZC5mcmFnbWVudCwKICAgICAgICAgICAgXQogICAgICAgICkKCiAgICBkZWYgaXNfdW52ZXJpZmlhYmxlKHNlbGYpOgogICAgICAgIHJldHVybiBUcnVlCgogICAgZGVmIGhhc19oZWFkZXIoc2VsZiwgbmFtZSk6CiAgICAgICAgcmV0dXJuIG5hbWUgaW4gc2VsZi5fci5oZWFkZXJzIG9yIG5hbWUgaW4gc2VsZi5fbmV3X2hlYWRlcnMKCiAgICBkZWYgZ2V0X2hlYWRlcihzZWxmLCBuYW1lLCBkZWZhdWx0PU5vbmUpOgogICAgICAgIHJldHVybiBzZWxmLl9yLmhlYWRlcnMuZ2V0KG5hbWUsIHNlbGYuX25ld19oZWFkZXJzLmdldChuYW1lLCBkZWZhdWx0KSkKCiAgICBkZWYgYWRkX2hlYWRlcihzZWxmLCBrZXksIHZhbCk6CiAgICAgICAgXCJcIlwiY29va2llbGliIGhhcyBubyBsZWdpdGltYXRlIHVzZSBmb3IgdGhpcyBtZXRob2Q7IGFkZCBpdCBiYWNrIGlmIHlvdSBmaW5kIG9uZS5cIlwiXCIKICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yKAogICAgICAgICAgICBcIkNvb2tpZSBoZWFkZXJzIHNob3VsZCBiZSBhZGRlZCB3aXRoIGFkZF91bnJlZGlyZWN0ZWRfaGVhZGVyKClcIgogICAgICAgICkKCiAgICBkZWYgYWRkX3VucmVkaXJlY3RlZF9oZWFkZXIoc2VsZiwgbmFtZSwgdmFsdWUpOgogICAgICAgIHNlbGYuX25ld19oZWFkZXJzW25hbWVdID0gdmFsdWUKCiAgICBkZWYgZ2V0X25ld19oZWFkZXJzKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLl9uZXdfaGVhZGVycwoKICAgIEBwcm9wZXJ0eQogICAgZGVmIHVudmVyaWZpYWJsZShzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5pc191bnZlcmlmaWFibGUoKQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIG9yaWdpbl9yZXFfaG9zdChzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5nZXRfb3JpZ2luX3JlcV9ob3N0KCkKCiAgICBAcHJvcGVydHkKICAgIGRlZiBob3N0KHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmdldF9ob3N0KCkKCgpjbGFzcyBNb2NrUmVzcG9uc2U6CiAgICBcIlwiXCJXcmFwcyBhIGBodHRwbGliLkhUVFBNZXNzYWdlYCB0byBtaW1pYyBhIGB1cmxsaWIuYWRkaW5mb3VybGAuCgogICAgLi4ud2hhdD8gQmFzaWNhbGx5LCBleHBvc2UgdGhlIHBhcnNlZCBIVFRQIGhlYWRlcnMgZnJvbSB0aGUgc2VydmVyIHJlc3BvbnNlCiAgICB0aGUgd2F5IGBjb29raWVsaWJgIGV4cGVjdHMgdG8gc2VlIHRoZW0uCiAgICBcIlwiXCIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgaGVhZGVycyk6CiAgICAgICAgXCJcIlwiTWFrZSBhIE1vY2tSZXNwb25zZSBmb3IgYGNvb2tpZWxpYmAgdG8gcmVhZC4KCiAgICAgICAgOnBhcmFtIGhlYWRlcnM6IGEgaHR0cGxpYi5IVFRQTWVzc2FnZSBvciBhbmFsb2dvdXMgY2FycnlpbmcgdGhlIGhlYWRlcnMKICAgICAgICBcIlwiXCIKICAgICAgICBzZWxmLl9oZWFkZXJzID0gaGVhZGVycwoKICAgIGRlZiBpbmZvKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLl9oZWFkZXJzCgogICAgZGVmIGdldGhlYWRlcnMoc2VsZiwgbmFtZSk6CiAgICAgICAgc2VsZi5faGVhZGVycy5nZXRoZWFkZXJzKG5hbWUpCgoKZGVmIGV4dHJhY3RfY29va2llc190b19qYXIoamFyLCByZXF1ZXN0LCByZXNwb25zZSk6CiAgICBcIlwiXCJFeHRyYWN0IHRoZSBjb29raWVzIGZyb20gdGhlIHJlc3BvbnNlIGludG8gYSBDb29raWVKYXIuCgogICAgOnBhcmFtIGphcjogY29va2llbGliLkNvb2tpZUphciAobm90IG5lY2Vzc2FyaWx5IGEgUmVxdWVzdHNDb29raWVKYXIpCiAgICA6cGFyYW0gcmVxdWVzdDogb3VyIG93biByZXF1ZXN0cy5SZXF1ZXN0IG9iamVjdAogICAgOnBhcmFtIHJlc3BvbnNlOiB1cmxsaWIzLkhUVFBSZXNwb25zZSBvYmplY3QKICAgIFwiXCJcIgogICAgaWYgbm90IChoYXNhdHRyKHJlc3BvbnNlLCBcIl9vcmlnaW5hbF9yZXNwb25zZVwiKSBhbmQgcmVzcG9uc2UuX29yaWdpbmFsX3Jlc3BvbnNlKToKICAgICAgICByZXR1cm4KICAgICMgdGhlIF9vcmlnaW5hbF9yZXNwb25zZSBmaWVsZCBpcyB0aGUgd3JhcHBlZCBodHRwbGliLkhUVFBSZXNwb25zZSBvYmplY3QsCiAgICByZXEgPSBNb2NrUmVxdWVzdChyZXF1ZXN0KQogICAgIyBwdWxsIG91dCB0aGUgSFRUUE1lc3NhZ2Ugd2l0aCB0aGUgaGVhZGVycyBhbmQgcHV0IGl0IGluIHRoZSBtb2NrOgogICAgcmVzID0gTW9ja1Jlc3BvbnNlKHJlc3BvbnNlLl9vcmlnaW5hbF9yZXNwb25zZS5tc2cpCiAgICBqYXIuZXh0cmFjdF9jb29raWVzKHJlcywgcmVxKQoKCmRlZiBnZXRfY29va2llX2hlYWRlcihqYXIsIHJlcXVlc3QpOgogICAgXCJcIlwiCiAgICBQcm9kdWNlIGFuIGFwcHJvcHJpYXRlIENvb2tpZSBoZWFkZXIgc3RyaW5nIHRvIGJlIHNlbnQgd2l0aCBgcmVxdWVzdGAsIG9yIE5vbmUuCgogICAgOnJ0eXBlOiBzdHIKICAgIFwiXCJcIgogICAgciA9IE1vY2tSZXF1ZXN0KHJlcXVlc3QpCiAgICBqYXIuYWRkX2Nvb2tpZV9oZWFkZXIocikKICAgIHJldHVybiByLmdldF9uZXdfaGVhZGVycygpLmdldChcIkNvb2tpZVwiKQoKCmRlZiByZW1vdmVfY29va2llX2J5X25hbWUoY29va2llamFyLCBuYW1lLCBkb21haW49Tm9uZSwgcGF0aD1Ob25lKToKICAgIFwiXCJcIlVuc2V0cyBhIGNvb2tpZSBieSBuYW1lLCBieSBkZWZhdWx0IG92ZXIgYWxsIGRvbWFpbnMgYW5kIHBhdGhzLgoKICAgIFdyYXBzIENvb2tpZUphci5jbGVhcigpLCBpcyBPKG4pLgogICAgXCJcIlwiCiAgICBjbGVhcmFibGVzID0gW10KICAgIGZvciBjb29raWUgaW4gY29va2llamFyOgogICAgICAgIGlmIGNvb2tpZS5uYW1lICE9IG5hbWU6CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgaWYgZG9tYWluIGlzIG5vdCBOb25lIGFuZCBkb21haW4gIT0gY29va2llLmRvbWFpbjoKICAgICAgICAgICAgY29udGludWUKICAgICAgICBpZiBwYXRoIGlzIG5vdCBOb25lIGFuZCBwYXRoICE9IGNvb2tpZS5wYXRoOgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIGNsZWFyYWJsZXMuYXBwZW5kKChjb29raWUuZG9tYWluLCBjb29raWUucGF0aCwgY29va2llLm5hbWUpKQoKICAgIGZvciBkb21haW4sIHBhdGgsIG5hbWUgaW4gY2xlYXJhYmxlczoKICAgICAgICBjb29raWVqYXIuY2xlYXIoZG9tYWluLCBwYXRoLCBuYW1lKQoKCmNsYXNzIENvb2tpZUNvbmZsaWN0RXJyb3IoUnVudGltZUVycm9yKToKICAgIFwiXCJcIlRoZXJlIGFyZSB0d28gY29va2llcyB0aGF0IG1lZXQgdGhlIGNyaXRlcmlhIHNwZWNpZmllZCBpbiB0aGUgY29va2llIGphci4KICAgIFVzZSAuZ2V0IGFuZCAuc2V0IGFuZCBpbmNsdWRlIGRvbWFpbiBhbmQgcGF0aCBhcmdzIGluIG9yZGVyIHRvIGJlIG1vcmUgc3BlY2lmaWMuCiAgICBcIlwiXCIKCgpjbGFzcyBSZXF1ZXN0c0Nvb2tpZUphcihjb29raWVsaWIuQ29va2llSmFyLCBNdXRhYmxlTWFwcGluZyk6CiAgICBcIlwiXCJDb21wYXRpYmlsaXR5IGNsYXNzOyBpcyBhIGNvb2tpZWxpYi5Db29raWVKYXIsIGJ1dCBleHBvc2VzIGEgZGljdAogICAgaW50ZXJmYWNlLgoKICAgIFRoaXMgaXMgdGhlIENvb2tpZUphciB3ZSBjcmVhdGUgYnkgZGVmYXVsdCBmb3IgcmVxdWVzdHMgYW5kIHNlc3Npb25zIHRoYXQKICAgIGRvbid0IHNwZWNpZnkgb25lLCBzaW5jZSBzb21lIGNsaWVudHMgbWF5IGV4cGVjdCByZXNwb25zZS5jb29raWVzIGFuZAogICAgc2Vzc2lvbi5jb29raWVzIHRvIHN1cHBvcnQgZGljdCBvcGVyYXRpb25zLgoKICAgIFJlcXVlc3RzIGRvZXMgbm90IHVzZSB0aGUgZGljdCBpbnRlcmZhY2UgaW50ZXJuYWxseTsgaXQncyBqdXN0IGZvcgogICAgY29tcGF0aWJpbGl0eSB3aXRoIGV4dGVybmFsIGNsaWVudCBjb2RlLiBBbGwgcmVxdWVzdHMgY29kZSBzaG91bGQgd29yawogICAgb3V0IG9mIHRoZSBib3ggd2l0aCBleHRlcm5hbGx5IHByb3ZpZGVkIGluc3RhbmNlcyBvZiBgYENvb2tpZUphcmBgLCBlLmcuCiAgICBgYExXUENvb2tpZUphcmBgIGFuZCBgYEZpbGVDb29raWVKYXJgYC4KCiAgICBVbmxpa2UgYSByZWd1bGFyIENvb2tpZUphciwgdGhpcyBjbGFzcyBpcyBwaWNrbGVhYmxlLgoKICAgIC4uIHdhcm5pbmc6OiBkaWN0aW9uYXJ5IG9wZXJhdGlvbnMgdGhhdCBhcmUgbm9ybWFsbHkgTygxKSBtYXkgYmUgTyhuKS4KICAgIFwiXCJcIgoKICAgIGRlZiBnZXQoc2VsZiwgbmFtZSwgZGVmYXVsdD1Ob25lLCBkb21haW49Tm9uZSwgcGF0aD1Ob25lKToKICAgICAgICBcIlwiXCJEaWN0LWxpa2UgZ2V0KCkgdGhhdCBhbHNvIHN1cHBvcnRzIG9wdGlvbmFsIGRvbWFpbiBhbmQgcGF0aCBhcmdzIGluCiAgICAgICAgb3JkZXIgdG8gcmVzb2x2ZSBuYW1pbmcgY29sbGlzaW9ucyBmcm9tIHVzaW5nIG9uZSBjb29raWUgamFyIG92ZXIKICAgICAgICBtdWx0aXBsZSBkb21haW5zLgoKICAgICAgICAuLiB3YXJuaW5nOjogb3BlcmF0aW9uIGlzIE8obiksIG5vdCBPKDEpLgogICAgICAgIFwiXCJcIgogICAgICAgIHRyeToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2ZpbmRfbm9fZHVwbGljYXRlcyhuYW1lLCBkb21haW4sIHBhdGgpCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICByZXR1cm4gZGVmYXVsdAoKICAgIGRlZiBzZXQoc2VsZiwgbmFtZSwgdmFsdWUsICoqa3dhcmdzKToKICAgICAgICBcIlwiXCJEaWN0LWxpa2Ugc2V0KCkgdGhhdCBhbHNvIHN1cHBvcnRzIG9wdGlvbmFsIGRvbWFpbiBhbmQgcGF0aCBhcmdzIGluCiAgICAgICAgb3JkZXIgdG8gcmVzb2x2ZSBuYW1pbmcgY29sbGlzaW9ucyBmcm9tIHVzaW5nIG9uZSBjb29raWUgamFyIG92ZXIKICAgICAgICBtdWx0aXBsZSBkb21haW5zLgogICAgICAgIFwiXCJcIgogICAgICAgICMgc3VwcG9ydCBjbGllbnQgY29kZSB0aGF0IHVuc2V0cyBjb29raWVzIGJ5IGFzc2lnbm1lbnQgb2YgYSBOb25lIHZhbHVlOgogICAgICAgIGlmIHZhbHVlIGlzIE5vbmU6CiAgICAgICAgICAgIHJlbW92ZV9jb29raWVfYnlfbmFtZSgKICAgICAgICAgICAgICAgIHNlbGYsIG5hbWUsIGRvbWFpbj1rd2FyZ3MuZ2V0KFwiZG9tYWluXCIpLCBwYXRoPWt3YXJncy5nZXQoXCJwYXRoXCIpCiAgICAgICAgICAgICkKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGlmIGlzaW5zdGFuY2UodmFsdWUsIE1vcnNlbCk6CiAgICAgICAgICAgIGMgPSBtb3JzZWxfdG9fY29va2llKHZhbHVlKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGMgPSBjcmVhdGVfY29va2llKG5hbWUsIHZhbHVlLCAqKmt3YXJncykKICAgICAgICBzZWxmLnNldF9jb29raWUoYykKICAgICAgICByZXR1cm4gYwoKICAgIGRlZiBpdGVya2V5cyhzZWxmKToKICAgICAgICBcIlwiXCJEaWN0LWxpa2UgaXRlcmtleXMoKSB0aGF0IHJldHVybnMgYW4gaXRlcmF0b3Igb2YgbmFtZXMgb2YgY29va2llcwogICAgICAgIGZyb20gdGhlIGphci4KCiAgICAgICAgLi4gc2VlYWxzbzo6IGl0ZXJ2YWx1ZXMoKSBhbmQgaXRlcml0ZW1zKCkuCiAgICAgICAgXCJcIlwiCiAgICAgICAgZm9yIGNvb2tpZSBpbiBpdGVyKHNlbGYpOgogICAgICAgICAgICB5aWVsZCBjb29raWUubmFtZQoKICAgIGRlZiBrZXlzKHNlbGYpOgogICAgICAgIFwiXCJcIkRpY3QtbGlrZSBrZXlzKCkgdGhhdCByZXR1cm5zIGEgbGlzdCBvZiBuYW1lcyBvZiBjb29raWVzIGZyb20gdGhlCiAgICAgICAgamFyLgoKICAgICAgICAuLiBzZWVhbHNvOjogdmFsdWVzKCkgYW5kIGl0ZW1zKCkuCiAgICAgICAgXCJcIlwiCiAgICAgICAgcmV0dXJuIGxpc3Qoc2VsZi5pdGVya2V5cygpKQoKICAgIGRlZiBpdGVydmFsdWVzKHNlbGYpOgogICAgICAgIFwiXCJcIkRpY3QtbGlrZSBpdGVydmFsdWVzKCkgdGhhdCByZXR1cm5zIGFuIGl0ZXJhdG9yIG9mIHZhbHVlcyBvZiBjb29raWVzCiAgICAgICAgZnJvbSB0aGUgamFyLgoKICAgICAgICAuLiBzZWVhbHNvOjogaXRlcmtleXMoKSBhbmQgaXRlcml0ZW1zKCkuCiAgICAgICAgXCJcIlwiCiAgICAgICAgZm9yIGNvb2tpZSBpbiBpdGVyKHNlbGYpOgogICAgICAgICAgICB5aWVsZCBjb29raWUudmFsdWUKCiAgICBkZWYgdmFsdWVzKHNlbGYpOgogICAgICAgIFwiXCJcIkRpY3QtbGlrZSB2YWx1ZXMoKSB0aGF0IHJldHVybnMgYSBsaXN0IG9mIHZhbHVlcyBvZiBjb29raWVzIGZyb20gdGhlCiAgICAgICAgamFyLgoKICAgICAgICAuLiBzZWVhbHNvOjoga2V5cygpIGFuZCBpdGVtcygpLgogICAgICAgIFwiXCJcIgogICAgICAgIHJldHVybiBsaXN0KHNlbGYuaXRlcnZhbHVlcygpKQoKICAgIGRlZiBpdGVyaXRlbXMoc2VsZik6CiAgICAgICAgXCJcIlwiRGljdC1saWtlIGl0ZXJpdGVtcygpIHRoYXQgcmV0dXJucyBhbiBpdGVyYXRvciBvZiBuYW1lLXZhbHVlIHR1cGxlcwogICAgICAgIGZyb20gdGhlIGphci4KCiAgICAgICAgLi4gc2VlYWxzbzo6IGl0ZXJrZXlzKCkgYW5kIGl0ZXJ2YWx1ZXMoKS4KICAgICAgICBcIlwiXCIKICAgICAgICBmb3IgY29va2llIGluIGl0ZXIoc2VsZik6CiAgICAgICAgICAgIHlpZWxkIGNvb2tpZS5uYW1lLCBjb29raWUudmFsdWUKCiAgICBkZWYgaXRlbXMoc2VsZik6CiAgICAgICAgXCJcIlwiRGljdC1saWtlIGl0ZW1zKCkgdGhhdCByZXR1cm5zIGEgbGlzdCBvZiBuYW1lLXZhbHVlIHR1cGxlcyBmcm9tIHRoZQogICAgICAgIGphci4gQWxsb3dzIGNsaWVudC1jb2RlIHRvIGNhbGwgYGBkaWN0KFJlcXVlc3RzQ29va2llSmFyKWBgIGFuZCBnZXQgYQogICAgICAgIHZhbmlsbGEgcHl0aG9uIGRpY3Qgb2Yga2V5IHZhbHVlIHBhaXJzLgoKICAgICAgICAuLiBzZWVhbHNvOjoga2V5cygpIGFuZCB2YWx1ZXMoKS4KICAgICAgICBcIlwiXCIKICAgICAgICByZXR1cm4gbGlzdChzZWxmLml0ZXJpdGVtcygpKQoKICAgIGRlZiBsaXN0X2RvbWFpbnMoc2VsZik6CiAgICAgICAgXCJcIlwiVXRpbGl0eSBtZXRob2QgdG8gbGlzdCBhbGwgdGhlIGRvbWFpbnMgaW4gdGhlIGphci5cIlwiXCIKICAgICAgICBkb21haW5zID0gW10KICAgICAgICBmb3IgY29va2llIGluIGl0ZXIoc2VsZik6CiAgICAgICAgICAgIGlmIGNvb2tpZS5kb21haW4gbm90IGluIGRvbWFpbnM6CiAgICAgICAgICAgICAgICBkb21haW5zLmFwcGVuZChjb29raWUuZG9tYWluKQogICAgICAgIHJldHVybiBkb21haW5zCgogICAgZGVmIGxpc3RfcGF0aHMoc2VsZik6CiAgICAgICAgXCJcIlwiVXRpbGl0eSBtZXRob2QgdG8gbGlzdCBhbGwgdGhlIHBhdGhzIGluIHRoZSBqYXIuXCJcIlwiCiAgICAgICAgcGF0aHMgPSBbXQogICAgICAgIGZvciBjb29raWUgaW4gaXRlcihzZWxmKToKICAgICAgICAgICAgaWYgY29va2llLnBhdGggbm90IGluIHBhdGhzOgogICAgICAgICAgICAgICAgcGF0aHMuYXBwZW5kKGNvb2tpZS5wYXRoKQogICAgICAgIHJldHVybiBwYXRocwoKICAgIGRlZiBtdWx0aXBsZV9kb21haW5zKHNlbGYpOgogICAgICAgIFwiXCJcIlJldHVybnMgVHJ1ZSBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgZG9tYWlucyBpbiB0aGUgamFyLgogICAgICAgIFJldHVybnMgRmFsc2Ugb3RoZXJ3aXNlLgoKICAgICAgICA6cnR5cGU6IGJvb2wKICAgICAgICBcIlwiXCIKICAgICAgICBkb21haW5zID0gW10KICAgICAgICBmb3IgY29va2llIGluIGl0ZXIoc2VsZik6CiAgICAgICAgICAgIGlmIGNvb2tpZS5kb21haW4gaXMgbm90IE5vbmUgYW5kIGNvb2tpZS5kb21haW4gaW4gZG9tYWluczoKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIGRvbWFpbnMuYXBwZW5kKGNvb2tpZS5kb21haW4pCiAgICAgICAgcmV0dXJuIEZhbHNlICAjIHRoZXJlIGlzIG9ubHkgb25lIGRvbWFpbiBpbiBqYXIKCiAgICBkZWYgZ2V0X2RpY3Qoc2VsZiwgZG9tYWluPU5vbmUsIHBhdGg9Tm9uZSk6CiAgICAgICAgXCJcIlwiVGFrZXMgYXMgYW4gYXJndW1lbnQgYW4gb3B0aW9uYWwgZG9tYWluIGFuZCBwYXRoIGFuZCByZXR1cm5zIGEgcGxhaW4KICAgICAgICBvbGQgUHl0aG9uIGRpY3Qgb2YgbmFtZS12YWx1ZSBwYWlycyBvZiBjb29raWVzIHRoYXQgbWVldCB0aGUKICAgICAgICByZXF1aXJlbWVudHMuCgogICAgICAgIDpydHlwZTogZGljdAogICAgICAgIFwiXCJcIgogICAgICAgIGRpY3Rpb25hcnkgPSB7fQogICAgICAgIGZvciBjb29raWUgaW4gaXRlcihzZWxmKToKICAgICAgICAgICAgaWYgKGRvbWFpbiBpcyBOb25lIG9yIGNvb2tpZS5kb21haW4gPT0gZG9tYWluKSBhbmQgKAogICAgICAgICAgICAgICAgcGF0aCBpcyBOb25lIG9yIGNvb2tpZS5wYXRoID09IHBhdGgKICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgIGRpY3Rpb25hcnlbY29va2llLm5hbWVdID0gY29va2llLnZhbHVlCiAgICAgICAgcmV0dXJuIGRpY3Rpb25hcnkKCiAgICBkZWYgX19jb250YWluc19fKHNlbGYsIG5hbWUpOgogICAgICAgIHRyeToKICAgICAgICAgICAgcmV0dXJuIHN1cGVyKCkuX19jb250YWluc19fKG5hbWUpCiAgICAgICAgZXhjZXB0IENvb2tpZUNvbmZsaWN0RXJyb3I6CiAgICAgICAgICAgIHJldHVybiBUcnVlCgogICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIG5hbWUpOgogICAgICAgIFwiXCJcIkRpY3QtbGlrZSBfX2dldGl0ZW1fXygpIGZvciBjb21wYXRpYmlsaXR5IHdpdGggY2xpZW50IGNvZGUuIFRocm93cwogICAgICAgIGV4Y2VwdGlvbiBpZiB0aGVyZSBhcmUgbW9yZSB0aGFuIG9uZSBjb29raWUgd2l0aCBuYW1lLiBJbiB0aGF0IGNhc2UsCiAgICAgICAgdXNlIHRoZSBtb3JlIGV4cGxpY2l0IGdldCgpIG1ldGhvZCBpbnN0ZWFkLgoKICAgICAgICAuLiB3YXJuaW5nOjogb3BlcmF0aW9uIGlzIE8obiksIG5vdCBPKDEpLgogICAgICAgIFwiXCJcIgogICAgICAgIHJldHVybiBzZWxmLl9maW5kX25vX2R1cGxpY2F0ZXMobmFtZSkKCiAgICBkZWYgX19zZXRpdGVtX18oc2VsZiwgbmFtZSwgdmFsdWUpOgogICAgICAgIFwiXCJcIkRpY3QtbGlrZSBfX3NldGl0ZW1fXyBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIGNsaWVudCBjb2RlLiBUaHJvd3MKICAgICAgICBleGNlcHRpb24gaWYgdGhlcmUgaXMgYWxyZWFkeSBhIGNvb2tpZSBvZiB0aGF0IG5hbWUgaW4gdGhlIGphci4gSW4gdGhhdAogICAgICAgIGNhc2UsIHVzZSB0aGUgbW9yZSBleHBsaWNpdCBzZXQoKSBtZXRob2QgaW5zdGVhZC4KICAgICAgICBcIlwiXCIKICAgICAgICBzZWxmLnNldChuYW1lLCB2YWx1ZSkKCiAgICBkZWYgX19kZWxpdGVtX18oc2VsZiwgbmFtZSk6CiAgICAgICAgXCJcIlwiRGVsZXRlcyBhIGNvb2tpZSBnaXZlbiBhIG5hbWUuIFdyYXBzIGBgY29va2llbGliLkNvb2tpZUphcmBgJ3MKICAgICAgICBgYHJlbW92ZV9jb29raWVfYnlfbmFtZSgpYGAuCiAgICAgICAgXCJcIlwiCiAgICAgICAgcmVtb3ZlX2Nvb2tpZV9ieV9uYW1lKHNlbGYsIG5hbWUpCgogICAgZGVmIHNldF9jb29raWUoc2VsZiwgY29va2llLCAqYXJncywgKiprd2FyZ3MpOgogICAgICAgIGlmICgKICAgICAgICAgICAgaGFzYXR0cihjb29raWUudmFsdWUsIFwic3RhcnRzd2l0aFwiKQogICAgICAgICAgICBhbmQgY29va2llLnZhbHVlLnN0YXJ0c3dpdGgoJ1wiJykKICAgICAgICAgICAgYW5kIGNvb2tpZS52YWx1ZS5lbmRzd2l0aCgnXCInKQogICAgICAgICk6CiAgICAgICAgICAgIGNvb2tpZS52YWx1ZSA9IGNvb2tpZS52YWx1ZS5yZXBsYWNlKCdcXFxcXCInLCBcIlwiKQogICAgICAgIHJldHVybiBzdXBlcigpLnNldF9jb29raWUoY29va2llLCAqYXJncywgKiprd2FyZ3MpCgogICAgZGVmIHVwZGF0ZShzZWxmLCBvdGhlcik6CiAgICAgICAgXCJcIlwiVXBkYXRlcyB0aGlzIGphciB3aXRoIGNvb2tpZXMgZnJvbSBhbm90aGVyIENvb2tpZUphciBvciBkaWN0LWxpa2VcIlwiXCIKICAgICAgICBpZiBpc2luc3RhbmNlKG90aGVyLCBjb29raWVsaWIuQ29va2llSmFyKToKICAgICAgICAgICAgZm9yIGNvb2tpZSBpbiBvdGhlcjoKICAgICAgICAgICAgICAgIHNlbGYuc2V0X2Nvb2tpZShjb3B5LmNvcHkoY29va2llKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzdXBlcigpLnVwZGF0ZShvdGhlcikKCiAgICBkZWYgX2ZpbmQoc2VsZiwgbmFtZSwgZG9tYWluPU5vbmUsIHBhdGg9Tm9uZSk6CiAgICAgICAgXCJcIlwiUmVxdWVzdHMgdXNlcyB0aGlzIG1ldGhvZCBpbnRlcm5hbGx5IHRvIGdldCBjb29raWUgdmFsdWVzLgoKICAgICAgICBJZiB0aGVyZSBhcmUgY29uZmxpY3RpbmcgY29va2llcywgX2ZpbmQgYXJiaXRyYXJpbHkgY2hvb3NlcyBvbmUuCiAgICAgICAgU2VlIF9maW5kX25vX2R1cGxpY2F0ZXMgaWYgeW91IHdhbnQgYW4gZXhjZXB0aW9uIHRocm93biBpZiB0aGVyZSBhcmUKICAgICAgICBjb25mbGljdGluZyBjb29raWVzLgoKICAgICAgICA6cGFyYW0gbmFtZTogYSBzdHJpbmcgY29udGFpbmluZyBuYW1lIG9mIGNvb2tpZQogICAgICAgIDpwYXJhbSBkb21haW46IChvcHRpb25hbCkgc3RyaW5nIGNvbnRhaW5pbmcgZG9tYWluIG9mIGNvb2tpZQogICAgICAgIDpwYXJhbSBwYXRoOiAob3B0aW9uYWwpIHN0cmluZyBjb250YWluaW5nIHBhdGggb2YgY29va2llCiAgICAgICAgOnJldHVybjogY29va2llLnZhbHVlCiAgICAgICAgXCJcIlwiCiAgICAgICAgZm9yIGNvb2tpZSBpbiBpdGVyKHNlbGYpOgogICAgICAgICAgICBpZiBjb29raWUubmFtZSA9PSBuYW1lOgogICAgICAgICAgICAgICAgaWYgZG9tYWluIGlzIE5vbmUgb3IgY29va2llLmRvbWFpbiA9PSBkb21haW46CiAgICAgICAgICAgICAgICAgICAgaWYgcGF0aCBpcyBOb25lIG9yIGNvb2tpZS5wYXRoID09IHBhdGg6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb29raWUudmFsdWUKCiAgICAgICAgcmFpc2UgS2V5RXJyb3IoZlwibmFtZT17bmFtZSFyfSwgZG9tYWluPXtkb21haW4hcn0sIHBhdGg9e3BhdGghcn1cIikKCiAgICBkZWYgX2ZpbmRfbm9fZHVwbGljYXRlcyhzZWxmLCBuYW1lLCBkb21haW49Tm9uZSwgcGF0aD1Ob25lKToKICAgICAgICBcIlwiXCJCb3RoIGBgX19nZXRfaXRlbV9fYGAgYW5kIGBgZ2V0YGAgY2FsbCB0aGlzIGZ1bmN0aW9uOiBpdCdzIG5ldmVyCiAgICAgICAgdXNlZCBlbHNld2hlcmUgaW4gUmVxdWVzdHMuCgogICAgICAgIDpwYXJhbSBuYW1lOiBhIHN0cmluZyBjb250YWluaW5nIG5hbWUgb2YgY29va2llCiAgICAgICAgOnBhcmFtIGRvbWFpbjogKG9wdGlvbmFsKSBzdHJpbmcgY29udGFpbmluZyBkb21haW4gb2YgY29va2llCiAgICAgICAgOnBhcmFtIHBhdGg6IChvcHRpb25hbCkgc3RyaW5nIGNvbnRhaW5pbmcgcGF0aCBvZiBjb29raWUKICAgICAgICA6cmFpc2VzIEtleUVycm9yOiBpZiBjb29raWUgaXMgbm90IGZvdW5kCiAgICAgICAgOnJhaXNlcyBDb29raWVDb25mbGljdEVycm9yOiBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgY29va2llcwogICAgICAgICAgICB0aGF0IG1hdGNoIG5hbWUgYW5kIG9wdGlvbmFsbHkgZG9tYWluIGFuZCBwYXRoCiAgICAgICAgOnJldHVybjogY29va2llLnZhbHVlCiAgICAgICAgXCJcIlwiCiAgICAgICAgdG9SZXR1cm4gPSBOb25lCiAgICAgICAgZm9yIGNvb2tpZSBpbiBpdGVyKHNlbGYpOgogICAgICAgICAgICBpZiBjb29raWUubmFtZSA9PSBuYW1lOgogICAgICAgICAgICAgICAgaWYgZG9tYWluIGlzIE5vbmUgb3IgY29va2llLmRvbWFpbiA9PSBkb21haW46CiAgICAgICAgICAgICAgICAgICAgaWYgcGF0aCBpcyBOb25lIG9yIGNvb2tpZS5wYXRoID09IHBhdGg6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRvUmV0dXJuIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgY29va2llcyB0aGF0IG1lZXQgcGFzc2VkIGluIGNyaXRlcmlhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBDb29raWVDb25mbGljdEVycm9yKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZcIlRoZXJlIGFyZSBtdWx0aXBsZSBjb29raWVzIHdpdGggbmFtZSwge25hbWUhcn1cIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAjIHdlIHdpbGwgZXZlbnR1YWxseSByZXR1cm4gdGhpcyBhcyBsb25nIGFzIG5vIGNvb2tpZSBjb25mbGljdAogICAgICAgICAgICAgICAgICAgICAgICB0b1JldHVybiA9IGNvb2tpZS52YWx1ZQoKICAgICAgICBpZiB0b1JldHVybjoKICAgICAgICAgICAgcmV0dXJuIHRvUmV0dXJuCiAgICAgICAgcmFpc2UgS2V5RXJyb3IoZlwibmFtZT17bmFtZSFyfSwgZG9tYWluPXtkb21haW4hcn0sIHBhdGg9e3BhdGghcn1cIikKCiAgICBkZWYgX19nZXRzdGF0ZV9fKHNlbGYpOgogICAgICAgIFwiXCJcIlVubGlrZSBhIG5vcm1hbCBDb29raWVKYXIsIHRoaXMgY2xhc3MgaXMgcGlja2xlYWJsZS5cIlwiXCIKICAgICAgICBzdGF0ZSA9IHNlbGYuX19kaWN0X18uY29weSgpCiAgICAgICAgIyByZW1vdmUgdGhlIHVucGlja2xlYWJsZSBSTG9jayBvYmplY3QKICAgICAgICBzdGF0ZS5wb3AoXCJfY29va2llc19sb2NrXCIpCiAgICAgICAgcmV0dXJuIHN0YXRlCgogICAgZGVmIF9fc2V0c3RhdGVfXyhzZWxmLCBzdGF0ZSk6CiAgICAgICAgXCJcIlwiVW5saWtlIGEgbm9ybWFsIENvb2tpZUphciwgdGhpcyBjbGFzcyBpcyBwaWNrbGVhYmxlLlwiXCJcIgogICAgICAgIHNlbGYuX19kaWN0X18udXBkYXRlKHN0YXRlKQogICAgICAgIGlmIFwiX2Nvb2tpZXNfbG9ja1wiIG5vdCBpbiBzZWxmLl9fZGljdF9fOgogICAgICAgICAgICBzZWxmLl9jb29raWVzX2xvY2sgPSB0aHJlYWRpbmcuUkxvY2soKQoKICAgIGRlZiBjb3B5KHNlbGYpOgogICAgICAgIFwiXCJcIlJldHVybiBhIGNvcHkgb2YgdGhpcyBSZXF1ZXN0c0Nvb2tpZUphci5cIlwiXCIKICAgICAgICBuZXdfY2ogPSBSZXF1ZXN0c0Nvb2tpZUphcigpCiAgICAgICAgbmV3X2NqLnNldF9wb2xpY3koc2VsZi5nZXRfcG9saWN5KCkpCiAgICAgICAgbmV3X2NqLnVwZGF0ZShzZWxmKQogICAgICAgIHJldHVybiBuZXdfY2oKCiAgICBkZWYgZ2V0X3BvbGljeShzZWxmKToKICAgICAgICBcIlwiXCJSZXR1cm4gdGhlIENvb2tpZVBvbGljeSBpbnN0YW5jZSB1c2VkLlwiXCJcIgogICAgICAgIHJldHVybiBzZWxmLl9wb2xpY3kKCgpkZWYgX2NvcHlfY29va2llX2phcihqYXIpOgogICAgaWYgamFyIGlzIE5vbmU6CiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBpZiBoYXNhdHRyKGphciwgXCJjb3B5XCIpOgogICAgICAgICMgV2UncmUgZGVhbGluZyB3aXRoIGFuIGluc3RhbmNlIG9mIFJlcXVlc3RzQ29va2llSmFyCiAgICAgICAgcmV0dXJuIGphci5jb3B5KCkKICAgICMgV2UncmUgZGVhbGluZyB3aXRoIGEgZ2VuZXJpYyBDb29raWVKYXIgaW5zdGFuY2UKICAgIG5ld19qYXIgPSBjb3B5LmNvcHkoamFyKQogICAgbmV3X2phci5jbGVhcigpCiAgICBmb3IgY29va2llIGluIGphcjoKICAgICAgICBuZXdfamFyLnNldF9jb29raWUoY29weS5jb3B5KGNvb2tpZSkpCiAgICByZXR1cm4gbmV3X2phcgoKCmRlZiBjcmVhdGVfY29va2llKG5hbWUsIHZhbHVlLCAqKmt3YXJncyk6CiAgICBcIlwiXCJNYWtlIGEgY29va2llIGZyb20gdW5kZXJzcGVjaWZpZWQgcGFyYW1ldGVycy4KCiAgICBCeSBkZWZhdWx0LCB0aGUgcGFpciBvZiBgbmFtZWAgYW5kIGB2YWx1ZWAgd2lsbCBiZSBzZXQgZm9yIHRoZSBkb21haW4gJycKICAgIGFuZCBzZW50IG9uIGV2ZXJ5IHJlcXVlc3QgKHRoaXMgaXMgc29tZXRpbWVzIGNhbGxlZCBhIFwic3VwZXJjb29raWVcIikuCiAgICBcIlwiXCIKICAgIHJlc3VsdCA9IHsKICAgICAgICBcInZlcnNpb25cIjogMCwKICAgICAgICBcIm5hbWVcIjogbmFtZSwKICAgICAgICBcInZhbHVlXCI6IHZhbHVlLAogICAgICAgIFwicG9ydFwiOiBOb25lLAogICAgICAgIFwiZG9tYWluXCI6IFwiXCIsCiAgICAgICAgXCJwYXRoXCI6IFwiL1wiLAogICAgICAgIFwic2VjdXJlXCI6IEZhbHNlLAogICAgICAgIFwiZXhwaXJlc1wiOiBOb25lLAogICAgICAgIFwiZGlzY2FyZFwiOiBUcnVlLAogICAgICAgIFwiY29tbWVudFwiOiBOb25lLAogICAgICAgIFwiY29tbWVudF91cmxcIjogTm9uZSwKICAgICAgICBcInJlc3RcIjoge1wiSHR0cE9ubHlcIjogTm9uZX0sCiAgICAgICAgXCJyZmMyMTA5XCI6IEZhbHNlLAogICAgfQoKICAgIGJhZGFyZ3MgPSBzZXQoa3dhcmdzKSAtIHNldChyZXN1bHQpCiAgICBpZiBiYWRhcmdzOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigKICAgICAgICAgICAgZlwiY3JlYXRlX2Nvb2tpZSgpIGdvdCB1bmV4cGVjdGVkIGtleXdvcmQgYXJndW1lbnRzOiB7bGlzdChiYWRhcmdzKX1cIgogICAgICAgICkKCiAgICByZXN1bHQudXBkYXRlKGt3YXJncykKICAgIHJlc3VsdFtcInBvcnRfc3BlY2lmaWVkXCJdID0gYm9vbChyZXN1bHRbXCJwb3J0XCJdKQogICAgcmVzdWx0W1wiZG9tYWluX3NwZWNpZmllZFwiXSA9IGJvb2wocmVzdWx0W1wiZG9tYWluXCJdKQogICAgcmVzdWx0W1wiZG9tYWluX2luaXRpYWxfZG90XCJdID0gcmVzdWx0W1wiZG9tYWluXCJdLnN0YXJ0c3dpdGgoXCIuXCIpCiAgICByZXN1bHRbXCJwYXRoX3NwZWNpZmllZFwiXSA9IGJvb2wocmVzdWx0W1wicGF0aFwiXSkKCiAgICByZXR1cm4gY29va2llbGliLkNvb2tpZSgqKnJlc3VsdCkKCgpkZWYgbW9yc2VsX3RvX2Nvb2tpZShtb3JzZWwpOgogICAgXCJcIlwiQ29udmVydCBhIE1vcnNlbCBvYmplY3QgaW50byBhIENvb2tpZSBjb250YWluaW5nIHRoZSBvbmUgay92IHBhaXIuXCJcIlwiCgogICAgZXhwaXJlcyA9IE5vbmUKICAgIGlmIG1vcnNlbFtcIm1heC1hZ2VcIl06CiAgICAgICAgdHJ5OgogICAgICAgICAgICBleHBpcmVzID0gaW50KHRpbWUudGltZSgpICsgaW50KG1vcnNlbFtcIm1heC1hZ2VcIl0pKQogICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoZlwibWF4LWFnZToge21vcnNlbFsnbWF4LWFnZSddfSBtdXN0IGJlIGludGVnZXJcIikKICAgIGVsaWYgbW9yc2VsW1wiZXhwaXJlc1wiXToKICAgICAgICB0aW1lX3RlbXBsYXRlID0gXCIlYSwgJWQtJWItJVkgJUg6JU06JVMgR01UXCIKICAgICAgICBleHBpcmVzID0gY2FsZW5kYXIudGltZWdtKHRpbWUuc3RycHRpbWUobW9yc2VsW1wiZXhwaXJlc1wiXSwgdGltZV90ZW1wbGF0ZSkpCiAgICByZXR1cm4gY3JlYXRlX2Nvb2tpZSgKICAgICAgICBjb21tZW50PW1vcnNlbFtcImNvbW1lbnRcIl0sCiAgICAgICAgY29tbWVudF91cmw9Ym9vbChtb3JzZWxbXCJjb21tZW50XCJdKSwKICAgICAgICBkaXNjYXJkPUZhbHNlLAogICAgICAgIGRvbWFpbj1tb3JzZWxbXCJkb21haW5cIl0sCiAgICAgICAgZXhwaXJlcz1leHBpcmVzLAogICAgICAgIG5hbWU9bW9yc2VsLmtleSwKICAgICAgICBwYXRoPW1vcnNlbFtcInBhdGhcIl0sCiAgICAgICAgcG9ydD1Ob25lLAogICAgICAgIHJlc3Q9e1wiSHR0cE9ubHlcIjogbW9yc2VsW1wiaHR0cG9ubHlcIl19LAogICAgICAgIHJmYzIxMDk9RmFsc2UsCiAgICAgICAgc2VjdXJlPWJvb2wobW9yc2VsW1wic2VjdXJlXCJdKSwKICAgICAgICB2YWx1ZT1tb3JzZWwudmFsdWUsCiAgICAgICAgdmVyc2lvbj1tb3JzZWxbXCJ2ZXJzaW9uXCJdIG9yIDAsCiAgICApCgoKZGVmIGNvb2tpZWphcl9mcm9tX2RpY3QoY29va2llX2RpY3QsIGNvb2tpZWphcj1Ob25lLCBvdmVyd3JpdGU9VHJ1ZSk6CiAgICBcIlwiXCJSZXR1cm5zIGEgQ29va2llSmFyIGZyb20gYSBrZXkvdmFsdWUgZGljdGlvbmFyeS4KCiAgICA6cGFyYW0gY29va2llX2RpY3Q6IERpY3Qgb2Yga2V5L3ZhbHVlcyB0byBpbnNlcnQgaW50byBDb29raWVKYXIuCiAgICA6cGFyYW0gY29va2llamFyOiAob3B0aW9uYWwpIEEgY29va2llamFyIHRvIGFkZCB0aGUgY29va2llcyB0by4KICAgIDpwYXJhbSBvdmVyd3JpdGU6IChvcHRpb25hbCkgSWYgRmFsc2UsIHdpbGwgbm90IHJlcGxhY2UgY29va2llcwogICAgICAgIGFscmVhZHkgaW4gdGhlIGphciB3aXRoIG5ldyBvbmVzLgogICAgOnJ0eXBlOiBDb29raWVKYXIKICAgIFwiXCJcIgogICAgaWYgY29va2llamFyIGlzIE5vbmU6CiAgICAgICAgY29va2llamFyID0gUmVxdWVzdHNDb29raWVKYXIoKQoKICAgIGlmIGNvb2tpZV9kaWN0IGlzIG5vdCBOb25lOgogICAgICAgIG5hbWVzX2Zyb21famFyID0gW2Nvb2tpZS5uYW1lIGZvciBjb29raWUgaW4gY29va2llamFyXQogICAgICAgIGZvciBuYW1lIGluIGNvb2tpZV9kaWN0OgogICAgICAgICAgICBpZiBvdmVyd3JpdGUgb3IgKG5hbWUgbm90IGluIG5hbWVzX2Zyb21famFyKToKICAgICAgICAgICAgICAgIGNvb2tpZWphci5zZXRfY29va2llKGNyZWF0ZV9jb29raWUobmFtZSwgY29va2llX2RpY3RbbmFtZV0pKQoKICAgIHJldHVybiBjb29raWVqYXIKCgpkZWYgbWVyZ2VfY29va2llcyhjb29raWVqYXIsIGNvb2tpZXMpOgogICAgXCJcIlwiQWRkIGNvb2tpZXMgdG8gY29va2llamFyIGFuZCByZXR1cm5zIGEgbWVyZ2VkIENvb2tpZUphci4KCiAgICA6cGFyYW0gY29va2llamFyOiBDb29raWVKYXIgb2JqZWN0IHRvIGFkZCB0aGUgY29va2llcyB0by4KICAgIDpwYXJhbSBjb29raWVzOiBEaWN0aW9uYXJ5IG9yIENvb2tpZUphciBvYmplY3QgdG8gYmUgYWRkZWQuCiAgICA6cnR5cGU6IENvb2tpZUphcgogICAgXCJcIlwiCiAgICBpZiBub3QgaXNpbnN0YW5jZShjb29raWVqYXIsIGNvb2tpZWxpYi5Db29raWVKYXIpOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXCJZb3UgY2FuIG9ubHkgbWVyZ2UgaW50byBDb29raWVKYXJcIikKCiAgICBpZiBpc2luc3RhbmNlKGNvb2tpZXMsIGRpY3QpOgogICAgICAgIGNvb2tpZWphciA9IGNvb2tpZWphcl9mcm9tX2RpY3QoY29va2llcywgY29va2llamFyPWNvb2tpZWphciwgb3ZlcndyaXRlPUZhbHNlKQogICAgZWxpZiBpc2luc3RhbmNlKGNvb2tpZXMsIGNvb2tpZWxpYi5Db29raWVKYXIpOgogICAgICAgIHRyeToKICAgICAgICAgICAgY29va2llamFyLnVwZGF0ZShjb29raWVzKQogICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgZm9yIGNvb2tpZV9pbl9qYXIgaW4gY29va2llczoKICAgICAgICAgICAgICAgIGNvb2tpZWphci5zZXRfY29va2llKGNvb2tpZV9pbl9qYXIpCgogICAgcmV0dXJuIGNvb2tpZWphcgoKIiIiCm1vZHVsZV9kaWN0WyJyZXF1ZXN0cyIrb3Muc2VwKyJoZWxwLnB5Il09IiIiCiMgPCBpbmNsdWRlICdpZG5hLnB5JyA+CgojIDwgaW5jbHVkZSAndXJsbGliMy5weScgPgoKIyA8IGluY2x1ZGUgJ2NoYXJzZXRfbm9ybWFsaXplci5weScgPgoKIyA8IGluY2x1ZGUgJ2NoYXJkZXQucHknID4KCiMgPCBpbmNsdWRlICdjcnlwdG9ncmFwaHkucHknID4KCiMgPCBpbmNsdWRlICdPcGVuU1NMLnB5JyA+CgpcIlwiXCJNb2R1bGUgY29udGFpbmluZyBidWcgcmVwb3J0IGhlbHBlcihzKS5cIlwiXCIKCmltcG9ydCBqc29uCmltcG9ydCBwbGF0Zm9ybQppbXBvcnQgc3NsCmltcG9ydCBzeXMKCmltcG9ydCBpZG5hCmltcG9ydCB1cmxsaWIzCgpmcm9tIC4gaW1wb3J0IF9fdmVyc2lvbl9fIGFzIHJlcXVlc3RzX3ZlcnNpb24KCnRyeToKICAgIGltcG9ydCBjaGFyc2V0X25vcm1hbGl6ZXIKZXhjZXB0IEltcG9ydEVycm9yOgogICAgY2hhcnNldF9ub3JtYWxpemVyID0gTm9uZQoKdHJ5OgogICAgaW1wb3J0IGNoYXJkZXQKZXhjZXB0IEltcG9ydEVycm9yOgogICAgY2hhcmRldCA9IE5vbmUKCnRyeToKICAgIGZyb20gdXJsbGliMy5jb250cmliIGltcG9ydCBweW9wZW5zc2wKZXhjZXB0IEltcG9ydEVycm9yOgogICAgcHlvcGVuc3NsID0gTm9uZQogICAgT3BlblNTTCA9IE5vbmUKICAgIGNyeXB0b2dyYXBoeSA9IE5vbmUKZWxzZToKICAgIGltcG9ydCBjcnlwdG9ncmFwaHkKICAgIGltcG9ydCBPcGVuU1NMCgoKZGVmIF9pbXBsZW1lbnRhdGlvbigpOgogICAgXCJcIlwiUmV0dXJuIGEgZGljdCB3aXRoIHRoZSBQeXRob24gaW1wbGVtZW50YXRpb24gYW5kIHZlcnNpb24uCgogICAgUHJvdmlkZSBib3RoIHRoZSBuYW1lIGFuZCB0aGUgdmVyc2lvbiBvZiB0aGUgUHl0aG9uIGltcGxlbWVudGF0aW9uCiAgICBjdXJyZW50bHkgcnVubmluZy4gRm9yIGV4YW1wbGUsIG9uIENQeXRob24gMy4xMC4zIGl0IHdpbGwgcmV0dXJuCiAgICB7J25hbWUnOiAnQ1B5dGhvbicsICd2ZXJzaW9uJzogJzMuMTAuMyd9LgoKICAgIFRoaXMgZnVuY3Rpb24gd29ya3MgYmVzdCBvbiBDUHl0aG9uIGFuZCBQeVB5OiBpbiBwYXJ0aWN1bGFyLCBpdCBwcm9iYWJseQogICAgZG9lc24ndCB3b3JrIGZvciBKeXRob24gb3IgSXJvblB5dGhvbi4gRnV0dXJlIGludmVzdGlnYXRpb24gc2hvdWxkIGJlIGRvbmUKICAgIHRvIHdvcmsgb3V0IHRoZSBjb3JyZWN0IHNoYXBlIG9mIHRoZSBjb2RlIGZvciB0aG9zZSBwbGF0Zm9ybXMuCiAgICBcIlwiXCIKICAgIGltcGxlbWVudGF0aW9uID0gcGxhdGZvcm0ucHl0aG9uX2ltcGxlbWVudGF0aW9uKCkKCiAgICBpZiBpbXBsZW1lbnRhdGlvbiA9PSBcIkNQeXRob25cIjoKICAgICAgICBpbXBsZW1lbnRhdGlvbl92ZXJzaW9uID0gcGxhdGZvcm0ucHl0aG9uX3ZlcnNpb24oKQogICAgZWxpZiBpbXBsZW1lbnRhdGlvbiA9PSBcIlB5UHlcIjoKICAgICAgICBpbXBsZW1lbnRhdGlvbl92ZXJzaW9uID0gXCJ7fS57fS57fVwiLmZvcm1hdCgKICAgICAgICAgICAgc3lzLnB5cHlfdmVyc2lvbl9pbmZvLm1ham9yLAogICAgICAgICAgICBzeXMucHlweV92ZXJzaW9uX2luZm8ubWlub3IsCiAgICAgICAgICAgIHN5cy5weXB5X3ZlcnNpb25faW5mby5taWNybywKICAgICAgICApCiAgICAgICAgaWYgc3lzLnB5cHlfdmVyc2lvbl9pbmZvLnJlbGVhc2VsZXZlbCAhPSBcImZpbmFsXCI6CiAgICAgICAgICAgIGltcGxlbWVudGF0aW9uX3ZlcnNpb24gPSBcIlwiLmpvaW4oCiAgICAgICAgICAgICAgICBbaW1wbGVtZW50YXRpb25fdmVyc2lvbiwgc3lzLnB5cHlfdmVyc2lvbl9pbmZvLnJlbGVhc2VsZXZlbF0KICAgICAgICAgICAgKQogICAgZWxpZiBpbXBsZW1lbnRhdGlvbiA9PSBcIkp5dGhvblwiOgogICAgICAgIGltcGxlbWVudGF0aW9uX3ZlcnNpb24gPSBwbGF0Zm9ybS5weXRob25fdmVyc2lvbigpICAjIENvbXBsZXRlIEd1ZXNzCiAgICBlbGlmIGltcGxlbWVudGF0aW9uID09IFwiSXJvblB5dGhvblwiOgogICAgICAgIGltcGxlbWVudGF0aW9uX3ZlcnNpb24gPSBwbGF0Zm9ybS5weXRob25fdmVyc2lvbigpICAjIENvbXBsZXRlIEd1ZXNzCiAgICBlbHNlOgogICAgICAgIGltcGxlbWVudGF0aW9uX3ZlcnNpb24gPSBcIlVua25vd25cIgoKICAgIHJldHVybiB7XCJuYW1lXCI6IGltcGxlbWVudGF0aW9uLCBcInZlcnNpb25cIjogaW1wbGVtZW50YXRpb25fdmVyc2lvbn0KCgpkZWYgaW5mbygpOgogICAgXCJcIlwiR2VuZXJhdGUgaW5mb3JtYXRpb24gZm9yIGEgYnVnIHJlcG9ydC5cIlwiXCIKICAgIHRyeToKICAgICAgICBwbGF0Zm9ybV9pbmZvID0gewogICAgICAgICAgICBcInN5c3RlbVwiOiBwbGF0Zm9ybS5zeXN0ZW0oKSwKICAgICAgICAgICAgXCJyZWxlYXNlXCI6IHBsYXRmb3JtLnJlbGVhc2UoKSwKICAgICAgICB9CiAgICBleGNlcHQgT1NFcnJvcjoKICAgICAgICBwbGF0Zm9ybV9pbmZvID0gewogICAgICAgICAgICBcInN5c3RlbVwiOiBcIlVua25vd25cIiwKICAgICAgICAgICAgXCJyZWxlYXNlXCI6IFwiVW5rbm93blwiLAogICAgICAgIH0KCiAgICBpbXBsZW1lbnRhdGlvbl9pbmZvID0gX2ltcGxlbWVudGF0aW9uKCkKICAgIHVybGxpYjNfaW5mbyA9IHtcInZlcnNpb25cIjogdXJsbGliMy5fX3ZlcnNpb25fX30KICAgIGNoYXJzZXRfbm9ybWFsaXplcl9pbmZvID0ge1widmVyc2lvblwiOiBOb25lfQogICAgY2hhcmRldF9pbmZvID0ge1widmVyc2lvblwiOiBOb25lfQogICAgaWYgY2hhcnNldF9ub3JtYWxpemVyOgogICAgICAgIGNoYXJzZXRfbm9ybWFsaXplcl9pbmZvID0ge1widmVyc2lvblwiOiBjaGFyc2V0X25vcm1hbGl6ZXIuX192ZXJzaW9uX199CiAgICBpZiBjaGFyZGV0OgogICAgICAgIGNoYXJkZXRfaW5mbyA9IHtcInZlcnNpb25cIjogY2hhcmRldC5fX3ZlcnNpb25fX30KCiAgICBweW9wZW5zc2xfaW5mbyA9IHsKICAgICAgICBcInZlcnNpb25cIjogTm9uZSwKICAgICAgICBcIm9wZW5zc2xfdmVyc2lvblwiOiBcIlwiLAogICAgfQogICAgaWYgT3BlblNTTDoKICAgICAgICBweW9wZW5zc2xfaW5mbyA9IHsKICAgICAgICAgICAgXCJ2ZXJzaW9uXCI6IE9wZW5TU0wuX192ZXJzaW9uX18sCiAgICAgICAgICAgIFwib3BlbnNzbF92ZXJzaW9uXCI6IGZcIntPcGVuU1NMLlNTTC5PUEVOU1NMX1ZFUlNJT05fTlVNQkVSOnh9XCIsCiAgICAgICAgfQogICAgY3J5cHRvZ3JhcGh5X2luZm8gPSB7CiAgICAgICAgXCJ2ZXJzaW9uXCI6IGdldGF0dHIoY3J5cHRvZ3JhcGh5LCBcIl9fdmVyc2lvbl9fXCIsIFwiXCIpLAogICAgfQogICAgaWRuYV9pbmZvID0gewogICAgICAgIFwidmVyc2lvblwiOiBnZXRhdHRyKGlkbmEsIFwiX192ZXJzaW9uX19cIiwgXCJcIiksCiAgICB9CgogICAgc3lzdGVtX3NzbCA9IHNzbC5PUEVOU1NMX1ZFUlNJT05fTlVNQkVSCiAgICBzeXN0ZW1fc3NsX2luZm8gPSB7XCJ2ZXJzaW9uXCI6IGZcIntzeXN0ZW1fc3NsOnh9XCIgaWYgc3lzdGVtX3NzbCBpcyBub3QgTm9uZSBlbHNlIFwiXCJ9CgogICAgcmV0dXJuIHsKICAgICAgICBcInBsYXRmb3JtXCI6IHBsYXRmb3JtX2luZm8sCiAgICAgICAgXCJpbXBsZW1lbnRhdGlvblwiOiBpbXBsZW1lbnRhdGlvbl9pbmZvLAogICAgICAgIFwic3lzdGVtX3NzbFwiOiBzeXN0ZW1fc3NsX2luZm8sCiAgICAgICAgXCJ1c2luZ19weW9wZW5zc2xcIjogcHlvcGVuc3NsIGlzIG5vdCBOb25lLAogICAgICAgIFwidXNpbmdfY2hhcnNldF9ub3JtYWxpemVyXCI6IGNoYXJkZXQgaXMgTm9uZSwKICAgICAgICBcInB5T3BlblNTTFwiOiBweW9wZW5zc2xfaW5mbywKICAgICAgICBcInVybGxpYjNcIjogdXJsbGliM19pbmZvLAogICAgICAgIFwiY2hhcmRldFwiOiBjaGFyZGV0X2luZm8sCiAgICAgICAgXCJjaGFyc2V0X25vcm1hbGl6ZXJcIjogY2hhcnNldF9ub3JtYWxpemVyX2luZm8sCiAgICAgICAgXCJjcnlwdG9ncmFwaHlcIjogY3J5cHRvZ3JhcGh5X2luZm8sCiAgICAgICAgXCJpZG5hXCI6IGlkbmFfaW5mbywKICAgICAgICBcInJlcXVlc3RzXCI6IHsKICAgICAgICAgICAgXCJ2ZXJzaW9uXCI6IHJlcXVlc3RzX3ZlcnNpb24sCiAgICAgICAgfSwKICAgIH0KCgpkZWYgbWFpbigpOgogICAgXCJcIlwiUHJldHR5LXByaW50IHRoZSBidWcgaW5mb3JtYXRpb24gYXMgSlNPTi5cIlwiXCIKICAgIHByaW50KGpzb24uZHVtcHMoaW5mbygpLCBzb3J0X2tleXM9VHJ1ZSwgaW5kZW50PTIpKQoKCmlmIF9fbmFtZV9fID09IFwiX19tYWluX19cIjoKICAgIG1haW4oKQoKIiIiCm1vZHVsZV9kaWN0WyJyZXF1ZXN0cyIrb3Muc2VwKyJjb21wYXQucHkiXT0iIiIKIyA8IGluY2x1ZGUgJ2NoYXJkZXQucHknID4KCiMgPCBpbmNsdWRlICdzaW1wbGVqc29uLnB5JyA+CgojIDwgaW5jbHVkZSAnY2hhcnNldF9ub3JtYWxpemVyLnB5JyA+CgpcIlwiXCIKcmVxdWVzdHMuY29tcGF0Cn5+fn5+fn5+fn5+fn5+fgoKVGhpcyBtb2R1bGUgcHJldmlvdXNseSBoYW5kbGVkIGltcG9ydCBjb21wYXRpYmlsaXR5IGlzc3VlcwpiZXR3ZWVuIFB5dGhvbiAyIGFuZCBQeXRob24gMy4gSXQgcmVtYWlucyBmb3IgYmFja3dhcmRzCmNvbXBhdGliaWxpdHkgdW50aWwgdGhlIG5leHQgbWFqb3IgdmVyc2lvbi4KXCJcIlwiCgp0cnk6CiAgICBpbXBvcnQgY2hhcmRldApleGNlcHQgSW1wb3J0RXJyb3I6CiAgICBpbXBvcnQgY2hhcnNldF9ub3JtYWxpemVyIGFzIGNoYXJkZXQKCmltcG9ydCBzeXMKCiMgLS0tLS0tLQojIFB5dGhvbnMKIyAtLS0tLS0tCgojIFN5bnRheCBzdWdhci4KX3ZlciA9IHN5cy52ZXJzaW9uX2luZm8KCiM6IFB5dGhvbiAyLng/CmlzX3B5MiA9IF92ZXJbMF0gPT0gMgoKIzogUHl0aG9uIDMueD8KaXNfcHkzID0gX3ZlclswXSA9PSAzCgojIGpzb24vc2ltcGxlanNvbiBtb2R1bGUgaW1wb3J0IHJlc29sdXRpb24KaGFzX3NpbXBsZWpzb24gPSBGYWxzZQp0cnk6CiAgICBpbXBvcnQgc2ltcGxlanNvbiBhcyBqc29uCgogICAgaGFzX3NpbXBsZWpzb24gPSBUcnVlCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIGltcG9ydCBqc29uCgppZiBoYXNfc2ltcGxlanNvbjoKICAgIGZyb20gc2ltcGxlanNvbiBpbXBvcnQgSlNPTkRlY29kZUVycm9yCmVsc2U6CiAgICBmcm9tIGpzb24gaW1wb3J0IEpTT05EZWNvZGVFcnJvcgoKIyBLZWVwIE9yZGVyZWREaWN0IGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS4KZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgT3JkZXJlZERpY3QKZnJvbSBjb2xsZWN0aW9ucy5hYmMgaW1wb3J0IENhbGxhYmxlLCBNYXBwaW5nLCBNdXRhYmxlTWFwcGluZwpmcm9tIGh0dHAgaW1wb3J0IGNvb2tpZWphciBhcyBjb29raWVsaWIKZnJvbSBodHRwLmNvb2tpZXMgaW1wb3J0IE1vcnNlbApmcm9tIGlvIGltcG9ydCBTdHJpbmdJTwoKIyAtLS0tLS0tLS0tLS0tLQojIExlZ2FjeSBJbXBvcnRzCiMgLS0tLS0tLS0tLS0tLS0KZnJvbSB1cmxsaWIucGFyc2UgaW1wb3J0ICgKICAgIHF1b3RlLAogICAgcXVvdGVfcGx1cywKICAgIHVucXVvdGUsCiAgICB1bnF1b3RlX3BsdXMsCiAgICB1cmxkZWZyYWcsCiAgICB1cmxlbmNvZGUsCiAgICB1cmxqb2luLAogICAgdXJscGFyc2UsCiAgICB1cmxzcGxpdCwKICAgIHVybHVucGFyc2UsCikKZnJvbSB1cmxsaWIucmVxdWVzdCBpbXBvcnQgKAogICAgZ2V0cHJveGllcywKICAgIGdldHByb3hpZXNfZW52aXJvbm1lbnQsCiAgICBwYXJzZV9odHRwX2xpc3QsCiAgICBwcm94eV9ieXBhc3MsCiAgICBwcm94eV9ieXBhc3NfZW52aXJvbm1lbnQsCikKCmJ1aWx0aW5fc3RyID0gc3RyCnN0ciA9IHN0cgpieXRlcyA9IGJ5dGVzCmJhc2VzdHJpbmcgPSAoc3RyLCBieXRlcykKbnVtZXJpY190eXBlcyA9IChpbnQsIGZsb2F0KQppbnRlZ2VyX3R5cGVzID0gKGludCwpCgoiIiIKCmltcG9ydCBvcwppbXBvcnQgdHlwZXMKaW1wb3J0IHppcGZpbGUKaW1wb3J0IHN5cwppbXBvcnQgaW8KaW1wb3J0IGpzb24KCmNsYXNzIFppcEltcG9ydGVyKG9iamVjdCk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgemlwX2ZpbGUpOgogICAgICAgIHNlbGYuemZpbGUgPSB6aXBfZmlsZQogICAgICAgIHNlbGYuX3BhdGhzID0gW3guZmlsZW5hbWUgZm9yIHggaW4gc2VsZi56ZmlsZS5maWxlbGlzdF0KICAgICAgICAKICAgIGRlZiBfbW9kX3RvX3BhdGhzKHNlbGYsIGZ1bGxuYW1lKToKICAgICAgICAjIGdldCB0aGUgcHl0aG9uIG1vZHVsZSBuYW1lCiAgICAgICAgcHlfZmlsZW5hbWUgPSBmdWxsbmFtZS5yZXBsYWNlKCIuIiwgb3Muc2VwKSArICIucHkiCiAgICAgICAgIyBnZXQgdGhlIGZpbGVuYW1lIGlmIGl0IGlzIGEgcGFja2FnZS9zdWJwYWNrYWdlCiAgICAgICAgcHlfcGFja2FnZSA9IGZ1bGxuYW1lLnJlcGxhY2UoIi4iLCBvcy5zZXApICsgb3Muc2VwICsgIl9faW5pdF9fLnB5IgogICAgICAgIGlmIHB5X2ZpbGVuYW1lIGluIHNlbGYuX3BhdGhzOgogICAgICAgICAgICByZXR1cm4gcHlfZmlsZW5hbWUKICAgICAgICBlbGlmIHB5X3BhY2thZ2UgaW4gc2VsZi5fcGF0aHM6CiAgICAgICAgICAgIHJldHVybiBweV9wYWNrYWdlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBkZWYgZmluZF9tb2R1bGUoc2VsZiwgZnVsbG5hbWUsIHBhdGgpOgogICAgICAgIGlmIHNlbGYuX21vZF90b19wYXRocyhmdWxsbmFtZSkgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHJldHVybiBzZWxmCiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBkZWYgbG9hZF9tb2R1bGUoc2VsZiwgZnVsbG5hbWUpOgogICAgICAgIGZpbGVuYW1lID0gc2VsZi5fbW9kX3RvX3BhdGhzKGZ1bGxuYW1lKQogICAgICAgIGlmIG5vdCBmaWxlbmFtZSBpbiBzZWxmLl9wYXRoczoKICAgICAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IoZnVsbG5hbWUpCiAgICAgICAgbmV3X21vZHVsZSA9IHR5cGVzLk1vZHVsZVR5cGUoZnVsbG5hbWUpCiAgICAgICAgc3lzLm1vZHVsZXNbZnVsbG5hbWVdPW5ld19tb2R1bGUKICAgICAgICBpZiBmaWxlbmFtZS5lbmRzd2l0aCgiX19pbml0X18ucHkiKToKICAgICAgICAgICAgbmV3X21vZHVsZS5fX3BhdGhfXyA9IFtdIAogICAgICAgICAgICBuZXdfbW9kdWxlLl9fcGFja2FnZV9fID0gZnVsbG5hbWUKICAgICAgICBlbHNlOgogICAgICAgICAgICBuZXdfbW9kdWxlLl9fcGFja2FnZV9fID0gZnVsbG5hbWUucnBhcnRpdGlvbignLicpWzBdCiAgICAgICAgZXhlYyhzZWxmLnpmaWxlLm9wZW4oZmlsZW5hbWUsICdyJykucmVhZCgpLG5ld19tb2R1bGUuX19kaWN0X18pCiAgICAgICAgbmV3X21vZHVsZS5fX2ZpbGVfXyA9IGZpbGVuYW1lCiAgICAgICAgbmV3X21vZHVsZS5fX2xvYWRlcl9fID0gc2VsZgogICAgICAgIG5ld19tb2R1bGUuX19zcGVjX189anNvbi5fX3NwZWNfXyAjIFRvIHNhdGlzZnkgaW1wb3J0bGliLl9jb21tb24uZ2V0X3BhY2thZ2UKICAgICAgICByZXR1cm4gbmV3X21vZHVsZQoKbW9kdWxlX3ppcD16aXBmaWxlLlppcEZpbGUoaW8uQnl0ZXNJTygpLCJ3IikKZm9yIGtleSBpbiBtb2R1bGVfZGljdDoKICAgIG1vZHVsZV96aXAud3JpdGVzdHIoa2V5LG1vZHVsZV9kaWN0W2tleV0pCgptb2R1bGVfaW1wb3J0ZXI9WmlwSW1wb3J0ZXIobW9kdWxlX3ppcCkKc3lzLm1ldGFfcGF0aC5pbnNlcnQoMCxtb2R1bGVfaW1wb3J0ZXIpCgojZnJvbSByZXF1ZXN0cyBpbXBvcnQgKgppbXBvcnQgcmVxdWVzdHMKZ2xvYmFscygpLnVwZGF0ZShyZXF1ZXN0cy5fX2RpY3RfXykKICAgIAppZiBtb2R1bGVfaW1wb3J0ZXIgaW4gc3lzLm1ldGFfcGF0aDoKICAgIHN5cy5tZXRhX3BhdGgucmVtb3ZlKG1vZHVsZV9pbXBvcnRlcikKCiNmb3Iga2V5IGluIHN5cy5tb2R1bGVzLmNvcHkoKToKIyAgICBpZiBrZXk9PSJyZXF1ZXN0cyIgb3Iga2V5LnN0YXJ0c3dpdGgoInJlcXVlc3RzLiIpOgojICAgICAgICBkZWwgc3lzLm1vZHVsZXNba2V5XQo=').decode("utf-8"),requests_module.__dict__)
sys.modules["requests"]=requests_module


import types
import sys
import base64
_utils_module=types.ModuleType("_utils")
#setattr(_utils_module,"__file__",__file__)
exec(base64.b64decode(b'aW1wb3J0IG9zCm1vZHVsZV9kaWN0PXt9Cm1vZHVsZV9kaWN0WyJfdXRpbHMiK29zLnNlcCsibWlzYy5weSJdPSIiIgppbXBvcnQgb3MsIGFzdCwgZ2V0cGFzcywgc3lzLCBzb2NrZXQKCiNIZWxwZXIgZnVuY3Rpb25zICAKZGVmIGxvYWRfZGVwZW5kZW5jaWVzKHNlbGYscm9vdCxsYXllcik6CiAgICBpZiBub3Qgb3MucGF0aC5pc2ZpbGUoZlwie3Jvb3R9L3tsYXllcn0vY29udGFpbmVyLWNvbXBvc2UucHlcIik6CiAgICAgICAgcmV0dXJuICNEb24ndCBlcnJvciBvdXQgaWYgY29udGFpbmVyLWNvbXBvc2UucHkgZG9lc24ndCBleGlzdAogICAgd2l0aCBvcGVuKGZcIntyb290fS97bGF5ZXJ9L2NvbnRhaW5lci1jb21wb3NlLnB5XCIpIGFzIGZoOiAgICAgICAgCiAgICAgICByb290ID0gYXN0LnBhcnNlKGZoLnJlYWQoKSkKICAgICAgIGZvciBub2RlIGluIGFzdC5pdGVyX2NoaWxkX25vZGVzKHJvb3QpOgogICAgICAgICAgIGlmIGlzaW5zdGFuY2Uobm9kZSwgYXN0LkV4cHIpIGFuZCBpc2luc3RhbmNlKG5vZGUudmFsdWUsYXN0LkNhbGwpOgogICAgICAgICAgICAgICBmdW5jdGlvbj1ub2RlLnZhbHVlLmZ1bmMuaWQKICAgICAgICAgICAgICAgaWYgZnVuY3Rpb24gaW4gW1wiTGF5ZXJcIixcIkJhc2VcIixcIkVudlwiLFwiU2hlbGxcIl06CiAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM9W2V2YWwoYXN0LnVucGFyc2UodmFsKSkgZm9yIHZhbCBpbiBub2RlLnZhbHVlLmFyZ3NdCiAgICAgICAgICAgICAgICAgICBnZXRhdHRyKHNlbGYsZnVuY3Rpb24pKCphcmd1bWVudHMpICNSdW4gZnVuY3Rpb24KCmRlZiBjaHJvb3RfY29tbWFuZChzZWxmLGNvbW1hbmQpOgogICAgaWYgc2VsZi5uYW1lc3BhY2VzWyd1c2VyJ106CiAgICAgICAgcmVzdWx0ID0gW1widW5zaGFyZVwiLGZcIi0tbWFwLXVzZXI9e3NlbGYudWlkfVwiLGZcIi0tbWFwLWdyb3VwPXtzZWxmLmdpZH1cIixcIi0tcm9vdD1tZXJnZWRcIl0gI1Vuc2hhcmUgaXMgYXZhaWxhYmxlIHNvIHVzZSBpdCAgCiAgICBlbHNlOgogICAgICAgIHJlc3VsdCA9IFtcImNocm9vdFwiLGZcIi0tdXNlcnNwZWM9e3NlbGYudWlkfTp7c2VsZi5naWR9XCIsIFwibWVyZ2VkXCJdICMgVW5zaGFyZSBkb2VzIG5vdCBleGlzdCwgc28gdXNlIGNocm9vdAogICAgICAgIAogICAgcmVzdWx0Kz1bZlwie3NlbGYuc2hlbGx9XCIsXCItY1wiLGZcIntzZWxmLmVudn07IGNkIHtzZWxmLndvcmtkaXJ9OyB7Y29tbWFuZH1cIl0KICAgIAogICAgCiAgICBpZiBzZWxmLm5hbWVzcGFjZXNbJ25ldCddOgogICAgICAgIHJlc3VsdD1bXCJzdWRvXCIsXCJpcFwiLFwibmV0bnNcIixcImV4ZWNcIixzZWxmLm5ldG5zLFwic3Vkb1wiLFwiLXVcIixnZXRwYXNzLmdldHVzZXIoKV0rcmVzdWx0CiAgICAKICAgIGlmIHN5cy5wbGF0Zm9ybSE9XCJjeWd3aW5cIiBhbmQgbm90IHNlbGYubmFtZXNwYWNlc1sndXNlciddOgogICAgICAgIHJlc3VsdD1bXCJzdWRvXCJdK3Jlc3VsdAogICAgICAgIAogICAgcmV0dXJuIHJlc3VsdAogICAgIAoKICAgIApkZWYgaXNfcG9ydF9pbl91c2UocG9ydCkgOgogICAgd2l0aCBzb2NrZXQuc29ja2V0KHNvY2tldC5BRl9JTkVULCBzb2NrZXQuU09DS19TVFJFQU0pIGFzIHM6CiAgICAgICAgcmV0dXJuIHMuY29ubmVjdF9leCgoJzEyNy4wLjAuMScsIHBvcnQpKSA9PSAwCgpkZWYgcmVtb3ZlX2VtcHR5X2ZvbGRlcnNfaW5fZGlmZigpOgogICAgd2FsayA9IGxpc3Qob3Mud2FsayhcImRpZmZcIikpCiAgICBmb3IgcGF0aCwgXywgXyBpbiB3YWxrWzo6LTFdOgogICAgICAgIGlmIG5vdCBwYXRoLnN0YXJ0c3dpdGgoXCJkaWZmLy51bmlvbmZzXCIpOgogICAgICAgICAgICBpZiBsZW4ob3MubGlzdGRpcihwYXRoKSkgPT0gMDoKICAgICAgICAgICAgICAgIG9zLnJtZGlyKHBhdGgpCmRlZiBnZXRfYWxsX2l0ZW1zKHJvb3QpOgogICAgI0ltcGxlbWVudCBEZXB0aC1GaXJzdCBTZWFyY2ggdGhyb3VnaCB1dGlscy5ST09UCiAgICBpdGVtcz1bXQogICAgc3RhY2s9W3Jvb3RdCiAgICB2aXNpdGVkPXt9CiAgICB3aGlsZSBsZW4oc3RhY2spPjA6CiAgICAgICAgdj1zdGFjay5wb3AoKQogICAgICAgIGlmIHYgbm90IGluIHZpc2l0ZWQ6CiAgICAgICAgICAgICNWaXNpdAogICAgICAgICAgICB2aXNpdGVkW3ZdPVRydWUKICAgICAgICAgICAgaWYgb3MucGF0aC5pc2ZpbGUob3MucGF0aC5qb2luKHYsXCJjb250YWluZXItY29tcG9zZS5weVwiKSk6CiAgICAgICAgICAgICAgICBpdGVtcy5hcHBlbmQob3MucGF0aC5yZWxwYXRoKHYscm9vdCkpICNEb24ndCBuZWVkIGZ1bGwgcGF0aAogICAgICAgICAgICAgICAgY29udGludWUgI05vIG5lZWQgdG8gc2VhcmNoIGRlZXBlcgogICAgICAgICAgICBpZiBsZW4ob3MubGlzdGRpcih2KSk9PTEgYW5kIG9zLmxpc3RkaXIodilbMF09PVwiZGlmZlwiOgogICAgICAgICAgICAgICAgY29udGludWUgI0lmIHRoZXJlJ3Mgbm90aGluZyBidXQgZGlmZiwgbm8gbmVlZCB0byBzZWFyY2ggZGVlcGVyCiAgICAgICAgICAgIAogICAgICAgICAgICBmb3IgdyBpbiBvcy5saXN0ZGlyKHYpOgogICAgICAgICAgICAgICAgdz1vcy5wYXRoLmpvaW4odix3KQogICAgICAgICAgICAgICAgaWYgdyBub3QgaW4gdmlzaXRlZDoKICAgICAgICAgICAgICAgICAgICBzdGFjay5hcHBlbmQodykKICAgIHJldHVybiBpdGVtcwoKICAgICAgICAgICAKZGVmIHN0cjJib29sKHYpOgogIHJldHVybiB2Lmxvd2VyKCkgaW4gKFwieWVzXCIsIFwidHJ1ZVwiLCBcInRcIiwgXCIxXCIpCgoiIiIKbW9kdWxlX2RpY3RbIl91dGlscyIrb3Muc2VwKyJjb250YWluZXJfZG9ja2VyLnB5Il09IiIiCiMhL3Vzci9iaW4vZW52IHB5dGhvbgppbXBvcnQgdXJsbGliLnBhcnNlCmltcG9ydCB0ZW1wZmlsZQppbXBvcnQgc3lzLCBvcwppbXBvcnQgcmUsIGpzb24KaW1wb3J0IHBsYXRmb3JtCmltcG9ydCBzdWJwcm9jZXNzLCBzaHV0aWwKIyA8IGluY2x1ZGUgJy4uLy4uL3V0aWxzL3V0aWxzLnB5JyA+CmltcG9ydCB1dGlscwoKaW1wb3J0IHNobGV4CmltcG9ydCBwYXRobGliCiMgPCBpbmNsdWRlICdyZXF1ZXN0cy5weScgPgppbXBvcnQgcmVxdWVzdHMKCnMgPSByZXF1ZXN0cy5TZXNzaW9uKCkKcy52ZXJpZnk9RmFsc2UKCmltcG9ydCB1cmxsaWIzCnVybGxpYjMuZGlzYWJsZV93YXJuaW5ncygpCgpkZWYgcGFyc2VfdXJpKHVyaSk6CiAgICAjQ29udmVydCB1cmxzIGludG8gYSBwcm9wZXIgZm9ybWF0OgogICAgaWYgdXJpLmNvdW50KCcvJyk9PTA6ICNPZmZpY2lhbCBEb2NrZXIgbGlicmFyaWVzCiAgICAgICAgdXJpPSdsaWJyYXJ5LycgKyB1cmkKICAgICAgICAKICAgIGlmIHVyaS5jb3VudCgnLycpPT0xOiAjVGhlIGRlZmF1bHQgaXMgZG9ja2VyCiAgICAgICAgdXJpPSdpbmRleC5kb2NrZXIuaW8vJyArIHVyaQogICAgICAgIAogICAgI1RoZXJlJ3Mgbm8gaHR0cHMsIHdlIHNob3VsZCBmaXggdGhhdCBzbyB1cmxsaWIgY2FuIGV4dHJhY3QgdGhpbmdzIHByb3Blcmx5CiAgICBpZiB1cmxsaWIucGFyc2UudXJscGFyc2UodXJpKS5uZXRsb2M9PScnOgogICAgICAgIHVyaT0naHR0cHM6Ly8nICsgdXJpCiAgICByZWdpc3RyeT11cmxsaWIucGFyc2UudXJscGFyc2UodXJpKS5uZXRsb2MKCiAgICBpbWFnZT11cmxsaWIucGFyc2UudXJscGFyc2UodXJpKS5wYXRoCiAgICAKICAgIGlmIGltYWdlLnN0YXJ0c3dpdGgoJy8nKToKICAgICAgICBpbWFnZT1pbWFnZVsxOl0KICAgICAgICAKICAgIGltYWdlID0gaW1hZ2Uuc3BsaXQoJzonKQogICAgCiAgICBpZiBsZW4oaW1hZ2UpPT0xOgogICAgICAgIGltYWdlLmFwcGVuZCgnbGF0ZXN0JykKICAgIAogICAgaW1hZ2UsIHRhZz0gaW1hZ2UKICAgIAogICAgcmV0dXJuIChyZWdpc3RyeSxpbWFnZSx0YWcpCiNJbXBvcnQgZnJvbSByZW1vdGUgZG9ja2VyIHJlZ2lzdHJ5CmRlZiBJbXBvcnQodXJpLHBhdGgsZG9ja2VyZmlsZT1Ob25lKTogICAgCiAgICAjTWFrZSB0ZW1wIGZvbGRlcgogICAgdGVtcF9mb2xkZXI9dGVtcGZpbGUubWtkdGVtcCgpCiAgICAKICAgIG9zLm1ha2VkaXJzKHBhdGgsZXhpc3Rfb2s9VHJ1ZSkKICAgIAogICAgcmVnaXN0cnksaW1hZ2UsdGFnPXBhcnNlX3VyaSh1cmkpCiAgICAjR2V0IHJlZ2lzdHJ5IHNlcnZpY2UgYW5kIGF1dGggc2VydmljZSAKICAgIHJlZ2lzdHJ5X3NlcnZpY2U9XCJyZWdpc3RyeS5kb2NrZXIuaW9cIiAjQnkgZGVmYXVsdCwgdXNlIERvY2tlcgogICAgYXV0aF9zZXJ2aWNlPVwiaHR0cHM6Ly9hdXRoLmRvY2tlci5pby90b2tlblwiICNCeSBkZWZhdWx0LCB1c2UgRG9ja2VyCiAgICAKICAgIGF1dGhfcmVxdWVzdD1zLmdldChmXCJodHRwczovL3tyZWdpc3RyeX0vdjIvXCIpCiAgICBpZiBhdXRoX3JlcXVlc3Quc3RhdHVzX2NvZGU9PTQwMToKICAgICAgICBpZiBcIldXVy1BdXRoZW50aWNhdGVcIiBpbiBhdXRoX3JlcXVlc3QuaGVhZGVyczoKICAgICAgICAgICAgYXV0aGVudGljYXRlX2hlYWRlcj1hdXRoX3JlcXVlc3QuaGVhZGVyc1tcIldXVy1BdXRoZW50aWNhdGVcIl0KICAgICAgICAgICAgYXV0aGVudGljYXRlX2hlYWRlcj1hdXRoZW50aWNhdGVfaGVhZGVyLnNwbGl0KCdcIicpCiAgICAgICAgICAgIGF1dGhfc2VydmljZSA9IGF1dGhlbnRpY2F0ZV9oZWFkZXJbMV0KICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcmVnaXN0cnlfc2VydmljZSA9IGF1dGhlbnRpY2F0ZV9oZWFkZXJbM10ucmVwbGFjZShcImh0dHBzOi8vXCIsXCJcIikucmVwbGFjZShcImh0dHA6Ly9cIixcIlwiKQogICAgICAgICAgICBleGNlcHQgSW5kZXhFcnJvcjoKICAgICAgICAgICAgICAgIHJlZ2lzdHJ5X3NlcnZpY2UgPSBcIlwiCiAgICAjR2V0IHRva2VuCiAgICB0b2tlbj1zLmdldChmXCJ7YXV0aF9zZXJ2aWNlfT9zZXJ2aWNlPXtyZWdpc3RyeV9zZXJ2aWNlfSZzY29wZT1yZXBvc2l0b3J5OntpbWFnZX06cHVsbFwiKS5qc29uKClbJ3Rva2VuJ10KICAgIHMuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddPWZcIkJlYXJlciB7dG9rZW59XCIKICAgIHMuaGVhZGVyc1tcIkFjY2VwdFwiXT1cImFwcGxpY2F0aW9uL3ZuZC5kb2NrZXIuZGlzdHJpYnV0aW9uLm1hbmlmZXN0Lmxpc3QudjIranNvbiwgYXBwbGljYXRpb24vdm5kLmRvY2tlci5kaXN0cmlidXRpb24ubWFuaWZlc3QudjIranNvblwiCiAgICAKICAgIG1hbmlmZXN0PXMuZ2V0KGZcImh0dHBzOi8ve3JlZ2lzdHJ5fS92Mi97aW1hZ2V9L21hbmlmZXN0cy97dGFnfVwiKS5qc29uKCkKICAgIAogICAgI0ZpbmQgdGhlIGFyY2hpdGVjdHVyZSAKICAgIGFyY2hpdGVjdHVyZT1wbGF0Zm9ybS5tYWNoaW5lKCkKICAgICNIYW5kbGUgc29tZSBMaW51eCBkaXN0cm9zIHRoYXQgcmVwb3J0IGFhcmNoNjQgaW5zdGVhZCBvZiBhbXI2NAogICAgaWYgYXJjaGl0ZWN0dXJlPT0nYWFyY2g2NCc6CiAgICAgICAgYXJjaGl0ZWN0dXJlPVsnYXJtNjQnXQogICAgICAgIAogICAgI0hhbmRsZSB0aGUgYXJtKiBmYW1pbHkKICAgIGVsaWYgYXJjaGl0ZWN0dXJlLnN0YXJ0c3dpdGgoJ2FybScpOgogICAgICAgIAogICAgICAgICNIYW5kbGUgYXJtdjYsIGFybXY3bCwgZXRjLgogICAgICAgIGlmICd2JyBpbiBhcmNoaXRlY3R1cmU6CiAgICAgICAgICAgIGFyY2hpdGVjdHVyZT1hcmNoaXRlY3R1cmUuc3BsaXQoJ3YnKQogICAgICAgICAgICBhcmNoaXRlY3R1cmVbMV09J3YnK2FyY2hpdGVjdHVyZVsxXQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGFyY2hpdGVjdHVyZT1bYXJjaGl0ZWN0dXJlXQogICAgZWxzZToKICAgICAgICBhcmNoaXRlY3R1cmU9W2FyY2hpdGVjdHVyZV0KICAgIAogICAgI0dldCByaWdodCBtYW5pZmVzdCBmb3IgYXJjaGl0ZWN0dXJlCiAgICBpZiAnbWFuaWZlc3RzJyBpbiBtYW5pZmVzdDogI01hbmlmZXN0IGxpc3QsIHNvIHlvdSBoYXZlIHRvIGNob29zZSB0aGUgcmlnaHQgb25lCiAgICAgICAgbWFuaWZlc3RfbGlzdD1tYW5pZmVzdFsnbWFuaWZlc3RzJ10KICAgICAgICAKICAgICAgICBmb3IgbWFuaWZlc3QgaW4gbWFuaWZlc3RfbGlzdDoKICAgICAgICAgICAgaWYgbWFuaWZlc3RbJ3BsYXRmb3JtJ11bJ2FyY2hpdGVjdHVyZSddPT1hcmNoaXRlY3R1cmVbMF06CiAgICAgICAgICAgICAgICAjRGVhbCB3aXRoIGFybXYqIGZhbWlseQogICAgICAgICAgICAgICAgaWYgbGVuKGFyY2hpdGVjdHVyZSk9PTI6CiAgICAgICAgICAgICAgICAgICAgaWYgbWFuaWZlc3RbJ3BsYXRmb3JtJ11bJ3ZhcmlhbnQnXT09YXJjaGl0ZWN0dXJlWzFdOgogICAgICAgICAgICAgICAgICAgICAgICBkaWdlc3Q9bWFuaWZlc3RbJ2RpZ2VzdCddCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGRpZ2VzdD1tYW5pZmVzdFsnZGlnZXN0J10KICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgIG1hbmlmZXN0PXMuZ2V0KGZcImh0dHBzOi8ve3JlZ2lzdHJ5fS92Mi97aW1hZ2V9L21hbmlmZXN0cy97ZGlnZXN0fVwiKS5qc29uKCkKICAgIAogICAgCgoKICAgICNHZXQgaW5mb3JtYXRpb24gYWJvdXQgbGF5ZXJzCiAgICBsYXllcnM9bWFuaWZlc3RbXCJsYXllcnNcIl0gaWYgXCJsYXllcnNcIiBpbiBtYW5pZmVzdCBlbHNlIG1hbmlmZXN0W1wiZnNMYXllcnNcIl0gI1N1cHBvcnQgdjEKICAgIGxheWVycz1bX1tcImRpZ2VzdFwiXSBpZiBcImRpZ2VzdFwiIGluIF8gZWxzZSBfW1wiYmxvYlN1bVwiXSBmb3IgXyBpbiBsYXllcnNdICNTdXBwb3J0IHYxCiAgICAKICAgICNXcml0ZSBkb2NrZXIuanNvbiB0byBwbGFjZSB0byBiZSB1c2VkIGJ5IENvbXBpbGVEb2NrZXJKc29uIAogICAgY29uZmlnPW1hbmlmZXN0Wydjb25maWcnXVsnZGlnZXN0J10KICAgIGNvbmZpZz1zLmdldChmXCJodHRwczovL3tyZWdpc3RyeX0vdjIve2ltYWdlfS9ibG9icy97Y29uZmlnfVwiLCBoZWFkZXJzPXtcIkFjY2VwdFwiOlwiYXBwbGljYXRpb24vdm5kLmRvY2tlci5jb250YWluZXIuaW1hZ2UudjEranNvblwifSkuanNvbigpCiAgICAKICAgICNBZGQgbGF5ZXJzIHRoYXQgd2lsbCBiZSB1c2VkIGJ5IENvbnRhaW5lci5TdGFydAogICAgY29uZmlnWydjb25maWcnXVsnbGF5ZXJzJ109W29zLnBhdGguam9pbihyZWdpc3RyeSxfLnJlbW92ZXByZWZpeChcInNoYTI1NjpcIikpIGZvciBfIGluIGxheWVyc10KICAgIAogICAgaWYgXCJFeHBvc2VkUG9ydHNcIiBub3QgaW4gY29uZmlnWydjb25maWcnXToKICAgICAgICBjb25maWdbJ2NvbmZpZyddWydFeHBvc2VkUG9ydHMnXT17fQogICAgCiAgICAjRGVsZXRlIGFsbCB1bm5lY2Nlc3Nhcnkga2V5cwogICAgZm9yIF8gaW4gbGlzdChjb25maWcua2V5cygpKToKICAgICAgICBpZiBfIT1cImNvbmZpZ1wiOgogICAgICAgICAgICBkZWwgY29uZmlnW19dCiAgICBjb25maWc9Y29uZmlnWydjb25maWcnXQogICAgCiAgICBjb25maWc9anNvbi5kdW1wcyhjb25maWcsaW5kZW50PTQpLmVuY29kZSgndXRmLTgnKQogICAgY29uZmlnX3BhdGg9cGF0aGxpYi5QYXRoKG9zLnBhdGguam9pbihwYXRoLHJlZ2lzdHJ5LGltYWdlLHRhZykpCiAgICBjb25maWdfcGF0aC5ta2RpcihwYXJlbnRzPVRydWUsIGV4aXN0X29rPVRydWUpCiAgICBjb25maWdfcGF0aC89XCJkb2NrZXIuanNvblwiCiAgICAKICAgIGNvbmZpZ19wYXRoLndyaXRlX2J5dGVzKGNvbmZpZykKICAgIAogICAgI0Rvd25sb2FkIGxheWVycwogICAgZm9yIGkgaW4gcmFuZ2UobGVuKGxheWVycykpOgogICAgICAgIGxheWVyX2Rpcj1vcy5wYXRoLmpvaW4ocGF0aCxyZWdpc3RyeSxsYXllcnNbaV0ucmVtb3ZlcHJlZml4KFwic2hhMjU2OlwiKSxcImRpZmZcIikKICAgICAgICBpZiBvcy5wYXRoLmlzZGlyKGxheWVyX2Rpcik6CiAgICAgICAgICAgIGNvbnRpbnVlICNJZiBsYXllciBleGlzdHMsIGRvbid0IGRvd25sb2FkIGl0IGFnYWluCiAgICAgICAgd2l0aCBzLmdldChmXCJodHRwczovL3tyZWdpc3RyeX0vdjIve2ltYWdlfS9ibG9icy97bGF5ZXJzW2ldfVwiLCBzdHJlYW09VHJ1ZSkgYXMgcjoKICAgICAgICAgICAgd2l0aCBvcGVuKGZcInt0ZW1wX2ZvbGRlcn0vbGF5ZXJfe2l9LnRhci5nelwiLCAnd2InKSBhcyBmOgogICAgICAgICAgICAgICAgc2h1dGlsLmNvcHlmaWxlb2JqKHIucmF3LCBmKQogICAgICAgICN1cmxsaWIucmVxdWVzdC51cmxyZXRyaWV2ZShmXCJodHRwczovL3tyZWdpc3RyeX0vdjIve2ltYWdlfS9ibG9icy97bGF5ZXJzW2ldfVwiLCBmXCJ7dGVtcF9mb2xkZXJ9L2xheWVyX3tpfS50YXIuZ3pcIikKICAgICAgICAKICAgICAgICAKICAgICAgICBvcy5tYWtlZGlycyhsYXllcl9kaXIsZXhpc3Rfb2s9VHJ1ZSkKICAgICAgICBzdWJwcm9jZXNzLnJ1bihbXCJ0YXJcIixcIi14ZlwiLGZcInt0ZW1wX2ZvbGRlcn0vbGF5ZXJfe2l9LnRhci5nelwiLFwiLUNcIixsYXllcl9kaXJdKQogICAgICAgIG9zLnJlbW92ZShmXCJ7dGVtcF9mb2xkZXJ9L2xheWVyX3tpfS50YXIuZ3pcIikKICAgIAogICAgc2h1dGlsLnJtdHJlZSh0ZW1wX2ZvbGRlcikKICAgIAoKI0NvbnZlcnQgRG9ja2VyZmlsZSB0byBDb250YWluZXJmaWxlCmRlZiBDb252ZXJ0KElOLE9VVCk6CiAgICAKICAgICAgICAgICAgICAgIAogICAgc3RhZ2U9XCJcIiAjU3RhZ2UgbmFtZQogICAgc3RhZ2VzPVtdCiAgICBkZWYgZG9ja2VyX3RvX2NvbnRhaW5lcihsaW5lKTogI0NvbnZlcnQgYSBsaW5lIG9mIGEgRG9ja2VyZmlsZSBpbnRvIGEgQ29udGFpbmVyIGZpbGUKICAgICAgICBub25sb2NhbCBzdGFnZQogICAgICAgIG5vbmxvY2FsIHN0YWdlcwogICAgICAgIGZfc3RyaW5ncz1bXSAjV2hpY2ggZWxlbWVudHMgb2YgbGluZSBzaG91bGQgYmUgYW4gZi1zdHJpbmcKICAgICAgICBsaW5lPXV0aWxzLnNwbGl0X3N0cmluZ19ieV9jaGFyKGxpbmUsXCIgXCIpICNTcGxpdCBzdHJpbmcgZm9yIGJldHRlciBwYXJzaW5nCiAgICAgICAgCiAgICAgICAgQ09NTUFORD1saW5lWzBdLnRpdGxlKCkgI0dldCBmaXJzdCBjb21tYW5kCiAgICAgICAgbGluZT1saW5lWzE6XQogICAgICAgIAogICAgICAgIEZMQUdTPXt9CiAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKGxpbmUpKToKICAgICAgICAgICAgaWYgbm90IGxpbmVbaV0uc3RhcnRzd2l0aChcIi0tXCIpOiAjSWYgdHJ1ZSwgdGhlbiBpdCdzIHRoZSBzdGFydCBvZiB0aGUgYWN0dWFsIGNvbW1hbmQgYW5kIGNhbiBiZSBrZXB0CiAgICAgICAgICAgICAgICBsaW5lPWxpbmVbaTpdCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAKICAgICAgICAgICAgZmxhZz1saW5lW2ldLnNwbGl0KCc9JywxKSAjU3BsaXQgbGluZSBieSAnPScKICAgICAgICAgICAgaWYgbGVuKGZsYWcpPT0xOgogICAgICAgICAgICAgICAgZmxhZy5hcHBlbmQoJycpICNQYWQgb3V0IHRoZSBmbGFnIGFycmF5CiAgICAgICAgICAgIGZsYWdbMF09ZmxhZ1swXVsyOl0gI1JlbW92ZSB0aGUgJy0tJwogICAgICAgICAgICBGTEFHU1tmbGFnWzBdXT1mbGFnWzFdCiAgICAgICAgCiAgICAgICAgbGluZT1saXN0KGZpbHRlcihOb25lLGxpbmUpKQogICAgCiAgICAgICAgaWYgQ09NTUFORD09J0Zyb20nOgogICAgICAgICAgICBDT01NQU5EPVwiQmFzZVwiCiAgICAgICAgICAgIGlmIFwiQVNcIiBpbiBsaW5lOiAjIE11bHRpLXN0YWdlIGJ1aWxkCiAgICAgICAgICAgICAgICBzdGFnZT1saW5lW2xpbmUuaW5kZXgoXCJBU1wiKSsxXQogICAgICAgICAgICAgICAgYmFzZT1saW5lW2xpbmUuaW5kZXgoXCJBU1wiKS0xXQogICAgICAgICAgICAgICAgc3RhZ2VzLmFwcGVuZChzdGFnZSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHN0YWdlPVwiXCIKICAgICAgICAgICAgICAgIGJhc2U9bGluZVstMV0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICBiYXNlPScvJy5qb2luKHBhcnNlX3VyaShiYXNlKSkgI1RvIGZpdCB0YWdzIGluIHRoZSB0cmFkaXRpb25hbCBVbml4IGRpcmVjdG9yeSBzdHJ1Y3R1cmUKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIHN0YWdlIT1cIlwiOgogICAgICAgICAgICAgICAgeWllbGQgZlwie3N0YWdlfT1Db250YWluZXIoJycsIHt7J3RlbXAnOicnfX0pXCIKICAgICAgICAgICAgICAgIHlpZWxkIGZcIntzdGFnZX0uSW5pdCgpXCIKICAgICAgICAgICAgICAgIHlpZWxkIGZcIlwiXCJ7c3RhZ2V9LkJhc2UoXCJ7YmFzZX1cIilcIlwiXCIKICAgICAgICAgICAgICAgIHlpZWxkIGZcIntzdGFnZX0uU3RhcnQoKVwiCiAgICAgICAgICAgICAgICByZXR1cm4gI05vdGhpbmcgZWxzZSB0byBkbwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgbGluZVstMV09YmFzZQogICAgICAgIGVsaWYgQ09NTUFORD09XCJBcmdcIjogI05vdCBzdXBwb3J0ZWQKICAgICAgICAgICAgcmV0dXJuIFwiKClcIgogICAgICAgIGVsaWYgQ09NTUFORD09XCJSdW5cIjoKICAgICAgICAgICAgbGluZT1bJyAnLmpvaW4obGluZSldCiAgICAgICAgZWxpZiBDT01NQU5EPT1cIkV4cG9zZVwiOgogICAgICAgICAgICByZXR1cm4gCiAgICAgICAgICAgIENPTU1BTkQ9XCJQb3J0XCIKICAgICAgICAgICAgbGluZS5hcHBlbmQobGluZVswXSkgI1BvcnQgbmVlZHMgdHdvIGFyZ3VtZW50cwogICAgICAgIGVsaWYgQ09NTUFORD09XCJDb3B5XCI6CiAgICAgICAgICAgIGlmIFwiZnJvbVwiIGluIEZMQUdTOgogICAgICAgICAgICAgICAgaWYgRkxBR1NbXCJmcm9tXCJdIGluIHN0YWdlczoKICAgICAgICAgICAgICAgICAgICBGcm9tPWZcInt7e0ZMQUdTWydmcm9tJ119Lm5hbWV9fVwiCiAgICAgICAgICAgICAgICAgICAgZl9zdHJpbmdzLmFwcGVuZCgwKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBGcm9tPWZcIntGTEFHU1snZnJvbSddfVwiCiAgICAgICAgICAgICAgICBsaW5lWzBdPUZyb20rXCI6XCIrbGluZVswXS5yZXBsYWNlKFwie1wiLFwie3tcIikucmVwbGFjZShcIn1cIixcIn19XCIpCiAgICAgICAgZWxpZiBDT01NQU5EPT1cIkNtZFwiOgogICAgICAgICAgICBpZiBsaW5lWzBdPT1cIltcIjogI0V4ZWMgZm9ybQogICAgICAgICAgICAgICAgbGluZT1saW5lWzE6LTFdCiAgICAgICAgICAgICAgICBsaW5lPVtfWzE6LTFdIGZvciBfIGluIGxpbmVdICNSZW1vdmUgcXVvdGVzCiAgICAgICAgICAgICAgICBsaW5lPVtzaGxleC5qb2luKGxpbmUpXQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICNFc2NhcGUgYWxsIHN0cmluZ3MKICAgICAgICBsaW5lPVsnXCJcIlwiJytsaW5lW19dLnJlcGxhY2UoXCInXCIsIHInXFwnJykucmVwbGFjZSgnXCInLCByJ1xcXCInKSsnXCJcIlwiJyBmb3IgXyBpbiByYW5nZShsZW4obGluZSkpXQogICAgICAgIGZvciBfIGluIGZfc3RyaW5nczoKICAgICAgICAgICAgbGluZVtfXT0nZicrbGluZVtfXQogICAgICAgIHJlc3VsdD0nLCAnLmpvaW4obGluZSkKICAgICAgICAKICAgICAgICAjSWYgdGhlcmUgaXMgYSBzdGFnZSwgYXBwZW5kIGNvbW1hbmRzIHdpdGggdGhlIG5hbWUKICAgICAgICBpZiBzdGFnZSE9XCJcIjoKICAgICAgICAgICAgQ09NTUFORD1zdGFnZStcIi5cIitDT01NQU5ECiAgICAgICAgICAgIAogICAgICAgIHlpZWxkIENPTU1BTkQrZlwiKHtyZXN1bHR9KVwiCiAgICAgICAgCiAgICBpZiBhbnkoSU4uc3RhcnRzd2l0aChwcm90bytcIjovL1wiKSBmb3IgcHJvdG8gaW4gW1wiaHR0cFwiLFwiaHR0cHNcIl0pOgogICAgICAgIHJlcXVlc3RzLmdldChJTikuY29udGVudCAjUmVhZCBmcm9tIGRpc2sKICAgIGVsc2U6CiAgICAgICAgd2l0aCBvcGVuKElOLCdyJykgYXMgZjoKICAgICAgICAgICAgRG9ja2VyZmlsZT1mLnJlYWQoKSAjUmVhZCBmcm9tIGZpbGUKICAgIAogICAgI01vdmUgYWxsIHNoZWxsIGxpbmUgYnJlYWtzIHRvIG9uZSBsaW5lCiAgICBEb2NrZXJmaWxlPURvY2tlcmZpbGUucmVwbGFjZShcIlxcXFxcXG5cIixcIiBcIikKICAgIAogICAgd2l0aCBvcGVuKG9zLnBhdGguam9pbihPVVQsXCJDb250YWluZXJmaWxlLnB5XCIpLFwidytcIikgYXMgZjoKICAgICAgICBEb2NrZXJmaWxlPURvY2tlcmZpbGUuc3BsaXRsaW5lcygpCiAgICAgICAgCiAgICAgICAgI0RlbGV0ZSBsYXN0IENNRCwgYXMgdGhpcyB3aWxsIGJlIHRoZSBwcm9jZXNzIHRoYXQgcnVucyB3aGVuIGNvbnRhaW5lciBzdGFydHMKICAgICAgICBmb3IgaSwgZSBpbiByZXZlcnNlZChsaXN0KGVudW1lcmF0ZShEb2NrZXJmaWxlKSkpOgogICAgICAgICAgICBpZiBlLnN0YXJ0c3dpdGgoXCJDTURcIik6CiAgICAgICAgICAgICAgICBkZWwgRG9ja2VyZmlsZVtpXQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICBmb3IgbGluZSBpbiBEb2NrZXJmaWxlOgogICAgICAgICAgICBsaW5lPWxpbmUuc3RyaXAoKQogICAgICAgICAgICBsaW5lPScgJy5qb2luKGxpbmUuc3BsaXQoKSkgI1JlbW92ZSBleHRyYSBzcGFjaW5nCiAgICAgICAgICAgIGlmIG5vdCBsaW5lLnN0YXJ0c3dpdGgoJyMnKSBhbmQgbGluZToKICAgICAgICAgICAgICAgIGZvciByZXN1bHQgaW4gZG9ja2VyX3RvX2NvbnRhaW5lcihsaW5lKToKICAgICAgICAgICAgICAgICAgICBpZiByZXN1bHQhPVwiKClcIjoKICAgICAgICAgICAgICAgICAgICAgICAgZi53cml0ZShyZXN1bHQrXCJcXG5cIikKICAgICAgICBpZiBzdGFnZSE9XCJcIjoKICAgICAgICAgICAgZi53cml0ZShcIlwiXCJDb3B5KGZcInt7e30ubmFtZX19Oi9cIiwgXCIvXCIpXFxuXCJcIlwiLmZvcm1hdChzdGFnZXNbLTFdKSkgI1RoZSBsYXN0IHN0YWdlIGNhbiBiZSBuYW1lZCwgc28gaWYgaXQgaXMsIGp1c3QgY29weSBldmVyeXRoaW5nIGZyb20gdGhhdCBzdGFnZSB0byB0aGUgYWN0dWFsIGRpZmYKICAgICAgICBmb3Igc3RhZ2UgaW4gc3RhZ2VzOgogICAgICAgICAgICBmLndyaXRlKGZcIntzdGFnZX0uRGVsZXRlKClcXG5cIikKCiNDb252ZXJ0IGRvY2tlci5qc29uIGludG8gbGlzdCBvZiBjb21tYW5kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IFN0YXJ0CmRlZiBDb21waWxlRG9ja2VySnNvbihmaWxlKToKICAgIGxheWVycz1bXQogICAgY29tbWFuZHM9W10KICAgIHdpdGggb3BlbihmaWxlLFwicmJcIikgYXMgZjoKICAgICAgY29uZmlnPWpzb24ubG9hZChmKQogICAgCiAgICBmb3Iga2V5IGluIGNvbmZpZzoKICAgICAgICBpZiBrZXk9PVwibGF5ZXJzXCI6CiAgICAgICAgICAgIGZvciBfIGluIGNvbmZpZ1trZXldOgogICAgICAgICAgICAgICAgbGF5ZXJzLmFwcGVuZChmXCJMYXllcigne199JylcIikKICAgICAgICBlbGlmIGtleT09XCJFbnZcIjoKICAgICAgICAgICAgZm9yIF8gaW4gY29uZmlnW2tleV06CiAgICAgICAgICAgICAgICBjb21tYW5kcy5hcHBlbmQoZlwiXCJcIkVudihcXFwiXFxcIlxcXCJ7X31cXFwiXFxcIlxcXCIpXCJcIlwiKQogICAgICAgIGVsaWYga2V5PT1cIldvcmtpbmdEaXJcIjoKICAgICAgICAgICAgY29tbWFuZHMuYXBwZW5kKGZcIldvcmtkaXIoJ3tjb25maWdba2V5XX0nKVwiKQogICAgICAgIGVsaWYga2V5PT1cIkV4cG9zZWRQb3J0c1wiOgogICAgICAgICAgICBmb3IgXyBpbiBjb25maWdba2V5XToKICAgICAgICAgICAgICAgIF89Xy5zcGxpdChcIi9cIilbMF0KICAgICAgICAgICAgICAgIGNvbW1hbmRzLmFwcGVuZChmXCJQb3J0KHtffSx7X30pXCIpCiAgICAgICAgaWYga2V5PT1cIkNtZFwiOgogICAgICAgICAgICBjb21tYW5kcy5hcHBlbmQoZlwiXCJcIlJ1bihcXFwiXFxcIlxcXCJ7c2hsZXguam9pbihjb25maWdba2V5XSl9XFxcIlxcXCJcXFwiKVwiXCJcIikKICAgIHJldHVybiBsYXllcnMsIGNvbW1hbmRzCgoiIiIKbW9kdWxlX2RpY3RbIl91dGlscyIrb3Muc2VwKyJfX2luaXRfXy5weSJdPSIiIgpmcm9tIC5jb250YWluZXJfZG9ja2VyIGltcG9ydCBDb252ZXJ0CmZyb20gLm1pc2MgaW1wb3J0ICoKCgoiIiIKCmltcG9ydCBvcwppbXBvcnQgdHlwZXMKaW1wb3J0IHppcGZpbGUKaW1wb3J0IHN5cwppbXBvcnQgaW8KaW1wb3J0IGpzb24KCmNsYXNzIFppcEltcG9ydGVyKG9iamVjdCk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgemlwX2ZpbGUpOgogICAgICAgIHNlbGYuemZpbGUgPSB6aXBfZmlsZQogICAgICAgIHNlbGYuX3BhdGhzID0gW3guZmlsZW5hbWUgZm9yIHggaW4gc2VsZi56ZmlsZS5maWxlbGlzdF0KICAgICAgICAKICAgIGRlZiBfbW9kX3RvX3BhdGhzKHNlbGYsIGZ1bGxuYW1lKToKICAgICAgICAjIGdldCB0aGUgcHl0aG9uIG1vZHVsZSBuYW1lCiAgICAgICAgcHlfZmlsZW5hbWUgPSBmdWxsbmFtZS5yZXBsYWNlKCIuIiwgb3Muc2VwKSArICIucHkiCiAgICAgICAgIyBnZXQgdGhlIGZpbGVuYW1lIGlmIGl0IGlzIGEgcGFja2FnZS9zdWJwYWNrYWdlCiAgICAgICAgcHlfcGFja2FnZSA9IGZ1bGxuYW1lLnJlcGxhY2UoIi4iLCBvcy5zZXApICsgb3Muc2VwICsgIl9faW5pdF9fLnB5IgogICAgICAgIGlmIHB5X2ZpbGVuYW1lIGluIHNlbGYuX3BhdGhzOgogICAgICAgICAgICByZXR1cm4gcHlfZmlsZW5hbWUKICAgICAgICBlbGlmIHB5X3BhY2thZ2UgaW4gc2VsZi5fcGF0aHM6CiAgICAgICAgICAgIHJldHVybiBweV9wYWNrYWdlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBkZWYgZmluZF9tb2R1bGUoc2VsZiwgZnVsbG5hbWUsIHBhdGgpOgogICAgICAgIGlmIHNlbGYuX21vZF90b19wYXRocyhmdWxsbmFtZSkgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHJldHVybiBzZWxmCiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBkZWYgbG9hZF9tb2R1bGUoc2VsZiwgZnVsbG5hbWUpOgogICAgICAgIGZpbGVuYW1lID0gc2VsZi5fbW9kX3RvX3BhdGhzKGZ1bGxuYW1lKQogICAgICAgIGlmIG5vdCBmaWxlbmFtZSBpbiBzZWxmLl9wYXRoczoKICAgICAgICAgICAgcmFpc2UgSW1wb3J0RXJyb3IoZnVsbG5hbWUpCiAgICAgICAgbmV3X21vZHVsZSA9IHR5cGVzLk1vZHVsZVR5cGUoZnVsbG5hbWUpCiAgICAgICAgc3lzLm1vZHVsZXNbZnVsbG5hbWVdPW5ld19tb2R1bGUKICAgICAgICBpZiBmaWxlbmFtZS5lbmRzd2l0aCgiX19pbml0X18ucHkiKToKICAgICAgICAgICAgbmV3X21vZHVsZS5fX3BhdGhfXyA9IFtdIAogICAgICAgICAgICBuZXdfbW9kdWxlLl9fcGFja2FnZV9fID0gZnVsbG5hbWUKICAgICAgICBlbHNlOgogICAgICAgICAgICBuZXdfbW9kdWxlLl9fcGFja2FnZV9fID0gZnVsbG5hbWUucnBhcnRpdGlvbignLicpWzBdCiAgICAgICAgZXhlYyhzZWxmLnpmaWxlLm9wZW4oZmlsZW5hbWUsICdyJykucmVhZCgpLG5ld19tb2R1bGUuX19kaWN0X18pCiAgICAgICAgbmV3X21vZHVsZS5fX2ZpbGVfXyA9IGZpbGVuYW1lCiAgICAgICAgbmV3X21vZHVsZS5fX2xvYWRlcl9fID0gc2VsZgogICAgICAgIG5ld19tb2R1bGUuX19zcGVjX189anNvbi5fX3NwZWNfXyAjIFRvIHNhdGlzZnkgaW1wb3J0bGliLl9jb21tb24uZ2V0X3BhY2thZ2UKICAgICAgICByZXR1cm4gbmV3X21vZHVsZQoKbW9kdWxlX3ppcD16aXBmaWxlLlppcEZpbGUoaW8uQnl0ZXNJTygpLCJ3IikKZm9yIGtleSBpbiBtb2R1bGVfZGljdDoKICAgIG1vZHVsZV96aXAud3JpdGVzdHIoa2V5LG1vZHVsZV9kaWN0W2tleV0pCgptb2R1bGVfaW1wb3J0ZXI9WmlwSW1wb3J0ZXIobW9kdWxlX3ppcCkKc3lzLm1ldGFfcGF0aC5pbnNlcnQoMCxtb2R1bGVfaW1wb3J0ZXIpCgojZnJvbSBfdXRpbHMgaW1wb3J0ICoKaW1wb3J0IF91dGlscwpnbG9iYWxzKCkudXBkYXRlKF91dGlscy5fX2RpY3RfXykKICAgIAppZiBtb2R1bGVfaW1wb3J0ZXIgaW4gc3lzLm1ldGFfcGF0aDoKICAgIHN5cy5tZXRhX3BhdGgucmVtb3ZlKG1vZHVsZV9pbXBvcnRlcikKCiNmb3Iga2V5IGluIHN5cy5tb2R1bGVzLmNvcHkoKToKIyAgICBpZiBrZXk9PSJfdXRpbHMiIG9yIGtleS5zdGFydHN3aXRoKCJfdXRpbHMuIik6CiMgICAgICAgIGRlbCBzeXMubW9kdWxlc1trZXldCg==').decode("utf-8"),_utils_module.__dict__)
sys.modules["_utils"]=_utils_module
import subprocess
import re
import sys
import os
import threading
import time
import ast
#import pwd, grp
import json
import hashlib
import signal
import shutil
import random
import types
import getpass
import socket

import utils

import _utils

utils.GLOBALS=globals()

SHELL_CWD=os.environ.get("PWD")

def convert_colon_string_to_directory(string):
    string=utils.split_string_by_char(string,char=":")
    if string[0]=="root":
        string=string[1] #The directory is just the absolute path in the host
    elif len(string)==1:
        string=string[0] # No container was specified, so assume "root"
    else:
        string=f"{utils.ROOT}/{string[0]}/diff{string[1]}" # Container was specified, so use it
    string=os.path.expanduser(string)
    return string
utils.get_all_items=_utils.misc.get_all_items
  
class Container:
    def __init__(self,_name,_flags={},_unionopts=None,_workdir='/',_env=None,_uid=None,_gid=None,_shell=None):
        if 'temp' in _flags:
            _name=''.join(random.choice(string.ascii_lowercase + string.digits) for _ in range(16)) #Generate string for temp containers
        
        self.original_name=_name #For use in Init
        if ":" in _name or 'pull' in _flags: #Is a container
            _name='/'.join(_utils.container_docker.parse_uri(_name))
        
        self.Class = utils.Class(self,_name,_flags,_workdir)
        self.normalized_name=self.name.replace("/","_")
        self.unionopts=utils.get_value(_unionopts,[])
        
        self.env=utils.get_value(_env,f"export PATH=/bin:/usr/sbin:/sbin:/usr/bin HOME=$(eval echo ~$(whoami))")
        
        #Whether we mounted dev, proc, etc.
        self.mounted_special=False
        
        self.namespaces={"user":_utils.misc.str2bool(os.getenv("CONTAINER_USER_NAMESPACES","0")),"net":_utils.misc.str2bool(os.getenv("CONTAINER_NET_NAMESPACES","0"))}
        
        self.workdir=_workdir
        
        
        self.uid=utils.get_value(_uid,0 if self.namespaces['user'] else os.getuid())
        self.gid=utils.get_value(_gid,0 if self.namespaces['user'] else os.getgid())
        
        self.shell=utils.get_value(_shell,"/bin/bash")
        
        self.temp_layers=[]
        
        self.hardlinks=[]
        
        self.build=False
        
        self.base=False
        self.ports=[]
        self.netns=f"{self.normalized_name}-netns"
        self.setup=False #Whether _setup was run once
        
                    
        self._load() #Read from lock to initialize the same state
        
        
            
        
        
    #Functions        
    def _update(self,keys):
        if self.build:
            return #No lock file when building --- no need for it
        if isinstance(keys,str):
            keys=[keys]
        
        with open(self.lock,"r") as f:
            data=json.load(f)
            
        for key in keys:
            data[key]=getattr(self,key)
        
        with open(self.lock,"w+") as f:
            json.dump(data,f)
             
    def _exit(self,a,b):
        
        self.Class.kill_auxiliary_processes()
        
        #Unmount dev,proc, etc. if directory exists
        if os.path.isdir("merged"):
            for dir in os.listdir("merged"):
                if os.path.ismount(f"merged/{dir}"):
                    if sys.platform=='linux':
                        utils.shell_command(["sudo","mount","--make-rslave",f"merged/{dir}"])
                        utils.shell_command(["sudo","umount","-R","-l",f"merged/{dir}"])
                    elif sys.platform=='darwin':
                        utils.shell_command(["sudo","umount",f"merged/{dir}"])
                    elif sys.platform=='cygwin':
                        utils.shell_command(["umount",f"merged/{dir}"])
                    
        
        diff_directories=[utils.split_string_by_char(_," ")[2] for _ in utils.shell_command(["mount"]).splitlines() if f"{utils.ROOT}/{self.name}/diff" in _]
        for dir in diff_directories:
             utils.shell_command(["umount","-l",dir])
             utils.shell_command(["rm","-rf",dir])
        utils.shell_command(["umount","-l","merged"])
    
        
        for hardlink in self.hardlinks:
            os.remove(hardlink) #Remove volume hardlinks when done
        
        utils.shell_command(["sudo","unlink","diff/etc/resolv.conf"])
        
        if self.namespaces['net']:
            utils.shell_command(["sudo","ip","netns","del",self.netns])
        
        for port in self.ports:
            for pid in list(map(int,[_ for _ in utils.shell_command(["lsof","-t","-i",f":{port}"]).splitlines()])):
                utils.kill_process_gracefully(pid) #Kill socat(s)

        exit()
    
    def _load(self):
        if os.path.isfile(self.lock):
            with open(self.lock,"r") as f:
                data=json.load(f)
            
            for key in data:
                setattr(self,key,data[key]) #Read variables from .lock and populate self with them as a bootstrap
    
    def _setup(self):
        if not self.setup:
            if not isinstance(self.unionopts,str): #If unionopts has not yet been joined, join it
                self.unionopts.insert(0,[self.name,"RW"]) #Make the current diff folder the top-most writable layer
                      
                temp=[]
                for _ in self.unionopts:
                    temp.append(f"{utils.ROOT}/{_[0]}/diff={_[1]}")
                self.unionopts=":".join(temp)
                
            #Prevent merged from being mounted multiple times
            if not os.path.ismount("merged"):
                utils.shell_command(["unionfs","-o","allow_other,cow,hide_meta_files",self.unionopts,"merged"])
                   
            #Mount dev,proc, etc. over the unionfs to deal with mmap bugs (fuse may be patched to deal with this natively so I can just mount on the diff directory, but for now, this is what is needed)
            if not self.mounted_special:
                for dir in ["dev","proc"]:
                    if not os.path.ismount(f"merged/{dir}"):
                        #Use bind mounts for special mounts, as bindfs has too many quirks (and I'm using sudo regardless)
                        if sys.platform=="darwin":
                            #MacOS doesn't have bind-mounts
                            fstype=utils.shell_command(["stat","-f","-c","%T",f"/{dir}"],stderr=subprocess.DEVNULL)
                            utils.shell_command(["sudo", "mount", "-t", fstype, fstype, f"merged/{dir}"])
                        elif sys.platform=="cygwin":
                            #Cygwin doesn't have rbind
                            utils.shell_command(["mount","-o","bind",f"/{dir}",f"merged/{dir}"])
                        elif sys.platform=="linux":
                            utils.shell_command(["sudo","mount","--rbind",f"/{dir}",f"merged/{dir}"])
                       
                self.mounted_special=True
                
                if self.namespaces['net']: #Start network namespace
                    self.veth_pair={"netns":{"name":f"{self.normalized_name}-veth0"},"host":{"name":f"{self.normalized_name}-veth1"}}
                    #self.veth_pair=types.SimpleNamespace(netns=types.SimpleNamespace(name=f"{self.normalized_name}-veth0"),host=types.SimpleNamespace(name=f"{self.normalized_name}-veth1"))
                    
                    while True:
                        cidr=[random.randint(0,255),random.randint(0,255)]
                        if any(f"{cidr[0]}.{cidr[1]}.0.1/24" in _ for _ in utils.shell_command(["ip","addr"],stderr=subprocess.DEVNULL)): #Check if CIDR range is already taken
                            continue
                        else:
                            self.veth_pair['host']['cidr']=f"{cidr[0]}.{cidr[1]}.0.1/24"
                            self.veth_pair['netns']['cidr']=f"{cidr[0]}.{cidr[1]}.0.2/24"
                            break
                    
                    internet_interface=utils.shell_command("ip route get 8.8.8.8 | grep -Po '(?<=(dev ))(\S+)'",stderr=subprocess.DEVNULL,arbitrary=True) 
                    commands=[
                        ['ip', 'netns', 'add', self.netns],
                        ['ip', 'netns', 'exec', self.netns, 'ip', 'link', 'set', 'lo', 'up'],
                        ['ip', 'link', 'add', self.veth_pair['host']['name'], 'type', 'veth', 'peer', 'name', self.veth_pair['netns']['name']],
                        ['ip', 'link', 'set', self.veth_pair['netns']['name'], 'netns', self.netns],
                        ['ip', 'addr', 'add', self.veth_pair['host']['cidr'], 'dev', self.veth_pair['host']['name']],
                        ['ip', 'netns', 'exec', self.netns, 'ip', 'addr', 'add', self.veth_pair['netns']['cidr'], 'dev', self.veth_pair['netns']['name']],
                        ['ip', 'link', 'set', self.veth_pair['host']['name'], 'up'],
                        ['ip', 'netns', 'exec', self.netns, 'ip', 'link', 'set', self.veth_pair['netns']['name'], 'up'],
                        ['sysctl', '-w', 'net.ipv4.ip_forward=1'],
                        ['iptables', '-A', 'FORWARD', '-o', internet_interface, '-i', self.veth_pair['host']['name'], '-j', 'ACCEPT'],
                        ['iptables', '-A', 'FORWARD', '-i', internet_interface, '-o', self.veth_pair['host']['name'], '-j', 'ACCEPT'],
                        ['iptables', '-t', 'nat', '-A', 'POSTROUTING', '-s', self.veth_pair['netns']['cidr'], '-o', internet_interface, '-j', 'MASQUERADE'],
                        ['ip', 'netns', 'exec', self.netns, 'ip', 'route', 'add', 'default', 'via', self.veth_pair['host']['cidr'][:-3]],
                        ["ip", "netns", "exec", self.netns, "sysctl", "-w", "net.ipv4.ip_unprivileged_port_start=1"]
                        ]
                    
                    for command in commands:
                        utils.shell_command(["sudo"]+command,stdout=subprocess.DEVNULL)
                    
                    if not os.path.isdir("diff/etc"):
                        os.makedirs("diff/etc",exist_ok=True)
                    utils.shell_command(["sudo","ln","-f","/etc/resolv.conf","diff/etc/resolv.conf"])
            self.setup=True
    def Ps(self,process=None):
        if process=="main" or ("main" in self.flags):
            return self.Class.get_main_process()
        elif process=="auxiliary" or ("auxiliary" in self.flags):
            if not os.path.isdir("merged"):
                return []
            processes=[_ for _ in utils.shell_command(["lsof","-t","-w","--","merged"]).splitlines()]
            return list(map(int,processes))
    
    def Mount(self,IN,OUT):
        IN=convert_colon_string_to_directory(IN)
        if os.path.isdir(IN):
            try:
                os.makedirs(f"diff{OUT}",exist_ok=True)
            except FileExistsError:
                os.remove(f"diff{OUT}")
                os.makedirs(f"diff{OUT}",exist_ok=True)
            if not os.path.ismount(f"diff{OUT}"):
                utils.shell_command(["bindfs",IN,f"diff{OUT}"]) #Only use bindfs 1.15.1
        else:
            os.makedirs(os.path.dirname(f"diff{OUT}"),exist_ok=True) #Make parent directory if it doesn't exist
            try:
                os.link(IN,f"diff{OUT}")
            except FileExistsError:
                os.remove(f"diff{OUT}")
                os.link(IN,f"diff{OUT}")
            self.hardlinks.append(f"diff{OUT}")
            
    def Copy(self,src,dest):
        #Relative directory
        if not dest.startswith("/"):
            dest=f"diff{self.workdir}/{dest}"
        
        #Absolute directory
        else:
            dest=f"diff{dest}"
        
        src=convert_colon_string_to_directory(src)
        #Relative directory
        if not src.startswith("/"):
            src=f"{SHELL_CWD}/{src}"
            
        #Remove trailing slashes, in order to prevent gotchas with cp
        if src.endswith("/"):
            src=src[:-1]
        if dest.endswith("/"):
            dest=dest[:-1]
                        
        cp_error=utils.shell_command(["cp","-a",f"{src}",f"{dest}"])
        if "cp: cannot create" in cp_error:
            #dest does not exist, so create its parent's folder
            os.makedirs(os.path.dirname(dest),exist_ok=True)
            utils.shell_command(["cp","-a",f"{src}",f"{dest}"])

    def Loop(self,*args, **kwargs):
        self.Class.loop(*args, **kwargs)
        #Run(f'(while true; do "{command}"; sleep {delay}; done)')
        
    def Wait(self,*args, **kwargs):
        utils.wait(*args, **kwargs)

    def Layer(self,layer,mode="RO"):
        if self.build:
            if len(os.listdir(f"{utils.ROOT}/{layer}/diff"))<2:
                #Build layer if it doesn't exist
                self.__class__(layer).Build()
                #utils.shell_command(["container","build",layer])
                self.temp_layers.append(layer) #Layer wasn't needed before so we can delete it after
        _utils.misc.load_dependencies(self,utils.ROOT,layer)
        if [layer,mode] not in self.unionopts:
            self.unionopts.insert(0,[layer,mode]) #Prevent multiple of the same layers
            
    def Base(self,base):
        if self.base:
            return #Prevent multiple bases
        self.base=True
        #Make Base a synonym for Layer
        return self.Layer(base)
        
    def Workdir(self,*args, **kwargs):
        self.Class.workdir(*args, **kwargs)
        os.makedirs(f"diff{self.workdir}",exist_ok=True)
        self._update("workdir")
    
    def Env(self,*args, **kwargs):
        self.env=utils.add_environment_variable_to_string(self.env,*args, **kwargs)
        self._update("env")
    
    def User(self,user=""):
        if user=="":
            self.uid=os.getuid()
            self.gid=os.getgid()
        else:
            user=utils.split_string_by_char(user,char=":")
            if len(user)==1:
                user.append(user[0]) #Make group the same as user if it is not available
            if user[0].isnumeric():
                self.uid=user[0]
            else:
                self.uid=int(self.Run(f"id -u {user[0]}",pipe=True))
                #self.uid=pwd.getpwnam(user[0])[2]
            
            if user[1].isnumeric():
                self.gid=user[1]
            else:
                self.gid=int(self.Run(f"id -g {user[1]}",pipe=True))
                #self.gid=pwd.getpwnam(user[1])[2]
        self._update(["uid","gid"])
    
    def Shell(self,shell):
        self.shell=shell
        self._update("shell")        
    
    def Volume(self,name,path):
        name=utils.split_string_by_char(name,char=":")
        
        #Allow to use volumes from other containers
        if len(name)==1:
            name.insert(0,self.name)
        volume_path=f"{utils.ROOT}/{name[0]}/Volumes/{name[1]}"
        
        self.Mount(volume_path,path)
        
        
    def Port(self,_from,_to=None):
        if not _to:
            _to=_from
        
        _from=int(_from)
        _to=int(_to)
        
        if _utils.misc.is_port_in_use(_to): #Port is in use, so leave
            return 
        if _to in self.ports:
            return
        
        if not self.namespaces['net']:
            if _from==_to:
                return #If the ports are the same, don't socat it, since it will take up the port.
        for proto in ["tcp","udp"]:
            if self.namespaces['net']:
                sock_name=os.path.join(self.temp,f"{proto}-{_to}.sock")
                utils.shell_command(["socat", f"{proto}-listen:{_to},fork,reuseaddr,bind=127.0.0.1", f"""exec:'sudo ip netns exec {self.netns} socat STDIO "{proto}-connect:127.0.0.1:{_from}"',nofork"""], stdout=subprocess.DEVNULL,block=False)
                #utils.shell_command(["sudo","ip","netns","exec",self.netns,"socat",f"UNIX-LISTEN:{sock_name},fork",f"{proto}-connect:127.0.0.1:{_from}"], stdout=subprocess.DEVNULL,block=False)
                #utils.shell_command(["sudo","socat",f"{proto}-listen:{_to},fork,reuseaddr,bind=127.0.0.1",f"UNIX-CONNECT:{sock_name}"],stdout=subprocess.DEVNULL,block=False)
            else:
               utils.shell_command(["socat", f"{proto}-l:{_to},fork,reuseaddr,bind=127.0.0.1", f"{proto}:127.0.0.1:{_from}"], stdout=subprocess.DEVNULL,block=False)
        self.ports.append(_to)
        
    def Run(self,command="",pipe=False):
        
        self._setup()
        if self.build:
            if command.strip()!="":
                print(f"Command: {command}")
        
        with open(self.log,"a+") as log_file:
            log_file.write(f"Command: {command}\n")
            log_file.flush()
            
            #Pipe output to variable
            if pipe:
                stdout=subprocess.PIPE
                stderr=subprocess.DEVNULL
            #Print output to file
            else:
                stdout=log_file
                stderr=subprocess.STDOUT
            
            return utils.shell_command(_utils.misc.chroot_command(self,command),stdout=stdout,stderr=stderr)
    
            
    #Commands      
    def Start(self):
        if "Started" in self.Status():
            return f"Container {self.name} is already started"
        
        #Fork process, so it can run in the background
        pid=os.fork()
        
        #If child, run code, then exit 
        if pid==0:
            with open(self.log,"a+") as f:
                pass
            #Open a lock file so I can find it with lsof later
            lock_file=open(self.lock,"w+")
            
            with open(self.lock,"w+") as f:
                json.dump({},f)
            
            self._update(["env","workdir", "uid","gid","shell"])
            
            signal.signal(signal.SIGTERM,self._exit)
            
            docker_layers=[]
            docker_commands=[]
            
            if os.path.isfile("docker.json"):
                docker_layers, docker_commands=_utils.container_docker.CompileDockerJson("docker.json")
            
            #Set up layers first from docker_kayer
            utils.execute(self,'\n'.join(docker_layers))
            
            #Run container-compose.py as an intermediary step
            utils.execute(self,open("container-compose.py"))
            
            utils.execute(self,'\n'.join(docker_commands))
            
            #Don't have to put Run() in container-compose.py just to start it
            self.Run()
            self.Wait()
            exit()
        
    def Build(self):
        self.Stop()
        self.build=True
        self.namespaces['net']=False #Don't enable it when building, as it just gets messy
        signal.signal(signal.SIGTERM,self._exit)
        signal.signal(signal.SIGINT,self._exit)
        
        utils.execute(self,open("Containerfile.py"))

        self.Stop()
        _utils.misc.remove_empty_folders_in_diff()
        for layer in self.temp_layers:
            #Clean layer if it was temporary
            self.__class__(layer).Clean()
            #utils.shell_command(["container","clean",layer])
        self._exit(1,2)
        
       
    def Stop(self):
        return [self.Class.stop()]

    def Restart(self):
        return self.Class.restart()
    
    def Chroot(self):

        if "Stopped" in self.Status():
            stopped=True
        else:
            stopped=False
            
        command=self.shell #By default, run the shell
        if "run" in self.flags:
            command=self.flags["run"]
        if stopped:
            self.Start()
            while not os.listdir("merged"): #Wait until merged directory has files before you attempt to chroot
                pass
        utils.shell_command(_utils.misc.chroot_command(self,command),stdout=None)
        if stopped:
            self.Stop()
        
        if "and-stop" in self.flags:
            return [self.Stop()]
    
    
    def List(self):
        return self.Class.list()

    def Init(self):
        
        if "pull" in self.flags:
            
            _utils.container_docker.Import(self.original_name,utils.ROOT)
            
            if "dockerfile" in self.flags:
                _utils.container_docker.Convert(self.flags["dockerfile"],os.path.join(utils.ROOT,self.name))
        os.makedirs(f"{utils.ROOT}/{self.name}",exist_ok=True)
        os.chdir(f"{utils.ROOT}/{self.name}")
        os.makedirs("diff",exist_ok=True)
        os.makedirs("merged",exist_ok=True)
        
        if 'temp' in self.flags:
            self.flags['no-edit']=''
            self.flags['only-chroot']=''
        with open(f"container-compose.py",'a'):
            pass
        
        if 'build' in self.flags:
            with open(f"Containerfile",'a'):
                pass
        
        if 'no-edit' not in self.flags:
            self.Edit()
            
        if utils.check_if_element_any_is_in_list(['only-chroot','and-chroot'],self.flags):
            return [self.Start(),self.Delete() if 'temp' in self.flags else None]

    def Edit(self):
        if 'build' in self.flags:
            utils.shell_command([os.getenv("EDITOR","vi"),f"{utils.ROOT}/{self.name}/Containerfile.py"],stdout=None)
        else:
            utils.shell_command([os.getenv("EDITOR","vi"),f"{utils.ROOT}/{self.name}/container-compose.py"],stdout=None)

    def Status(self):
        return self.Class.status()

    def Log(self):
        self.Class.log()
    
    def Clean(self):
        self.Stop()
        os.system(f"sudo rm -rf diff/*")
    
    def Delete(self):
        self.Stop()
        utils.shell_command(["sudo","rm","-rf",f"{utils.ROOT}/{self.name}"])
    
    def Watch(self):
        self.Class.watch()

utils.CLASS=Container

utils.ROOT=utils.get_root_directory()  
   
if __name__ == "__main__":
    NAMES,FLAGS,FUNCTION=utils.extract_arguments()
    
    for name in utils.list_items_in_root(NAMES, FLAGS):
        item=utils.CLASS(name,FLAGS)
        result=utils.execute_class_method(item,FUNCTION)
        
        utils.print_list(result)
        

    
